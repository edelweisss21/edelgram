var oS=Object.defineProperty;var aS=(t,e,n)=>e in t?oS(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n;var U=(t,e,n)=>(aS(t,typeof e!="symbol"?e+"":e,n),n);function p1(t,e){for(var n=0;n<e.length;n++){const r=e[n];if(typeof r!="string"&&!Array.isArray(r)){for(const i in r)if(i!=="default"&&!(i in t)){const s=Object.getOwnPropertyDescriptor(r,i);s&&Object.defineProperty(t,i,s.get?s:{enumerable:!0,get:()=>r[i]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerPolicy&&(s.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?s.credentials="include":i.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(i){if(i.ep)return;i.ep=!0;const s=n(i);fetch(i.href,s)}})();function m1(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var g1={exports:{}},Gh={},y1={exports:{}},ve={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var yu=Symbol.for("react.element"),lS=Symbol.for("react.portal"),uS=Symbol.for("react.fragment"),cS=Symbol.for("react.strict_mode"),hS=Symbol.for("react.profiler"),dS=Symbol.for("react.provider"),fS=Symbol.for("react.context"),pS=Symbol.for("react.forward_ref"),mS=Symbol.for("react.suspense"),gS=Symbol.for("react.memo"),yS=Symbol.for("react.lazy"),Hv=Symbol.iterator;function vS(t){return t===null||typeof t!="object"?null:(t=Hv&&t[Hv]||t["@@iterator"],typeof t=="function"?t:null)}var v1={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},_1=Object.assign,w1={};function _a(t,e,n){this.props=t,this.context=e,this.refs=w1,this.updater=n||v1}_a.prototype.isReactComponent={};_a.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};_a.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function E1(){}E1.prototype=_a.prototype;function Um(t,e,n){this.props=t,this.context=e,this.refs=w1,this.updater=n||v1}var Vm=Um.prototype=new E1;Vm.constructor=Um;_1(Vm,_a.prototype);Vm.isPureReactComponent=!0;var Wv=Array.isArray,b1=Object.prototype.hasOwnProperty,$m={current:null},T1={key:!0,ref:!0,__self:!0,__source:!0};function C1(t,e,n){var r,i={},s=null,o=null;if(e!=null)for(r in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(s=""+e.key),e)b1.call(e,r)&&!T1.hasOwnProperty(r)&&(i[r]=e[r]);var a=arguments.length-2;if(a===1)i.children=n;else if(1<a){for(var l=Array(a),c=0;c<a;c++)l[c]=arguments[c+2];i.children=l}if(t&&t.defaultProps)for(r in a=t.defaultProps,a)i[r]===void 0&&(i[r]=a[r]);return{$$typeof:yu,type:t,key:s,ref:o,props:i,_owner:$m.current}}function _S(t,e){return{$$typeof:yu,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function Fm(t){return typeof t=="object"&&t!==null&&t.$$typeof===yu}function wS(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var qv=/\/+/g;function df(t,e){return typeof t=="object"&&t!==null&&t.key!=null?wS(""+t.key):e.toString(36)}function Nc(t,e,n,r,i){var s=typeof t;(s==="undefined"||s==="boolean")&&(t=null);var o=!1;if(t===null)o=!0;else switch(s){case"string":case"number":o=!0;break;case"object":switch(t.$$typeof){case yu:case lS:o=!0}}if(o)return o=t,i=i(o),t=r===""?"."+df(o,0):r,Wv(i)?(n="",t!=null&&(n=t.replace(qv,"$&/")+"/"),Nc(i,e,n,"",function(c){return c})):i!=null&&(Fm(i)&&(i=_S(i,n+(!i.key||o&&o.key===i.key?"":(""+i.key).replace(qv,"$&/")+"/")+t)),e.push(i)),1;if(o=0,r=r===""?".":r+":",Wv(t))for(var a=0;a<t.length;a++){s=t[a];var l=r+df(s,a);o+=Nc(s,e,n,l,i)}else if(l=vS(t),typeof l=="function")for(t=l.call(t),a=0;!(s=t.next()).done;)s=s.value,l=r+df(s,a++),o+=Nc(s,e,n,l,i);else if(s==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return o}function rc(t,e,n){if(t==null)return t;var r=[],i=0;return Nc(t,r,"","",function(s){return e.call(n,s,i++)}),r}function ES(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var Jt={current:null},Oc={transition:null},bS={ReactCurrentDispatcher:Jt,ReactCurrentBatchConfig:Oc,ReactCurrentOwner:$m};function I1(){throw Error("act(...) is not supported in production builds of React.")}ve.Children={map:rc,forEach:function(t,e,n){rc(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return rc(t,function(){e++}),e},toArray:function(t){return rc(t,function(e){return e})||[]},only:function(t){if(!Fm(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};ve.Component=_a;ve.Fragment=uS;ve.Profiler=hS;ve.PureComponent=Um;ve.StrictMode=cS;ve.Suspense=mS;ve.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=bS;ve.act=I1;ve.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var r=_1({},t.props),i=t.key,s=t.ref,o=t._owner;if(e!=null){if(e.ref!==void 0&&(s=e.ref,o=$m.current),e.key!==void 0&&(i=""+e.key),t.type&&t.type.defaultProps)var a=t.type.defaultProps;for(l in e)b1.call(e,l)&&!T1.hasOwnProperty(l)&&(r[l]=e[l]===void 0&&a!==void 0?a[l]:e[l])}var l=arguments.length-2;if(l===1)r.children=n;else if(1<l){a=Array(l);for(var c=0;c<l;c++)a[c]=arguments[c+2];r.children=a}return{$$typeof:yu,type:t.type,key:i,ref:s,props:r,_owner:o}};ve.createContext=function(t){return t={$$typeof:fS,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:dS,_context:t},t.Consumer=t};ve.createElement=C1;ve.createFactory=function(t){var e=C1.bind(null,t);return e.type=t,e};ve.createRef=function(){return{current:null}};ve.forwardRef=function(t){return{$$typeof:pS,render:t}};ve.isValidElement=Fm;ve.lazy=function(t){return{$$typeof:yS,_payload:{_status:-1,_result:t},_init:ES}};ve.memo=function(t,e){return{$$typeof:gS,type:t,compare:e===void 0?null:e}};ve.startTransition=function(t){var e=Oc.transition;Oc.transition={};try{t()}finally{Oc.transition=e}};ve.unstable_act=I1;ve.useCallback=function(t,e){return Jt.current.useCallback(t,e)};ve.useContext=function(t){return Jt.current.useContext(t)};ve.useDebugValue=function(){};ve.useDeferredValue=function(t){return Jt.current.useDeferredValue(t)};ve.useEffect=function(t,e){return Jt.current.useEffect(t,e)};ve.useId=function(){return Jt.current.useId()};ve.useImperativeHandle=function(t,e,n){return Jt.current.useImperativeHandle(t,e,n)};ve.useInsertionEffect=function(t,e){return Jt.current.useInsertionEffect(t,e)};ve.useLayoutEffect=function(t,e){return Jt.current.useLayoutEffect(t,e)};ve.useMemo=function(t,e){return Jt.current.useMemo(t,e)};ve.useReducer=function(t,e,n){return Jt.current.useReducer(t,e,n)};ve.useRef=function(t){return Jt.current.useRef(t)};ve.useState=function(t){return Jt.current.useState(t)};ve.useSyncExternalStore=function(t,e,n){return Jt.current.useSyncExternalStore(t,e,n)};ve.useTransition=function(){return Jt.current.useTransition()};ve.version="18.3.1";y1.exports=ve;var L=y1.exports;const Xt=m1(L),TS=p1({__proto__:null,default:Xt},[L]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var CS=L,IS=Symbol.for("react.element"),SS=Symbol.for("react.fragment"),AS=Object.prototype.hasOwnProperty,xS=CS.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,kS={key:!0,ref:!0,__self:!0,__source:!0};function S1(t,e,n){var r,i={},s=null,o=null;n!==void 0&&(s=""+n),e.key!==void 0&&(s=""+e.key),e.ref!==void 0&&(o=e.ref);for(r in e)AS.call(e,r)&&!kS.hasOwnProperty(r)&&(i[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps,e)i[r]===void 0&&(i[r]=e[r]);return{$$typeof:IS,type:t,key:s,ref:o,props:i,_owner:xS.current}}Gh.Fragment=SS;Gh.jsx=S1;Gh.jsxs=S1;g1.exports=Gh;var b=g1.exports,sp={},A1={exports:{}},wn={},x1={exports:{}},k1={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(H,ee){var re=H.length;H.push(ee);e:for(;0<re;){var _e=re-1>>>1,he=H[_e];if(0<i(he,ee))H[_e]=ee,H[re]=he,re=_e;else break e}}function n(H){return H.length===0?null:H[0]}function r(H){if(H.length===0)return null;var ee=H[0],re=H.pop();if(re!==ee){H[0]=re;e:for(var _e=0,he=H.length,Pe=he>>>1;_e<Pe;){var qt=2*(_e+1)-1,ht=H[qt],Et=qt+1,bt=H[Et];if(0>i(ht,re))Et<he&&0>i(bt,ht)?(H[_e]=bt,H[Et]=re,_e=Et):(H[_e]=ht,H[qt]=re,_e=qt);else if(Et<he&&0>i(bt,re))H[_e]=bt,H[Et]=re,_e=Et;else break e}}return ee}function i(H,ee){var re=H.sortIndex-ee.sortIndex;return re!==0?re:H.id-ee.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;t.unstable_now=function(){return s.now()}}else{var o=Date,a=o.now();t.unstable_now=function(){return o.now()-a}}var l=[],c=[],h=1,f=null,p=3,_=!1,w=!1,I=!1,R=typeof setTimeout=="function"?setTimeout:null,C=typeof clearTimeout=="function"?clearTimeout:null,E=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function S(H){for(var ee=n(c);ee!==null;){if(ee.callback===null)r(c);else if(ee.startTime<=H)r(c),ee.sortIndex=ee.expirationTime,e(l,ee);else break;ee=n(c)}}function D(H){if(I=!1,S(H),!w)if(n(l)!==null)w=!0,Wt(F);else{var ee=n(c);ee!==null&&wt(D,ee.startTime-H)}}function F(H,ee){w=!1,I&&(I=!1,C(y),y=-1),_=!0;var re=p;try{for(S(ee),f=n(l);f!==null&&(!(f.expirationTime>ee)||H&&!k());){var _e=f.callback;if(typeof _e=="function"){f.callback=null,p=f.priorityLevel;var he=_e(f.expirationTime<=ee);ee=t.unstable_now(),typeof he=="function"?f.callback=he:f===n(l)&&r(l),S(ee)}else r(l);f=n(l)}if(f!==null)var Pe=!0;else{var qt=n(c);qt!==null&&wt(D,qt.startTime-ee),Pe=!1}return Pe}finally{f=null,p=re,_=!1}}var z=!1,g=null,y=-1,T=5,A=-1;function k(){return!(t.unstable_now()-A<T)}function P(){if(g!==null){var H=t.unstable_now();A=H;var ee=!0;try{ee=g(!0,H)}finally{ee?x():(z=!1,g=null)}}else z=!1}var x;if(typeof E=="function")x=function(){E(P)};else if(typeof MessageChannel<"u"){var Ie=new MessageChannel,it=Ie.port2;Ie.port1.onmessage=P,x=function(){it.postMessage(null)}}else x=function(){R(P,0)};function Wt(H){g=H,z||(z=!0,x())}function wt(H,ee){y=R(function(){H(t.unstable_now())},ee)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(H){H.callback=null},t.unstable_continueExecution=function(){w||_||(w=!0,Wt(F))},t.unstable_forceFrameRate=function(H){0>H||125<H?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):T=0<H?Math.floor(1e3/H):5},t.unstable_getCurrentPriorityLevel=function(){return p},t.unstable_getFirstCallbackNode=function(){return n(l)},t.unstable_next=function(H){switch(p){case 1:case 2:case 3:var ee=3;break;default:ee=p}var re=p;p=ee;try{return H()}finally{p=re}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(H,ee){switch(H){case 1:case 2:case 3:case 4:case 5:break;default:H=3}var re=p;p=H;try{return ee()}finally{p=re}},t.unstable_scheduleCallback=function(H,ee,re){var _e=t.unstable_now();switch(typeof re=="object"&&re!==null?(re=re.delay,re=typeof re=="number"&&0<re?_e+re:_e):re=_e,H){case 1:var he=-1;break;case 2:he=250;break;case 5:he=1073741823;break;case 4:he=1e4;break;default:he=5e3}return he=re+he,H={id:h++,callback:ee,priorityLevel:H,startTime:re,expirationTime:he,sortIndex:-1},re>_e?(H.sortIndex=re,e(c,H),n(l)===null&&H===n(c)&&(I?(C(y),y=-1):I=!0,wt(D,re-_e))):(H.sortIndex=he,e(l,H),w||_||(w=!0,Wt(F))),H},t.unstable_shouldYield=k,t.unstable_wrapCallback=function(H){var ee=p;return function(){var re=p;p=ee;try{return H.apply(this,arguments)}finally{p=re}}}})(k1);x1.exports=k1;var PS=x1.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var RS=L,vn=PS;function W(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var P1=new Set,Fl={};function Qs(t,e){Xo(t,e),Xo(t+"Capture",e)}function Xo(t,e){for(Fl[t]=e,t=0;t<e.length;t++)P1.add(e[t])}var Br=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),op=Object.prototype.hasOwnProperty,NS=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,Gv={},Kv={};function OS(t){return op.call(Kv,t)?!0:op.call(Gv,t)?!1:NS.test(t)?Kv[t]=!0:(Gv[t]=!0,!1)}function LS(t,e,n,r){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function DS(t,e,n,r){if(e===null||typeof e>"u"||LS(t,e,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function Zt(t,e,n,r,i,s,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=s,this.removeEmptyString=o}var Ot={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){Ot[t]=new Zt(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];Ot[e]=new Zt(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){Ot[t]=new Zt(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){Ot[t]=new Zt(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){Ot[t]=new Zt(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){Ot[t]=new Zt(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){Ot[t]=new Zt(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){Ot[t]=new Zt(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){Ot[t]=new Zt(t,5,!1,t.toLowerCase(),null,!1,!1)});var jm=/[\-:]([a-z])/g;function zm(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(jm,zm);Ot[e]=new Zt(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(jm,zm);Ot[e]=new Zt(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(jm,zm);Ot[e]=new Zt(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){Ot[t]=new Zt(t,1,!1,t.toLowerCase(),null,!1,!1)});Ot.xlinkHref=new Zt("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){Ot[t]=new Zt(t,1,!1,t.toLowerCase(),null,!0,!0)});function Bm(t,e,n,r){var i=Ot.hasOwnProperty(e)?Ot[e]:null;(i!==null?i.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(DS(e,n,i,r)&&(n=null),r||i===null?OS(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):i.mustUseProperty?t[i.propertyName]=n===null?i.type===3?!1:"":n:(e=i.attributeName,r=i.attributeNamespace,n===null?t.removeAttribute(e):(i=i.type,n=i===3||i===4&&n===!0?"":""+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}var Jr=RS.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,ic=Symbol.for("react.element"),Io=Symbol.for("react.portal"),So=Symbol.for("react.fragment"),Hm=Symbol.for("react.strict_mode"),ap=Symbol.for("react.profiler"),R1=Symbol.for("react.provider"),N1=Symbol.for("react.context"),Wm=Symbol.for("react.forward_ref"),lp=Symbol.for("react.suspense"),up=Symbol.for("react.suspense_list"),qm=Symbol.for("react.memo"),yi=Symbol.for("react.lazy"),O1=Symbol.for("react.offscreen"),Qv=Symbol.iterator;function Qa(t){return t===null||typeof t!="object"?null:(t=Qv&&t[Qv]||t["@@iterator"],typeof t=="function"?t:null)}var Xe=Object.assign,ff;function fl(t){if(ff===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);ff=e&&e[1]||""}return`
`+ff+t}var pf=!1;function mf(t,e){if(!t||pf)return"";pf=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(c){var r=c}Reflect.construct(t,[],e)}else{try{e.call()}catch(c){r=c}t.call(e.prototype)}else{try{throw Error()}catch(c){r=c}t()}}catch(c){if(c&&r&&typeof c.stack=="string"){for(var i=c.stack.split(`
`),s=r.stack.split(`
`),o=i.length-1,a=s.length-1;1<=o&&0<=a&&i[o]!==s[a];)a--;for(;1<=o&&0<=a;o--,a--)if(i[o]!==s[a]){if(o!==1||a!==1)do if(o--,a--,0>a||i[o]!==s[a]){var l=`
`+i[o].replace(" at new "," at ");return t.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",t.displayName)),l}while(1<=o&&0<=a);break}}}finally{pf=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?fl(t):""}function MS(t){switch(t.tag){case 5:return fl(t.type);case 16:return fl("Lazy");case 13:return fl("Suspense");case 19:return fl("SuspenseList");case 0:case 2:case 15:return t=mf(t.type,!1),t;case 11:return t=mf(t.type.render,!1),t;case 1:return t=mf(t.type,!0),t;default:return""}}function cp(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case So:return"Fragment";case Io:return"Portal";case ap:return"Profiler";case Hm:return"StrictMode";case lp:return"Suspense";case up:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case N1:return(t.displayName||"Context")+".Consumer";case R1:return(t._context.displayName||"Context")+".Provider";case Wm:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case qm:return e=t.displayName||null,e!==null?e:cp(t.type)||"Memo";case yi:e=t._payload,t=t._init;try{return cp(t(e))}catch{}}return null}function US(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return cp(e);case 8:return e===Hm?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function Wi(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function L1(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function VS(t){var e=L1(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var i=n.get,s=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return i.call(this)},set:function(o){r=""+o,s.call(this,o)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(o){r=""+o},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function sc(t){t._valueTracker||(t._valueTracker=VS(t))}function D1(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=L1(t)?t.checked?"true":"false":t.value),t=r,t!==n?(e.setValue(t),!0):!1}function th(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function hp(t,e){var n=e.checked;return Xe({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function Xv(t,e){var n=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;n=Wi(e.value!=null?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function M1(t,e){e=e.checked,e!=null&&Bm(t,"checked",e,!1)}function dp(t,e){M1(t,e);var n=Wi(e.value),r=e.type;if(n!=null)r==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(r==="submit"||r==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?fp(t,e.type,n):e.hasOwnProperty("defaultValue")&&fp(t,e.type,Wi(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function Yv(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function fp(t,e,n){(e!=="number"||th(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var pl=Array.isArray;function Fo(t,e,n,r){if(t=t.options,e){e={};for(var i=0;i<n.length;i++)e["$"+n[i]]=!0;for(n=0;n<t.length;n++)i=e.hasOwnProperty("$"+t[n].value),t[n].selected!==i&&(t[n].selected=i),i&&r&&(t[n].defaultSelected=!0)}else{for(n=""+Wi(n),e=null,i=0;i<t.length;i++){if(t[i].value===n){t[i].selected=!0,r&&(t[i].defaultSelected=!0);return}e!==null||t[i].disabled||(e=t[i])}e!==null&&(e.selected=!0)}}function pp(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(W(91));return Xe({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function Jv(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(W(92));if(pl(n)){if(1<n.length)throw Error(W(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:Wi(n)}}function U1(t,e){var n=Wi(e.value),r=Wi(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),r!=null&&(t.defaultValue=""+r)}function Zv(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function V1(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function mp(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?V1(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var oc,$1=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,r,i){MSApp.execUnsafeLocalFunction(function(){return t(e,n,r,i)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(oc=oc||document.createElement("div"),oc.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=oc.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function jl(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var Il={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},$S=["Webkit","ms","Moz","O"];Object.keys(Il).forEach(function(t){$S.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),Il[e]=Il[t]})});function F1(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||Il.hasOwnProperty(t)&&Il[t]?(""+e).trim():e+"px"}function j1(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var r=n.indexOf("--")===0,i=F1(n,e[n],r);n==="float"&&(n="cssFloat"),r?t.setProperty(n,i):t[n]=i}}var FS=Xe({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function gp(t,e){if(e){if(FS[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(W(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(W(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(W(61))}if(e.style!=null&&typeof e.style!="object")throw Error(W(62))}}function yp(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var vp=null;function Gm(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var _p=null,jo=null,zo=null;function e_(t){if(t=wu(t)){if(typeof _p!="function")throw Error(W(280));var e=t.stateNode;e&&(e=Jh(e),_p(t.stateNode,t.type,e))}}function z1(t){jo?zo?zo.push(t):zo=[t]:jo=t}function B1(){if(jo){var t=jo,e=zo;if(zo=jo=null,e_(t),e)for(t=0;t<e.length;t++)e_(e[t])}}function H1(t,e){return t(e)}function W1(){}var gf=!1;function q1(t,e,n){if(gf)return t(e,n);gf=!0;try{return H1(t,e,n)}finally{gf=!1,(jo!==null||zo!==null)&&(W1(),B1())}}function zl(t,e){var n=t.stateNode;if(n===null)return null;var r=Jh(n);if(r===null)return null;n=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(t=t.type,r=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!r;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(W(231,e,typeof n));return n}var wp=!1;if(Br)try{var Xa={};Object.defineProperty(Xa,"passive",{get:function(){wp=!0}}),window.addEventListener("test",Xa,Xa),window.removeEventListener("test",Xa,Xa)}catch{wp=!1}function jS(t,e,n,r,i,s,o,a,l){var c=Array.prototype.slice.call(arguments,3);try{e.apply(n,c)}catch(h){this.onError(h)}}var Sl=!1,nh=null,rh=!1,Ep=null,zS={onError:function(t){Sl=!0,nh=t}};function BS(t,e,n,r,i,s,o,a,l){Sl=!1,nh=null,jS.apply(zS,arguments)}function HS(t,e,n,r,i,s,o,a,l){if(BS.apply(this,arguments),Sl){if(Sl){var c=nh;Sl=!1,nh=null}else throw Error(W(198));rh||(rh=!0,Ep=c)}}function Xs(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function G1(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function t_(t){if(Xs(t)!==t)throw Error(W(188))}function WS(t){var e=t.alternate;if(!e){if(e=Xs(t),e===null)throw Error(W(188));return e!==t?null:t}for(var n=t,r=e;;){var i=n.return;if(i===null)break;var s=i.alternate;if(s===null){if(r=i.return,r!==null){n=r;continue}break}if(i.child===s.child){for(s=i.child;s;){if(s===n)return t_(i),t;if(s===r)return t_(i),e;s=s.sibling}throw Error(W(188))}if(n.return!==r.return)n=i,r=s;else{for(var o=!1,a=i.child;a;){if(a===n){o=!0,n=i,r=s;break}if(a===r){o=!0,r=i,n=s;break}a=a.sibling}if(!o){for(a=s.child;a;){if(a===n){o=!0,n=s,r=i;break}if(a===r){o=!0,r=s,n=i;break}a=a.sibling}if(!o)throw Error(W(189))}}if(n.alternate!==r)throw Error(W(190))}if(n.tag!==3)throw Error(W(188));return n.stateNode.current===n?t:e}function K1(t){return t=WS(t),t!==null?Q1(t):null}function Q1(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=Q1(t);if(e!==null)return e;t=t.sibling}return null}var X1=vn.unstable_scheduleCallback,n_=vn.unstable_cancelCallback,qS=vn.unstable_shouldYield,GS=vn.unstable_requestPaint,rt=vn.unstable_now,KS=vn.unstable_getCurrentPriorityLevel,Km=vn.unstable_ImmediatePriority,Y1=vn.unstable_UserBlockingPriority,ih=vn.unstable_NormalPriority,QS=vn.unstable_LowPriority,J1=vn.unstable_IdlePriority,Kh=null,lr=null;function XS(t){if(lr&&typeof lr.onCommitFiberRoot=="function")try{lr.onCommitFiberRoot(Kh,t,void 0,(t.current.flags&128)===128)}catch{}}var qn=Math.clz32?Math.clz32:ZS,YS=Math.log,JS=Math.LN2;function ZS(t){return t>>>=0,t===0?32:31-(YS(t)/JS|0)|0}var ac=64,lc=4194304;function ml(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function sh(t,e){var n=t.pendingLanes;if(n===0)return 0;var r=0,i=t.suspendedLanes,s=t.pingedLanes,o=n&268435455;if(o!==0){var a=o&~i;a!==0?r=ml(a):(s&=o,s!==0&&(r=ml(s)))}else o=n&~i,o!==0?r=ml(o):s!==0&&(r=ml(s));if(r===0)return 0;if(e!==0&&e!==r&&!(e&i)&&(i=r&-r,s=e&-e,i>=s||i===16&&(s&4194240)!==0))return e;if(r&4&&(r|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=r;0<e;)n=31-qn(e),i=1<<n,r|=t[n],e&=~i;return r}function eA(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function tA(t,e){for(var n=t.suspendedLanes,r=t.pingedLanes,i=t.expirationTimes,s=t.pendingLanes;0<s;){var o=31-qn(s),a=1<<o,l=i[o];l===-1?(!(a&n)||a&r)&&(i[o]=eA(a,e)):l<=e&&(t.expiredLanes|=a),s&=~a}}function bp(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function Z1(){var t=ac;return ac<<=1,!(ac&4194240)&&(ac=64),t}function yf(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function vu(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-qn(e),t[e]=n}function nA(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var r=t.eventTimes;for(t=t.expirationTimes;0<n;){var i=31-qn(n),s=1<<i;e[i]=0,r[i]=-1,t[i]=-1,n&=~s}}function Qm(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var r=31-qn(n),i=1<<r;i&e|t[r]&e&&(t[r]|=e),n&=~i}}var ke=0;function eE(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var tE,Xm,nE,rE,iE,Tp=!1,uc=[],xi=null,ki=null,Pi=null,Bl=new Map,Hl=new Map,_i=[],rA="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function r_(t,e){switch(t){case"focusin":case"focusout":xi=null;break;case"dragenter":case"dragleave":ki=null;break;case"mouseover":case"mouseout":Pi=null;break;case"pointerover":case"pointerout":Bl.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":Hl.delete(e.pointerId)}}function Ya(t,e,n,r,i,s){return t===null||t.nativeEvent!==s?(t={blockedOn:e,domEventName:n,eventSystemFlags:r,nativeEvent:s,targetContainers:[i]},e!==null&&(e=wu(e),e!==null&&Xm(e)),t):(t.eventSystemFlags|=r,e=t.targetContainers,i!==null&&e.indexOf(i)===-1&&e.push(i),t)}function iA(t,e,n,r,i){switch(e){case"focusin":return xi=Ya(xi,t,e,n,r,i),!0;case"dragenter":return ki=Ya(ki,t,e,n,r,i),!0;case"mouseover":return Pi=Ya(Pi,t,e,n,r,i),!0;case"pointerover":var s=i.pointerId;return Bl.set(s,Ya(Bl.get(s)||null,t,e,n,r,i)),!0;case"gotpointercapture":return s=i.pointerId,Hl.set(s,Ya(Hl.get(s)||null,t,e,n,r,i)),!0}return!1}function sE(t){var e=Es(t.target);if(e!==null){var n=Xs(e);if(n!==null){if(e=n.tag,e===13){if(e=G1(n),e!==null){t.blockedOn=e,iE(t.priority,function(){nE(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function Lc(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=Cp(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var r=new n.constructor(n.type,n);vp=r,n.target.dispatchEvent(r),vp=null}else return e=wu(n),e!==null&&Xm(e),t.blockedOn=n,!1;e.shift()}return!0}function i_(t,e,n){Lc(t)&&n.delete(e)}function sA(){Tp=!1,xi!==null&&Lc(xi)&&(xi=null),ki!==null&&Lc(ki)&&(ki=null),Pi!==null&&Lc(Pi)&&(Pi=null),Bl.forEach(i_),Hl.forEach(i_)}function Ja(t,e){t.blockedOn===e&&(t.blockedOn=null,Tp||(Tp=!0,vn.unstable_scheduleCallback(vn.unstable_NormalPriority,sA)))}function Wl(t){function e(i){return Ja(i,t)}if(0<uc.length){Ja(uc[0],t);for(var n=1;n<uc.length;n++){var r=uc[n];r.blockedOn===t&&(r.blockedOn=null)}}for(xi!==null&&Ja(xi,t),ki!==null&&Ja(ki,t),Pi!==null&&Ja(Pi,t),Bl.forEach(e),Hl.forEach(e),n=0;n<_i.length;n++)r=_i[n],r.blockedOn===t&&(r.blockedOn=null);for(;0<_i.length&&(n=_i[0],n.blockedOn===null);)sE(n),n.blockedOn===null&&_i.shift()}var Bo=Jr.ReactCurrentBatchConfig,oh=!0;function oA(t,e,n,r){var i=ke,s=Bo.transition;Bo.transition=null;try{ke=1,Ym(t,e,n,r)}finally{ke=i,Bo.transition=s}}function aA(t,e,n,r){var i=ke,s=Bo.transition;Bo.transition=null;try{ke=4,Ym(t,e,n,r)}finally{ke=i,Bo.transition=s}}function Ym(t,e,n,r){if(oh){var i=Cp(t,e,n,r);if(i===null)Af(t,e,r,ah,n),r_(t,r);else if(iA(i,t,e,n,r))r.stopPropagation();else if(r_(t,r),e&4&&-1<rA.indexOf(t)){for(;i!==null;){var s=wu(i);if(s!==null&&tE(s),s=Cp(t,e,n,r),s===null&&Af(t,e,r,ah,n),s===i)break;i=s}i!==null&&r.stopPropagation()}else Af(t,e,r,null,n)}}var ah=null;function Cp(t,e,n,r){if(ah=null,t=Gm(r),t=Es(t),t!==null)if(e=Xs(t),e===null)t=null;else if(n=e.tag,n===13){if(t=G1(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return ah=t,null}function oE(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(KS()){case Km:return 1;case Y1:return 4;case ih:case QS:return 16;case J1:return 536870912;default:return 16}default:return 16}}var Ci=null,Jm=null,Dc=null;function aE(){if(Dc)return Dc;var t,e=Jm,n=e.length,r,i="value"in Ci?Ci.value:Ci.textContent,s=i.length;for(t=0;t<n&&e[t]===i[t];t++);var o=n-t;for(r=1;r<=o&&e[n-r]===i[s-r];r++);return Dc=i.slice(t,1<r?1-r:void 0)}function Mc(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function cc(){return!0}function s_(){return!1}function En(t){function e(n,r,i,s,o){this._reactName=n,this._targetInst=i,this.type=r,this.nativeEvent=s,this.target=o,this.currentTarget=null;for(var a in t)t.hasOwnProperty(a)&&(n=t[a],this[a]=n?n(s):s[a]);return this.isDefaultPrevented=(s.defaultPrevented!=null?s.defaultPrevented:s.returnValue===!1)?cc:s_,this.isPropagationStopped=s_,this}return Xe(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=cc)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=cc)},persist:function(){},isPersistent:cc}),e}var wa={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Zm=En(wa),_u=Xe({},wa,{view:0,detail:0}),lA=En(_u),vf,_f,Za,Qh=Xe({},_u,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:eg,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==Za&&(Za&&t.type==="mousemove"?(vf=t.screenX-Za.screenX,_f=t.screenY-Za.screenY):_f=vf=0,Za=t),vf)},movementY:function(t){return"movementY"in t?t.movementY:_f}}),o_=En(Qh),uA=Xe({},Qh,{dataTransfer:0}),cA=En(uA),hA=Xe({},_u,{relatedTarget:0}),wf=En(hA),dA=Xe({},wa,{animationName:0,elapsedTime:0,pseudoElement:0}),fA=En(dA),pA=Xe({},wa,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),mA=En(pA),gA=Xe({},wa,{data:0}),a_=En(gA),yA={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},vA={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},_A={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function wA(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=_A[t])?!!e[t]:!1}function eg(){return wA}var EA=Xe({},_u,{key:function(t){if(t.key){var e=yA[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=Mc(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?vA[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:eg,charCode:function(t){return t.type==="keypress"?Mc(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?Mc(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),bA=En(EA),TA=Xe({},Qh,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),l_=En(TA),CA=Xe({},_u,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:eg}),IA=En(CA),SA=Xe({},wa,{propertyName:0,elapsedTime:0,pseudoElement:0}),AA=En(SA),xA=Xe({},Qh,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),kA=En(xA),PA=[9,13,27,32],tg=Br&&"CompositionEvent"in window,Al=null;Br&&"documentMode"in document&&(Al=document.documentMode);var RA=Br&&"TextEvent"in window&&!Al,lE=Br&&(!tg||Al&&8<Al&&11>=Al),u_=" ",c_=!1;function uE(t,e){switch(t){case"keyup":return PA.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function cE(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var Ao=!1;function NA(t,e){switch(t){case"compositionend":return cE(e);case"keypress":return e.which!==32?null:(c_=!0,u_);case"textInput":return t=e.data,t===u_&&c_?null:t;default:return null}}function OA(t,e){if(Ao)return t==="compositionend"||!tg&&uE(t,e)?(t=aE(),Dc=Jm=Ci=null,Ao=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return lE&&e.locale!=="ko"?null:e.data;default:return null}}var LA={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function h_(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!LA[t.type]:e==="textarea"}function hE(t,e,n,r){z1(r),e=lh(e,"onChange"),0<e.length&&(n=new Zm("onChange","change",null,n,r),t.push({event:n,listeners:e}))}var xl=null,ql=null;function DA(t){bE(t,0)}function Xh(t){var e=Po(t);if(D1(e))return t}function MA(t,e){if(t==="change")return e}var dE=!1;if(Br){var Ef;if(Br){var bf="oninput"in document;if(!bf){var d_=document.createElement("div");d_.setAttribute("oninput","return;"),bf=typeof d_.oninput=="function"}Ef=bf}else Ef=!1;dE=Ef&&(!document.documentMode||9<document.documentMode)}function f_(){xl&&(xl.detachEvent("onpropertychange",fE),ql=xl=null)}function fE(t){if(t.propertyName==="value"&&Xh(ql)){var e=[];hE(e,ql,t,Gm(t)),q1(DA,e)}}function UA(t,e,n){t==="focusin"?(f_(),xl=e,ql=n,xl.attachEvent("onpropertychange",fE)):t==="focusout"&&f_()}function VA(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return Xh(ql)}function $A(t,e){if(t==="click")return Xh(e)}function FA(t,e){if(t==="input"||t==="change")return Xh(e)}function jA(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var Yn=typeof Object.is=="function"?Object.is:jA;function Gl(t,e){if(Yn(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!op.call(e,i)||!Yn(t[i],e[i]))return!1}return!0}function p_(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function m_(t,e){var n=p_(t);t=0;for(var r;n;){if(n.nodeType===3){if(r=t+n.textContent.length,t<=e&&r>=e)return{node:n,offset:e-t};t=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=p_(n)}}function pE(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?pE(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function mE(){for(var t=window,e=th();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=th(t.document)}return e}function ng(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function zA(t){var e=mE(),n=t.focusedElem,r=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&pE(n.ownerDocument.documentElement,n)){if(r!==null&&ng(n)){if(e=r.start,t=r.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var i=n.textContent.length,s=Math.min(r.start,i);r=r.end===void 0?s:Math.min(r.end,i),!t.extend&&s>r&&(i=r,r=s,s=i),i=m_(n,s);var o=m_(n,r);i&&o&&(t.rangeCount!==1||t.anchorNode!==i.node||t.anchorOffset!==i.offset||t.focusNode!==o.node||t.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(i.node,i.offset),t.removeAllRanges(),s>r?(t.addRange(e),t.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var BA=Br&&"documentMode"in document&&11>=document.documentMode,xo=null,Ip=null,kl=null,Sp=!1;function g_(t,e,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;Sp||xo==null||xo!==th(r)||(r=xo,"selectionStart"in r&&ng(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),kl&&Gl(kl,r)||(kl=r,r=lh(Ip,"onSelect"),0<r.length&&(e=new Zm("onSelect","select",null,e,n),t.push({event:e,listeners:r}),e.target=xo)))}function hc(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var ko={animationend:hc("Animation","AnimationEnd"),animationiteration:hc("Animation","AnimationIteration"),animationstart:hc("Animation","AnimationStart"),transitionend:hc("Transition","TransitionEnd")},Tf={},gE={};Br&&(gE=document.createElement("div").style,"AnimationEvent"in window||(delete ko.animationend.animation,delete ko.animationiteration.animation,delete ko.animationstart.animation),"TransitionEvent"in window||delete ko.transitionend.transition);function Yh(t){if(Tf[t])return Tf[t];if(!ko[t])return t;var e=ko[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in gE)return Tf[t]=e[n];return t}var yE=Yh("animationend"),vE=Yh("animationiteration"),_E=Yh("animationstart"),wE=Yh("transitionend"),EE=new Map,y_="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Ji(t,e){EE.set(t,e),Qs(e,[t])}for(var Cf=0;Cf<y_.length;Cf++){var If=y_[Cf],HA=If.toLowerCase(),WA=If[0].toUpperCase()+If.slice(1);Ji(HA,"on"+WA)}Ji(yE,"onAnimationEnd");Ji(vE,"onAnimationIteration");Ji(_E,"onAnimationStart");Ji("dblclick","onDoubleClick");Ji("focusin","onFocus");Ji("focusout","onBlur");Ji(wE,"onTransitionEnd");Xo("onMouseEnter",["mouseout","mouseover"]);Xo("onMouseLeave",["mouseout","mouseover"]);Xo("onPointerEnter",["pointerout","pointerover"]);Xo("onPointerLeave",["pointerout","pointerover"]);Qs("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Qs("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Qs("onBeforeInput",["compositionend","keypress","textInput","paste"]);Qs("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Qs("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Qs("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var gl="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),qA=new Set("cancel close invalid load scroll toggle".split(" ").concat(gl));function v_(t,e,n){var r=t.type||"unknown-event";t.currentTarget=n,HS(r,e,void 0,t),t.currentTarget=null}function bE(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var r=t[n],i=r.event;r=r.listeners;e:{var s=void 0;if(e)for(var o=r.length-1;0<=o;o--){var a=r[o],l=a.instance,c=a.currentTarget;if(a=a.listener,l!==s&&i.isPropagationStopped())break e;v_(i,a,c),s=l}else for(o=0;o<r.length;o++){if(a=r[o],l=a.instance,c=a.currentTarget,a=a.listener,l!==s&&i.isPropagationStopped())break e;v_(i,a,c),s=l}}}if(rh)throw t=Ep,rh=!1,Ep=null,t}function $e(t,e){var n=e[Rp];n===void 0&&(n=e[Rp]=new Set);var r=t+"__bubble";n.has(r)||(TE(e,t,2,!1),n.add(r))}function Sf(t,e,n){var r=0;e&&(r|=4),TE(n,t,r,e)}var dc="_reactListening"+Math.random().toString(36).slice(2);function Kl(t){if(!t[dc]){t[dc]=!0,P1.forEach(function(n){n!=="selectionchange"&&(qA.has(n)||Sf(n,!1,t),Sf(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[dc]||(e[dc]=!0,Sf("selectionchange",!1,e))}}function TE(t,e,n,r){switch(oE(e)){case 1:var i=oA;break;case 4:i=aA;break;default:i=Ym}n=i.bind(null,e,n,t),i=void 0,!wp||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(i=!0),r?i!==void 0?t.addEventListener(e,n,{capture:!0,passive:i}):t.addEventListener(e,n,!0):i!==void 0?t.addEventListener(e,n,{passive:i}):t.addEventListener(e,n,!1)}function Af(t,e,n,r,i){var s=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var o=r.tag;if(o===3||o===4){var a=r.stateNode.containerInfo;if(a===i||a.nodeType===8&&a.parentNode===i)break;if(o===4)for(o=r.return;o!==null;){var l=o.tag;if((l===3||l===4)&&(l=o.stateNode.containerInfo,l===i||l.nodeType===8&&l.parentNode===i))return;o=o.return}for(;a!==null;){if(o=Es(a),o===null)return;if(l=o.tag,l===5||l===6){r=s=o;continue e}a=a.parentNode}}r=r.return}q1(function(){var c=s,h=Gm(n),f=[];e:{var p=EE.get(t);if(p!==void 0){var _=Zm,w=t;switch(t){case"keypress":if(Mc(n)===0)break e;case"keydown":case"keyup":_=bA;break;case"focusin":w="focus",_=wf;break;case"focusout":w="blur",_=wf;break;case"beforeblur":case"afterblur":_=wf;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":_=o_;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":_=cA;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":_=IA;break;case yE:case vE:case _E:_=fA;break;case wE:_=AA;break;case"scroll":_=lA;break;case"wheel":_=kA;break;case"copy":case"cut":case"paste":_=mA;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":_=l_}var I=(e&4)!==0,R=!I&&t==="scroll",C=I?p!==null?p+"Capture":null:p;I=[];for(var E=c,S;E!==null;){S=E;var D=S.stateNode;if(S.tag===5&&D!==null&&(S=D,C!==null&&(D=zl(E,C),D!=null&&I.push(Ql(E,D,S)))),R)break;E=E.return}0<I.length&&(p=new _(p,w,null,n,h),f.push({event:p,listeners:I}))}}if(!(e&7)){e:{if(p=t==="mouseover"||t==="pointerover",_=t==="mouseout"||t==="pointerout",p&&n!==vp&&(w=n.relatedTarget||n.fromElement)&&(Es(w)||w[Hr]))break e;if((_||p)&&(p=h.window===h?h:(p=h.ownerDocument)?p.defaultView||p.parentWindow:window,_?(w=n.relatedTarget||n.toElement,_=c,w=w?Es(w):null,w!==null&&(R=Xs(w),w!==R||w.tag!==5&&w.tag!==6)&&(w=null)):(_=null,w=c),_!==w)){if(I=o_,D="onMouseLeave",C="onMouseEnter",E="mouse",(t==="pointerout"||t==="pointerover")&&(I=l_,D="onPointerLeave",C="onPointerEnter",E="pointer"),R=_==null?p:Po(_),S=w==null?p:Po(w),p=new I(D,E+"leave",_,n,h),p.target=R,p.relatedTarget=S,D=null,Es(h)===c&&(I=new I(C,E+"enter",w,n,h),I.target=S,I.relatedTarget=R,D=I),R=D,_&&w)t:{for(I=_,C=w,E=0,S=I;S;S=go(S))E++;for(S=0,D=C;D;D=go(D))S++;for(;0<E-S;)I=go(I),E--;for(;0<S-E;)C=go(C),S--;for(;E--;){if(I===C||C!==null&&I===C.alternate)break t;I=go(I),C=go(C)}I=null}else I=null;_!==null&&__(f,p,_,I,!1),w!==null&&R!==null&&__(f,R,w,I,!0)}}e:{if(p=c?Po(c):window,_=p.nodeName&&p.nodeName.toLowerCase(),_==="select"||_==="input"&&p.type==="file")var F=MA;else if(h_(p))if(dE)F=FA;else{F=VA;var z=UA}else(_=p.nodeName)&&_.toLowerCase()==="input"&&(p.type==="checkbox"||p.type==="radio")&&(F=$A);if(F&&(F=F(t,c))){hE(f,F,n,h);break e}z&&z(t,p,c),t==="focusout"&&(z=p._wrapperState)&&z.controlled&&p.type==="number"&&fp(p,"number",p.value)}switch(z=c?Po(c):window,t){case"focusin":(h_(z)||z.contentEditable==="true")&&(xo=z,Ip=c,kl=null);break;case"focusout":kl=Ip=xo=null;break;case"mousedown":Sp=!0;break;case"contextmenu":case"mouseup":case"dragend":Sp=!1,g_(f,n,h);break;case"selectionchange":if(BA)break;case"keydown":case"keyup":g_(f,n,h)}var g;if(tg)e:{switch(t){case"compositionstart":var y="onCompositionStart";break e;case"compositionend":y="onCompositionEnd";break e;case"compositionupdate":y="onCompositionUpdate";break e}y=void 0}else Ao?uE(t,n)&&(y="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(y="onCompositionStart");y&&(lE&&n.locale!=="ko"&&(Ao||y!=="onCompositionStart"?y==="onCompositionEnd"&&Ao&&(g=aE()):(Ci=h,Jm="value"in Ci?Ci.value:Ci.textContent,Ao=!0)),z=lh(c,y),0<z.length&&(y=new a_(y,t,null,n,h),f.push({event:y,listeners:z}),g?y.data=g:(g=cE(n),g!==null&&(y.data=g)))),(g=RA?NA(t,n):OA(t,n))&&(c=lh(c,"onBeforeInput"),0<c.length&&(h=new a_("onBeforeInput","beforeinput",null,n,h),f.push({event:h,listeners:c}),h.data=g))}bE(f,e)})}function Ql(t,e,n){return{instance:t,listener:e,currentTarget:n}}function lh(t,e){for(var n=e+"Capture",r=[];t!==null;){var i=t,s=i.stateNode;i.tag===5&&s!==null&&(i=s,s=zl(t,n),s!=null&&r.unshift(Ql(t,s,i)),s=zl(t,e),s!=null&&r.push(Ql(t,s,i))),t=t.return}return r}function go(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function __(t,e,n,r,i){for(var s=e._reactName,o=[];n!==null&&n!==r;){var a=n,l=a.alternate,c=a.stateNode;if(l!==null&&l===r)break;a.tag===5&&c!==null&&(a=c,i?(l=zl(n,s),l!=null&&o.unshift(Ql(n,l,a))):i||(l=zl(n,s),l!=null&&o.push(Ql(n,l,a)))),n=n.return}o.length!==0&&t.push({event:e,listeners:o})}var GA=/\r\n?/g,KA=/\u0000|\uFFFD/g;function w_(t){return(typeof t=="string"?t:""+t).replace(GA,`
`).replace(KA,"")}function fc(t,e,n){if(e=w_(e),w_(t)!==e&&n)throw Error(W(425))}function uh(){}var Ap=null,xp=null;function kp(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var Pp=typeof setTimeout=="function"?setTimeout:void 0,QA=typeof clearTimeout=="function"?clearTimeout:void 0,E_=typeof Promise=="function"?Promise:void 0,XA=typeof queueMicrotask=="function"?queueMicrotask:typeof E_<"u"?function(t){return E_.resolve(null).then(t).catch(YA)}:Pp;function YA(t){setTimeout(function(){throw t})}function xf(t,e){var n=e,r=0;do{var i=n.nextSibling;if(t.removeChild(n),i&&i.nodeType===8)if(n=i.data,n==="/$"){if(r===0){t.removeChild(i),Wl(e);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=i}while(n);Wl(e)}function Ri(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function b_(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var Ea=Math.random().toString(36).slice(2),ar="__reactFiber$"+Ea,Xl="__reactProps$"+Ea,Hr="__reactContainer$"+Ea,Rp="__reactEvents$"+Ea,JA="__reactListeners$"+Ea,ZA="__reactHandles$"+Ea;function Es(t){var e=t[ar];if(e)return e;for(var n=t.parentNode;n;){if(e=n[Hr]||n[ar]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=b_(t);t!==null;){if(n=t[ar])return n;t=b_(t)}return e}t=n,n=t.parentNode}return null}function wu(t){return t=t[ar]||t[Hr],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function Po(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(W(33))}function Jh(t){return t[Xl]||null}var Np=[],Ro=-1;function Zi(t){return{current:t}}function je(t){0>Ro||(t.current=Np[Ro],Np[Ro]=null,Ro--)}function Le(t,e){Ro++,Np[Ro]=t.current,t.current=e}var qi={},Bt=Zi(qi),an=Zi(!1),Ls=qi;function Yo(t,e){var n=t.type.contextTypes;if(!n)return qi;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var i={},s;for(s in n)i[s]=e[s];return r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=i),i}function ln(t){return t=t.childContextTypes,t!=null}function ch(){je(an),je(Bt)}function T_(t,e,n){if(Bt.current!==qi)throw Error(W(168));Le(Bt,e),Le(an,n)}function CE(t,e,n){var r=t.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var i in r)if(!(i in e))throw Error(W(108,US(t)||"Unknown",i));return Xe({},n,r)}function hh(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||qi,Ls=Bt.current,Le(Bt,t),Le(an,an.current),!0}function C_(t,e,n){var r=t.stateNode;if(!r)throw Error(W(169));n?(t=CE(t,e,Ls),r.__reactInternalMemoizedMergedChildContext=t,je(an),je(Bt),Le(Bt,t)):je(an),Le(an,n)}var Nr=null,Zh=!1,kf=!1;function IE(t){Nr===null?Nr=[t]:Nr.push(t)}function ex(t){Zh=!0,IE(t)}function es(){if(!kf&&Nr!==null){kf=!0;var t=0,e=ke;try{var n=Nr;for(ke=1;t<n.length;t++){var r=n[t];do r=r(!0);while(r!==null)}Nr=null,Zh=!1}catch(i){throw Nr!==null&&(Nr=Nr.slice(t+1)),X1(Km,es),i}finally{ke=e,kf=!1}}return null}var No=[],Oo=0,dh=null,fh=0,Sn=[],An=0,Ds=null,Dr=1,Mr="";function vs(t,e){No[Oo++]=fh,No[Oo++]=dh,dh=t,fh=e}function SE(t,e,n){Sn[An++]=Dr,Sn[An++]=Mr,Sn[An++]=Ds,Ds=t;var r=Dr;t=Mr;var i=32-qn(r)-1;r&=~(1<<i),n+=1;var s=32-qn(e)+i;if(30<s){var o=i-i%5;s=(r&(1<<o)-1).toString(32),r>>=o,i-=o,Dr=1<<32-qn(e)+i|n<<i|r,Mr=s+t}else Dr=1<<s|n<<i|r,Mr=t}function rg(t){t.return!==null&&(vs(t,1),SE(t,1,0))}function ig(t){for(;t===dh;)dh=No[--Oo],No[Oo]=null,fh=No[--Oo],No[Oo]=null;for(;t===Ds;)Ds=Sn[--An],Sn[An]=null,Mr=Sn[--An],Sn[An]=null,Dr=Sn[--An],Sn[An]=null}var gn=null,pn=null,He=!1,Hn=null;function AE(t,e){var n=Rn(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function I_(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,gn=t,pn=Ri(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,gn=t,pn=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=Ds!==null?{id:Dr,overflow:Mr}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=Rn(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,gn=t,pn=null,!0):!1;default:return!1}}function Op(t){return(t.mode&1)!==0&&(t.flags&128)===0}function Lp(t){if(He){var e=pn;if(e){var n=e;if(!I_(t,e)){if(Op(t))throw Error(W(418));e=Ri(n.nextSibling);var r=gn;e&&I_(t,e)?AE(r,n):(t.flags=t.flags&-4097|2,He=!1,gn=t)}}else{if(Op(t))throw Error(W(418));t.flags=t.flags&-4097|2,He=!1,gn=t}}}function S_(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;gn=t}function pc(t){if(t!==gn)return!1;if(!He)return S_(t),He=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!kp(t.type,t.memoizedProps)),e&&(e=pn)){if(Op(t))throw xE(),Error(W(418));for(;e;)AE(t,e),e=Ri(e.nextSibling)}if(S_(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(W(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){pn=Ri(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}pn=null}}else pn=gn?Ri(t.stateNode.nextSibling):null;return!0}function xE(){for(var t=pn;t;)t=Ri(t.nextSibling)}function Jo(){pn=gn=null,He=!1}function sg(t){Hn===null?Hn=[t]:Hn.push(t)}var tx=Jr.ReactCurrentBatchConfig;function el(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(W(309));var r=n.stateNode}if(!r)throw Error(W(147,t));var i=r,s=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===s?e.ref:(e=function(o){var a=i.refs;o===null?delete a[s]:a[s]=o},e._stringRef=s,e)}if(typeof t!="string")throw Error(W(284));if(!n._owner)throw Error(W(290,t))}return t}function mc(t,e){throw t=Object.prototype.toString.call(e),Error(W(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function A_(t){var e=t._init;return e(t._payload)}function kE(t){function e(C,E){if(t){var S=C.deletions;S===null?(C.deletions=[E],C.flags|=16):S.push(E)}}function n(C,E){if(!t)return null;for(;E!==null;)e(C,E),E=E.sibling;return null}function r(C,E){for(C=new Map;E!==null;)E.key!==null?C.set(E.key,E):C.set(E.index,E),E=E.sibling;return C}function i(C,E){return C=Di(C,E),C.index=0,C.sibling=null,C}function s(C,E,S){return C.index=S,t?(S=C.alternate,S!==null?(S=S.index,S<E?(C.flags|=2,E):S):(C.flags|=2,E)):(C.flags|=1048576,E)}function o(C){return t&&C.alternate===null&&(C.flags|=2),C}function a(C,E,S,D){return E===null||E.tag!==6?(E=Mf(S,C.mode,D),E.return=C,E):(E=i(E,S),E.return=C,E)}function l(C,E,S,D){var F=S.type;return F===So?h(C,E,S.props.children,D,S.key):E!==null&&(E.elementType===F||typeof F=="object"&&F!==null&&F.$$typeof===yi&&A_(F)===E.type)?(D=i(E,S.props),D.ref=el(C,E,S),D.return=C,D):(D=Bc(S.type,S.key,S.props,null,C.mode,D),D.ref=el(C,E,S),D.return=C,D)}function c(C,E,S,D){return E===null||E.tag!==4||E.stateNode.containerInfo!==S.containerInfo||E.stateNode.implementation!==S.implementation?(E=Uf(S,C.mode,D),E.return=C,E):(E=i(E,S.children||[]),E.return=C,E)}function h(C,E,S,D,F){return E===null||E.tag!==7?(E=Ps(S,C.mode,D,F),E.return=C,E):(E=i(E,S),E.return=C,E)}function f(C,E,S){if(typeof E=="string"&&E!==""||typeof E=="number")return E=Mf(""+E,C.mode,S),E.return=C,E;if(typeof E=="object"&&E!==null){switch(E.$$typeof){case ic:return S=Bc(E.type,E.key,E.props,null,C.mode,S),S.ref=el(C,null,E),S.return=C,S;case Io:return E=Uf(E,C.mode,S),E.return=C,E;case yi:var D=E._init;return f(C,D(E._payload),S)}if(pl(E)||Qa(E))return E=Ps(E,C.mode,S,null),E.return=C,E;mc(C,E)}return null}function p(C,E,S,D){var F=E!==null?E.key:null;if(typeof S=="string"&&S!==""||typeof S=="number")return F!==null?null:a(C,E,""+S,D);if(typeof S=="object"&&S!==null){switch(S.$$typeof){case ic:return S.key===F?l(C,E,S,D):null;case Io:return S.key===F?c(C,E,S,D):null;case yi:return F=S._init,p(C,E,F(S._payload),D)}if(pl(S)||Qa(S))return F!==null?null:h(C,E,S,D,null);mc(C,S)}return null}function _(C,E,S,D,F){if(typeof D=="string"&&D!==""||typeof D=="number")return C=C.get(S)||null,a(E,C,""+D,F);if(typeof D=="object"&&D!==null){switch(D.$$typeof){case ic:return C=C.get(D.key===null?S:D.key)||null,l(E,C,D,F);case Io:return C=C.get(D.key===null?S:D.key)||null,c(E,C,D,F);case yi:var z=D._init;return _(C,E,S,z(D._payload),F)}if(pl(D)||Qa(D))return C=C.get(S)||null,h(E,C,D,F,null);mc(E,D)}return null}function w(C,E,S,D){for(var F=null,z=null,g=E,y=E=0,T=null;g!==null&&y<S.length;y++){g.index>y?(T=g,g=null):T=g.sibling;var A=p(C,g,S[y],D);if(A===null){g===null&&(g=T);break}t&&g&&A.alternate===null&&e(C,g),E=s(A,E,y),z===null?F=A:z.sibling=A,z=A,g=T}if(y===S.length)return n(C,g),He&&vs(C,y),F;if(g===null){for(;y<S.length;y++)g=f(C,S[y],D),g!==null&&(E=s(g,E,y),z===null?F=g:z.sibling=g,z=g);return He&&vs(C,y),F}for(g=r(C,g);y<S.length;y++)T=_(g,C,y,S[y],D),T!==null&&(t&&T.alternate!==null&&g.delete(T.key===null?y:T.key),E=s(T,E,y),z===null?F=T:z.sibling=T,z=T);return t&&g.forEach(function(k){return e(C,k)}),He&&vs(C,y),F}function I(C,E,S,D){var F=Qa(S);if(typeof F!="function")throw Error(W(150));if(S=F.call(S),S==null)throw Error(W(151));for(var z=F=null,g=E,y=E=0,T=null,A=S.next();g!==null&&!A.done;y++,A=S.next()){g.index>y?(T=g,g=null):T=g.sibling;var k=p(C,g,A.value,D);if(k===null){g===null&&(g=T);break}t&&g&&k.alternate===null&&e(C,g),E=s(k,E,y),z===null?F=k:z.sibling=k,z=k,g=T}if(A.done)return n(C,g),He&&vs(C,y),F;if(g===null){for(;!A.done;y++,A=S.next())A=f(C,A.value,D),A!==null&&(E=s(A,E,y),z===null?F=A:z.sibling=A,z=A);return He&&vs(C,y),F}for(g=r(C,g);!A.done;y++,A=S.next())A=_(g,C,y,A.value,D),A!==null&&(t&&A.alternate!==null&&g.delete(A.key===null?y:A.key),E=s(A,E,y),z===null?F=A:z.sibling=A,z=A);return t&&g.forEach(function(P){return e(C,P)}),He&&vs(C,y),F}function R(C,E,S,D){if(typeof S=="object"&&S!==null&&S.type===So&&S.key===null&&(S=S.props.children),typeof S=="object"&&S!==null){switch(S.$$typeof){case ic:e:{for(var F=S.key,z=E;z!==null;){if(z.key===F){if(F=S.type,F===So){if(z.tag===7){n(C,z.sibling),E=i(z,S.props.children),E.return=C,C=E;break e}}else if(z.elementType===F||typeof F=="object"&&F!==null&&F.$$typeof===yi&&A_(F)===z.type){n(C,z.sibling),E=i(z,S.props),E.ref=el(C,z,S),E.return=C,C=E;break e}n(C,z);break}else e(C,z);z=z.sibling}S.type===So?(E=Ps(S.props.children,C.mode,D,S.key),E.return=C,C=E):(D=Bc(S.type,S.key,S.props,null,C.mode,D),D.ref=el(C,E,S),D.return=C,C=D)}return o(C);case Io:e:{for(z=S.key;E!==null;){if(E.key===z)if(E.tag===4&&E.stateNode.containerInfo===S.containerInfo&&E.stateNode.implementation===S.implementation){n(C,E.sibling),E=i(E,S.children||[]),E.return=C,C=E;break e}else{n(C,E);break}else e(C,E);E=E.sibling}E=Uf(S,C.mode,D),E.return=C,C=E}return o(C);case yi:return z=S._init,R(C,E,z(S._payload),D)}if(pl(S))return w(C,E,S,D);if(Qa(S))return I(C,E,S,D);mc(C,S)}return typeof S=="string"&&S!==""||typeof S=="number"?(S=""+S,E!==null&&E.tag===6?(n(C,E.sibling),E=i(E,S),E.return=C,C=E):(n(C,E),E=Mf(S,C.mode,D),E.return=C,C=E),o(C)):n(C,E)}return R}var Zo=kE(!0),PE=kE(!1),ph=Zi(null),mh=null,Lo=null,og=null;function ag(){og=Lo=mh=null}function lg(t){var e=ph.current;je(ph),t._currentValue=e}function Dp(t,e,n){for(;t!==null;){var r=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),t===n)break;t=t.return}}function Ho(t,e){mh=t,og=Lo=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(on=!0),t.firstContext=null)}function On(t){var e=t._currentValue;if(og!==t)if(t={context:t,memoizedValue:e,next:null},Lo===null){if(mh===null)throw Error(W(308));Lo=t,mh.dependencies={lanes:0,firstContext:t}}else Lo=Lo.next=t;return e}var bs=null;function ug(t){bs===null?bs=[t]:bs.push(t)}function RE(t,e,n,r){var i=e.interleaved;return i===null?(n.next=n,ug(e)):(n.next=i.next,i.next=n),e.interleaved=n,Wr(t,r)}function Wr(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var vi=!1;function cg(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function NE(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function Fr(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function Ni(t,e,n){var r=t.updateQueue;if(r===null)return null;if(r=r.shared,Ce&2){var i=r.pending;return i===null?e.next=e:(e.next=i.next,i.next=e),r.pending=e,Wr(t,n)}return i=r.interleaved,i===null?(e.next=e,ug(r)):(e.next=i.next,i.next=e),r.interleaved=e,Wr(t,n)}function Uc(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,Qm(t,n)}}function x_(t,e){var n=t.updateQueue,r=t.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var i=null,s=null;if(n=n.firstBaseUpdate,n!==null){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};s===null?i=s=o:s=s.next=o,n=n.next}while(n!==null);s===null?i=s=e:s=s.next=e}else i=s=e;n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:s,shared:r.shared,effects:r.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function gh(t,e,n,r){var i=t.updateQueue;vi=!1;var s=i.firstBaseUpdate,o=i.lastBaseUpdate,a=i.shared.pending;if(a!==null){i.shared.pending=null;var l=a,c=l.next;l.next=null,o===null?s=c:o.next=c,o=l;var h=t.alternate;h!==null&&(h=h.updateQueue,a=h.lastBaseUpdate,a!==o&&(a===null?h.firstBaseUpdate=c:a.next=c,h.lastBaseUpdate=l))}if(s!==null){var f=i.baseState;o=0,h=c=l=null,a=s;do{var p=a.lane,_=a.eventTime;if((r&p)===p){h!==null&&(h=h.next={eventTime:_,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var w=t,I=a;switch(p=e,_=n,I.tag){case 1:if(w=I.payload,typeof w=="function"){f=w.call(_,f,p);break e}f=w;break e;case 3:w.flags=w.flags&-65537|128;case 0:if(w=I.payload,p=typeof w=="function"?w.call(_,f,p):w,p==null)break e;f=Xe({},f,p);break e;case 2:vi=!0}}a.callback!==null&&a.lane!==0&&(t.flags|=64,p=i.effects,p===null?i.effects=[a]:p.push(a))}else _={eventTime:_,lane:p,tag:a.tag,payload:a.payload,callback:a.callback,next:null},h===null?(c=h=_,l=f):h=h.next=_,o|=p;if(a=a.next,a===null){if(a=i.shared.pending,a===null)break;p=a,a=p.next,p.next=null,i.lastBaseUpdate=p,i.shared.pending=null}}while(!0);if(h===null&&(l=f),i.baseState=l,i.firstBaseUpdate=c,i.lastBaseUpdate=h,e=i.shared.interleaved,e!==null){i=e;do o|=i.lane,i=i.next;while(i!==e)}else s===null&&(i.shared.lanes=0);Us|=o,t.lanes=o,t.memoizedState=f}}function k_(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var r=t[e],i=r.callback;if(i!==null){if(r.callback=null,r=n,typeof i!="function")throw Error(W(191,i));i.call(r)}}}var Eu={},ur=Zi(Eu),Yl=Zi(Eu),Jl=Zi(Eu);function Ts(t){if(t===Eu)throw Error(W(174));return t}function hg(t,e){switch(Le(Jl,e),Le(Yl,t),Le(ur,Eu),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:mp(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=mp(e,t)}je(ur),Le(ur,e)}function ea(){je(ur),je(Yl),je(Jl)}function OE(t){Ts(Jl.current);var e=Ts(ur.current),n=mp(e,t.type);e!==n&&(Le(Yl,t),Le(ur,n))}function dg(t){Yl.current===t&&(je(ur),je(Yl))}var Ge=Zi(0);function yh(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var Pf=[];function fg(){for(var t=0;t<Pf.length;t++)Pf[t]._workInProgressVersionPrimary=null;Pf.length=0}var Vc=Jr.ReactCurrentDispatcher,Rf=Jr.ReactCurrentBatchConfig,Ms=0,Qe=null,ft=null,vt=null,vh=!1,Pl=!1,Zl=0,nx=0;function Ut(){throw Error(W(321))}function pg(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!Yn(t[n],e[n]))return!1;return!0}function mg(t,e,n,r,i,s){if(Ms=s,Qe=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,Vc.current=t===null||t.memoizedState===null?ox:ax,t=n(r,i),Pl){s=0;do{if(Pl=!1,Zl=0,25<=s)throw Error(W(301));s+=1,vt=ft=null,e.updateQueue=null,Vc.current=lx,t=n(r,i)}while(Pl)}if(Vc.current=_h,e=ft!==null&&ft.next!==null,Ms=0,vt=ft=Qe=null,vh=!1,e)throw Error(W(300));return t}function gg(){var t=Zl!==0;return Zl=0,t}function ir(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return vt===null?Qe.memoizedState=vt=t:vt=vt.next=t,vt}function Ln(){if(ft===null){var t=Qe.alternate;t=t!==null?t.memoizedState:null}else t=ft.next;var e=vt===null?Qe.memoizedState:vt.next;if(e!==null)vt=e,ft=t;else{if(t===null)throw Error(W(310));ft=t,t={memoizedState:ft.memoizedState,baseState:ft.baseState,baseQueue:ft.baseQueue,queue:ft.queue,next:null},vt===null?Qe.memoizedState=vt=t:vt=vt.next=t}return vt}function eu(t,e){return typeof e=="function"?e(t):e}function Nf(t){var e=Ln(),n=e.queue;if(n===null)throw Error(W(311));n.lastRenderedReducer=t;var r=ft,i=r.baseQueue,s=n.pending;if(s!==null){if(i!==null){var o=i.next;i.next=s.next,s.next=o}r.baseQueue=i=s,n.pending=null}if(i!==null){s=i.next,r=r.baseState;var a=o=null,l=null,c=s;do{var h=c.lane;if((Ms&h)===h)l!==null&&(l=l.next={lane:0,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null}),r=c.hasEagerState?c.eagerState:t(r,c.action);else{var f={lane:h,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null};l===null?(a=l=f,o=r):l=l.next=f,Qe.lanes|=h,Us|=h}c=c.next}while(c!==null&&c!==s);l===null?o=r:l.next=a,Yn(r,e.memoizedState)||(on=!0),e.memoizedState=r,e.baseState=o,e.baseQueue=l,n.lastRenderedState=r}if(t=n.interleaved,t!==null){i=t;do s=i.lane,Qe.lanes|=s,Us|=s,i=i.next;while(i!==t)}else i===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function Of(t){var e=Ln(),n=e.queue;if(n===null)throw Error(W(311));n.lastRenderedReducer=t;var r=n.dispatch,i=n.pending,s=e.memoizedState;if(i!==null){n.pending=null;var o=i=i.next;do s=t(s,o.action),o=o.next;while(o!==i);Yn(s,e.memoizedState)||(on=!0),e.memoizedState=s,e.baseQueue===null&&(e.baseState=s),n.lastRenderedState=s}return[s,r]}function LE(){}function DE(t,e){var n=Qe,r=Ln(),i=e(),s=!Yn(r.memoizedState,i);if(s&&(r.memoizedState=i,on=!0),r=r.queue,yg(VE.bind(null,n,r,t),[t]),r.getSnapshot!==e||s||vt!==null&&vt.memoizedState.tag&1){if(n.flags|=2048,tu(9,UE.bind(null,n,r,i,e),void 0,null),_t===null)throw Error(W(349));Ms&30||ME(n,e,i)}return i}function ME(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=Qe.updateQueue,e===null?(e={lastEffect:null,stores:null},Qe.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function UE(t,e,n,r){e.value=n,e.getSnapshot=r,$E(e)&&FE(t)}function VE(t,e,n){return n(function(){$E(e)&&FE(t)})}function $E(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!Yn(t,n)}catch{return!0}}function FE(t){var e=Wr(t,1);e!==null&&Gn(e,t,1,-1)}function P_(t){var e=ir();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:eu,lastRenderedState:t},e.queue=t,t=t.dispatch=sx.bind(null,Qe,t),[e.memoizedState,t]}function tu(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},e=Qe.updateQueue,e===null?(e={lastEffect:null,stores:null},Qe.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t)),t}function jE(){return Ln().memoizedState}function $c(t,e,n,r){var i=ir();Qe.flags|=t,i.memoizedState=tu(1|e,n,void 0,r===void 0?null:r)}function ed(t,e,n,r){var i=Ln();r=r===void 0?null:r;var s=void 0;if(ft!==null){var o=ft.memoizedState;if(s=o.destroy,r!==null&&pg(r,o.deps)){i.memoizedState=tu(e,n,s,r);return}}Qe.flags|=t,i.memoizedState=tu(1|e,n,s,r)}function R_(t,e){return $c(8390656,8,t,e)}function yg(t,e){return ed(2048,8,t,e)}function zE(t,e){return ed(4,2,t,e)}function BE(t,e){return ed(4,4,t,e)}function HE(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function WE(t,e,n){return n=n!=null?n.concat([t]):null,ed(4,4,HE.bind(null,e,t),n)}function vg(){}function qE(t,e){var n=Ln();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&pg(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function GE(t,e){var n=Ln();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&pg(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)}function KE(t,e,n){return Ms&21?(Yn(n,e)||(n=Z1(),Qe.lanes|=n,Us|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,on=!0),t.memoizedState=n)}function rx(t,e){var n=ke;ke=n!==0&&4>n?n:4,t(!0);var r=Rf.transition;Rf.transition={};try{t(!1),e()}finally{ke=n,Rf.transition=r}}function QE(){return Ln().memoizedState}function ix(t,e,n){var r=Li(t);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},XE(t))YE(e,n);else if(n=RE(t,e,n,r),n!==null){var i=Yt();Gn(n,t,r,i),JE(n,e,r)}}function sx(t,e,n){var r=Li(t),i={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(XE(t))YE(e,i);else{var s=t.alternate;if(t.lanes===0&&(s===null||s.lanes===0)&&(s=e.lastRenderedReducer,s!==null))try{var o=e.lastRenderedState,a=s(o,n);if(i.hasEagerState=!0,i.eagerState=a,Yn(a,o)){var l=e.interleaved;l===null?(i.next=i,ug(e)):(i.next=l.next,l.next=i),e.interleaved=i;return}}catch{}finally{}n=RE(t,e,i,r),n!==null&&(i=Yt(),Gn(n,t,r,i),JE(n,e,r))}}function XE(t){var e=t.alternate;return t===Qe||e!==null&&e===Qe}function YE(t,e){Pl=vh=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function JE(t,e,n){if(n&4194240){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,Qm(t,n)}}var _h={readContext:On,useCallback:Ut,useContext:Ut,useEffect:Ut,useImperativeHandle:Ut,useInsertionEffect:Ut,useLayoutEffect:Ut,useMemo:Ut,useReducer:Ut,useRef:Ut,useState:Ut,useDebugValue:Ut,useDeferredValue:Ut,useTransition:Ut,useMutableSource:Ut,useSyncExternalStore:Ut,useId:Ut,unstable_isNewReconciler:!1},ox={readContext:On,useCallback:function(t,e){return ir().memoizedState=[t,e===void 0?null:e],t},useContext:On,useEffect:R_,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,$c(4194308,4,HE.bind(null,e,t),n)},useLayoutEffect:function(t,e){return $c(4194308,4,t,e)},useInsertionEffect:function(t,e){return $c(4,2,t,e)},useMemo:function(t,e){var n=ir();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=ir();return e=n!==void 0?n(e):e,r.memoizedState=r.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},r.queue=t,t=t.dispatch=ix.bind(null,Qe,t),[r.memoizedState,t]},useRef:function(t){var e=ir();return t={current:t},e.memoizedState=t},useState:P_,useDebugValue:vg,useDeferredValue:function(t){return ir().memoizedState=t},useTransition:function(){var t=P_(!1),e=t[0];return t=rx.bind(null,t[1]),ir().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var r=Qe,i=ir();if(He){if(n===void 0)throw Error(W(407));n=n()}else{if(n=e(),_t===null)throw Error(W(349));Ms&30||ME(r,e,n)}i.memoizedState=n;var s={value:n,getSnapshot:e};return i.queue=s,R_(VE.bind(null,r,s,t),[t]),r.flags|=2048,tu(9,UE.bind(null,r,s,n,e),void 0,null),n},useId:function(){var t=ir(),e=_t.identifierPrefix;if(He){var n=Mr,r=Dr;n=(r&~(1<<32-qn(r)-1)).toString(32)+n,e=":"+e+"R"+n,n=Zl++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=nx++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},ax={readContext:On,useCallback:qE,useContext:On,useEffect:yg,useImperativeHandle:WE,useInsertionEffect:zE,useLayoutEffect:BE,useMemo:GE,useReducer:Nf,useRef:jE,useState:function(){return Nf(eu)},useDebugValue:vg,useDeferredValue:function(t){var e=Ln();return KE(e,ft.memoizedState,t)},useTransition:function(){var t=Nf(eu)[0],e=Ln().memoizedState;return[t,e]},useMutableSource:LE,useSyncExternalStore:DE,useId:QE,unstable_isNewReconciler:!1},lx={readContext:On,useCallback:qE,useContext:On,useEffect:yg,useImperativeHandle:WE,useInsertionEffect:zE,useLayoutEffect:BE,useMemo:GE,useReducer:Of,useRef:jE,useState:function(){return Of(eu)},useDebugValue:vg,useDeferredValue:function(t){var e=Ln();return ft===null?e.memoizedState=t:KE(e,ft.memoizedState,t)},useTransition:function(){var t=Of(eu)[0],e=Ln().memoizedState;return[t,e]},useMutableSource:LE,useSyncExternalStore:DE,useId:QE,unstable_isNewReconciler:!1};function jn(t,e){if(t&&t.defaultProps){e=Xe({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function Mp(t,e,n,r){e=t.memoizedState,n=n(r,e),n=n==null?e:Xe({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var td={isMounted:function(t){return(t=t._reactInternals)?Xs(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var r=Yt(),i=Li(t),s=Fr(r,i);s.payload=e,n!=null&&(s.callback=n),e=Ni(t,s,i),e!==null&&(Gn(e,t,i,r),Uc(e,t,i))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var r=Yt(),i=Li(t),s=Fr(r,i);s.tag=1,s.payload=e,n!=null&&(s.callback=n),e=Ni(t,s,i),e!==null&&(Gn(e,t,i,r),Uc(e,t,i))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=Yt(),r=Li(t),i=Fr(n,r);i.tag=2,e!=null&&(i.callback=e),e=Ni(t,i,r),e!==null&&(Gn(e,t,r,n),Uc(e,t,r))}};function N_(t,e,n,r,i,s,o){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(r,s,o):e.prototype&&e.prototype.isPureReactComponent?!Gl(n,r)||!Gl(i,s):!0}function ZE(t,e,n){var r=!1,i=qi,s=e.contextType;return typeof s=="object"&&s!==null?s=On(s):(i=ln(e)?Ls:Bt.current,r=e.contextTypes,s=(r=r!=null)?Yo(t,i):qi),e=new e(n,s),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=td,t.stateNode=e,e._reactInternals=t,r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=i,t.__reactInternalMemoizedMaskedChildContext=s),e}function O_(t,e,n,r){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&td.enqueueReplaceState(e,e.state,null)}function Up(t,e,n,r){var i=t.stateNode;i.props=n,i.state=t.memoizedState,i.refs={},cg(t);var s=e.contextType;typeof s=="object"&&s!==null?i.context=On(s):(s=ln(e)?Ls:Bt.current,i.context=Yo(t,s)),i.state=t.memoizedState,s=e.getDerivedStateFromProps,typeof s=="function"&&(Mp(t,e,s,n),i.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof i.getSnapshotBeforeUpdate=="function"||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(e=i.state,typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount(),e!==i.state&&td.enqueueReplaceState(i,i.state,null),gh(t,n,i,r),i.state=t.memoizedState),typeof i.componentDidMount=="function"&&(t.flags|=4194308)}function ta(t,e){try{var n="",r=e;do n+=MS(r),r=r.return;while(r);var i=n}catch(s){i=`
Error generating stack: `+s.message+`
`+s.stack}return{value:t,source:e,stack:i,digest:null}}function Lf(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function Vp(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var ux=typeof WeakMap=="function"?WeakMap:Map;function eb(t,e,n){n=Fr(-1,n),n.tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){Eh||(Eh=!0,Kp=r),Vp(t,e)},n}function tb(t,e,n){n=Fr(-1,n),n.tag=3;var r=t.type.getDerivedStateFromError;if(typeof r=="function"){var i=e.value;n.payload=function(){return r(i)},n.callback=function(){Vp(t,e)}}var s=t.stateNode;return s!==null&&typeof s.componentDidCatch=="function"&&(n.callback=function(){Vp(t,e),typeof r!="function"&&(Oi===null?Oi=new Set([this]):Oi.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),n}function L_(t,e,n){var r=t.pingCache;if(r===null){r=t.pingCache=new ux;var i=new Set;r.set(e,i)}else i=r.get(e),i===void 0&&(i=new Set,r.set(e,i));i.has(n)||(i.add(n),t=Tx.bind(null,t,e,n),e.then(t,t))}function D_(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function M_(t,e,n,r,i){return t.mode&1?(t.flags|=65536,t.lanes=i,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=Fr(-1,1),e.tag=2,Ni(n,e,1))),n.lanes|=1),t)}var cx=Jr.ReactCurrentOwner,on=!1;function Kt(t,e,n,r){e.child=t===null?PE(e,null,n,r):Zo(e,t.child,n,r)}function U_(t,e,n,r,i){n=n.render;var s=e.ref;return Ho(e,i),r=mg(t,e,n,r,s,i),n=gg(),t!==null&&!on?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,qr(t,e,i)):(He&&n&&rg(e),e.flags|=1,Kt(t,e,r,i),e.child)}function V_(t,e,n,r,i){if(t===null){var s=n.type;return typeof s=="function"&&!Sg(s)&&s.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=s,nb(t,e,s,r,i)):(t=Bc(n.type,null,r,e,e.mode,i),t.ref=e.ref,t.return=e,e.child=t)}if(s=t.child,!(t.lanes&i)){var o=s.memoizedProps;if(n=n.compare,n=n!==null?n:Gl,n(o,r)&&t.ref===e.ref)return qr(t,e,i)}return e.flags|=1,t=Di(s,r),t.ref=e.ref,t.return=e,e.child=t}function nb(t,e,n,r,i){if(t!==null){var s=t.memoizedProps;if(Gl(s,r)&&t.ref===e.ref)if(on=!1,e.pendingProps=r=s,(t.lanes&i)!==0)t.flags&131072&&(on=!0);else return e.lanes=t.lanes,qr(t,e,i)}return $p(t,e,n,r,i)}function rb(t,e,n){var r=e.pendingProps,i=r.children,s=t!==null?t.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},Le(Mo,fn),fn|=n;else{if(!(n&1073741824))return t=s!==null?s.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,Le(Mo,fn),fn|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=s!==null?s.baseLanes:n,Le(Mo,fn),fn|=r}else s!==null?(r=s.baseLanes|n,e.memoizedState=null):r=n,Le(Mo,fn),fn|=r;return Kt(t,e,i,n),e.child}function ib(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function $p(t,e,n,r,i){var s=ln(n)?Ls:Bt.current;return s=Yo(e,s),Ho(e,i),n=mg(t,e,n,r,s,i),r=gg(),t!==null&&!on?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,qr(t,e,i)):(He&&r&&rg(e),e.flags|=1,Kt(t,e,n,i),e.child)}function $_(t,e,n,r,i){if(ln(n)){var s=!0;hh(e)}else s=!1;if(Ho(e,i),e.stateNode===null)Fc(t,e),ZE(e,n,r),Up(e,n,r,i),r=!0;else if(t===null){var o=e.stateNode,a=e.memoizedProps;o.props=a;var l=o.context,c=n.contextType;typeof c=="object"&&c!==null?c=On(c):(c=ln(n)?Ls:Bt.current,c=Yo(e,c));var h=n.getDerivedStateFromProps,f=typeof h=="function"||typeof o.getSnapshotBeforeUpdate=="function";f||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==r||l!==c)&&O_(e,o,r,c),vi=!1;var p=e.memoizedState;o.state=p,gh(e,r,o,i),l=e.memoizedState,a!==r||p!==l||an.current||vi?(typeof h=="function"&&(Mp(e,n,h,r),l=e.memoizedState),(a=vi||N_(e,n,a,r,p,l,c))?(f||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=l),o.props=r,o.state=l,o.context=c,r=a):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{o=e.stateNode,NE(t,e),a=e.memoizedProps,c=e.type===e.elementType?a:jn(e.type,a),o.props=c,f=e.pendingProps,p=o.context,l=n.contextType,typeof l=="object"&&l!==null?l=On(l):(l=ln(n)?Ls:Bt.current,l=Yo(e,l));var _=n.getDerivedStateFromProps;(h=typeof _=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==f||p!==l)&&O_(e,o,r,l),vi=!1,p=e.memoizedState,o.state=p,gh(e,r,o,i);var w=e.memoizedState;a!==f||p!==w||an.current||vi?(typeof _=="function"&&(Mp(e,n,_,r),w=e.memoizedState),(c=vi||N_(e,n,c,r,p,w,l)||!1)?(h||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(r,w,l),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(r,w,l)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&p===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&p===t.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=w),o.props=r,o.state=w,o.context=l,r=c):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&p===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&p===t.memoizedState||(e.flags|=1024),r=!1)}return Fp(t,e,n,r,s,i)}function Fp(t,e,n,r,i,s){ib(t,e);var o=(e.flags&128)!==0;if(!r&&!o)return i&&C_(e,n,!1),qr(t,e,s);r=e.stateNode,cx.current=e;var a=o&&typeof n.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,t!==null&&o?(e.child=Zo(e,t.child,null,s),e.child=Zo(e,null,a,s)):Kt(t,e,a,s),e.memoizedState=r.state,i&&C_(e,n,!0),e.child}function sb(t){var e=t.stateNode;e.pendingContext?T_(t,e.pendingContext,e.pendingContext!==e.context):e.context&&T_(t,e.context,!1),hg(t,e.containerInfo)}function F_(t,e,n,r,i){return Jo(),sg(i),e.flags|=256,Kt(t,e,n,r),e.child}var jp={dehydrated:null,treeContext:null,retryLane:0};function zp(t){return{baseLanes:t,cachePool:null,transitions:null}}function ob(t,e,n){var r=e.pendingProps,i=Ge.current,s=!1,o=(e.flags&128)!==0,a;if((a=o)||(a=t!==null&&t.memoizedState===null?!1:(i&2)!==0),a?(s=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(i|=1),Le(Ge,i&1),t===null)return Lp(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(o=r.children,t=r.fallback,s?(r=e.mode,s=e.child,o={mode:"hidden",children:o},!(r&1)&&s!==null?(s.childLanes=0,s.pendingProps=o):s=id(o,r,0,null),t=Ps(t,r,n,null),s.return=e,t.return=e,s.sibling=t,e.child=s,e.child.memoizedState=zp(n),e.memoizedState=jp,t):_g(e,o));if(i=t.memoizedState,i!==null&&(a=i.dehydrated,a!==null))return hx(t,e,o,r,a,i,n);if(s){s=r.fallback,o=e.mode,i=t.child,a=i.sibling;var l={mode:"hidden",children:r.children};return!(o&1)&&e.child!==i?(r=e.child,r.childLanes=0,r.pendingProps=l,e.deletions=null):(r=Di(i,l),r.subtreeFlags=i.subtreeFlags&14680064),a!==null?s=Di(a,s):(s=Ps(s,o,n,null),s.flags|=2),s.return=e,r.return=e,r.sibling=s,e.child=r,r=s,s=e.child,o=t.child.memoizedState,o=o===null?zp(n):{baseLanes:o.baseLanes|n,cachePool:null,transitions:o.transitions},s.memoizedState=o,s.childLanes=t.childLanes&~n,e.memoizedState=jp,r}return s=t.child,t=s.sibling,r=Di(s,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=n),r.return=e,r.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=r,e.memoizedState=null,r}function _g(t,e){return e=id({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function gc(t,e,n,r){return r!==null&&sg(r),Zo(e,t.child,null,n),t=_g(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function hx(t,e,n,r,i,s,o){if(n)return e.flags&256?(e.flags&=-257,r=Lf(Error(W(422))),gc(t,e,o,r)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(s=r.fallback,i=e.mode,r=id({mode:"visible",children:r.children},i,0,null),s=Ps(s,i,o,null),s.flags|=2,r.return=e,s.return=e,r.sibling=s,e.child=r,e.mode&1&&Zo(e,t.child,null,o),e.child.memoizedState=zp(o),e.memoizedState=jp,s);if(!(e.mode&1))return gc(t,e,o,null);if(i.data==="$!"){if(r=i.nextSibling&&i.nextSibling.dataset,r)var a=r.dgst;return r=a,s=Error(W(419)),r=Lf(s,r,void 0),gc(t,e,o,r)}if(a=(o&t.childLanes)!==0,on||a){if(r=_t,r!==null){switch(o&-o){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}i=i&(r.suspendedLanes|o)?0:i,i!==0&&i!==s.retryLane&&(s.retryLane=i,Wr(t,i),Gn(r,t,i,-1))}return Ig(),r=Lf(Error(W(421))),gc(t,e,o,r)}return i.data==="$?"?(e.flags|=128,e.child=t.child,e=Cx.bind(null,t),i._reactRetry=e,null):(t=s.treeContext,pn=Ri(i.nextSibling),gn=e,He=!0,Hn=null,t!==null&&(Sn[An++]=Dr,Sn[An++]=Mr,Sn[An++]=Ds,Dr=t.id,Mr=t.overflow,Ds=e),e=_g(e,r.children),e.flags|=4096,e)}function j_(t,e,n){t.lanes|=e;var r=t.alternate;r!==null&&(r.lanes|=e),Dp(t.return,e,n)}function Df(t,e,n,r,i){var s=t.memoizedState;s===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(s.isBackwards=e,s.rendering=null,s.renderingStartTime=0,s.last=r,s.tail=n,s.tailMode=i)}function ab(t,e,n){var r=e.pendingProps,i=r.revealOrder,s=r.tail;if(Kt(t,e,r.children,n),r=Ge.current,r&2)r=r&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&j_(t,n,e);else if(t.tag===19)j_(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(Le(Ge,r),!(e.mode&1))e.memoizedState=null;else switch(i){case"forwards":for(n=e.child,i=null;n!==null;)t=n.alternate,t!==null&&yh(t)===null&&(i=n),n=n.sibling;n=i,n===null?(i=e.child,e.child=null):(i=n.sibling,n.sibling=null),Df(e,!1,i,n,s);break;case"backwards":for(n=null,i=e.child,e.child=null;i!==null;){if(t=i.alternate,t!==null&&yh(t)===null){e.child=i;break}t=i.sibling,i.sibling=n,n=i,i=t}Df(e,!0,n,null,s);break;case"together":Df(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function Fc(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function qr(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),Us|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(W(153));if(e.child!==null){for(t=e.child,n=Di(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=Di(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function dx(t,e,n){switch(e.tag){case 3:sb(e),Jo();break;case 5:OE(e);break;case 1:ln(e.type)&&hh(e);break;case 4:hg(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,i=e.memoizedProps.value;Le(ph,r._currentValue),r._currentValue=i;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(Le(Ge,Ge.current&1),e.flags|=128,null):n&e.child.childLanes?ob(t,e,n):(Le(Ge,Ge.current&1),t=qr(t,e,n),t!==null?t.sibling:null);Le(Ge,Ge.current&1);break;case 19:if(r=(n&e.childLanes)!==0,t.flags&128){if(r)return ab(t,e,n);e.flags|=128}if(i=e.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),Le(Ge,Ge.current),r)break;return null;case 22:case 23:return e.lanes=0,rb(t,e,n)}return qr(t,e,n)}var lb,Bp,ub,cb;lb=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};Bp=function(){};ub=function(t,e,n,r){var i=t.memoizedProps;if(i!==r){t=e.stateNode,Ts(ur.current);var s=null;switch(n){case"input":i=hp(t,i),r=hp(t,r),s=[];break;case"select":i=Xe({},i,{value:void 0}),r=Xe({},r,{value:void 0}),s=[];break;case"textarea":i=pp(t,i),r=pp(t,r),s=[];break;default:typeof i.onClick!="function"&&typeof r.onClick=="function"&&(t.onclick=uh)}gp(n,r);var o;n=null;for(c in i)if(!r.hasOwnProperty(c)&&i.hasOwnProperty(c)&&i[c]!=null)if(c==="style"){var a=i[c];for(o in a)a.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else c!=="dangerouslySetInnerHTML"&&c!=="children"&&c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&c!=="autoFocus"&&(Fl.hasOwnProperty(c)?s||(s=[]):(s=s||[]).push(c,null));for(c in r){var l=r[c];if(a=i!=null?i[c]:void 0,r.hasOwnProperty(c)&&l!==a&&(l!=null||a!=null))if(c==="style")if(a){for(o in a)!a.hasOwnProperty(o)||l&&l.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in l)l.hasOwnProperty(o)&&a[o]!==l[o]&&(n||(n={}),n[o]=l[o])}else n||(s||(s=[]),s.push(c,n)),n=l;else c==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,a=a?a.__html:void 0,l!=null&&a!==l&&(s=s||[]).push(c,l)):c==="children"?typeof l!="string"&&typeof l!="number"||(s=s||[]).push(c,""+l):c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&(Fl.hasOwnProperty(c)?(l!=null&&c==="onScroll"&&$e("scroll",t),s||a===l||(s=[])):(s=s||[]).push(c,l))}n&&(s=s||[]).push("style",n);var c=s;(e.updateQueue=c)&&(e.flags|=4)}};cb=function(t,e,n,r){n!==r&&(e.flags|=4)};function tl(t,e){if(!He)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:r.sibling=null}}function Vt(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,r=0;if(e)for(var i=t.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags&14680064,r|=i.flags&14680064,i.return=t,i=i.sibling;else for(i=t.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=t,i=i.sibling;return t.subtreeFlags|=r,t.childLanes=n,e}function fx(t,e,n){var r=e.pendingProps;switch(ig(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Vt(e),null;case 1:return ln(e.type)&&ch(),Vt(e),null;case 3:return r=e.stateNode,ea(),je(an),je(Bt),fg(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&(pc(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,Hn!==null&&(Yp(Hn),Hn=null))),Bp(t,e),Vt(e),null;case 5:dg(e);var i=Ts(Jl.current);if(n=e.type,t!==null&&e.stateNode!=null)ub(t,e,n,r,i),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error(W(166));return Vt(e),null}if(t=Ts(ur.current),pc(e)){r=e.stateNode,n=e.type;var s=e.memoizedProps;switch(r[ar]=e,r[Xl]=s,t=(e.mode&1)!==0,n){case"dialog":$e("cancel",r),$e("close",r);break;case"iframe":case"object":case"embed":$e("load",r);break;case"video":case"audio":for(i=0;i<gl.length;i++)$e(gl[i],r);break;case"source":$e("error",r);break;case"img":case"image":case"link":$e("error",r),$e("load",r);break;case"details":$e("toggle",r);break;case"input":Xv(r,s),$e("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!s.multiple},$e("invalid",r);break;case"textarea":Jv(r,s),$e("invalid",r)}gp(n,s),i=null;for(var o in s)if(s.hasOwnProperty(o)){var a=s[o];o==="children"?typeof a=="string"?r.textContent!==a&&(s.suppressHydrationWarning!==!0&&fc(r.textContent,a,t),i=["children",a]):typeof a=="number"&&r.textContent!==""+a&&(s.suppressHydrationWarning!==!0&&fc(r.textContent,a,t),i=["children",""+a]):Fl.hasOwnProperty(o)&&a!=null&&o==="onScroll"&&$e("scroll",r)}switch(n){case"input":sc(r),Yv(r,s,!0);break;case"textarea":sc(r),Zv(r);break;case"select":case"option":break;default:typeof s.onClick=="function"&&(r.onclick=uh)}r=i,e.updateQueue=r,r!==null&&(e.flags|=4)}else{o=i.nodeType===9?i:i.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=V1(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=o.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof r.is=="string"?t=o.createElement(n,{is:r.is}):(t=o.createElement(n),n==="select"&&(o=t,r.multiple?o.multiple=!0:r.size&&(o.size=r.size))):t=o.createElementNS(t,n),t[ar]=e,t[Xl]=r,lb(t,e,!1,!1),e.stateNode=t;e:{switch(o=yp(n,r),n){case"dialog":$e("cancel",t),$e("close",t),i=r;break;case"iframe":case"object":case"embed":$e("load",t),i=r;break;case"video":case"audio":for(i=0;i<gl.length;i++)$e(gl[i],t);i=r;break;case"source":$e("error",t),i=r;break;case"img":case"image":case"link":$e("error",t),$e("load",t),i=r;break;case"details":$e("toggle",t),i=r;break;case"input":Xv(t,r),i=hp(t,r),$e("invalid",t);break;case"option":i=r;break;case"select":t._wrapperState={wasMultiple:!!r.multiple},i=Xe({},r,{value:void 0}),$e("invalid",t);break;case"textarea":Jv(t,r),i=pp(t,r),$e("invalid",t);break;default:i=r}gp(n,i),a=i;for(s in a)if(a.hasOwnProperty(s)){var l=a[s];s==="style"?j1(t,l):s==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,l!=null&&$1(t,l)):s==="children"?typeof l=="string"?(n!=="textarea"||l!=="")&&jl(t,l):typeof l=="number"&&jl(t,""+l):s!=="suppressContentEditableWarning"&&s!=="suppressHydrationWarning"&&s!=="autoFocus"&&(Fl.hasOwnProperty(s)?l!=null&&s==="onScroll"&&$e("scroll",t):l!=null&&Bm(t,s,l,o))}switch(n){case"input":sc(t),Yv(t,r,!1);break;case"textarea":sc(t),Zv(t);break;case"option":r.value!=null&&t.setAttribute("value",""+Wi(r.value));break;case"select":t.multiple=!!r.multiple,s=r.value,s!=null?Fo(t,!!r.multiple,s,!1):r.defaultValue!=null&&Fo(t,!!r.multiple,r.defaultValue,!0);break;default:typeof i.onClick=="function"&&(t.onclick=uh)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return Vt(e),null;case 6:if(t&&e.stateNode!=null)cb(t,e,t.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(W(166));if(n=Ts(Jl.current),Ts(ur.current),pc(e)){if(r=e.stateNode,n=e.memoizedProps,r[ar]=e,(s=r.nodeValue!==n)&&(t=gn,t!==null))switch(t.tag){case 3:fc(r.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&fc(r.nodeValue,n,(t.mode&1)!==0)}s&&(e.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[ar]=e,e.stateNode=r}return Vt(e),null;case 13:if(je(Ge),r=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(He&&pn!==null&&e.mode&1&&!(e.flags&128))xE(),Jo(),e.flags|=98560,s=!1;else if(s=pc(e),r!==null&&r.dehydrated!==null){if(t===null){if(!s)throw Error(W(318));if(s=e.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(W(317));s[ar]=e}else Jo(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;Vt(e),s=!1}else Hn!==null&&(Yp(Hn),Hn=null),s=!0;if(!s)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(r=r!==null,r!==(t!==null&&t.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(t===null||Ge.current&1?pt===0&&(pt=3):Ig())),e.updateQueue!==null&&(e.flags|=4),Vt(e),null);case 4:return ea(),Bp(t,e),t===null&&Kl(e.stateNode.containerInfo),Vt(e),null;case 10:return lg(e.type._context),Vt(e),null;case 17:return ln(e.type)&&ch(),Vt(e),null;case 19:if(je(Ge),s=e.memoizedState,s===null)return Vt(e),null;if(r=(e.flags&128)!==0,o=s.rendering,o===null)if(r)tl(s,!1);else{if(pt!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(o=yh(t),o!==null){for(e.flags|=128,tl(s,!1),r=o.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=n,n=e.child;n!==null;)s=n,t=r,s.flags&=14680066,o=s.alternate,o===null?(s.childLanes=0,s.lanes=t,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=o.childLanes,s.lanes=o.lanes,s.child=o.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=o.memoizedProps,s.memoizedState=o.memoizedState,s.updateQueue=o.updateQueue,s.type=o.type,t=o.dependencies,s.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return Le(Ge,Ge.current&1|2),e.child}t=t.sibling}s.tail!==null&&rt()>na&&(e.flags|=128,r=!0,tl(s,!1),e.lanes=4194304)}else{if(!r)if(t=yh(o),t!==null){if(e.flags|=128,r=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),tl(s,!0),s.tail===null&&s.tailMode==="hidden"&&!o.alternate&&!He)return Vt(e),null}else 2*rt()-s.renderingStartTime>na&&n!==1073741824&&(e.flags|=128,r=!0,tl(s,!1),e.lanes=4194304);s.isBackwards?(o.sibling=e.child,e.child=o):(n=s.last,n!==null?n.sibling=o:e.child=o,s.last=o)}return s.tail!==null?(e=s.tail,s.rendering=e,s.tail=e.sibling,s.renderingStartTime=rt(),e.sibling=null,n=Ge.current,Le(Ge,r?n&1|2:n&1),e):(Vt(e),null);case 22:case 23:return Cg(),r=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?fn&1073741824&&(Vt(e),e.subtreeFlags&6&&(e.flags|=8192)):Vt(e),null;case 24:return null;case 25:return null}throw Error(W(156,e.tag))}function px(t,e){switch(ig(e),e.tag){case 1:return ln(e.type)&&ch(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return ea(),je(an),je(Bt),fg(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return dg(e),null;case 13:if(je(Ge),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(W(340));Jo()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return je(Ge),null;case 4:return ea(),null;case 10:return lg(e.type._context),null;case 22:case 23:return Cg(),null;case 24:return null;default:return null}}var yc=!1,jt=!1,mx=typeof WeakSet=="function"?WeakSet:Set,X=null;function Do(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){Ze(t,e,r)}else n.current=null}function Hp(t,e,n){try{n()}catch(r){Ze(t,e,r)}}var z_=!1;function gx(t,e){if(Ap=oh,t=mE(),ng(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var i=r.anchorOffset,s=r.focusNode;r=r.focusOffset;try{n.nodeType,s.nodeType}catch{n=null;break e}var o=0,a=-1,l=-1,c=0,h=0,f=t,p=null;t:for(;;){for(var _;f!==n||i!==0&&f.nodeType!==3||(a=o+i),f!==s||r!==0&&f.nodeType!==3||(l=o+r),f.nodeType===3&&(o+=f.nodeValue.length),(_=f.firstChild)!==null;)p=f,f=_;for(;;){if(f===t)break t;if(p===n&&++c===i&&(a=o),p===s&&++h===r&&(l=o),(_=f.nextSibling)!==null)break;f=p,p=f.parentNode}f=_}n=a===-1||l===-1?null:{start:a,end:l}}else n=null}n=n||{start:0,end:0}}else n=null;for(xp={focusedElem:t,selectionRange:n},oh=!1,X=e;X!==null;)if(e=X,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,X=t;else for(;X!==null;){e=X;try{var w=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(w!==null){var I=w.memoizedProps,R=w.memoizedState,C=e.stateNode,E=C.getSnapshotBeforeUpdate(e.elementType===e.type?I:jn(e.type,I),R);C.__reactInternalSnapshotBeforeUpdate=E}break;case 3:var S=e.stateNode.containerInfo;S.nodeType===1?S.textContent="":S.nodeType===9&&S.documentElement&&S.removeChild(S.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(W(163))}}catch(D){Ze(e,e.return,D)}if(t=e.sibling,t!==null){t.return=e.return,X=t;break}X=e.return}return w=z_,z_=!1,w}function Rl(t,e,n){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var i=r=r.next;do{if((i.tag&t)===t){var s=i.destroy;i.destroy=void 0,s!==void 0&&Hp(e,n,s)}i=i.next}while(i!==r)}}function nd(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var r=n.create;n.destroy=r()}n=n.next}while(n!==e)}}function Wp(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function hb(t){var e=t.alternate;e!==null&&(t.alternate=null,hb(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[ar],delete e[Xl],delete e[Rp],delete e[JA],delete e[ZA])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function db(t){return t.tag===5||t.tag===3||t.tag===4}function B_(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||db(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function qp(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=uh));else if(r!==4&&(t=t.child,t!==null))for(qp(t,e,n),t=t.sibling;t!==null;)qp(t,e,n),t=t.sibling}function Gp(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(r!==4&&(t=t.child,t!==null))for(Gp(t,e,n),t=t.sibling;t!==null;)Gp(t,e,n),t=t.sibling}var xt=null,zn=!1;function hi(t,e,n){for(n=n.child;n!==null;)fb(t,e,n),n=n.sibling}function fb(t,e,n){if(lr&&typeof lr.onCommitFiberUnmount=="function")try{lr.onCommitFiberUnmount(Kh,n)}catch{}switch(n.tag){case 5:jt||Do(n,e);case 6:var r=xt,i=zn;xt=null,hi(t,e,n),xt=r,zn=i,xt!==null&&(zn?(t=xt,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):xt.removeChild(n.stateNode));break;case 18:xt!==null&&(zn?(t=xt,n=n.stateNode,t.nodeType===8?xf(t.parentNode,n):t.nodeType===1&&xf(t,n),Wl(t)):xf(xt,n.stateNode));break;case 4:r=xt,i=zn,xt=n.stateNode.containerInfo,zn=!0,hi(t,e,n),xt=r,zn=i;break;case 0:case 11:case 14:case 15:if(!jt&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){i=r=r.next;do{var s=i,o=s.destroy;s=s.tag,o!==void 0&&(s&2||s&4)&&Hp(n,e,o),i=i.next}while(i!==r)}hi(t,e,n);break;case 1:if(!jt&&(Do(n,e),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(a){Ze(n,e,a)}hi(t,e,n);break;case 21:hi(t,e,n);break;case 22:n.mode&1?(jt=(r=jt)||n.memoizedState!==null,hi(t,e,n),jt=r):hi(t,e,n);break;default:hi(t,e,n)}}function H_(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new mx),e.forEach(function(r){var i=Ix.bind(null,t,r);n.has(r)||(n.add(r),r.then(i,i))})}}function $n(t,e){var n=e.deletions;if(n!==null)for(var r=0;r<n.length;r++){var i=n[r];try{var s=t,o=e,a=o;e:for(;a!==null;){switch(a.tag){case 5:xt=a.stateNode,zn=!1;break e;case 3:xt=a.stateNode.containerInfo,zn=!0;break e;case 4:xt=a.stateNode.containerInfo,zn=!0;break e}a=a.return}if(xt===null)throw Error(W(160));fb(s,o,i),xt=null,zn=!1;var l=i.alternate;l!==null&&(l.return=null),i.return=null}catch(c){Ze(i,e,c)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)pb(e,t),e=e.sibling}function pb(t,e){var n=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if($n(e,t),tr(t),r&4){try{Rl(3,t,t.return),nd(3,t)}catch(I){Ze(t,t.return,I)}try{Rl(5,t,t.return)}catch(I){Ze(t,t.return,I)}}break;case 1:$n(e,t),tr(t),r&512&&n!==null&&Do(n,n.return);break;case 5:if($n(e,t),tr(t),r&512&&n!==null&&Do(n,n.return),t.flags&32){var i=t.stateNode;try{jl(i,"")}catch(I){Ze(t,t.return,I)}}if(r&4&&(i=t.stateNode,i!=null)){var s=t.memoizedProps,o=n!==null?n.memoizedProps:s,a=t.type,l=t.updateQueue;if(t.updateQueue=null,l!==null)try{a==="input"&&s.type==="radio"&&s.name!=null&&M1(i,s),yp(a,o);var c=yp(a,s);for(o=0;o<l.length;o+=2){var h=l[o],f=l[o+1];h==="style"?j1(i,f):h==="dangerouslySetInnerHTML"?$1(i,f):h==="children"?jl(i,f):Bm(i,h,f,c)}switch(a){case"input":dp(i,s);break;case"textarea":U1(i,s);break;case"select":var p=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!s.multiple;var _=s.value;_!=null?Fo(i,!!s.multiple,_,!1):p!==!!s.multiple&&(s.defaultValue!=null?Fo(i,!!s.multiple,s.defaultValue,!0):Fo(i,!!s.multiple,s.multiple?[]:"",!1))}i[Xl]=s}catch(I){Ze(t,t.return,I)}}break;case 6:if($n(e,t),tr(t),r&4){if(t.stateNode===null)throw Error(W(162));i=t.stateNode,s=t.memoizedProps;try{i.nodeValue=s}catch(I){Ze(t,t.return,I)}}break;case 3:if($n(e,t),tr(t),r&4&&n!==null&&n.memoizedState.isDehydrated)try{Wl(e.containerInfo)}catch(I){Ze(t,t.return,I)}break;case 4:$n(e,t),tr(t);break;case 13:$n(e,t),tr(t),i=t.child,i.flags&8192&&(s=i.memoizedState!==null,i.stateNode.isHidden=s,!s||i.alternate!==null&&i.alternate.memoizedState!==null||(bg=rt())),r&4&&H_(t);break;case 22:if(h=n!==null&&n.memoizedState!==null,t.mode&1?(jt=(c=jt)||h,$n(e,t),jt=c):$n(e,t),tr(t),r&8192){if(c=t.memoizedState!==null,(t.stateNode.isHidden=c)&&!h&&t.mode&1)for(X=t,h=t.child;h!==null;){for(f=X=h;X!==null;){switch(p=X,_=p.child,p.tag){case 0:case 11:case 14:case 15:Rl(4,p,p.return);break;case 1:Do(p,p.return);var w=p.stateNode;if(typeof w.componentWillUnmount=="function"){r=p,n=p.return;try{e=r,w.props=e.memoizedProps,w.state=e.memoizedState,w.componentWillUnmount()}catch(I){Ze(r,n,I)}}break;case 5:Do(p,p.return);break;case 22:if(p.memoizedState!==null){q_(f);continue}}_!==null?(_.return=p,X=_):q_(f)}h=h.sibling}e:for(h=null,f=t;;){if(f.tag===5){if(h===null){h=f;try{i=f.stateNode,c?(s=i.style,typeof s.setProperty=="function"?s.setProperty("display","none","important"):s.display="none"):(a=f.stateNode,l=f.memoizedProps.style,o=l!=null&&l.hasOwnProperty("display")?l.display:null,a.style.display=F1("display",o))}catch(I){Ze(t,t.return,I)}}}else if(f.tag===6){if(h===null)try{f.stateNode.nodeValue=c?"":f.memoizedProps}catch(I){Ze(t,t.return,I)}}else if((f.tag!==22&&f.tag!==23||f.memoizedState===null||f===t)&&f.child!==null){f.child.return=f,f=f.child;continue}if(f===t)break e;for(;f.sibling===null;){if(f.return===null||f.return===t)break e;h===f&&(h=null),f=f.return}h===f&&(h=null),f.sibling.return=f.return,f=f.sibling}}break;case 19:$n(e,t),tr(t),r&4&&H_(t);break;case 21:break;default:$n(e,t),tr(t)}}function tr(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(db(n)){var r=n;break e}n=n.return}throw Error(W(160))}switch(r.tag){case 5:var i=r.stateNode;r.flags&32&&(jl(i,""),r.flags&=-33);var s=B_(t);Gp(t,s,i);break;case 3:case 4:var o=r.stateNode.containerInfo,a=B_(t);qp(t,a,o);break;default:throw Error(W(161))}}catch(l){Ze(t,t.return,l)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function yx(t,e,n){X=t,mb(t)}function mb(t,e,n){for(var r=(t.mode&1)!==0;X!==null;){var i=X,s=i.child;if(i.tag===22&&r){var o=i.memoizedState!==null||yc;if(!o){var a=i.alternate,l=a!==null&&a.memoizedState!==null||jt;a=yc;var c=jt;if(yc=o,(jt=l)&&!c)for(X=i;X!==null;)o=X,l=o.child,o.tag===22&&o.memoizedState!==null?G_(i):l!==null?(l.return=o,X=l):G_(i);for(;s!==null;)X=s,mb(s),s=s.sibling;X=i,yc=a,jt=c}W_(t)}else i.subtreeFlags&8772&&s!==null?(s.return=i,X=s):W_(t)}}function W_(t){for(;X!==null;){var e=X;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:jt||nd(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!jt)if(n===null)r.componentDidMount();else{var i=e.elementType===e.type?n.memoizedProps:jn(e.type,n.memoizedProps);r.componentDidUpdate(i,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var s=e.updateQueue;s!==null&&k_(e,s,r);break;case 3:var o=e.updateQueue;if(o!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}k_(e,o,n)}break;case 5:var a=e.stateNode;if(n===null&&e.flags&4){n=a;var l=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":l.autoFocus&&n.focus();break;case"img":l.src&&(n.src=l.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var c=e.alternate;if(c!==null){var h=c.memoizedState;if(h!==null){var f=h.dehydrated;f!==null&&Wl(f)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(W(163))}jt||e.flags&512&&Wp(e)}catch(p){Ze(e,e.return,p)}}if(e===t){X=null;break}if(n=e.sibling,n!==null){n.return=e.return,X=n;break}X=e.return}}function q_(t){for(;X!==null;){var e=X;if(e===t){X=null;break}var n=e.sibling;if(n!==null){n.return=e.return,X=n;break}X=e.return}}function G_(t){for(;X!==null;){var e=X;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{nd(4,e)}catch(l){Ze(e,n,l)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var i=e.return;try{r.componentDidMount()}catch(l){Ze(e,i,l)}}var s=e.return;try{Wp(e)}catch(l){Ze(e,s,l)}break;case 5:var o=e.return;try{Wp(e)}catch(l){Ze(e,o,l)}}}catch(l){Ze(e,e.return,l)}if(e===t){X=null;break}var a=e.sibling;if(a!==null){a.return=e.return,X=a;break}X=e.return}}var vx=Math.ceil,wh=Jr.ReactCurrentDispatcher,wg=Jr.ReactCurrentOwner,Nn=Jr.ReactCurrentBatchConfig,Ce=0,_t=null,ut=null,Rt=0,fn=0,Mo=Zi(0),pt=0,nu=null,Us=0,rd=0,Eg=0,Nl=null,nn=null,bg=0,na=1/0,Pr=null,Eh=!1,Kp=null,Oi=null,vc=!1,Ii=null,bh=0,Ol=0,Qp=null,jc=-1,zc=0;function Yt(){return Ce&6?rt():jc!==-1?jc:jc=rt()}function Li(t){return t.mode&1?Ce&2&&Rt!==0?Rt&-Rt:tx.transition!==null?(zc===0&&(zc=Z1()),zc):(t=ke,t!==0||(t=window.event,t=t===void 0?16:oE(t.type)),t):1}function Gn(t,e,n,r){if(50<Ol)throw Ol=0,Qp=null,Error(W(185));vu(t,n,r),(!(Ce&2)||t!==_t)&&(t===_t&&(!(Ce&2)&&(rd|=n),pt===4&&wi(t,Rt)),un(t,r),n===1&&Ce===0&&!(e.mode&1)&&(na=rt()+500,Zh&&es()))}function un(t,e){var n=t.callbackNode;tA(t,e);var r=sh(t,t===_t?Rt:0);if(r===0)n!==null&&n_(n),t.callbackNode=null,t.callbackPriority=0;else if(e=r&-r,t.callbackPriority!==e){if(n!=null&&n_(n),e===1)t.tag===0?ex(K_.bind(null,t)):IE(K_.bind(null,t)),XA(function(){!(Ce&6)&&es()}),n=null;else{switch(eE(r)){case 1:n=Km;break;case 4:n=Y1;break;case 16:n=ih;break;case 536870912:n=J1;break;default:n=ih}n=Tb(n,gb.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function gb(t,e){if(jc=-1,zc=0,Ce&6)throw Error(W(327));var n=t.callbackNode;if(Wo()&&t.callbackNode!==n)return null;var r=sh(t,t===_t?Rt:0);if(r===0)return null;if(r&30||r&t.expiredLanes||e)e=Th(t,r);else{e=r;var i=Ce;Ce|=2;var s=vb();(_t!==t||Rt!==e)&&(Pr=null,na=rt()+500,ks(t,e));do try{Ex();break}catch(a){yb(t,a)}while(!0);ag(),wh.current=s,Ce=i,ut!==null?e=0:(_t=null,Rt=0,e=pt)}if(e!==0){if(e===2&&(i=bp(t),i!==0&&(r=i,e=Xp(t,i))),e===1)throw n=nu,ks(t,0),wi(t,r),un(t,rt()),n;if(e===6)wi(t,r);else{if(i=t.current.alternate,!(r&30)&&!_x(i)&&(e=Th(t,r),e===2&&(s=bp(t),s!==0&&(r=s,e=Xp(t,s))),e===1))throw n=nu,ks(t,0),wi(t,r),un(t,rt()),n;switch(t.finishedWork=i,t.finishedLanes=r,e){case 0:case 1:throw Error(W(345));case 2:_s(t,nn,Pr);break;case 3:if(wi(t,r),(r&130023424)===r&&(e=bg+500-rt(),10<e)){if(sh(t,0)!==0)break;if(i=t.suspendedLanes,(i&r)!==r){Yt(),t.pingedLanes|=t.suspendedLanes&i;break}t.timeoutHandle=Pp(_s.bind(null,t,nn,Pr),e);break}_s(t,nn,Pr);break;case 4:if(wi(t,r),(r&4194240)===r)break;for(e=t.eventTimes,i=-1;0<r;){var o=31-qn(r);s=1<<o,o=e[o],o>i&&(i=o),r&=~s}if(r=i,r=rt()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*vx(r/1960))-r,10<r){t.timeoutHandle=Pp(_s.bind(null,t,nn,Pr),r);break}_s(t,nn,Pr);break;case 5:_s(t,nn,Pr);break;default:throw Error(W(329))}}}return un(t,rt()),t.callbackNode===n?gb.bind(null,t):null}function Xp(t,e){var n=Nl;return t.current.memoizedState.isDehydrated&&(ks(t,e).flags|=256),t=Th(t,e),t!==2&&(e=nn,nn=n,e!==null&&Yp(e)),t}function Yp(t){nn===null?nn=t:nn.push.apply(nn,t)}function _x(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var i=n[r],s=i.getSnapshot;i=i.value;try{if(!Yn(s(),i))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function wi(t,e){for(e&=~Eg,e&=~rd,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-qn(e),r=1<<n;t[n]=-1,e&=~r}}function K_(t){if(Ce&6)throw Error(W(327));Wo();var e=sh(t,0);if(!(e&1))return un(t,rt()),null;var n=Th(t,e);if(t.tag!==0&&n===2){var r=bp(t);r!==0&&(e=r,n=Xp(t,r))}if(n===1)throw n=nu,ks(t,0),wi(t,e),un(t,rt()),n;if(n===6)throw Error(W(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,_s(t,nn,Pr),un(t,rt()),null}function Tg(t,e){var n=Ce;Ce|=1;try{return t(e)}finally{Ce=n,Ce===0&&(na=rt()+500,Zh&&es())}}function Vs(t){Ii!==null&&Ii.tag===0&&!(Ce&6)&&Wo();var e=Ce;Ce|=1;var n=Nn.transition,r=ke;try{if(Nn.transition=null,ke=1,t)return t()}finally{ke=r,Nn.transition=n,Ce=e,!(Ce&6)&&es()}}function Cg(){fn=Mo.current,je(Mo)}function ks(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,QA(n)),ut!==null)for(n=ut.return;n!==null;){var r=n;switch(ig(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&ch();break;case 3:ea(),je(an),je(Bt),fg();break;case 5:dg(r);break;case 4:ea();break;case 13:je(Ge);break;case 19:je(Ge);break;case 10:lg(r.type._context);break;case 22:case 23:Cg()}n=n.return}if(_t=t,ut=t=Di(t.current,null),Rt=fn=e,pt=0,nu=null,Eg=rd=Us=0,nn=Nl=null,bs!==null){for(e=0;e<bs.length;e++)if(n=bs[e],r=n.interleaved,r!==null){n.interleaved=null;var i=r.next,s=n.pending;if(s!==null){var o=s.next;s.next=i,r.next=o}n.pending=r}bs=null}return t}function yb(t,e){do{var n=ut;try{if(ag(),Vc.current=_h,vh){for(var r=Qe.memoizedState;r!==null;){var i=r.queue;i!==null&&(i.pending=null),r=r.next}vh=!1}if(Ms=0,vt=ft=Qe=null,Pl=!1,Zl=0,wg.current=null,n===null||n.return===null){pt=1,nu=e,ut=null;break}e:{var s=t,o=n.return,a=n,l=e;if(e=Rt,a.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){var c=l,h=a,f=h.tag;if(!(h.mode&1)&&(f===0||f===11||f===15)){var p=h.alternate;p?(h.updateQueue=p.updateQueue,h.memoizedState=p.memoizedState,h.lanes=p.lanes):(h.updateQueue=null,h.memoizedState=null)}var _=D_(o);if(_!==null){_.flags&=-257,M_(_,o,a,s,e),_.mode&1&&L_(s,c,e),e=_,l=c;var w=e.updateQueue;if(w===null){var I=new Set;I.add(l),e.updateQueue=I}else w.add(l);break e}else{if(!(e&1)){L_(s,c,e),Ig();break e}l=Error(W(426))}}else if(He&&a.mode&1){var R=D_(o);if(R!==null){!(R.flags&65536)&&(R.flags|=256),M_(R,o,a,s,e),sg(ta(l,a));break e}}s=l=ta(l,a),pt!==4&&(pt=2),Nl===null?Nl=[s]:Nl.push(s),s=o;do{switch(s.tag){case 3:s.flags|=65536,e&=-e,s.lanes|=e;var C=eb(s,l,e);x_(s,C);break e;case 1:a=l;var E=s.type,S=s.stateNode;if(!(s.flags&128)&&(typeof E.getDerivedStateFromError=="function"||S!==null&&typeof S.componentDidCatch=="function"&&(Oi===null||!Oi.has(S)))){s.flags|=65536,e&=-e,s.lanes|=e;var D=tb(s,a,e);x_(s,D);break e}}s=s.return}while(s!==null)}wb(n)}catch(F){e=F,ut===n&&n!==null&&(ut=n=n.return);continue}break}while(!0)}function vb(){var t=wh.current;return wh.current=_h,t===null?_h:t}function Ig(){(pt===0||pt===3||pt===2)&&(pt=4),_t===null||!(Us&268435455)&&!(rd&268435455)||wi(_t,Rt)}function Th(t,e){var n=Ce;Ce|=2;var r=vb();(_t!==t||Rt!==e)&&(Pr=null,ks(t,e));do try{wx();break}catch(i){yb(t,i)}while(!0);if(ag(),Ce=n,wh.current=r,ut!==null)throw Error(W(261));return _t=null,Rt=0,pt}function wx(){for(;ut!==null;)_b(ut)}function Ex(){for(;ut!==null&&!qS();)_b(ut)}function _b(t){var e=bb(t.alternate,t,fn);t.memoizedProps=t.pendingProps,e===null?wb(t):ut=e,wg.current=null}function wb(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=px(n,e),n!==null){n.flags&=32767,ut=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{pt=6,ut=null;return}}else if(n=fx(n,e,fn),n!==null){ut=n;return}if(e=e.sibling,e!==null){ut=e;return}ut=e=t}while(e!==null);pt===0&&(pt=5)}function _s(t,e,n){var r=ke,i=Nn.transition;try{Nn.transition=null,ke=1,bx(t,e,n,r)}finally{Nn.transition=i,ke=r}return null}function bx(t,e,n,r){do Wo();while(Ii!==null);if(Ce&6)throw Error(W(327));n=t.finishedWork;var i=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(W(177));t.callbackNode=null,t.callbackPriority=0;var s=n.lanes|n.childLanes;if(nA(t,s),t===_t&&(ut=_t=null,Rt=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||vc||(vc=!0,Tb(ih,function(){return Wo(),null})),s=(n.flags&15990)!==0,n.subtreeFlags&15990||s){s=Nn.transition,Nn.transition=null;var o=ke;ke=1;var a=Ce;Ce|=4,wg.current=null,gx(t,n),pb(n,t),zA(xp),oh=!!Ap,xp=Ap=null,t.current=n,yx(n),GS(),Ce=a,ke=o,Nn.transition=s}else t.current=n;if(vc&&(vc=!1,Ii=t,bh=i),s=t.pendingLanes,s===0&&(Oi=null),XS(n.stateNode),un(t,rt()),e!==null)for(r=t.onRecoverableError,n=0;n<e.length;n++)i=e[n],r(i.value,{componentStack:i.stack,digest:i.digest});if(Eh)throw Eh=!1,t=Kp,Kp=null,t;return bh&1&&t.tag!==0&&Wo(),s=t.pendingLanes,s&1?t===Qp?Ol++:(Ol=0,Qp=t):Ol=0,es(),null}function Wo(){if(Ii!==null){var t=eE(bh),e=Nn.transition,n=ke;try{if(Nn.transition=null,ke=16>t?16:t,Ii===null)var r=!1;else{if(t=Ii,Ii=null,bh=0,Ce&6)throw Error(W(331));var i=Ce;for(Ce|=4,X=t.current;X!==null;){var s=X,o=s.child;if(X.flags&16){var a=s.deletions;if(a!==null){for(var l=0;l<a.length;l++){var c=a[l];for(X=c;X!==null;){var h=X;switch(h.tag){case 0:case 11:case 15:Rl(8,h,s)}var f=h.child;if(f!==null)f.return=h,X=f;else for(;X!==null;){h=X;var p=h.sibling,_=h.return;if(hb(h),h===c){X=null;break}if(p!==null){p.return=_,X=p;break}X=_}}}var w=s.alternate;if(w!==null){var I=w.child;if(I!==null){w.child=null;do{var R=I.sibling;I.sibling=null,I=R}while(I!==null)}}X=s}}if(s.subtreeFlags&2064&&o!==null)o.return=s,X=o;else e:for(;X!==null;){if(s=X,s.flags&2048)switch(s.tag){case 0:case 11:case 15:Rl(9,s,s.return)}var C=s.sibling;if(C!==null){C.return=s.return,X=C;break e}X=s.return}}var E=t.current;for(X=E;X!==null;){o=X;var S=o.child;if(o.subtreeFlags&2064&&S!==null)S.return=o,X=S;else e:for(o=E;X!==null;){if(a=X,a.flags&2048)try{switch(a.tag){case 0:case 11:case 15:nd(9,a)}}catch(F){Ze(a,a.return,F)}if(a===o){X=null;break e}var D=a.sibling;if(D!==null){D.return=a.return,X=D;break e}X=a.return}}if(Ce=i,es(),lr&&typeof lr.onPostCommitFiberRoot=="function")try{lr.onPostCommitFiberRoot(Kh,t)}catch{}r=!0}return r}finally{ke=n,Nn.transition=e}}return!1}function Q_(t,e,n){e=ta(n,e),e=eb(t,e,1),t=Ni(t,e,1),e=Yt(),t!==null&&(vu(t,1,e),un(t,e))}function Ze(t,e,n){if(t.tag===3)Q_(t,t,n);else for(;e!==null;){if(e.tag===3){Q_(e,t,n);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(Oi===null||!Oi.has(r))){t=ta(n,t),t=tb(e,t,1),e=Ni(e,t,1),t=Yt(),e!==null&&(vu(e,1,t),un(e,t));break}}e=e.return}}function Tx(t,e,n){var r=t.pingCache;r!==null&&r.delete(e),e=Yt(),t.pingedLanes|=t.suspendedLanes&n,_t===t&&(Rt&n)===n&&(pt===4||pt===3&&(Rt&130023424)===Rt&&500>rt()-bg?ks(t,0):Eg|=n),un(t,e)}function Eb(t,e){e===0&&(t.mode&1?(e=lc,lc<<=1,!(lc&130023424)&&(lc=4194304)):e=1);var n=Yt();t=Wr(t,e),t!==null&&(vu(t,e,n),un(t,n))}function Cx(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),Eb(t,n)}function Ix(t,e){var n=0;switch(t.tag){case 13:var r=t.stateNode,i=t.memoizedState;i!==null&&(n=i.retryLane);break;case 19:r=t.stateNode;break;default:throw Error(W(314))}r!==null&&r.delete(e),Eb(t,n)}var bb;bb=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||an.current)on=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return on=!1,dx(t,e,n);on=!!(t.flags&131072)}else on=!1,He&&e.flags&1048576&&SE(e,fh,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;Fc(t,e),t=e.pendingProps;var i=Yo(e,Bt.current);Ho(e,n),i=mg(null,e,r,t,i,n);var s=gg();return e.flags|=1,typeof i=="object"&&i!==null&&typeof i.render=="function"&&i.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,ln(r)?(s=!0,hh(e)):s=!1,e.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,cg(e),i.updater=td,e.stateNode=i,i._reactInternals=e,Up(e,r,t,n),e=Fp(null,e,r,!0,s,n)):(e.tag=0,He&&s&&rg(e),Kt(null,e,i,n),e=e.child),e;case 16:r=e.elementType;e:{switch(Fc(t,e),t=e.pendingProps,i=r._init,r=i(r._payload),e.type=r,i=e.tag=Ax(r),t=jn(r,t),i){case 0:e=$p(null,e,r,t,n);break e;case 1:e=$_(null,e,r,t,n);break e;case 11:e=U_(null,e,r,t,n);break e;case 14:e=V_(null,e,r,jn(r.type,t),n);break e}throw Error(W(306,r,""))}return e;case 0:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:jn(r,i),$p(t,e,r,i,n);case 1:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:jn(r,i),$_(t,e,r,i,n);case 3:e:{if(sb(e),t===null)throw Error(W(387));r=e.pendingProps,s=e.memoizedState,i=s.element,NE(t,e),gh(e,r,null,n);var o=e.memoizedState;if(r=o.element,s.isDehydrated)if(s={element:r,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=s,e.memoizedState=s,e.flags&256){i=ta(Error(W(423)),e),e=F_(t,e,r,n,i);break e}else if(r!==i){i=ta(Error(W(424)),e),e=F_(t,e,r,n,i);break e}else for(pn=Ri(e.stateNode.containerInfo.firstChild),gn=e,He=!0,Hn=null,n=PE(e,null,r,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(Jo(),r===i){e=qr(t,e,n);break e}Kt(t,e,r,n)}e=e.child}return e;case 5:return OE(e),t===null&&Lp(e),r=e.type,i=e.pendingProps,s=t!==null?t.memoizedProps:null,o=i.children,kp(r,i)?o=null:s!==null&&kp(r,s)&&(e.flags|=32),ib(t,e),Kt(t,e,o,n),e.child;case 6:return t===null&&Lp(e),null;case 13:return ob(t,e,n);case 4:return hg(e,e.stateNode.containerInfo),r=e.pendingProps,t===null?e.child=Zo(e,null,r,n):Kt(t,e,r,n),e.child;case 11:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:jn(r,i),U_(t,e,r,i,n);case 7:return Kt(t,e,e.pendingProps,n),e.child;case 8:return Kt(t,e,e.pendingProps.children,n),e.child;case 12:return Kt(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(r=e.type._context,i=e.pendingProps,s=e.memoizedProps,o=i.value,Le(ph,r._currentValue),r._currentValue=o,s!==null)if(Yn(s.value,o)){if(s.children===i.children&&!an.current){e=qr(t,e,n);break e}}else for(s=e.child,s!==null&&(s.return=e);s!==null;){var a=s.dependencies;if(a!==null){o=s.child;for(var l=a.firstContext;l!==null;){if(l.context===r){if(s.tag===1){l=Fr(-1,n&-n),l.tag=2;var c=s.updateQueue;if(c!==null){c=c.shared;var h=c.pending;h===null?l.next=l:(l.next=h.next,h.next=l),c.pending=l}}s.lanes|=n,l=s.alternate,l!==null&&(l.lanes|=n),Dp(s.return,n,e),a.lanes|=n;break}l=l.next}}else if(s.tag===10)o=s.type===e.type?null:s.child;else if(s.tag===18){if(o=s.return,o===null)throw Error(W(341));o.lanes|=n,a=o.alternate,a!==null&&(a.lanes|=n),Dp(o,n,e),o=s.sibling}else o=s.child;if(o!==null)o.return=s;else for(o=s;o!==null;){if(o===e){o=null;break}if(s=o.sibling,s!==null){s.return=o.return,o=s;break}o=o.return}s=o}Kt(t,e,i.children,n),e=e.child}return e;case 9:return i=e.type,r=e.pendingProps.children,Ho(e,n),i=On(i),r=r(i),e.flags|=1,Kt(t,e,r,n),e.child;case 14:return r=e.type,i=jn(r,e.pendingProps),i=jn(r.type,i),V_(t,e,r,i,n);case 15:return nb(t,e,e.type,e.pendingProps,n);case 17:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:jn(r,i),Fc(t,e),e.tag=1,ln(r)?(t=!0,hh(e)):t=!1,Ho(e,n),ZE(e,r,i),Up(e,r,i,n),Fp(null,e,r,!0,t,n);case 19:return ab(t,e,n);case 22:return rb(t,e,n)}throw Error(W(156,e.tag))};function Tb(t,e){return X1(t,e)}function Sx(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Rn(t,e,n,r){return new Sx(t,e,n,r)}function Sg(t){return t=t.prototype,!(!t||!t.isReactComponent)}function Ax(t){if(typeof t=="function")return Sg(t)?1:0;if(t!=null){if(t=t.$$typeof,t===Wm)return 11;if(t===qm)return 14}return 2}function Di(t,e){var n=t.alternate;return n===null?(n=Rn(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function Bc(t,e,n,r,i,s){var o=2;if(r=t,typeof t=="function")Sg(t)&&(o=1);else if(typeof t=="string")o=5;else e:switch(t){case So:return Ps(n.children,i,s,e);case Hm:o=8,i|=8;break;case ap:return t=Rn(12,n,e,i|2),t.elementType=ap,t.lanes=s,t;case lp:return t=Rn(13,n,e,i),t.elementType=lp,t.lanes=s,t;case up:return t=Rn(19,n,e,i),t.elementType=up,t.lanes=s,t;case O1:return id(n,i,s,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case R1:o=10;break e;case N1:o=9;break e;case Wm:o=11;break e;case qm:o=14;break e;case yi:o=16,r=null;break e}throw Error(W(130,t==null?t:typeof t,""))}return e=Rn(o,n,e,i),e.elementType=t,e.type=r,e.lanes=s,e}function Ps(t,e,n,r){return t=Rn(7,t,r,e),t.lanes=n,t}function id(t,e,n,r){return t=Rn(22,t,r,e),t.elementType=O1,t.lanes=n,t.stateNode={isHidden:!1},t}function Mf(t,e,n){return t=Rn(6,t,null,e),t.lanes=n,t}function Uf(t,e,n){return e=Rn(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function xx(t,e,n,r,i){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=yf(0),this.expirationTimes=yf(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=yf(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function Ag(t,e,n,r,i,s,o,a,l){return t=new xx(t,e,n,a,l),e===1?(e=1,s===!0&&(e|=8)):e=0,s=Rn(3,null,null,e),t.current=s,s.stateNode=t,s.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},cg(s),t}function kx(t,e,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Io,key:r==null?null:""+r,children:t,containerInfo:e,implementation:n}}function Cb(t){if(!t)return qi;t=t._reactInternals;e:{if(Xs(t)!==t||t.tag!==1)throw Error(W(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(ln(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(W(171))}if(t.tag===1){var n=t.type;if(ln(n))return CE(t,n,e)}return e}function Ib(t,e,n,r,i,s,o,a,l){return t=Ag(n,r,!0,t,i,s,o,a,l),t.context=Cb(null),n=t.current,r=Yt(),i=Li(n),s=Fr(r,i),s.callback=e??null,Ni(n,s,i),t.current.lanes=i,vu(t,i,r),un(t,r),t}function sd(t,e,n,r){var i=e.current,s=Yt(),o=Li(i);return n=Cb(n),e.context===null?e.context=n:e.pendingContext=n,e=Fr(s,o),e.payload={element:t},r=r===void 0?null:r,r!==null&&(e.callback=r),t=Ni(i,e,o),t!==null&&(Gn(t,i,o,s),Uc(t,i,o)),o}function Ch(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function X_(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function xg(t,e){X_(t,e),(t=t.alternate)&&X_(t,e)}function Px(){return null}var Sb=typeof reportError=="function"?reportError:function(t){console.error(t)};function kg(t){this._internalRoot=t}od.prototype.render=kg.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(W(409));sd(t,e,null,null)};od.prototype.unmount=kg.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;Vs(function(){sd(null,t,null,null)}),e[Hr]=null}};function od(t){this._internalRoot=t}od.prototype.unstable_scheduleHydration=function(t){if(t){var e=rE();t={blockedOn:null,target:t,priority:e};for(var n=0;n<_i.length&&e!==0&&e<_i[n].priority;n++);_i.splice(n,0,t),n===0&&sE(t)}};function Pg(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function ad(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function Y_(){}function Rx(t,e,n,r,i){if(i){if(typeof r=="function"){var s=r;r=function(){var c=Ch(o);s.call(c)}}var o=Ib(e,r,t,0,null,!1,!1,"",Y_);return t._reactRootContainer=o,t[Hr]=o.current,Kl(t.nodeType===8?t.parentNode:t),Vs(),o}for(;i=t.lastChild;)t.removeChild(i);if(typeof r=="function"){var a=r;r=function(){var c=Ch(l);a.call(c)}}var l=Ag(t,0,!1,null,null,!1,!1,"",Y_);return t._reactRootContainer=l,t[Hr]=l.current,Kl(t.nodeType===8?t.parentNode:t),Vs(function(){sd(e,l,n,r)}),l}function ld(t,e,n,r,i){var s=n._reactRootContainer;if(s){var o=s;if(typeof i=="function"){var a=i;i=function(){var l=Ch(o);a.call(l)}}sd(e,o,t,i)}else o=Rx(n,e,t,i,r);return Ch(o)}tE=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=ml(e.pendingLanes);n!==0&&(Qm(e,n|1),un(e,rt()),!(Ce&6)&&(na=rt()+500,es()))}break;case 13:Vs(function(){var r=Wr(t,1);if(r!==null){var i=Yt();Gn(r,t,1,i)}}),xg(t,1)}};Xm=function(t){if(t.tag===13){var e=Wr(t,134217728);if(e!==null){var n=Yt();Gn(e,t,134217728,n)}xg(t,134217728)}};nE=function(t){if(t.tag===13){var e=Li(t),n=Wr(t,e);if(n!==null){var r=Yt();Gn(n,t,e,r)}xg(t,e)}};rE=function(){return ke};iE=function(t,e){var n=ke;try{return ke=t,e()}finally{ke=n}};_p=function(t,e,n){switch(e){case"input":if(dp(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var i=Jh(r);if(!i)throw Error(W(90));D1(r),dp(r,i)}}}break;case"textarea":U1(t,n);break;case"select":e=n.value,e!=null&&Fo(t,!!n.multiple,e,!1)}};H1=Tg;W1=Vs;var Nx={usingClientEntryPoint:!1,Events:[wu,Po,Jh,z1,B1,Tg]},nl={findFiberByHostInstance:Es,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},Ox={bundleType:nl.bundleType,version:nl.version,rendererPackageName:nl.rendererPackageName,rendererConfig:nl.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Jr.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=K1(t),t===null?null:t.stateNode},findFiberByHostInstance:nl.findFiberByHostInstance||Px,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var _c=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!_c.isDisabled&&_c.supportsFiber)try{Kh=_c.inject(Ox),lr=_c}catch{}}wn.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Nx;wn.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Pg(e))throw Error(W(200));return kx(t,e,null,n)};wn.createRoot=function(t,e){if(!Pg(t))throw Error(W(299));var n=!1,r="",i=Sb;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(i=e.onRecoverableError)),e=Ag(t,1,!1,null,null,n,!1,r,i),t[Hr]=e.current,Kl(t.nodeType===8?t.parentNode:t),new kg(e)};wn.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(W(188)):(t=Object.keys(t).join(","),Error(W(268,t)));return t=K1(e),t=t===null?null:t.stateNode,t};wn.flushSync=function(t){return Vs(t)};wn.hydrate=function(t,e,n){if(!ad(e))throw Error(W(200));return ld(null,t,e,!0,n)};wn.hydrateRoot=function(t,e,n){if(!Pg(t))throw Error(W(405));var r=n!=null&&n.hydratedSources||null,i=!1,s="",o=Sb;if(n!=null&&(n.unstable_strictMode===!0&&(i=!0),n.identifierPrefix!==void 0&&(s=n.identifierPrefix),n.onRecoverableError!==void 0&&(o=n.onRecoverableError)),e=Ib(e,null,t,1,n??null,i,!1,s,o),t[Hr]=e.current,Kl(t),r)for(t=0;t<r.length;t++)n=r[t],i=n._getVersion,i=i(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,i]:e.mutableSourceEagerHydrationData.push(n,i);return new od(e)};wn.render=function(t,e,n){if(!ad(e))throw Error(W(200));return ld(null,t,e,!1,n)};wn.unmountComponentAtNode=function(t){if(!ad(t))throw Error(W(40));return t._reactRootContainer?(Vs(function(){ld(null,null,t,!1,function(){t._reactRootContainer=null,t[Hr]=null})}),!0):!1};wn.unstable_batchedUpdates=Tg;wn.unstable_renderSubtreeIntoContainer=function(t,e,n,r){if(!ad(n))throw Error(W(200));if(t==null||t._reactInternals===void 0)throw Error(W(38));return ld(t,e,n,!1,r)};wn.version="18.3.1-next-f1338f8080-20240426";function Ab(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(Ab)}catch(t){console.error(t)}}Ab(),A1.exports=wn;var Rg=A1.exports;const Lx=m1(Rg),Dx=p1({__proto__:null,default:Lx},[Rg]);var J_=Rg;sp.createRoot=J_.createRoot,sp.hydrateRoot=J_.hydrateRoot;/**
 * @remix-run/router v1.16.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function qe(){return qe=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},qe.apply(this,arguments)}var at;(function(t){t.Pop="POP",t.Push="PUSH",t.Replace="REPLACE"})(at||(at={}));const Z_="popstate";function Mx(t){t===void 0&&(t={});function e(r,i){let{pathname:s,search:o,hash:a}=r.location;return ru("",{pathname:s,search:o,hash:a},i.state&&i.state.usr||null,i.state&&i.state.key||"default")}function n(r,i){return typeof i=="string"?i:$s(i)}return Vx(e,n,null,t)}function me(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function ra(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function Ux(){return Math.random().toString(36).substr(2,8)}function e0(t,e){return{usr:t.state,key:t.key,idx:e}}function ru(t,e,n,r){return n===void 0&&(n=null),qe({pathname:typeof t=="string"?t:t.pathname,search:"",hash:""},typeof e=="string"?ts(e):e,{state:n,key:e&&e.key||r||Ux()})}function $s(t){let{pathname:e="/",search:n="",hash:r=""}=t;return n&&n!=="?"&&(e+=n.charAt(0)==="?"?n:"?"+n),r&&r!=="#"&&(e+=r.charAt(0)==="#"?r:"#"+r),e}function ts(t){let e={};if(t){let n=t.indexOf("#");n>=0&&(e.hash=t.substr(n),t=t.substr(0,n));let r=t.indexOf("?");r>=0&&(e.search=t.substr(r),t=t.substr(0,r)),t&&(e.pathname=t)}return e}function Vx(t,e,n,r){r===void 0&&(r={});let{window:i=document.defaultView,v5Compat:s=!1}=r,o=i.history,a=at.Pop,l=null,c=h();c==null&&(c=0,o.replaceState(qe({},o.state,{idx:c}),""));function h(){return(o.state||{idx:null}).idx}function f(){a=at.Pop;let R=h(),C=R==null?null:R-c;c=R,l&&l({action:a,location:I.location,delta:C})}function p(R,C){a=at.Push;let E=ru(I.location,R,C);c=h()+1;let S=e0(E,c),D=I.createHref(E);try{o.pushState(S,"",D)}catch(F){if(F instanceof DOMException&&F.name==="DataCloneError")throw F;i.location.assign(D)}s&&l&&l({action:a,location:I.location,delta:1})}function _(R,C){a=at.Replace;let E=ru(I.location,R,C);c=h();let S=e0(E,c),D=I.createHref(E);o.replaceState(S,"",D),s&&l&&l({action:a,location:I.location,delta:0})}function w(R){let C=i.location.origin!=="null"?i.location.origin:i.location.href,E=typeof R=="string"?R:$s(R);return E=E.replace(/ $/,"%20"),me(C,"No window.location.(origin|href) available to create URL for href: "+E),new URL(E,C)}let I={get action(){return a},get location(){return t(i,o)},listen(R){if(l)throw new Error("A history only accepts one active listener");return i.addEventListener(Z_,f),l=R,()=>{i.removeEventListener(Z_,f),l=null}},createHref(R){return e(i,R)},createURL:w,encodeLocation(R){let C=w(R);return{pathname:C.pathname,search:C.search,hash:C.hash}},push:p,replace:_,go(R){return o.go(R)}};return I}var Be;(function(t){t.data="data",t.deferred="deferred",t.redirect="redirect",t.error="error"})(Be||(Be={}));const $x=new Set(["lazy","caseSensitive","path","id","index","children"]);function Fx(t){return t.index===!0}function Jp(t,e,n,r){return n===void 0&&(n=[]),r===void 0&&(r={}),t.map((i,s)=>{let o=[...n,s],a=typeof i.id=="string"?i.id:o.join("-");if(me(i.index!==!0||!i.children,"Cannot specify children on an index route"),me(!r[a],'Found a route id collision on id "'+a+`".  Route id's must be globally unique within Data Router usages`),Fx(i)){let l=qe({},i,e(i),{id:a});return r[a]=l,l}else{let l=qe({},i,e(i),{id:a,children:void 0});return r[a]=l,i.children&&(l.children=Jp(i.children,e,o,r)),l}})}function Uo(t,e,n){n===void 0&&(n="/");let r=typeof e=="string"?ts(e):e,i=ba(r.pathname||"/",n);if(i==null)return null;let s=xb(t);zx(s);let o=null;for(let a=0;o==null&&a<s.length;++a){let l=ek(i);o=Yx(s[a],l)}return o}function jx(t,e){let{route:n,pathname:r,params:i}=t;return{id:n.id,pathname:r,params:i,data:e[n.id],handle:n.handle}}function xb(t,e,n,r){e===void 0&&(e=[]),n===void 0&&(n=[]),r===void 0&&(r="");let i=(s,o,a)=>{let l={relativePath:a===void 0?s.path||"":a,caseSensitive:s.caseSensitive===!0,childrenIndex:o,route:s};l.relativePath.startsWith("/")&&(me(l.relativePath.startsWith(r),'Absolute route path "'+l.relativePath+'" nested under path '+('"'+r+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),l.relativePath=l.relativePath.slice(r.length));let c=jr([r,l.relativePath]),h=n.concat(l);s.children&&s.children.length>0&&(me(s.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+c+'".')),xb(s.children,e,h,c)),!(s.path==null&&!s.index)&&e.push({path:c,score:Qx(c,s.index),routesMeta:h})};return t.forEach((s,o)=>{var a;if(s.path===""||!((a=s.path)!=null&&a.includes("?")))i(s,o);else for(let l of kb(s.path))i(s,o,l)}),e}function kb(t){let e=t.split("/");if(e.length===0)return[];let[n,...r]=e,i=n.endsWith("?"),s=n.replace(/\?$/,"");if(r.length===0)return i?[s,""]:[s];let o=kb(r.join("/")),a=[];return a.push(...o.map(l=>l===""?s:[s,l].join("/"))),i&&a.push(...o),a.map(l=>t.startsWith("/")&&l===""?"/":l)}function zx(t){t.sort((e,n)=>e.score!==n.score?n.score-e.score:Xx(e.routesMeta.map(r=>r.childrenIndex),n.routesMeta.map(r=>r.childrenIndex)))}const Bx=/^:[\w-]+$/,Hx=3,Wx=2,qx=1,Gx=10,Kx=-2,t0=t=>t==="*";function Qx(t,e){let n=t.split("/"),r=n.length;return n.some(t0)&&(r+=Kx),e&&(r+=Wx),n.filter(i=>!t0(i)).reduce((i,s)=>i+(Bx.test(s)?Hx:s===""?qx:Gx),r)}function Xx(t,e){return t.length===e.length&&t.slice(0,-1).every((r,i)=>r===e[i])?t[t.length-1]-e[e.length-1]:0}function Yx(t,e){let{routesMeta:n}=t,r={},i="/",s=[];for(let o=0;o<n.length;++o){let a=n[o],l=o===n.length-1,c=i==="/"?e:e.slice(i.length)||"/",h=Jx({path:a.relativePath,caseSensitive:a.caseSensitive,end:l},c);if(!h)return null;Object.assign(r,h.params);let f=a.route;s.push({params:r,pathname:jr([i,h.pathname]),pathnameBase:rk(jr([i,h.pathnameBase])),route:f}),h.pathnameBase!=="/"&&(i=jr([i,h.pathnameBase]))}return s}function Jx(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[n,r]=Zx(t.path,t.caseSensitive,t.end),i=e.match(n);if(!i)return null;let s=i[0],o=s.replace(/(.)\/+$/,"$1"),a=i.slice(1);return{params:r.reduce((c,h,f)=>{let{paramName:p,isOptional:_}=h;if(p==="*"){let I=a[f]||"";o=s.slice(0,s.length-I.length).replace(/(.)\/+$/,"$1")}const w=a[f];return _&&!w?c[p]=void 0:c[p]=(w||"").replace(/%2F/g,"/"),c},{}),pathname:s,pathnameBase:o,pattern:t}}function Zx(t,e,n){e===void 0&&(e=!1),n===void 0&&(n=!0),ra(t==="*"||!t.endsWith("*")||t.endsWith("/*"),'Route path "'+t+'" will be treated as if it were '+('"'+t.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+t.replace(/\*$/,"/*")+'".'));let r=[],i="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(o,a,l)=>(r.push({paramName:a,isOptional:l!=null}),l?"/?([^\\/]+)?":"/([^\\/]+)"));return t.endsWith("*")?(r.push({paramName:"*"}),i+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?i+="\\/*$":t!==""&&t!=="/"&&(i+="(?:(?=\\/|$))"),[new RegExp(i,e?void 0:"i"),r]}function ek(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return ra(!1,'The URL path "'+t+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),t}}function ba(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,r=t.charAt(n);return r&&r!=="/"?null:t.slice(n)||"/"}function tk(t,e){e===void 0&&(e="/");let{pathname:n,search:r="",hash:i=""}=typeof t=="string"?ts(t):t;return{pathname:n?n.startsWith("/")?n:nk(n,e):e,search:ik(r),hash:sk(i)}}function nk(t,e){let n=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(i=>{i===".."?n.length>1&&n.pop():i!=="."&&n.push(i)}),n.length>1?n.join("/"):"/"}function Vf(t,e,n,r){return"Cannot include a '"+t+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(r)+"].  Please separate it out to the ")+("`to."+n+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function Pb(t){return t.filter((e,n)=>n===0||e.route.path&&e.route.path.length>0)}function ud(t,e){let n=Pb(t);return e?n.map((r,i)=>i===t.length-1?r.pathname:r.pathnameBase):n.map(r=>r.pathnameBase)}function cd(t,e,n,r){r===void 0&&(r=!1);let i;typeof t=="string"?i=ts(t):(i=qe({},t),me(!i.pathname||!i.pathname.includes("?"),Vf("?","pathname","search",i)),me(!i.pathname||!i.pathname.includes("#"),Vf("#","pathname","hash",i)),me(!i.search||!i.search.includes("#"),Vf("#","search","hash",i)));let s=t===""||i.pathname==="",o=s?"/":i.pathname,a;if(o==null)a=n;else{let f=e.length-1;if(!r&&o.startsWith("..")){let p=o.split("/");for(;p[0]==="..";)p.shift(),f-=1;i.pathname=p.join("/")}a=f>=0?e[f]:"/"}let l=tk(i,a),c=o&&o!=="/"&&o.endsWith("/"),h=(s||o===".")&&n.endsWith("/");return!l.pathname.endsWith("/")&&(c||h)&&(l.pathname+="/"),l}const jr=t=>t.join("/").replace(/\/\/+/g,"/"),rk=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),ik=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,sk=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;class Ng{constructor(e,n,r,i){i===void 0&&(i=!1),this.status=e,this.statusText=n||"",this.internal=i,r instanceof Error?(this.data=r.toString(),this.error=r):this.data=r}}function Og(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}const Rb=["post","put","patch","delete"],ok=new Set(Rb),ak=["get",...Rb],lk=new Set(ak),uk=new Set([301,302,303,307,308]),ck=new Set([307,308]),$f={state:"idle",location:void 0,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0},hk={state:"idle",data:void 0,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0},rl={state:"unblocked",proceed:void 0,reset:void 0,location:void 0},Lg=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,dk=t=>({hasErrorBoundary:!!t.hasErrorBoundary}),Nb="remix-router-transitions";function fk(t){const e=t.window?t.window:typeof window<"u"?window:void 0,n=typeof e<"u"&&typeof e.document<"u"&&typeof e.document.createElement<"u",r=!n;me(t.routes.length>0,"You must provide a non-empty routes array to createRouter");let i;if(t.mapRouteProperties)i=t.mapRouteProperties;else if(t.detectErrorBoundary){let N=t.detectErrorBoundary;i=M=>({hasErrorBoundary:N(M)})}else i=dk;let s={},o=Jp(t.routes,i,void 0,s),a,l=t.basename||"/",c=t.unstable_dataStrategy||yk,h=qe({v7_fetcherPersist:!1,v7_normalizeFormMethod:!1,v7_partialHydration:!1,v7_prependBasename:!1,v7_relativeSplatPath:!1,unstable_skipActionErrorRevalidation:!1},t.future),f=null,p=new Set,_=null,w=null,I=null,R=t.hydrationData!=null,C=Uo(o,t.history.location,l),E=null;if(C==null){let N=In(404,{pathname:t.history.location.pathname}),{matches:M,route:$}=h0(o);C=M,E={[$.id]:N}}let S,D=C.some(N=>N.route.lazy),F=C.some(N=>N.route.loader);if(D)S=!1;else if(!F)S=!0;else if(h.v7_partialHydration){let N=t.hydrationData?t.hydrationData.loaderData:null,M=t.hydrationData?t.hydrationData.errors:null,$=q=>q.route.loader?typeof q.route.loader=="function"&&q.route.loader.hydrate===!0?!1:N&&N[q.route.id]!==void 0||M&&M[q.route.id]!==void 0:!0;if(M){let q=C.findIndex(Q=>M[Q.route.id]!==void 0);S=C.slice(0,q+1).every($)}else S=C.every($)}else S=t.hydrationData!=null;let z,g={historyAction:t.history.action,location:t.history.location,matches:C,initialized:S,navigation:$f,restoreScrollPosition:t.hydrationData!=null?!1:null,preventScrollReset:!1,revalidation:"idle",loaderData:t.hydrationData&&t.hydrationData.loaderData||{},actionData:t.hydrationData&&t.hydrationData.actionData||null,errors:t.hydrationData&&t.hydrationData.errors||E,fetchers:new Map,blockers:new Map},y=at.Pop,T=!1,A,k=!1,P=new Map,x=null,Ie=!1,it=!1,Wt=[],wt=[],H=new Map,ee=0,re=-1,_e=new Map,he=new Set,Pe=new Map,qt=new Map,ht=new Set,Et=new Map,bt=new Map,La=!1;function ef(){if(f=t.history.listen(N=>{let{action:M,location:$,delta:q}=N;if(La){La=!1;return}ra(bt.size===0||q!=null,"You are trying to use a blocker on a POP navigation to a location that was not created by @remix-run/router. This will fail silently in production. This can happen if you are navigating outside the router via `window.history.pushState`/`window.location.hash` instead of using router navigation APIs.  This can also happen if you are using createHashRouter and the user manually changes the URL.");let Q=uo({currentLocation:g.location,nextLocation:$,historyAction:M});if(Q&&q!=null){La=!0,t.history.go(q*-1),lo(Q,{state:"blocked",location:$,proceed(){lo(Q,{state:"proceeding",proceed:void 0,reset:void 0,location:$}),t.history.go(q)},reset(){let Z=new Map(g.blockers);Z.set(Q,rl),Tt({blockers:Z})}});return}return Zn(M,$)}),n){kk(e,P);let N=()=>Pk(e,P);e.addEventListener("pagehide",N),x=()=>e.removeEventListener("pagehide",N)}return g.initialized||Zn(at.Pop,g.location,{initialHydration:!0}),z}function ro(){f&&f(),x&&x(),p.clear(),A&&A.abort(),g.fetchers.forEach((N,M)=>hs(M)),g.blockers.forEach((N,M)=>Wu(M))}function io(N){return p.add(N),()=>p.delete(N)}function Tt(N,M){M===void 0&&(M={}),g=qe({},g,N);let $=[],q=[];h.v7_fetcherPersist&&g.fetchers.forEach((Q,Z)=>{Q.state==="idle"&&(ht.has(Z)?q.push(Z):$.push(Z))}),[...p].forEach(Q=>Q(g,{deletedFetchers:q,unstable_viewTransitionOpts:M.viewTransitionOpts,unstable_flushSync:M.flushSync===!0})),h.v7_fetcherPersist&&($.forEach(Q=>g.fetchers.delete(Q)),q.forEach(Q=>hs(Q)))}function _r(N,M,$){var q,Q;let{flushSync:Z}=$===void 0?{}:$,te=g.actionData!=null&&g.navigation.formMethod!=null&&Bn(g.navigation.formMethod)&&g.navigation.state==="loading"&&((q=N.state)==null?void 0:q._isRedirect)!==!0,K;M.actionData?Object.keys(M.actionData).length>0?K=M.actionData:K=null:te?K=g.actionData:K=null;let oe=M.loaderData?u0(g.loaderData,M.loaderData,M.matches||[],M.errors):g.loaderData,ae=g.blockers;ae.size>0&&(ae=new Map(ae),ae.forEach((ie,Oe)=>ae.set(Oe,rl)));let dt=T===!0||g.navigation.formMethod!=null&&Bn(g.navigation.formMethod)&&((Q=N.state)==null?void 0:Q._isRedirect)!==!0;a&&(o=a,a=void 0),Ie||y===at.Pop||(y===at.Push?t.history.push(N,N.state):y===at.Replace&&t.history.replace(N,N.state));let ze;if(y===at.Pop){let ie=P.get(g.location.pathname);ie&&ie.has(N.pathname)?ze={currentLocation:g.location,nextLocation:N}:P.has(N.pathname)&&(ze={currentLocation:N,nextLocation:g.location})}else if(k){let ie=P.get(g.location.pathname);ie?ie.add(N.pathname):(ie=new Set([N.pathname]),P.set(g.location.pathname,ie)),ze={currentLocation:g.location,nextLocation:N}}Tt(qe({},M,{actionData:K,loaderData:oe,historyAction:y,location:N,initialized:!0,navigation:$f,revalidation:"idle",restoreScrollPosition:ho(N,M.matches||g.matches),preventScrollReset:dt,blockers:ae}),{viewTransitionOpts:ze,flushSync:Z===!0}),y=at.Pop,T=!1,k=!1,Ie=!1,it=!1,Wt=[],wt=[]}async function so(N,M){if(typeof N=="number"){t.history.go(N);return}let $=Zp(g.location,g.matches,l,h.v7_prependBasename,N,h.v7_relativeSplatPath,M==null?void 0:M.fromRouteId,M==null?void 0:M.relative),{path:q,submission:Q,error:Z}=n0(h.v7_normalizeFormMethod,!1,$,M),te=g.location,K=ru(g.location,q,M&&M.state);K=qe({},K,t.history.encodeLocation(K));let oe=M&&M.replace!=null?M.replace:void 0,ae=at.Push;oe===!0?ae=at.Replace:oe===!1||Q!=null&&Bn(Q.formMethod)&&Q.formAction===g.location.pathname+g.location.search&&(ae=at.Replace);let dt=M&&"preventScrollReset"in M?M.preventScrollReset===!0:void 0,ze=(M&&M.unstable_flushSync)===!0,ie=uo({currentLocation:te,nextLocation:K,historyAction:ae});if(ie){lo(ie,{state:"blocked",location:K,proceed(){lo(ie,{state:"proceeding",proceed:void 0,reset:void 0,location:K}),so(N,M)},reset(){let Oe=new Map(g.blockers);Oe.set(ie,rl),Tt({blockers:Oe})}});return}return await Zn(ae,K,{submission:Q,pendingError:Z,preventScrollReset:dt,replace:M&&M.replace,enableViewTransition:M&&M.unstable_viewTransition,flushSync:ze})}function Da(){if(ao(),Tt({revalidation:"loading"}),g.navigation.state!=="submitting"){if(g.navigation.state==="idle"){Zn(g.historyAction,g.location,{startUninterruptedRevalidation:!0});return}Zn(y||g.historyAction,g.navigation.location,{overrideNavigation:g.navigation})}}async function Zn(N,M,$){A&&A.abort(),A=null,y=N,Ie=($&&$.startUninterruptedRevalidation)===!0,Fa(g.location,g.matches),T=($&&$.preventScrollReset)===!0,k=($&&$.enableViewTransition)===!0;let q=a||o,Q=$&&$.overrideNavigation,Z=Uo(q,M,l),te=($&&$.flushSync)===!0;if(!Z){let ie=In(404,{pathname:M.pathname}),{matches:Oe,route:We}=h0(q);co(),_r(M,{matches:Oe,loaderData:{},errors:{[We.id]:ie}},{flushSync:te});return}if(g.initialized&&!it&&Tk(g.location,M)&&!($&&$.submission&&Bn($.submission.formMethod))){_r(M,{matches:Z},{flushSync:te});return}A=new AbortController;let K=yo(t.history,M,A.signal,$&&$.submission),oe;if($&&$.pendingError)oe=[Ll(Z).route.id,{type:Be.error,error:$.pendingError}];else if($&&$.submission&&Bn($.submission.formMethod)){let ie=await tf(K,M,$.submission,Z,{replace:$.replace,flushSync:te});if(ie.shortCircuited)return;oe=ie.pendingActionResult,Q=Ff(M,$.submission),te=!1,K=yo(t.history,K.url,K.signal)}let{shortCircuited:ae,loaderData:dt,errors:ze}=await nf(K,M,Z,Q,$&&$.submission,$&&$.fetcherSubmission,$&&$.replace,$&&$.initialHydration===!0,te,oe);ae||(A=null,_r(M,qe({matches:Z},c0(oe),{loaderData:dt,errors:ze})))}async function tf(N,M,$,q,Q){Q===void 0&&(Q={}),ao();let Z=Ak(M,$);Tt({navigation:Z},{flushSync:Q.flushSync===!0});let te,K=tm(q,M);if(!K.route.action&&!K.route.lazy)te={type:Be.error,error:In(405,{method:N.method,pathname:M.pathname,routeId:K.route.id})};else if(te=(await wr("action",N,[K],q))[0],N.signal.aborted)return{shortCircuited:!0};if(Is(te)){let oe;return Q&&Q.replace!=null?oe=Q.replace:oe=o0(te.response.headers.get("Location"),new URL(N.url),l)===g.location.pathname+g.location.search,await us(N,te,{submission:$,replace:oe}),{shortCircuited:!0}}if(Cs(te))throw In(400,{type:"defer-action"});if(xn(te)){let oe=Ll(q,K.route.id);return(Q&&Q.replace)!==!0&&(y=at.Push),{pendingActionResult:[oe.route.id,te]}}return{pendingActionResult:[K.route.id,te]}}async function nf(N,M,$,q,Q,Z,te,K,oe,ae){let dt=q||Ff(M,Q),ze=Q||Z||p0(dt),ie=a||o,[Oe,We]=r0(t.history,g,$,ze,M,h.v7_partialHydration&&K===!0,h.unstable_skipActionErrorRevalidation,it,Wt,wt,ht,Pe,he,ie,l,ae);if(co(ye=>!($&&$.some(Ct=>Ct.route.id===ye))||Oe&&Oe.some(Ct=>Ct.route.id===ye)),re=++ee,Oe.length===0&&We.length===0){let ye=Ua();return _r(M,qe({matches:$,loaderData:{},errors:ae&&xn(ae[1])?{[ae[0]]:ae[1].error}:null},c0(ae),ye?{fetchers:new Map(g.fetchers)}:{}),{flushSync:oe}),{shortCircuited:!0}}if(!Ie&&(!h.v7_partialHydration||!K)){We.forEach(Ct=>{let It=g.fetchers.get(Ct.key),st=il(void 0,It?It.data:void 0);g.fetchers.set(Ct.key,st)});let ye;ae&&!xn(ae[1])?ye={[ae[0]]:ae[1].data}:g.actionData&&(Object.keys(g.actionData).length===0?ye=null:ye=g.actionData),Tt(qe({navigation:dt},ye!==void 0?{actionData:ye}:{},We.length>0?{fetchers:new Map(g.fetchers)}:{}),{flushSync:oe})}We.forEach(ye=>{H.has(ye.key)&&er(ye.key),ye.controller&&H.set(ye.key,ye.controller)});let si=()=>We.forEach(ye=>er(ye.key));A&&A.signal.addEventListener("abort",si);let{loaderResults:bn,fetcherResults:Un}=await oo(g.matches,$,Oe,We,N);if(N.signal.aborted)return{shortCircuited:!0};A&&A.signal.removeEventListener("abort",si),We.forEach(ye=>H.delete(ye.key));let Gt=d0([...bn,...Un]);if(Gt){if(Gt.idx>=Oe.length){let ye=We[Gt.idx-Oe.length].key;he.add(ye)}return await us(N,Gt.result,{replace:te}),{shortCircuited:!0}}let{loaderData:br,errors:hn}=l0(g,$,Oe,bn,ae,We,Un,Et);Et.forEach((ye,Ct)=>{ye.subscribe(It=>{(It||ye.done)&&Et.delete(Ct)})}),h.v7_partialHydration&&K&&g.errors&&Object.entries(g.errors).filter(ye=>{let[Ct]=ye;return!Oe.some(It=>It.route.id===Ct)}).forEach(ye=>{let[Ct,It]=ye;hn=Object.assign(hn||{},{[Ct]:It})});let oi=Ua(),ai=Va(re),ds=oi||ai||We.length>0;return qe({loaderData:br,errors:hn},ds?{fetchers:new Map(g.fetchers)}:{})}function zu(N,M,$,q){if(r)throw new Error("router.fetch() was called during the server render, but it shouldn't be. You are likely calling a useFetcher() method in the body of your component. Try moving it to a useEffect or a callback.");H.has(N)&&er(N);let Q=(q&&q.unstable_flushSync)===!0,Z=a||o,te=Zp(g.location,g.matches,l,h.v7_prependBasename,$,h.v7_relativeSplatPath,M,q==null?void 0:q.relative),K=Uo(Z,te,l);if(!K){et(N,M,In(404,{pathname:te}),{flushSync:Q});return}let{path:oe,submission:ae,error:dt}=n0(h.v7_normalizeFormMethod,!0,te,q);if(dt){et(N,M,dt,{flushSync:Q});return}let ze=tm(K,oe);if(T=(q&&q.preventScrollReset)===!0,ae&&Bn(ae.formMethod)){Ma(N,M,oe,ze,K,Q,ae);return}Pe.set(N,{routeId:M,path:oe}),Bu(N,M,oe,ze,K,Q,ae)}async function Ma(N,M,$,q,Q,Z,te){if(ao(),Pe.delete(N),!q.route.action&&!q.route.lazy){let st=In(405,{method:te.formMethod,pathname:$,routeId:M});et(N,M,st,{flushSync:Z});return}let K=g.fetchers.get(N);Me(N,xk(te,K),{flushSync:Z});let oe=new AbortController,ae=yo(t.history,$,oe.signal,te);H.set(N,oe);let dt=ee,ie=(await wr("action",ae,[q],Q))[0];if(ae.signal.aborted){H.get(N)===oe&&H.delete(N);return}if(h.v7_fetcherPersist&&ht.has(N)){if(Is(ie)||xn(ie)){Me(N,mi(void 0));return}}else{if(Is(ie))if(H.delete(N),re>dt){Me(N,mi(void 0));return}else return he.add(N),Me(N,il(te)),us(ae,ie,{fetcherSubmission:te});if(xn(ie)){et(N,M,ie.error);return}}if(Cs(ie))throw In(400,{type:"defer-action"});let Oe=g.navigation.location||g.location,We=yo(t.history,Oe,oe.signal),si=a||o,bn=g.navigation.state!=="idle"?Uo(si,g.navigation.location,l):g.matches;me(bn,"Didn't find any matches after fetcher action");let Un=++ee;_e.set(N,Un);let Gt=il(te,ie.data);g.fetchers.set(N,Gt);let[br,hn]=r0(t.history,g,bn,te,Oe,!1,h.unstable_skipActionErrorRevalidation,it,Wt,wt,ht,Pe,he,si,l,[q.route.id,ie]);hn.filter(st=>st.key!==N).forEach(st=>{let Tr=st.key,li=g.fetchers.get(Tr),Cr=il(void 0,li?li.data:void 0);g.fetchers.set(Tr,Cr),H.has(Tr)&&er(Tr),st.controller&&H.set(Tr,st.controller)}),Tt({fetchers:new Map(g.fetchers)});let oi=()=>hn.forEach(st=>er(st.key));oe.signal.addEventListener("abort",oi);let{loaderResults:ai,fetcherResults:ds}=await oo(g.matches,bn,br,hn,We);if(oe.signal.aborted)return;oe.signal.removeEventListener("abort",oi),_e.delete(N),H.delete(N),hn.forEach(st=>H.delete(st.key));let ye=d0([...ai,...ds]);if(ye){if(ye.idx>=br.length){let st=hn[ye.idx-br.length].key;he.add(st)}return us(We,ye.result)}let{loaderData:Ct,errors:It}=l0(g,g.matches,br,ai,void 0,hn,ds,Et);if(g.fetchers.has(N)){let st=mi(ie.data);g.fetchers.set(N,st)}Va(Un),g.navigation.state==="loading"&&Un>re?(me(y,"Expected pending action"),A&&A.abort(),_r(g.navigation.location,{matches:bn,loaderData:Ct,errors:It,fetchers:new Map(g.fetchers)})):(Tt({errors:It,loaderData:u0(g.loaderData,Ct,bn,It),fetchers:new Map(g.fetchers)}),it=!1)}async function Bu(N,M,$,q,Q,Z,te){let K=g.fetchers.get(N);Me(N,il(te,K?K.data:void 0),{flushSync:Z});let oe=new AbortController,ae=yo(t.history,$,oe.signal);H.set(N,oe);let dt=ee,ie=(await wr("loader",ae,[q],Q))[0];if(Cs(ie)&&(ie=await Mb(ie,ae.signal,!0)||ie),H.get(N)===oe&&H.delete(N),!ae.signal.aborted){if(ht.has(N)){Me(N,mi(void 0));return}if(Is(ie))if(re>dt){Me(N,mi(void 0));return}else{he.add(N),await us(ae,ie);return}if(xn(ie)){et(N,M,ie.error);return}me(!Cs(ie),"Unhandled fetcher deferred data"),Me(N,mi(ie.data))}}async function us(N,M,$){let{submission:q,fetcherSubmission:Q,replace:Z}=$===void 0?{}:$;M.response.headers.has("X-Remix-Revalidate")&&(it=!0);let te=M.response.headers.get("Location");me(te,"Expected a Location header on the redirect Response"),te=o0(te,new URL(N.url),l);let K=ru(g.location,te,{_isRedirect:!0});if(n){let Oe=!1;if(M.response.headers.has("X-Remix-Reload-Document"))Oe=!0;else if(Lg.test(te)){const We=t.history.createURL(te);Oe=We.origin!==e.location.origin||ba(We.pathname,l)==null}if(Oe){Z?e.location.replace(te):e.location.assign(te);return}}A=null;let oe=Z===!0?at.Replace:at.Push,{formMethod:ae,formAction:dt,formEncType:ze}=g.navigation;!q&&!Q&&ae&&dt&&ze&&(q=p0(g.navigation));let ie=q||Q;if(ck.has(M.response.status)&&ie&&Bn(ie.formMethod))await Zn(oe,K,{submission:qe({},ie,{formAction:te}),preventScrollReset:T});else{let Oe=Ff(K,q);await Zn(oe,K,{overrideNavigation:Oe,fetcherSubmission:Q,preventScrollReset:T})}}async function wr(N,M,$,q){try{let Q=await vk(c,N,M,$,q,s,i);return await Promise.all(Q.map((Z,te)=>{if(Ck(Z)){let K=Z.result;return{type:Be.redirect,response:Ek(K,M,$[te].route.id,q,l,h.v7_relativeSplatPath)}}return wk(Z)}))}catch(Q){return $.map(()=>({type:Be.error,error:Q}))}}async function oo(N,M,$,q,Q){let[Z,...te]=await Promise.all([$.length?wr("loader",Q,$,M):[],...q.map(K=>{if(K.matches&&K.match&&K.controller){let oe=yo(t.history,K.path,K.controller.signal);return wr("loader",oe,[K.match],K.matches).then(ae=>ae[0])}else return Promise.resolve({type:Be.error,error:In(404,{pathname:K.path})})})]);return await Promise.all([f0(N,$,Z,Z.map(()=>Q.signal),!1,g.loaderData),f0(N,q.map(K=>K.match),te,q.map(K=>K.controller?K.controller.signal:null),!0)]),{loaderResults:Z,fetcherResults:te}}function ao(){it=!0,Wt.push(...co()),Pe.forEach((N,M)=>{H.has(M)&&(wt.push(M),er(M))})}function Me(N,M,$){$===void 0&&($={}),g.fetchers.set(N,M),Tt({fetchers:new Map(g.fetchers)},{flushSync:($&&$.flushSync)===!0})}function et(N,M,$,q){q===void 0&&(q={});let Q=Ll(g.matches,M);hs(N),Tt({errors:{[Q.route.id]:$},fetchers:new Map(g.fetchers)},{flushSync:(q&&q.flushSync)===!0})}function cs(N){return h.v7_fetcherPersist&&(qt.set(N,(qt.get(N)||0)+1),ht.has(N)&&ht.delete(N)),g.fetchers.get(N)||hk}function hs(N){let M=g.fetchers.get(N);H.has(N)&&!(M&&M.state==="loading"&&_e.has(N))&&er(N),Pe.delete(N),_e.delete(N),he.delete(N),ht.delete(N),g.fetchers.delete(N)}function Hu(N){if(h.v7_fetcherPersist){let M=(qt.get(N)||0)-1;M<=0?(qt.delete(N),ht.add(N)):qt.set(N,M)}else hs(N);Tt({fetchers:new Map(g.fetchers)})}function er(N){let M=H.get(N);me(M,"Expected fetch controller: "+N),M.abort(),H.delete(N)}function ri(N){for(let M of N){let $=cs(M),q=mi($.data);g.fetchers.set(M,q)}}function Ua(){let N=[],M=!1;for(let $ of he){let q=g.fetchers.get($);me(q,"Expected fetcher: "+$),q.state==="loading"&&(he.delete($),N.push($),M=!0)}return ri(N),M}function Va(N){let M=[];for(let[$,q]of _e)if(q<N){let Q=g.fetchers.get($);me(Q,"Expected fetcher: "+$),Q.state==="loading"&&(er($),_e.delete($),M.push($))}return ri(M),M.length>0}function $a(N,M){let $=g.blockers.get(N)||rl;return bt.get(N)!==M&&bt.set(N,M),$}function Wu(N){g.blockers.delete(N),bt.delete(N)}function lo(N,M){let $=g.blockers.get(N)||rl;me($.state==="unblocked"&&M.state==="blocked"||$.state==="blocked"&&M.state==="blocked"||$.state==="blocked"&&M.state==="proceeding"||$.state==="blocked"&&M.state==="unblocked"||$.state==="proceeding"&&M.state==="unblocked","Invalid blocker state transition: "+$.state+" -> "+M.state);let q=new Map(g.blockers);q.set(N,M),Tt({blockers:q})}function uo(N){let{currentLocation:M,nextLocation:$,historyAction:q}=N;if(bt.size===0)return;bt.size>1&&ra(!1,"A router only supports one blocker at a time");let Q=Array.from(bt.entries()),[Z,te]=Q[Q.length-1],K=g.blockers.get(Z);if(!(K&&K.state==="proceeding")&&te({currentLocation:M,nextLocation:$,historyAction:q}))return Z}function co(N){let M=[];return Et.forEach(($,q)=>{(!N||N(q))&&($.cancel(),M.push(q),Et.delete(q))}),M}function qu(N,M,$){if(_=N,I=M,w=$||null,!R&&g.navigation===$f){R=!0;let q=ho(g.location,g.matches);q!=null&&Tt({restoreScrollPosition:q})}return()=>{_=null,I=null,w=null}}function ii(N,M){return w&&w(N,M.map(q=>jx(q,g.loaderData)))||N.key}function Fa(N,M){if(_&&I){let $=ii(N,M);_[$]=I()}}function ho(N,M){if(_){let $=ii(N,M),q=_[$];if(typeof q=="number")return q}return null}function Er(N){s={},a=Jp(N,i,void 0,s)}return z={get basename(){return l},get future(){return h},get state(){return g},get routes(){return o},get window(){return e},initialize:ef,subscribe:io,enableScrollRestoration:qu,navigate:so,fetch:zu,revalidate:Da,createHref:N=>t.history.createHref(N),encodeLocation:N=>t.history.encodeLocation(N),getFetcher:cs,deleteFetcher:Hu,dispose:ro,getBlocker:$a,deleteBlocker:Wu,_internalFetchControllers:H,_internalActiveDeferreds:Et,_internalSetRoutes:Er},z}function pk(t){return t!=null&&("formData"in t&&t.formData!=null||"body"in t&&t.body!==void 0)}function Zp(t,e,n,r,i,s,o,a){let l,c;if(o){l=[];for(let f of e)if(l.push(f),f.route.id===o){c=f;break}}else l=e,c=e[e.length-1];let h=cd(i||".",ud(l,s),ba(t.pathname,n)||t.pathname,a==="path");return i==null&&(h.search=t.search,h.hash=t.hash),(i==null||i===""||i===".")&&c&&c.route.index&&!Dg(h.search)&&(h.search=h.search?h.search.replace(/^\?/,"?index&"):"?index"),r&&n!=="/"&&(h.pathname=h.pathname==="/"?n:jr([n,h.pathname])),$s(h)}function n0(t,e,n,r){if(!r||!pk(r))return{path:n};if(r.formMethod&&!Sk(r.formMethod))return{path:n,error:In(405,{method:r.formMethod})};let i=()=>({path:n,error:In(400,{type:"invalid-body"})}),s=r.formMethod||"get",o=t?s.toUpperCase():s.toLowerCase(),a=Lb(n);if(r.body!==void 0){if(r.formEncType==="text/plain"){if(!Bn(o))return i();let p=typeof r.body=="string"?r.body:r.body instanceof FormData||r.body instanceof URLSearchParams?Array.from(r.body.entries()).reduce((_,w)=>{let[I,R]=w;return""+_+I+"="+R+`
`},""):String(r.body);return{path:n,submission:{formMethod:o,formAction:a,formEncType:r.formEncType,formData:void 0,json:void 0,text:p}}}else if(r.formEncType==="application/json"){if(!Bn(o))return i();try{let p=typeof r.body=="string"?JSON.parse(r.body):r.body;return{path:n,submission:{formMethod:o,formAction:a,formEncType:r.formEncType,formData:void 0,json:p,text:void 0}}}catch{return i()}}}me(typeof FormData=="function","FormData is not available in this environment");let l,c;if(r.formData)l=em(r.formData),c=r.formData;else if(r.body instanceof FormData)l=em(r.body),c=r.body;else if(r.body instanceof URLSearchParams)l=r.body,c=a0(l);else if(r.body==null)l=new URLSearchParams,c=new FormData;else try{l=new URLSearchParams(r.body),c=a0(l)}catch{return i()}let h={formMethod:o,formAction:a,formEncType:r&&r.formEncType||"application/x-www-form-urlencoded",formData:c,json:void 0,text:void 0};if(Bn(h.formMethod))return{path:n,submission:h};let f=ts(n);return e&&f.search&&Dg(f.search)&&l.append("index",""),f.search="?"+l,{path:$s(f),submission:h}}function mk(t,e){let n=t;if(e){let r=t.findIndex(i=>i.route.id===e);r>=0&&(n=t.slice(0,r))}return n}function r0(t,e,n,r,i,s,o,a,l,c,h,f,p,_,w,I){let R=I?xn(I[1])?I[1].error:I[1].data:void 0,C=t.createURL(e.location),E=t.createURL(i),S=I&&xn(I[1])?I[0]:void 0,D=S?mk(n,S):n,F=I?I[1].statusCode:void 0,z=o&&F&&F>=400,g=D.filter((T,A)=>{let{route:k}=T;if(k.lazy)return!0;if(k.loader==null)return!1;if(s)return typeof k.loader!="function"||k.loader.hydrate?!0:e.loaderData[k.id]===void 0&&(!e.errors||e.errors[k.id]===void 0);if(gk(e.loaderData,e.matches[A],T)||l.some(Ie=>Ie===T.route.id))return!0;let P=e.matches[A],x=T;return i0(T,qe({currentUrl:C,currentParams:P.params,nextUrl:E,nextParams:x.params},r,{actionResult:R,unstable_actionStatus:F,defaultShouldRevalidate:z?!1:a||C.pathname+C.search===E.pathname+E.search||C.search!==E.search||Ob(P,x)}))}),y=[];return f.forEach((T,A)=>{if(s||!n.some(it=>it.route.id===T.routeId)||h.has(A))return;let k=Uo(_,T.path,w);if(!k){y.push({key:A,routeId:T.routeId,path:T.path,matches:null,match:null,controller:null});return}let P=e.fetchers.get(A),x=tm(k,T.path),Ie=!1;p.has(A)?Ie=!1:c.includes(A)?Ie=!0:P&&P.state!=="idle"&&P.data===void 0?Ie=a:Ie=i0(x,qe({currentUrl:C,currentParams:e.matches[e.matches.length-1].params,nextUrl:E,nextParams:n[n.length-1].params},r,{actionResult:R,unstable_actionStatus:F,defaultShouldRevalidate:z?!1:a})),Ie&&y.push({key:A,routeId:T.routeId,path:T.path,matches:k,match:x,controller:new AbortController})}),[g,y]}function gk(t,e,n){let r=!e||n.route.id!==e.route.id,i=t[n.route.id]===void 0;return r||i}function Ob(t,e){let n=t.route.path;return t.pathname!==e.pathname||n!=null&&n.endsWith("*")&&t.params["*"]!==e.params["*"]}function i0(t,e){if(t.route.shouldRevalidate){let n=t.route.shouldRevalidate(e);if(typeof n=="boolean")return n}return e.defaultShouldRevalidate}async function s0(t,e,n){if(!t.lazy)return;let r=await t.lazy();if(!t.lazy)return;let i=n[t.id];me(i,"No route found in manifest");let s={};for(let o in r){let l=i[o]!==void 0&&o!=="hasErrorBoundary";ra(!l,'Route "'+i.id+'" has a static property "'+o+'" defined but its lazy function is also returning a value for this property. '+('The lazy route property "'+o+'" will be ignored.')),!l&&!$x.has(o)&&(s[o]=r[o])}Object.assign(i,s),Object.assign(i,qe({},e(i),{lazy:void 0}))}function yk(t){return Promise.all(t.matches.map(e=>e.resolve()))}async function vk(t,e,n,r,i,s,o,a){let l=r.reduce((f,p)=>f.add(p.route.id),new Set),c=new Set,h=await t({matches:i.map(f=>{let p=l.has(f.route.id);return qe({},f,{shouldLoad:p,resolve:w=>(c.add(f.route.id),p?_k(e,n,f,s,o,w,a):Promise.resolve({type:Be.data,result:void 0}))})}),request:n,params:i[0].params,context:a});return i.forEach(f=>me(c.has(f.route.id),'`match.resolve()` was not called for route id "'+f.route.id+'". You must call `match.resolve()` on every match passed to `dataStrategy` to ensure all routes are properly loaded.')),h.filter((f,p)=>l.has(i[p].route.id))}async function _k(t,e,n,r,i,s,o){let a,l,c=h=>{let f,p=new Promise((I,R)=>f=R);l=()=>f(),e.signal.addEventListener("abort",l);let _=I=>typeof h!="function"?Promise.reject(new Error("You cannot call the handler for a route which defines a boolean "+('"'+t+'" [routeId: '+n.route.id+"]"))):h({request:e,params:n.params,context:o},...I!==void 0?[I]:[]),w;return s?w=s(I=>_(I)):w=(async()=>{try{return{type:"data",result:await _()}}catch(I){return{type:"error",result:I}}})(),Promise.race([w,p])};try{let h=n.route[t];if(n.route.lazy)if(h){let f,[p]=await Promise.all([c(h).catch(_=>{f=_}),s0(n.route,i,r)]);if(f!==void 0)throw f;a=p}else if(await s0(n.route,i,r),h=n.route[t],h)a=await c(h);else if(t==="action"){let f=new URL(e.url),p=f.pathname+f.search;throw In(405,{method:e.method,pathname:p,routeId:n.route.id})}else return{type:Be.data,result:void 0};else if(h)a=await c(h);else{let f=new URL(e.url),p=f.pathname+f.search;throw In(404,{pathname:p})}me(a.result!==void 0,"You defined "+(t==="action"?"an action":"a loader")+" for route "+('"'+n.route.id+"\" but didn't return anything from your `"+t+"` ")+"function. Please return a value or `null`.")}catch(h){return{type:Be.error,result:h}}finally{l&&e.signal.removeEventListener("abort",l)}return a}async function wk(t){let{result:e,type:n,status:r}=t;if(Db(e)){let o;try{let a=e.headers.get("Content-Type");a&&/\bapplication\/json\b/.test(a)?e.body==null?o=null:o=await e.json():o=await e.text()}catch(a){return{type:Be.error,error:a}}return n===Be.error?{type:Be.error,error:new Ng(e.status,e.statusText,o),statusCode:e.status,headers:e.headers}:{type:Be.data,data:o,statusCode:e.status,headers:e.headers}}if(n===Be.error)return{type:Be.error,error:e,statusCode:Og(e)?e.status:r};if(Ik(e)){var i,s;return{type:Be.deferred,deferredData:e,statusCode:(i=e.init)==null?void 0:i.status,headers:((s=e.init)==null?void 0:s.headers)&&new Headers(e.init.headers)}}return{type:Be.data,data:e,statusCode:r}}function Ek(t,e,n,r,i,s){let o=t.headers.get("Location");if(me(o,"Redirects returned/thrown from loaders/actions must have a Location header"),!Lg.test(o)){let a=r.slice(0,r.findIndex(l=>l.route.id===n)+1);o=Zp(new URL(e.url),a,i,!0,o,s),t.headers.set("Location",o)}return t}function o0(t,e,n){if(Lg.test(t)){let r=t,i=r.startsWith("//")?new URL(e.protocol+r):new URL(r),s=ba(i.pathname,n)!=null;if(i.origin===e.origin&&s)return i.pathname+i.search+i.hash}return t}function yo(t,e,n,r){let i=t.createURL(Lb(e)).toString(),s={signal:n};if(r&&Bn(r.formMethod)){let{formMethod:o,formEncType:a}=r;s.method=o.toUpperCase(),a==="application/json"?(s.headers=new Headers({"Content-Type":a}),s.body=JSON.stringify(r.json)):a==="text/plain"?s.body=r.text:a==="application/x-www-form-urlencoded"&&r.formData?s.body=em(r.formData):s.body=r.formData}return new Request(i,s)}function em(t){let e=new URLSearchParams;for(let[n,r]of t.entries())e.append(n,typeof r=="string"?r:r.name);return e}function a0(t){let e=new FormData;for(let[n,r]of t.entries())e.append(n,r);return e}function bk(t,e,n,r,i,s){let o={},a=null,l,c=!1,h={},f=r&&xn(r[1])?r[1].error:void 0;return n.forEach((p,_)=>{let w=e[_].route.id;if(me(!Is(p),"Cannot handle redirect results in processLoaderData"),xn(p)){let I=p.error;f!==void 0&&(I=f,f=void 0),a=a||{};{let R=Ll(t,w);a[R.route.id]==null&&(a[R.route.id]=I)}o[w]=void 0,c||(c=!0,l=Og(p.error)?p.error.status:500),p.headers&&(h[w]=p.headers)}else Cs(p)?(i.set(w,p.deferredData),o[w]=p.deferredData.data,p.statusCode!=null&&p.statusCode!==200&&!c&&(l=p.statusCode),p.headers&&(h[w]=p.headers)):(o[w]=p.data,p.statusCode&&p.statusCode!==200&&!c&&(l=p.statusCode),p.headers&&(h[w]=p.headers))}),f!==void 0&&r&&(a={[r[0]]:f},o[r[0]]=void 0),{loaderData:o,errors:a,statusCode:l||200,loaderHeaders:h}}function l0(t,e,n,r,i,s,o,a){let{loaderData:l,errors:c}=bk(e,n,r,i,a);for(let h=0;h<s.length;h++){let{key:f,match:p,controller:_}=s[h];me(o!==void 0&&o[h]!==void 0,"Did not find corresponding fetcher result");let w=o[h];if(!(_&&_.signal.aborted))if(xn(w)){let I=Ll(t.matches,p==null?void 0:p.route.id);c&&c[I.route.id]||(c=qe({},c,{[I.route.id]:w.error})),t.fetchers.delete(f)}else if(Is(w))me(!1,"Unhandled fetcher revalidation redirect");else if(Cs(w))me(!1,"Unhandled fetcher deferred data");else{let I=mi(w.data);t.fetchers.set(f,I)}}return{loaderData:l,errors:c}}function u0(t,e,n,r){let i=qe({},e);for(let s of n){let o=s.route.id;if(e.hasOwnProperty(o)?e[o]!==void 0&&(i[o]=e[o]):t[o]!==void 0&&s.route.loader&&(i[o]=t[o]),r&&r.hasOwnProperty(o))break}return i}function c0(t){return t?xn(t[1])?{actionData:{}}:{actionData:{[t[0]]:t[1].data}}:{}}function Ll(t,e){return(e?t.slice(0,t.findIndex(r=>r.route.id===e)+1):[...t]).reverse().find(r=>r.route.hasErrorBoundary===!0)||t[0]}function h0(t){let e=t.length===1?t[0]:t.find(n=>n.index||!n.path||n.path==="/")||{id:"__shim-error-route__"};return{matches:[{params:{},pathname:"",pathnameBase:"",route:e}],route:e}}function In(t,e){let{pathname:n,routeId:r,method:i,type:s}=e===void 0?{}:e,o="Unknown Server Error",a="Unknown @remix-run/router error";return t===400?(o="Bad Request",i&&n&&r?a="You made a "+i+' request to "'+n+'" but '+('did not provide a `loader` for route "'+r+'", ')+"so there is no way to handle the request.":s==="defer-action"?a="defer() is not supported in actions":s==="invalid-body"&&(a="Unable to encode submission body")):t===403?(o="Forbidden",a='Route "'+r+'" does not match URL "'+n+'"'):t===404?(o="Not Found",a='No route matches URL "'+n+'"'):t===405&&(o="Method Not Allowed",i&&n&&r?a="You made a "+i.toUpperCase()+' request to "'+n+'" but '+('did not provide an `action` for route "'+r+'", ')+"so there is no way to handle the request.":i&&(a='Invalid request method "'+i.toUpperCase()+'"')),new Ng(t||500,o,new Error(a),!0)}function d0(t){for(let e=t.length-1;e>=0;e--){let n=t[e];if(Is(n))return{result:n,idx:e}}}function Lb(t){let e=typeof t=="string"?ts(t):t;return $s(qe({},e,{hash:""}))}function Tk(t,e){return t.pathname!==e.pathname||t.search!==e.search?!1:t.hash===""?e.hash!=="":t.hash===e.hash?!0:e.hash!==""}function Ck(t){return Db(t.result)&&uk.has(t.result.status)}function Cs(t){return t.type===Be.deferred}function xn(t){return t.type===Be.error}function Is(t){return(t&&t.type)===Be.redirect}function Ik(t){let e=t;return e&&typeof e=="object"&&typeof e.data=="object"&&typeof e.subscribe=="function"&&typeof e.cancel=="function"&&typeof e.resolveData=="function"}function Db(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.headers=="object"&&typeof t.body<"u"}function Sk(t){return lk.has(t.toLowerCase())}function Bn(t){return ok.has(t.toLowerCase())}async function f0(t,e,n,r,i,s){for(let o=0;o<n.length;o++){let a=n[o],l=e[o];if(!l)continue;let c=t.find(f=>f.route.id===l.route.id),h=c!=null&&!Ob(c,l)&&(s&&s[l.route.id])!==void 0;if(Cs(a)&&(i||h)){let f=r[o];me(f,"Expected an AbortSignal for revalidating fetcher deferred result"),await Mb(a,f,i).then(p=>{p&&(n[o]=p||n[o])})}}}async function Mb(t,e,n){if(n===void 0&&(n=!1),!await t.deferredData.resolveData(e)){if(n)try{return{type:Be.data,data:t.deferredData.unwrappedData}}catch(i){return{type:Be.error,error:i}}return{type:Be.data,data:t.deferredData.data}}}function Dg(t){return new URLSearchParams(t).getAll("index").some(e=>e==="")}function tm(t,e){let n=typeof e=="string"?ts(e).search:e.search;if(t[t.length-1].route.index&&Dg(n||""))return t[t.length-1];let r=Pb(t);return r[r.length-1]}function p0(t){let{formMethod:e,formAction:n,formEncType:r,text:i,formData:s,json:o}=t;if(!(!e||!n||!r)){if(i!=null)return{formMethod:e,formAction:n,formEncType:r,formData:void 0,json:void 0,text:i};if(s!=null)return{formMethod:e,formAction:n,formEncType:r,formData:s,json:void 0,text:void 0};if(o!==void 0)return{formMethod:e,formAction:n,formEncType:r,formData:void 0,json:o,text:void 0}}}function Ff(t,e){return e?{state:"loading",location:t,formMethod:e.formMethod,formAction:e.formAction,formEncType:e.formEncType,formData:e.formData,json:e.json,text:e.text}:{state:"loading",location:t,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0}}function Ak(t,e){return{state:"submitting",location:t,formMethod:e.formMethod,formAction:e.formAction,formEncType:e.formEncType,formData:e.formData,json:e.json,text:e.text}}function il(t,e){return t?{state:"loading",formMethod:t.formMethod,formAction:t.formAction,formEncType:t.formEncType,formData:t.formData,json:t.json,text:t.text,data:e}:{state:"loading",formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0,data:e}}function xk(t,e){return{state:"submitting",formMethod:t.formMethod,formAction:t.formAction,formEncType:t.formEncType,formData:t.formData,json:t.json,text:t.text,data:e?e.data:void 0}}function mi(t){return{state:"idle",formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0,data:t}}function kk(t,e){try{let n=t.sessionStorage.getItem(Nb);if(n){let r=JSON.parse(n);for(let[i,s]of Object.entries(r||{}))s&&Array.isArray(s)&&e.set(i,new Set(s||[]))}}catch{}}function Pk(t,e){if(e.size>0){let n={};for(let[r,i]of e)n[r]=[...i];try{t.sessionStorage.setItem(Nb,JSON.stringify(n))}catch(r){ra(!1,"Failed to save applied view transitions in sessionStorage ("+r+").")}}}/**
 * React Router v6.23.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Ih(){return Ih=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Ih.apply(this,arguments)}const hd=L.createContext(null),Ub=L.createContext(null),ns=L.createContext(null),Mg=L.createContext(null),Zr=L.createContext({outlet:null,matches:[],isDataRoute:!1}),Vb=L.createContext(null);function Rk(t,e){let{relative:n}=e===void 0?{}:e;Ta()||me(!1);let{basename:r,navigator:i}=L.useContext(ns),{hash:s,pathname:o,search:a}=Fb(t,{relative:n}),l=o;return r!=="/"&&(l=o==="/"?r:jr([r,o])),i.createHref({pathname:l,search:a,hash:s})}function Ta(){return L.useContext(Mg)!=null}function rs(){return Ta()||me(!1),L.useContext(Mg).location}function $b(t){L.useContext(ns).static||L.useLayoutEffect(t)}function Ys(){let{isDataRoute:t}=L.useContext(Zr);return t?Wk():Nk()}function Nk(){Ta()||me(!1);let t=L.useContext(hd),{basename:e,future:n,navigator:r}=L.useContext(ns),{matches:i}=L.useContext(Zr),{pathname:s}=rs(),o=JSON.stringify(ud(i,n.v7_relativeSplatPath)),a=L.useRef(!1);return $b(()=>{a.current=!0}),L.useCallback(function(c,h){if(h===void 0&&(h={}),!a.current)return;if(typeof c=="number"){r.go(c);return}let f=cd(c,JSON.parse(o),s,h.relative==="path");t==null&&e!=="/"&&(f.pathname=f.pathname==="/"?e:jr([e,f.pathname])),(h.replace?r.replace:r.push)(f,h.state,h)},[e,r,o,s,t])}const Ok=L.createContext(null);function Lk(t){let e=L.useContext(Zr).outlet;return e&&L.createElement(Ok.Provider,{value:t},e)}function Fb(t,e){let{relative:n}=e===void 0?{}:e,{future:r}=L.useContext(ns),{matches:i}=L.useContext(Zr),{pathname:s}=rs(),o=JSON.stringify(ud(i,r.v7_relativeSplatPath));return L.useMemo(()=>cd(t,JSON.parse(o),s,n==="path"),[t,o,s,n])}function Dk(t,e,n,r){Ta()||me(!1);let{navigator:i}=L.useContext(ns),{matches:s}=L.useContext(Zr),o=s[s.length-1],a=o?o.params:{};o&&o.pathname;let l=o?o.pathnameBase:"/";o&&o.route;let c=rs(),h;h=c;let f=h.pathname||"/",p=f;if(l!=="/"){let I=l.replace(/^\//,"").split("/");p="/"+f.replace(/^\//,"").split("/").slice(I.length).join("/")}let _=Uo(t,{pathname:p});return Fk(_&&_.map(I=>Object.assign({},I,{params:Object.assign({},a,I.params),pathname:jr([l,i.encodeLocation?i.encodeLocation(I.pathname).pathname:I.pathname]),pathnameBase:I.pathnameBase==="/"?l:jr([l,i.encodeLocation?i.encodeLocation(I.pathnameBase).pathname:I.pathnameBase])})),s,n,r)}function Mk(){let t=Hk(),e=Og(t)?t.status+" "+t.statusText:t instanceof Error?t.message:JSON.stringify(t),n=t instanceof Error?t.stack:null,i={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return L.createElement(L.Fragment,null,L.createElement("h2",null,"Unexpected Application Error!"),L.createElement("h3",{style:{fontStyle:"italic"}},e),n?L.createElement("pre",{style:i},n):null,null)}const Uk=L.createElement(Mk,null);class Vk extends L.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,n){return n.location!==e.location||n.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:n.error,location:n.location,revalidation:e.revalidation||n.revalidation}}componentDidCatch(e,n){console.error("React Router caught the following error during render",e,n)}render(){return this.state.error!==void 0?L.createElement(Zr.Provider,{value:this.props.routeContext},L.createElement(Vb.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function $k(t){let{routeContext:e,match:n,children:r}=t,i=L.useContext(hd);return i&&i.static&&i.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(i.staticContext._deepestRenderedBoundaryId=n.route.id),L.createElement(Zr.Provider,{value:e},r)}function Fk(t,e,n,r){var i;if(e===void 0&&(e=[]),n===void 0&&(n=null),r===void 0&&(r=null),t==null){var s;if((s=n)!=null&&s.errors)t=n.matches;else return null}let o=t,a=(i=n)==null?void 0:i.errors;if(a!=null){let h=o.findIndex(f=>f.route.id&&(a==null?void 0:a[f.route.id])!==void 0);h>=0||me(!1),o=o.slice(0,Math.min(o.length,h+1))}let l=!1,c=-1;if(n&&r&&r.v7_partialHydration)for(let h=0;h<o.length;h++){let f=o[h];if((f.route.HydrateFallback||f.route.hydrateFallbackElement)&&(c=h),f.route.id){let{loaderData:p,errors:_}=n,w=f.route.loader&&p[f.route.id]===void 0&&(!_||_[f.route.id]===void 0);if(f.route.lazy||w){l=!0,c>=0?o=o.slice(0,c+1):o=[o[0]];break}}}return o.reduceRight((h,f,p)=>{let _,w=!1,I=null,R=null;n&&(_=a&&f.route.id?a[f.route.id]:void 0,I=f.route.errorElement||Uk,l&&(c<0&&p===0?(w=!0,R=null):c===p&&(w=!0,R=f.route.hydrateFallbackElement||null)));let C=e.concat(o.slice(0,p+1)),E=()=>{let S;return _?S=I:w?S=R:f.route.Component?S=L.createElement(f.route.Component,null):f.route.element?S=f.route.element:S=h,L.createElement($k,{match:f,routeContext:{outlet:h,matches:C,isDataRoute:n!=null},children:S})};return n&&(f.route.ErrorBoundary||f.route.errorElement||p===0)?L.createElement(Vk,{location:n.location,revalidation:n.revalidation,component:I,error:_,children:E(),routeContext:{outlet:null,matches:C,isDataRoute:!0}}):E()},null)}var jb=function(t){return t.UseBlocker="useBlocker",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t}(jb||{}),Sh=function(t){return t.UseBlocker="useBlocker",t.UseLoaderData="useLoaderData",t.UseActionData="useActionData",t.UseRouteError="useRouteError",t.UseNavigation="useNavigation",t.UseRouteLoaderData="useRouteLoaderData",t.UseMatches="useMatches",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t.UseRouteId="useRouteId",t}(Sh||{});function jk(t){let e=L.useContext(hd);return e||me(!1),e}function zk(t){let e=L.useContext(Ub);return e||me(!1),e}function Bk(t){let e=L.useContext(Zr);return e||me(!1),e}function zb(t){let e=Bk(),n=e.matches[e.matches.length-1];return n.route.id||me(!1),n.route.id}function Hk(){var t;let e=L.useContext(Vb),n=zk(Sh.UseRouteError),r=zb(Sh.UseRouteError);return e!==void 0?e:(t=n.errors)==null?void 0:t[r]}function Wk(){let{router:t}=jk(jb.UseNavigateStable),e=zb(Sh.UseNavigateStable),n=L.useRef(!1);return $b(()=>{n.current=!0}),L.useCallback(function(i,s){s===void 0&&(s={}),n.current&&(typeof i=="number"?t.navigate(i):t.navigate(i,Ih({fromRouteId:e},s)))},[t,e])}function qk(t){let{to:e,replace:n,state:r,relative:i}=t;Ta()||me(!1);let{future:s,static:o}=L.useContext(ns),{matches:a}=L.useContext(Zr),{pathname:l}=rs(),c=Ys(),h=cd(e,ud(a,s.v7_relativeSplatPath),l,i==="path"),f=JSON.stringify(h);return L.useEffect(()=>c(JSON.parse(f),{replace:n,state:r,relative:i}),[c,f,i,n,r]),null}function Gk(t){return Lk(t.context)}function Kk(t){let{basename:e="/",children:n=null,location:r,navigationType:i=at.Pop,navigator:s,static:o=!1,future:a}=t;Ta()&&me(!1);let l=e.replace(/^\/*/,"/"),c=L.useMemo(()=>({basename:l,navigator:s,static:o,future:Ih({v7_relativeSplatPath:!1},a)}),[l,a,s,o]);typeof r=="string"&&(r=ts(r));let{pathname:h="/",search:f="",hash:p="",state:_=null,key:w="default"}=r,I=L.useMemo(()=>{let R=ba(h,l);return R==null?null:{location:{pathname:R,search:f,hash:p,state:_,key:w},navigationType:i}},[l,h,f,p,_,w,i]);return I==null?null:L.createElement(ns.Provider,{value:c},L.createElement(Mg.Provider,{children:n,value:I}))}new Promise(()=>{});function Qk(t){let e={hasErrorBoundary:t.ErrorBoundary!=null||t.errorElement!=null};return t.Component&&Object.assign(e,{element:L.createElement(t.Component),Component:void 0}),t.HydrateFallback&&Object.assign(e,{hydrateFallbackElement:L.createElement(t.HydrateFallback),HydrateFallback:void 0}),t.ErrorBoundary&&Object.assign(e,{errorElement:L.createElement(t.ErrorBoundary),ErrorBoundary:void 0}),e}/**
 * React Router DOM v6.23.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function iu(){return iu=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},iu.apply(this,arguments)}function Xk(t,e){if(t==null)return{};var n={},r=Object.keys(t),i,s;for(s=0;s<r.length;s++)i=r[s],!(e.indexOf(i)>=0)&&(n[i]=t[i]);return n}function Yk(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function Jk(t,e){return t.button===0&&(!e||e==="_self")&&!Yk(t)}const Zk=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","unstable_viewTransition"],eP="6";try{window.__reactRouterVersion=eP}catch{}function tP(t,e){return fk({basename:void 0,future:iu({},void 0,{v7_prependBasename:!0}),history:Mx({window:void 0}),hydrationData:nP(),routes:t,mapRouteProperties:Qk,unstable_dataStrategy:void 0,window:void 0}).initialize()}function nP(){var t;let e=(t=window)==null?void 0:t.__staticRouterHydrationData;return e&&e.errors&&(e=iu({},e,{errors:rP(e.errors)})),e}function rP(t){if(!t)return null;let e=Object.entries(t),n={};for(let[r,i]of e)if(i&&i.__type==="RouteErrorResponse")n[r]=new Ng(i.status,i.statusText,i.data,i.internal===!0);else if(i&&i.__type==="Error"){if(i.__subType){let s=window[i.__subType];if(typeof s=="function")try{let o=new s(i.message);o.stack="",n[r]=o}catch{}}if(n[r]==null){let s=new Error(i.message);s.stack="",n[r]=s}}else n[r]=i;return n}const iP=L.createContext({isTransitioning:!1}),sP=L.createContext(new Map),oP="startTransition",m0=TS[oP],aP="flushSync",g0=Dx[aP];function lP(t){m0?m0(t):t()}function sl(t){g0?g0(t):t()}let uP=class{constructor(){this.status="pending",this.promise=new Promise((e,n)=>{this.resolve=r=>{this.status==="pending"&&(this.status="resolved",e(r))},this.reject=r=>{this.status==="pending"&&(this.status="rejected",n(r))}})}};function cP(t){let{fallbackElement:e,router:n,future:r}=t,[i,s]=L.useState(n.state),[o,a]=L.useState(),[l,c]=L.useState({isTransitioning:!1}),[h,f]=L.useState(),[p,_]=L.useState(),[w,I]=L.useState(),R=L.useRef(new Map),{v7_startTransition:C}=r||{},E=L.useCallback(g=>{C?lP(g):g()},[C]),S=L.useCallback((g,y)=>{let{deletedFetchers:T,unstable_flushSync:A,unstable_viewTransitionOpts:k}=y;T.forEach(x=>R.current.delete(x)),g.fetchers.forEach((x,Ie)=>{x.data!==void 0&&R.current.set(Ie,x.data)});let P=n.window==null||n.window.document==null||typeof n.window.document.startViewTransition!="function";if(!k||P){A?sl(()=>s(g)):E(()=>s(g));return}if(A){sl(()=>{p&&(h&&h.resolve(),p.skipTransition()),c({isTransitioning:!0,flushSync:!0,currentLocation:k.currentLocation,nextLocation:k.nextLocation})});let x=n.window.document.startViewTransition(()=>{sl(()=>s(g))});x.finished.finally(()=>{sl(()=>{f(void 0),_(void 0),a(void 0),c({isTransitioning:!1})})}),sl(()=>_(x));return}p?(h&&h.resolve(),p.skipTransition(),I({state:g,currentLocation:k.currentLocation,nextLocation:k.nextLocation})):(a(g),c({isTransitioning:!0,flushSync:!1,currentLocation:k.currentLocation,nextLocation:k.nextLocation}))},[n.window,p,h,R,E]);L.useLayoutEffect(()=>n.subscribe(S),[n,S]),L.useEffect(()=>{l.isTransitioning&&!l.flushSync&&f(new uP)},[l]),L.useEffect(()=>{if(h&&o&&n.window){let g=o,y=h.promise,T=n.window.document.startViewTransition(async()=>{E(()=>s(g)),await y});T.finished.finally(()=>{f(void 0),_(void 0),a(void 0),c({isTransitioning:!1})}),_(T)}},[E,o,h,n.window]),L.useEffect(()=>{h&&o&&i.location.key===o.location.key&&h.resolve()},[h,p,i.location,o]),L.useEffect(()=>{!l.isTransitioning&&w&&(a(w.state),c({isTransitioning:!0,flushSync:!1,currentLocation:w.currentLocation,nextLocation:w.nextLocation}),I(void 0))},[l.isTransitioning,w]),L.useEffect(()=>{},[]);let D=L.useMemo(()=>({createHref:n.createHref,encodeLocation:n.encodeLocation,go:g=>n.navigate(g),push:(g,y,T)=>n.navigate(g,{state:y,preventScrollReset:T==null?void 0:T.preventScrollReset}),replace:(g,y,T)=>n.navigate(g,{replace:!0,state:y,preventScrollReset:T==null?void 0:T.preventScrollReset})}),[n]),F=n.basename||"/",z=L.useMemo(()=>({router:n,navigator:D,static:!1,basename:F}),[n,D,F]);return L.createElement(L.Fragment,null,L.createElement(hd.Provider,{value:z},L.createElement(Ub.Provider,{value:i},L.createElement(sP.Provider,{value:R.current},L.createElement(iP.Provider,{value:l},L.createElement(Kk,{basename:F,location:i.location,navigationType:i.historyAction,navigator:D,future:{v7_relativeSplatPath:n.future.v7_relativeSplatPath}},i.initialized||n.future.v7_partialHydration?L.createElement(hP,{routes:n.routes,future:n.future,state:i}):e))))),null)}function hP(t){let{routes:e,future:n,state:r}=t;return Dk(e,void 0,r,n)}const dP=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",fP=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,su=L.forwardRef(function(e,n){let{onClick:r,relative:i,reloadDocument:s,replace:o,state:a,target:l,to:c,preventScrollReset:h,unstable_viewTransition:f}=e,p=Xk(e,Zk),{basename:_}=L.useContext(ns),w,I=!1;if(typeof c=="string"&&fP.test(c)&&(w=c,dP))try{let S=new URL(window.location.href),D=c.startsWith("//")?new URL(S.protocol+c):new URL(c),F=ba(D.pathname,_);D.origin===S.origin&&F!=null?c=F+D.search+D.hash:I=!0}catch{}let R=Rk(c,{relative:i}),C=pP(c,{replace:o,state:a,target:l,preventScrollReset:h,relative:i,unstable_viewTransition:f});function E(S){r&&r(S),S.defaultPrevented||C(S)}return L.createElement("a",iu({},p,{href:w||R,onClick:I||s?r:E,ref:n,target:l}))});var y0;(function(t){t.UseScrollRestoration="useScrollRestoration",t.UseSubmit="useSubmit",t.UseSubmitFetcher="useSubmitFetcher",t.UseFetcher="useFetcher",t.useViewTransitionState="useViewTransitionState"})(y0||(y0={}));var v0;(function(t){t.UseFetcher="useFetcher",t.UseFetchers="useFetchers",t.UseScrollRestoration="useScrollRestoration"})(v0||(v0={}));function pP(t,e){let{target:n,replace:r,state:i,preventScrollReset:s,relative:o,unstable_viewTransition:a}=e===void 0?{}:e,l=Ys(),c=rs(),h=Fb(t,{relative:o});return L.useCallback(f=>{if(Jk(f,n)){f.preventDefault();let p=r!==void 0?r:$s(c)===$s(h);l(t,{replace:p,state:i,preventScrollReset:s,relative:o,unstable_viewTransition:a})}},[c,l,h,r,i,n,t,s,o,a])}function Bb(t){var e,n,r="";if(typeof t=="string"||typeof t=="number")r+=t;else if(typeof t=="object")if(Array.isArray(t)){var i=t.length;for(e=0;e<i;e++)t[e]&&(n=Bb(t[e]))&&(r&&(r+=" "),r+=n)}else for(n in t)t[n]&&(r&&(r+=" "),r+=n);return r}function mP(){for(var t,e,n=0,r="",i=arguments.length;n<i;n++)(t=arguments[n])&&(e=Bb(t))&&(r&&(r+=" "),r+=e);return r}const Ug="-";function gP(t){const e=vP(t),{conflictingClassGroups:n,conflictingClassGroupModifiers:r}=t;function i(o){const a=o.split(Ug);return a[0]===""&&a.length!==1&&a.shift(),Hb(a,e)||yP(o)}function s(o,a){const l=n[o]||[];return a&&r[o]?[...l,...r[o]]:l}return{getClassGroupId:i,getConflictingClassGroupIds:s}}function Hb(t,e){var o;if(t.length===0)return e.classGroupId;const n=t[0],r=e.nextPart.get(n),i=r?Hb(t.slice(1),r):void 0;if(i)return i;if(e.validators.length===0)return;const s=t.join(Ug);return(o=e.validators.find(({validator:a})=>a(s)))==null?void 0:o.classGroupId}const _0=/^\[(.+)\]$/;function yP(t){if(_0.test(t)){const e=_0.exec(t)[1],n=e==null?void 0:e.substring(0,e.indexOf(":"));if(n)return"arbitrary.."+n}}function vP(t){const{theme:e,prefix:n}=t,r={nextPart:new Map,validators:[]};return wP(Object.entries(t.classGroups),n).forEach(([s,o])=>{nm(o,r,s,e)}),r}function nm(t,e,n,r){t.forEach(i=>{if(typeof i=="string"){const s=i===""?e:w0(e,i);s.classGroupId=n;return}if(typeof i=="function"){if(_P(i)){nm(i(r),e,n,r);return}e.validators.push({validator:i,classGroupId:n});return}Object.entries(i).forEach(([s,o])=>{nm(o,w0(e,s),n,r)})})}function w0(t,e){let n=t;return e.split(Ug).forEach(r=>{n.nextPart.has(r)||n.nextPart.set(r,{nextPart:new Map,validators:[]}),n=n.nextPart.get(r)}),n}function _P(t){return t.isThemeGetter}function wP(t,e){return e?t.map(([n,r])=>{const i=r.map(s=>typeof s=="string"?e+s:typeof s=="object"?Object.fromEntries(Object.entries(s).map(([o,a])=>[e+o,a])):s);return[n,i]}):t}function EP(t){if(t<1)return{get:()=>{},set:()=>{}};let e=0,n=new Map,r=new Map;function i(s,o){n.set(s,o),e++,e>t&&(e=0,r=n,n=new Map)}return{get(s){let o=n.get(s);if(o!==void 0)return o;if((o=r.get(s))!==void 0)return i(s,o),o},set(s,o){n.has(s)?n.set(s,o):i(s,o)}}}const Wb="!";function bP(t){const e=t.separator,n=e.length===1,r=e[0],i=e.length;return function(o){const a=[];let l=0,c=0,h;for(let I=0;I<o.length;I++){let R=o[I];if(l===0){if(R===r&&(n||o.slice(I,I+i)===e)){a.push(o.slice(c,I)),c=I+i;continue}if(R==="/"){h=I;continue}}R==="["?l++:R==="]"&&l--}const f=a.length===0?o:o.substring(c),p=f.startsWith(Wb),_=p?f.substring(1):f,w=h&&h>c?h-c:void 0;return{modifiers:a,hasImportantModifier:p,baseClassName:_,maybePostfixModifierPosition:w}}}function TP(t){if(t.length<=1)return t;const e=[];let n=[];return t.forEach(r=>{r[0]==="["?(e.push(...n.sort(),r),n=[]):n.push(r)}),e.push(...n.sort()),e}function CP(t){return{cache:EP(t.cacheSize),splitModifiers:bP(t),...gP(t)}}const IP=/\s+/;function SP(t,e){const{splitModifiers:n,getClassGroupId:r,getConflictingClassGroupIds:i}=e,s=new Set;return t.trim().split(IP).map(o=>{const{modifiers:a,hasImportantModifier:l,baseClassName:c,maybePostfixModifierPosition:h}=n(o);let f=r(h?c.substring(0,h):c),p=!!h;if(!f){if(!h)return{isTailwindClass:!1,originalClassName:o};if(f=r(c),!f)return{isTailwindClass:!1,originalClassName:o};p=!1}const _=TP(a).join(":");return{isTailwindClass:!0,modifierId:l?_+Wb:_,classGroupId:f,originalClassName:o,hasPostfixModifier:p}}).reverse().filter(o=>{if(!o.isTailwindClass)return!0;const{modifierId:a,classGroupId:l,hasPostfixModifier:c}=o,h=a+l;return s.has(h)?!1:(s.add(h),i(l,c).forEach(f=>s.add(a+f)),!0)}).reverse().map(o=>o.originalClassName).join(" ")}function AP(){let t=0,e,n,r="";for(;t<arguments.length;)(e=arguments[t++])&&(n=qb(e))&&(r&&(r+=" "),r+=n);return r}function qb(t){if(typeof t=="string")return t;let e,n="";for(let r=0;r<t.length;r++)t[r]&&(e=qb(t[r]))&&(n&&(n+=" "),n+=e);return n}function xP(t,...e){let n,r,i,s=o;function o(l){const c=e.reduce((h,f)=>f(h),t());return n=CP(c),r=n.cache.get,i=n.cache.set,s=a,a(l)}function a(l){const c=r(l);if(c)return c;const h=SP(l,n);return i(l,h),h}return function(){return s(AP.apply(null,arguments))}}function Ve(t){const e=n=>n[t]||[];return e.isThemeGetter=!0,e}const Gb=/^\[(?:([a-z-]+):)?(.+)\]$/i,kP=/^\d+\/\d+$/,PP=new Set(["px","full","screen"]),RP=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,NP=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,OP=/^(rgba?|hsla?|hwb|(ok)?(lab|lch))\(.+\)$/,LP=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,DP=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/;function Ar(t){return Ss(t)||PP.has(t)||kP.test(t)}function di(t){return Ca(t,"length",BP)}function Ss(t){return!!t&&!Number.isNaN(Number(t))}function wc(t){return Ca(t,"number",Ss)}function ol(t){return!!t&&Number.isInteger(Number(t))}function MP(t){return t.endsWith("%")&&Ss(t.slice(0,-1))}function de(t){return Gb.test(t)}function fi(t){return RP.test(t)}const UP=new Set(["length","size","percentage"]);function VP(t){return Ca(t,UP,Kb)}function $P(t){return Ca(t,"position",Kb)}const FP=new Set(["image","url"]);function jP(t){return Ca(t,FP,WP)}function zP(t){return Ca(t,"",HP)}function al(){return!0}function Ca(t,e,n){const r=Gb.exec(t);return r?r[1]?typeof e=="string"?r[1]===e:e.has(r[1]):n(r[2]):!1}function BP(t){return NP.test(t)&&!OP.test(t)}function Kb(){return!1}function HP(t){return LP.test(t)}function WP(t){return DP.test(t)}function qP(){const t=Ve("colors"),e=Ve("spacing"),n=Ve("blur"),r=Ve("brightness"),i=Ve("borderColor"),s=Ve("borderRadius"),o=Ve("borderSpacing"),a=Ve("borderWidth"),l=Ve("contrast"),c=Ve("grayscale"),h=Ve("hueRotate"),f=Ve("invert"),p=Ve("gap"),_=Ve("gradientColorStops"),w=Ve("gradientColorStopPositions"),I=Ve("inset"),R=Ve("margin"),C=Ve("opacity"),E=Ve("padding"),S=Ve("saturate"),D=Ve("scale"),F=Ve("sepia"),z=Ve("skew"),g=Ve("space"),y=Ve("translate"),T=()=>["auto","contain","none"],A=()=>["auto","hidden","clip","visible","scroll"],k=()=>["auto",de,e],P=()=>[de,e],x=()=>["",Ar,di],Ie=()=>["auto",Ss,de],it=()=>["bottom","center","left","left-bottom","left-top","right","right-bottom","right-top","top"],Wt=()=>["solid","dashed","dotted","double","none"],wt=()=>["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],H=()=>["start","end","center","between","around","evenly","stretch"],ee=()=>["","0",de],re=()=>["auto","avoid","all","avoid-page","page","left","right","column"],_e=()=>[Ss,wc],he=()=>[Ss,de];return{cacheSize:500,separator:":",theme:{colors:[al],spacing:[Ar,di],blur:["none","",fi,de],brightness:_e(),borderColor:[t],borderRadius:["none","","full",fi,de],borderSpacing:P(),borderWidth:x(),contrast:_e(),grayscale:ee(),hueRotate:he(),invert:ee(),gap:P(),gradientColorStops:[t],gradientColorStopPositions:[MP,di],inset:k(),margin:k(),opacity:_e(),padding:P(),saturate:_e(),scale:_e(),sepia:ee(),skew:he(),space:P(),translate:P()},classGroups:{aspect:[{aspect:["auto","square","video",de]}],container:["container"],columns:[{columns:[fi]}],"break-after":[{"break-after":re()}],"break-before":[{"break-before":re()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:[...it(),de]}],overflow:[{overflow:A()}],"overflow-x":[{"overflow-x":A()}],"overflow-y":[{"overflow-y":A()}],overscroll:[{overscroll:T()}],"overscroll-x":[{"overscroll-x":T()}],"overscroll-y":[{"overscroll-y":T()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:[I]}],"inset-x":[{"inset-x":[I]}],"inset-y":[{"inset-y":[I]}],start:[{start:[I]}],end:[{end:[I]}],top:[{top:[I]}],right:[{right:[I]}],bottom:[{bottom:[I]}],left:[{left:[I]}],visibility:["visible","invisible","collapse"],z:[{z:["auto",ol,de]}],basis:[{basis:k()}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["wrap","wrap-reverse","nowrap"]}],flex:[{flex:["1","auto","initial","none",de]}],grow:[{grow:ee()}],shrink:[{shrink:ee()}],order:[{order:["first","last","none",ol,de]}],"grid-cols":[{"grid-cols":[al]}],"col-start-end":[{col:["auto",{span:["full",ol,de]},de]}],"col-start":[{"col-start":Ie()}],"col-end":[{"col-end":Ie()}],"grid-rows":[{"grid-rows":[al]}],"row-start-end":[{row:["auto",{span:[ol,de]},de]}],"row-start":[{"row-start":Ie()}],"row-end":[{"row-end":Ie()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":["auto","min","max","fr",de]}],"auto-rows":[{"auto-rows":["auto","min","max","fr",de]}],gap:[{gap:[p]}],"gap-x":[{"gap-x":[p]}],"gap-y":[{"gap-y":[p]}],"justify-content":[{justify:["normal",...H()]}],"justify-items":[{"justify-items":["start","end","center","stretch"]}],"justify-self":[{"justify-self":["auto","start","end","center","stretch"]}],"align-content":[{content:["normal",...H(),"baseline"]}],"align-items":[{items:["start","end","center","baseline","stretch"]}],"align-self":[{self:["auto","start","end","center","stretch","baseline"]}],"place-content":[{"place-content":[...H(),"baseline"]}],"place-items":[{"place-items":["start","end","center","baseline","stretch"]}],"place-self":[{"place-self":["auto","start","end","center","stretch"]}],p:[{p:[E]}],px:[{px:[E]}],py:[{py:[E]}],ps:[{ps:[E]}],pe:[{pe:[E]}],pt:[{pt:[E]}],pr:[{pr:[E]}],pb:[{pb:[E]}],pl:[{pl:[E]}],m:[{m:[R]}],mx:[{mx:[R]}],my:[{my:[R]}],ms:[{ms:[R]}],me:[{me:[R]}],mt:[{mt:[R]}],mr:[{mr:[R]}],mb:[{mb:[R]}],ml:[{ml:[R]}],"space-x":[{"space-x":[g]}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":[g]}],"space-y-reverse":["space-y-reverse"],w:[{w:["auto","min","max","fit","svw","lvw","dvw",de,e]}],"min-w":[{"min-w":[de,e,"min","max","fit"]}],"max-w":[{"max-w":[de,e,"none","full","min","max","fit","prose",{screen:[fi]},fi]}],h:[{h:[de,e,"auto","min","max","fit","svh","lvh","dvh"]}],"min-h":[{"min-h":[de,e,"min","max","fit","svh","lvh","dvh"]}],"max-h":[{"max-h":[de,e,"min","max","fit","svh","lvh","dvh"]}],size:[{size:[de,e,"auto","min","max","fit"]}],"font-size":[{text:["base",fi,di]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:["thin","extralight","light","normal","medium","semibold","bold","extrabold","black",wc]}],"font-family":[{font:[al]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractons"],tracking:[{tracking:["tighter","tight","normal","wide","wider","widest",de]}],"line-clamp":[{"line-clamp":["none",Ss,wc]}],leading:[{leading:["none","tight","snug","normal","relaxed","loose",Ar,de]}],"list-image":[{"list-image":["none",de]}],"list-style-type":[{list:["none","disc","decimal",de]}],"list-style-position":[{list:["inside","outside"]}],"placeholder-color":[{placeholder:[t]}],"placeholder-opacity":[{"placeholder-opacity":[C]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"text-color":[{text:[t]}],"text-opacity":[{"text-opacity":[C]}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[...Wt(),"wavy"]}],"text-decoration-thickness":[{decoration:["auto","from-font",Ar,di]}],"underline-offset":[{"underline-offset":["auto",Ar,de]}],"text-decoration-color":[{decoration:[t]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:P()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",de]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",de]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-opacity":[{"bg-opacity":[C]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:[...it(),$P]}],"bg-repeat":[{bg:["no-repeat",{repeat:["","x","y","round","space"]}]}],"bg-size":[{bg:["auto","cover","contain",VP]}],"bg-image":[{bg:["none",{"gradient-to":["t","tr","r","br","b","bl","l","tl"]},jP]}],"bg-color":[{bg:[t]}],"gradient-from-pos":[{from:[w]}],"gradient-via-pos":[{via:[w]}],"gradient-to-pos":[{to:[w]}],"gradient-from":[{from:[_]}],"gradient-via":[{via:[_]}],"gradient-to":[{to:[_]}],rounded:[{rounded:[s]}],"rounded-s":[{"rounded-s":[s]}],"rounded-e":[{"rounded-e":[s]}],"rounded-t":[{"rounded-t":[s]}],"rounded-r":[{"rounded-r":[s]}],"rounded-b":[{"rounded-b":[s]}],"rounded-l":[{"rounded-l":[s]}],"rounded-ss":[{"rounded-ss":[s]}],"rounded-se":[{"rounded-se":[s]}],"rounded-ee":[{"rounded-ee":[s]}],"rounded-es":[{"rounded-es":[s]}],"rounded-tl":[{"rounded-tl":[s]}],"rounded-tr":[{"rounded-tr":[s]}],"rounded-br":[{"rounded-br":[s]}],"rounded-bl":[{"rounded-bl":[s]}],"border-w":[{border:[a]}],"border-w-x":[{"border-x":[a]}],"border-w-y":[{"border-y":[a]}],"border-w-s":[{"border-s":[a]}],"border-w-e":[{"border-e":[a]}],"border-w-t":[{"border-t":[a]}],"border-w-r":[{"border-r":[a]}],"border-w-b":[{"border-b":[a]}],"border-w-l":[{"border-l":[a]}],"border-opacity":[{"border-opacity":[C]}],"border-style":[{border:[...Wt(),"hidden"]}],"divide-x":[{"divide-x":[a]}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":[a]}],"divide-y-reverse":["divide-y-reverse"],"divide-opacity":[{"divide-opacity":[C]}],"divide-style":[{divide:Wt()}],"border-color":[{border:[i]}],"border-color-x":[{"border-x":[i]}],"border-color-y":[{"border-y":[i]}],"border-color-t":[{"border-t":[i]}],"border-color-r":[{"border-r":[i]}],"border-color-b":[{"border-b":[i]}],"border-color-l":[{"border-l":[i]}],"divide-color":[{divide:[i]}],"outline-style":[{outline:["",...Wt()]}],"outline-offset":[{"outline-offset":[Ar,de]}],"outline-w":[{outline:[Ar,di]}],"outline-color":[{outline:[t]}],"ring-w":[{ring:x()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:[t]}],"ring-opacity":[{"ring-opacity":[C]}],"ring-offset-w":[{"ring-offset":[Ar,di]}],"ring-offset-color":[{"ring-offset":[t]}],shadow:[{shadow:["","inner","none",fi,zP]}],"shadow-color":[{shadow:[al]}],opacity:[{opacity:[C]}],"mix-blend":[{"mix-blend":[...wt(),"plus-lighter","plus-darker"]}],"bg-blend":[{"bg-blend":wt()}],filter:[{filter:["","none"]}],blur:[{blur:[n]}],brightness:[{brightness:[r]}],contrast:[{contrast:[l]}],"drop-shadow":[{"drop-shadow":["","none",fi,de]}],grayscale:[{grayscale:[c]}],"hue-rotate":[{"hue-rotate":[h]}],invert:[{invert:[f]}],saturate:[{saturate:[S]}],sepia:[{sepia:[F]}],"backdrop-filter":[{"backdrop-filter":["","none"]}],"backdrop-blur":[{"backdrop-blur":[n]}],"backdrop-brightness":[{"backdrop-brightness":[r]}],"backdrop-contrast":[{"backdrop-contrast":[l]}],"backdrop-grayscale":[{"backdrop-grayscale":[c]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[h]}],"backdrop-invert":[{"backdrop-invert":[f]}],"backdrop-opacity":[{"backdrop-opacity":[C]}],"backdrop-saturate":[{"backdrop-saturate":[S]}],"backdrop-sepia":[{"backdrop-sepia":[F]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":[o]}],"border-spacing-x":[{"border-spacing-x":[o]}],"border-spacing-y":[{"border-spacing-y":[o]}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["none","all","","colors","opacity","shadow","transform",de]}],duration:[{duration:he()}],ease:[{ease:["linear","in","out","in-out",de]}],delay:[{delay:he()}],animate:[{animate:["none","spin","ping","pulse","bounce",de]}],transform:[{transform:["","gpu","none"]}],scale:[{scale:[D]}],"scale-x":[{"scale-x":[D]}],"scale-y":[{"scale-y":[D]}],rotate:[{rotate:[ol,de]}],"translate-x":[{"translate-x":[y]}],"translate-y":[{"translate-y":[y]}],"skew-x":[{"skew-x":[z]}],"skew-y":[{"skew-y":[z]}],"transform-origin":[{origin:["center","top","top-right","right","bottom-right","bottom","bottom-left","left","top-left",de]}],accent:[{accent:["auto",t]}],appearance:[{appearance:["none","auto"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",de]}],"caret-color":[{caret:[t]}],"pointer-events":[{"pointer-events":["none","auto"]}],resize:[{resize:["none","y","x",""]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":P()}],"scroll-mx":[{"scroll-mx":P()}],"scroll-my":[{"scroll-my":P()}],"scroll-ms":[{"scroll-ms":P()}],"scroll-me":[{"scroll-me":P()}],"scroll-mt":[{"scroll-mt":P()}],"scroll-mr":[{"scroll-mr":P()}],"scroll-mb":[{"scroll-mb":P()}],"scroll-ml":[{"scroll-ml":P()}],"scroll-p":[{"scroll-p":P()}],"scroll-px":[{"scroll-px":P()}],"scroll-py":[{"scroll-py":P()}],"scroll-ps":[{"scroll-ps":P()}],"scroll-pe":[{"scroll-pe":P()}],"scroll-pt":[{"scroll-pt":P()}],"scroll-pr":[{"scroll-pr":P()}],"scroll-pb":[{"scroll-pb":P()}],"scroll-pl":[{"scroll-pl":P()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",de]}],fill:[{fill:[t,"none"]}],"stroke-w":[{stroke:[Ar,di,wc]}],stroke:[{stroke:[t,"none"]}],sr:["sr-only","not-sr-only"],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]}}}const GP=xP(qP);function _n(...t){return GP(mP(t))}function ia(){return ia=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},ia.apply(null,arguments)}function KP(t,e){typeof t=="function"?t(e):t!=null&&(t.current=e)}function QP(...t){return e=>t.forEach(n=>KP(n,e))}const Vg=L.forwardRef((t,e)=>{const{children:n,...r}=t,i=L.Children.toArray(n),s=i.find(YP);if(s){const o=s.props.children,a=i.map(l=>l===s?L.Children.count(o)>1?L.Children.only(null):L.isValidElement(o)?o.props.children:null:l);return L.createElement(rm,ia({},r,{ref:e}),L.isValidElement(o)?L.cloneElement(o,void 0,a):null)}return L.createElement(rm,ia({},r,{ref:e}),n)});Vg.displayName="Slot";const rm=L.forwardRef((t,e)=>{const{children:n,...r}=t;return L.isValidElement(n)?L.cloneElement(n,{...JP(r,n.props),ref:e?QP(e,n.ref):n.ref}):L.Children.count(n)>1?L.Children.only(null):null});rm.displayName="SlotClone";const XP=({children:t})=>L.createElement(L.Fragment,null,t);function YP(t){return L.isValidElement(t)&&t.type===XP}function JP(t,e){const n={...e};for(const r in e){const i=t[r],s=e[r];/^on[A-Z]/.test(r)?i&&s?n[r]=(...a)=>{s(...a),i(...a)}:i&&(n[r]=i):r==="style"?n[r]={...i,...s}:r==="className"&&(n[r]=[i,s].filter(Boolean).join(" "))}return{...t,...n}}function Qb(t){var e,n,r="";if(typeof t=="string"||typeof t=="number")r+=t;else if(typeof t=="object")if(Array.isArray(t))for(e=0;e<t.length;e++)t[e]&&(n=Qb(t[e]))&&(r&&(r+=" "),r+=n);else for(e in t)t[e]&&(r&&(r+=" "),r+=e);return r}function ZP(){for(var t,e,n=0,r="";n<arguments.length;)(t=arguments[n++])&&(e=Qb(t))&&(r&&(r+=" "),r+=e);return r}const E0=t=>typeof t=="boolean"?"".concat(t):t===0?"0":t,b0=ZP,Xb=(t,e)=>n=>{var r;if((e==null?void 0:e.variants)==null)return b0(t,n==null?void 0:n.class,n==null?void 0:n.className);const{variants:i,defaultVariants:s}=e,o=Object.keys(i).map(c=>{const h=n==null?void 0:n[c],f=s==null?void 0:s[c];if(h===null)return null;const p=E0(h)||E0(f);return i[c][p]}),a=n&&Object.entries(n).reduce((c,h)=>{let[f,p]=h;return p===void 0||(c[f]=p),c},{}),l=e==null||(r=e.compoundVariants)===null||r===void 0?void 0:r.reduce((c,h)=>{let{class:f,className:p,..._}=h;return Object.entries(_).every(w=>{let[I,R]=w;return Array.isArray(R)?R.includes({...s,...a}[I]):{...s,...a}[I]===R})?[...c,f,p]:c},[]);return b0(t,o,l,n==null?void 0:n.class,n==null?void 0:n.className)},im=Xb("inline-flex items-center justify-center whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),mr=L.forwardRef(({className:t,variant:e,size:n,asChild:r=!1,...i},s)=>{const o=r?Vg:"button";return b.jsx(o,{className:_n(im({variant:e,size:n,className:t})),ref:s,...i})});mr.displayName="Button";const eR="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20fill='none'%20viewBox='0%200%2024%2024'%20stroke-width='1.5'%20stroke='currentColor'%20class='size-6'%3e%3cpath%20stroke-linecap='round'%20stroke-linejoin='round'%20d='m2.25%2012%208.954-8.955c.44-.439%201.152-.439%201.591%200L21.75%2012M4.5%209.75v10.125c0%20.621.504%201.125%201.125%201.125H9.75v-4.875c0-.621.504-1.125%201.125-1.125h2.25c.621%200%201.125.504%201.125%201.125V21h4.125c.621%200%201.125-.504%201.125-1.125V9.75M8.25%2021h8.25'%20/%3e%3c/svg%3e",tR="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20fill='none'%20viewBox='0%200%2024%2024'%20stroke-width='1.5'%20stroke='currentColor'%20class='size-6'%3e%3cpath%20stroke-linecap='round'%20stroke-linejoin='round'%20d='M12%204.5v15m7.5-7.5h-15'%20/%3e%3c/svg%3e",nR="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20fill='none'%20viewBox='0%200%2024%2024'%20stroke-width='1.5'%20stroke='currentColor'%20class='size-6'%3e%3cpath%20stroke-linecap='round'%20stroke-linejoin='round'%20d='M6.827%206.175A2.31%202.31%200%200%201%205.186%207.23c-.38.054-.757.112-1.134.175C2.999%207.58%202.25%208.507%202.25%209.574V18a2.25%202.25%200%200%200%202.25%202.25h15A2.25%202.25%200%200%200%2021.75%2018V9.574c0-1.067-.75-1.994-1.802-2.169a47.865%2047.865%200%200%200-1.134-.175%202.31%202.31%200%200%201-1.64-1.055l-.822-1.316a2.192%202.192%200%200%200-1.736-1.039%2048.774%2048.774%200%200%200-5.232%200%202.192%202.192%200%200%200-1.736%201.039l-.821%201.316Z'%20/%3e%3cpath%20stroke-linecap='round'%20stroke-linejoin='round'%20d='M16.5%2012.75a4.5%204.5%200%201%201-9%200%204.5%204.5%200%200%201%209%200ZM18.75%2010.5h.008v.008h-.008V10.5Z'%20/%3e%3c/svg%3e",rR="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20fill='none'%20viewBox='0%200%2024%2024'%20stroke-width='1.5'%20stroke='currentColor'%20class='size-6'%3e%3cpath%20stroke-linecap='round'%20stroke-linejoin='round'%20d='M17.982%2018.725A7.488%207.488%200%200%200%2012%2015.75a7.488%207.488%200%200%200-5.982%202.975m11.963%200a9%209%200%201%200-11.963%200m11.963%200A8.966%208.966%200%200%201%2012%2021a8.966%208.966%200%200%201-5.982-2.275M15%209.75a3%203%200%201%201-6%200%203%203%200%200%201%206%200Z'%20/%3e%3c/svg%3e",iR="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20fill='none'%20viewBox='0%200%2024%2024'%20stroke-width='1.5'%20stroke='currentColor'%20class='size-6'%3e%3cpath%20stroke-linecap='round'%20stroke-linejoin='round'%20d='M14.857%2017.082a23.848%2023.848%200%200%200%205.454-1.31A8.967%208.967%200%200%201%2018%209.75V9A6%206%200%200%200%206%209v.75a8.967%208.967%200%200%201-2.312%206.022c1.733.64%203.56%201.085%205.455%201.31m5.714%200a24.255%2024.255%200%200%201-5.714%200m5.714%200a3%203%200%201%201-5.714%200'%20/%3e%3c/svg%3e",sR="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20fill='none'%20viewBox='0%200%2024%2024'%20stroke-width='1.5'%20stroke='currentColor'%20class='size-6'%3e%3cpath%20stroke-linecap='round'%20stroke-linejoin='round'%20d='M6%2012%203.269%203.125A59.769%2059.769%200%200%201%2021.485%2012%2059.768%2059.768%200%200%201%203.27%2020.875L5.999%2012Zm0%200h7.5'%20/%3e%3c/svg%3e",oR="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20fill='none'%20viewBox='0%200%2024%2024'%20stroke-width='1.5'%20stroke='currentColor'%20class='size-6'%3e%3cpath%20stroke-linecap='round'%20stroke-linejoin='round'%20d='M10.343%203.94c.09-.542.56-.94%201.11-.94h1.093c.55%200%201.02.398%201.11.94l.149.894c.07.424.384.764.78.93.398.164.855.142%201.205-.108l.737-.527a1.125%201.125%200%200%201%201.45.12l.773.774c.39.389.44%201.002.12%201.45l-.527.737c-.25.35-.272.806-.107%201.204.165.397.505.71.93.78l.893.15c.543.09.94.559.94%201.109v1.094c0%20.55-.397%201.02-.94%201.11l-.894.149c-.424.07-.764.383-.929.78-.165.398-.143.854.107%201.204l.527.738c.32.447.269%201.06-.12%201.45l-.774.773a1.125%201.125%200%200%201-1.449.12l-.738-.527c-.35-.25-.806-.272-1.203-.107-.398.165-.71.505-.781.929l-.149.894c-.09.542-.56.94-1.11.94h-1.094c-.55%200-1.019-.398-1.11-.94l-.148-.894c-.071-.424-.384-.764-.781-.93-.398-.164-.854-.142-1.204.108l-.738.527c-.447.32-1.06.269-1.45-.12l-.773-.774a1.125%201.125%200%200%201-.12-1.45l.527-.737c.25-.35.272-.806.108-1.204-.165-.397-.506-.71-.93-.78l-.894-.15c-.542-.09-.94-.56-.94-1.109v-1.094c0-.55.398-1.02.94-1.11l.894-.149c.424-.07.765-.383.93-.78.165-.398.143-.854-.108-1.204l-.526-.738a1.125%201.125%200%200%201%20.12-1.45l.773-.773a1.125%201.125%200%200%201%201.45-.12l.737.527c.35.25.807.272%201.204.107.397-.165.71-.505.78-.929l.15-.894Z'%20/%3e%3cpath%20stroke-linecap='round'%20stroke-linejoin='round'%20d='M15%2012a3%203%200%201%201-6%200%203%203%200%200%201%206%200Z'%20/%3e%3c/svg%3e",aR=[{name:"Home",link:"/edelgram/",icon:eR},{name:"Add photos",link:"/edelgram/createpost",icon:tR},{name:"My photos",link:"/edelgram/myphotos",icon:nR},{name:"Profile",link:"/edelgram/profile",icon:rR},{name:"Notifications",link:"#",icon:iR},{name:"Direct",link:"#",icon:sR},{name:"Settings",link:"#",icon:oR}];var T0={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Yb=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let i=t.charCodeAt(r);i<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=i&63|128):(i&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=i&63|128):(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=i&63|128)}return e},lR=function(t){const e=[];let n=0,r=0;for(;n<t.length;){const i=t[n++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){const s=t[n++];e[r++]=String.fromCharCode((i&31)<<6|s&63)}else if(i>239&&i<365){const s=t[n++],o=t[n++],a=t[n++],l=((i&7)<<18|(s&63)<<12|(o&63)<<6|a&63)-65536;e[r++]=String.fromCharCode(55296+(l>>10)),e[r++]=String.fromCharCode(56320+(l&1023))}else{const s=t[n++],o=t[n++];e[r++]=String.fromCharCode((i&15)<<12|(s&63)<<6|o&63)}}return e.join("")},Jb={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<t.length;i+=3){const s=t[i],o=i+1<t.length,a=o?t[i+1]:0,l=i+2<t.length,c=l?t[i+2]:0,h=s>>2,f=(s&3)<<4|a>>4;let p=(a&15)<<2|c>>6,_=c&63;l||(_=64,o||(p=64)),r.push(n[h],n[f],n[p],n[_])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(Yb(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):lR(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<t.length;){const s=n[t.charAt(i++)],a=i<t.length?n[t.charAt(i)]:0;++i;const c=i<t.length?n[t.charAt(i)]:64;++i;const f=i<t.length?n[t.charAt(i)]:64;if(++i,s==null||a==null||c==null||f==null)throw new uR;const p=s<<2|a>>4;if(r.push(p),c!==64){const _=a<<4&240|c>>2;if(r.push(_),f!==64){const w=c<<6&192|f;r.push(w)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class uR extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const cR=function(t){const e=Yb(t);return Jb.encodeByteArray(e,!0)},Ah=function(t){return cR(t).replace(/\./g,"")},Zb=function(t){try{return Jb.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hR(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dR=()=>hR().__FIREBASE_DEFAULTS__,fR=()=>{if(typeof process>"u"||typeof T0>"u")return;const t=T0.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},pR=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&Zb(t[1]);return e&&JSON.parse(e)},dd=()=>{try{return dR()||fR()||pR()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},eT=t=>{var e,n;return(n=(e=dd())===null||e===void 0?void 0:e.emulatorHosts)===null||n===void 0?void 0:n[t]},mR=t=>{const e=eT(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),r]:[e.substring(0,n),r]},tT=()=>{var t;return(t=dd())===null||t===void 0?void 0:t.config},nT=t=>{var e;return(e=dd())===null||e===void 0?void 0:e[`_${t}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gR{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yR(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},r=e||"demo-project",i=t.iat||0,s=t.sub||t.user_id;if(!s)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:i,exp:i+3600,auth_time:i,sub:s,user_id:s,firebase:{sign_in_provider:"custom",identities:{}}},t);return[Ah(JSON.stringify(n)),Ah(JSON.stringify(o)),""].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Lt(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function vR(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Lt())}function _R(){var t;const e=(t=dd())===null||t===void 0?void 0:t.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function wR(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function ER(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function bR(){const t=Lt();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function TR(){return!_R()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function CR(){try{return typeof indexedDB=="object"}catch{return!1}}function IR(){return new Promise((t,e)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},i.onupgradeneeded=()=>{n=!1},i.onerror=()=>{var s;e(((s=i.error)===null||s===void 0?void 0:s.message)||"")}}catch(n){e(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const SR="FirebaseError";class ei extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=SR,Object.setPrototypeOf(this,ei.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,bu.prototype.create)}}class bu{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){const r=n[0]||{},i=`${this.service}/${e}`,s=this.errors[e],o=s?AR(s,r):"Error",a=`${this.serviceName}: ${o} (${i}).`;return new ei(i,a,r)}}function AR(t,e){return t.replace(xR,(n,r)=>{const i=e[r];return i!=null?String(i):`<${r}?>`})}const xR=/\{\$([^}]+)}/g;function kR(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function xh(t,e){if(t===e)return!0;const n=Object.keys(t),r=Object.keys(e);for(const i of n){if(!r.includes(i))return!1;const s=t[i],o=e[i];if(C0(s)&&C0(o)){if(!xh(s,o))return!1}else if(s!==o)return!1}for(const i of r)if(!n.includes(i))return!1;return!0}function C0(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Tu(t){const e=[];for(const[n,r]of Object.entries(t))Array.isArray(r)?r.forEach(i=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(i))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function yl(t){const e={};return t.replace(/^\?/,"").split("&").forEach(r=>{if(r){const[i,s]=r.split("=");e[decodeURIComponent(i)]=decodeURIComponent(s)}}),e}function vl(t){const e=t.indexOf("?");if(!e)return"";const n=t.indexOf("#",e);return t.substring(e,n>0?n:void 0)}function PR(t,e){const n=new RR(t,e);return n.subscribe.bind(n)}class RR{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,r){let i;if(e===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");NR(e,["next","error","complete"])?i=e:i={next:e,error:n,complete:r},i.next===void 0&&(i.next=jf),i.error===void 0&&(i.error=jf),i.complete===void 0&&(i.complete=jf);const s=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),s}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function NR(t,e){if(typeof t!="object"||t===null)return!1;for(const n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function jf(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gt(t){return t&&t._delegate?t._delegate:t}class Fs{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ws="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OR{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const r=new gR;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const i=this.getOrInitializeService({instanceIdentifier:n});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){var n;const r=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),i=(n=e==null?void 0:e.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(s){if(i)return null;throw s}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(DR(e))try{this.getOrInitializeService({instanceIdentifier:ws})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const i=this.normalizeInstanceIdentifier(n);try{const s=this.getOrInitializeService({instanceIdentifier:i});r.resolve(s)}catch{}}}}clearInstance(e=ws){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=ws){return this.instances.has(e)}getOptions(e=ws){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const i=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[s,o]of this.instancesDeferred.entries()){const a=this.normalizeInstanceIdentifier(s);r===a&&o.resolve(i)}return i}onInit(e,n){var r;const i=this.normalizeInstanceIdentifier(n),s=(r=this.onInitCallbacks.get(i))!==null&&r!==void 0?r:new Set;s.add(e),this.onInitCallbacks.set(i,s);const o=this.instances.get(i);return o&&e(o,i),()=>{s.delete(e)}}invokeOnInitCallbacks(e,n){const r=this.onInitCallbacks.get(n);if(r)for(const i of r)try{i(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:LR(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=ws){return this.component?this.component.multipleInstances?e:ws:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function LR(t){return t===ws?void 0:t}function DR(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MR{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new OR(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Ee;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(Ee||(Ee={}));const UR={debug:Ee.DEBUG,verbose:Ee.VERBOSE,info:Ee.INFO,warn:Ee.WARN,error:Ee.ERROR,silent:Ee.SILENT},VR=Ee.INFO,$R={[Ee.DEBUG]:"log",[Ee.VERBOSE]:"log",[Ee.INFO]:"info",[Ee.WARN]:"warn",[Ee.ERROR]:"error"},FR=(t,e,...n)=>{if(e<t.logLevel)return;const r=new Date().toISOString(),i=$R[e];if(i)console[i](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class $g{constructor(e){this.name=e,this._logLevel=VR,this._logHandler=FR,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Ee))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?UR[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Ee.DEBUG,...e),this._logHandler(this,Ee.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Ee.VERBOSE,...e),this._logHandler(this,Ee.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Ee.INFO,...e),this._logHandler(this,Ee.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Ee.WARN,...e),this._logHandler(this,Ee.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Ee.ERROR,...e),this._logHandler(this,Ee.ERROR,...e)}}const jR=(t,e)=>e.some(n=>t instanceof n);let I0,S0;function zR(){return I0||(I0=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function BR(){return S0||(S0=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const rT=new WeakMap,sm=new WeakMap,iT=new WeakMap,zf=new WeakMap,Fg=new WeakMap;function HR(t){const e=new Promise((n,r)=>{const i=()=>{t.removeEventListener("success",s),t.removeEventListener("error",o)},s=()=>{n(Mi(t.result)),i()},o=()=>{r(t.error),i()};t.addEventListener("success",s),t.addEventListener("error",o)});return e.then(n=>{n instanceof IDBCursor&&rT.set(n,t)}).catch(()=>{}),Fg.set(e,t),e}function WR(t){if(sm.has(t))return;const e=new Promise((n,r)=>{const i=()=>{t.removeEventListener("complete",s),t.removeEventListener("error",o),t.removeEventListener("abort",o)},s=()=>{n(),i()},o=()=>{r(t.error||new DOMException("AbortError","AbortError")),i()};t.addEventListener("complete",s),t.addEventListener("error",o),t.addEventListener("abort",o)});sm.set(t,e)}let om={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return sm.get(t);if(e==="objectStoreNames")return t.objectStoreNames||iT.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Mi(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function qR(t){om=t(om)}function GR(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const r=t.call(Bf(this),e,...n);return iT.set(r,e.sort?e.sort():[e]),Mi(r)}:BR().includes(t)?function(...e){return t.apply(Bf(this),e),Mi(rT.get(this))}:function(...e){return Mi(t.apply(Bf(this),e))}}function KR(t){return typeof t=="function"?GR(t):(t instanceof IDBTransaction&&WR(t),jR(t,zR())?new Proxy(t,om):t)}function Mi(t){if(t instanceof IDBRequest)return HR(t);if(zf.has(t))return zf.get(t);const e=KR(t);return e!==t&&(zf.set(t,e),Fg.set(e,t)),e}const Bf=t=>Fg.get(t);function QR(t,e,{blocked:n,upgrade:r,blocking:i,terminated:s}={}){const o=indexedDB.open(t,e),a=Mi(o);return r&&o.addEventListener("upgradeneeded",l=>{r(Mi(o.result),l.oldVersion,l.newVersion,Mi(o.transaction),l)}),n&&o.addEventListener("blocked",l=>n(l.oldVersion,l.newVersion,l)),a.then(l=>{s&&l.addEventListener("close",()=>s()),i&&l.addEventListener("versionchange",c=>i(c.oldVersion,c.newVersion,c))}).catch(()=>{}),a}const XR=["get","getKey","getAll","getAllKeys","count"],YR=["put","add","delete","clear"],Hf=new Map;function A0(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(Hf.get(e))return Hf.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,i=YR.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(i||XR.includes(n)))return;const s=async function(o,...a){const l=this.transaction(o,i?"readwrite":"readonly");let c=l.store;return r&&(c=c.index(a.shift())),(await Promise.all([c[n](...a),i&&l.done]))[0]};return Hf.set(e,s),s}qR(t=>({...t,get:(e,n,r)=>A0(e,n)||t.get(e,n,r),has:(e,n)=>!!A0(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JR{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(ZR(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function ZR(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const am="@firebase/app",x0="0.10.5";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const js=new $g("@firebase/app"),eN="@firebase/app-compat",tN="@firebase/analytics-compat",nN="@firebase/analytics",rN="@firebase/app-check-compat",iN="@firebase/app-check",sN="@firebase/auth",oN="@firebase/auth-compat",aN="@firebase/database",lN="@firebase/database-compat",uN="@firebase/functions",cN="@firebase/functions-compat",hN="@firebase/installations",dN="@firebase/installations-compat",fN="@firebase/messaging",pN="@firebase/messaging-compat",mN="@firebase/performance",gN="@firebase/performance-compat",yN="@firebase/remote-config",vN="@firebase/remote-config-compat",_N="@firebase/storage",wN="@firebase/storage-compat",EN="@firebase/firestore",bN="@firebase/vertexai-preview",TN="@firebase/firestore-compat",CN="firebase",IN="10.12.2";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lm="[DEFAULT]",SN={[am]:"fire-core",[eN]:"fire-core-compat",[nN]:"fire-analytics",[tN]:"fire-analytics-compat",[iN]:"fire-app-check",[rN]:"fire-app-check-compat",[sN]:"fire-auth",[oN]:"fire-auth-compat",[aN]:"fire-rtdb",[lN]:"fire-rtdb-compat",[uN]:"fire-fn",[cN]:"fire-fn-compat",[hN]:"fire-iid",[dN]:"fire-iid-compat",[fN]:"fire-fcm",[pN]:"fire-fcm-compat",[mN]:"fire-perf",[gN]:"fire-perf-compat",[yN]:"fire-rc",[vN]:"fire-rc-compat",[_N]:"fire-gcs",[wN]:"fire-gcs-compat",[EN]:"fire-fst",[TN]:"fire-fst-compat",[bN]:"fire-vertex","fire-js":"fire-js",[CN]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kh=new Map,AN=new Map,um=new Map;function k0(t,e){try{t.container.addComponent(e)}catch(n){js.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function sa(t){const e=t.name;if(um.has(e))return js.debug(`There were multiple attempts to register component ${e}.`),!1;um.set(e,t);for(const n of kh.values())k0(n,t);for(const n of AN.values())k0(n,t);return!0}function jg(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function Wn(t){return t.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xN={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Ui=new bu("app","Firebase",xN);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kN{constructor(e,n,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new Fs("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Ui.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ia=IN;function sT(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const r=Object.assign({name:lm,automaticDataCollectionEnabled:!1},e),i=r.name;if(typeof i!="string"||!i)throw Ui.create("bad-app-name",{appName:String(i)});if(n||(n=tT()),!n)throw Ui.create("no-options");const s=kh.get(i);if(s){if(xh(n,s.options)&&xh(r,s.config))return s;throw Ui.create("duplicate-app",{appName:i})}const o=new MR(i);for(const l of um.values())o.addComponent(l);const a=new kN(n,r,o);return kh.set(i,a),a}function oT(t=lm){const e=kh.get(t);if(!e&&t===lm&&tT())return sT();if(!e)throw Ui.create("no-app",{appName:t});return e}function Vi(t,e,n){var r;let i=(r=SN[t])!==null&&r!==void 0?r:t;n&&(i+=`-${n}`);const s=i.match(/\s|\//),o=e.match(/\s|\//);if(s||o){const a=[`Unable to register library "${i}" with version "${e}":`];s&&a.push(`library name "${i}" contains illegal characters (whitespace or "/")`),s&&o&&a.push("and"),o&&a.push(`version name "${e}" contains illegal characters (whitespace or "/")`),js.warn(a.join(" "));return}sa(new Fs(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const PN="firebase-heartbeat-database",RN=1,ou="firebase-heartbeat-store";let Wf=null;function aT(){return Wf||(Wf=QR(PN,RN,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(ou)}catch(n){console.warn(n)}}}}).catch(t=>{throw Ui.create("idb-open",{originalErrorMessage:t.message})})),Wf}async function NN(t){try{const n=(await aT()).transaction(ou),r=await n.objectStore(ou).get(lT(t));return await n.done,r}catch(e){if(e instanceof ei)js.warn(e.message);else{const n=Ui.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});js.warn(n.message)}}}async function P0(t,e){try{const r=(await aT()).transaction(ou,"readwrite");await r.objectStore(ou).put(e,lT(t)),await r.done}catch(n){if(n instanceof ei)js.warn(n.message);else{const r=Ui.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});js.warn(r.message)}}}function lT(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ON=1024,LN=30*24*60*60*1e3;class DN{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new UN(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,n;const i=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),s=R0();if(!(((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null))&&!(this._heartbeatsCache.lastSentHeartbeatDate===s||this._heartbeatsCache.heartbeats.some(o=>o.date===s)))return this._heartbeatsCache.heartbeats.push({date:s,agent:i}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(o=>{const a=new Date(o.date).valueOf();return Date.now()-a<=LN}),this._storage.overwrite(this._heartbeatsCache)}async getHeartbeatsHeader(){var e;if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=R0(),{heartbeatsToSend:r,unsentEntries:i}=MN(this._heartbeatsCache.heartbeats),s=Ah(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=n,i.length>0?(this._heartbeatsCache.heartbeats=i,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),s}}function R0(){return new Date().toISOString().substring(0,10)}function MN(t,e=ON){const n=[];let r=t.slice();for(const i of t){const s=n.find(o=>o.agent===i.agent);if(s){if(s.dates.push(i.date),N0(n)>e){s.dates.pop();break}}else if(n.push({agent:i.agent,dates:[i.date]}),N0(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class UN{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return CR()?IR().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await NN(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var n;if(await this._canUseIndexedDBPromise){const i=await this.read();return P0(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var n;if(await this._canUseIndexedDBPromise){const i=await this.read();return P0(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...e.heartbeats]})}else return}}function N0(t){return Ah(JSON.stringify({version:2,heartbeats:t})).length}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function VN(t){sa(new Fs("platform-logger",e=>new JR(e),"PRIVATE")),sa(new Fs("heartbeat",e=>new DN(e),"PRIVATE")),Vi(am,x0,t),Vi(am,x0,"esm2017"),Vi("fire-js","")}VN("");var $N="firebase",FN="10.12.2";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Vi($N,FN,"app");function zg(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n}function uT(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const jN=uT,cT=new bu("auth","Firebase",uT());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ph=new $g("@firebase/auth");function zN(t,...e){Ph.logLevel<=Ee.WARN&&Ph.warn(`Auth (${Ia}): ${t}`,...e)}function Hc(t,...e){Ph.logLevel<=Ee.ERROR&&Ph.error(`Auth (${Ia}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Dn(t,...e){throw Hg(t,...e)}function Kn(t,...e){return Hg(t,...e)}function Bg(t,e,n){const r=Object.assign(Object.assign({},jN()),{[e]:n});return new bu("auth","Firebase",r).create(e,{appName:t.name})}function zr(t){return Bg(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function BN(t,e,n){const r=n;if(!(e instanceof r))throw r.name!==e.constructor.name&&Dn(t,"argument-error"),Bg(t,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function Hg(t,...e){if(typeof t!="string"){const n=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=t.name),t._errorFactory.create(n,...r)}return cT.create(t,...e)}function se(t,e,...n){if(!t)throw Hg(e,...n)}function Ur(t){const e="INTERNAL ASSERTION FAILED: "+t;throw Hc(e),new Error(e)}function Gr(t,e){t||Ur(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cm(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.href)||""}function HN(){return O0()==="http:"||O0()==="https:"}function O0(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function WN(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(HN()||wR()||"connection"in navigator)?navigator.onLine:!0}function qN(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cu{constructor(e,n){this.shortDelay=e,this.longDelay=n,Gr(n>e,"Short delay should be less than long delay!"),this.isMobile=vR()||ER()}get(){return WN()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Wg(t,e){Gr(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hT{static initialize(e,n,r){this.fetchImpl=e,n&&(this.headersImpl=n),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Ur("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Ur("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Ur("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const GN={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const KN=new Cu(3e4,6e4);function is(t,e){return t.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:t.tenantId}):e}async function ti(t,e,n,r,i={}){return dT(t,i,async()=>{let s={},o={};r&&(e==="GET"?o=r:s={body:JSON.stringify(r)});const a=Tu(Object.assign({key:t.config.apiKey},o)).slice(1),l=await t._getAdditionalHeaders();return l["Content-Type"]="application/json",t.languageCode&&(l["X-Firebase-Locale"]=t.languageCode),hT.fetch()(fT(t,t.config.apiHost,n,a),Object.assign({method:e,headers:l,referrerPolicy:"no-referrer"},s))})}async function dT(t,e,n){t._canInitEmulator=!1;const r=Object.assign(Object.assign({},GN),e);try{const i=new XN(t),s=await Promise.race([n(),i.promise]);i.clearNetworkTimeout();const o=await s.json();if("needConfirmation"in o)throw Ec(t,"account-exists-with-different-credential",o);if(s.ok&&!("errorMessage"in o))return o;{const a=s.ok?o.errorMessage:o.error.message,[l,c]=a.split(" : ");if(l==="FEDERATED_USER_ID_ALREADY_LINKED")throw Ec(t,"credential-already-in-use",o);if(l==="EMAIL_EXISTS")throw Ec(t,"email-already-in-use",o);if(l==="USER_DISABLED")throw Ec(t,"user-disabled",o);const h=r[l]||l.toLowerCase().replace(/[_\s]+/g,"-");if(c)throw Bg(t,h,c);Dn(t,h)}}catch(i){if(i instanceof ei)throw i;Dn(t,"network-request-failed",{message:String(i)})}}async function Iu(t,e,n,r,i={}){const s=await ti(t,e,n,r,i);return"mfaPendingCredential"in s&&Dn(t,"multi-factor-auth-required",{_serverResponse:s}),s}function fT(t,e,n,r){const i=`${e}${n}?${r}`;return t.config.emulator?Wg(t.config,i):`${t.config.apiScheme}://${i}`}function QN(t){switch(t){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class XN{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,r)=>{this.timer=setTimeout(()=>r(Kn(this.auth,"network-request-failed")),KN.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function Ec(t,e,n){const r={appName:t.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const i=Kn(t,e,r);return i.customData._tokenResponse=n,i}function L0(t){return t!==void 0&&t.enterprise!==void 0}class YN{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const n of this.recaptchaEnforcementState)if(n.provider&&n.provider===e)return QN(n.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}}async function JN(t,e){return ti(t,"GET","/v2/recaptchaConfig",is(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ZN(t,e){return ti(t,"POST","/v1/accounts:delete",e)}async function pT(t,e){return ti(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Dl(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function eO(t,e=!1){const n=gt(t),r=await n.getIdToken(e),i=qg(r);se(i&&i.exp&&i.auth_time&&i.iat,n.auth,"internal-error");const s=typeof i.firebase=="object"?i.firebase:void 0,o=s==null?void 0:s.sign_in_provider;return{claims:i,token:r,authTime:Dl(qf(i.auth_time)),issuedAtTime:Dl(qf(i.iat)),expirationTime:Dl(qf(i.exp)),signInProvider:o||null,signInSecondFactor:(s==null?void 0:s.sign_in_second_factor)||null}}function qf(t){return Number(t)*1e3}function qg(t){const[e,n,r]=t.split(".");if(e===void 0||n===void 0||r===void 0)return Hc("JWT malformed, contained fewer than 3 sections"),null;try{const i=Zb(n);return i?JSON.parse(i):(Hc("Failed to decode base64 JWT payload"),null)}catch(i){return Hc("Caught error parsing JWT payload as JSON",i==null?void 0:i.toString()),null}}function D0(t){const e=qg(t);return se(e,"internal-error"),se(typeof e.exp<"u","internal-error"),se(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function oa(t,e,n=!1){if(n)return e;try{return await e}catch(r){throw r instanceof ei&&tO(r)&&t.auth.currentUser===t&&await t.auth.signOut(),r}}function tO({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nO{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var n;if(e){const r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;const i=((n=this.user.stsTokenManager.expirationTime)!==null&&n!==void 0?n:0)-Date.now()-3e5;return Math.max(0,i)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hm{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=Dl(this.lastLoginAt),this.creationTime=Dl(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Rh(t){var e;const n=t.auth,r=await t.getIdToken(),i=await oa(t,pT(n,{idToken:r}));se(i==null?void 0:i.users.length,n,"internal-error");const s=i.users[0];t._notifyReloadListener(s);const o=!((e=s.providerUserInfo)===null||e===void 0)&&e.length?mT(s.providerUserInfo):[],a=iO(t.providerData,o),l=t.isAnonymous,c=!(t.email&&s.passwordHash)&&!(a!=null&&a.length),h=l?c:!1,f={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:a,metadata:new hm(s.createdAt,s.lastLoginAt),isAnonymous:h};Object.assign(t,f)}async function rO(t){const e=gt(t);await Rh(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function iO(t,e){return[...t.filter(r=>!e.some(i=>i.providerId===r.providerId)),...e]}function mT(t){return t.map(e=>{var{providerId:n}=e,r=zg(e,["providerId"]);return{providerId:n,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function sO(t,e){const n=await dT(t,{},async()=>{const r=Tu({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:i,apiKey:s}=t.config,o=fT(t,i,"/v1/token",`key=${s}`),a=await t._getAdditionalHeaders();return a["Content-Type"]="application/x-www-form-urlencoded",hT.fetch()(o,{method:"POST",headers:a,body:r})});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function oO(t,e){return ti(t,"POST","/v2/accounts:revokeToken",is(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qo{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){se(e.idToken,"internal-error"),se(typeof e.idToken<"u","internal-error"),se(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):D0(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){se(e.length!==0,"internal-error");const n=D0(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(se(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:r,refreshToken:i,expiresIn:s}=await sO(e,n);this.updateTokensAndExpiration(r,i,Number(s))}updateTokensAndExpiration(e,n,r){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,n){const{refreshToken:r,accessToken:i,expirationTime:s}=n,o=new qo;return r&&(se(typeof r=="string","internal-error",{appName:e}),o.refreshToken=r),i&&(se(typeof i=="string","internal-error",{appName:e}),o.accessToken=i),s&&(se(typeof s=="number","internal-error",{appName:e}),o.expirationTime=s),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new qo,this.toJSON())}_performRefresh(){return Ur("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pi(t,e){se(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class Vr{constructor(e){var{uid:n,auth:r,stsTokenManager:i}=e,s=zg(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new nO(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=r,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=s.displayName||null,this.email=s.email||null,this.emailVerified=s.emailVerified||!1,this.phoneNumber=s.phoneNumber||null,this.photoURL=s.photoURL||null,this.isAnonymous=s.isAnonymous||!1,this.tenantId=s.tenantId||null,this.providerData=s.providerData?[...s.providerData]:[],this.metadata=new hm(s.createdAt||void 0,s.lastLoginAt||void 0)}async getIdToken(e){const n=await oa(this,this.stsTokenManager.getToken(this.auth,e));return se(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return eO(this,e)}reload(){return rO(this)}_assign(e){this!==e&&(se(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>Object.assign({},n)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new Vr(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return n.metadata._copy(this.metadata),n}_onReload(e){se(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),n&&await Rh(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(Wn(this.auth.app))return Promise.reject(zr(this.auth));const e=await this.getIdToken();return await oa(this,ZN(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){var r,i,s,o,a,l,c,h;const f=(r=n.displayName)!==null&&r!==void 0?r:void 0,p=(i=n.email)!==null&&i!==void 0?i:void 0,_=(s=n.phoneNumber)!==null&&s!==void 0?s:void 0,w=(o=n.photoURL)!==null&&o!==void 0?o:void 0,I=(a=n.tenantId)!==null&&a!==void 0?a:void 0,R=(l=n._redirectEventId)!==null&&l!==void 0?l:void 0,C=(c=n.createdAt)!==null&&c!==void 0?c:void 0,E=(h=n.lastLoginAt)!==null&&h!==void 0?h:void 0,{uid:S,emailVerified:D,isAnonymous:F,providerData:z,stsTokenManager:g}=n;se(S&&g,e,"internal-error");const y=qo.fromJSON(this.name,g);se(typeof S=="string",e,"internal-error"),pi(f,e.name),pi(p,e.name),se(typeof D=="boolean",e,"internal-error"),se(typeof F=="boolean",e,"internal-error"),pi(_,e.name),pi(w,e.name),pi(I,e.name),pi(R,e.name),pi(C,e.name),pi(E,e.name);const T=new Vr({uid:S,auth:e,email:p,emailVerified:D,displayName:f,isAnonymous:F,photoURL:w,phoneNumber:_,tenantId:I,stsTokenManager:y,createdAt:C,lastLoginAt:E});return z&&Array.isArray(z)&&(T.providerData=z.map(A=>Object.assign({},A))),R&&(T._redirectEventId=R),T}static async _fromIdTokenResponse(e,n,r=!1){const i=new qo;i.updateFromServerResponse(n);const s=new Vr({uid:n.localId,auth:e,stsTokenManager:i,isAnonymous:r});return await Rh(s),s}static async _fromGetAccountInfoResponse(e,n,r){const i=n.users[0];se(i.localId!==void 0,"internal-error");const s=i.providerUserInfo!==void 0?mT(i.providerUserInfo):[],o=!(i.email&&i.passwordHash)&&!(s!=null&&s.length),a=new qo;a.updateFromIdToken(r);const l=new Vr({uid:i.localId,auth:e,stsTokenManager:a,isAnonymous:o}),c={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:s,metadata:new hm(i.createdAt,i.lastLoginAt),isAnonymous:!(i.email&&i.passwordHash)&&!(s!=null&&s.length)};return Object.assign(l,c),l}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const M0=new Map;function $r(t){Gr(t instanceof Function,"Expected a class definition");let e=M0.get(t);return e?(Gr(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,M0.set(t,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gT{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}gT.type="NONE";const U0=gT;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Wc(t,e,n){return`firebase:${t}:${e}:${n}`}class Go{constructor(e,n,r){this.persistence=e,this.auth=n,this.userKey=r;const{config:i,name:s}=this.auth;this.fullUserKey=Wc(this.userKey,i.apiKey,s),this.fullPersistenceKey=Wc("persistence",i.apiKey,s),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);return e?Vr._fromJSON(this.auth,e):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,r="authUser"){if(!n.length)return new Go($r(U0),e,r);const i=(await Promise.all(n.map(async c=>{if(await c._isAvailable())return c}))).filter(c=>c);let s=i[0]||$r(U0);const o=Wc(r,e.config.apiKey,e.name);let a=null;for(const c of n)try{const h=await c._get(o);if(h){const f=Vr._fromJSON(e,h);c!==s&&(a=f),s=c;break}}catch{}const l=i.filter(c=>c._shouldAllowMigration);return!s._shouldAllowMigration||!l.length?new Go(s,e,r):(s=l[0],a&&await s._set(o,a.toJSON()),await Promise.all(n.map(async c=>{if(c!==s)try{await c._remove(o)}catch{}})),new Go(s,e,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function V0(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(_T(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(yT(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(ET(e))return"Blackberry";if(bT(e))return"Webos";if(Gg(e))return"Safari";if((e.includes("chrome/")||vT(e))&&!e.includes("edge/"))return"Chrome";if(wT(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=t.match(n);if((r==null?void 0:r.length)===2)return r[1]}return"Other"}function yT(t=Lt()){return/firefox\//i.test(t)}function Gg(t=Lt()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function vT(t=Lt()){return/crios\//i.test(t)}function _T(t=Lt()){return/iemobile/i.test(t)}function wT(t=Lt()){return/android/i.test(t)}function ET(t=Lt()){return/blackberry/i.test(t)}function bT(t=Lt()){return/webos/i.test(t)}function fd(t=Lt()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function aO(t=Lt()){var e;return fd(t)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function lO(){return bR()&&document.documentMode===10}function TT(t=Lt()){return fd(t)||wT(t)||bT(t)||ET(t)||/windows phone/i.test(t)||_T(t)}function uO(){try{return!!(window&&window!==window.top)}catch{return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function CT(t,e=[]){let n;switch(t){case"Browser":n=V0(Lt());break;case"Worker":n=`${V0(Lt())}-${t}`;break;default:n=t}const r=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${Ia}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cO{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const r=s=>new Promise((o,a)=>{try{const l=e(s);o(l)}catch(l){a(l)}});r.onAbort=n,this.queue.push(r);const i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const r of this.queue)await r(e),r.onAbort&&n.push(r.onAbort)}catch(r){n.reverse();for(const i of n)try{i()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r==null?void 0:r.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function hO(t,e={}){return ti(t,"GET","/v2/passwordPolicy",is(t,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dO=6;class fO{constructor(e){var n,r,i,s;const o=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(n=o.minPasswordLength)!==null&&n!==void 0?n:dO,o.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=o.maxPasswordLength),o.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=o.containsLowercaseCharacter),o.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=o.containsUppercaseCharacter),o.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=o.containsNumericCharacter),o.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=o.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(i=(r=e.allowedNonAlphanumericCharacters)===null||r===void 0?void 0:r.join(""))!==null&&i!==void 0?i:"",this.forceUpgradeOnSignin=(s=e.forceUpgradeOnSignin)!==null&&s!==void 0?s:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var n,r,i,s,o,a;const l={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,l),this.validatePasswordCharacterOptions(e,l),l.isValid&&(l.isValid=(n=l.meetsMinPasswordLength)!==null&&n!==void 0?n:!0),l.isValid&&(l.isValid=(r=l.meetsMaxPasswordLength)!==null&&r!==void 0?r:!0),l.isValid&&(l.isValid=(i=l.containsLowercaseLetter)!==null&&i!==void 0?i:!0),l.isValid&&(l.isValid=(s=l.containsUppercaseLetter)!==null&&s!==void 0?s:!0),l.isValid&&(l.isValid=(o=l.containsNumericCharacter)!==null&&o!==void 0?o:!0),l.isValid&&(l.isValid=(a=l.containsNonAlphanumericCharacter)!==null&&a!==void 0?a:!0),l}validatePasswordLengthOptions(e,n){const r=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;r&&(n.meetsMinPasswordLength=e.length>=r),i&&(n.meetsMaxPasswordLength=e.length<=i)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let r;for(let i=0;i<e.length;i++)r=e.charAt(i),this.updatePasswordCharacterOptionsStatuses(n,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,n,r,i,s){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pO{constructor(e,n,r,i){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=r,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new $0(this),this.idTokenSubscription=new $0(this),this.beforeStateQueue=new cO(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=cT,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=i.sdkClientVersion}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=$r(n)),this._initializationPromise=this.queue(async()=>{var r,i;if(!this._deleted&&(this.persistenceManager=await Go.create(this,e),!this._deleted)){if(!((r=this._popupRedirectResolver)===null||r===void 0)&&r._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((i=this.currentUser)===null||i===void 0?void 0:i.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await pT(this,{idToken:e}),r=await Vr._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(r)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var n;if(Wn(this.app)){const o=this.app.settings.authIdToken;return o?new Promise(a=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(o).then(a,a))}):this.directlySetCurrentUser(null)}const r=await this.assertedPersistence.getCurrentUser();let i=r,s=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const o=(n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId,a=i==null?void 0:i._redirectEventId,l=await this.tryRedirectSignIn(e);(!o||o===a)&&(l!=null&&l.user)&&(i=l.user,s=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(s)try{await this.beforeStateQueue.runMiddleware(i)}catch(o){i=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return se(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await Rh(e)}catch(n){if((n==null?void 0:n.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=qN()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(Wn(this.app))return Promise.reject(zr(this));const n=e?gt(e):null;return n&&se(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&se(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return Wn(this.app)?Promise.reject(zr(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return Wn(this.app)?Promise.reject(zr(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence($r(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await hO(this),n=new fO(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new bu("auth","Firebase",e())}onAuthStateChanged(e,n,r){return this.registerStateListener(this.authStateSubscription,e,n,r)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,r){return this.registerStateListener(this.idTokenSubscription,e,n,r)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(r.tenantId=this.tenantId),await oO(this,r)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,n){const r=await this.getOrInitRedirectPersistenceManager(n);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&$r(e)||this._popupRedirectResolver;se(n,this,"argument-error"),this.redirectPersistenceManager=await Go.create(this,[$r(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var n,r;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)===null||n===void 0?void 0:n._redirectEventId)===e?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const r=(n=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&n!==void 0?n:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,r,i){if(this._deleted)return()=>{};const s=typeof n=="function"?n:n.next.bind(n);let o=!1;const a=this._isInitialized?Promise.resolve():this._initializationPromise;if(se(a,this,"internal-error"),a.then(()=>{o||s(this.currentUser)}),typeof n=="function"){const l=e.addObserver(n,r,i);return()=>{o=!0,l()}}else{const l=e.addObserver(n);return()=>{o=!0,l()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return se(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=CT(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const n={"X-Client-Version":this.clientVersion};this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId);const r=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());r&&(n["X-Firebase-Client"]=r);const i=await this._getAppCheckToken();return i&&(n["X-Firebase-AppCheck"]=i),n}async _getAppCheckToken(){var e;const n=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return n!=null&&n.error&&zN(`Error while retrieving App Check token: ${n.error}`),n==null?void 0:n.token}}function ss(t){return gt(t)}class $0{constructor(e){this.auth=e,this.observer=null,this.addObserver=PR(n=>this.observer=n)}get next(){return se(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let pd={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function mO(t){pd=t}function IT(t){return pd.loadJS(t)}function gO(){return pd.recaptchaEnterpriseScript}function yO(){return pd.gapiScript}function vO(t){return`__${t}${Math.floor(Math.random()*1e6)}`}const _O="recaptcha-enterprise",wO="NO_RECAPTCHA";class EO{constructor(e){this.type=_O,this.auth=ss(e)}async verify(e="verify",n=!1){async function r(s){if(!n){if(s.tenantId==null&&s._agentRecaptchaConfig!=null)return s._agentRecaptchaConfig.siteKey;if(s.tenantId!=null&&s._tenantRecaptchaConfigs[s.tenantId]!==void 0)return s._tenantRecaptchaConfigs[s.tenantId].siteKey}return new Promise(async(o,a)=>{JN(s,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(l=>{if(l.recaptchaKey===void 0)a(new Error("recaptcha Enterprise site key undefined"));else{const c=new YN(l);return s.tenantId==null?s._agentRecaptchaConfig=c:s._tenantRecaptchaConfigs[s.tenantId]=c,o(c.siteKey)}}).catch(l=>{a(l)})})}function i(s,o,a){const l=window.grecaptcha;L0(l)?l.enterprise.ready(()=>{l.enterprise.execute(s,{action:e}).then(c=>{o(c)}).catch(()=>{o(wO)})}):a(Error("No reCAPTCHA enterprise script loaded."))}return new Promise((s,o)=>{r(this.auth).then(a=>{if(!n&&L0(window.grecaptcha))i(a,s,o);else{if(typeof window>"u"){o(new Error("RecaptchaVerifier is only supported in browser"));return}let l=gO();l.length!==0&&(l+=a),IT(l).then(()=>{i(a,s,o)}).catch(c=>{o(c)})}}).catch(a=>{o(a)})})}}async function F0(t,e,n,r=!1){const i=new EO(t);let s;try{s=await i.verify(n)}catch{s=await i.verify(n,!0)}const o=Object.assign({},e);return r?Object.assign(o,{captchaResp:s}):Object.assign(o,{captchaResponse:s}),Object.assign(o,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(o,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),o}async function dm(t,e,n,r){var i;if(!((i=t._getRecaptchaConfig())===null||i===void 0)&&i.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const s=await F0(t,e,n,n==="getOobCode");return r(t,s)}else return r(t,e).catch(async s=>{if(s.code==="auth/missing-recaptcha-token"){console.log(`${n} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const o=await F0(t,e,n,n==="getOobCode");return r(t,o)}else return Promise.reject(s)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bO(t,e){const n=jg(t,"auth");if(n.isInitialized()){const i=n.getImmediate(),s=n.getOptions();if(xh(s,e??{}))return i;Dn(i,"already-initialized")}return n.initialize({options:e})}function TO(t,e){const n=(e==null?void 0:e.persistence)||[],r=(Array.isArray(n)?n:[n]).map($r);e!=null&&e.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(r,e==null?void 0:e.popupRedirectResolver)}function CO(t,e,n){const r=ss(t);se(r._canInitEmulator,r,"emulator-config-failed"),se(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const i=!1,s=ST(e),{host:o,port:a}=IO(e),l=a===null?"":`:${a}`;r.config.emulator={url:`${s}//${o}${l}/`},r.settings.appVerificationDisabledForTesting=!0,r.emulatorConfig=Object.freeze({host:o,port:a,protocol:s.replace(":",""),options:Object.freeze({disableWarnings:i})}),SO()}function ST(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function IO(t){const e=ST(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){const s=i[1];return{host:s,port:j0(r.substr(s.length+1))}}else{const[s,o]=r.split(":");return{host:s,port:j0(o)}}}function j0(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function SO(){function t(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kg{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return Ur("not implemented")}_getIdTokenResponse(e){return Ur("not implemented")}_linkToIdToken(e,n){return Ur("not implemented")}_getReauthenticationResolver(e){return Ur("not implemented")}}async function AO(t,e){return ti(t,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function xO(t,e){return Iu(t,"POST","/v1/accounts:signInWithPassword",is(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function kO(t,e){return Iu(t,"POST","/v1/accounts:signInWithEmailLink",is(t,e))}async function PO(t,e){return Iu(t,"POST","/v1/accounts:signInWithEmailLink",is(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class au extends Kg{constructor(e,n,r,i=null){super("password",r),this._email=e,this._password=n,this._tenantId=i}static _fromEmailAndPassword(e,n){return new au(e,n,"password")}static _fromEmailAndCode(e,n,r=null){return new au(e,n,"emailLink",r)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e;if(n!=null&&n.email&&(n!=null&&n.password)){if(n.signInMethod==="password")return this._fromEmailAndPassword(n.email,n.password);if(n.signInMethod==="emailLink")return this._fromEmailAndCode(n.email,n.password,n.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const n={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return dm(e,n,"signInWithPassword",xO);case"emailLink":return kO(e,{email:this._email,oobCode:this._password});default:Dn(e,"internal-error")}}async _linkToIdToken(e,n){switch(this.signInMethod){case"password":const r={idToken:n,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return dm(e,r,"signUpPassword",AO);case"emailLink":return PO(e,{idToken:n,email:this._email,oobCode:this._password});default:Dn(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ko(t,e){return Iu(t,"POST","/v1/accounts:signInWithIdp",is(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const RO="http://localhost";class zs extends Kg{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new zs(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):Dn("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:i}=n,s=zg(n,["providerId","signInMethod"]);if(!r||!i)return null;const o=new zs(r,i);return o.idToken=s.idToken||void 0,o.accessToken=s.accessToken||void 0,o.secret=s.secret,o.nonce=s.nonce,o.pendingToken=s.pendingToken||null,o}_getIdTokenResponse(e){const n=this.buildRequest();return Ko(e,n)}_linkToIdToken(e,n){const r=this.buildRequest();return r.idToken=n,Ko(e,r)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,Ko(e,n)}buildRequest(){const e={requestUri:RO,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=Tu(n)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function NO(t){switch(t){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function OO(t){const e=yl(vl(t)).link,n=e?yl(vl(e)).deep_link_id:null,r=yl(vl(t)).deep_link_id;return(r?yl(vl(r)).link:null)||r||n||e||t}class Qg{constructor(e){var n,r,i,s,o,a;const l=yl(vl(e)),c=(n=l.apiKey)!==null&&n!==void 0?n:null,h=(r=l.oobCode)!==null&&r!==void 0?r:null,f=NO((i=l.mode)!==null&&i!==void 0?i:null);se(c&&h&&f,"argument-error"),this.apiKey=c,this.operation=f,this.code=h,this.continueUrl=(s=l.continueUrl)!==null&&s!==void 0?s:null,this.languageCode=(o=l.languageCode)!==null&&o!==void 0?o:null,this.tenantId=(a=l.tenantId)!==null&&a!==void 0?a:null}static parseLink(e){const n=OO(e);try{return new Qg(n)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sa{constructor(){this.providerId=Sa.PROVIDER_ID}static credential(e,n){return au._fromEmailAndPassword(e,n)}static credentialWithLink(e,n){const r=Qg.parseLink(n);return se(r,"argument-error"),au._fromEmailAndCode(e,r.code,r.tenantId)}}Sa.PROVIDER_ID="password";Sa.EMAIL_PASSWORD_SIGN_IN_METHOD="password";Sa.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xg{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Su extends Xg{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ei extends Su{constructor(){super("facebook.com")}static credential(e){return zs._fromParams({providerId:Ei.PROVIDER_ID,signInMethod:Ei.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Ei.credentialFromTaggedObject(e)}static credentialFromError(e){return Ei.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Ei.credential(e.oauthAccessToken)}catch{return null}}}Ei.FACEBOOK_SIGN_IN_METHOD="facebook.com";Ei.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Or extends Su{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return zs._fromParams({providerId:Or.PROVIDER_ID,signInMethod:Or.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return Or.credentialFromTaggedObject(e)}static credentialFromError(e){return Or.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:r}=e;if(!n&&!r)return null;try{return Or.credential(n,r)}catch{return null}}}Or.GOOGLE_SIGN_IN_METHOD="google.com";Or.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bi extends Su{constructor(){super("github.com")}static credential(e){return zs._fromParams({providerId:bi.PROVIDER_ID,signInMethod:bi.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return bi.credentialFromTaggedObject(e)}static credentialFromError(e){return bi.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return bi.credential(e.oauthAccessToken)}catch{return null}}}bi.GITHUB_SIGN_IN_METHOD="github.com";bi.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ti extends Su{constructor(){super("twitter.com")}static credential(e,n){return zs._fromParams({providerId:Ti.PROVIDER_ID,signInMethod:Ti.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return Ti.credentialFromTaggedObject(e)}static credentialFromError(e){return Ti.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:r}=e;if(!n||!r)return null;try{return Ti.credential(n,r)}catch{return null}}}Ti.TWITTER_SIGN_IN_METHOD="twitter.com";Ti.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function LO(t,e){return Iu(t,"POST","/v1/accounts:signUp",is(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bs{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,r,i=!1){const s=await Vr._fromIdTokenResponse(e,r,i),o=z0(r);return new Bs({user:s,providerId:o,_tokenResponse:r,operationType:n})}static async _forOperation(e,n,r){await e._updateTokensIfNecessary(r,!0);const i=z0(r);return new Bs({user:e,providerId:i,_tokenResponse:r,operationType:n})}}function z0(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nh extends ei{constructor(e,n,r,i){var s;super(n.code,n.message),this.operationType=r,this.user=i,Object.setPrototypeOf(this,Nh.prototype),this.customData={appName:e.name,tenantId:(s=e.tenantId)!==null&&s!==void 0?s:void 0,_serverResponse:n.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,n,r,i){return new Nh(e,n,r,i)}}function AT(t,e,n,r){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(s=>{throw s.code==="auth/multi-factor-auth-required"?Nh._fromErrorAndOperation(t,s,e,r):s})}async function DO(t,e,n=!1){const r=await oa(t,e._linkToIdToken(t.auth,await t.getIdToken()),n);return Bs._forOperation(t,"link",r)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function MO(t,e,n=!1){const{auth:r}=t;if(Wn(r.app))return Promise.reject(zr(r));const i="reauthenticate";try{const s=await oa(t,AT(r,i,e,t),n);se(s.idToken,r,"internal-error");const o=qg(s.idToken);se(o,r,"internal-error");const{sub:a}=o;return se(t.uid===a,r,"user-mismatch"),Bs._forOperation(t,i,s)}catch(s){throw(s==null?void 0:s.code)==="auth/user-not-found"&&Dn(r,"user-mismatch"),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function xT(t,e,n=!1){if(Wn(t.app))return Promise.reject(zr(t));const r="signIn",i=await AT(t,r,e),s=await Bs._fromIdTokenResponse(t,r,i);return n||await t._updateCurrentUser(s.user),s}async function UO(t,e){return xT(ss(t),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function kT(t){const e=ss(t);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function VO(t,e,n){if(Wn(t.app))return Promise.reject(zr(t));const r=ss(t),o=await dm(r,{returnSecureToken:!0,email:e,password:n,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",LO).catch(l=>{throw l.code==="auth/password-does-not-meet-requirements"&&kT(t),l}),a=await Bs._fromIdTokenResponse(r,"signIn",o);return await r._updateCurrentUser(a.user),a}function $O(t,e,n){return Wn(t.app)?Promise.reject(zr(t)):UO(gt(t),Sa.credential(e,n)).catch(async r=>{throw r.code==="auth/password-does-not-meet-requirements"&&kT(t),r})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function FO(t,e){return ti(t,"POST","/v1/accounts:update",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function jO(t,{displayName:e,photoURL:n}){if(e===void 0&&n===void 0)return;const r=gt(t),s={idToken:await r.getIdToken(),displayName:e,photoUrl:n,returnSecureToken:!0},o=await oa(r,FO(r.auth,s));r.displayName=o.displayName||null,r.photoURL=o.photoUrl||null;const a=r.providerData.find(({providerId:l})=>l==="password");a&&(a.displayName=r.displayName,a.photoURL=r.photoURL),await r._updateTokensIfNecessary(o)}function zO(t,e,n,r){return gt(t).onIdTokenChanged(e,n,r)}function BO(t,e,n){return gt(t).beforeAuthStateChanged(e,n)}function PT(t,e,n,r){return gt(t).onAuthStateChanged(e,n,r)}function HO(t){return gt(t).signOut()}const Oh="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RT{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(Oh,"1"),this.storage.removeItem(Oh),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function WO(){const t=Lt();return Gg(t)||fd(t)}const qO=1e3,GO=10;class NT extends RT{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=WO()&&uO(),this.fallbackToPolling=TT(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const r=this.storage.getItem(n),i=this.localCache[n];r!==i&&e(n,i,r)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((o,a,l)=>{this.notifyListeners(o,l)});return}const r=e.key;if(n?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const o=this.storage.getItem(r);if(e.newValue!==o)e.newValue!==null?this.storage.setItem(r,e.newValue):this.storage.removeItem(r);else if(this.localCache[r]===e.newValue&&!n)return}const i=()=>{const o=this.storage.getItem(r);!n&&this.localCache[r]===o||this.notifyListeners(r,o)},s=this.storage.getItem(r);lO()&&s!==e.newValue&&e.newValue!==e.oldValue?setTimeout(i,GO):i()}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const i of Array.from(r))i(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:r}),!0)})},qO)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}NT.type="LOCAL";const KO=NT;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OT extends RT{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}OT.type="SESSION";const LT=OT;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function QO(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class md{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(i=>i.isListeningto(e));if(n)return n;const r=new md(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:r,eventType:i,data:s}=n.data,o=this.handlersMap[i];if(!(o!=null&&o.size))return;n.ports[0].postMessage({status:"ack",eventId:r,eventType:i});const a=Array.from(o).map(async c=>c(n.origin,s)),l=await QO(a);n.ports[0].postMessage({status:"done",eventId:r,eventType:i,response:l})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}md.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Yg(t="",e=10){let n="";for(let r=0;r<e;r++)n+=Math.floor(Math.random()*10);return t+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XO{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,r=50){const i=typeof MessageChannel<"u"?new MessageChannel:null;if(!i)throw new Error("connection_unavailable");let s,o;return new Promise((a,l)=>{const c=Yg("",20);i.port1.start();const h=setTimeout(()=>{l(new Error("unsupported_event"))},r);o={messageChannel:i,onMessage(f){const p=f;if(p.data.eventId===c)switch(p.data.status){case"ack":clearTimeout(h),s=setTimeout(()=>{l(new Error("timeout"))},3e3);break;case"done":clearTimeout(s),a(p.data.response);break;default:clearTimeout(h),clearTimeout(s),l(new Error("invalid_response"));break}}},this.handlers.add(o),i.port1.addEventListener("message",o.onMessage),this.target.postMessage({eventType:e,eventId:c,data:n},[i.port2])}).finally(()=>{o&&this.removeMessageHandler(o)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cr(){return window}function YO(t){cr().location.href=t}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function DT(){return typeof cr().WorkerGlobalScope<"u"&&typeof cr().importScripts=="function"}async function JO(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function ZO(){var t;return((t=navigator==null?void 0:navigator.serviceWorker)===null||t===void 0?void 0:t.controller)||null}function eL(){return DT()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const MT="firebaseLocalStorageDb",tL=1,Lh="firebaseLocalStorage",UT="fbase_key";class Au{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function gd(t,e){return t.transaction([Lh],e?"readwrite":"readonly").objectStore(Lh)}function nL(){const t=indexedDB.deleteDatabase(MT);return new Au(t).toPromise()}function fm(){const t=indexedDB.open(MT,tL);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{const r=t.result;try{r.createObjectStore(Lh,{keyPath:UT})}catch(i){n(i)}}),t.addEventListener("success",async()=>{const r=t.result;r.objectStoreNames.contains(Lh)?e(r):(r.close(),await nL(),e(await fm()))})})}async function B0(t,e,n){const r=gd(t,!0).put({[UT]:e,value:n});return new Au(r).toPromise()}async function rL(t,e){const n=gd(t,!1).get(e),r=await new Au(n).toPromise();return r===void 0?null:r.value}function H0(t,e){const n=gd(t,!0).delete(e);return new Au(n).toPromise()}const iL=800,sL=3;class VT{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await fm(),this.db)}async _withRetries(e){let n=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(n++>sL)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return DT()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=md._getInstance(eL()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){var e,n;if(this.activeServiceWorker=await JO(),!this.activeServiceWorker)return;this.sender=new XO(this.activeServiceWorker);const r=await this.sender._send("ping",{},800);r&&!((e=r[0])===null||e===void 0)&&e.fulfilled&&!((n=r[0])===null||n===void 0)&&n.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||ZO()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await fm();return await B0(e,Oh,"1"),await H0(e,Oh),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(r=>B0(r,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(r=>rL(r,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>H0(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(i=>{const s=gd(i,!1).getAll();return new Au(s).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],r=new Set;if(e.length!==0)for(const{fbase_key:i,value:s}of e)r.add(i),JSON.stringify(this.localCache[i])!==JSON.stringify(s)&&(this.notifyListeners(i,s),n.push(i));for(const i of Object.keys(this.localCache))this.localCache[i]&&!r.has(i)&&(this.notifyListeners(i,null),n.push(i));return n}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const i of Array.from(r))i(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),iL)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}VT.type="LOCAL";const oL=VT;new Cu(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $T(t,e){return e?$r(e):(se(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jg extends Kg{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Ko(e,this._buildIdpRequest())}_linkToIdToken(e,n){return Ko(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return Ko(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function aL(t){return xT(t.auth,new Jg(t),t.bypassAuthState)}function lL(t){const{auth:e,user:n}=t;return se(n,e,"internal-error"),MO(n,new Jg(t),t.bypassAuthState)}async function uL(t){const{auth:e,user:n}=t;return se(n,e,"internal-error"),DO(n,new Jg(t),t.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FT{constructor(e,n,r,i,s=!1){this.auth=e,this.resolver=r,this.user=i,this.bypassAuthState=s,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:r,postBody:i,tenantId:s,error:o,type:a}=e;if(o){this.reject(o);return}const l={auth:this.auth,requestUri:n,sessionId:r,tenantId:s||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(a)(l))}catch(c){this.reject(c)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return aL;case"linkViaPopup":case"linkViaRedirect":return uL;case"reauthViaPopup":case"reauthViaRedirect":return lL;default:Dn(this.auth,"internal-error")}}resolve(e){Gr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Gr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cL=new Cu(2e3,1e4);async function hL(t,e,n){if(Wn(t.app))return Promise.reject(Kn(t,"operation-not-supported-in-this-environment"));const r=ss(t);BN(t,e,Xg);const i=$T(r,n);return new As(r,"signInViaPopup",e,i).executeNotNull()}class As extends FT{constructor(e,n,r,i,s){super(e,n,i,s),this.provider=r,this.authWindow=null,this.pollId=null,As.currentPopupAction&&As.currentPopupAction.cancel(),As.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return se(e,this.auth,"internal-error"),e}async onExecution(){Gr(this.filter.length===1,"Popup operations only handle one event");const e=Yg();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(Kn(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(Kn(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,As.currentPopupAction=null}pollUserCancellation(){const e=()=>{var n,r;if(!((r=(n=this.authWindow)===null||n===void 0?void 0:n.window)===null||r===void 0)&&r.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Kn(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,cL.get())};e()}}As.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dL="pendingRedirect",qc=new Map;class fL extends FT{constructor(e,n,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,r),this.eventId=null}async execute(){let e=qc.get(this.auth._key());if(!e){try{const r=await pL(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(n){e=()=>Promise.reject(n)}qc.set(this.auth._key(),e)}return this.bypassAuthState||qc.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function pL(t,e){const n=yL(e),r=gL(t);if(!await r._isAvailable())return!1;const i=await r._get(n)==="true";return await r._remove(n),i}function mL(t,e){qc.set(t._key(),e)}function gL(t){return $r(t._redirectPersistence)}function yL(t){return Wc(dL,t.config.apiKey,t.name)}async function vL(t,e,n=!1){if(Wn(t.app))return Promise.reject(zr(t));const r=ss(t),i=$T(r,e),o=await new fL(r,i,n).execute();return o&&!n&&(delete o.user._redirectEventId,await r._persistUserIfCurrent(o.user),await r._setRedirectUser(null,e)),o}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _L=10*60*1e3;class wL{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(n=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!EL(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var r;if(e.error&&!jT(e)){const i=((r=e.error.code)===null||r===void 0?void 0:r.split("auth/")[1])||"internal-error";n.onError(Kn(this.auth,i))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const r=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=_L&&this.cachedEventUids.clear(),this.cachedEventUids.has(W0(e))}saveEventToCache(e){this.cachedEventUids.add(W0(e)),this.lastProcessedEventTime=Date.now()}}function W0(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function jT({type:t,error:e}){return t==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function EL(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return jT(t);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function bL(t,e={}){return ti(t,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const TL=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,CL=/^https?/;async function IL(t){if(t.config.emulator)return;const{authorizedDomains:e}=await bL(t);for(const n of e)try{if(SL(n))return}catch{}Dn(t,"unauthorized-domain")}function SL(t){const e=cm(),{protocol:n,hostname:r}=new URL(e);if(t.startsWith("chrome-extension://")){const o=new URL(t);return o.hostname===""&&r===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&o.hostname===r}if(!CL.test(n))return!1;if(TL.test(t))return r===t;const i=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const AL=new Cu(3e4,6e4);function q0(){const t=cr().___jsl;if(t!=null&&t.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function xL(t){return new Promise((e,n)=>{var r,i,s;function o(){q0(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{q0(),n(Kn(t,"network-request-failed"))},timeout:AL.get()})}if(!((i=(r=cr().gapi)===null||r===void 0?void 0:r.iframes)===null||i===void 0)&&i.Iframe)e(gapi.iframes.getContext());else if(!((s=cr().gapi)===null||s===void 0)&&s.load)o();else{const a=vO("iframefcb");return cr()[a]=()=>{gapi.load?o():n(Kn(t,"network-request-failed"))},IT(`${yO()}?onload=${a}`).catch(l=>n(l))}}).catch(e=>{throw Gc=null,e})}let Gc=null;function kL(t){return Gc=Gc||xL(t),Gc}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const PL=new Cu(5e3,15e3),RL="__/auth/iframe",NL="emulator/auth/iframe",OL={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},LL=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function DL(t){const e=t.config;se(e.authDomain,t,"auth-domain-config-required");const n=e.emulator?Wg(e,NL):`https://${t.config.authDomain}/${RL}`,r={apiKey:e.apiKey,appName:t.name,v:Ia},i=LL.get(t.config.apiHost);i&&(r.eid=i);const s=t._getFrameworks();return s.length&&(r.fw=s.join(",")),`${n}?${Tu(r).slice(1)}`}async function ML(t){const e=await kL(t),n=cr().gapi;return se(n,t,"internal-error"),e.open({where:document.body,url:DL(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:OL,dontclear:!0},r=>new Promise(async(i,s)=>{await r.restyle({setHideOnLeave:!1});const o=Kn(t,"network-request-failed"),a=cr().setTimeout(()=>{s(o)},PL.get());function l(){cr().clearTimeout(a),i(r)}r.ping(l).then(l,()=>{s(o)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const UL={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},VL=500,$L=600,FL="_blank",jL="http://localhost";class G0{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function zL(t,e,n,r=VL,i=$L){const s=Math.max((window.screen.availHeight-i)/2,0).toString(),o=Math.max((window.screen.availWidth-r)/2,0).toString();let a="";const l=Object.assign(Object.assign({},UL),{width:r.toString(),height:i.toString(),top:s,left:o}),c=Lt().toLowerCase();n&&(a=vT(c)?FL:n),yT(c)&&(e=e||jL,l.scrollbars="yes");const h=Object.entries(l).reduce((p,[_,w])=>`${p}${_}=${w},`,"");if(aO(c)&&a!=="_self")return BL(e||"",a),new G0(null);const f=window.open(e||"",a,h);se(f,t,"popup-blocked");try{f.focus()}catch{}return new G0(f)}function BL(t,e){const n=document.createElement("a");n.href=t,n.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const HL="__/auth/handler",WL="emulator/auth/handler",qL=encodeURIComponent("fac");async function K0(t,e,n,r,i,s){se(t.config.authDomain,t,"auth-domain-config-required"),se(t.config.apiKey,t,"invalid-api-key");const o={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:r,v:Ia,eventId:i};if(e instanceof Xg){e.setDefaultLanguage(t.languageCode),o.providerId=e.providerId||"",kR(e.getCustomParameters())||(o.customParameters=JSON.stringify(e.getCustomParameters()));for(const[h,f]of Object.entries({}))o[h]=f}if(e instanceof Su){const h=e.getScopes().filter(f=>f!=="");h.length>0&&(o.scopes=h.join(","))}t.tenantId&&(o.tid=t.tenantId);const a=o;for(const h of Object.keys(a))a[h]===void 0&&delete a[h];const l=await t._getAppCheckToken(),c=l?`#${qL}=${encodeURIComponent(l)}`:"";return`${GL(t)}?${Tu(a).slice(1)}${c}`}function GL({config:t}){return t.emulator?Wg(t,WL):`https://${t.authDomain}/${HL}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gf="webStorageSupport";class KL{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=LT,this._completeRedirectFn=vL,this._overrideRedirectResult=mL}async _openPopup(e,n,r,i){var s;Gr((s=this.eventManagers[e._key()])===null||s===void 0?void 0:s.manager,"_initialize() not called before _openPopup()");const o=await K0(e,n,r,cm(),i);return zL(e,o,Yg())}async _openRedirect(e,n,r,i){await this._originValidation(e);const s=await K0(e,n,r,cm(),i);return YO(s),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:i,promise:s}=this.eventManagers[n];return i?Promise.resolve(i):(Gr(s,"If manager is not set, promise should be"),s)}const r=this.initAndGetManager(e);return this.eventManagers[n]={promise:r},r.catch(()=>{delete this.eventManagers[n]}),r}async initAndGetManager(e){const n=await ML(e),r=new wL(e);return n.register("authEvent",i=>(se(i==null?void 0:i.authEvent,e,"invalid-auth-event"),{status:r.onEvent(i.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=n,r}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(Gf,{type:Gf},i=>{var s;const o=(s=i==null?void 0:i[0])===null||s===void 0?void 0:s[Gf];o!==void 0&&n(!!o),Dn(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=IL(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return TT()||Gg()||fd()}}const QL=KL;var Q0="@firebase/auth",X0="1.7.4";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XL{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(r=>{e((r==null?void 0:r.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){se(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function YL(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function JL(t){sa(new Fs("auth",(e,{options:n})=>{const r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),s=e.getProvider("app-check-internal"),{apiKey:o,authDomain:a}=r.options;se(o&&!o.includes(":"),"invalid-api-key",{appName:r.name});const l={apiKey:o,authDomain:a,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:CT(t)},c=new pO(r,i,s,l);return TO(c,n),c},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,r)=>{e.getProvider("auth-internal").initialize()})),sa(new Fs("auth-internal",e=>{const n=ss(e.getProvider("auth").getImmediate());return(r=>new XL(r))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),Vi(Q0,X0,YL(t)),Vi(Q0,X0,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ZL=5*60,e4=nT("authIdTokenMaxAge")||ZL;let Y0=null;const t4=t=>async e=>{const n=e&&await e.getIdTokenResult(),r=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(r&&r>e4)return;const i=n==null?void 0:n.token;Y0!==i&&(Y0=i,await fetch(t,{method:i?"POST":"DELETE",headers:i?{Authorization:`Bearer ${i}`}:{}}))};function zT(t=oT()){const e=jg(t,"auth");if(e.isInitialized())return e.getImmediate();const n=bO(t,{popupRedirectResolver:QL,persistence:[oL,KO,LT]}),r=nT("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){const s=new URL(r,location.origin);if(location.origin===s.origin){const o=t4(s.toString());BO(n,o,()=>o(n.currentUser)),zO(n,a=>o(a))}}const i=eT("auth");return i&&CO(n,`http://${i}`),n}function n4(){var t,e;return(e=(t=document.getElementsByTagName("head"))===null||t===void 0?void 0:t[0])!==null&&e!==void 0?e:document}mO({loadJS(t){return new Promise((e,n)=>{const r=document.createElement("script");r.setAttribute("src",t),r.onload=e,r.onerror=i=>{const s=Kn("internal-error");s.customData=i,n(s)},r.type="text/javascript",r.charset="UTF-8",n4().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});JL("Browser");var J0=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Rs,BT;(function(){var t;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(g,y){function T(){}T.prototype=y.prototype,g.D=y.prototype,g.prototype=new T,g.prototype.constructor=g,g.C=function(A,k,P){for(var x=Array(arguments.length-2),Ie=2;Ie<arguments.length;Ie++)x[Ie-2]=arguments[Ie];return y.prototype[k].apply(A,x)}}function n(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(r,n),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(g,y,T){T||(T=0);var A=Array(16);if(typeof y=="string")for(var k=0;16>k;++k)A[k]=y.charCodeAt(T++)|y.charCodeAt(T++)<<8|y.charCodeAt(T++)<<16|y.charCodeAt(T++)<<24;else for(k=0;16>k;++k)A[k]=y[T++]|y[T++]<<8|y[T++]<<16|y[T++]<<24;y=g.g[0],T=g.g[1],k=g.g[2];var P=g.g[3],x=y+(P^T&(k^P))+A[0]+3614090360&4294967295;y=T+(x<<7&4294967295|x>>>25),x=P+(k^y&(T^k))+A[1]+3905402710&4294967295,P=y+(x<<12&4294967295|x>>>20),x=k+(T^P&(y^T))+A[2]+606105819&4294967295,k=P+(x<<17&4294967295|x>>>15),x=T+(y^k&(P^y))+A[3]+3250441966&4294967295,T=k+(x<<22&4294967295|x>>>10),x=y+(P^T&(k^P))+A[4]+4118548399&4294967295,y=T+(x<<7&4294967295|x>>>25),x=P+(k^y&(T^k))+A[5]+1200080426&4294967295,P=y+(x<<12&4294967295|x>>>20),x=k+(T^P&(y^T))+A[6]+2821735955&4294967295,k=P+(x<<17&4294967295|x>>>15),x=T+(y^k&(P^y))+A[7]+4249261313&4294967295,T=k+(x<<22&4294967295|x>>>10),x=y+(P^T&(k^P))+A[8]+1770035416&4294967295,y=T+(x<<7&4294967295|x>>>25),x=P+(k^y&(T^k))+A[9]+2336552879&4294967295,P=y+(x<<12&4294967295|x>>>20),x=k+(T^P&(y^T))+A[10]+4294925233&4294967295,k=P+(x<<17&4294967295|x>>>15),x=T+(y^k&(P^y))+A[11]+2304563134&4294967295,T=k+(x<<22&4294967295|x>>>10),x=y+(P^T&(k^P))+A[12]+1804603682&4294967295,y=T+(x<<7&4294967295|x>>>25),x=P+(k^y&(T^k))+A[13]+4254626195&4294967295,P=y+(x<<12&4294967295|x>>>20),x=k+(T^P&(y^T))+A[14]+2792965006&4294967295,k=P+(x<<17&4294967295|x>>>15),x=T+(y^k&(P^y))+A[15]+1236535329&4294967295,T=k+(x<<22&4294967295|x>>>10),x=y+(k^P&(T^k))+A[1]+4129170786&4294967295,y=T+(x<<5&4294967295|x>>>27),x=P+(T^k&(y^T))+A[6]+3225465664&4294967295,P=y+(x<<9&4294967295|x>>>23),x=k+(y^T&(P^y))+A[11]+643717713&4294967295,k=P+(x<<14&4294967295|x>>>18),x=T+(P^y&(k^P))+A[0]+3921069994&4294967295,T=k+(x<<20&4294967295|x>>>12),x=y+(k^P&(T^k))+A[5]+3593408605&4294967295,y=T+(x<<5&4294967295|x>>>27),x=P+(T^k&(y^T))+A[10]+38016083&4294967295,P=y+(x<<9&4294967295|x>>>23),x=k+(y^T&(P^y))+A[15]+3634488961&4294967295,k=P+(x<<14&4294967295|x>>>18),x=T+(P^y&(k^P))+A[4]+3889429448&4294967295,T=k+(x<<20&4294967295|x>>>12),x=y+(k^P&(T^k))+A[9]+568446438&4294967295,y=T+(x<<5&4294967295|x>>>27),x=P+(T^k&(y^T))+A[14]+3275163606&4294967295,P=y+(x<<9&4294967295|x>>>23),x=k+(y^T&(P^y))+A[3]+4107603335&4294967295,k=P+(x<<14&4294967295|x>>>18),x=T+(P^y&(k^P))+A[8]+1163531501&4294967295,T=k+(x<<20&4294967295|x>>>12),x=y+(k^P&(T^k))+A[13]+2850285829&4294967295,y=T+(x<<5&4294967295|x>>>27),x=P+(T^k&(y^T))+A[2]+4243563512&4294967295,P=y+(x<<9&4294967295|x>>>23),x=k+(y^T&(P^y))+A[7]+1735328473&4294967295,k=P+(x<<14&4294967295|x>>>18),x=T+(P^y&(k^P))+A[12]+2368359562&4294967295,T=k+(x<<20&4294967295|x>>>12),x=y+(T^k^P)+A[5]+4294588738&4294967295,y=T+(x<<4&4294967295|x>>>28),x=P+(y^T^k)+A[8]+2272392833&4294967295,P=y+(x<<11&4294967295|x>>>21),x=k+(P^y^T)+A[11]+1839030562&4294967295,k=P+(x<<16&4294967295|x>>>16),x=T+(k^P^y)+A[14]+4259657740&4294967295,T=k+(x<<23&4294967295|x>>>9),x=y+(T^k^P)+A[1]+2763975236&4294967295,y=T+(x<<4&4294967295|x>>>28),x=P+(y^T^k)+A[4]+1272893353&4294967295,P=y+(x<<11&4294967295|x>>>21),x=k+(P^y^T)+A[7]+4139469664&4294967295,k=P+(x<<16&4294967295|x>>>16),x=T+(k^P^y)+A[10]+3200236656&4294967295,T=k+(x<<23&4294967295|x>>>9),x=y+(T^k^P)+A[13]+681279174&4294967295,y=T+(x<<4&4294967295|x>>>28),x=P+(y^T^k)+A[0]+3936430074&4294967295,P=y+(x<<11&4294967295|x>>>21),x=k+(P^y^T)+A[3]+3572445317&4294967295,k=P+(x<<16&4294967295|x>>>16),x=T+(k^P^y)+A[6]+76029189&4294967295,T=k+(x<<23&4294967295|x>>>9),x=y+(T^k^P)+A[9]+3654602809&4294967295,y=T+(x<<4&4294967295|x>>>28),x=P+(y^T^k)+A[12]+3873151461&4294967295,P=y+(x<<11&4294967295|x>>>21),x=k+(P^y^T)+A[15]+530742520&4294967295,k=P+(x<<16&4294967295|x>>>16),x=T+(k^P^y)+A[2]+3299628645&4294967295,T=k+(x<<23&4294967295|x>>>9),x=y+(k^(T|~P))+A[0]+4096336452&4294967295,y=T+(x<<6&4294967295|x>>>26),x=P+(T^(y|~k))+A[7]+1126891415&4294967295,P=y+(x<<10&4294967295|x>>>22),x=k+(y^(P|~T))+A[14]+2878612391&4294967295,k=P+(x<<15&4294967295|x>>>17),x=T+(P^(k|~y))+A[5]+4237533241&4294967295,T=k+(x<<21&4294967295|x>>>11),x=y+(k^(T|~P))+A[12]+1700485571&4294967295,y=T+(x<<6&4294967295|x>>>26),x=P+(T^(y|~k))+A[3]+2399980690&4294967295,P=y+(x<<10&4294967295|x>>>22),x=k+(y^(P|~T))+A[10]+4293915773&4294967295,k=P+(x<<15&4294967295|x>>>17),x=T+(P^(k|~y))+A[1]+2240044497&4294967295,T=k+(x<<21&4294967295|x>>>11),x=y+(k^(T|~P))+A[8]+1873313359&4294967295,y=T+(x<<6&4294967295|x>>>26),x=P+(T^(y|~k))+A[15]+4264355552&4294967295,P=y+(x<<10&4294967295|x>>>22),x=k+(y^(P|~T))+A[6]+2734768916&4294967295,k=P+(x<<15&4294967295|x>>>17),x=T+(P^(k|~y))+A[13]+1309151649&4294967295,T=k+(x<<21&4294967295|x>>>11),x=y+(k^(T|~P))+A[4]+4149444226&4294967295,y=T+(x<<6&4294967295|x>>>26),x=P+(T^(y|~k))+A[11]+3174756917&4294967295,P=y+(x<<10&4294967295|x>>>22),x=k+(y^(P|~T))+A[2]+718787259&4294967295,k=P+(x<<15&4294967295|x>>>17),x=T+(P^(k|~y))+A[9]+3951481745&4294967295,g.g[0]=g.g[0]+y&4294967295,g.g[1]=g.g[1]+(k+(x<<21&4294967295|x>>>11))&4294967295,g.g[2]=g.g[2]+k&4294967295,g.g[3]=g.g[3]+P&4294967295}r.prototype.u=function(g,y){y===void 0&&(y=g.length);for(var T=y-this.blockSize,A=this.B,k=this.h,P=0;P<y;){if(k==0)for(;P<=T;)i(this,g,P),P+=this.blockSize;if(typeof g=="string"){for(;P<y;)if(A[k++]=g.charCodeAt(P++),k==this.blockSize){i(this,A),k=0;break}}else for(;P<y;)if(A[k++]=g[P++],k==this.blockSize){i(this,A),k=0;break}}this.h=k,this.o+=y},r.prototype.v=function(){var g=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);g[0]=128;for(var y=1;y<g.length-8;++y)g[y]=0;var T=8*this.o;for(y=g.length-8;y<g.length;++y)g[y]=T&255,T/=256;for(this.u(g),g=Array(16),y=T=0;4>y;++y)for(var A=0;32>A;A+=8)g[T++]=this.g[y]>>>A&255;return g};function s(g,y){var T=a;return Object.prototype.hasOwnProperty.call(T,g)?T[g]:T[g]=y(g)}function o(g,y){this.h=y;for(var T=[],A=!0,k=g.length-1;0<=k;k--){var P=g[k]|0;A&&P==y||(T[k]=P,A=!1)}this.g=T}var a={};function l(g){return-128<=g&&128>g?s(g,function(y){return new o([y|0],0>y?-1:0)}):new o([g|0],0>g?-1:0)}function c(g){if(isNaN(g)||!isFinite(g))return f;if(0>g)return R(c(-g));for(var y=[],T=1,A=0;g>=T;A++)y[A]=g/T|0,T*=4294967296;return new o(y,0)}function h(g,y){if(g.length==0)throw Error("number format error: empty string");if(y=y||10,2>y||36<y)throw Error("radix out of range: "+y);if(g.charAt(0)=="-")return R(h(g.substring(1),y));if(0<=g.indexOf("-"))throw Error('number format error: interior "-" character');for(var T=c(Math.pow(y,8)),A=f,k=0;k<g.length;k+=8){var P=Math.min(8,g.length-k),x=parseInt(g.substring(k,k+P),y);8>P?(P=c(Math.pow(y,P)),A=A.j(P).add(c(x))):(A=A.j(T),A=A.add(c(x)))}return A}var f=l(0),p=l(1),_=l(16777216);t=o.prototype,t.m=function(){if(I(this))return-R(this).m();for(var g=0,y=1,T=0;T<this.g.length;T++){var A=this.i(T);g+=(0<=A?A:4294967296+A)*y,y*=4294967296}return g},t.toString=function(g){if(g=g||10,2>g||36<g)throw Error("radix out of range: "+g);if(w(this))return"0";if(I(this))return"-"+R(this).toString(g);for(var y=c(Math.pow(g,6)),T=this,A="";;){var k=D(T,y).g;T=C(T,k.j(y));var P=((0<T.g.length?T.g[0]:T.h)>>>0).toString(g);if(T=k,w(T))return P+A;for(;6>P.length;)P="0"+P;A=P+A}},t.i=function(g){return 0>g?0:g<this.g.length?this.g[g]:this.h};function w(g){if(g.h!=0)return!1;for(var y=0;y<g.g.length;y++)if(g.g[y]!=0)return!1;return!0}function I(g){return g.h==-1}t.l=function(g){return g=C(this,g),I(g)?-1:w(g)?0:1};function R(g){for(var y=g.g.length,T=[],A=0;A<y;A++)T[A]=~g.g[A];return new o(T,~g.h).add(p)}t.abs=function(){return I(this)?R(this):this},t.add=function(g){for(var y=Math.max(this.g.length,g.g.length),T=[],A=0,k=0;k<=y;k++){var P=A+(this.i(k)&65535)+(g.i(k)&65535),x=(P>>>16)+(this.i(k)>>>16)+(g.i(k)>>>16);A=x>>>16,P&=65535,x&=65535,T[k]=x<<16|P}return new o(T,T[T.length-1]&-2147483648?-1:0)};function C(g,y){return g.add(R(y))}t.j=function(g){if(w(this)||w(g))return f;if(I(this))return I(g)?R(this).j(R(g)):R(R(this).j(g));if(I(g))return R(this.j(R(g)));if(0>this.l(_)&&0>g.l(_))return c(this.m()*g.m());for(var y=this.g.length+g.g.length,T=[],A=0;A<2*y;A++)T[A]=0;for(A=0;A<this.g.length;A++)for(var k=0;k<g.g.length;k++){var P=this.i(A)>>>16,x=this.i(A)&65535,Ie=g.i(k)>>>16,it=g.i(k)&65535;T[2*A+2*k]+=x*it,E(T,2*A+2*k),T[2*A+2*k+1]+=P*it,E(T,2*A+2*k+1),T[2*A+2*k+1]+=x*Ie,E(T,2*A+2*k+1),T[2*A+2*k+2]+=P*Ie,E(T,2*A+2*k+2)}for(A=0;A<y;A++)T[A]=T[2*A+1]<<16|T[2*A];for(A=y;A<2*y;A++)T[A]=0;return new o(T,0)};function E(g,y){for(;(g[y]&65535)!=g[y];)g[y+1]+=g[y]>>>16,g[y]&=65535,y++}function S(g,y){this.g=g,this.h=y}function D(g,y){if(w(y))throw Error("division by zero");if(w(g))return new S(f,f);if(I(g))return y=D(R(g),y),new S(R(y.g),R(y.h));if(I(y))return y=D(g,R(y)),new S(R(y.g),y.h);if(30<g.g.length){if(I(g)||I(y))throw Error("slowDivide_ only works with positive integers.");for(var T=p,A=y;0>=A.l(g);)T=F(T),A=F(A);var k=z(T,1),P=z(A,1);for(A=z(A,2),T=z(T,2);!w(A);){var x=P.add(A);0>=x.l(g)&&(k=k.add(T),P=x),A=z(A,1),T=z(T,1)}return y=C(g,k.j(y)),new S(k,y)}for(k=f;0<=g.l(y);){for(T=Math.max(1,Math.floor(g.m()/y.m())),A=Math.ceil(Math.log(T)/Math.LN2),A=48>=A?1:Math.pow(2,A-48),P=c(T),x=P.j(y);I(x)||0<x.l(g);)T-=A,P=c(T),x=P.j(y);w(P)&&(P=p),k=k.add(P),g=C(g,x)}return new S(k,g)}t.A=function(g){return D(this,g).h},t.and=function(g){for(var y=Math.max(this.g.length,g.g.length),T=[],A=0;A<y;A++)T[A]=this.i(A)&g.i(A);return new o(T,this.h&g.h)},t.or=function(g){for(var y=Math.max(this.g.length,g.g.length),T=[],A=0;A<y;A++)T[A]=this.i(A)|g.i(A);return new o(T,this.h|g.h)},t.xor=function(g){for(var y=Math.max(this.g.length,g.g.length),T=[],A=0;A<y;A++)T[A]=this.i(A)^g.i(A);return new o(T,this.h^g.h)};function F(g){for(var y=g.g.length+1,T=[],A=0;A<y;A++)T[A]=g.i(A)<<1|g.i(A-1)>>>31;return new o(T,g.h)}function z(g,y){var T=y>>5;y%=32;for(var A=g.g.length-T,k=[],P=0;P<A;P++)k[P]=0<y?g.i(P+T)>>>y|g.i(P+T+1)<<32-y:g.i(P+T);return new o(k,g.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,BT=r,o.prototype.add=o.prototype.add,o.prototype.multiply=o.prototype.j,o.prototype.modulo=o.prototype.A,o.prototype.compare=o.prototype.l,o.prototype.toNumber=o.prototype.m,o.prototype.toString=o.prototype.toString,o.prototype.getBits=o.prototype.i,o.fromNumber=c,o.fromString=h,Rs=o}).apply(typeof J0<"u"?J0:typeof self<"u"?self:typeof window<"u"?window:{});var bc=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var HT,WT,_l,qT,Kc,pm,GT,KT,QT;(function(){var t,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(u,d,m){return u==Array.prototype||u==Object.prototype||(u[d]=m.value),u};function n(u){u=[typeof globalThis=="object"&&globalThis,u,typeof window=="object"&&window,typeof self=="object"&&self,typeof bc=="object"&&bc];for(var d=0;d<u.length;++d){var m=u[d];if(m&&m.Math==Math)return m}throw Error("Cannot find global object")}var r=n(this);function i(u,d){if(d)e:{var m=r;u=u.split(".");for(var v=0;v<u.length-1;v++){var O=u[v];if(!(O in m))break e;m=m[O]}u=u[u.length-1],v=m[u],d=d(v),d!=v&&d!=null&&e(m,u,{configurable:!0,writable:!0,value:d})}}function s(u,d){u instanceof String&&(u+="");var m=0,v=!1,O={next:function(){if(!v&&m<u.length){var V=m++;return{value:d(V,u[V]),done:!1}}return v=!0,{done:!0,value:void 0}}};return O[Symbol.iterator]=function(){return O},O}i("Array.prototype.values",function(u){return u||function(){return s(this,function(d,m){return m})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var o=o||{},a=this||self;function l(u){var d=typeof u;return d=d!="object"?d:u?Array.isArray(u)?"array":d:"null",d=="array"||d=="object"&&typeof u.length=="number"}function c(u){var d=typeof u;return d=="object"&&u!=null||d=="function"}function h(u,d,m){return u.call.apply(u.bind,arguments)}function f(u,d,m){if(!u)throw Error();if(2<arguments.length){var v=Array.prototype.slice.call(arguments,2);return function(){var O=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(O,v),u.apply(d,O)}}return function(){return u.apply(d,arguments)}}function p(u,d,m){return p=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?h:f,p.apply(null,arguments)}function _(u,d){var m=Array.prototype.slice.call(arguments,1);return function(){var v=m.slice();return v.push.apply(v,arguments),u.apply(this,v)}}function w(u,d){function m(){}m.prototype=d.prototype,u.aa=d.prototype,u.prototype=new m,u.prototype.constructor=u,u.Qb=function(v,O,V){for(var G=Array(arguments.length-2),Re=2;Re<arguments.length;Re++)G[Re-2]=arguments[Re];return d.prototype[O].apply(v,G)}}function I(u){const d=u.length;if(0<d){const m=Array(d);for(let v=0;v<d;v++)m[v]=u[v];return m}return[]}function R(u,d){for(let m=1;m<arguments.length;m++){const v=arguments[m];if(l(v)){const O=u.length||0,V=v.length||0;u.length=O+V;for(let G=0;G<V;G++)u[O+G]=v[G]}else u.push(v)}}class C{constructor(d,m){this.i=d,this.j=m,this.h=0,this.g=null}get(){let d;return 0<this.h?(this.h--,d=this.g,this.g=d.next,d.next=null):d=this.i(),d}}function E(u){return/^[\s\xa0]*$/.test(u)}function S(){var u=a.navigator;return u&&(u=u.userAgent)?u:""}function D(u){return D[" "](u),u}D[" "]=function(){};var F=S().indexOf("Gecko")!=-1&&!(S().toLowerCase().indexOf("webkit")!=-1&&S().indexOf("Edge")==-1)&&!(S().indexOf("Trident")!=-1||S().indexOf("MSIE")!=-1)&&S().indexOf("Edge")==-1;function z(u,d,m){for(const v in u)d.call(m,u[v],v,u)}function g(u,d){for(const m in u)d.call(void 0,u[m],m,u)}function y(u){const d={};for(const m in u)d[m]=u[m];return d}const T="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function A(u,d){let m,v;for(let O=1;O<arguments.length;O++){v=arguments[O];for(m in v)u[m]=v[m];for(let V=0;V<T.length;V++)m=T[V],Object.prototype.hasOwnProperty.call(v,m)&&(u[m]=v[m])}}function k(u){var d=1;u=u.split(":");const m=[];for(;0<d&&u.length;)m.push(u.shift()),d--;return u.length&&m.push(u.join(":")),m}function P(u){a.setTimeout(()=>{throw u},0)}function x(){var u=ee;let d=null;return u.g&&(d=u.g,u.g=u.g.next,u.g||(u.h=null),d.next=null),d}class Ie{constructor(){this.h=this.g=null}add(d,m){const v=it.get();v.set(d,m),this.h?this.h.next=v:this.g=v,this.h=v}}var it=new C(()=>new Wt,u=>u.reset());class Wt{constructor(){this.next=this.g=this.h=null}set(d,m){this.h=d,this.g=m,this.next=null}reset(){this.next=this.g=this.h=null}}let wt,H=!1,ee=new Ie,re=()=>{const u=a.Promise.resolve(void 0);wt=()=>{u.then(_e)}};var _e=()=>{for(var u;u=x();){try{u.h.call(u.g)}catch(m){P(m)}var d=it;d.j(u),100>d.h&&(d.h++,u.next=d.g,d.g=u)}H=!1};function he(){this.s=this.s,this.C=this.C}he.prototype.s=!1,he.prototype.ma=function(){this.s||(this.s=!0,this.N())},he.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function Pe(u,d){this.type=u,this.g=this.target=d,this.defaultPrevented=!1}Pe.prototype.h=function(){this.defaultPrevented=!0};var qt=function(){if(!a.addEventListener||!Object.defineProperty)return!1;var u=!1,d=Object.defineProperty({},"passive",{get:function(){u=!0}});try{const m=()=>{};a.addEventListener("test",m,d),a.removeEventListener("test",m,d)}catch{}return u}();function ht(u,d){if(Pe.call(this,u?u.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,u){var m=this.type=u.type,v=u.changedTouches&&u.changedTouches.length?u.changedTouches[0]:null;if(this.target=u.target||u.srcElement,this.g=d,d=u.relatedTarget){if(F){e:{try{D(d.nodeName);var O=!0;break e}catch{}O=!1}O||(d=null)}}else m=="mouseover"?d=u.fromElement:m=="mouseout"&&(d=u.toElement);this.relatedTarget=d,v?(this.clientX=v.clientX!==void 0?v.clientX:v.pageX,this.clientY=v.clientY!==void 0?v.clientY:v.pageY,this.screenX=v.screenX||0,this.screenY=v.screenY||0):(this.clientX=u.clientX!==void 0?u.clientX:u.pageX,this.clientY=u.clientY!==void 0?u.clientY:u.pageY,this.screenX=u.screenX||0,this.screenY=u.screenY||0),this.button=u.button,this.key=u.key||"",this.ctrlKey=u.ctrlKey,this.altKey=u.altKey,this.shiftKey=u.shiftKey,this.metaKey=u.metaKey,this.pointerId=u.pointerId||0,this.pointerType=typeof u.pointerType=="string"?u.pointerType:Et[u.pointerType]||"",this.state=u.state,this.i=u,u.defaultPrevented&&ht.aa.h.call(this)}}w(ht,Pe);var Et={2:"touch",3:"pen",4:"mouse"};ht.prototype.h=function(){ht.aa.h.call(this);var u=this.i;u.preventDefault?u.preventDefault():u.returnValue=!1};var bt="closure_listenable_"+(1e6*Math.random()|0),La=0;function ef(u,d,m,v,O){this.listener=u,this.proxy=null,this.src=d,this.type=m,this.capture=!!v,this.ha=O,this.key=++La,this.da=this.fa=!1}function ro(u){u.da=!0,u.listener=null,u.proxy=null,u.src=null,u.ha=null}function io(u){this.src=u,this.g={},this.h=0}io.prototype.add=function(u,d,m,v,O){var V=u.toString();u=this.g[V],u||(u=this.g[V]=[],this.h++);var G=_r(u,d,v,O);return-1<G?(d=u[G],m||(d.fa=!1)):(d=new ef(d,this.src,V,!!v,O),d.fa=m,u.push(d)),d};function Tt(u,d){var m=d.type;if(m in u.g){var v=u.g[m],O=Array.prototype.indexOf.call(v,d,void 0),V;(V=0<=O)&&Array.prototype.splice.call(v,O,1),V&&(ro(d),u.g[m].length==0&&(delete u.g[m],u.h--))}}function _r(u,d,m,v){for(var O=0;O<u.length;++O){var V=u[O];if(!V.da&&V.listener==d&&V.capture==!!m&&V.ha==v)return O}return-1}var so="closure_lm_"+(1e6*Math.random()|0),Da={};function Zn(u,d,m,v,O){if(Array.isArray(d)){for(var V=0;V<d.length;V++)Zn(u,d[V],m,v,O);return null}return m=ao(m),u&&u[bt]?u.K(d,m,c(v)?!!v.capture:!!v,O):tf(u,d,m,!1,v,O)}function tf(u,d,m,v,O,V){if(!d)throw Error("Invalid event type");var G=c(O)?!!O.capture:!!O,Re=wr(u);if(Re||(u[so]=Re=new io(u)),m=Re.add(d,m,v,G,V),m.proxy)return m;if(v=nf(),m.proxy=v,v.src=u,v.listener=m,u.addEventListener)qt||(O=G),O===void 0&&(O=!1),u.addEventListener(d.toString(),v,O);else if(u.attachEvent)u.attachEvent(Bu(d.toString()),v);else if(u.addListener&&u.removeListener)u.addListener(v);else throw Error("addEventListener and attachEvent are unavailable.");return m}function nf(){function u(m){return d.call(u.src,u.listener,m)}const d=us;return u}function zu(u,d,m,v,O){if(Array.isArray(d))for(var V=0;V<d.length;V++)zu(u,d[V],m,v,O);else v=c(v)?!!v.capture:!!v,m=ao(m),u&&u[bt]?(u=u.i,d=String(d).toString(),d in u.g&&(V=u.g[d],m=_r(V,m,v,O),-1<m&&(ro(V[m]),Array.prototype.splice.call(V,m,1),V.length==0&&(delete u.g[d],u.h--)))):u&&(u=wr(u))&&(d=u.g[d.toString()],u=-1,d&&(u=_r(d,m,v,O)),(m=-1<u?d[u]:null)&&Ma(m))}function Ma(u){if(typeof u!="number"&&u&&!u.da){var d=u.src;if(d&&d[bt])Tt(d.i,u);else{var m=u.type,v=u.proxy;d.removeEventListener?d.removeEventListener(m,v,u.capture):d.detachEvent?d.detachEvent(Bu(m),v):d.addListener&&d.removeListener&&d.removeListener(v),(m=wr(d))?(Tt(m,u),m.h==0&&(m.src=null,d[so]=null)):ro(u)}}}function Bu(u){return u in Da?Da[u]:Da[u]="on"+u}function us(u,d){if(u.da)u=!0;else{d=new ht(d,this);var m=u.listener,v=u.ha||u.src;u.fa&&Ma(u),u=m.call(v,d)}return u}function wr(u){return u=u[so],u instanceof io?u:null}var oo="__closure_events_fn_"+(1e9*Math.random()>>>0);function ao(u){return typeof u=="function"?u:(u[oo]||(u[oo]=function(d){return u.handleEvent(d)}),u[oo])}function Me(){he.call(this),this.i=new io(this),this.M=this,this.F=null}w(Me,he),Me.prototype[bt]=!0,Me.prototype.removeEventListener=function(u,d,m,v){zu(this,u,d,m,v)};function et(u,d){var m,v=u.F;if(v)for(m=[];v;v=v.F)m.push(v);if(u=u.M,v=d.type||d,typeof d=="string")d=new Pe(d,u);else if(d instanceof Pe)d.target=d.target||u;else{var O=d;d=new Pe(v,u),A(d,O)}if(O=!0,m)for(var V=m.length-1;0<=V;V--){var G=d.g=m[V];O=cs(G,v,!0,d)&&O}if(G=d.g=u,O=cs(G,v,!0,d)&&O,O=cs(G,v,!1,d)&&O,m)for(V=0;V<m.length;V++)G=d.g=m[V],O=cs(G,v,!1,d)&&O}Me.prototype.N=function(){if(Me.aa.N.call(this),this.i){var u=this.i,d;for(d in u.g){for(var m=u.g[d],v=0;v<m.length;v++)ro(m[v]);delete u.g[d],u.h--}}this.F=null},Me.prototype.K=function(u,d,m,v){return this.i.add(String(u),d,!1,m,v)},Me.prototype.L=function(u,d,m,v){return this.i.add(String(u),d,!0,m,v)};function cs(u,d,m,v){if(d=u.i.g[String(d)],!d)return!0;d=d.concat();for(var O=!0,V=0;V<d.length;++V){var G=d[V];if(G&&!G.da&&G.capture==m){var Re=G.listener,St=G.ha||G.src;G.fa&&Tt(u.i,G),O=Re.call(St,v)!==!1&&O}}return O&&!v.defaultPrevented}function hs(u,d,m){if(typeof u=="function")m&&(u=p(u,m));else if(u&&typeof u.handleEvent=="function")u=p(u.handleEvent,u);else throw Error("Invalid listener argument");return 2147483647<Number(d)?-1:a.setTimeout(u,d||0)}function Hu(u){u.g=hs(()=>{u.g=null,u.i&&(u.i=!1,Hu(u))},u.l);const d=u.h;u.h=null,u.m.apply(null,d)}class er extends he{constructor(d,m){super(),this.m=d,this.l=m,this.h=null,this.i=!1,this.g=null}j(d){this.h=arguments,this.g?this.i=!0:Hu(this)}N(){super.N(),this.g&&(a.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function ri(u){he.call(this),this.h=u,this.g={}}w(ri,he);var Ua=[];function Va(u){z(u.g,function(d,m){this.g.hasOwnProperty(m)&&Ma(d)},u),u.g={}}ri.prototype.N=function(){ri.aa.N.call(this),Va(this)},ri.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var $a=a.JSON.stringify,Wu=a.JSON.parse,lo=class{stringify(u){return a.JSON.stringify(u,void 0)}parse(u){return a.JSON.parse(u,void 0)}};function uo(){}uo.prototype.h=null;function co(u){return u.h||(u.h=u.i())}function qu(){}var ii={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function Fa(){Pe.call(this,"d")}w(Fa,Pe);function ho(){Pe.call(this,"c")}w(ho,Pe);var Er={},N=null;function M(){return N=N||new Me}Er.La="serverreachability";function $(u){Pe.call(this,Er.La,u)}w($,Pe);function q(u){const d=M();et(d,new $(d))}Er.STAT_EVENT="statevent";function Q(u,d){Pe.call(this,Er.STAT_EVENT,u),this.stat=d}w(Q,Pe);function Z(u){const d=M();et(d,new Q(d,u))}Er.Ma="timingevent";function te(u,d){Pe.call(this,Er.Ma,u),this.size=d}w(te,Pe);function K(u,d){if(typeof u!="function")throw Error("Fn must not be null and must be a function");return a.setTimeout(function(){u()},d)}function oe(){this.g=!0}oe.prototype.xa=function(){this.g=!1};function ae(u,d,m,v,O,V){u.info(function(){if(u.g)if(V)for(var G="",Re=V.split("&"),St=0;St<Re.length;St++){var Se=Re[St].split("=");if(1<Se.length){var Dt=Se[0];Se=Se[1];var Mt=Dt.split("_");G=2<=Mt.length&&Mt[1]=="type"?G+(Dt+"="+Se+"&"):G+(Dt+"=redacted&")}}else G=null;else G=V;return"XMLHTTP REQ ("+v+") [attempt "+O+"]: "+d+`
`+m+`
`+G})}function dt(u,d,m,v,O,V,G){u.info(function(){return"XMLHTTP RESP ("+v+") [ attempt "+O+"]: "+d+`
`+m+`
`+V+" "+G})}function ze(u,d,m,v){u.info(function(){return"XMLHTTP TEXT ("+d+"): "+Oe(u,m)+(v?" "+v:"")})}function ie(u,d){u.info(function(){return"TIMEOUT: "+d})}oe.prototype.info=function(){};function Oe(u,d){if(!u.g)return d;if(!d)return null;try{var m=JSON.parse(d);if(m){for(u=0;u<m.length;u++)if(Array.isArray(m[u])){var v=m[u];if(!(2>v.length)){var O=v[1];if(Array.isArray(O)&&!(1>O.length)){var V=O[0];if(V!="noop"&&V!="stop"&&V!="close")for(var G=1;G<O.length;G++)O[G]=""}}}}return $a(m)}catch{return d}}var We={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},si={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},bn;function Un(){}w(Un,uo),Un.prototype.g=function(){return new XMLHttpRequest},Un.prototype.i=function(){return{}},bn=new Un;function Gt(u,d,m,v){this.j=u,this.i=d,this.l=m,this.R=v||1,this.U=new ri(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new br}function br(){this.i=null,this.g="",this.h=!1}var hn={},oi={};function ai(u,d,m){u.L=1,u.v=Qu(Ir(d)),u.m=m,u.P=!0,ds(u,null)}function ds(u,d){u.F=Date.now(),It(u),u.A=Ir(u.v);var m=u.A,v=u.R;Array.isArray(v)||(v=[String(v)]),bv(m.i,"t",v),u.C=0,m=u.j.J,u.h=new br,u.g=Fv(u.j,m?d:null,!u.m),0<u.O&&(u.M=new er(p(u.Y,u,u.g),u.O)),d=u.U,m=u.g,v=u.ca;var O="readystatechange";Array.isArray(O)||(O&&(Ua[0]=O.toString()),O=Ua);for(var V=0;V<O.length;V++){var G=Zn(m,O[V],v||d.handleEvent,!1,d.h||d);if(!G)break;d.g[G.key]=G}d=u.H?y(u.H):{},u.m?(u.u||(u.u="POST"),d["Content-Type"]="application/x-www-form-urlencoded",u.g.ea(u.A,u.u,u.m,d)):(u.u="GET",u.g.ea(u.A,u.u,null,d)),q(),ae(u.i,u.u,u.A,u.l,u.R,u.m)}Gt.prototype.ca=function(u){u=u.target;const d=this.M;d&&Sr(u)==3?d.j():this.Y(u)},Gt.prototype.Y=function(u){try{if(u==this.g)e:{const Mt=Sr(this.g);var d=this.g.Ba();const mo=this.g.Z();if(!(3>Mt)&&(Mt!=3||this.g&&(this.h.h||this.g.oa()||kv(this.g)))){this.J||Mt!=4||d==7||(d==8||0>=mo?q(3):q(2)),Tr(this);var m=this.g.Z();this.X=m;t:if(ye(this)){var v=kv(this.g);u="";var O=v.length,V=Sr(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){Cr(this),li(this);var G="";break t}this.h.i=new a.TextDecoder}for(d=0;d<O;d++)this.h.h=!0,u+=this.h.i.decode(v[d],{stream:!(V&&d==O-1)});v.length=0,this.h.g+=u,this.C=0,G=this.h.g}else G=this.g.oa();if(this.o=m==200,dt(this.i,this.u,this.A,this.l,this.R,Mt,m),this.o){if(this.T&&!this.K){t:{if(this.g){var Re,St=this.g;if((Re=St.g?St.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!E(Re)){var Se=Re;break t}}Se=null}if(m=Se)ze(this.i,this.l,m,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,rf(this,m);else{this.o=!1,this.s=3,Z(12),Cr(this),li(this);break e}}if(this.P){m=!0;let Vn;for(;!this.J&&this.C<G.length;)if(Vn=Ct(this,G),Vn==oi){Mt==4&&(this.s=4,Z(14),m=!1),ze(this.i,this.l,null,"[Incomplete Response]");break}else if(Vn==hn){this.s=4,Z(15),ze(this.i,this.l,G,"[Invalid Chunk]"),m=!1;break}else ze(this.i,this.l,Vn,null),rf(this,Vn);if(ye(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Mt!=4||G.length!=0||this.h.h||(this.s=1,Z(16),m=!1),this.o=this.o&&m,!m)ze(this.i,this.l,G,"[Invalid Chunked Response]"),Cr(this),li(this);else if(0<G.length&&!this.W){this.W=!0;var Dt=this.j;Dt.g==this&&Dt.ba&&!Dt.M&&(Dt.j.info("Great, no buffering proxy detected. Bytes received: "+G.length),cf(Dt),Dt.M=!0,Z(11))}}else ze(this.i,this.l,G,null),rf(this,G);Mt==4&&Cr(this),this.o&&!this.J&&(Mt==4?Mv(this.j,this):(this.o=!1,It(this)))}else iS(this.g),m==400&&0<G.indexOf("Unknown SID")?(this.s=3,Z(12)):(this.s=0,Z(13)),Cr(this),li(this)}}}catch{}finally{}};function ye(u){return u.g?u.u=="GET"&&u.L!=2&&u.j.Ca:!1}function Ct(u,d){var m=u.C,v=d.indexOf(`
`,m);return v==-1?oi:(m=Number(d.substring(m,v)),isNaN(m)?hn:(v+=1,v+m>d.length?oi:(d=d.slice(v,v+m),u.C=v+m,d)))}Gt.prototype.cancel=function(){this.J=!0,Cr(this)};function It(u){u.S=Date.now()+u.I,st(u,u.I)}function st(u,d){if(u.B!=null)throw Error("WatchDog timer not null");u.B=K(p(u.ba,u),d)}function Tr(u){u.B&&(a.clearTimeout(u.B),u.B=null)}Gt.prototype.ba=function(){this.B=null;const u=Date.now();0<=u-this.S?(ie(this.i,this.A),this.L!=2&&(q(),Z(17)),Cr(this),this.s=2,li(this)):st(this,this.S-u)};function li(u){u.j.G==0||u.J||Mv(u.j,u)}function Cr(u){Tr(u);var d=u.M;d&&typeof d.ma=="function"&&d.ma(),u.M=null,Va(u.U),u.g&&(d=u.g,u.g=null,d.abort(),d.ma())}function rf(u,d){try{var m=u.j;if(m.G!=0&&(m.g==u||sf(m.h,u))){if(!u.K&&sf(m.h,u)&&m.G==3){try{var v=m.Da.g.parse(d)}catch{v=null}if(Array.isArray(v)&&v.length==3){var O=v;if(O[0]==0){e:if(!m.u){if(m.g)if(m.g.F+3e3<u.F)ec(m),Ju(m);else break e;uf(m),Z(18)}}else m.za=O[1],0<m.za-m.T&&37500>O[2]&&m.F&&m.v==0&&!m.C&&(m.C=K(p(m.Za,m),6e3));if(1>=fv(m.h)&&m.ca){try{m.ca()}catch{}m.ca=void 0}}else ps(m,11)}else if((u.K||m.g==u)&&ec(m),!E(d))for(O=m.Da.g.parse(d),d=0;d<O.length;d++){let Se=O[d];if(m.T=Se[0],Se=Se[1],m.G==2)if(Se[0]=="c"){m.K=Se[1],m.ia=Se[2];const Dt=Se[3];Dt!=null&&(m.la=Dt,m.j.info("VER="+m.la));const Mt=Se[4];Mt!=null&&(m.Aa=Mt,m.j.info("SVER="+m.Aa));const mo=Se[5];mo!=null&&typeof mo=="number"&&0<mo&&(v=1.5*mo,m.L=v,m.j.info("backChannelRequestTimeoutMs_="+v)),v=m;const Vn=u.g;if(Vn){const nc=Vn.g?Vn.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(nc){var V=v.h;V.g||nc.indexOf("spdy")==-1&&nc.indexOf("quic")==-1&&nc.indexOf("h2")==-1||(V.j=V.l,V.g=new Set,V.h&&(of(V,V.h),V.h=null))}if(v.D){const hf=Vn.g?Vn.g.getResponseHeader("X-HTTP-Session-Id"):null;hf&&(v.ya=hf,Ue(v.I,v.D,hf))}}m.G=3,m.l&&m.l.ua(),m.ba&&(m.R=Date.now()-u.F,m.j.info("Handshake RTT: "+m.R+"ms")),v=m;var G=u;if(v.qa=$v(v,v.J?v.ia:null,v.W),G.K){pv(v.h,G);var Re=G,St=v.L;St&&(Re.I=St),Re.B&&(Tr(Re),It(Re)),v.g=G}else Lv(v);0<m.i.length&&Zu(m)}else Se[0]!="stop"&&Se[0]!="close"||ps(m,7);else m.G==3&&(Se[0]=="stop"||Se[0]=="close"?Se[0]=="stop"?ps(m,7):lf(m):Se[0]!="noop"&&m.l&&m.l.ta(Se),m.v=0)}}q(4)}catch{}}var z2=class{constructor(u,d){this.g=u,this.map=d}};function hv(u){this.l=u||10,a.PerformanceNavigationTiming?(u=a.performance.getEntriesByType("navigation"),u=0<u.length&&(u[0].nextHopProtocol=="hq"||u[0].nextHopProtocol=="h2")):u=!!(a.chrome&&a.chrome.loadTimes&&a.chrome.loadTimes()&&a.chrome.loadTimes().wasFetchedViaSpdy),this.j=u?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function dv(u){return u.h?!0:u.g?u.g.size>=u.j:!1}function fv(u){return u.h?1:u.g?u.g.size:0}function sf(u,d){return u.h?u.h==d:u.g?u.g.has(d):!1}function of(u,d){u.g?u.g.add(d):u.h=d}function pv(u,d){u.h&&u.h==d?u.h=null:u.g&&u.g.has(d)&&u.g.delete(d)}hv.prototype.cancel=function(){if(this.i=mv(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const u of this.g.values())u.cancel();this.g.clear()}};function mv(u){if(u.h!=null)return u.i.concat(u.h.D);if(u.g!=null&&u.g.size!==0){let d=u.i;for(const m of u.g.values())d=d.concat(m.D);return d}return I(u.i)}function B2(u){if(u.V&&typeof u.V=="function")return u.V();if(typeof Map<"u"&&u instanceof Map||typeof Set<"u"&&u instanceof Set)return Array.from(u.values());if(typeof u=="string")return u.split("");if(l(u)){for(var d=[],m=u.length,v=0;v<m;v++)d.push(u[v]);return d}d=[],m=0;for(v in u)d[m++]=u[v];return d}function H2(u){if(u.na&&typeof u.na=="function")return u.na();if(!u.V||typeof u.V!="function"){if(typeof Map<"u"&&u instanceof Map)return Array.from(u.keys());if(!(typeof Set<"u"&&u instanceof Set)){if(l(u)||typeof u=="string"){var d=[];u=u.length;for(var m=0;m<u;m++)d.push(m);return d}d=[],m=0;for(const v in u)d[m++]=v;return d}}}function gv(u,d){if(u.forEach&&typeof u.forEach=="function")u.forEach(d,void 0);else if(l(u)||typeof u=="string")Array.prototype.forEach.call(u,d,void 0);else for(var m=H2(u),v=B2(u),O=v.length,V=0;V<O;V++)d.call(void 0,v[V],m&&m[V],u)}var yv=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function W2(u,d){if(u){u=u.split("&");for(var m=0;m<u.length;m++){var v=u[m].indexOf("="),O=null;if(0<=v){var V=u[m].substring(0,v);O=u[m].substring(v+1)}else V=u[m];d(V,O?decodeURIComponent(O.replace(/\+/g," ")):"")}}}function fs(u){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,u instanceof fs){this.h=u.h,Gu(this,u.j),this.o=u.o,this.g=u.g,Ku(this,u.s),this.l=u.l;var d=u.i,m=new Ba;m.i=d.i,d.g&&(m.g=new Map(d.g),m.h=d.h),vv(this,m),this.m=u.m}else u&&(d=String(u).match(yv))?(this.h=!1,Gu(this,d[1]||"",!0),this.o=ja(d[2]||""),this.g=ja(d[3]||"",!0),Ku(this,d[4]),this.l=ja(d[5]||"",!0),vv(this,d[6]||"",!0),this.m=ja(d[7]||"")):(this.h=!1,this.i=new Ba(null,this.h))}fs.prototype.toString=function(){var u=[],d=this.j;d&&u.push(za(d,_v,!0),":");var m=this.g;return(m||d=="file")&&(u.push("//"),(d=this.o)&&u.push(za(d,_v,!0),"@"),u.push(encodeURIComponent(String(m)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),m=this.s,m!=null&&u.push(":",String(m))),(m=this.l)&&(this.g&&m.charAt(0)!="/"&&u.push("/"),u.push(za(m,m.charAt(0)=="/"?K2:G2,!0))),(m=this.i.toString())&&u.push("?",m),(m=this.m)&&u.push("#",za(m,X2)),u.join("")};function Ir(u){return new fs(u)}function Gu(u,d,m){u.j=m?ja(d,!0):d,u.j&&(u.j=u.j.replace(/:$/,""))}function Ku(u,d){if(d){if(d=Number(d),isNaN(d)||0>d)throw Error("Bad port number "+d);u.s=d}else u.s=null}function vv(u,d,m){d instanceof Ba?(u.i=d,Y2(u.i,u.h)):(m||(d=za(d,Q2)),u.i=new Ba(d,u.h))}function Ue(u,d,m){u.i.set(d,m)}function Qu(u){return Ue(u,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),u}function ja(u,d){return u?d?decodeURI(u.replace(/%25/g,"%2525")):decodeURIComponent(u):""}function za(u,d,m){return typeof u=="string"?(u=encodeURI(u).replace(d,q2),m&&(u=u.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),u):null}function q2(u){return u=u.charCodeAt(0),"%"+(u>>4&15).toString(16)+(u&15).toString(16)}var _v=/[#\/\?@]/g,G2=/[#\?:]/g,K2=/[#\?]/g,Q2=/[#\?@]/g,X2=/#/g;function Ba(u,d){this.h=this.g=null,this.i=u||null,this.j=!!d}function ui(u){u.g||(u.g=new Map,u.h=0,u.i&&W2(u.i,function(d,m){u.add(decodeURIComponent(d.replace(/\+/g," ")),m)}))}t=Ba.prototype,t.add=function(u,d){ui(this),this.i=null,u=fo(this,u);var m=this.g.get(u);return m||this.g.set(u,m=[]),m.push(d),this.h+=1,this};function wv(u,d){ui(u),d=fo(u,d),u.g.has(d)&&(u.i=null,u.h-=u.g.get(d).length,u.g.delete(d))}function Ev(u,d){return ui(u),d=fo(u,d),u.g.has(d)}t.forEach=function(u,d){ui(this),this.g.forEach(function(m,v){m.forEach(function(O){u.call(d,O,v,this)},this)},this)},t.na=function(){ui(this);const u=Array.from(this.g.values()),d=Array.from(this.g.keys()),m=[];for(let v=0;v<d.length;v++){const O=u[v];for(let V=0;V<O.length;V++)m.push(d[v])}return m},t.V=function(u){ui(this);let d=[];if(typeof u=="string")Ev(this,u)&&(d=d.concat(this.g.get(fo(this,u))));else{u=Array.from(this.g.values());for(let m=0;m<u.length;m++)d=d.concat(u[m])}return d},t.set=function(u,d){return ui(this),this.i=null,u=fo(this,u),Ev(this,u)&&(this.h-=this.g.get(u).length),this.g.set(u,[d]),this.h+=1,this},t.get=function(u,d){return u?(u=this.V(u),0<u.length?String(u[0]):d):d};function bv(u,d,m){wv(u,d),0<m.length&&(u.i=null,u.g.set(fo(u,d),I(m)),u.h+=m.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const u=[],d=Array.from(this.g.keys());for(var m=0;m<d.length;m++){var v=d[m];const V=encodeURIComponent(String(v)),G=this.V(v);for(v=0;v<G.length;v++){var O=V;G[v]!==""&&(O+="="+encodeURIComponent(String(G[v]))),u.push(O)}}return this.i=u.join("&")};function fo(u,d){return d=String(d),u.j&&(d=d.toLowerCase()),d}function Y2(u,d){d&&!u.j&&(ui(u),u.i=null,u.g.forEach(function(m,v){var O=v.toLowerCase();v!=O&&(wv(this,v),bv(this,O,m))},u)),u.j=d}function J2(u,d){const m=new oe;if(a.Image){const v=new Image;v.onload=_(ci,m,"TestLoadImage: loaded",!0,d,v),v.onerror=_(ci,m,"TestLoadImage: error",!1,d,v),v.onabort=_(ci,m,"TestLoadImage: abort",!1,d,v),v.ontimeout=_(ci,m,"TestLoadImage: timeout",!1,d,v),a.setTimeout(function(){v.ontimeout&&v.ontimeout()},1e4),v.src=u}else d(!1)}function Z2(u,d){const m=new oe,v=new AbortController,O=setTimeout(()=>{v.abort(),ci(m,"TestPingServer: timeout",!1,d)},1e4);fetch(u,{signal:v.signal}).then(V=>{clearTimeout(O),V.ok?ci(m,"TestPingServer: ok",!0,d):ci(m,"TestPingServer: server error",!1,d)}).catch(()=>{clearTimeout(O),ci(m,"TestPingServer: error",!1,d)})}function ci(u,d,m,v,O){try{O&&(O.onload=null,O.onerror=null,O.onabort=null,O.ontimeout=null),v(m)}catch{}}function eS(){this.g=new lo}function tS(u,d,m){const v=m||"";try{gv(u,function(O,V){let G=O;c(O)&&(G=$a(O)),d.push(v+V+"="+encodeURIComponent(G))})}catch(O){throw d.push(v+"type="+encodeURIComponent("_badmap")),O}}function Ha(u){this.l=u.Ub||null,this.j=u.eb||!1}w(Ha,uo),Ha.prototype.g=function(){return new Xu(this.l,this.j)},Ha.prototype.i=function(u){return function(){return u}}({});function Xu(u,d){Me.call(this),this.D=u,this.o=d,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}w(Xu,Me),t=Xu.prototype,t.open=function(u,d){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=u,this.A=d,this.readyState=1,qa(this)},t.send=function(u){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const d={headers:this.u,method:this.B,credentials:this.m,cache:void 0};u&&(d.body=u),(this.D||a).fetch(new Request(this.A,d)).then(this.Sa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,Wa(this)),this.readyState=0},t.Sa=function(u){if(this.g&&(this.l=u,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=u.headers,this.readyState=2,qa(this)),this.g&&(this.readyState=3,qa(this),this.g)))if(this.responseType==="arraybuffer")u.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof a.ReadableStream<"u"&&"body"in u){if(this.j=u.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;Tv(this)}else u.text().then(this.Ra.bind(this),this.ga.bind(this))};function Tv(u){u.j.read().then(u.Pa.bind(u)).catch(u.ga.bind(u))}t.Pa=function(u){if(this.g){if(this.o&&u.value)this.response.push(u.value);else if(!this.o){var d=u.value?u.value:new Uint8Array(0);(d=this.v.decode(d,{stream:!u.done}))&&(this.response=this.responseText+=d)}u.done?Wa(this):qa(this),this.readyState==3&&Tv(this)}},t.Ra=function(u){this.g&&(this.response=this.responseText=u,Wa(this))},t.Qa=function(u){this.g&&(this.response=u,Wa(this))},t.ga=function(){this.g&&Wa(this)};function Wa(u){u.readyState=4,u.l=null,u.j=null,u.v=null,qa(u)}t.setRequestHeader=function(u,d){this.u.append(u,d)},t.getResponseHeader=function(u){return this.h&&this.h.get(u.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const u=[],d=this.h.entries();for(var m=d.next();!m.done;)m=m.value,u.push(m[0]+": "+m[1]),m=d.next();return u.join(`\r
`)};function qa(u){u.onreadystatechange&&u.onreadystatechange.call(u)}Object.defineProperty(Xu.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(u){this.m=u?"include":"same-origin"}});function Cv(u){let d="";return z(u,function(m,v){d+=v,d+=":",d+=m,d+=`\r
`}),d}function af(u,d,m){e:{for(v in m){var v=!1;break e}v=!0}v||(m=Cv(m),typeof u=="string"?m!=null&&encodeURIComponent(String(m)):Ue(u,d,m))}function Je(u){Me.call(this),this.headers=new Map,this.o=u||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}w(Je,Me);var nS=/^https?$/i,rS=["POST","PUT"];t=Je.prototype,t.Ha=function(u){this.J=u},t.ea=function(u,d,m,v){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+u);d=d?d.toUpperCase():"GET",this.D=u,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():bn.g(),this.v=this.o?co(this.o):co(bn),this.g.onreadystatechange=p(this.Ea,this);try{this.B=!0,this.g.open(d,String(u),!0),this.B=!1}catch(V){Iv(this,V);return}if(u=m||"",m=new Map(this.headers),v)if(Object.getPrototypeOf(v)===Object.prototype)for(var O in v)m.set(O,v[O]);else if(typeof v.keys=="function"&&typeof v.get=="function")for(const V of v.keys())m.set(V,v.get(V));else throw Error("Unknown input type for opt_headers: "+String(v));v=Array.from(m.keys()).find(V=>V.toLowerCase()=="content-type"),O=a.FormData&&u instanceof a.FormData,!(0<=Array.prototype.indexOf.call(rS,d,void 0))||v||O||m.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[V,G]of m)this.g.setRequestHeader(V,G);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{xv(this),this.u=!0,this.g.send(u),this.u=!1}catch(V){Iv(this,V)}};function Iv(u,d){u.h=!1,u.g&&(u.j=!0,u.g.abort(),u.j=!1),u.l=d,u.m=5,Sv(u),Yu(u)}function Sv(u){u.A||(u.A=!0,et(u,"complete"),et(u,"error"))}t.abort=function(u){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=u||7,et(this,"complete"),et(this,"abort"),Yu(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Yu(this,!0)),Je.aa.N.call(this)},t.Ea=function(){this.s||(this.B||this.u||this.j?Av(this):this.bb())},t.bb=function(){Av(this)};function Av(u){if(u.h&&typeof o<"u"&&(!u.v[1]||Sr(u)!=4||u.Z()!=2)){if(u.u&&Sr(u)==4)hs(u.Ea,0,u);else if(et(u,"readystatechange"),Sr(u)==4){u.h=!1;try{const G=u.Z();e:switch(G){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var d=!0;break e;default:d=!1}var m;if(!(m=d)){var v;if(v=G===0){var O=String(u.D).match(yv)[1]||null;!O&&a.self&&a.self.location&&(O=a.self.location.protocol.slice(0,-1)),v=!nS.test(O?O.toLowerCase():"")}m=v}if(m)et(u,"complete"),et(u,"success");else{u.m=6;try{var V=2<Sr(u)?u.g.statusText:""}catch{V=""}u.l=V+" ["+u.Z()+"]",Sv(u)}}finally{Yu(u)}}}}function Yu(u,d){if(u.g){xv(u);const m=u.g,v=u.v[0]?()=>{}:null;u.g=null,u.v=null,d||et(u,"ready");try{m.onreadystatechange=v}catch{}}}function xv(u){u.I&&(a.clearTimeout(u.I),u.I=null)}t.isActive=function(){return!!this.g};function Sr(u){return u.g?u.g.readyState:0}t.Z=function(){try{return 2<Sr(this)?this.g.status:-1}catch{return-1}},t.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.Oa=function(u){if(this.g){var d=this.g.responseText;return u&&d.indexOf(u)==0&&(d=d.substring(u.length)),Wu(d)}};function kv(u){try{if(!u.g)return null;if("response"in u.g)return u.g.response;switch(u.H){case"":case"text":return u.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in u.g)return u.g.mozResponseArrayBuffer}return null}catch{return null}}function iS(u){const d={};u=(u.g&&2<=Sr(u)&&u.g.getAllResponseHeaders()||"").split(`\r
`);for(let v=0;v<u.length;v++){if(E(u[v]))continue;var m=k(u[v]);const O=m[0];if(m=m[1],typeof m!="string")continue;m=m.trim();const V=d[O]||[];d[O]=V,V.push(m)}g(d,function(v){return v.join(", ")})}t.Ba=function(){return this.m},t.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function Ga(u,d,m){return m&&m.internalChannelParams&&m.internalChannelParams[u]||d}function Pv(u){this.Aa=0,this.i=[],this.j=new oe,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=Ga("failFast",!1,u),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=Ga("baseRetryDelayMs",5e3,u),this.cb=Ga("retryDelaySeedMs",1e4,u),this.Wa=Ga("forwardChannelMaxRetries",2,u),this.wa=Ga("forwardChannelRequestTimeoutMs",2e4,u),this.pa=u&&u.xmlHttpFactory||void 0,this.Xa=u&&u.Tb||void 0,this.Ca=u&&u.useFetchStreams||!1,this.L=void 0,this.J=u&&u.supportsCrossDomainXhr||!1,this.K="",this.h=new hv(u&&u.concurrentRequestLimit),this.Da=new eS,this.P=u&&u.fastHandshake||!1,this.O=u&&u.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=u&&u.Rb||!1,u&&u.xa&&this.j.xa(),u&&u.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&u&&u.detectBufferingProxy||!1,this.ja=void 0,u&&u.longPollingTimeout&&0<u.longPollingTimeout&&(this.ja=u.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}t=Pv.prototype,t.la=8,t.G=1,t.connect=function(u,d,m,v){Z(0),this.W=u,this.H=d||{},m&&v!==void 0&&(this.H.OSID=m,this.H.OAID=v),this.F=this.X,this.I=$v(this,null,this.W),Zu(this)};function lf(u){if(Rv(u),u.G==3){var d=u.U++,m=Ir(u.I);if(Ue(m,"SID",u.K),Ue(m,"RID",d),Ue(m,"TYPE","terminate"),Ka(u,m),d=new Gt(u,u.j,d),d.L=2,d.v=Qu(Ir(m)),m=!1,a.navigator&&a.navigator.sendBeacon)try{m=a.navigator.sendBeacon(d.v.toString(),"")}catch{}!m&&a.Image&&(new Image().src=d.v,m=!0),m||(d.g=Fv(d.j,null),d.g.ea(d.v)),d.F=Date.now(),It(d)}Vv(u)}function Ju(u){u.g&&(cf(u),u.g.cancel(),u.g=null)}function Rv(u){Ju(u),u.u&&(a.clearTimeout(u.u),u.u=null),ec(u),u.h.cancel(),u.s&&(typeof u.s=="number"&&a.clearTimeout(u.s),u.s=null)}function Zu(u){if(!dv(u.h)&&!u.s){u.s=!0;var d=u.Ga;wt||re(),H||(wt(),H=!0),ee.add(d,u),u.B=0}}function sS(u,d){return fv(u.h)>=u.h.j-(u.s?1:0)?!1:u.s?(u.i=d.D.concat(u.i),!0):u.G==1||u.G==2||u.B>=(u.Va?0:u.Wa)?!1:(u.s=K(p(u.Ga,u,d),Uv(u,u.B)),u.B++,!0)}t.Ga=function(u){if(this.s)if(this.s=null,this.G==1){if(!u){this.U=Math.floor(1e5*Math.random()),u=this.U++;const O=new Gt(this,this.j,u);let V=this.o;if(this.S&&(V?(V=y(V),A(V,this.S)):V=this.S),this.m!==null||this.O||(O.H=V,V=null),this.P)e:{for(var d=0,m=0;m<this.i.length;m++){t:{var v=this.i[m];if("__data__"in v.map&&(v=v.map.__data__,typeof v=="string")){v=v.length;break t}v=void 0}if(v===void 0)break;if(d+=v,4096<d){d=m;break e}if(d===4096||m===this.i.length-1){d=m+1;break e}}d=1e3}else d=1e3;d=Ov(this,O,d),m=Ir(this.I),Ue(m,"RID",u),Ue(m,"CVER",22),this.D&&Ue(m,"X-HTTP-Session-Id",this.D),Ka(this,m),V&&(this.O?d="headers="+encodeURIComponent(String(Cv(V)))+"&"+d:this.m&&af(m,this.m,V)),of(this.h,O),this.Ua&&Ue(m,"TYPE","init"),this.P?(Ue(m,"$req",d),Ue(m,"SID","null"),O.T=!0,ai(O,m,null)):ai(O,m,d),this.G=2}}else this.G==3&&(u?Nv(this,u):this.i.length==0||dv(this.h)||Nv(this))};function Nv(u,d){var m;d?m=d.l:m=u.U++;const v=Ir(u.I);Ue(v,"SID",u.K),Ue(v,"RID",m),Ue(v,"AID",u.T),Ka(u,v),u.m&&u.o&&af(v,u.m,u.o),m=new Gt(u,u.j,m,u.B+1),u.m===null&&(m.H=u.o),d&&(u.i=d.D.concat(u.i)),d=Ov(u,m,1e3),m.I=Math.round(.5*u.wa)+Math.round(.5*u.wa*Math.random()),of(u.h,m),ai(m,v,d)}function Ka(u,d){u.H&&z(u.H,function(m,v){Ue(d,v,m)}),u.l&&gv({},function(m,v){Ue(d,v,m)})}function Ov(u,d,m){m=Math.min(u.i.length,m);var v=u.l?p(u.l.Na,u.l,u):null;e:{var O=u.i;let V=-1;for(;;){const G=["count="+m];V==-1?0<m?(V=O[0].g,G.push("ofs="+V)):V=0:G.push("ofs="+V);let Re=!0;for(let St=0;St<m;St++){let Se=O[St].g;const Dt=O[St].map;if(Se-=V,0>Se)V=Math.max(0,O[St].g-100),Re=!1;else try{tS(Dt,G,"req"+Se+"_")}catch{v&&v(Dt)}}if(Re){v=G.join("&");break e}}}return u=u.i.splice(0,m),d.D=u,v}function Lv(u){if(!u.g&&!u.u){u.Y=1;var d=u.Fa;wt||re(),H||(wt(),H=!0),ee.add(d,u),u.v=0}}function uf(u){return u.g||u.u||3<=u.v?!1:(u.Y++,u.u=K(p(u.Fa,u),Uv(u,u.v)),u.v++,!0)}t.Fa=function(){if(this.u=null,Dv(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var u=2*this.R;this.j.info("BP detection timer enabled: "+u),this.A=K(p(this.ab,this),u)}},t.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,Z(10),Ju(this),Dv(this))};function cf(u){u.A!=null&&(a.clearTimeout(u.A),u.A=null)}function Dv(u){u.g=new Gt(u,u.j,"rpc",u.Y),u.m===null&&(u.g.H=u.o),u.g.O=0;var d=Ir(u.qa);Ue(d,"RID","rpc"),Ue(d,"SID",u.K),Ue(d,"AID",u.T),Ue(d,"CI",u.F?"0":"1"),!u.F&&u.ja&&Ue(d,"TO",u.ja),Ue(d,"TYPE","xmlhttp"),Ka(u,d),u.m&&u.o&&af(d,u.m,u.o),u.L&&(u.g.I=u.L);var m=u.g;u=u.ia,m.L=1,m.v=Qu(Ir(d)),m.m=null,m.P=!0,ds(m,u)}t.Za=function(){this.C!=null&&(this.C=null,Ju(this),uf(this),Z(19))};function ec(u){u.C!=null&&(a.clearTimeout(u.C),u.C=null)}function Mv(u,d){var m=null;if(u.g==d){ec(u),cf(u),u.g=null;var v=2}else if(sf(u.h,d))m=d.D,pv(u.h,d),v=1;else return;if(u.G!=0){if(d.o)if(v==1){m=d.m?d.m.length:0,d=Date.now()-d.F;var O=u.B;v=M(),et(v,new te(v,m)),Zu(u)}else Lv(u);else if(O=d.s,O==3||O==0&&0<d.X||!(v==1&&sS(u,d)||v==2&&uf(u)))switch(m&&0<m.length&&(d=u.h,d.i=d.i.concat(m)),O){case 1:ps(u,5);break;case 4:ps(u,10);break;case 3:ps(u,6);break;default:ps(u,2)}}}function Uv(u,d){let m=u.Ta+Math.floor(Math.random()*u.cb);return u.isActive()||(m*=2),m*d}function ps(u,d){if(u.j.info("Error code "+d),d==2){var m=p(u.fb,u),v=u.Xa;const O=!v;v=new fs(v||"//www.google.com/images/cleardot.gif"),a.location&&a.location.protocol=="http"||Gu(v,"https"),Qu(v),O?J2(v.toString(),m):Z2(v.toString(),m)}else Z(2);u.G=0,u.l&&u.l.sa(d),Vv(u),Rv(u)}t.fb=function(u){u?(this.j.info("Successfully pinged google.com"),Z(2)):(this.j.info("Failed to ping google.com"),Z(1))};function Vv(u){if(u.G=0,u.ka=[],u.l){const d=mv(u.h);(d.length!=0||u.i.length!=0)&&(R(u.ka,d),R(u.ka,u.i),u.h.i.length=0,I(u.i),u.i.length=0),u.l.ra()}}function $v(u,d,m){var v=m instanceof fs?Ir(m):new fs(m);if(v.g!="")d&&(v.g=d+"."+v.g),Ku(v,v.s);else{var O=a.location;v=O.protocol,d=d?d+"."+O.hostname:O.hostname,O=+O.port;var V=new fs(null);v&&Gu(V,v),d&&(V.g=d),O&&Ku(V,O),m&&(V.l=m),v=V}return m=u.D,d=u.ya,m&&d&&Ue(v,m,d),Ue(v,"VER",u.la),Ka(u,v),v}function Fv(u,d,m){if(d&&!u.J)throw Error("Can't create secondary domain capable XhrIo object.");return d=u.Ca&&!u.pa?new Je(new Ha({eb:m})):new Je(u.pa),d.Ha(u.J),d}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function jv(){}t=jv.prototype,t.ua=function(){},t.ta=function(){},t.sa=function(){},t.ra=function(){},t.isActive=function(){return!0},t.Na=function(){};function tc(){}tc.prototype.g=function(u,d){return new dn(u,d)};function dn(u,d){Me.call(this),this.g=new Pv(d),this.l=u,this.h=d&&d.messageUrlParams||null,u=d&&d.messageHeaders||null,d&&d.clientProtocolHeaderRequired&&(u?u["X-Client-Protocol"]="webchannel":u={"X-Client-Protocol":"webchannel"}),this.g.o=u,u=d&&d.initMessageHeaders||null,d&&d.messageContentType&&(u?u["X-WebChannel-Content-Type"]=d.messageContentType:u={"X-WebChannel-Content-Type":d.messageContentType}),d&&d.va&&(u?u["X-WebChannel-Client-Profile"]=d.va:u={"X-WebChannel-Client-Profile":d.va}),this.g.S=u,(u=d&&d.Sb)&&!E(u)&&(this.g.m=u),this.v=d&&d.supportsCrossDomainXhr||!1,this.u=d&&d.sendRawJson||!1,(d=d&&d.httpSessionIdParam)&&!E(d)&&(this.g.D=d,u=this.h,u!==null&&d in u&&(u=this.h,d in u&&delete u[d])),this.j=new po(this)}w(dn,Me),dn.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},dn.prototype.close=function(){lf(this.g)},dn.prototype.o=function(u){var d=this.g;if(typeof u=="string"){var m={};m.__data__=u,u=m}else this.u&&(m={},m.__data__=$a(u),u=m);d.i.push(new z2(d.Ya++,u)),d.G==3&&Zu(d)},dn.prototype.N=function(){this.g.l=null,delete this.j,lf(this.g),delete this.g,dn.aa.N.call(this)};function zv(u){Fa.call(this),u.__headers__&&(this.headers=u.__headers__,this.statusCode=u.__status__,delete u.__headers__,delete u.__status__);var d=u.__sm__;if(d){e:{for(const m in d){u=m;break e}u=void 0}(this.i=u)&&(u=this.i,d=d!==null&&u in d?d[u]:void 0),this.data=d}else this.data=u}w(zv,Fa);function Bv(){ho.call(this),this.status=1}w(Bv,ho);function po(u){this.g=u}w(po,jv),po.prototype.ua=function(){et(this.g,"a")},po.prototype.ta=function(u){et(this.g,new zv(u))},po.prototype.sa=function(u){et(this.g,new Bv)},po.prototype.ra=function(){et(this.g,"b")},tc.prototype.createWebChannel=tc.prototype.g,dn.prototype.send=dn.prototype.o,dn.prototype.open=dn.prototype.m,dn.prototype.close=dn.prototype.close,QT=function(){return new tc},KT=function(){return M()},GT=Er,pm={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},We.NO_ERROR=0,We.TIMEOUT=8,We.HTTP_ERROR=6,Kc=We,si.COMPLETE="complete",qT=si,qu.EventType=ii,ii.OPEN="a",ii.CLOSE="b",ii.ERROR="c",ii.MESSAGE="d",Me.prototype.listen=Me.prototype.K,_l=qu,WT=Ha,Je.prototype.listenOnce=Je.prototype.L,Je.prototype.getLastError=Je.prototype.Ka,Je.prototype.getLastErrorCode=Je.prototype.Ba,Je.prototype.getStatus=Je.prototype.Z,Je.prototype.getResponseJson=Je.prototype.Oa,Je.prototype.getResponseText=Je.prototype.oa,Je.prototype.send=Je.prototype.ea,Je.prototype.setWithCredentials=Je.prototype.Ha,HT=Je}).apply(typeof bc<"u"?bc:typeof self<"u"?self:typeof window<"u"?window:{});const Z0="@firebase/firestore";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ft{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Ft.UNAUTHENTICATED=new Ft(null),Ft.GOOGLE_CREDENTIALS=new Ft("google-credentials-uid"),Ft.FIRST_PARTY=new Ft("first-party-uid"),Ft.MOCK_USER=new Ft("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Aa="10.12.1";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Hs=new $g("@firebase/firestore");function ll(){return Hs.logLevel}function J(t,...e){if(Hs.logLevel<=Ee.DEBUG){const n=e.map(Zg);Hs.debug(`Firestore (${Aa}): ${t}`,...n)}}function Kr(t,...e){if(Hs.logLevel<=Ee.ERROR){const n=e.map(Zg);Hs.error(`Firestore (${Aa}): ${t}`,...n)}}function aa(t,...e){if(Hs.logLevel<=Ee.WARN){const n=e.map(Zg);Hs.warn(`Firestore (${Aa}): ${t}`,...n)}}function Zg(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(n){return JSON.stringify(n)}(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function le(t="Unexpected state"){const e=`FIRESTORE (${Aa}) INTERNAL ASSERTION FAILED: `+t;throw Kr(e),new Error(e)}function De(t,e){t||le()}function ce(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const j={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Y extends ei{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $i{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XT{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class r4{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(Ft.UNAUTHENTICATED))}shutdown(){}}class i4{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class s4{constructor(e){this.t=e,this.currentUser=Ft.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){let r=this.i;const i=l=>this.i!==r?(r=this.i,n(l)):Promise.resolve();let s=new $i;this.o=()=>{this.i++,this.currentUser=this.u(),s.resolve(),s=new $i,e.enqueueRetryable(()=>i(this.currentUser))};const o=()=>{const l=s;e.enqueueRetryable(async()=>{await l.promise,await i(this.currentUser)})},a=l=>{J("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=l,this.auth.addAuthTokenListener(this.o),o()};this.t.onInit(l=>a(l)),setTimeout(()=>{if(!this.auth){const l=this.t.getImmediate({optional:!0});l?a(l):(J("FirebaseAuthCredentialsProvider","Auth not yet detected"),s.resolve(),s=new $i)}},0),o()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==e?(J("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(De(typeof r.accessToken=="string"),new XT(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const e=this.auth&&this.auth.getUid();return De(e===null||typeof e=="string"),new Ft(e)}}class o4{constructor(e,n,r){this.l=e,this.h=n,this.P=r,this.type="FirstParty",this.user=Ft.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);const e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}}class a4{constructor(e,n,r){this.l=e,this.h=n,this.P=r}getToken(){return Promise.resolve(new o4(this.l,this.h,this.P))}start(e,n){e.enqueueRetryable(()=>n(Ft.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class l4{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class u4{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,n){const r=s=>{s.error!=null&&J("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${s.error.message}`);const o=s.token!==this.R;return this.R=s.token,J("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?n(s.token):Promise.resolve()};this.o=s=>{e.enqueueRetryable(()=>r(s))};const i=s=>{J("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=s,this.appCheck.addTokenListener(this.o)};this.A.onInit(s=>i(s)),setTimeout(()=>{if(!this.appCheck){const s=this.A.getImmediate({optional:!0});s?i(s):J("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(De(typeof n.token=="string"),this.R=n.token,new l4(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function c4(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YT{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=Math.floor(256/e.length)*e.length;let r="";for(;r.length<20;){const i=c4(40);for(let s=0;s<i.length;++s)r.length<20&&i[s]<n&&(r+=e.charAt(i[s]%e.length))}return r}}function Ae(t,e){return t<e?-1:t>e?1:0}function la(t,e,n){return t.length===e.length&&t.every((r,i)=>n(r,e[i]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mt{constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new Y(j.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new Y(j.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<-62135596800)throw new Y(j.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new Y(j.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return mt.fromMillis(Date.now())}static fromDate(e){return mt.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*n));return new mt(n,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?Ae(this.nanoseconds,e.nanoseconds):Ae(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ue{constructor(e){this.timestamp=e}static fromTimestamp(e){return new ue(e)}static min(){return new ue(new mt(0,0))}static max(){return new ue(new mt(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lu{constructor(e,n,r){n===void 0?n=0:n>e.length&&le(),r===void 0?r=e.length-n:r>e.length-n&&le(),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return lu.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof lu?e.forEach(r=>{n.push(r)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const r=Math.min(e.length,n.length);for(let i=0;i<r;i++){const s=e.get(i),o=n.get(i);if(s<o)return-1;if(s>o)return 1}return e.length<n.length?-1:e.length>n.length?1:0}}class Fe extends lu{construct(e,n,r){return new Fe(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const r of e){if(r.indexOf("//")>=0)throw new Y(j.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(i=>i.length>0))}return new Fe(n)}static emptyPath(){return new Fe([])}}const h4=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Pt extends lu{construct(e,n,r){return new Pt(e,n,r)}static isValidIdentifier(e){return h4.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Pt.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new Pt(["__name__"])}static fromServerFormat(e){const n=[];let r="",i=0;const s=()=>{if(r.length===0)throw new Y(j.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let o=!1;for(;i<e.length;){const a=e[i];if(a==="\\"){if(i+1===e.length)throw new Y(j.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const l=e[i+1];if(l!=="\\"&&l!=="."&&l!=="`")throw new Y(j.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=l,i+=2}else a==="`"?(o=!o,i++):a!=="."||o?(r+=a,i++):(s(),i++)}if(s(),o)throw new Y(j.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Pt(n)}static emptyPath(){return new Pt([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ne{constructor(e){this.path=e}static fromPath(e){return new ne(Fe.fromString(e))}static fromName(e){return new ne(Fe.fromString(e).popFirst(5))}static empty(){return new ne(Fe.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Fe.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return Fe.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new ne(new Fe(e.slice()))}}function d4(t,e){const n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,i=ue.fromTimestamp(r===1e9?new mt(n+1,0):new mt(n,r));return new Gi(i,ne.empty(),e)}function f4(t){return new Gi(t.readTime,t.key,-1)}class Gi{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new Gi(ue.min(),ne.empty(),-1)}static max(){return new Gi(ue.max(),ne.empty(),-1)}}function p4(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=ne.comparator(t.documentKey,e.documentKey),n!==0?n:Ae(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const m4="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class g4{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function xu(t){if(t.code!==j.FAILED_PRECONDITION||t.message!==m4)throw t;J("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class B{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&le(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new B((r,i)=>{this.nextCallback=s=>{this.wrapSuccess(e,s).next(r,i)},this.catchCallback=s=>{this.wrapFailure(n,s).next(r,i)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof B?n:B.resolve(n)}catch(n){return B.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):B.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):B.reject(n)}static resolve(e){return new B((n,r)=>{n(e)})}static reject(e){return new B((n,r)=>{r(e)})}static waitFor(e){return new B((n,r)=>{let i=0,s=0,o=!1;e.forEach(a=>{++i,a.next(()=>{++s,o&&s===i&&n()},l=>r(l))}),o=!0,s===i&&n()})}static or(e){let n=B.resolve(!1);for(const r of e)n=n.next(i=>i?B.resolve(i):r());return n}static forEach(e,n){const r=[];return e.forEach((i,s)=>{r.push(n.call(this,i,s))}),this.waitFor(r)}static mapArray(e,n){return new B((r,i)=>{const s=e.length,o=new Array(s);let a=0;for(let l=0;l<s;l++){const c=l;n(e[c]).next(h=>{o[c]=h,++a,a===s&&r(o)},h=>i(h))}})}static doWhile(e,n){return new B((r,i)=>{const s=()=>{e()===!0?n().next(()=>{s()},i):r()};s()})}}function y4(t){const e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function ku(t){return t.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ey{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=r=>this.ie(r),this.se=r=>n.writeSequenceNumber(r))}ie(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.se&&this.se(e),e}}ey.oe=-1;function yd(t){return t==null}function Dh(t){return t===0&&1/t==-1/0}function v4(t){return typeof t=="number"&&Number.isInteger(t)&&!Dh(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ew(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function Js(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function JT(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ye{constructor(e,n){this.comparator=e,this.root=n||kt.EMPTY}insert(e,n){return new Ye(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,kt.BLACK,null,null))}remove(e){return new Ye(this.comparator,this.root.remove(e,this.comparator).copy(null,null,kt.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){const i=this.comparator(e,r.key);if(i===0)return n+r.left.size;i<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,r)=>(e(n,r),!1))}toString(){const e=[];return this.inorderTraversal((n,r)=>(e.push(`${n}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Tc(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Tc(this.root,e,this.comparator,!1)}getReverseIterator(){return new Tc(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Tc(this.root,e,this.comparator,!0)}}class Tc{constructor(e,n,r,i){this.isReverse=i,this.nodeStack=[];let s=1;for(;!e.isEmpty();)if(s=n?r(e.key,n):1,n&&i&&(s*=-1),s<0)e=this.isReverse?e.left:e.right;else{if(s===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class kt{constructor(e,n,r,i,s){this.key=e,this.value=n,this.color=r??kt.RED,this.left=i??kt.EMPTY,this.right=s??kt.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,i,s){return new kt(e??this.key,n??this.value,r??this.color,i??this.left,s??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let i=this;const s=r(e,i.key);return i=s<0?i.copy(null,null,null,i.left.insert(e,n,r),null):s===0?i.copy(null,n,null,null,null):i.copy(null,null,null,null,i.right.insert(e,n,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return kt.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,i=this;if(n(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),n(e,i.key)===0){if(i.right.isEmpty())return kt.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,n))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,kt.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,kt.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw le();const e=this.left.check();if(e!==this.right.check())throw le();return e+(this.isRed()?0:1)}}kt.EMPTY=null,kt.RED=!0,kt.BLACK=!1;kt.EMPTY=new class{constructor(){this.size=0}get key(){throw le()}get value(){throw le()}get color(){throw le()}get left(){throw le()}get right(){throw le()}copy(e,n,r,i,s){return this}insert(e,n,r){return new kt(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nt{constructor(e){this.comparator=e,this.data=new Ye(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,r)=>(e(n),!1))}forEachInRange(e,n){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;n(i.key)}}forEachWhile(e,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new tw(this.data.getIterator())}getIteratorFrom(e){return new tw(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(r=>{n=n.add(r)}),n}isEqual(e){if(!(e instanceof Nt)||this.size!==e.size)return!1;const n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){const i=n.getNext().key,s=r.getNext().key;if(this.comparator(i,s)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new Nt(this.comparator);return n.data=e,n}}class tw{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mn{constructor(e){this.fields=e,e.sort(Pt.comparator)}static empty(){return new mn([])}unionWith(e){let n=new Nt(Pt.comparator);for(const r of this.fields)n=n.add(r);for(const r of e)n=n.add(r);return new mn(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return la(this.fields,e.fields,(n,r)=>n.isEqual(r))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZT extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ht{constructor(e){this.binaryString=e}static fromBase64String(e){const n=function(i){try{return atob(i)}catch(s){throw typeof DOMException<"u"&&s instanceof DOMException?new ZT("Invalid base64 string: "+s):s}}(e);return new Ht(n)}static fromUint8Array(e){const n=function(i){let s="";for(let o=0;o<i.length;++o)s+=String.fromCharCode(i[o]);return s}(e);return new Ht(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const r=new Uint8Array(n.length);for(let i=0;i<n.length;i++)r[i]=n.charCodeAt(i);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Ae(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Ht.EMPTY_BYTE_STRING=new Ht("");const _4=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Ki(t){if(De(!!t),typeof t=="string"){let e=0;const n=_4.exec(t);if(De(!!n),n[1]){let i=n[1];i=(i+"000000000").substr(0,9),e=Number(i)}const r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:lt(t.seconds),nanos:lt(t.nanos)}}function lt(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function Ws(t){return typeof t=="string"?Ht.fromBase64String(t):Ht.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ty(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="server_timestamp"}function ny(t){const e=t.mapValue.fields.__previous_value__;return ty(e)?ny(e):e}function uu(t){const e=Ki(t.mapValue.fields.__local_write_time__.timestampValue);return new mt(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class w4{constructor(e,n,r,i,s,o,a,l,c){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=i,this.ssl=s,this.forceLongPolling=o,this.autoDetectLongPolling=a,this.longPollingOptions=l,this.useFetchStreams=c}}class cu{constructor(e,n){this.projectId=e,this.database=n||"(default)"}static empty(){return new cu("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof cu&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Cc={mapValue:{fields:{__type__:{stringValue:"__max__"}}}};function qs(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?ty(t)?4:E4(t)?9007199254740991:10:le()}function gr(t,e){if(t===e)return!0;const n=qs(t);if(n!==qs(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return uu(t).isEqual(uu(e));case 3:return function(i,s){if(typeof i.timestampValue=="string"&&typeof s.timestampValue=="string"&&i.timestampValue.length===s.timestampValue.length)return i.timestampValue===s.timestampValue;const o=Ki(i.timestampValue),a=Ki(s.timestampValue);return o.seconds===a.seconds&&o.nanos===a.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(i,s){return Ws(i.bytesValue).isEqual(Ws(s.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(i,s){return lt(i.geoPointValue.latitude)===lt(s.geoPointValue.latitude)&&lt(i.geoPointValue.longitude)===lt(s.geoPointValue.longitude)}(t,e);case 2:return function(i,s){if("integerValue"in i&&"integerValue"in s)return lt(i.integerValue)===lt(s.integerValue);if("doubleValue"in i&&"doubleValue"in s){const o=lt(i.doubleValue),a=lt(s.doubleValue);return o===a?Dh(o)===Dh(a):isNaN(o)&&isNaN(a)}return!1}(t,e);case 9:return la(t.arrayValue.values||[],e.arrayValue.values||[],gr);case 10:return function(i,s){const o=i.mapValue.fields||{},a=s.mapValue.fields||{};if(ew(o)!==ew(a))return!1;for(const l in o)if(o.hasOwnProperty(l)&&(a[l]===void 0||!gr(o[l],a[l])))return!1;return!0}(t,e);default:return le()}}function hu(t,e){return(t.values||[]).find(n=>gr(n,e))!==void 0}function ua(t,e){if(t===e)return 0;const n=qs(t),r=qs(e);if(n!==r)return Ae(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return Ae(t.booleanValue,e.booleanValue);case 2:return function(s,o){const a=lt(s.integerValue||s.doubleValue),l=lt(o.integerValue||o.doubleValue);return a<l?-1:a>l?1:a===l?0:isNaN(a)?isNaN(l)?0:-1:1}(t,e);case 3:return nw(t.timestampValue,e.timestampValue);case 4:return nw(uu(t),uu(e));case 5:return Ae(t.stringValue,e.stringValue);case 6:return function(s,o){const a=Ws(s),l=Ws(o);return a.compareTo(l)}(t.bytesValue,e.bytesValue);case 7:return function(s,o){const a=s.split("/"),l=o.split("/");for(let c=0;c<a.length&&c<l.length;c++){const h=Ae(a[c],l[c]);if(h!==0)return h}return Ae(a.length,l.length)}(t.referenceValue,e.referenceValue);case 8:return function(s,o){const a=Ae(lt(s.latitude),lt(o.latitude));return a!==0?a:Ae(lt(s.longitude),lt(o.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return function(s,o){const a=s.values||[],l=o.values||[];for(let c=0;c<a.length&&c<l.length;++c){const h=ua(a[c],l[c]);if(h)return h}return Ae(a.length,l.length)}(t.arrayValue,e.arrayValue);case 10:return function(s,o){if(s===Cc.mapValue&&o===Cc.mapValue)return 0;if(s===Cc.mapValue)return 1;if(o===Cc.mapValue)return-1;const a=s.fields||{},l=Object.keys(a),c=o.fields||{},h=Object.keys(c);l.sort(),h.sort();for(let f=0;f<l.length&&f<h.length;++f){const p=Ae(l[f],h[f]);if(p!==0)return p;const _=ua(a[l[f]],c[h[f]]);if(_!==0)return _}return Ae(l.length,h.length)}(t.mapValue,e.mapValue);default:throw le()}}function nw(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return Ae(t,e);const n=Ki(t),r=Ki(e),i=Ae(n.seconds,r.seconds);return i!==0?i:Ae(n.nanos,r.nanos)}function ca(t){return mm(t)}function mm(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(n){const r=Ki(n);return`time(${r.seconds},${r.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(n){return Ws(n).toBase64()}(t.bytesValue):"referenceValue"in t?function(n){return ne.fromName(n).toString()}(t.referenceValue):"geoPointValue"in t?function(n){return`geo(${n.latitude},${n.longitude})`}(t.geoPointValue):"arrayValue"in t?function(n){let r="[",i=!0;for(const s of n.values||[])i?i=!1:r+=",",r+=mm(s);return r+"]"}(t.arrayValue):"mapValue"in t?function(n){const r=Object.keys(n.fields||{}).sort();let i="{",s=!0;for(const o of r)s?s=!1:i+=",",i+=`${o}:${mm(n.fields[o])}`;return i+"}"}(t.mapValue):le()}function rw(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function gm(t){return!!t&&"integerValue"in t}function ry(t){return!!t&&"arrayValue"in t}function iw(t){return!!t&&"nullValue"in t}function sw(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function Qc(t){return!!t&&"mapValue"in t}function Ml(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){const e={mapValue:{fields:{}}};return Js(t.mapValue.fields,(n,r)=>e.mapValue.fields[n]=Ml(r)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=Ml(t.arrayValue.values[n]);return e}return Object.assign({},t)}function E4(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rn{constructor(e){this.value=e}static empty(){return new rn({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!Qc(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=Ml(n)}setAll(e){let n=Pt.emptyPath(),r={},i=[];e.forEach((o,a)=>{if(!n.isImmediateParentOf(a)){const l=this.getFieldsMap(n);this.applyChanges(l,r,i),r={},i=[],n=a.popLast()}o?r[a.lastSegment()]=Ml(o):i.push(a.lastSegment())});const s=this.getFieldsMap(n);this.applyChanges(s,r,i)}delete(e){const n=this.field(e.popLast());Qc(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return gr(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=n.mapValue.fields[e.get(r)];Qc(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=i),n=i}return n.mapValue.fields}applyChanges(e,n,r){Js(n,(i,s)=>e[i]=s);for(const i of r)delete e[i]}clone(){return new rn(Ml(this.value))}}function eC(t){const e=[];return Js(t.fields,(n,r)=>{const i=new Pt([n]);if(Qc(r)){const s=eC(r.mapValue).fields;if(s.length===0)e.push(i);else for(const o of s)e.push(i.child(o))}else e.push(i)}),new mn(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zt{constructor(e,n,r,i,s,o,a){this.key=e,this.documentType=n,this.version=r,this.readTime=i,this.createTime=s,this.data=o,this.documentState=a}static newInvalidDocument(e){return new zt(e,0,ue.min(),ue.min(),ue.min(),rn.empty(),0)}static newFoundDocument(e,n,r,i){return new zt(e,1,n,ue.min(),r,i,0)}static newNoDocument(e,n){return new zt(e,2,n,ue.min(),ue.min(),rn.empty(),0)}static newUnknownDocument(e,n){return new zt(e,3,n,ue.min(),ue.min(),rn.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(ue.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=rn.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=rn.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=ue.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof zt&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new zt(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mh{constructor(e,n){this.position=e,this.inclusive=n}}function ow(t,e,n){let r=0;for(let i=0;i<t.position.length;i++){const s=e[i],o=t.position[i];if(s.field.isKeyField()?r=ne.comparator(ne.fromName(o.referenceValue),n.key):r=ua(o,n.data.field(s.field)),s.dir==="desc"&&(r*=-1),r!==0)break}return r}function aw(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!gr(t.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class du{constructor(e,n="asc"){this.field=e,this.dir=n}}function b4(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tC{}class ct extends tC{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,r):new C4(e,n,r):n==="array-contains"?new A4(e,r):n==="in"?new x4(e,r):n==="not-in"?new k4(e,r):n==="array-contains-any"?new P4(e,r):new ct(e,n,r)}static createKeyFieldInFilter(e,n,r){return n==="in"?new I4(e,r):new S4(e,r)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&this.matchesComparison(ua(n,this.value)):n!==null&&qs(this.value)===qs(n)&&this.matchesComparison(ua(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return le()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Jn extends tC{constructor(e,n){super(),this.filters=e,this.op=n,this.ae=null}static create(e,n){return new Jn(e,n)}matches(e){return nC(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.ae!==null||(this.ae=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.ae}getFilters(){return Object.assign([],this.filters)}}function nC(t){return t.op==="and"}function rC(t){return T4(t)&&nC(t)}function T4(t){for(const e of t.filters)if(e instanceof Jn)return!1;return!0}function ym(t){if(t instanceof ct)return t.field.canonicalString()+t.op.toString()+ca(t.value);if(rC(t))return t.filters.map(e=>ym(e)).join(",");{const e=t.filters.map(n=>ym(n)).join(",");return`${t.op}(${e})`}}function iC(t,e){return t instanceof ct?function(r,i){return i instanceof ct&&r.op===i.op&&r.field.isEqual(i.field)&&gr(r.value,i.value)}(t,e):t instanceof Jn?function(r,i){return i instanceof Jn&&r.op===i.op&&r.filters.length===i.filters.length?r.filters.reduce((s,o,a)=>s&&iC(o,i.filters[a]),!0):!1}(t,e):void le()}function sC(t){return t instanceof ct?function(n){return`${n.field.canonicalString()} ${n.op} ${ca(n.value)}`}(t):t instanceof Jn?function(n){return n.op.toString()+" {"+n.getFilters().map(sC).join(" ,")+"}"}(t):"Filter"}class C4 extends ct{constructor(e,n,r){super(e,n,r),this.key=ne.fromName(r.referenceValue)}matches(e){const n=ne.comparator(e.key,this.key);return this.matchesComparison(n)}}class I4 extends ct{constructor(e,n){super(e,"in",n),this.keys=oC("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class S4 extends ct{constructor(e,n){super(e,"not-in",n),this.keys=oC("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function oC(t,e){var n;return(((n=e.arrayValue)===null||n===void 0?void 0:n.values)||[]).map(r=>ne.fromName(r.referenceValue))}class A4 extends ct{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return ry(n)&&hu(n.arrayValue,this.value)}}class x4 extends ct{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&hu(this.value.arrayValue,n)}}class k4 extends ct{constructor(e,n){super(e,"not-in",n)}matches(e){if(hu(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&!hu(this.value.arrayValue,n)}}class P4 extends ct{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!ry(n)||!n.arrayValue.values)&&n.arrayValue.values.some(r=>hu(this.value.arrayValue,r))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class R4{constructor(e,n=null,r=[],i=[],s=null,o=null,a=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=i,this.limit=s,this.startAt=o,this.endAt=a,this.ue=null}}function lw(t,e=null,n=[],r=[],i=null,s=null,o=null){return new R4(t,e,n,r,i,s,o)}function iy(t){const e=ce(t);if(e.ue===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(r=>ym(r)).join(","),n+="|ob:",n+=e.orderBy.map(r=>function(s){return s.field.canonicalString()+s.dir}(r)).join(","),yd(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(r=>ca(r)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(r=>ca(r)).join(",")),e.ue=n}return e.ue}function sy(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!b4(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!iC(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!aw(t.startAt,e.startAt)&&aw(t.endAt,e.endAt)}function vm(t){return ne.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xa{constructor(e,n=null,r=[],i=[],s=null,o="F",a=null,l=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=i,this.limit=s,this.limitType=o,this.startAt=a,this.endAt=l,this.ce=null,this.le=null,this.he=null,this.startAt,this.endAt}}function N4(t,e,n,r,i,s,o,a){return new xa(t,e,n,r,i,s,o,a)}function aC(t){return new xa(t)}function uw(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function lC(t){return t.collectionGroup!==null}function Ul(t){const e=ce(t);if(e.ce===null){e.ce=[];const n=new Set;for(const s of e.explicitOrderBy)e.ce.push(s),n.add(s.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(o){let a=new Nt(Pt.comparator);return o.filters.forEach(l=>{l.getFlattenedFilters().forEach(c=>{c.isInequality()&&(a=a.add(c.field))})}),a})(e).forEach(s=>{n.has(s.canonicalString())||s.isKeyField()||e.ce.push(new du(s,r))}),n.has(Pt.keyField().canonicalString())||e.ce.push(new du(Pt.keyField(),r))}return e.ce}function hr(t){const e=ce(t);return e.le||(e.le=O4(e,Ul(t))),e.le}function O4(t,e){if(t.limitType==="F")return lw(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(i=>{const s=i.dir==="desc"?"asc":"desc";return new du(i.field,s)});const n=t.endAt?new Mh(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new Mh(t.startAt.position,t.startAt.inclusive):null;return lw(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}}function _m(t,e){const n=t.filters.concat([e]);return new xa(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}function wm(t,e,n){return new xa(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function vd(t,e){return sy(hr(t),hr(e))&&t.limitType===e.limitType}function uC(t){return`${iy(hr(t))}|lt:${t.limitType}`}function Eo(t){return`Query(target=${function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map(i=>sC(i)).join(", ")}]`),yd(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map(i=>function(o){return`${o.field.canonicalString()} (${o.dir})`}(i)).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map(i=>ca(i)).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map(i=>ca(i)).join(",")),`Target(${r})`}(hr(t))}; limitType=${t.limitType})`}function _d(t,e){return e.isFoundDocument()&&function(r,i){const s=i.key.path;return r.collectionGroup!==null?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(s):ne.isDocumentKey(r.path)?r.path.isEqual(s):r.path.isImmediateParentOf(s)}(t,e)&&function(r,i){for(const s of Ul(r))if(!s.field.isKeyField()&&i.data.field(s.field)===null)return!1;return!0}(t,e)&&function(r,i){for(const s of r.filters)if(!s.matches(i))return!1;return!0}(t,e)&&function(r,i){return!(r.startAt&&!function(o,a,l){const c=ow(o,a,l);return o.inclusive?c<=0:c<0}(r.startAt,Ul(r),i)||r.endAt&&!function(o,a,l){const c=ow(o,a,l);return o.inclusive?c>=0:c>0}(r.endAt,Ul(r),i))}(t,e)}function L4(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function cC(t){return(e,n)=>{let r=!1;for(const i of Ul(t)){const s=D4(i,e,n);if(s!==0)return s;r=r||i.field.isKeyField()}return 0}}function D4(t,e,n){const r=t.field.isKeyField()?ne.comparator(e.key,n.key):function(s,o,a){const l=o.data.field(s),c=a.data.field(s);return l!==null&&c!==null?ua(l,c):le()}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return le()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ka{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r!==void 0){for(const[i,s]of r)if(this.equalsFn(i,e))return s}}has(e){return this.get(e)!==void 0}set(e,n){const r=this.mapKeyFn(e),i=this.inner[r];if(i===void 0)return this.inner[r]=[[e,n]],void this.innerSize++;for(let s=0;s<i.length;s++)if(this.equalsFn(i[s][0],e))return void(i[s]=[e,n]);i.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return r.length===1?delete this.inner[n]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){Js(this.inner,(n,r)=>{for(const[i,s]of r)e(i,s)})}isEmpty(){return JT(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const M4=new Ye(ne.comparator);function Qr(){return M4}const hC=new Ye(ne.comparator);function wl(...t){let e=hC;for(const n of t)e=e.insert(n.key,n);return e}function dC(t){let e=hC;return t.forEach((n,r)=>e=e.insert(n,r.overlayedDocument)),e}function xs(){return Vl()}function fC(){return Vl()}function Vl(){return new ka(t=>t.toString(),(t,e)=>t.isEqual(e))}const U4=new Ye(ne.comparator),V4=new Nt(ne.comparator);function we(...t){let e=V4;for(const n of t)e=e.add(n);return e}const $4=new Nt(Ae);function F4(){return $4}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pC(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Dh(e)?"-0":e}}function mC(t){return{integerValue:""+t}}function j4(t,e){return v4(e)?mC(e):pC(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wd{constructor(){this._=void 0}}function z4(t,e,n){return t instanceof Uh?function(i,s){const o={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return s&&ty(s)&&(s=ny(s)),s&&(o.fields.__previous_value__=s),{mapValue:o}}(n,e):t instanceof fu?yC(t,e):t instanceof pu?vC(t,e):function(i,s){const o=gC(i,s),a=cw(o)+cw(i.Pe);return gm(o)&&gm(i.Pe)?mC(a):pC(i.serializer,a)}(t,e)}function B4(t,e,n){return t instanceof fu?yC(t,e):t instanceof pu?vC(t,e):n}function gC(t,e){return t instanceof Vh?function(r){return gm(r)||function(s){return!!s&&"doubleValue"in s}(r)}(e)?e:{integerValue:0}:null}class Uh extends wd{}class fu extends wd{constructor(e){super(),this.elements=e}}function yC(t,e){const n=_C(e);for(const r of t.elements)n.some(i=>gr(i,r))||n.push(r);return{arrayValue:{values:n}}}class pu extends wd{constructor(e){super(),this.elements=e}}function vC(t,e){let n=_C(e);for(const r of t.elements)n=n.filter(i=>!gr(i,r));return{arrayValue:{values:n}}}class Vh extends wd{constructor(e,n){super(),this.serializer=e,this.Pe=n}}function cw(t){return lt(t.integerValue||t.doubleValue)}function _C(t){return ry(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}function H4(t,e){return t.field.isEqual(e.field)&&function(r,i){return r instanceof fu&&i instanceof fu||r instanceof pu&&i instanceof pu?la(r.elements,i.elements,gr):r instanceof Vh&&i instanceof Vh?gr(r.Pe,i.Pe):r instanceof Uh&&i instanceof Uh}(t.transform,e.transform)}class W4{constructor(e,n){this.version=e,this.transformResults=n}}class dr{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new dr}static exists(e){return new dr(void 0,e)}static updateTime(e){return new dr(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Xc(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class Ed{}function wC(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new bC(t.key,dr.none()):new Pu(t.key,t.data,dr.none());{const n=t.data,r=rn.empty();let i=new Nt(Pt.comparator);for(let s of e.fields)if(!i.has(s)){let o=n.field(s);o===null&&s.length>1&&(s=s.popLast(),o=n.field(s)),o===null?r.delete(s):r.set(s,o),i=i.add(s)}return new os(t.key,r,new mn(i.toArray()),dr.none())}}function q4(t,e,n){t instanceof Pu?function(i,s,o){const a=i.value.clone(),l=dw(i.fieldTransforms,s,o.transformResults);a.setAll(l),s.convertToFoundDocument(o.version,a).setHasCommittedMutations()}(t,e,n):t instanceof os?function(i,s,o){if(!Xc(i.precondition,s))return void s.convertToUnknownDocument(o.version);const a=dw(i.fieldTransforms,s,o.transformResults),l=s.data;l.setAll(EC(i)),l.setAll(a),s.convertToFoundDocument(o.version,l).setHasCommittedMutations()}(t,e,n):function(i,s,o){s.convertToNoDocument(o.version).setHasCommittedMutations()}(0,e,n)}function $l(t,e,n,r){return t instanceof Pu?function(s,o,a,l){if(!Xc(s.precondition,o))return a;const c=s.value.clone(),h=fw(s.fieldTransforms,l,o);return c.setAll(h),o.convertToFoundDocument(o.version,c).setHasLocalMutations(),null}(t,e,n,r):t instanceof os?function(s,o,a,l){if(!Xc(s.precondition,o))return a;const c=fw(s.fieldTransforms,l,o),h=o.data;return h.setAll(EC(s)),h.setAll(c),o.convertToFoundDocument(o.version,h).setHasLocalMutations(),a===null?null:a.unionWith(s.fieldMask.fields).unionWith(s.fieldTransforms.map(f=>f.field))}(t,e,n,r):function(s,o,a){return Xc(s.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):a}(t,e,n)}function G4(t,e){let n=null;for(const r of t.fieldTransforms){const i=e.data.field(r.field),s=gC(r.transform,i||null);s!=null&&(n===null&&(n=rn.empty()),n.set(r.field,s))}return n||null}function hw(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(r,i){return r===void 0&&i===void 0||!(!r||!i)&&la(r,i,(s,o)=>H4(s,o))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class Pu extends Ed{constructor(e,n,r,i=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}}class os extends Ed{constructor(e,n,r,i,s=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=i,this.fieldTransforms=s,this.type=1}getFieldMask(){return this.fieldMask}}function EC(t){const e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const r=t.data.field(n);e.set(n,r)}}),e}function dw(t,e,n){const r=new Map;De(t.length===n.length);for(let i=0;i<n.length;i++){const s=t[i],o=s.transform,a=e.data.field(s.field);r.set(s.field,B4(o,a,n[i]))}return r}function fw(t,e,n){const r=new Map;for(const i of t){const s=i.transform,o=n.data.field(i.field);r.set(i.field,z4(s,o,e))}return r}class bC extends Ed{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class K4 extends Ed{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Q4{constructor(e,n,r,i){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,n){const r=n.mutationResults;for(let i=0;i<this.mutations.length;i++){const s=this.mutations[i];s.key.isEqual(e.key)&&q4(s,e,r[i])}}applyToLocalView(e,n){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(n=$l(r,e,n,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(n=$l(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const r=fC();return this.mutations.forEach(i=>{const s=e.get(i.key),o=s.overlayedDocument;let a=this.applyToLocalView(o,s.mutatedFields);a=n.has(i.key)?null:a;const l=wC(o,a);l!==null&&r.set(i.key,l),o.isValidDocument()||o.convertToNoDocument(ue.min())}),r}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),we())}isEqual(e){return this.batchId===e.batchId&&la(this.mutations,e.mutations,(n,r)=>hw(n,r))&&la(this.baseMutations,e.baseMutations,(n,r)=>hw(n,r))}}class oy{constructor(e,n,r,i){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=i}static from(e,n,r){De(e.mutations.length===r.length);let i=function(){return U4}();const s=e.mutations;for(let o=0;o<s.length;o++)i=i.insert(s[o].key,r[o].version);return new oy(e,n,r,i)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class X4{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Y4{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var ot,be;function J4(t){switch(t){default:return le();case j.CANCELLED:case j.UNKNOWN:case j.DEADLINE_EXCEEDED:case j.RESOURCE_EXHAUSTED:case j.INTERNAL:case j.UNAVAILABLE:case j.UNAUTHENTICATED:return!1;case j.INVALID_ARGUMENT:case j.NOT_FOUND:case j.ALREADY_EXISTS:case j.PERMISSION_DENIED:case j.FAILED_PRECONDITION:case j.ABORTED:case j.OUT_OF_RANGE:case j.UNIMPLEMENTED:case j.DATA_LOSS:return!0}}function TC(t){if(t===void 0)return Kr("GRPC error has no .code"),j.UNKNOWN;switch(t){case ot.OK:return j.OK;case ot.CANCELLED:return j.CANCELLED;case ot.UNKNOWN:return j.UNKNOWN;case ot.DEADLINE_EXCEEDED:return j.DEADLINE_EXCEEDED;case ot.RESOURCE_EXHAUSTED:return j.RESOURCE_EXHAUSTED;case ot.INTERNAL:return j.INTERNAL;case ot.UNAVAILABLE:return j.UNAVAILABLE;case ot.UNAUTHENTICATED:return j.UNAUTHENTICATED;case ot.INVALID_ARGUMENT:return j.INVALID_ARGUMENT;case ot.NOT_FOUND:return j.NOT_FOUND;case ot.ALREADY_EXISTS:return j.ALREADY_EXISTS;case ot.PERMISSION_DENIED:return j.PERMISSION_DENIED;case ot.FAILED_PRECONDITION:return j.FAILED_PRECONDITION;case ot.ABORTED:return j.ABORTED;case ot.OUT_OF_RANGE:return j.OUT_OF_RANGE;case ot.UNIMPLEMENTED:return j.UNIMPLEMENTED;case ot.DATA_LOSS:return j.DATA_LOSS;default:return le()}}(be=ot||(ot={}))[be.OK=0]="OK",be[be.CANCELLED=1]="CANCELLED",be[be.UNKNOWN=2]="UNKNOWN",be[be.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",be[be.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",be[be.NOT_FOUND=5]="NOT_FOUND",be[be.ALREADY_EXISTS=6]="ALREADY_EXISTS",be[be.PERMISSION_DENIED=7]="PERMISSION_DENIED",be[be.UNAUTHENTICATED=16]="UNAUTHENTICATED",be[be.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",be[be.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",be[be.ABORTED=10]="ABORTED",be[be.OUT_OF_RANGE=11]="OUT_OF_RANGE",be[be.UNIMPLEMENTED=12]="UNIMPLEMENTED",be[be.INTERNAL=13]="INTERNAL",be[be.UNAVAILABLE=14]="UNAVAILABLE",be[be.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Z4(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eD=new Rs([4294967295,4294967295],0);function pw(t){const e=Z4().encode(t),n=new BT;return n.update(e),new Uint8Array(n.digest())}function mw(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),s=e.getUint32(12,!0);return[new Rs([n,r],0),new Rs([i,s],0)]}class ay{constructor(e,n,r){if(this.bitmap=e,this.padding=n,this.hashCount=r,n<0||n>=8)throw new El(`Invalid padding: ${n}`);if(r<0)throw new El(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new El(`Invalid hash count: ${r}`);if(e.length===0&&n!==0)throw new El(`Invalid padding when bitmap length is 0: ${n}`);this.Ie=8*e.length-n,this.Te=Rs.fromNumber(this.Ie)}Ee(e,n,r){let i=e.add(n.multiply(Rs.fromNumber(r)));return i.compare(eD)===1&&(i=new Rs([i.getBits(0),i.getBits(1)],0)),i.modulo(this.Te).toNumber()}de(e){return(this.bitmap[Math.floor(e/8)]&1<<e%8)!=0}mightContain(e){if(this.Ie===0)return!1;const n=pw(e),[r,i]=mw(n);for(let s=0;s<this.hashCount;s++){const o=this.Ee(r,i,s);if(!this.de(o))return!1}return!0}static create(e,n,r){const i=e%8==0?0:8-e%8,s=new Uint8Array(Math.ceil(e/8)),o=new ay(s,i,n);return r.forEach(a=>o.insert(a)),o}insert(e){if(this.Ie===0)return;const n=pw(e),[r,i]=mw(n);for(let s=0;s<this.hashCount;s++){const o=this.Ee(r,i,s);this.Ae(o)}}Ae(e){const n=Math.floor(e/8),r=e%8;this.bitmap[n]|=1<<r}}class El extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bd{constructor(e,n,r,i,s){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=s}static createSynthesizedRemoteEventForCurrentChange(e,n,r){const i=new Map;return i.set(e,Ru.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new bd(ue.min(),i,new Ye(Ae),Qr(),we())}}class Ru{constructor(e,n,r,i,s){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=s}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new Ru(r,n,we(),we(),we())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yc{constructor(e,n,r,i){this.Re=e,this.removedTargetIds=n,this.key=r,this.Ve=i}}class CC{constructor(e,n){this.targetId=e,this.me=n}}class IC{constructor(e,n,r=Ht.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=i}}class gw{constructor(){this.fe=0,this.ge=vw(),this.pe=Ht.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return this.fe!==0}get be(){return this.we}De(e){e.approximateByteSize()>0&&(this.we=!0,this.pe=e)}Ce(){let e=we(),n=we(),r=we();return this.ge.forEach((i,s)=>{switch(s){case 0:e=e.add(i);break;case 2:n=n.add(i);break;case 1:r=r.add(i);break;default:le()}}),new Ru(this.pe,this.ye,e,n,r)}ve(){this.we=!1,this.ge=vw()}Fe(e,n){this.we=!0,this.ge=this.ge.insert(e,n)}Me(e){this.we=!0,this.ge=this.ge.remove(e)}xe(){this.fe+=1}Oe(){this.fe-=1,De(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}}class tD{constructor(e){this.Le=e,this.Be=new Map,this.ke=Qr(),this.qe=yw(),this.Qe=new Ye(Ae)}Ke(e){for(const n of e.Re)e.Ve&&e.Ve.isFoundDocument()?this.$e(n,e.Ve):this.Ue(n,e.key,e.Ve);for(const n of e.removedTargetIds)this.Ue(n,e.key,e.Ve)}We(e){this.forEachTarget(e,n=>{const r=this.Ge(n);switch(e.state){case 0:this.ze(n)&&r.De(e.resumeToken);break;case 1:r.Oe(),r.Se||r.ve(),r.De(e.resumeToken);break;case 2:r.Oe(),r.Se||this.removeTarget(n);break;case 3:this.ze(n)&&(r.Ne(),r.De(e.resumeToken));break;case 4:this.ze(n)&&(this.je(n),r.De(e.resumeToken));break;default:le()}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.Be.forEach((r,i)=>{this.ze(i)&&n(i)})}He(e){const n=e.targetId,r=e.me.count,i=this.Je(n);if(i){const s=i.target;if(vm(s))if(r===0){const o=new ne(s.path);this.Ue(n,o,zt.newNoDocument(o,ue.min()))}else De(r===1);else{const o=this.Ye(n);if(o!==r){const a=this.Ze(e),l=a?this.Xe(a,e,o):1;if(l!==0){this.je(n);const c=l===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Qe=this.Qe.insert(n,c)}}}}}Ze(e){const n=e.me.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:r="",padding:i=0},hashCount:s=0}=n;let o,a;try{o=Ws(r).toUint8Array()}catch(l){if(l instanceof ZT)return aa("Decoding the base64 bloom filter in existence filter failed ("+l.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw l}try{a=new ay(o,i,s)}catch(l){return aa(l instanceof El?"BloomFilter error: ":"Applying bloom filter failed: ",l),null}return a.Ie===0?null:a}Xe(e,n,r){return n.me.count===r-this.nt(e,n.targetId)?0:2}nt(e,n){const r=this.Le.getRemoteKeysForTarget(n);let i=0;return r.forEach(s=>{const o=this.Le.tt(),a=`projects/${o.projectId}/databases/${o.database}/documents/${s.path.canonicalString()}`;e.mightContain(a)||(this.Ue(n,s,null),i++)}),i}rt(e){const n=new Map;this.Be.forEach((s,o)=>{const a=this.Je(o);if(a){if(s.current&&vm(a.target)){const l=new ne(a.target.path);this.ke.get(l)!==null||this.it(o,l)||this.Ue(o,l,zt.newNoDocument(l,e))}s.be&&(n.set(o,s.Ce()),s.ve())}});let r=we();this.qe.forEach((s,o)=>{let a=!0;o.forEachWhile(l=>{const c=this.Je(l);return!c||c.purpose==="TargetPurposeLimboResolution"||(a=!1,!1)}),a&&(r=r.add(s))}),this.ke.forEach((s,o)=>o.setReadTime(e));const i=new bd(e,n,this.Qe,this.ke,r);return this.ke=Qr(),this.qe=yw(),this.Qe=new Ye(Ae),i}$e(e,n){if(!this.ze(e))return;const r=this.it(e,n.key)?2:0;this.Ge(e).Fe(n.key,r),this.ke=this.ke.insert(n.key,n),this.qe=this.qe.insert(n.key,this.st(n.key).add(e))}Ue(e,n,r){if(!this.ze(e))return;const i=this.Ge(e);this.it(e,n)?i.Fe(n,1):i.Me(n),this.qe=this.qe.insert(n,this.st(n).delete(e)),r&&(this.ke=this.ke.insert(n,r))}removeTarget(e){this.Be.delete(e)}Ye(e){const n=this.Ge(e).Ce();return this.Le.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}xe(e){this.Ge(e).xe()}Ge(e){let n=this.Be.get(e);return n||(n=new gw,this.Be.set(e,n)),n}st(e){let n=this.qe.get(e);return n||(n=new Nt(Ae),this.qe=this.qe.insert(e,n)),n}ze(e){const n=this.Je(e)!==null;return n||J("WatchChangeAggregator","Detected inactive target",e),n}Je(e){const n=this.Be.get(e);return n&&n.Se?null:this.Le.ot(e)}je(e){this.Be.set(e,new gw),this.Le.getRemoteKeysForTarget(e).forEach(n=>{this.Ue(e,n,null)})}it(e,n){return this.Le.getRemoteKeysForTarget(e).has(n)}}function yw(){return new Ye(ne.comparator)}function vw(){return new Ye(ne.comparator)}const nD={asc:"ASCENDING",desc:"DESCENDING"},rD={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},iD={and:"AND",or:"OR"};class sD{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function Em(t,e){return t.useProto3Json||yd(e)?e:{value:e}}function $h(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function SC(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function oD(t,e){return $h(t,e.toTimestamp())}function fr(t){return De(!!t),ue.fromTimestamp(function(n){const r=Ki(n);return new mt(r.seconds,r.nanos)}(t))}function ly(t,e){return bm(t,e).canonicalString()}function bm(t,e){const n=function(i){return new Fe(["projects",i.projectId,"databases",i.database])}(t).child("documents");return e===void 0?n:n.child(e)}function AC(t){const e=Fe.fromString(t);return De(NC(e)),e}function Tm(t,e){return ly(t.databaseId,e.path)}function Kf(t,e){const n=AC(e);if(n.get(1)!==t.databaseId.projectId)throw new Y(j.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new Y(j.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new ne(kC(n))}function xC(t,e){return ly(t.databaseId,e)}function aD(t){const e=AC(t);return e.length===4?Fe.emptyPath():kC(e)}function Cm(t){return new Fe(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function kC(t){return De(t.length>4&&t.get(4)==="documents"),t.popFirst(5)}function _w(t,e,n){return{name:Tm(t,e),fields:n.value.mapValue.fields}}function lD(t,e){let n;if("targetChange"in e){e.targetChange;const r=function(c){return c==="NO_CHANGE"?0:c==="ADD"?1:c==="REMOVE"?2:c==="CURRENT"?3:c==="RESET"?4:le()}(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],s=function(c,h){return c.useProto3Json?(De(h===void 0||typeof h=="string"),Ht.fromBase64String(h||"")):(De(h===void 0||h instanceof Buffer||h instanceof Uint8Array),Ht.fromUint8Array(h||new Uint8Array))}(t,e.targetChange.resumeToken),o=e.targetChange.cause,a=o&&function(c){const h=c.code===void 0?j.UNKNOWN:TC(c.code);return new Y(h,c.message||"")}(o);n=new IC(r,i,s,a||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const i=Kf(t,r.document.name),s=fr(r.document.updateTime),o=r.document.createTime?fr(r.document.createTime):ue.min(),a=new rn({mapValue:{fields:r.document.fields}}),l=zt.newFoundDocument(i,s,o,a),c=r.targetIds||[],h=r.removedTargetIds||[];n=new Yc(c,h,l.key,l)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const i=Kf(t,r.document),s=r.readTime?fr(r.readTime):ue.min(),o=zt.newNoDocument(i,s),a=r.removedTargetIds||[];n=new Yc([],a,o.key,o)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const i=Kf(t,r.document),s=r.removedTargetIds||[];n=new Yc([],s,i,null)}else{if(!("filter"in e))return le();{e.filter;const r=e.filter;r.targetId;const{count:i=0,unchangedNames:s}=r,o=new Y4(i,s),a=r.targetId;n=new CC(a,o)}}return n}function uD(t,e){let n;if(e instanceof Pu)n={update:_w(t,e.key,e.value)};else if(e instanceof bC)n={delete:Tm(t,e.key)};else if(e instanceof os)n={update:_w(t,e.key,e.data),updateMask:vD(e.fieldMask)};else{if(!(e instanceof K4))return le();n={verify:Tm(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(r=>function(s,o){const a=o.transform;if(a instanceof Uh)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(a instanceof fu)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:a.elements}};if(a instanceof pu)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:a.elements}};if(a instanceof Vh)return{fieldPath:o.field.canonicalString(),increment:a.Pe};throw le()}(0,r))),e.precondition.isNone||(n.currentDocument=function(i,s){return s.updateTime!==void 0?{updateTime:oD(i,s.updateTime)}:s.exists!==void 0?{exists:s.exists}:le()}(t,e.precondition)),n}function cD(t,e){return t&&t.length>0?(De(e!==void 0),t.map(n=>function(i,s){let o=i.updateTime?fr(i.updateTime):fr(s);return o.isEqual(ue.min())&&(o=fr(s)),new W4(o,i.transformResults||[])}(n,e))):[]}function hD(t,e){return{documents:[xC(t,e.path)]}}function dD(t,e){const n={structuredQuery:{}},r=e.path;let i;e.collectionGroup!==null?(i=r,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=xC(t,i);const s=function(c){if(c.length!==0)return RC(Jn.create(c,"and"))}(e.filters);s&&(n.structuredQuery.where=s);const o=function(c){if(c.length!==0)return c.map(h=>function(p){return{field:bo(p.field),direction:mD(p.dir)}}(h))}(e.orderBy);o&&(n.structuredQuery.orderBy=o);const a=Em(t,e.limit);return a!==null&&(n.structuredQuery.limit=a),e.startAt&&(n.structuredQuery.startAt=function(c){return{before:c.inclusive,values:c.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(c){return{before:!c.inclusive,values:c.position}}(e.endAt)),{_t:n,parent:i}}function fD(t){let e=aD(t.parent);const n=t.structuredQuery,r=n.from?n.from.length:0;let i=null;if(r>0){De(r===1);const h=n.from[0];h.allDescendants?i=h.collectionId:e=e.child(h.collectionId)}let s=[];n.where&&(s=function(f){const p=PC(f);return p instanceof Jn&&rC(p)?p.getFilters():[p]}(n.where));let o=[];n.orderBy&&(o=function(f){return f.map(p=>function(w){return new du(To(w.field),function(R){switch(R){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(w.direction))}(p))}(n.orderBy));let a=null;n.limit&&(a=function(f){let p;return p=typeof f=="object"?f.value:f,yd(p)?null:p}(n.limit));let l=null;n.startAt&&(l=function(f){const p=!!f.before,_=f.values||[];return new Mh(_,p)}(n.startAt));let c=null;return n.endAt&&(c=function(f){const p=!f.before,_=f.values||[];return new Mh(_,p)}(n.endAt)),N4(e,i,o,s,a,"F",l,c)}function pD(t,e){const n=function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return le()}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function PC(t){return t.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const r=To(n.unaryFilter.field);return ct.create(r,"==",{doubleValue:NaN});case"IS_NULL":const i=To(n.unaryFilter.field);return ct.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const s=To(n.unaryFilter.field);return ct.create(s,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const o=To(n.unaryFilter.field);return ct.create(o,"!=",{nullValue:"NULL_VALUE"});default:return le()}}(t):t.fieldFilter!==void 0?function(n){return ct.create(To(n.fieldFilter.field),function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return le()}}(n.fieldFilter.op),n.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(n){return Jn.create(n.compositeFilter.filters.map(r=>PC(r)),function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return le()}}(n.compositeFilter.op))}(t):le()}function mD(t){return nD[t]}function gD(t){return rD[t]}function yD(t){return iD[t]}function bo(t){return{fieldPath:t.canonicalString()}}function To(t){return Pt.fromServerFormat(t.fieldPath)}function RC(t){return t instanceof ct?function(n){if(n.op==="=="){if(sw(n.value))return{unaryFilter:{field:bo(n.field),op:"IS_NAN"}};if(iw(n.value))return{unaryFilter:{field:bo(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(sw(n.value))return{unaryFilter:{field:bo(n.field),op:"IS_NOT_NAN"}};if(iw(n.value))return{unaryFilter:{field:bo(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:bo(n.field),op:gD(n.op),value:n.value}}}(t):t instanceof Jn?function(n){const r=n.getFilters().map(i=>RC(i));return r.length===1?r[0]:{compositeFilter:{op:yD(n.op),filters:r}}}(t):le()}function vD(t){const e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function NC(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Si{constructor(e,n,r,i,s=ue.min(),o=ue.min(),a=Ht.EMPTY_BYTE_STRING,l=null){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=s,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=a,this.expectedCount=l}withSequenceNumber(e){return new Si(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new Si(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Si(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Si(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _D{constructor(e){this.ct=e}}function wD(t){const e=fD({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?wm(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ED{constructor(){this._n=new bD}addToCollectionParentIndex(e,n){return this._n.add(n),B.resolve()}getCollectionParents(e,n){return B.resolve(this._n.getEntries(n))}addFieldIndex(e,n){return B.resolve()}deleteFieldIndex(e,n){return B.resolve()}deleteAllFieldIndexes(e){return B.resolve()}createTargetIndexes(e,n){return B.resolve()}getDocumentsMatchingTarget(e,n){return B.resolve(null)}getIndexType(e,n){return B.resolve(0)}getFieldIndexes(e,n){return B.resolve([])}getNextCollectionGroupToUpdate(e){return B.resolve(null)}getMinOffset(e,n){return B.resolve(Gi.min())}getMinOffsetFromCollectionGroup(e,n){return B.resolve(Gi.min())}updateCollectionGroup(e,n,r){return B.resolve()}updateIndexEntries(e,n){return B.resolve()}}class bD{constructor(){this.index={}}add(e){const n=e.lastSegment(),r=e.popLast(),i=this.index[n]||new Nt(Fe.comparator),s=!i.has(r);return this.index[n]=i.add(r),s}has(e){const n=e.lastSegment(),r=e.popLast(),i=this.index[n];return i&&i.has(r)}getEntries(e){return(this.index[e]||new Nt(Fe.comparator)).toArray()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ha{constructor(e){this.On=e}next(){return this.On+=2,this.On}static Nn(){return new ha(0)}static Ln(){return new ha(-1)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TD{constructor(){this.changes=new ka(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,zt.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const r=this.changes.get(n);return r!==void 0?B.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CD{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ID{constructor(e,n,r,i){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next(i=>(r=i,this.remoteDocumentCache.getEntry(e,n))).next(i=>(r!==null&&$l(r.mutation,i,mn.empty(),mt.now()),i))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.getLocalViewOfDocuments(e,r,we()).next(()=>r))}getLocalViewOfDocuments(e,n,r=we()){const i=xs();return this.populateOverlays(e,i,n).next(()=>this.computeViews(e,n,i,r).next(s=>{let o=wl();return s.forEach((a,l)=>{o=o.insert(a,l.overlayedDocument)}),o}))}getOverlayedDocuments(e,n){const r=xs();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,we()))}populateOverlays(e,n,r){const i=[];return r.forEach(s=>{n.has(s)||i.push(s)}),this.documentOverlayCache.getOverlays(e,i).next(s=>{s.forEach((o,a)=>{n.set(o,a)})})}computeViews(e,n,r,i){let s=Qr();const o=Vl(),a=function(){return Vl()}();return n.forEach((l,c)=>{const h=r.get(c.key);i.has(c.key)&&(h===void 0||h.mutation instanceof os)?s=s.insert(c.key,c):h!==void 0?(o.set(c.key,h.mutation.getFieldMask()),$l(h.mutation,c,h.mutation.getFieldMask(),mt.now())):o.set(c.key,mn.empty())}),this.recalculateAndSaveOverlays(e,s).next(l=>(l.forEach((c,h)=>o.set(c,h)),n.forEach((c,h)=>{var f;return a.set(c,new CD(h,(f=o.get(c))!==null&&f!==void 0?f:null))}),a))}recalculateAndSaveOverlays(e,n){const r=Vl();let i=new Ye((o,a)=>o-a),s=we();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(o=>{for(const a of o)a.keys().forEach(l=>{const c=n.get(l);if(c===null)return;let h=r.get(l)||mn.empty();h=a.applyToLocalView(c,h),r.set(l,h);const f=(i.get(a.batchId)||we()).add(l);i=i.insert(a.batchId,f)})}).next(()=>{const o=[],a=i.getReverseIterator();for(;a.hasNext();){const l=a.getNext(),c=l.key,h=l.value,f=fC();h.forEach(p=>{if(!s.has(p)){const _=wC(n.get(p),r.get(p));_!==null&&f.set(p,_),s=s.add(p)}}),o.push(this.documentOverlayCache.saveOverlays(e,c,f))}return B.waitFor(o)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,n,r,i){return function(o){return ne.isDocumentKey(o.path)&&o.collectionGroup===null&&o.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):lC(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r,i):this.getDocumentsMatchingCollectionQuery(e,n,r,i)}getNextDocuments(e,n,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,i).next(s=>{const o=i-s.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,i-s.size):B.resolve(xs());let a=-1,l=s;return o.next(c=>B.forEach(c,(h,f)=>(a<f.largestBatchId&&(a=f.largestBatchId),s.get(h)?B.resolve():this.remoteDocumentCache.getEntry(e,h).next(p=>{l=l.insert(h,p)}))).next(()=>this.populateOverlays(e,c,s)).next(()=>this.computeViews(e,l,c,we())).next(h=>({batchId:a,changes:dC(h)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new ne(n)).next(r=>{let i=wl();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,n,r,i){const s=n.collectionGroup;let o=wl();return this.indexManager.getCollectionParents(e,s).next(a=>B.forEach(a,l=>{const c=function(f,p){return new xa(p,null,f.explicitOrderBy.slice(),f.filters.slice(),f.limit,f.limitType,f.startAt,f.endAt)}(n,l.child(s));return this.getDocumentsMatchingCollectionQuery(e,c,r,i).next(h=>{h.forEach((f,p)=>{o=o.insert(f,p)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(e,n,r,i){let s;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next(o=>(s=o,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,s,i))).next(o=>{s.forEach((l,c)=>{const h=c.getKey();o.get(h)===null&&(o=o.insert(h,zt.newInvalidDocument(h)))});let a=wl();return o.forEach((l,c)=>{const h=s.get(l);h!==void 0&&$l(h.mutation,c,mn.empty(),mt.now()),_d(n,c)&&(a=a.insert(l,c))}),a})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SD{constructor(e){this.serializer=e,this.cr=new Map,this.lr=new Map}getBundleMetadata(e,n){return B.resolve(this.cr.get(n))}saveBundleMetadata(e,n){return this.cr.set(n.id,function(i){return{id:i.id,version:i.version,createTime:fr(i.createTime)}}(n)),B.resolve()}getNamedQuery(e,n){return B.resolve(this.lr.get(n))}saveNamedQuery(e,n){return this.lr.set(n.name,function(i){return{name:i.name,query:wD(i.bundledQuery),readTime:fr(i.readTime)}}(n)),B.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AD{constructor(){this.overlays=new Ye(ne.comparator),this.hr=new Map}getOverlay(e,n){return B.resolve(this.overlays.get(n))}getOverlays(e,n){const r=xs();return B.forEach(n,i=>this.getOverlay(e,i).next(s=>{s!==null&&r.set(i,s)})).next(()=>r)}saveOverlays(e,n,r){return r.forEach((i,s)=>{this.ht(e,n,s)}),B.resolve()}removeOverlaysForBatchId(e,n,r){const i=this.hr.get(r);return i!==void 0&&(i.forEach(s=>this.overlays=this.overlays.remove(s)),this.hr.delete(r)),B.resolve()}getOverlaysForCollection(e,n,r){const i=xs(),s=n.length+1,o=new ne(n.child("")),a=this.overlays.getIteratorFrom(o);for(;a.hasNext();){const l=a.getNext().value,c=l.getKey();if(!n.isPrefixOf(c.path))break;c.path.length===s&&l.largestBatchId>r&&i.set(l.getKey(),l)}return B.resolve(i)}getOverlaysForCollectionGroup(e,n,r,i){let s=new Ye((c,h)=>c-h);const o=this.overlays.getIterator();for(;o.hasNext();){const c=o.getNext().value;if(c.getKey().getCollectionGroup()===n&&c.largestBatchId>r){let h=s.get(c.largestBatchId);h===null&&(h=xs(),s=s.insert(c.largestBatchId,h)),h.set(c.getKey(),c)}}const a=xs(),l=s.getIterator();for(;l.hasNext()&&(l.getNext().value.forEach((c,h)=>a.set(c,h)),!(a.size()>=i)););return B.resolve(a)}ht(e,n,r){const i=this.overlays.get(r.key);if(i!==null){const o=this.hr.get(i.largestBatchId).delete(r.key);this.hr.set(i.largestBatchId,o)}this.overlays=this.overlays.insert(r.key,new X4(n,r));let s=this.hr.get(n);s===void 0&&(s=we(),this.hr.set(n,s)),this.hr.set(n,s.add(r.key))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uy{constructor(){this.Pr=new Nt(yt.Ir),this.Tr=new Nt(yt.Er)}isEmpty(){return this.Pr.isEmpty()}addReference(e,n){const r=new yt(e,n);this.Pr=this.Pr.add(r),this.Tr=this.Tr.add(r)}dr(e,n){e.forEach(r=>this.addReference(r,n))}removeReference(e,n){this.Ar(new yt(e,n))}Rr(e,n){e.forEach(r=>this.removeReference(r,n))}Vr(e){const n=new ne(new Fe([])),r=new yt(n,e),i=new yt(n,e+1),s=[];return this.Tr.forEachInRange([r,i],o=>{this.Ar(o),s.push(o.key)}),s}mr(){this.Pr.forEach(e=>this.Ar(e))}Ar(e){this.Pr=this.Pr.delete(e),this.Tr=this.Tr.delete(e)}gr(e){const n=new ne(new Fe([])),r=new yt(n,e),i=new yt(n,e+1);let s=we();return this.Tr.forEachInRange([r,i],o=>{s=s.add(o.key)}),s}containsKey(e){const n=new yt(e,0),r=this.Pr.firstAfterOrEqual(n);return r!==null&&e.isEqual(r.key)}}class yt{constructor(e,n){this.key=e,this.pr=n}static Ir(e,n){return ne.comparator(e.key,n.key)||Ae(e.pr,n.pr)}static Er(e,n){return Ae(e.pr,n.pr)||ne.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xD{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.yr=1,this.wr=new Nt(yt.Ir)}checkEmpty(e){return B.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,r,i){const s=this.yr;this.yr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const o=new Q4(s,n,r,i);this.mutationQueue.push(o);for(const a of i)this.wr=this.wr.add(new yt(a.key,s)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return B.resolve(o)}lookupMutationBatch(e,n){return B.resolve(this.Sr(n))}getNextMutationBatchAfterBatchId(e,n){const r=n+1,i=this.br(r),s=i<0?0:i;return B.resolve(this.mutationQueue.length>s?this.mutationQueue[s]:null)}getHighestUnacknowledgedBatchId(){return B.resolve(this.mutationQueue.length===0?-1:this.yr-1)}getAllMutationBatches(e){return B.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const r=new yt(n,0),i=new yt(n,Number.POSITIVE_INFINITY),s=[];return this.wr.forEachInRange([r,i],o=>{const a=this.Sr(o.pr);s.push(a)}),B.resolve(s)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new Nt(Ae);return n.forEach(i=>{const s=new yt(i,0),o=new yt(i,Number.POSITIVE_INFINITY);this.wr.forEachInRange([s,o],a=>{r=r.add(a.pr)})}),B.resolve(this.Dr(r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,i=r.length+1;let s=r;ne.isDocumentKey(s)||(s=s.child(""));const o=new yt(new ne(s),0);let a=new Nt(Ae);return this.wr.forEachWhile(l=>{const c=l.key.path;return!!r.isPrefixOf(c)&&(c.length===i&&(a=a.add(l.pr)),!0)},o),B.resolve(this.Dr(a))}Dr(e){const n=[];return e.forEach(r=>{const i=this.Sr(r);i!==null&&n.push(i)}),n}removeMutationBatch(e,n){De(this.Cr(n.batchId,"removed")===0),this.mutationQueue.shift();let r=this.wr;return B.forEach(n.mutations,i=>{const s=new yt(i.key,n.batchId);return r=r.delete(s),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.wr=r})}Mn(e){}containsKey(e,n){const r=new yt(n,0),i=this.wr.firstAfterOrEqual(r);return B.resolve(n.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,B.resolve()}Cr(e,n){return this.br(e)}br(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Sr(e){const n=this.br(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kD{constructor(e){this.vr=e,this.docs=function(){return new Ye(ne.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const r=n.key,i=this.docs.get(r),s=i?i.size:0,o=this.vr(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:o}),this.size+=o-s,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const r=this.docs.get(n);return B.resolve(r?r.document.mutableCopy():zt.newInvalidDocument(n))}getEntries(e,n){let r=Qr();return n.forEach(i=>{const s=this.docs.get(i);r=r.insert(i,s?s.document.mutableCopy():zt.newInvalidDocument(i))}),B.resolve(r)}getDocumentsMatchingQuery(e,n,r,i){let s=Qr();const o=n.path,a=new ne(o.child("")),l=this.docs.getIteratorFrom(a);for(;l.hasNext();){const{key:c,value:{document:h}}=l.getNext();if(!o.isPrefixOf(c.path))break;c.path.length>o.length+1||p4(f4(h),r)<=0||(i.has(h.key)||_d(n,h))&&(s=s.insert(h.key,h.mutableCopy()))}return B.resolve(s)}getAllFromCollectionGroup(e,n,r,i){le()}Fr(e,n){return B.forEach(this.docs,r=>n(r))}newChangeBuffer(e){return new PD(this)}getSize(e){return B.resolve(this.size)}}class PD extends TD{constructor(e){super(),this.ar=e}applyChanges(e){const n=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?n.push(this.ar.addEntry(e,i)):this.ar.removeEntry(r)}),B.waitFor(n)}getFromCache(e,n){return this.ar.getEntry(e,n)}getAllFromCache(e,n){return this.ar.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RD{constructor(e){this.persistence=e,this.Mr=new ka(n=>iy(n),sy),this.lastRemoteSnapshotVersion=ue.min(),this.highestTargetId=0,this.Or=0,this.Nr=new uy,this.targetCount=0,this.Lr=ha.Nn()}forEachTarget(e,n){return this.Mr.forEach((r,i)=>n(i)),B.resolve()}getLastRemoteSnapshotVersion(e){return B.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return B.resolve(this.Or)}allocateTargetId(e){return this.highestTargetId=this.Lr.next(),B.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.Or&&(this.Or=n),B.resolve()}qn(e){this.Mr.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.Lr=new ha(n),this.highestTargetId=n),e.sequenceNumber>this.Or&&(this.Or=e.sequenceNumber)}addTargetData(e,n){return this.qn(n),this.targetCount+=1,B.resolve()}updateTargetData(e,n){return this.qn(n),B.resolve()}removeTargetData(e,n){return this.Mr.delete(n.target),this.Nr.Vr(n.targetId),this.targetCount-=1,B.resolve()}removeTargets(e,n,r){let i=0;const s=[];return this.Mr.forEach((o,a)=>{a.sequenceNumber<=n&&r.get(a.targetId)===null&&(this.Mr.delete(o),s.push(this.removeMatchingKeysForTargetId(e,a.targetId)),i++)}),B.waitFor(s).next(()=>i)}getTargetCount(e){return B.resolve(this.targetCount)}getTargetData(e,n){const r=this.Mr.get(n)||null;return B.resolve(r)}addMatchingKeys(e,n,r){return this.Nr.dr(n,r),B.resolve()}removeMatchingKeys(e,n,r){this.Nr.Rr(n,r);const i=this.persistence.referenceDelegate,s=[];return i&&n.forEach(o=>{s.push(i.markPotentiallyOrphaned(e,o))}),B.waitFor(s)}removeMatchingKeysForTargetId(e,n){return this.Nr.Vr(n),B.resolve()}getMatchingKeysForTargetId(e,n){const r=this.Nr.gr(n);return B.resolve(r)}containsKey(e,n){return B.resolve(this.Nr.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ND{constructor(e,n){this.Br={},this.overlays={},this.kr=new ey(0),this.qr=!1,this.qr=!0,this.referenceDelegate=e(this),this.Qr=new RD(this),this.indexManager=new ED,this.remoteDocumentCache=function(i){return new kD(i)}(r=>this.referenceDelegate.Kr(r)),this.serializer=new _D(n),this.$r=new SD(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.qr=!1,Promise.resolve()}get started(){return this.qr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new AD,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this.Br[e.toKey()];return r||(r=new xD(n,this.referenceDelegate),this.Br[e.toKey()]=r),r}getTargetCache(){return this.Qr}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.$r}runTransaction(e,n,r){J("MemoryPersistence","Starting transaction:",e);const i=new OD(this.kr.next());return this.referenceDelegate.Ur(),r(i).next(s=>this.referenceDelegate.Wr(i).next(()=>s)).toPromise().then(s=>(i.raiseOnCommittedEvent(),s))}Gr(e,n){return B.or(Object.values(this.Br).map(r=>()=>r.containsKey(e,n)))}}class OD extends g4{constructor(e){super(),this.currentSequenceNumber=e}}class cy{constructor(e){this.persistence=e,this.zr=new uy,this.jr=null}static Hr(e){return new cy(e)}get Jr(){if(this.jr)return this.jr;throw le()}addReference(e,n,r){return this.zr.addReference(r,n),this.Jr.delete(r.toString()),B.resolve()}removeReference(e,n,r){return this.zr.removeReference(r,n),this.Jr.add(r.toString()),B.resolve()}markPotentiallyOrphaned(e,n){return this.Jr.add(n.toString()),B.resolve()}removeTarget(e,n){this.zr.Vr(n.targetId).forEach(i=>this.Jr.add(i.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next(i=>{i.forEach(s=>this.Jr.add(s.toString()))}).next(()=>r.removeTargetData(e,n))}Ur(){this.jr=new Set}Wr(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return B.forEach(this.Jr,r=>{const i=ne.fromPath(r);return this.Yr(e,i).next(s=>{s||n.removeEntry(i,ue.min())})}).next(()=>(this.jr=null,n.apply(e)))}updateLimboDocument(e,n){return this.Yr(e,n).next(r=>{r?this.Jr.delete(n.toString()):this.Jr.add(n.toString())})}Kr(e){return 0}Yr(e,n){return B.or([()=>B.resolve(this.zr.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Gr(e,n)])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hy{constructor(e,n,r,i){this.targetId=e,this.fromCache=n,this.qi=r,this.Qi=i}static Ki(e,n){let r=we(),i=we();for(const s of n.docChanges)switch(s.type){case 0:r=r.add(s.doc.key);break;case 1:i=i.add(s.doc.key)}return new hy(e,n.fromCache,r,i)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LD{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DD{constructor(){this.$i=!1,this.Ui=!1,this.Wi=100,this.Gi=function(){return TR()?8:y4(Lt())>0?6:4}()}initialize(e,n){this.zi=e,this.indexManager=n,this.$i=!0}getDocumentsMatchingQuery(e,n,r,i){const s={result:null};return this.ji(e,n).next(o=>{s.result=o}).next(()=>{if(!s.result)return this.Hi(e,n,i,r).next(o=>{s.result=o})}).next(()=>{if(s.result)return;const o=new LD;return this.Ji(e,n,o).next(a=>{if(s.result=a,this.Ui)return this.Yi(e,n,o,a.size)})}).next(()=>s.result)}Yi(e,n,r,i){return r.documentReadCount<this.Wi?(ll()<=Ee.DEBUG&&J("QueryEngine","SDK will not create cache indexes for query:",Eo(n),"since it only creates cache indexes for collection contains","more than or equal to",this.Wi,"documents"),B.resolve()):(ll()<=Ee.DEBUG&&J("QueryEngine","Query:",Eo(n),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.Gi*i?(ll()<=Ee.DEBUG&&J("QueryEngine","The SDK decides to create cache indexes for query:",Eo(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,hr(n))):B.resolve())}ji(e,n){if(uw(n))return B.resolve(null);let r=hr(n);return this.indexManager.getIndexType(e,r).next(i=>i===0?null:(n.limit!==null&&i===1&&(n=wm(n,null,"F"),r=hr(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next(s=>{const o=we(...s);return this.zi.getDocuments(e,o).next(a=>this.indexManager.getMinOffset(e,r).next(l=>{const c=this.Zi(n,a);return this.Xi(n,c,o,l.readTime)?this.ji(e,wm(n,null,"F")):this.es(e,c,n,l)}))})))}Hi(e,n,r,i){return uw(n)||i.isEqual(ue.min())?B.resolve(null):this.zi.getDocuments(e,r).next(s=>{const o=this.Zi(n,s);return this.Xi(n,o,r,i)?B.resolve(null):(ll()<=Ee.DEBUG&&J("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),Eo(n)),this.es(e,o,n,d4(i,-1)).next(a=>a))})}Zi(e,n){let r=new Nt(cC(e));return n.forEach((i,s)=>{_d(e,s)&&(r=r.add(s))}),r}Xi(e,n,r,i){if(e.limit===null)return!1;if(r.size!==n.size)return!0;const s=e.limitType==="F"?n.last():n.first();return!!s&&(s.hasPendingWrites||s.version.compareTo(i)>0)}Ji(e,n,r){return ll()<=Ee.DEBUG&&J("QueryEngine","Using full collection scan to execute query:",Eo(n)),this.zi.getDocumentsMatchingQuery(e,n,Gi.min(),r)}es(e,n,r,i){return this.zi.getDocumentsMatchingQuery(e,r,i).next(s=>(n.forEach(o=>{s=s.insert(o.key,o)}),s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MD{constructor(e,n,r,i){this.persistence=e,this.ts=n,this.serializer=i,this.ns=new Ye(Ae),this.rs=new ka(s=>iy(s),sy),this.ss=new Map,this.os=e.getRemoteDocumentCache(),this.Qr=e.getTargetCache(),this.$r=e.getBundleCache(),this._s(r)}_s(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new ID(this.os,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.os.setIndexManager(this.indexManager),this.ts.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.ns))}}function UD(t,e,n,r){return new MD(t,e,n,r)}async function OC(t,e){const n=ce(t);return await n.persistence.runTransaction("Handle user change","readonly",r=>{let i;return n.mutationQueue.getAllMutationBatches(r).next(s=>(i=s,n._s(e),n.mutationQueue.getAllMutationBatches(r))).next(s=>{const o=[],a=[];let l=we();for(const c of i){o.push(c.batchId);for(const h of c.mutations)l=l.add(h.key)}for(const c of s){a.push(c.batchId);for(const h of c.mutations)l=l.add(h.key)}return n.localDocuments.getDocuments(r,l).next(c=>({us:c,removedBatchIds:o,addedBatchIds:a}))})})}function VD(t,e){const n=ce(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const i=e.batch.keys(),s=n.os.newChangeBuffer({trackRemovals:!0});return function(a,l,c,h){const f=c.batch,p=f.keys();let _=B.resolve();return p.forEach(w=>{_=_.next(()=>h.getEntry(l,w)).next(I=>{const R=c.docVersions.get(w);De(R!==null),I.version.compareTo(R)<0&&(f.applyToRemoteDocument(I,c),I.isValidDocument()&&(I.setReadTime(c.commitVersion),h.addEntry(I)))})}),_.next(()=>a.mutationQueue.removeMutationBatch(l,f))}(n,r,e,s).next(()=>s.apply(r)).next(()=>n.mutationQueue.performConsistencyCheck(r)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(a){let l=we();for(let c=0;c<a.mutationResults.length;++c)a.mutationResults[c].transformResults.length>0&&(l=l.add(a.batch.mutations[c].key));return l}(e))).next(()=>n.localDocuments.getDocuments(r,i))})}function LC(t){const e=ce(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.Qr.getLastRemoteSnapshotVersion(n))}function $D(t,e){const n=ce(t),r=e.snapshotVersion;let i=n.ns;return n.persistence.runTransaction("Apply remote event","readwrite-primary",s=>{const o=n.os.newChangeBuffer({trackRemovals:!0});i=n.ns;const a=[];e.targetChanges.forEach((h,f)=>{const p=i.get(f);if(!p)return;a.push(n.Qr.removeMatchingKeys(s,h.removedDocuments,f).next(()=>n.Qr.addMatchingKeys(s,h.addedDocuments,f)));let _=p.withSequenceNumber(s.currentSequenceNumber);e.targetMismatches.get(f)!==null?_=_.withResumeToken(Ht.EMPTY_BYTE_STRING,ue.min()).withLastLimboFreeSnapshotVersion(ue.min()):h.resumeToken.approximateByteSize()>0&&(_=_.withResumeToken(h.resumeToken,r)),i=i.insert(f,_),function(I,R,C){return I.resumeToken.approximateByteSize()===0||R.snapshotVersion.toMicroseconds()-I.snapshotVersion.toMicroseconds()>=3e8?!0:C.addedDocuments.size+C.modifiedDocuments.size+C.removedDocuments.size>0}(p,_,h)&&a.push(n.Qr.updateTargetData(s,_))});let l=Qr(),c=we();if(e.documentUpdates.forEach(h=>{e.resolvedLimboDocuments.has(h)&&a.push(n.persistence.referenceDelegate.updateLimboDocument(s,h))}),a.push(FD(s,o,e.documentUpdates).next(h=>{l=h.cs,c=h.ls})),!r.isEqual(ue.min())){const h=n.Qr.getLastRemoteSnapshotVersion(s).next(f=>n.Qr.setTargetsMetadata(s,s.currentSequenceNumber,r));a.push(h)}return B.waitFor(a).next(()=>o.apply(s)).next(()=>n.localDocuments.getLocalViewOfDocuments(s,l,c)).next(()=>l)}).then(s=>(n.ns=i,s))}function FD(t,e,n){let r=we(),i=we();return n.forEach(s=>r=r.add(s)),e.getEntries(t,r).next(s=>{let o=Qr();return n.forEach((a,l)=>{const c=s.get(a);l.isFoundDocument()!==c.isFoundDocument()&&(i=i.add(a)),l.isNoDocument()&&l.version.isEqual(ue.min())?(e.removeEntry(a,l.readTime),o=o.insert(a,l)):!c.isValidDocument()||l.version.compareTo(c.version)>0||l.version.compareTo(c.version)===0&&c.hasPendingWrites?(e.addEntry(l),o=o.insert(a,l)):J("LocalStore","Ignoring outdated watch update for ",a,". Current version:",c.version," Watch version:",l.version)}),{cs:o,ls:i}})}function jD(t,e){const n=ce(t);return n.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function zD(t,e){const n=ce(t);return n.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return n.Qr.getTargetData(r,e).next(s=>s?(i=s,B.resolve(i)):n.Qr.allocateTargetId(r).next(o=>(i=new Si(e,o,"TargetPurposeListen",r.currentSequenceNumber),n.Qr.addTargetData(r,i).next(()=>i))))}).then(r=>{const i=n.ns.get(r.targetId);return(i===null||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(n.ns=n.ns.insert(r.targetId,r),n.rs.set(e,r.targetId)),r})}async function Im(t,e,n){const r=ce(t),i=r.ns.get(e),s=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",s,o=>r.persistence.referenceDelegate.removeTarget(o,i))}catch(o){if(!ku(o))throw o;J("LocalStore",`Failed to update sequence numbers for target ${e}: ${o}`)}r.ns=r.ns.remove(e),r.rs.delete(i.target)}function ww(t,e,n){const r=ce(t);let i=ue.min(),s=we();return r.persistence.runTransaction("Execute query","readwrite",o=>function(l,c,h){const f=ce(l),p=f.rs.get(h);return p!==void 0?B.resolve(f.ns.get(p)):f.Qr.getTargetData(c,h)}(r,o,hr(e)).next(a=>{if(a)return i=a.lastLimboFreeSnapshotVersion,r.Qr.getMatchingKeysForTargetId(o,a.targetId).next(l=>{s=l})}).next(()=>r.ts.getDocumentsMatchingQuery(o,e,n?i:ue.min(),n?s:we())).next(a=>(BD(r,L4(e),a),{documents:a,hs:s})))}function BD(t,e,n){let r=t.ss.get(e)||ue.min();n.forEach((i,s)=>{s.readTime.compareTo(r)>0&&(r=s.readTime)}),t.ss.set(e,r)}class Ew{constructor(){this.activeTargetIds=F4()}As(e){this.activeTargetIds=this.activeTargetIds.add(e)}Rs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}ds(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class HD{constructor(){this.no=new Ew,this.ro={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e){return this.no.As(e),this.ro[e]||"not-current"}updateQueryState(e,n,r){this.ro[e]=n}removeLocalQueryTarget(e){this.no.Rs(e)}isLocalQueryTarget(e){return this.no.activeTargetIds.has(e)}clearQueryState(e){delete this.ro[e]}getAllActiveQueryTargets(){return this.no.activeTargetIds}isActiveQueryTarget(e){return this.no.activeTargetIds.has(e)}start(){return this.no=new Ew,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WD{io(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bw{constructor(){this.so=()=>this.oo(),this._o=()=>this.ao(),this.uo=[],this.co()}io(e){this.uo.push(e)}shutdown(){window.removeEventListener("online",this.so),window.removeEventListener("offline",this._o)}co(){window.addEventListener("online",this.so),window.addEventListener("offline",this._o)}oo(){J("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.uo)e(0)}ao(){J("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.uo)e(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Ic=null;function Qf(){return Ic===null?Ic=function(){return 268435456+Math.round(2147483648*Math.random())}():Ic++,"0x"+Ic.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qD={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GD{constructor(e){this.lo=e.lo,this.ho=e.ho}Po(e){this.Io=e}To(e){this.Eo=e}Ao(e){this.Ro=e}onMessage(e){this.Vo=e}close(){this.ho()}send(e){this.lo(e)}mo(){this.Io()}fo(){this.Eo()}po(e){this.Ro(e)}yo(e){this.Vo(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $t="WebChannelConnection";class KD extends class{constructor(n){this.databaseInfo=n,this.databaseId=n.databaseId;const r=n.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),s=encodeURIComponent(this.databaseId.database);this.wo=r+"://"+n.host,this.So=`projects/${i}/databases/${s}`,this.bo=this.databaseId.database==="(default)"?`project_id=${i}`:`project_id=${i}&database_id=${s}`}get Do(){return!1}Co(n,r,i,s,o){const a=Qf(),l=this.vo(n,r.toUriEncodedString());J("RestConnection",`Sending RPC '${n}' ${a}:`,l,i);const c={"google-cloud-resource-prefix":this.So,"x-goog-request-params":this.bo};return this.Fo(c,s,o),this.Mo(n,l,c,i).then(h=>(J("RestConnection",`Received RPC '${n}' ${a}: `,h),h),h=>{throw aa("RestConnection",`RPC '${n}' ${a} failed with error: `,h,"url: ",l,"request:",i),h})}xo(n,r,i,s,o,a){return this.Co(n,r,i,s,o)}Fo(n,r,i){n["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+Aa}(),n["Content-Type"]="text/plain",this.databaseInfo.appId&&(n["X-Firebase-GMPID"]=this.databaseInfo.appId),r&&r.headers.forEach((s,o)=>n[o]=s),i&&i.headers.forEach((s,o)=>n[o]=s)}vo(n,r){const i=qD[n];return`${this.wo}/v1/${r}:${i}`}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Mo(e,n,r,i){const s=Qf();return new Promise((o,a)=>{const l=new HT;l.setWithCredentials(!0),l.listenOnce(qT.COMPLETE,()=>{try{switch(l.getLastErrorCode()){case Kc.NO_ERROR:const h=l.getResponseJson();J($t,`XHR for RPC '${e}' ${s} received:`,JSON.stringify(h)),o(h);break;case Kc.TIMEOUT:J($t,`RPC '${e}' ${s} timed out`),a(new Y(j.DEADLINE_EXCEEDED,"Request time out"));break;case Kc.HTTP_ERROR:const f=l.getStatus();if(J($t,`RPC '${e}' ${s} failed with status:`,f,"response text:",l.getResponseText()),f>0){let p=l.getResponseJson();Array.isArray(p)&&(p=p[0]);const _=p==null?void 0:p.error;if(_&&_.status&&_.message){const w=function(R){const C=R.toLowerCase().replace(/_/g,"-");return Object.values(j).indexOf(C)>=0?C:j.UNKNOWN}(_.status);a(new Y(w,_.message))}else a(new Y(j.UNKNOWN,"Server responded with status "+l.getStatus()))}else a(new Y(j.UNAVAILABLE,"Connection failed."));break;default:le()}}finally{J($t,`RPC '${e}' ${s} completed.`)}});const c=JSON.stringify(i);J($t,`RPC '${e}' ${s} sending request:`,i),l.send(n,"POST",c,r,15)})}Oo(e,n,r){const i=Qf(),s=[this.wo,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=QT(),a=KT(),l={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},c=this.longPollingOptions.timeoutSeconds;c!==void 0&&(l.longPollingTimeout=Math.round(1e3*c)),this.useFetchStreams&&(l.xmlHttpFactory=new WT({})),this.Fo(l.initMessageHeaders,n,r),l.encodeInitMessageHeaders=!0;const h=s.join("");J($t,`Creating RPC '${e}' stream ${i}: ${h}`,l);const f=o.createWebChannel(h,l);let p=!1,_=!1;const w=new GD({lo:R=>{_?J($t,`Not sending because RPC '${e}' stream ${i} is closed:`,R):(p||(J($t,`Opening RPC '${e}' stream ${i} transport.`),f.open(),p=!0),J($t,`RPC '${e}' stream ${i} sending:`,R),f.send(R))},ho:()=>f.close()}),I=(R,C,E)=>{R.listen(C,S=>{try{E(S)}catch(D){setTimeout(()=>{throw D},0)}})};return I(f,_l.EventType.OPEN,()=>{_||(J($t,`RPC '${e}' stream ${i} transport opened.`),w.mo())}),I(f,_l.EventType.CLOSE,()=>{_||(_=!0,J($t,`RPC '${e}' stream ${i} transport closed`),w.po())}),I(f,_l.EventType.ERROR,R=>{_||(_=!0,aa($t,`RPC '${e}' stream ${i} transport errored:`,R),w.po(new Y(j.UNAVAILABLE,"The operation could not be completed")))}),I(f,_l.EventType.MESSAGE,R=>{var C;if(!_){const E=R.data[0];De(!!E);const S=E,D=S.error||((C=S[0])===null||C===void 0?void 0:C.error);if(D){J($t,`RPC '${e}' stream ${i} received error:`,D);const F=D.status;let z=function(T){const A=ot[T];if(A!==void 0)return TC(A)}(F),g=D.message;z===void 0&&(z=j.INTERNAL,g="Unknown error status: "+F+" with message "+D.message),_=!0,w.po(new Y(z,g)),f.close()}else J($t,`RPC '${e}' stream ${i} received:`,E),w.yo(E)}}),I(a,GT.STAT_EVENT,R=>{R.stat===pm.PROXY?J($t,`RPC '${e}' stream ${i} detected buffering proxy`):R.stat===pm.NOPROXY&&J($t,`RPC '${e}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{w.fo()},0),w}}function Xf(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Td(t){return new sD(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DC{constructor(e,n,r=1e3,i=1.5,s=6e4){this.oi=e,this.timerId=n,this.No=r,this.Lo=i,this.Bo=s,this.ko=0,this.qo=null,this.Qo=Date.now(),this.reset()}reset(){this.ko=0}Ko(){this.ko=this.Bo}$o(e){this.cancel();const n=Math.floor(this.ko+this.Uo()),r=Math.max(0,Date.now()-this.Qo),i=Math.max(0,n-r);i>0&&J("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.ko} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.qo=this.oi.enqueueAfterDelay(this.timerId,i,()=>(this.Qo=Date.now(),e())),this.ko*=this.Lo,this.ko<this.No&&(this.ko=this.No),this.ko>this.Bo&&(this.ko=this.Bo)}Wo(){this.qo!==null&&(this.qo.skipDelay(),this.qo=null)}cancel(){this.qo!==null&&(this.qo.cancel(),this.qo=null)}Uo(){return(Math.random()-.5)*this.ko}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MC{constructor(e,n,r,i,s,o,a,l){this.oi=e,this.Go=r,this.zo=i,this.connection=s,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=a,this.listener=l,this.state=0,this.jo=0,this.Ho=null,this.Jo=null,this.stream=null,this.Yo=new DC(e,n)}Zo(){return this.state===1||this.state===5||this.Xo()}Xo(){return this.state===2||this.state===3}start(){this.state!==4?this.auth():this.e_()}async stop(){this.Zo()&&await this.close(0)}t_(){this.state=0,this.Yo.reset()}n_(){this.Xo()&&this.Ho===null&&(this.Ho=this.oi.enqueueAfterDelay(this.Go,6e4,()=>this.r_()))}i_(e){this.s_(),this.stream.send(e)}async r_(){if(this.Xo())return this.close(0)}s_(){this.Ho&&(this.Ho.cancel(),this.Ho=null)}o_(){this.Jo&&(this.Jo.cancel(),this.Jo=null)}async close(e,n){this.s_(),this.o_(),this.Yo.cancel(),this.jo++,e!==4?this.Yo.reset():n&&n.code===j.RESOURCE_EXHAUSTED?(Kr(n.toString()),Kr("Using maximum backoff delay to prevent overloading the backend."),this.Yo.Ko()):n&&n.code===j.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.__(),this.stream.close(),this.stream=null),this.state=e,await this.listener.Ao(n)}__(){}auth(){this.state=1;const e=this.a_(this.jo),n=this.jo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.jo===n&&this.u_(r,i)},r=>{e(()=>{const i=new Y(j.UNKNOWN,"Fetching auth token failed: "+r.message);return this.c_(i)})})}u_(e,n){const r=this.a_(this.jo);this.stream=this.l_(e,n),this.stream.Po(()=>{r(()=>this.listener.Po())}),this.stream.To(()=>{r(()=>(this.state=2,this.Jo=this.oi.enqueueAfterDelay(this.zo,1e4,()=>(this.Xo()&&(this.state=3),Promise.resolve())),this.listener.To()))}),this.stream.Ao(i=>{r(()=>this.c_(i))}),this.stream.onMessage(i=>{r(()=>this.onMessage(i))})}e_(){this.state=5,this.Yo.$o(async()=>{this.state=0,this.start()})}c_(e){return J("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}a_(e){return n=>{this.oi.enqueueAndForget(()=>this.jo===e?n():(J("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class QD extends MC{constructor(e,n,r,i,s,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,i,o),this.serializer=s}l_(e,n){return this.connection.Oo("Listen",e,n)}onMessage(e){this.Yo.reset();const n=lD(this.serializer,e),r=function(s){if(!("targetChange"in s))return ue.min();const o=s.targetChange;return o.targetIds&&o.targetIds.length?ue.min():o.readTime?fr(o.readTime):ue.min()}(e);return this.listener.h_(n,r)}P_(e){const n={};n.database=Cm(this.serializer),n.addTarget=function(s,o){let a;const l=o.target;if(a=vm(l)?{documents:hD(s,l)}:{query:dD(s,l)._t},a.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){a.resumeToken=SC(s,o.resumeToken);const c=Em(s,o.expectedCount);c!==null&&(a.expectedCount=c)}else if(o.snapshotVersion.compareTo(ue.min())>0){a.readTime=$h(s,o.snapshotVersion.toTimestamp());const c=Em(s,o.expectedCount);c!==null&&(a.expectedCount=c)}return a}(this.serializer,e);const r=pD(this.serializer,e);r&&(n.labels=r),this.i_(n)}I_(e){const n={};n.database=Cm(this.serializer),n.removeTarget=e,this.i_(n)}}class XD extends MC{constructor(e,n,r,i,s,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,i,o),this.serializer=s,this.T_=!1}get E_(){return this.T_}start(){this.T_=!1,this.lastStreamToken=void 0,super.start()}__(){this.T_&&this.d_([])}l_(e,n){return this.connection.Oo("Write",e,n)}onMessage(e){if(De(!!e.streamToken),this.lastStreamToken=e.streamToken,this.T_){this.Yo.reset();const n=cD(e.writeResults,e.commitTime),r=fr(e.commitTime);return this.listener.A_(r,n)}return De(!e.writeResults||e.writeResults.length===0),this.T_=!0,this.listener.R_()}V_(){const e={};e.database=Cm(this.serializer),this.i_(e)}d_(e){const n={streamToken:this.lastStreamToken,writes:e.map(r=>uD(this.serializer,r))};this.i_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YD extends class{}{constructor(e,n,r,i){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=i,this.m_=!1}f_(){if(this.m_)throw new Y(j.FAILED_PRECONDITION,"The client has already been terminated.")}Co(e,n,r,i){return this.f_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,o])=>this.connection.Co(e,bm(n,r),i,s,o)).catch(s=>{throw s.name==="FirebaseError"?(s.code===j.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new Y(j.UNKNOWN,s.toString())})}xo(e,n,r,i,s){return this.f_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,a])=>this.connection.xo(e,bm(n,r),i,o,a,s)).catch(o=>{throw o.name==="FirebaseError"?(o.code===j.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new Y(j.UNKNOWN,o.toString())})}terminate(){this.m_=!0,this.connection.terminate()}}class JD{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.g_=0,this.p_=null,this.y_=!0}w_(){this.g_===0&&(this.S_("Unknown"),this.p_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.p_=null,this.b_("Backend didn't respond within 10 seconds."),this.S_("Offline"),Promise.resolve())))}D_(e){this.state==="Online"?this.S_("Unknown"):(this.g_++,this.g_>=1&&(this.C_(),this.b_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.S_("Offline")))}set(e){this.C_(),this.g_=0,e==="Online"&&(this.y_=!1),this.S_(e)}S_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}b_(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.y_?(Kr(n),this.y_=!1):J("OnlineStateTracker",n)}C_(){this.p_!==null&&(this.p_.cancel(),this.p_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZD{constructor(e,n,r,i,s){this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.v_=[],this.F_=new Map,this.M_=new Set,this.x_=[],this.O_=s,this.O_.io(o=>{r.enqueueAndForget(async()=>{Zs(this)&&(J("RemoteStore","Restarting streams for network reachability change."),await async function(l){const c=ce(l);c.M_.add(4),await Nu(c),c.N_.set("Unknown"),c.M_.delete(4),await Cd(c)}(this))})}),this.N_=new JD(r,i)}}async function Cd(t){if(Zs(t))for(const e of t.x_)await e(!0)}async function Nu(t){for(const e of t.x_)await e(!1)}function UC(t,e){const n=ce(t);n.F_.has(e.targetId)||(n.F_.set(e.targetId,e),my(n)?py(n):Pa(n).Xo()&&fy(n,e))}function dy(t,e){const n=ce(t),r=Pa(n);n.F_.delete(e),r.Xo()&&VC(n,e),n.F_.size===0&&(r.Xo()?r.n_():Zs(n)&&n.N_.set("Unknown"))}function fy(t,e){if(t.L_.xe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(ue.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}Pa(t).P_(e)}function VC(t,e){t.L_.xe(e),Pa(t).I_(e)}function py(t){t.L_=new tD({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),ot:e=>t.F_.get(e)||null,tt:()=>t.datastore.serializer.databaseId}),Pa(t).start(),t.N_.w_()}function my(t){return Zs(t)&&!Pa(t).Zo()&&t.F_.size>0}function Zs(t){return ce(t).M_.size===0}function $C(t){t.L_=void 0}async function eM(t){t.N_.set("Online")}async function tM(t){t.F_.forEach((e,n)=>{fy(t,e)})}async function nM(t,e){$C(t),my(t)?(t.N_.D_(e),py(t)):t.N_.set("Unknown")}async function rM(t,e,n){if(t.N_.set("Online"),e instanceof IC&&e.state===2&&e.cause)try{await async function(i,s){const o=s.cause;for(const a of s.targetIds)i.F_.has(a)&&(await i.remoteSyncer.rejectListen(a,o),i.F_.delete(a),i.L_.removeTarget(a))}(t,e)}catch(r){J("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),await Fh(t,r)}else if(e instanceof Yc?t.L_.Ke(e):e instanceof CC?t.L_.He(e):t.L_.We(e),!n.isEqual(ue.min()))try{const r=await LC(t.localStore);n.compareTo(r)>=0&&await function(s,o){const a=s.L_.rt(o);return a.targetChanges.forEach((l,c)=>{if(l.resumeToken.approximateByteSize()>0){const h=s.F_.get(c);h&&s.F_.set(c,h.withResumeToken(l.resumeToken,o))}}),a.targetMismatches.forEach((l,c)=>{const h=s.F_.get(l);if(!h)return;s.F_.set(l,h.withResumeToken(Ht.EMPTY_BYTE_STRING,h.snapshotVersion)),VC(s,l);const f=new Si(h.target,l,c,h.sequenceNumber);fy(s,f)}),s.remoteSyncer.applyRemoteEvent(a)}(t,n)}catch(r){J("RemoteStore","Failed to raise snapshot:",r),await Fh(t,r)}}async function Fh(t,e,n){if(!ku(e))throw e;t.M_.add(1),await Nu(t),t.N_.set("Offline"),n||(n=()=>LC(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{J("RemoteStore","Retrying IndexedDB access"),await n(),t.M_.delete(1),await Cd(t)})}function FC(t,e){return e().catch(n=>Fh(t,n,e))}async function Id(t){const e=ce(t),n=Qi(e);let r=e.v_.length>0?e.v_[e.v_.length-1].batchId:-1;for(;iM(e);)try{const i=await jD(e.localStore,r);if(i===null){e.v_.length===0&&n.n_();break}r=i.batchId,sM(e,i)}catch(i){await Fh(e,i)}jC(e)&&zC(e)}function iM(t){return Zs(t)&&t.v_.length<10}function sM(t,e){t.v_.push(e);const n=Qi(t);n.Xo()&&n.E_&&n.d_(e.mutations)}function jC(t){return Zs(t)&&!Qi(t).Zo()&&t.v_.length>0}function zC(t){Qi(t).start()}async function oM(t){Qi(t).V_()}async function aM(t){const e=Qi(t);for(const n of t.v_)e.d_(n.mutations)}async function lM(t,e,n){const r=t.v_.shift(),i=oy.from(r,e,n);await FC(t,()=>t.remoteSyncer.applySuccessfulWrite(i)),await Id(t)}async function uM(t,e){e&&Qi(t).E_&&await async function(r,i){if(function(o){return J4(o)&&o!==j.ABORTED}(i.code)){const s=r.v_.shift();Qi(r).t_(),await FC(r,()=>r.remoteSyncer.rejectFailedWrite(s.batchId,i)),await Id(r)}}(t,e),jC(t)&&zC(t)}async function Tw(t,e){const n=ce(t);n.asyncQueue.verifyOperationInProgress(),J("RemoteStore","RemoteStore received new credentials");const r=Zs(n);n.M_.add(3),await Nu(n),r&&n.N_.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.M_.delete(3),await Cd(n)}async function cM(t,e){const n=ce(t);e?(n.M_.delete(2),await Cd(n)):e||(n.M_.add(2),await Nu(n),n.N_.set("Unknown"))}function Pa(t){return t.B_||(t.B_=function(n,r,i){const s=ce(n);return s.f_(),new QD(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(t.datastore,t.asyncQueue,{Po:eM.bind(null,t),To:tM.bind(null,t),Ao:nM.bind(null,t),h_:rM.bind(null,t)}),t.x_.push(async e=>{e?(t.B_.t_(),my(t)?py(t):t.N_.set("Unknown")):(await t.B_.stop(),$C(t))})),t.B_}function Qi(t){return t.k_||(t.k_=function(n,r,i){const s=ce(n);return s.f_(),new XD(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(t.datastore,t.asyncQueue,{Po:()=>Promise.resolve(),To:oM.bind(null,t),Ao:uM.bind(null,t),R_:aM.bind(null,t),A_:lM.bind(null,t)}),t.x_.push(async e=>{e?(t.k_.t_(),await Id(t)):(await t.k_.stop(),t.v_.length>0&&(J("RemoteStore",`Stopping write stream with ${t.v_.length} pending writes`),t.v_=[]))})),t.k_}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gy{constructor(e,n,r,i,s){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=i,this.removalCallback=s,this.deferred=new $i,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,r,i,s){const o=Date.now()+r,a=new gy(e,n,o,i,s);return a.start(r),a}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new Y(j.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function yy(t,e){if(Kr("AsyncQueue",`${e}: ${t}`),ku(t))return new Y(j.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qo{constructor(e){this.comparator=e?(n,r)=>e(n,r)||ne.comparator(n.key,r.key):(n,r)=>ne.comparator(n.key,r.key),this.keyedMap=wl(),this.sortedSet=new Ye(this.comparator)}static emptySet(e){return new Qo(e.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,r)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof Qo)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){const i=n.getNext().key,s=r.getNext().key;if(!i.isEqual(s))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const r=new Qo;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cw{constructor(){this.q_=new Ye(ne.comparator)}track(e){const n=e.doc.key,r=this.q_.get(n);r?e.type!==0&&r.type===3?this.q_=this.q_.insert(n,e):e.type===3&&r.type!==1?this.q_=this.q_.insert(n,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.q_=this.q_.insert(n,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.q_=this.q_.insert(n,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.q_=this.q_.remove(n):e.type===1&&r.type===2?this.q_=this.q_.insert(n,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.q_=this.q_.insert(n,{type:2,doc:e.doc}):le():this.q_=this.q_.insert(n,e)}Q_(){const e=[];return this.q_.inorderTraversal((n,r)=>{e.push(r)}),e}}class da{constructor(e,n,r,i,s,o,a,l,c){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=s,this.fromCache=o,this.syncStateChanged=a,this.excludesMetadataChanges=l,this.hasCachedResults=c}static fromInitialDocuments(e,n,r,i,s){const o=[];return n.forEach(a=>{o.push({type:0,doc:a})}),new da(e,n,Qo.emptySet(n),o,r,i,!0,!1,s)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&vd(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let i=0;i<n.length;i++)if(n[i].type!==r[i].type||!n[i].doc.isEqual(r[i].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hM{constructor(){this.K_=void 0,this.U_=[]}W_(){return this.U_.some(e=>e.G_())}}class dM{constructor(){this.queries=new ka(e=>uC(e),vd),this.onlineState="Unknown",this.z_=new Set}}async function fM(t,e){const n=ce(t);let r=3;const i=e.query;let s=n.queries.get(i);s?!s.W_()&&e.G_()&&(r=2):(s=new hM,r=e.G_()?0:1);try{switch(r){case 0:s.K_=await n.onListen(i,!0);break;case 1:s.K_=await n.onListen(i,!1);break;case 2:await n.onFirstRemoteStoreListen(i)}}catch(o){const a=yy(o,`Initialization of query '${Eo(e.query)}' failed`);return void e.onError(a)}n.queries.set(i,s),s.U_.push(e),e.j_(n.onlineState),s.K_&&e.H_(s.K_)&&vy(n)}async function pM(t,e){const n=ce(t),r=e.query;let i=3;const s=n.queries.get(r);if(s){const o=s.U_.indexOf(e);o>=0&&(s.U_.splice(o,1),s.U_.length===0?i=e.G_()?0:1:!s.W_()&&e.G_()&&(i=2))}switch(i){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function mM(t,e){const n=ce(t);let r=!1;for(const i of e){const s=i.query,o=n.queries.get(s);if(o){for(const a of o.U_)a.H_(i)&&(r=!0);o.K_=i}}r&&vy(n)}function gM(t,e,n){const r=ce(t),i=r.queries.get(e);if(i)for(const s of i.U_)s.onError(n);r.queries.delete(e)}function vy(t){t.z_.forEach(e=>{e.next()})}var Sm,Iw;(Iw=Sm||(Sm={})).J_="default",Iw.Cache="cache";class yM{constructor(e,n,r){this.query=e,this.Y_=n,this.Z_=!1,this.X_=null,this.onlineState="Unknown",this.options=r||{}}H_(e){if(!this.options.includeMetadataChanges){const r=[];for(const i of e.docChanges)i.type!==3&&r.push(i);e=new da(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.Z_?this.ea(e)&&(this.Y_.next(e),n=!0):this.ta(e,this.onlineState)&&(this.na(e),n=!0),this.X_=e,n}onError(e){this.Y_.error(e)}j_(e){this.onlineState=e;let n=!1;return this.X_&&!this.Z_&&this.ta(this.X_,e)&&(this.na(this.X_),n=!0),n}ta(e,n){if(!e.fromCache||!this.G_())return!0;const r=n!=="Offline";return(!this.options.ra||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}ea(e){if(e.docChanges.length>0)return!0;const n=this.X_&&this.X_.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}na(e){e=da.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Z_=!0,this.Y_.next(e)}G_(){return this.options.source!==Sm.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BC{constructor(e){this.key=e}}class HC{constructor(e){this.key=e}}class vM{constructor(e,n){this.query=e,this.la=n,this.ha=null,this.hasCachedResults=!1,this.current=!1,this.Pa=we(),this.mutatedKeys=we(),this.Ia=cC(e),this.Ta=new Qo(this.Ia)}get Ea(){return this.la}da(e,n){const r=n?n.Aa:new Cw,i=n?n.Ta:this.Ta;let s=n?n.mutatedKeys:this.mutatedKeys,o=i,a=!1;const l=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,c=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((h,f)=>{const p=i.get(h),_=_d(this.query,f)?f:null,w=!!p&&this.mutatedKeys.has(p.key),I=!!_&&(_.hasLocalMutations||this.mutatedKeys.has(_.key)&&_.hasCommittedMutations);let R=!1;p&&_?p.data.isEqual(_.data)?w!==I&&(r.track({type:3,doc:_}),R=!0):this.Ra(p,_)||(r.track({type:2,doc:_}),R=!0,(l&&this.Ia(_,l)>0||c&&this.Ia(_,c)<0)&&(a=!0)):!p&&_?(r.track({type:0,doc:_}),R=!0):p&&!_&&(r.track({type:1,doc:p}),R=!0,(l||c)&&(a=!0)),R&&(_?(o=o.add(_),s=I?s.add(h):s.delete(h)):(o=o.delete(h),s=s.delete(h)))}),this.query.limit!==null)for(;o.size>this.query.limit;){const h=this.query.limitType==="F"?o.last():o.first();o=o.delete(h.key),s=s.delete(h.key),r.track({type:1,doc:h})}return{Ta:o,Aa:r,Xi:a,mutatedKeys:s}}Ra(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r,i){const s=this.Ta;this.Ta=e.Ta,this.mutatedKeys=e.mutatedKeys;const o=e.Aa.Q_();o.sort((h,f)=>function(_,w){const I=R=>{switch(R){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return le()}};return I(_)-I(w)}(h.type,f.type)||this.Ia(h.doc,f.doc)),this.Va(r),i=i!=null&&i;const a=n&&!i?this.ma():[],l=this.Pa.size===0&&this.current&&!i?1:0,c=l!==this.ha;return this.ha=l,o.length!==0||c?{snapshot:new da(this.query,e.Ta,s,o,e.mutatedKeys,l===0,c,!1,!!r&&r.resumeToken.approximateByteSize()>0),fa:a}:{fa:a}}j_(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({Ta:this.Ta,Aa:new Cw,mutatedKeys:this.mutatedKeys,Xi:!1},!1)):{fa:[]}}ga(e){return!this.la.has(e)&&!!this.Ta.has(e)&&!this.Ta.get(e).hasLocalMutations}Va(e){e&&(e.addedDocuments.forEach(n=>this.la=this.la.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.la=this.la.delete(n)),this.current=e.current)}ma(){if(!this.current)return[];const e=this.Pa;this.Pa=we(),this.Ta.forEach(r=>{this.ga(r.key)&&(this.Pa=this.Pa.add(r.key))});const n=[];return e.forEach(r=>{this.Pa.has(r)||n.push(new HC(r))}),this.Pa.forEach(r=>{e.has(r)||n.push(new BC(r))}),n}pa(e){this.la=e.hs,this.Pa=we();const n=this.da(e.documents);return this.applyChanges(n,!0)}ya(){return da.fromInitialDocuments(this.query,this.Ta,this.mutatedKeys,this.ha===0,this.hasCachedResults)}}class _M{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}}class wM{constructor(e){this.key=e,this.wa=!1}}class EM{constructor(e,n,r,i,s,o){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=i,this.currentUser=s,this.maxConcurrentLimboResolutions=o,this.Sa={},this.ba=new ka(a=>uC(a),vd),this.Da=new Map,this.Ca=new Set,this.va=new Ye(ne.comparator),this.Fa=new Map,this.Ma=new uy,this.xa={},this.Oa=new Map,this.Na=ha.Ln(),this.onlineState="Unknown",this.La=void 0}get isPrimaryClient(){return this.La===!0}}async function bM(t,e,n=!0){const r=XC(t);let i;const s=r.ba.get(e);return s?(r.sharedClientState.addLocalQueryTarget(s.targetId),i=s.view.ya()):i=await WC(r,e,n,!0),i}async function TM(t,e){const n=XC(t);await WC(n,e,!0,!1)}async function WC(t,e,n,r){const i=await zD(t.localStore,hr(e)),s=i.targetId,o=n?t.sharedClientState.addLocalQueryTarget(s):"not-current";let a;return r&&(a=await CM(t,e,s,o==="current",i.resumeToken)),t.isPrimaryClient&&n&&UC(t.remoteStore,i),a}async function CM(t,e,n,r,i){t.Ba=(f,p,_)=>async function(I,R,C,E){let S=R.view.da(C);S.Xi&&(S=await ww(I.localStore,R.query,!1).then(({documents:g})=>R.view.da(g,S)));const D=E&&E.targetChanges.get(R.targetId),F=E&&E.targetMismatches.get(R.targetId)!=null,z=R.view.applyChanges(S,I.isPrimaryClient,D,F);return Aw(I,R.targetId,z.fa),z.snapshot}(t,f,p,_);const s=await ww(t.localStore,e,!0),o=new vM(e,s.hs),a=o.da(s.documents),l=Ru.createSynthesizedTargetChangeForCurrentChange(n,r&&t.onlineState!=="Offline",i),c=o.applyChanges(a,t.isPrimaryClient,l);Aw(t,n,c.fa);const h=new _M(e,n,o);return t.ba.set(e,h),t.Da.has(n)?t.Da.get(n).push(e):t.Da.set(n,[e]),c.snapshot}async function IM(t,e,n){const r=ce(t),i=r.ba.get(e),s=r.Da.get(i.targetId);if(s.length>1)return r.Da.set(i.targetId,s.filter(o=>!vd(o,e))),void r.ba.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||await Im(r.localStore,i.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(i.targetId),n&&dy(r.remoteStore,i.targetId),Am(r,i.targetId)}).catch(xu)):(Am(r,i.targetId),await Im(r.localStore,i.targetId,!0))}async function SM(t,e){const n=ce(t),r=n.ba.get(e),i=n.Da.get(r.targetId);n.isPrimaryClient&&i.length===1&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),dy(n.remoteStore,r.targetId))}async function AM(t,e,n){const r=LM(t);try{const i=await function(o,a){const l=ce(o),c=mt.now(),h=a.reduce((_,w)=>_.add(w.key),we());let f,p;return l.persistence.runTransaction("Locally write mutations","readwrite",_=>{let w=Qr(),I=we();return l.os.getEntries(_,h).next(R=>{w=R,w.forEach((C,E)=>{E.isValidDocument()||(I=I.add(C))})}).next(()=>l.localDocuments.getOverlayedDocuments(_,w)).next(R=>{f=R;const C=[];for(const E of a){const S=G4(E,f.get(E.key).overlayedDocument);S!=null&&C.push(new os(E.key,S,eC(S.value.mapValue),dr.exists(!0)))}return l.mutationQueue.addMutationBatch(_,c,C,a)}).next(R=>{p=R;const C=R.applyToLocalDocumentSet(f,I);return l.documentOverlayCache.saveOverlays(_,R.batchId,C)})}).then(()=>({batchId:p.batchId,changes:dC(f)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),function(o,a,l){let c=o.xa[o.currentUser.toKey()];c||(c=new Ye(Ae)),c=c.insert(a,l),o.xa[o.currentUser.toKey()]=c}(r,i.batchId,n),await Ou(r,i.changes),await Id(r.remoteStore)}catch(i){const s=yy(i,"Failed to persist write");n.reject(s)}}async function qC(t,e){const n=ce(t);try{const r=await $D(n.localStore,e);e.targetChanges.forEach((i,s)=>{const o=n.Fa.get(s);o&&(De(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1),i.addedDocuments.size>0?o.wa=!0:i.modifiedDocuments.size>0?De(o.wa):i.removedDocuments.size>0&&(De(o.wa),o.wa=!1))}),await Ou(n,r,e)}catch(r){await xu(r)}}function Sw(t,e,n){const r=ce(t);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){const i=[];r.ba.forEach((s,o)=>{const a=o.view.j_(e);a.snapshot&&i.push(a.snapshot)}),function(o,a){const l=ce(o);l.onlineState=a;let c=!1;l.queries.forEach((h,f)=>{for(const p of f.U_)p.j_(a)&&(c=!0)}),c&&vy(l)}(r.eventManager,e),i.length&&r.Sa.h_(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function xM(t,e,n){const r=ce(t);r.sharedClientState.updateQueryState(e,"rejected",n);const i=r.Fa.get(e),s=i&&i.key;if(s){let o=new Ye(ne.comparator);o=o.insert(s,zt.newNoDocument(s,ue.min()));const a=we().add(s),l=new bd(ue.min(),new Map,new Ye(Ae),o,a);await qC(r,l),r.va=r.va.remove(s),r.Fa.delete(e),_y(r)}else await Im(r.localStore,e,!1).then(()=>Am(r,e,n)).catch(xu)}async function kM(t,e){const n=ce(t),r=e.batch.batchId;try{const i=await VD(n.localStore,e);KC(n,r,null),GC(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await Ou(n,i)}catch(i){await xu(i)}}async function PM(t,e,n){const r=ce(t);try{const i=await function(o,a){const l=ce(o);return l.persistence.runTransaction("Reject batch","readwrite-primary",c=>{let h;return l.mutationQueue.lookupMutationBatch(c,a).next(f=>(De(f!==null),h=f.keys(),l.mutationQueue.removeMutationBatch(c,f))).next(()=>l.mutationQueue.performConsistencyCheck(c)).next(()=>l.documentOverlayCache.removeOverlaysForBatchId(c,h,a)).next(()=>l.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(c,h)).next(()=>l.localDocuments.getDocuments(c,h))})}(r.localStore,e);KC(r,e,n),GC(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),await Ou(r,i)}catch(i){await xu(i)}}function GC(t,e){(t.Oa.get(e)||[]).forEach(n=>{n.resolve()}),t.Oa.delete(e)}function KC(t,e,n){const r=ce(t);let i=r.xa[r.currentUser.toKey()];if(i){const s=i.get(e);s&&(n?s.reject(n):s.resolve(),i=i.remove(e)),r.xa[r.currentUser.toKey()]=i}}function Am(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const r of t.Da.get(e))t.ba.delete(r),n&&t.Sa.ka(r,n);t.Da.delete(e),t.isPrimaryClient&&t.Ma.Vr(e).forEach(r=>{t.Ma.containsKey(r)||QC(t,r)})}function QC(t,e){t.Ca.delete(e.path.canonicalString());const n=t.va.get(e);n!==null&&(dy(t.remoteStore,n),t.va=t.va.remove(e),t.Fa.delete(n),_y(t))}function Aw(t,e,n){for(const r of n)r instanceof BC?(t.Ma.addReference(r.key,e),RM(t,r)):r instanceof HC?(J("SyncEngine","Document no longer in limbo: "+r.key),t.Ma.removeReference(r.key,e),t.Ma.containsKey(r.key)||QC(t,r.key)):le()}function RM(t,e){const n=e.key,r=n.path.canonicalString();t.va.get(n)||t.Ca.has(r)||(J("SyncEngine","New document in limbo: "+n),t.Ca.add(r),_y(t))}function _y(t){for(;t.Ca.size>0&&t.va.size<t.maxConcurrentLimboResolutions;){const e=t.Ca.values().next().value;t.Ca.delete(e);const n=new ne(Fe.fromString(e)),r=t.Na.next();t.Fa.set(r,new wM(n)),t.va=t.va.insert(n,r),UC(t.remoteStore,new Si(hr(aC(n.path)),r,"TargetPurposeLimboResolution",ey.oe))}}async function Ou(t,e,n){const r=ce(t),i=[],s=[],o=[];r.ba.isEmpty()||(r.ba.forEach((a,l)=>{o.push(r.Ba(l,e,n).then(c=>{if((c||n)&&r.isPrimaryClient){const h=c&&!c.fromCache;r.sharedClientState.updateQueryState(l.targetId,h?"current":"not-current")}if(c){i.push(c);const h=hy.Ki(l.targetId,c);s.push(h)}}))}),await Promise.all(o),r.Sa.h_(i),await async function(l,c){const h=ce(l);try{await h.persistence.runTransaction("notifyLocalViewChanges","readwrite",f=>B.forEach(c,p=>B.forEach(p.qi,_=>h.persistence.referenceDelegate.addReference(f,p.targetId,_)).next(()=>B.forEach(p.Qi,_=>h.persistence.referenceDelegate.removeReference(f,p.targetId,_)))))}catch(f){if(!ku(f))throw f;J("LocalStore","Failed to update sequence numbers: "+f)}for(const f of c){const p=f.targetId;if(!f.fromCache){const _=h.ns.get(p),w=_.snapshotVersion,I=_.withLastLimboFreeSnapshotVersion(w);h.ns=h.ns.insert(p,I)}}}(r.localStore,s))}async function NM(t,e){const n=ce(t);if(!n.currentUser.isEqual(e)){J("SyncEngine","User change. New user:",e.toKey());const r=await OC(n.localStore,e);n.currentUser=e,function(s,o){s.Oa.forEach(a=>{a.forEach(l=>{l.reject(new Y(j.CANCELLED,o))})}),s.Oa.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await Ou(n,r.us)}}function OM(t,e){const n=ce(t),r=n.Fa.get(e);if(r&&r.wa)return we().add(r.key);{let i=we();const s=n.Da.get(e);if(!s)return i;for(const o of s){const a=n.ba.get(o);i=i.unionWith(a.view.Ea)}return i}}function XC(t){const e=ce(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=qC.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=OM.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=xM.bind(null,e),e.Sa.h_=mM.bind(null,e.eventManager),e.Sa.ka=gM.bind(null,e.eventManager),e}function LM(t){const e=ce(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=kM.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=PM.bind(null,e),e}class xw{constructor(){this.synchronizeTabs=!1}async initialize(e){this.serializer=Td(e.databaseInfo.databaseId),this.sharedClientState=this.createSharedClientState(e),this.persistence=this.createPersistence(e),await this.persistence.start(),this.localStore=this.createLocalStore(e),this.gcScheduler=this.createGarbageCollectionScheduler(e,this.localStore),this.indexBackfillerScheduler=this.createIndexBackfillerScheduler(e,this.localStore)}createGarbageCollectionScheduler(e,n){return null}createIndexBackfillerScheduler(e,n){return null}createLocalStore(e){return UD(this.persistence,new DD,e.initialUser,this.serializer)}createPersistence(e){return new ND(cy.Hr,this.serializer)}createSharedClientState(e){return new HD}async terminate(){var e,n;(e=this.gcScheduler)===null||e===void 0||e.stop(),(n=this.indexBackfillerScheduler)===null||n===void 0||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}class DM{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>Sw(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=NM.bind(null,this.syncEngine),await cM(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new dM}()}createDatastore(e){const n=Td(e.databaseInfo.databaseId),r=function(s){return new KD(s)}(e.databaseInfo);return function(s,o,a,l){return new YD(s,o,a,l)}(e.authCredentials,e.appCheckCredentials,r,n)}createRemoteStore(e){return function(r,i,s,o,a){return new ZD(r,i,s,o,a)}(this.localStore,this.datastore,e.asyncQueue,n=>Sw(this.syncEngine,n,0),function(){return bw.D()?new bw:new WD}())}createSyncEngine(e,n){return function(i,s,o,a,l,c,h){const f=new EM(i,s,o,a,l,c);return h&&(f.La=!0),f}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){var e;await async function(r){const i=ce(r);J("RemoteStore","RemoteStore shutting down."),i.M_.add(5),await Nu(i),i.O_.shutdown(),i.N_.set("Unknown")}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MM{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.Ka(this.observer.next,e)}error(e){this.observer.error?this.Ka(this.observer.error,e):Kr("Uncaught Error in snapshot listener:",e.toString())}$a(){this.muted=!0}Ka(e,n){this.muted||setTimeout(()=>{this.muted||e(n)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UM{constructor(e,n,r,i){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=i,this.user=Ft.UNAUTHENTICATED,this.clientId=YT.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(r,async s=>{J("FirestoreClient","Received user=",s.uid),await this.authCredentialListener(s),this.user=s}),this.appCheckCredentials.start(r,s=>(J("FirestoreClient","Received new app check token=",s),this.appCheckCredentialListener(s,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new Y(j.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){this.asyncQueue.enterRestrictedMode();const e=new $i;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const r=yy(n,"Failed to shutdown persistence");e.reject(r)}}),e.promise}}async function Yf(t,e){t.asyncQueue.verifyOperationInProgress(),J("FirestoreClient","Initializing OfflineComponentProvider");const n=t.configuration;await e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener(async i=>{r.isEqual(i)||(await OC(e.localStore,i),r=i)}),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e}async function kw(t,e){t.asyncQueue.verifyOperationInProgress();const n=await $M(t);J("FirestoreClient","Initializing OnlineComponentProvider"),await e.initialize(n,t.configuration),t.setCredentialChangeListener(r=>Tw(e.remoteStore,r)),t.setAppCheckTokenChangeListener((r,i)=>Tw(e.remoteStore,i)),t._onlineComponents=e}function VM(t){return t.name==="FirebaseError"?t.code===j.FAILED_PRECONDITION||t.code===j.UNIMPLEMENTED:!(typeof DOMException<"u"&&t instanceof DOMException)||t.code===22||t.code===20||t.code===11}async function $M(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){J("FirestoreClient","Using user provided OfflineComponentProvider");try{await Yf(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!VM(n))throw n;aa("Error using user provided cache. Falling back to memory cache: "+n),await Yf(t,new xw)}}else J("FirestoreClient","Using default OfflineComponentProvider"),await Yf(t,new xw);return t._offlineComponents}async function YC(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(J("FirestoreClient","Using user provided OnlineComponentProvider"),await kw(t,t._uninitializedComponentsProvider._online)):(J("FirestoreClient","Using default OnlineComponentProvider"),await kw(t,new DM))),t._onlineComponents}function FM(t){return YC(t).then(e=>e.syncEngine)}async function jM(t){const e=await YC(t),n=e.eventManager;return n.onListen=bM.bind(null,e.syncEngine),n.onUnlisten=IM.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=TM.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=SM.bind(null,e.syncEngine),n}function zM(t,e,n={}){const r=new $i;return t.asyncQueue.enqueueAndForget(async()=>function(s,o,a,l,c){const h=new MM({next:p=>{o.enqueueAndForget(()=>pM(s,f)),p.fromCache&&l.source==="server"?c.reject(new Y(j.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):c.resolve(p)},error:p=>c.reject(p)}),f=new yM(a,h,{includeMetadataChanges:!0,ra:!0});return fM(s,f)}(await jM(t),t.asyncQueue,e,n,r)),r.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function JC(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Pw=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ZC(t,e,n){if(!n)throw new Y(j.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function BM(t,e,n,r){if(e===!0&&r===!0)throw new Y(j.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function Rw(t){if(!ne.isDocumentKey(t))throw new Y(j.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function Nw(t){if(ne.isDocumentKey(t))throw new Y(j.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function Sd(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(r){return r.constructor?r.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":le()}function fa(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new Y(j.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=Sd(t);throw new Y(j.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ow{constructor(e){var n,r;if(e.host===void 0){if(e.ssl!==void 0)throw new Y(j.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(n=e.ssl)===null||n===void 0||n;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new Y(j.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}BM("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=JC((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(s){if(s.timeoutSeconds!==void 0){if(isNaN(s.timeoutSeconds))throw new Y(j.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (must not be NaN)`);if(s.timeoutSeconds<5)throw new Y(j.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (minimum allowed value is 5)`);if(s.timeoutSeconds>30)throw new Y(j.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,i){return r.timeoutSeconds===i.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Ad{constructor(e,n,r,i){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Ow({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new Y(j.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!==void 0}_setSettings(e){if(this._settingsFrozen)throw new Y(j.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Ow(e),e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new r4;switch(r.type){case"firstParty":return new a4(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new Y(j.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const r=Pw.get(n);r&&(J("ComponentProvider","Removing Datastore"),Pw.delete(n),r.terminate())}(this),Promise.resolve()}}function HM(t,e,n,r={}){var i;const s=(t=fa(t,Ad))._getSettings(),o=`${e}:${n}`;if(s.host!=="firestore.googleapis.com"&&s.host!==o&&aa("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),t._setSettings(Object.assign(Object.assign({},s),{host:o,ssl:!1})),r.mockUserToken){let a,l;if(typeof r.mockUserToken=="string")a=r.mockUserToken,l=Ft.MOCK_USER;else{a=yR(r.mockUserToken,(i=t._app)===null||i===void 0?void 0:i.options.projectId);const c=r.mockUserToken.sub||r.mockUserToken.user_id;if(!c)throw new Y(j.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");l=new Ft(c)}t._authCredentials=new i4(new XT(a,l))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eo{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new eo(this.firestore,e,this._query)}}class yn{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Fi(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new yn(this.firestore,e,this._key)}}class Fi extends eo{constructor(e,n,r){super(e,n,aC(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new yn(this.firestore,null,new ne(e))}withConverter(e){return new Fi(this.firestore,e,this._path)}}function to(t,e,...n){if(t=gt(t),ZC("collection","path",e),t instanceof Ad){const r=Fe.fromString(e,...n);return Nw(r),new Fi(t,null,r)}{if(!(t instanceof yn||t instanceof Fi))throw new Y(j.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(Fe.fromString(e,...n));return Nw(r),new Fi(t.firestore,null,r)}}function xd(t,e,...n){if(t=gt(t),arguments.length===1&&(e=YT.newId()),ZC("doc","path",e),t instanceof Ad){const r=Fe.fromString(e,...n);return Rw(r),new yn(t,null,new ne(r))}{if(!(t instanceof yn||t instanceof Fi))throw new Y(j.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(Fe.fromString(e,...n));return Rw(r),new yn(t.firestore,t instanceof Fi?t.converter:null,new ne(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WM{constructor(){this.iu=Promise.resolve(),this.su=[],this.ou=!1,this._u=[],this.au=null,this.uu=!1,this.cu=!1,this.lu=[],this.Yo=new DC(this,"async_queue_retry"),this.hu=()=>{const n=Xf();n&&J("AsyncQueue","Visibility state changed to "+n.visibilityState),this.Yo.Wo()};const e=Xf();e&&typeof e.addEventListener=="function"&&e.addEventListener("visibilitychange",this.hu)}get isShuttingDown(){return this.ou}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.Pu(),this.Iu(e)}enterRestrictedMode(e){if(!this.ou){this.ou=!0,this.cu=e||!1;const n=Xf();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.hu)}}enqueue(e){if(this.Pu(),this.ou)return new Promise(()=>{});const n=new $i;return this.Iu(()=>this.ou&&this.cu?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.su.push(e),this.Tu()))}async Tu(){if(this.su.length!==0){try{await this.su[0](),this.su.shift(),this.Yo.reset()}catch(e){if(!ku(e))throw e;J("AsyncQueue","Operation failed with retryable error: "+e)}this.su.length>0&&this.Yo.$o(()=>this.Tu())}}Iu(e){const n=this.iu.then(()=>(this.uu=!0,e().catch(r=>{this.au=r,this.uu=!1;const i=function(o){let a=o.message||"";return o.stack&&(a=o.stack.includes(o.message)?o.stack:o.message+`
`+o.stack),a}(r);throw Kr("INTERNAL UNHANDLED ERROR: ",i),r}).then(r=>(this.uu=!1,r))));return this.iu=n,n}enqueueAfterDelay(e,n,r){this.Pu(),this.lu.indexOf(e)>-1&&(n=0);const i=gy.createAndSchedule(this,e,n,r,s=>this.Eu(s));return this._u.push(i),i}Pu(){this.au&&le()}verifyOperationInProgress(){}async du(){let e;do e=this.iu,await e;while(e!==this.iu)}Au(e){for(const n of this._u)if(n.timerId===e)return!0;return!1}Ru(e){return this.du().then(()=>{this._u.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(const n of this._u)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.du()})}Vu(e){this.lu.push(e)}Eu(e){const n=this._u.indexOf(e);this._u.splice(n,1)}}class kd extends Ad{constructor(e,n,r,i){super(e,n,r,i),this.type="firestore",this._queue=function(){return new WM}(),this._persistenceKey=(i==null?void 0:i.name)||"[DEFAULT]"}_terminate(){return this._firestoreClient||tI(this),this._firestoreClient.terminate()}}function qM(t,e){const n=typeof t=="object"?t:oT(),r=typeof t=="string"?t:"(default)",i=jg(n,"firestore").getImmediate({identifier:r});if(!i._initialized){const s=mR("firestore");s&&HM(i,...s)}return i}function eI(t){return t._firestoreClient||tI(t),t._firestoreClient.verifyNotTerminated(),t._firestoreClient}function tI(t){var e,n,r;const i=t._freezeSettings(),s=function(a,l,c,h){return new w4(a,l,c,h.host,h.ssl,h.experimentalForceLongPolling,h.experimentalAutoDetectLongPolling,JC(h.experimentalLongPollingOptions),h.useFetchStreams)}(t._databaseId,((e=t._app)===null||e===void 0?void 0:e.options.appId)||"",t._persistenceKey,i);t._firestoreClient=new UM(t._authCredentials,t._appCheckCredentials,t._queue,s),!((n=i.localCache)===null||n===void 0)&&n._offlineComponentProvider&&(!((r=i.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(t._firestoreClient._uninitializedComponentsProvider={_offlineKind:i.localCache.kind,_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pa{constructor(e){this._byteString=e}static fromBase64String(e){try{return new pa(Ht.fromBase64String(e))}catch(n){throw new Y(j.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new pa(Ht.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pd{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new Y(j.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Pt(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wy{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ey{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new Y(j.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new Y(j.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return Ae(this._lat,e._lat)||Ae(this._long,e._long)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const GM=/^__.*__$/;class KM{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return this.fieldMask!==null?new os(e,this.data,this.fieldMask,n,this.fieldTransforms):new Pu(e,this.data,n,this.fieldTransforms)}}class nI{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return new os(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function rI(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw le()}}class by{constructor(e,n,r,i,s,o){this.settings=e,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=i,s===void 0&&this.mu(),this.fieldTransforms=s||[],this.fieldMask=o||[]}get path(){return this.settings.path}get fu(){return this.settings.fu}gu(e){return new by(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}pu(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),i=this.gu({path:r,yu:!1});return i.wu(e),i}Su(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),i=this.gu({path:r,yu:!1});return i.mu(),i}bu(e){return this.gu({path:void 0,yu:!0})}Du(e){return jh(e,this.settings.methodName,this.settings.Cu||!1,this.path,this.settings.vu)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}mu(){if(this.path)for(let e=0;e<this.path.length;e++)this.wu(this.path.get(e))}wu(e){if(e.length===0)throw this.Du("Document fields must not be empty");if(rI(this.fu)&&GM.test(e))throw this.Du('Document fields cannot begin and end with "__"')}}class QM{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=r||Td(e)}Fu(e,n,r,i=!1){return new by({fu:e,methodName:n,vu:r,path:Pt.emptyPath(),yu:!1,Cu:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Ty(t){const e=t._freezeSettings(),n=Td(t._databaseId);return new QM(t._databaseId,!!e.ignoreUndefinedProperties,n)}function XM(t,e,n,r,i,s={}){const o=t.Fu(s.merge||s.mergeFields?2:0,e,n,i);Cy("Data must be an object, but it was:",o,r);const a=iI(r,o);let l,c;if(s.merge)l=new mn(o.fieldMask),c=o.fieldTransforms;else if(s.mergeFields){const h=[];for(const f of s.mergeFields){const p=xm(e,f,n);if(!o.contains(p))throw new Y(j.INVALID_ARGUMENT,`Field '${p}' is specified in your field mask but missing from your input data.`);oI(h,p)||h.push(p)}l=new mn(h),c=o.fieldTransforms.filter(f=>l.covers(f.field))}else l=null,c=o.fieldTransforms;return new KM(new rn(a),l,c)}class Rd extends wy{_toFieldTransform(e){if(e.fu!==2)throw e.fu===1?e.Du(`${this._methodName}() can only appear at the top level of your update data`):e.Du(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof Rd}}function YM(t,e,n,r){const i=t.Fu(1,e,n);Cy("Data must be an object, but it was:",i,r);const s=[],o=rn.empty();Js(r,(l,c)=>{const h=Iy(e,l,n);c=gt(c);const f=i.Su(h);if(c instanceof Rd)s.push(h);else{const p=Lu(c,f);p!=null&&(s.push(h),o.set(h,p))}});const a=new mn(s);return new nI(o,a,i.fieldTransforms)}function JM(t,e,n,r,i,s){const o=t.Fu(1,e,n),a=[xm(e,r,n)],l=[i];if(s.length%2!=0)throw new Y(j.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let p=0;p<s.length;p+=2)a.push(xm(e,s[p])),l.push(s[p+1]);const c=[],h=rn.empty();for(let p=a.length-1;p>=0;--p)if(!oI(c,a[p])){const _=a[p];let w=l[p];w=gt(w);const I=o.Su(_);if(w instanceof Rd)c.push(_);else{const R=Lu(w,I);R!=null&&(c.push(_),h.set(_,R))}}const f=new mn(c);return new nI(h,f,o.fieldTransforms)}function ZM(t,e,n,r=!1){return Lu(n,t.Fu(r?4:3,e))}function Lu(t,e){if(sI(t=gt(t)))return Cy("Unsupported field value:",e,t),iI(t,e);if(t instanceof wy)return function(r,i){if(!rI(i.fu))throw i.Du(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.Du(`${r._methodName}() is not currently supported inside arrays`);const s=r._toFieldTransform(i);s&&i.fieldTransforms.push(s)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.yu&&e.fu!==4)throw e.Du("Nested arrays are not supported");return function(r,i){const s=[];let o=0;for(const a of r){let l=Lu(a,i.bu(o));l==null&&(l={nullValue:"NULL_VALUE"}),s.push(l),o++}return{arrayValue:{values:s}}}(t,e)}return function(r,i){if((r=gt(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return j4(i.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const s=mt.fromDate(r);return{timestampValue:$h(i.serializer,s)}}if(r instanceof mt){const s=new mt(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:$h(i.serializer,s)}}if(r instanceof Ey)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof pa)return{bytesValue:SC(i.serializer,r._byteString)};if(r instanceof yn){const s=i.databaseId,o=r.firestore._databaseId;if(!o.isEqual(s))throw i.Du(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${s.projectId}/${s.database}`);return{referenceValue:ly(r.firestore._databaseId||i.databaseId,r._key.path)}}throw i.Du(`Unsupported field value: ${Sd(r)}`)}(t,e)}function iI(t,e){const n={};return JT(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Js(t,(r,i)=>{const s=Lu(i,e.pu(r));s!=null&&(n[r]=s)}),{mapValue:{fields:n}}}function sI(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof mt||t instanceof Ey||t instanceof pa||t instanceof yn||t instanceof wy)}function Cy(t,e,n){if(!sI(n)||!function(i){return typeof i=="object"&&i!==null&&(Object.getPrototypeOf(i)===Object.prototype||Object.getPrototypeOf(i)===null)}(n)){const r=Sd(n);throw r==="an object"?e.Du(t+" a custom object"):e.Du(t+" "+r)}}function xm(t,e,n){if((e=gt(e))instanceof Pd)return e._internalPath;if(typeof e=="string")return Iy(t,e);throw jh("Field path arguments must be of type string or ",t,!1,void 0,n)}const e3=new RegExp("[~\\*/\\[\\]]");function Iy(t,e,n){if(e.search(e3)>=0)throw jh(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new Pd(...e.split("."))._internalPath}catch{throw jh(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function jh(t,e,n,r,i){const s=r&&!r.isEmpty(),o=i!==void 0;let a=`Function ${e}() called with invalid data`;n&&(a+=" (via `toFirestore()`)"),a+=". ";let l="";return(s||o)&&(l+=" (found",s&&(l+=` in field ${r}`),o&&(l+=` in document ${i}`),l+=")"),new Y(j.INVALID_ARGUMENT,a+t+l)}function oI(t,e){return t.some(n=>n.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aI{constructor(e,n,r,i,s){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=i,this._converter=s}get id(){return this._key.path.lastSegment()}get ref(){return new yn(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new t3(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(Nd("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class t3 extends aI{data(){return super.data()}}function Nd(t,e){return typeof e=="string"?Iy(t,e):e instanceof Pd?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function n3(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new Y(j.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class Sy{}class lI extends Sy{}function Od(t,e,...n){let r=[];e instanceof Sy&&r.push(e),r=r.concat(n),function(s){const o=s.filter(l=>l instanceof xy).length,a=s.filter(l=>l instanceof Ld).length;if(o>1||o>0&&a>0)throw new Y(j.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(const i of r)t=i._apply(t);return t}class Ld extends lI{constructor(e,n,r){super(),this._field=e,this._op=n,this._value=r,this.type="where"}static _create(e,n,r){return new Ld(e,n,r)}_apply(e){const n=this._parse(e);return uI(e._query,n),new eo(e.firestore,e.converter,_m(e._query,n))}_parse(e){const n=Ty(e.firestore);return function(s,o,a,l,c,h,f){let p;if(c.isKeyField()){if(h==="array-contains"||h==="array-contains-any")throw new Y(j.INVALID_ARGUMENT,`Invalid Query. You can't perform '${h}' queries on documentId().`);if(h==="in"||h==="not-in"){Dw(f,h);const _=[];for(const w of f)_.push(Lw(l,s,w));p={arrayValue:{values:_}}}else p=Lw(l,s,f)}else h!=="in"&&h!=="not-in"&&h!=="array-contains-any"||Dw(f,h),p=ZM(a,o,f,h==="in"||h==="not-in");return ct.create(c,h,p)}(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}}function Ay(t,e,n){const r=e,i=Nd("where",t);return Ld._create(i,r,n)}class xy extends Sy{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new xy(e,n)}_parse(e){const n=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return n.length===1?n[0]:Jn.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return n.getFilters().length===0?e:(function(i,s){let o=i;const a=s.getFlattenedFilters();for(const l of a)uI(o,l),o=_m(o,l)}(e._query,n),new eo(e.firestore,e.converter,_m(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class ky extends lI{constructor(e,n){super(),this._field=e,this._direction=n,this.type="orderBy"}static _create(e,n){return new ky(e,n)}_apply(e){const n=function(i,s,o){if(i.startAt!==null)throw new Y(j.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(i.endAt!==null)throw new Y(j.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new du(s,o)}(e._query,this._field,this._direction);return new eo(e.firestore,e.converter,function(i,s){const o=i.explicitOrderBy.concat([s]);return new xa(i.path,i.collectionGroup,o,i.filters.slice(),i.limit,i.limitType,i.startAt,i.endAt)}(e._query,n))}}function r3(t,e="asc"){const n=e,r=Nd("orderBy",t);return ky._create(r,n)}function Lw(t,e,n){if(typeof(n=gt(n))=="string"){if(n==="")throw new Y(j.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!lC(e)&&n.indexOf("/")!==-1)throw new Y(j.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const r=e.path.child(Fe.fromString(n));if(!ne.isDocumentKey(r))throw new Y(j.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return rw(t,new ne(r))}if(n instanceof yn)return rw(t,n._key);throw new Y(j.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Sd(n)}.`)}function Dw(t,e){if(!Array.isArray(t)||t.length===0)throw new Y(j.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function uI(t,e){const n=function(i,s){for(const o of i)for(const a of o.getFlattenedFilters())if(s.indexOf(a.op)>=0)return a.op;return null}(t.filters,function(i){switch(i){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(n!==null)throw n===e.op?new Y(j.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new Y(j.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}class i3{convertValue(e,n="none"){switch(qs(e)){case 0:return null;case 1:return e.booleanValue;case 2:return lt(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(Ws(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 10:return this.convertObject(e.mapValue,n);default:throw le()}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const r={};return Js(e,(i,s)=>{r[i]=this.convertValue(s,n)}),r}convertGeoPoint(e){return new Ey(lt(e.latitude),lt(e.longitude))}convertArray(e,n){return(e.values||[]).map(r=>this.convertValue(r,n))}convertServerTimestamp(e,n){switch(n){case"previous":const r=ny(e);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(uu(e));default:return null}}convertTimestamp(e){const n=Ki(e);return new mt(n.seconds,n.nanos)}convertDocumentKey(e,n){const r=Fe.fromString(e);De(NC(r));const i=new cu(r.get(1),r.get(3)),s=new ne(r.popFirst(5));return i.isEqual(n)||Kr(`Document ${s} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function s3(t,e,n){let r;return r=t?t.toFirestore(e):e,r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sc{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class o3 extends aI{constructor(e,n,r,i,s,o){super(e,n,r,i,o),this._firestore=e,this._firestoreImpl=e,this.metadata=s}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new Jc(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const r=this._document.data.field(Nd("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}}class Jc extends o3{data(e={}){return super.data(e)}}class a3{constructor(e,n,r,i){this._firestore=e,this._userDataWriter=n,this._snapshot=i,this.metadata=new Sc(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){const e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(r=>{e.call(n,new Jc(this._firestore,this._userDataWriter,r.key,r,new Sc(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new Y(j.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(i,s){if(i._snapshot.oldDocs.isEmpty()){let o=0;return i._snapshot.docChanges.map(a=>{const l=new Jc(i._firestore,i._userDataWriter,a.doc.key,a.doc,new Sc(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter);return a.doc,{type:"added",doc:l,oldIndex:-1,newIndex:o++}})}{let o=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(a=>s||a.type!==3).map(a=>{const l=new Jc(i._firestore,i._userDataWriter,a.doc.key,a.doc,new Sc(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter);let c=-1,h=-1;return a.type!==0&&(c=o.indexOf(a.doc.key),o=o.delete(a.doc.key)),a.type!==1&&(o=o.add(a.doc),h=o.indexOf(a.doc.key)),{type:l3(a.type),doc:l,oldIndex:c,newIndex:h}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}}function l3(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return le()}}class u3 extends i3{constructor(e){super(),this.firestore=e}convertBytes(e){return new pa(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new yn(this.firestore,null,n)}}function Du(t){t=fa(t,eo);const e=fa(t.firestore,kd),n=eI(e),r=new u3(e);return n3(t._query),zM(n,t._query).then(i=>new a3(e,r,t,i))}function Py(t,e,n,...r){t=fa(t,yn);const i=fa(t.firestore,kd),s=Ty(i);let o;return o=typeof(e=gt(e))=="string"||e instanceof Pd?JM(s,"updateDoc",t._key,e,n,r):YM(s,"updateDoc",t._key,e),hI(i,[o.toMutation(t._key,dr.exists(!0))])}function cI(t,e){const n=fa(t.firestore,kd),r=xd(t),i=s3(t.converter,e);return hI(n,[XM(Ty(t.firestore),"addDoc",r._key,i,t.converter!==null,{}).toMutation(r._key,dr.exists(!1))]).then(()=>r)}function hI(t,e){return function(r,i){const s=new $i;return r.asyncQueue.enqueueAndForget(async()=>AM(await FM(r),i,s)),s.promise}(eI(t),e)}(function(e,n=!0){(function(i){Aa=i})(Ia),sa(new Fs("firestore",(r,{instanceIdentifier:i,options:s})=>{const o=r.getProvider("app").getImmediate(),a=new kd(new s4(r.getProvider("auth-internal")),new u4(r.getProvider("app-check-internal")),function(c,h){if(!Object.prototype.hasOwnProperty.apply(c.options,["projectId"]))throw new Y(j.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new cu(c.options.projectId,h)}(o,i),o);return s=Object.assign({useFetchStreams:n},s),a._setSettings(s),a},"PUBLIC").setMultipleInstances(!0)),Vi(Z0,"4.6.3",e),Vi(Z0,"4.6.3","esm2017")})();const c3={apiKey:"AIzaSyDKuvPzNmeXlqxNRyciKVdLetWxjNVjDnQ",authDomain:"edelgram-e14a7.firebaseapp.com",projectId:"edelgram-e14a7",storageBucket:"edelgram-e14a7.appspot.com",messagingSenderId:"524024204359",appId:"1:524024204359:web:23b7b1b859d1cc81e13562"},dI=sT(c3),Mu=zT(dI),yr=qM(dI),fI=(t,e)=>$O(Mu,t,e),pI=(t,e)=>VO(Mu,t,e),mI=()=>{HO(Mu)},gI=()=>{const t=new Or;return hL(Mu,t)},yI=async t=>jO(t.user,{displayName:t.displayName,photoURL:t.photoURL}),vI=L.createContext({user:null,logIn:fI,signUp:pI,logOut:mI,googleSignIn:gI,updateProfileInfo:yI}),h3=({children:t})=>{const[e,n]=L.useState(null);L.useEffect(()=>{const i=PT(Mu,s=>(s&&(console.log("The logged in user state is:",s),n(s)),()=>{i()}))},[]);const r={user:e,logIn:fI,signUp:pI,logOut:mI,googleSignIn:gI,updateProfileInfo:yI};return b.jsx(vI.Provider,{value:r,children:t})},vr=()=>L.useContext(vI),d3="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20fill='none'%20viewBox='0%200%2024%2024'%20stroke-width='1.5'%20stroke='currentColor'%20class='size-6'%3e%3cpath%20stroke-linecap='round'%20stroke-linejoin='round'%20d='M8.25%209V5.25A2.25%202.25%200%200%201%2010.5%203h6a2.25%202.25%200%200%201%202.25%202.25v13.5A2.25%202.25%200%200%201%2016.5%2021h-6a2.25%202.25%200%200%201-2.25-2.25V15m-3%200-3-3m0%200%203-3m-3%203H15'%20/%3e%3c/svg%3e",f3=()=>{const{pathname:t}=rs(),{logOut:e}=vr();return b.jsxs("nav",{className:"flex flex-col relative h-screen max-w-sm w-full",children:[b.jsxs("div",{className:"flex justify-center gap-x-2 m-5",children:[b.jsx("img",{src:"./public/logo.svg",alt:"logo"}),b.jsx("h2",{className:"text-white text-lg",children:"Edelgram"})]}),aR.map(n=>b.jsx("div",{className:_n(im({variant:"default"}),t===n.link?"bg-white text-white-800 hover:bg-white rounded-none":"hover:bg-slate-950 hover:text-white bg-transparent rounded-none","justify-start"),children:b.jsxs(su,{to:n.link,className:"flex",children:[b.jsx("span",{children:b.jsx("img",{src:n.icon,alt:n.name,className:"w-5 h-5 mr-2",style:{filter:`${t===n.link?"invert(0)":"invert(1)"}`}})}),b.jsx("span",{children:n.name})]})},n.name)),b.jsx("div",{className:_n(im({variant:"default"}),t==="/edelgram/login"?"bg-white text-white-800 hover:bg-white rounded-none":"hover:bg-slate-950 hover:text-white bg-transparent rounded-none","justify-start"),children:b.jsxs(su,{to:"/edelgram/login",className:"flex",onClick:e,children:[b.jsx("span",{children:b.jsx("img",{src:d3,className:"w-5 h-5 mr-2",alt:"Logout",style:{filter:`${t==="/edelgram/login"?"invert(0)":"invert(1)"}`}})}),b.jsx("span",{children:"Logout"})]})})]})},Dd="users",p3=t=>{try{return cI(to(yr,Dd),t)}catch(e){console.error(e)}},m3=async t=>{try{const e=Od(to(yr,Dd),Ay("userId","==",t)),n=await Du(e);let r={};return n.size>0&&n.forEach(i=>{const s=i.data();r={id:i.id,...s}}),r}catch(e){console.error(e)}},g3=async(t,e)=>{const n=xd(yr,Dd,t);return Py(n,{...e})},y3=async t=>{try{const e=await Du(to(yr,Dd));let n=[];return e.size>0&&e.forEach(r=>{const i=r.data(),s={id:r.id,...i};n.push(s)}),n.filter(r=>r.userId!==t)}catch(e){console.error(e)}},Gs="/edelgram/assets/image7-Bo2YHah9.jpg",v3=({friend:t})=>b.jsxs("div",{className:"flex flex-row items-center mb-4 border-gray-400 justify-start",children:[b.jsx("span",{className:"mr-2",children:b.jsx("img",{src:t.photoURL?t.photoURL:Gs,className:"w-10 h-10 rounded-full border-2 border-slate-800 object-cover"})}),b.jsx("span",{className:"text-xs",children:t.displayName?t.displayName:"Guest_User"}),b.jsx(mr,{className:"text-xs p-3 py-2 h-6 bg-slate-900 last-of-type:ml-auto",children:"Follow"})]}),_3=()=>{const{user:t}=vr(),[e,n]=L.useState([]),r=async i=>{const s=await y3(i)||[];n(s)};return L.useEffect(()=>{t!==null&&r(t.uid)},[t]),b.jsxs("div",{className:"text-white py-8 px-3",children:[b.jsx(su,{to:"/edelgram/profile/",children:b.jsxs("div",{className:"flex flex-row items-center border-b pb-4 mb-4 border-gray-400 cursor-pointer",children:[b.jsx("span",{className:"mr-2",children:b.jsx("img",{src:t!=null&&t.photoURL?t.photoURL:Gs,className:"w-10 h-10 rounded-full border-2 border-slate-800 object-cover"})}),b.jsx("span",{className:"text-xs",children:t!=null&&t.displayName?t.displayName:"Guest"})]})}),b.jsx("h3",{className:"text-sm text-slate-300",children:"Suggested Friends"}),b.jsx("div",{className:"my-4",children:e.length>0?e.map(i=>b.jsx(v3,{friend:i})):""})]})},Uu=({children:t})=>b.jsxs("div",{className:"flex bg-white",children:[b.jsx("aside",{className:"flex gap-x-4 bg-gray-800 fixed top-0 left-0 z-40 lg:w-60 h-screen",children:b.jsx(f3,{})}),b.jsx("div",{className:"lg:ml-60 lg:mr-60 p-8 flex-1 ml-36",children:t}),b.jsx("aside",{className:"hidden lg:block bg-gray-800 fixed top-0 right-0 z-40 lg:w-60 h-screen",children:b.jsx(_3,{})})]}),Md=L.forwardRef(({className:t,...e},n)=>b.jsx("div",{ref:n,className:_n("rounded-lg border bg-card text-card-foreground shadow-sm",t),...e}));Md.displayName="Card";const Ud=L.forwardRef(({className:t,...e},n)=>b.jsx("div",{ref:n,className:_n("flex flex-col space-y-1.5 p-6",t),...e}));Ud.displayName="CardHeader";const Vd=L.forwardRef(({className:t,...e},n)=>b.jsx("h3",{ref:n,className:_n("text-2xl font-semibold leading-none tracking-tight",t),...e}));Vd.displayName="CardTitle";const Ry=L.forwardRef(({className:t,...e},n)=>b.jsx("p",{ref:n,className:_n("text-sm text-muted-foreground",t),...e}));Ry.displayName="CardDescription";const $d=L.forwardRef(({className:t,...e},n)=>b.jsx("div",{ref:n,className:_n("p-6 pt-0",t),...e}));$d.displayName="CardContent";const Fd=L.forwardRef(({className:t,...e},n)=>b.jsx("div",{ref:n,className:_n("flex items-center p-6 pt-0",t),...e}));Fd.displayName="CardFooter";/**
 * @license lucide-react v0.390.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const w3=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),_I=(...t)=>t.filter((e,n,r)=>!!e&&r.indexOf(e)===n).join(" ");/**
 * @license lucide-react v0.390.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var E3={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.390.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const b3=L.forwardRef(({color:t="currentColor",size:e=24,strokeWidth:n=2,absoluteStrokeWidth:r,className:i="",children:s,iconNode:o,...a},l)=>L.createElement("svg",{ref:l,...E3,width:e,height:e,stroke:t,strokeWidth:r?Number(n)*24/Number(e):n,className:_I("lucide",i),...a},[...o.map(([c,h])=>L.createElement(c,h)),...Array.isArray(s)?s:[s]]));/**
 * @license lucide-react v0.390.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jd=(t,e)=>{const n=L.forwardRef(({className:r,...i},s)=>L.createElement(b3,{ref:s,iconNode:e,className:_I(`lucide-${w3(t)}`,r),...i}));return n.displayName=`${t}`,n};/**
 * @license lucide-react v0.390.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wI=jd("Heart",[["path",{d:"M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.3 1.5 4.05 3 5.5l7 7Z",key:"c3ymky"}]]);/**
 * @license lucide-react v0.390.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const T3=jd("MessageCircle",[["path",{d:"M7.9 20A9 9 0 1 0 4 16.1L2 22Z",key:"vv11sd"}]]);/**
 * @license lucide-react v0.390.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const C3=jd("Pen",[["path",{d:"M17 3a2.85 2.83 0 1 1 4 4L7.5 20.5 2 22l1.5-5.5Z",key:"5qss01"}]]);/**
 * @license lucide-react v0.390.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const I3=jd("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]),ma="posts",S3=t=>cI(to(yr,ma),t),A3=async()=>{try{const t=Od(to(yr,ma),r3("date","desc")),e=await Du(t),n=[];return e.forEach(r=>{const i=r.data(),s={id:r.id,...i};n.push(s)}),n}catch(t){console.error(t)}},x3=t=>{const e=Od(to(yr,ma),Ay("userId","==",t));return Du(e)},k3=(t,e,n)=>{const r=xd(yr,ma,t);return Py(r,{userLikes:e,likes:n})},P3=async t=>{var e;try{const n=Od(to(yr,ma),Ay("userId","==",(e=t.user)==null?void 0:e.uid)),r=await Du(n);r.size>0&&r.forEach(i=>{const s=xd(yr,ma,i.id);Py(s,{username:t.displayName,photoURL:t.photoURL})})}catch(n){console.error(n)}},R3=({item:t})=>{const{user:e}=vr(),[n,r]=L.useState({likes:t.likes,isLike:e!=null&&e.uid?t.userLikes.includes(e==null?void 0:e.uid):!1}),i=async s=>{if(r({likes:s?n.likes+1:n.likes-1,isLike:!n.isLike}),s&&(e!=null&&e.uid))t.userLikes.push(e==null?void 0:e.uid);else{const o=t.userLikes.indexOf(e.uid);o!==-1&&t.userLikes.splice(o)}t.id&&await k3(t.id,t.userLikes,s?n.likes+1:n.likes-1)};return b.jsx(b.Fragment,{children:b.jsxs(Md,{className:"mb-6",children:[b.jsx(Ud,{className:"flex flex-col p-3",children:b.jsxs(Vd,{className:"text-sm text-center flex justify-start items-center",children:[b.jsx("span",{className:"mr-2",children:b.jsx("img",{src:t.photoURL?t.photoURL:Gs,className:"w-10 h-10 rounded-full border-2 border-slate-800 object-cover",alt:"image"})}),b.jsx("span",{children:t.username})]})}),b.jsx($d,{className:"p-0",children:b.jsx("img",{src:t.photos?t.photos[0].cdnUrl??void 0:"",alt:"photo"})}),b.jsxs(Fd,{className:"flex flex-col p-3",children:[b.jsxs("div",{className:"flex justify-start w-full mb-3",children:[b.jsx(wI,{className:_n("mr-3","cursor-pointer",n.isLike?"fill-red-400":"fill-none"),onClick:()=>i(!n.isLike)}),b.jsx(T3,{className:"mr-3 cursor-pointer"})]}),b.jsxs("div",{className:"w-full text-sm",children:[n.likes," likes"]}),b.jsxs("div",{className:"w-full text-sm",children:[b.jsx("span",{children:t.username}),": ",t.caption]})]})]})})},Ny="/edelgram/assets/image1-CoqYZn9M.jpg",Oy="/edelgram/assets/image2-n_CPjltO.jpg",Ly="/edelgram/assets/image3-DgA0XuPA.jpg",Dy="/edelgram/assets/image4-C82QDRdx.jpg",N3="/edelgram/assets/image5-DZOQ_6Ay.jpg",O3="/edelgram/assets/image6-D7ViGmDS.jpg",L3=()=>b.jsxs("div",{className:"flex gap-x-6 justify-between",children:[b.jsx("img",{className:"w-20 h-20 rounded-full border-4 border-slate-800 object-cover",src:Ny,alt:"image"}),b.jsx("img",{className:"w-20 h-20 rounded-full border-4 border-slate-800 object-cover",src:Oy,alt:"image"}),b.jsx("img",{className:"w-20 h-20 rounded-full border-4 border-slate-800 object-cover",src:Ly,alt:"image"}),b.jsx("img",{className:"w-20 h-20 rounded-full border-4 border-slate-800 object-cover",src:Gs,alt:"image"}),b.jsx("img",{className:"w-20 h-20 rounded-full border-4 border-slate-800 object-cover",src:Dy,alt:"image"}),b.jsx("img",{className:"w-20 h-20 rounded-full border-4 border-slate-800 object-cover",src:N3,alt:"image"}),b.jsx("img",{className:"w-20 h-20 rounded-full border-4 border-slate-800 object-cover",src:O3,alt:"image"}),b.jsx("img",{className:"w-20 h-20 rounded-full border-4 border-slate-800 object-cover",src:Gs,alt:"image"})]}),ji=L.forwardRef(({className:t,type:e,...n},r)=>b.jsx("input",{type:e,className:_n("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",t),ref:r,...n}));ji.displayName="Input";const D3=()=>{const{user:t}=vr(),[e,n]=L.useState([]),[r,i]=L.useState([]),s=async()=>{const a=await A3()||[];n(a),i(a)},o=L.useCallback(a=>{const l=a.target.value.toLowerCase(),c=e.filter(h=>{var f;return h.caption.toLowerCase().includes(l)||((f=h.username)==null?void 0:f.toLowerCase().includes(l))});i(c)},[e]);return L.useEffect(()=>{t!==null&&s()},[t]),b.jsx(Uu,{children:b.jsxs("div",{className:"flex flex-col",children:[b.jsxs("div",{className:"relative mb-6 w-full text-gray-600",children:[b.jsx(ji,{className:"border-2 border-gray-300 bg-white h-10 px-5 pr-16 rounded-sm text-base focus:outline-none",placeholder:"Search...",type:"search",name:"search",onChange:o}),b.jsx("button",{className:"absolute right-2.5 top-2.5",type:"submit",children:b.jsx(I3,{className:"w-5 h-5 text-gray-400"})})]}),b.jsxs("div",{className:"mb-6",children:[b.jsx("h2",{className:"mb-5",children:"Stories"}),b.jsx(L3,{})]}),b.jsxs("div",{className:"mb-5",children:[b.jsx("h2",{className:"mb-5",children:"Feed"}),b.jsx("div",{className:"w-full flex justify-center",children:b.jsx("div",{className:"flex flex-col max-w-sm rounded-sm overflow-hidden",children:r?r.map(a=>b.jsx(R3,{item:a},a.id)):b.jsx("p",{children:"Loading..."})})})]})]})})},ms=()=>b.jsx("div",{children:"Error"}),M3=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","span","svg","ul"],U3=M3.reduce((t,e)=>{const n=L.forwardRef((r,i)=>{const{asChild:s,...o}=r,a=s?Vg:e;return L.useEffect(()=>{window[Symbol.for("radix-ui")]=!0},[]),L.createElement(a,ia({},o,{ref:i}))});return n.displayName=`Primitive.${e}`,{...t,[e]:n}},{}),V3=L.forwardRef((t,e)=>L.createElement(U3.label,ia({},t,{ref:e,onMouseDown:n=>{var r;(r=t.onMouseDown)===null||r===void 0||r.call(t,n),!n.defaultPrevented&&n.detail>1&&n.preventDefault()}}))),EI=V3,$3=Xb("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),Qn=L.forwardRef(({className:t,...e},n)=>b.jsx(EI,{ref:n,className:_n($3(),t),...e}));Qn.displayName=EI.displayName;const bI={logo:t=>b.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 256 256",...t,children:[b.jsx("rect",{width:"256",height:"256",fill:"none"}),b.jsx("line",{x1:"208",y1:"128",x2:"128",y2:"208",fill:"none",stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"16"}),b.jsx("line",{x1:"192",y1:"40",x2:"40",y2:"192",fill:"none",stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"16"})]}),twitter:t=>b.jsx("svg",{...t,height:"23",viewBox:"0 0 1200 1227",width:"23",xmlns:"http://www.w3.org/2000/svg",children:b.jsx("path",{d:"M714.163 519.284L1160.89 0H1055.03L667.137 450.887L357.328 0H0L468.492 681.821L0 1226.37H105.866L515.491 750.218L842.672 1226.37H1200L714.137 519.284H714.163ZM569.165 687.828L521.697 619.934L144.011 79.6944H306.615L611.412 515.685L658.88 583.579L1055.08 1150.3H892.476L569.165 687.854V687.828Z"})}),gitHub:t=>b.jsx("svg",{viewBox:"0 0 438.549 438.549",...t,children:b.jsx("path",{fill:"currentColor",d:"M409.132 114.573c-19.608-33.596-46.205-60.194-79.798-79.8-33.598-19.607-70.277-29.408-110.063-29.408-39.781 0-76.472 9.804-110.063 29.408-33.596 19.605-60.192 46.204-79.8 79.8C9.803 148.168 0 184.854 0 224.63c0 47.78 13.94 90.745 41.827 128.906 27.884 38.164 63.906 64.572 108.063 79.227 5.14.954 8.945.283 11.419-1.996 2.475-2.282 3.711-5.14 3.711-8.562 0-.571-.049-5.708-.144-15.417a2549.81 2549.81 0 01-.144-25.406l-6.567 1.136c-4.187.767-9.469 1.092-15.846 1-6.374-.089-12.991-.757-19.842-1.999-6.854-1.231-13.229-4.086-19.13-8.559-5.898-4.473-10.085-10.328-12.56-17.556l-2.855-6.57c-1.903-4.374-4.899-9.233-8.992-14.559-4.093-5.331-8.232-8.945-12.419-10.848l-1.999-1.431c-1.332-.951-2.568-2.098-3.711-3.429-1.142-1.331-1.997-2.663-2.568-3.997-.572-1.335-.098-2.43 1.427-3.289 1.525-.859 4.281-1.276 8.28-1.276l5.708.853c3.807.763 8.516 3.042 14.133 6.851 5.614 3.806 10.229 8.754 13.846 14.842 4.38 7.806 9.657 13.754 15.846 17.847 6.184 4.093 12.419 6.136 18.699 6.136 6.28 0 11.704-.476 16.274-1.423 4.565-.952 8.848-2.383 12.847-4.285 1.713-12.758 6.377-22.559 13.988-29.41-10.848-1.14-20.601-2.857-29.264-5.14-8.658-2.286-17.605-5.996-26.835-11.14-9.235-5.137-16.896-11.516-22.985-19.126-6.09-7.614-11.088-17.61-14.987-29.979-3.901-12.374-5.852-26.648-5.852-42.826 0-23.035 7.52-42.637 22.557-58.817-7.044-17.318-6.379-36.732 1.997-58.24 5.52-1.715 13.706-.428 24.554 3.853 10.85 4.283 18.794 7.952 23.84 10.994 5.046 3.041 9.089 5.618 12.135 7.708 17.705-4.947 35.976-7.421 54.818-7.421s37.117 2.474 54.823 7.421l10.849-6.849c7.419-4.57 16.18-8.758 26.262-12.565 10.088-3.805 17.802-4.853 23.134-3.138 8.562 21.509 9.325 40.922 2.279 58.24 15.036 16.18 22.559 35.787 22.559 58.817 0 16.178-1.958 30.497-5.853 42.966-3.9 12.471-8.941 22.457-15.125 29.979-6.191 7.521-13.901 13.85-23.131 18.986-9.232 5.14-18.182 8.85-26.84 11.136-8.662 2.286-18.415 4.004-29.263 5.146 9.894 8.562 14.842 22.077 14.842 40.539v60.237c0 3.422 1.19 6.279 3.572 8.562 2.379 2.279 6.136 2.95 11.276 1.995 44.163-14.653 80.185-41.062 108.068-79.226 27.88-38.161 41.825-81.126 41.825-128.906-.01-39.771-9.818-76.454-29.414-110.049z"})}),radix:t=>b.jsxs("svg",{viewBox:"0 0 25 25",fill:"none",...t,children:[b.jsx("path",{d:"M12 25C7.58173 25 4 21.4183 4 17C4 12.5817 7.58173 9 12 9V25Z",fill:"currentcolor"}),b.jsx("path",{d:"M12 0H4V8H12V0Z",fill:"currentcolor"}),b.jsx("path",{d:"M17 8C19.2091 8 21 6.20914 21 4C21 1.79086 19.2091 0 17 0C14.7909 0 13 1.79086 13 4C13 6.20914 14.7909 8 17 8Z",fill:"currentcolor"})]}),aria:t=>b.jsx("svg",{role:"img",viewBox:"0 0 24 24",fill:"currentColor",...t,children:b.jsx("path",{d:"M13.966 22.624l-1.69-4.281H8.122l3.892-9.144 5.662 13.425zM8.884 1.376H0v21.248zm15.116 0h-8.884L24 22.624Z"})}),npm:t=>b.jsx("svg",{viewBox:"0 0 24 24",...t,children:b.jsx("path",{d:"M1.763 0C.786 0 0 .786 0 1.763v20.474C0 23.214.786 24 1.763 24h20.474c.977 0 1.763-.786 1.763-1.763V1.763C24 .786 23.214 0 22.237 0zM5.13 5.323l13.837.019-.009 13.836h-3.464l.01-10.382h-3.456L12.04 19.17H5.113z",fill:"currentColor"})}),yarn:t=>b.jsx("svg",{viewBox:"0 0 24 24",...t,children:b.jsx("path",{d:"M12 0C5.375 0 0 5.375 0 12s5.375 12 12 12 12-5.375 12-12S18.625 0 12 0zm.768 4.105c.183 0 .363.053.525.157.125.083.287.185.755 1.154.31-.088.468-.042.551-.019.204.056.366.19.463.375.477.917.542 2.553.334 3.605-.241 1.232-.755 2.029-1.131 2.576.324.329.778.899 1.117 1.825.278.774.31 1.478.273 2.015a5.51 5.51 0 0 0 .602-.329c.593-.366 1.487-.917 2.553-.931.714-.009 1.269.445 1.353 1.103a1.23 1.23 0 0 1-.945 1.362c-.649.158-.95.278-1.821.843-1.232.797-2.539 1.242-3.012 1.39a1.686 1.686 0 0 1-.704.343c-.737.181-3.266.315-3.466.315h-.046c-.783 0-1.214-.241-1.45-.491-.658.329-1.51.19-2.122-.134a1.078 1.078 0 0 1-.58-1.153 1.243 1.243 0 0 1-.153-.195c-.162-.25-.528-.936-.454-1.946.056-.723.556-1.367.88-1.71a5.522 5.522 0 0 1 .408-2.256c.306-.727.885-1.348 1.32-1.737-.32-.537-.644-1.367-.329-2.21.227-.602.412-.936.82-1.08h-.005c.199-.074.389-.153.486-.259a3.418 3.418 0 0 1 2.298-1.103c.037-.093.079-.185.125-.283.31-.658.639-1.029 1.024-1.168a.94.94 0 0 1 .328-.06zm.006.7c-.507.016-1.001 1.519-1.001 1.519s-1.27-.204-2.266.871c-.199.218-.468.334-.746.44-.079.028-.176.023-.417.672-.371.991.625 2.094.625 2.094s-1.186.839-1.626 1.881c-.486 1.144-.338 2.261-.338 2.261s-.843.732-.899 1.487c-.051.663.139 1.2.343 1.515.227.343.51.176.51.176s-.561.653-.037.931c.477.25 1.283.394 1.71-.037.31-.31.371-1.001.486-1.283.028-.065.12.111.209.199.097.093.264.195.264.195s-.755.324-.445 1.066c.102.246.468.403 1.066.398.222-.005 2.664-.139 3.313-.296.375-.088.505-.283.505-.283s1.566-.431 2.998-1.357c.917-.598 1.293-.76 2.034-.936.612-.148.57-1.098-.241-1.084-.839.009-1.575.44-2.196.825-1.163.718-1.742.672-1.742.672l-.018-.032c-.079-.13.371-1.293-.134-2.678-.547-1.515-1.413-1.881-1.344-1.997.297-.5 1.038-1.297 1.334-2.78.176-.899.13-2.377-.269-3.151-.074-.144-.732.241-.732.241s-.616-1.371-.788-1.483a.271.271 0 0 0-.157-.046z",fill:"currentColor"})}),pnpm:t=>b.jsx("svg",{viewBox:"0 0 24 24",...t,children:b.jsx("path",{d:"M0 0v7.5h7.5V0zm8.25 0v7.5h7.498V0zm8.25 0v7.5H24V0zM8.25 8.25v7.5h7.498v-7.5zm8.25 0v7.5H24v-7.5zM0 16.5V24h7.5v-7.5zm8.25 0V24h7.498v-7.5zm8.25 0V24H24v-7.5z",fill:"currentColor"})}),react:t=>b.jsx("svg",{viewBox:"0 0 24 24",...t,children:b.jsx("path",{d:"M14.23 12.004a2.236 2.236 0 0 1-2.235 2.236 2.236 2.236 0 0 1-2.236-2.236 2.236 2.236 0 0 1 2.235-2.236 2.236 2.236 0 0 1 2.236 2.236zm2.648-10.69c-1.346 0-3.107.96-4.888 2.622-1.78-1.653-3.542-2.602-4.887-2.602-.41 0-.783.093-1.106.278-1.375.793-1.683 3.264-.973 6.365C1.98 8.917 0 10.42 0 12.004c0 1.59 1.99 3.097 5.043 4.03-.704 3.113-.39 5.588.988 6.38.32.187.69.275 1.102.275 1.345 0 3.107-.96 4.888-2.624 1.78 1.654 3.542 2.603 4.887 2.603.41 0 .783-.09 1.106-.275 1.374-.792 1.683-3.263.973-6.365C22.02 15.096 24 13.59 24 12.004c0-1.59-1.99-3.097-5.043-4.032.704-3.11.39-5.587-.988-6.38-.318-.184-.688-.277-1.092-.278zm-.005 1.09v.006c.225 0 .406.044.558.127.666.382.955 1.835.73 3.704-.054.46-.142.945-.25 1.44-.96-.236-2.006-.417-3.107-.534-.66-.905-1.345-1.727-2.035-2.447 1.592-1.48 3.087-2.292 4.105-2.295zm-9.77.02c1.012 0 2.514.808 4.11 2.28-.686.72-1.37 1.537-2.02 2.442-1.107.117-2.154.298-3.113.538-.112-.49-.195-.964-.254-1.42-.23-1.868.054-3.32.714-3.707.19-.09.4-.127.563-.132zm4.882 3.05c.455.468.91.992 1.36 1.564-.44-.02-.89-.034-1.345-.034-.46 0-.915.01-1.36.034.44-.572.895-1.096 1.345-1.565zM12 8.1c.74 0 1.477.034 2.202.093.406.582.802 1.203 1.183 1.86.372.64.71 1.29 1.018 1.946-.308.655-.646 1.31-1.013 1.95-.38.66-.773 1.288-1.18 1.87-.728.063-1.466.098-2.21.098-.74 0-1.477-.035-2.202-.093-.406-.582-.802-1.204-1.183-1.86-.372-.64-.71-1.29-1.018-1.946.303-.657.646-1.313 1.013-1.954.38-.66.773-1.286 1.18-1.868.728-.064 1.466-.098 2.21-.098zm-3.635.254c-.24.377-.48.763-.704 1.16-.225.39-.435.782-.635 1.174-.265-.656-.49-1.31-.676-1.947.64-.15 1.315-.283 2.015-.386zm7.26 0c.695.103 1.365.23 2.006.387-.18.632-.405 1.282-.66 1.933-.2-.39-.41-.783-.64-1.174-.225-.392-.465-.774-.705-1.146zm3.063.675c.484.15.944.317 1.375.498 1.732.74 2.852 1.708 2.852 2.476-.005.768-1.125 1.74-2.857 2.475-.42.18-.88.342-1.355.493-.28-.958-.646-1.956-1.1-2.98.45-1.017.81-2.01 1.085-2.964zm-13.395.004c.278.96.645 1.957 1.1 2.98-.45 1.017-.812 2.01-1.086 2.964-.484-.15-.944-.318-1.37-.5-1.732-.737-2.852-1.706-2.852-2.474 0-.768 1.12-1.742 2.852-2.476.42-.18.88-.342 1.356-.494zm11.678 4.28c.265.657.49 1.312.676 1.948-.64.157-1.316.29-2.016.39.24-.375.48-.762.705-1.158.225-.39.435-.788.636-1.18zm-9.945.02c.2.392.41.783.64 1.175.23.39.465.772.705 1.143-.695-.102-1.365-.23-2.006-.386.18-.63.406-1.282.66-1.933zM17.92 16.32c.112.493.2.968.254 1.423.23 1.868-.054 3.32-.714 3.708-.147.09-.338.128-.563.128-1.012 0-2.514-.807-4.11-2.28.686-.72 1.37-1.536 2.02-2.44 1.107-.118 2.154-.3 3.113-.54zm-11.83.01c.96.234 2.006.415 3.107.532.66.905 1.345 1.727 2.035 2.446-1.595 1.483-3.092 2.295-4.11 2.295-.22-.005-.406-.05-.553-.132-.666-.38-.955-1.834-.73-3.703.054-.46.142-.944.25-1.438zm4.56.64c.44.02.89.034 1.345.034.46 0 .915-.01 1.36-.034-.44.572-.895 1.095-1.345 1.565-.455-.47-.91-.993-1.36-1.565z",fill:"currentColor"})}),tailwind:t=>b.jsx("svg",{viewBox:"0 0 24 24",...t,children:b.jsx("path",{d:"M12.001,4.8c-3.2,0-5.2,1.6-6,4.8c1.2-1.6,2.6-2.2,4.2-1.8c0.913,0.228,1.565,0.89,2.288,1.624 C13.666,10.618,15.027,12,18.001,12c3.2,0,5.2-1.6,6-4.8c-1.2,1.6-2.6,2.2-4.2,1.8c-0.913-0.228-1.565-0.89-2.288-1.624 C16.337,6.182,14.976,4.8,12.001,4.8z M6.001,12c-3.2,0-5.2,1.6-6,4.8c1.2-1.6,2.6-2.2,4.2-1.8c0.913,0.228,1.565,0.89,2.288,1.624 c1.177,1.194,2.538,2.576,5.512,2.576c3.2,0,5.2-1.6,6-4.8c-1.2,1.6-2.6,2.2-4.2,1.8c-0.913-0.228-1.565-0.89-2.288-1.624 C10.337,13.382,8.976,12,6.001,12z",fill:"currentColor"})}),google:t=>b.jsx("svg",{role:"img",viewBox:"0 0 24 24",...t,children:b.jsx("path",{fill:"currentColor",d:"M12.48 10.92v3.28h7.84c-.24 1.84-.853 3.187-1.787 4.133-1.147 1.147-2.933 2.4-6.053 2.4-4.827 0-8.6-3.893-8.6-8.72s3.773-8.72 8.6-8.72c2.6 0 4.507 1.027 5.907 2.347l2.307-2.307C18.747 1.44 16.133 0 12.48 0 5.867 0 .307 5.387.307 12s5.56 12 12.173 12c3.573 0 6.267-1.173 8.373-3.36 2.16-2.16 2.84-5.213 2.84-7.667 0-.76-.053-1.467-.173-2.053H12.48z"})}),apple:t=>b.jsx("svg",{role:"img",viewBox:"0 0 24 24",...t,children:b.jsx("path",{d:"M12.152 6.896c-.948 0-2.415-1.078-3.96-1.04-2.04.027-3.91 1.183-4.961 3.014-2.117 3.675-.546 9.103 1.519 12.09 1.013 1.454 2.208 3.09 3.792 3.039 1.52-.065 2.09-.987 3.935-.987 1.831 0 2.35.987 3.96.948 1.637-.026 2.676-1.48 3.676-2.948 1.156-1.688 1.636-3.325 1.662-3.415-.039-.013-3.182-1.221-3.22-4.857-.026-3.04 2.48-4.494 2.597-4.559-1.429-2.09-3.623-2.324-4.39-2.376-2-.156-3.675 1.09-4.61 1.09zM15.53 3.83c.843-1.012 1.4-2.427 1.245-3.83-1.207.052-2.662.805-3.532 1.818-.78.896-1.454 2.338-1.273 3.714 1.338.104 2.715-.688 3.559-1.701",fill:"currentColor"})}),paypal:t=>b.jsx("svg",{role:"img",viewBox:"0 0 24 24",...t,children:b.jsx("path",{d:"M7.076 21.337H2.47a.641.641 0 0 1-.633-.74L4.944.901C5.026.382 5.474 0 5.998 0h7.46c2.57 0 4.578.543 5.69 1.81 1.01 1.15 1.304 2.42 1.012 4.287-.023.143-.047.288-.077.437-.983 5.05-4.349 6.797-8.647 6.797h-2.19c-.524 0-.968.382-1.05.9l-1.12 7.106zm14.146-14.42a3.35 3.35 0 0 0-.607-.541c-.013.076-.026.175-.041.254-.93 4.778-4.005 7.201-9.138 7.201h-2.19a.563.563 0 0 0-.556.479l-1.187 7.527h-.506l-.24 1.516a.56.56 0 0 0 .554.647h3.882c.46 0 .85-.334.922-.788.06-.26.76-4.852.816-5.09a.932.932 0 0 1 .923-.788h.58c3.76 0 6.705-1.528 7.565-5.946.36-1.847.174-3.388-.777-4.471z",fill:"currentColor"})}),spinner:t=>b.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",...t,children:b.jsx("path",{d:"M21 12a9 9 0 1 1-6.219-8.56"})})},F3={email:"",password:""},j3=()=>{const{logIn:t,googleSignIn:e}=vr(),[n,r]=L.useState(F3),i=Ys(),s=async a=>{a.preventDefault();try{console.log("The user info is : ",n),await t(n.email,n.password),i("/edelgram/")}catch(l){console.log("Error: ",l)}},o=async a=>{a.preventDefault();try{await e(),i("/edelgram/")}catch(l){console.log("Error: ",l)}};return b.jsx("div",{className:"bg-slate-800 w-full h-screen",children:b.jsx("div",{className:"container mx-auto p-6 flex h-full",children:b.jsxs("div",{className:"flex justify-center items-center w-full",children:[b.jsx("div",{className:"p-6 w-2/3 hidden lg:block",children:b.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[b.jsx("img",{className:"w-2/3 h-auto aspect-video rounded-3xl place-self-end",src:Oy}),b.jsx("img",{className:"w-2/4 h-auto aspect-auto rounded-3xl",src:Ny}),b.jsx("img",{className:"w-2/4 h-auto aspect-auto rounded-3xl place-self-end",src:Dy}),b.jsx("img",{className:"w-2/3 h-auto aspect-video rounded-3xl",src:Ly})]})}),b.jsx("div",{className:"max-w-sm rounded-xl border bg-card text-card-foreground shadow-sm",children:b.jsx(Md,{children:b.jsxs("form",{onSubmit:s,children:[b.jsxs(Ud,{className:"space-y-1",children:[b.jsx(Vd,{className:"text-2xl",children:"Edelgram"}),b.jsx(Ry,{children:"Enter your email below to create your account"})]}),b.jsxs($d,{className:"grid gap-4",children:[b.jsx("div",{className:"grid",children:b.jsxs(mr,{variant:"outline",onClick:o,children:[b.jsx(bI.google,{className:"mr-2 h-4 w-4"}),"Google"]})}),b.jsxs("div",{className:"relative",children:[b.jsx("div",{className:"absolute inset-0 flex items-center",children:b.jsx("span",{className:"w-full border-t"})}),b.jsx("div",{className:"relative flex justify-center text-xs uppercase",children:b.jsx("span",{className:"bg-background px-2 text-muted-foreground",children:"Or continue with"})})]}),b.jsxs("div",{className:"grid gap-2",children:[b.jsx(Qn,{htmlFor:"email",children:"Email"}),b.jsx(ji,{id:"email",type:"email",placeholder:"edelweisss21@example.com",value:n.email,onChange:a=>r({...n,email:a.target.value})})]}),b.jsxs("div",{className:"grid gap-2",children:[b.jsx(Qn,{htmlFor:"password",children:"Password"}),b.jsx(ji,{id:"password",type:"password",value:n.password,onChange:a=>r({...n,password:a.target.value})})]})]}),b.jsxs(Fd,{className:"flex flex-col",children:[b.jsx(mr,{className:"w-full",type:"submit",children:"Login"}),b.jsxs("p",{className:"mt-3 text-sm text-center",children:["Don't have an account?",b.jsx(su,{to:"/edelgram/signup",children:" Sign up"})]})]})]})})})]})})})},z3=({data:t})=>b.jsx(b.Fragment,{children:t.map(e=>b.jsxs("div",{className:"relative",children:[b.jsx("div",{className:"absolute group transition-all duration-200 bg-transparent hover:bg-slate-950 hover:bg-opacity-75 top-0 bottom-0 left-0 right-0 w-full h-full",children:b.jsxs("div",{className:"flex flex-col justify-center items-center w-full h-full",children:[b.jsx(wI,{className:"hidden group-hover:block fill-white"}),b.jsxs("div",{className:"hidden group-hover:block text-white",children:[e.likes," likes"]})]})}),b.jsx("img",{src:`${e.photos[0].cdnUrl}/-/progressive/yes/-/scale_crop/300x300/center/`})]},e.photos[0].uuid))}),B3=()=>{const{user:t}=vr(),[e,n]=L.useState([]),r=async i=>{try{const s=await x3(i),o=[];s.forEach(a=>{const l=a.data(),c={id:a.id,...l};o.push(c)}),n(o)}catch(s){console.error(s)}};return L.useEffect(()=>{t!==null&&r(t.uid)},[t]),b.jsx(Uu,{children:b.jsx("div",{className:"flex justify-center",children:b.jsxs("div",{className:"border max-w-3xl w-full",children:[b.jsx("h3",{className:"bg-slate-800 text-white text-center text-lg p-2",children:"My Photos"}),b.jsx("div",{className:"p-8",children:b.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-4",children:e?b.jsx(z3,{data:e}):b.jsx("div",{children:"...Loading"})})})]})})})},H3=()=>{const{user:t}=vr(),e=Ys(),n={id:"",userId:t==null?void 0:t.uid,userBio:"Please enter your bio",photoURL:t!=null&&t.photoURL?t.photoURL:"",displayName:t!=null&&t.displayName?t.displayName:"Guest"},[r,i]=L.useState(n);console.log("userInfo",r);const s=async a=>{const l=await m3(a)||{};l.displayName&&i(l),console.log("User Info:",r)},o=()=>{e("/edelgram/profile/edit/",{state:r})};return L.useEffect(()=>{t!==null&&s(t.uid)},[t]),b.jsx(Uu,{children:b.jsx("div",{className:"flex justify-center",children:b.jsxs("div",{className:"border max-w-3xl w-full",children:[b.jsx("h3",{className:"bg-slate-800 text-white text-center text-lg p-2",children:"Profile"}),b.jsxs("div",{className:"p-8 pb-4 border-b",children:[b.jsxs("div",{className:"flex flex-row items-center pb-2",children:[b.jsx("div",{className:"mr-2",children:b.jsx("img",{src:r.photoURL?r.photoURL:Gs,alt:"avatar",className:"w-28 h-28 rounded-full border-2 border-slate-800 object-cover"})}),b.jsxs("div",{children:[b.jsx("div",{className:"text-xl ml-3",children:r.displayName}),b.jsx("div",{className:"text-xl ml-3",children:t!=null&&t.email?t.email:""})]})]}),b.jsx("div",{className:"mb-4",children:r.userBio}),b.jsx("div",{children:b.jsxs(mr,{onClick:o,children:[b.jsx(C3,{className:"mr-2 h-4 w-4"}),"Edit Profile"]})})]})]})})})},W3={email:"",password:"",confirmPassword:""},q3=()=>{const{signUp:t,googleSignIn:e}=vr(),[n,r]=L.useState(W3),i=Ys(),s=async a=>{a.preventDefault();try{console.log("The user info is : ",n),await t(n.email,n.password),i("/edelgram/")}catch(l){console.log("Error: ",l)}},o=async a=>{a.preventDefault();try{await e(),i("/edelgram/")}catch(l){console.log("Error: ",l)}};return b.jsx("div",{className:"bg-slate-800 w-full h-screen",children:b.jsx("div",{className:"container mx-auto p-6 flex h-full",children:b.jsxs("div",{className:"flex justify-center items-center w-full",children:[b.jsx("div",{className:"p-6 w-2/3 hidden lg:block",children:b.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[b.jsx("img",{className:"w-2/3 h-auto aspect-video rounded-3xl place-self-end",src:Oy}),b.jsx("img",{className:"w-2/4 h-auto aspect-auto rounded-3xl",src:Ny}),b.jsx("img",{className:"w-2/4 h-auto aspect-auto rounded-3xl place-self-end",src:Dy}),b.jsx("img",{className:"w-2/3 h-auto aspect-video rounded-3xl",src:Ly})]})}),b.jsx("div",{className:"max-w-sm rounded-xl border bg-card text-card-foreground shadow-sm",children:b.jsx(Md,{children:b.jsxs("form",{onSubmit:s,children:[b.jsxs(Ud,{className:"space-y-1",children:[b.jsx(Vd,{className:"text-2xl",children:"Edelgram"}),b.jsx(Ry,{children:"Enter your email below to create your account"})]}),b.jsxs($d,{className:"grid gap-4",children:[b.jsx("div",{className:"grid",children:b.jsxs(mr,{variant:"outline",onClick:o,children:[b.jsx(bI.google,{className:"mr-2 h-4 w-4"}),"Google"]})}),b.jsxs("div",{className:"relative",children:[b.jsx("div",{className:"absolute inset-0 flex items-center",children:b.jsx("span",{className:"w-full border-t"})}),b.jsx("div",{className:"relative flex justify-center text-xs uppercase",children:b.jsx("span",{className:"bg-background px-2 text-muted-foreground",children:"Or continue with"})})]}),b.jsxs("div",{className:"grid gap-2",children:[b.jsx(Qn,{htmlFor:"email",children:"Email"}),b.jsx(ji,{id:"email",type:"email",placeholder:"edelweisss21@example.com",value:n.email,onChange:a=>r({...n,email:a.target.value})})]}),b.jsxs("div",{className:"grid gap-2",children:[b.jsx(Qn,{htmlFor:"password",children:"Password"}),b.jsx(ji,{id:"password",type:"password",value:n.password,onChange:a=>r({...n,password:a.target.value})})]}),b.jsxs("div",{className:"grid gap-2",children:[b.jsx(Qn,{htmlFor:"confirmpassword",children:"Confirm password"}),b.jsx(ji,{id:"confirmpassword",type:"password",value:n.confirmPassword,onChange:a=>r({...n,confirmPassword:a.target.value})})]})]}),b.jsxs(Fd,{className:"flex flex-col",children:[b.jsx(mr,{className:"w-full",type:"submit",children:"Sign Up"}),b.jsxs("p",{className:"mt-3 text-sm text-center",children:["Already have an account?",b.jsx(su,{to:"/edelgram/login",children:" Login"})]})]})]})})})]})})})};var G3=Object.defineProperty,K3=(t,e,n)=>e in t?G3(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,My=(t,e,n)=>(K3(t,typeof e!="symbol"?e+"":e,n),n);function Q3(t){let e=n=>{var r;for(let i in n)((r=n[i])==null?void 0:r.constructor)===Object&&(n[i]=e(n[i]));return{...n}};return e(t)}var xe=class{constructor(t){t.constructor===Object?this.store=Q3(t):(this._storeIsProxy=!0,this.store=t),this.callbackMap=Object.create(null)}static warn(t,e){console.warn(`Symbiote Data: cannot ${t}. Prop name: `+e)}read(t){return!this._storeIsProxy&&!this.store.hasOwnProperty(t)?(xe.warn("read",t),null):this.store[t]}has(t){return this._storeIsProxy?this.store[t]!==void 0:this.store.hasOwnProperty(t)}add(t,e,n=!1){!n&&Object.keys(this.store).includes(t)||(this.store[t]=e,this.notify(t))}pub(t,e){if(!this._storeIsProxy&&!this.store.hasOwnProperty(t)){xe.warn("publish",t);return}this.store[t]=e,this.notify(t)}multiPub(t){for(let e in t)this.pub(e,t[e])}notify(t){this.callbackMap[t]&&this.callbackMap[t].forEach(e=>{e(this.store[t])})}sub(t,e,n=!0){return!this._storeIsProxy&&!this.store.hasOwnProperty(t)?(xe.warn("subscribe",t),null):(this.callbackMap[t]||(this.callbackMap[t]=new Set),this.callbackMap[t].add(e),n&&e(this.store[t]),{remove:()=>{this.callbackMap[t].delete(e),this.callbackMap[t].size||delete this.callbackMap[t]},callback:e})}static registerCtx(t,e=Symbol()){let n=xe.globalStore.get(e);return n?console.warn('State: context UID "'+e+'" already in use'):(n=new xe(t),xe.globalStore.set(e,n)),n}static deleteCtx(t){xe.globalStore.delete(t)}static getCtx(t,e=!0){return xe.globalStore.get(t)||(e&&console.warn('State: wrong context UID - "'+t+'"'),null)}};xe.globalStore=new Map;var pe=Object.freeze({BIND_ATTR:"set",ATTR_BIND_PRFX:"@",EXT_DATA_CTX_PRFX:"*",NAMED_DATA_CTX_SPLTR:"/",CTX_NAME_ATTR:"ctx-name",CTX_OWNER_ATTR:"ctx-owner",CSS_CTX_PROP:"--ctx-name",EL_REF_ATTR:"ref",AUTO_TAG_PRFX:"sym",REPEAT_ATTR:"repeat",REPEAT_ITEM_TAG_ATTR:"repeat-item-tag",SET_LATER_KEY:"__toSetLater__",USE_TPL:"use-template",ROOT_STYLE_ATTR_NAME:"sym-component"}),TI="1234567890QWERTYUIOPASDFGHJKLZXCVBNMqwertyuiopasdfghjklzxcvbnm",X3=TI.length-1,Vu=class{static generate(t="XXXXXXXXX-XXX"){let e="";for(let n=0;n<t.length;n++)e+=t[n]==="-"?t[n]:TI.charAt(Math.random()*X3);return e}};function CI(t,e,n){let r=!0,i,s=e.split(".");return s.forEach((o,a)=>{a<s.length-1?t=t[o]:i=o}),t?t[i]=n:r=!1,r}function Y3(t){return t.split("-").map((e,n)=>e&&n?e[0].toUpperCase()+e.slice(1):e).join("").split("_").map((e,n)=>e&&n?e.toUpperCase():e).join("")}function J3(t,e){[...t.querySelectorAll(`[${pe.REPEAT_ATTR}]`)].forEach(n=>{let r=n.getAttribute(pe.REPEAT_ITEM_TAG_ATTR),i;if(r&&(i=window.customElements.get(r)),!i){i=class extends e.BaseComponent{constructor(){super(),r||(this.style.display="contents")}};let o=n.innerHTML;i.template=o,i.reg(r)}for(;n.firstChild;)n.firstChild.remove();let s=n.getAttribute(pe.REPEAT_ATTR);e.sub(s,o=>{if(!o){for(;n.firstChild;)n.firstChild.remove();return}let a=[...n.children],l,c=h=>{h.forEach((p,_)=>{if(a[_])if(a[_].set$)setTimeout(()=>{a[_].set$(p)});else for(let w in p)a[_][w]=p[w];else{l||(l=new DocumentFragment);let w=new i;Object.assign(w.init$,p),l.appendChild(w)}}),l&&n.appendChild(l);let f=a.slice(h.length,a.length);for(let p of f)p.remove()};if(o.constructor===Array)c(o);else if(o.constructor===Object){let h=[];for(let f in o){let p=o[f];Object.defineProperty(p,"_KEY_",{value:f,enumerable:!0}),h.push(p)}c(h)}else console.warn("Symbiote repeat data type error:"),console.log(o)}),n.removeAttribute(pe.REPEAT_ATTR),n.removeAttribute(pe.REPEAT_ITEM_TAG_ATTR)})}var Mw="__default__";function Z3(t,e){if(e.shadowRoot)return;let n=[...t.querySelectorAll("slot")];if(!n.length)return;let r={};n.forEach(i=>{let s=i.getAttribute("name")||Mw;r[s]={slot:i,fr:document.createDocumentFragment()}}),e.initChildren.forEach(i=>{var s;let o=Mw;i instanceof Element&&i.hasAttribute("slot")&&(o=i.getAttribute("slot"),i.removeAttribute("slot")),(s=r[o])==null||s.fr.appendChild(i)}),Object.values(r).forEach(i=>{if(i.fr.childNodes.length)i.slot.parentNode.replaceChild(i.fr,i.slot);else if(i.slot.childNodes.length){let s=document.createDocumentFragment();s.append(...i.slot.childNodes),i.slot.parentNode.replaceChild(s,i.slot)}else i.slot.remove()})}function e5(t,e){[...t.querySelectorAll(`[${pe.EL_REF_ATTR}]`)].forEach(n=>{let r=n.getAttribute(pe.EL_REF_ATTR);e.ref[r]=n,n.removeAttribute(pe.EL_REF_ATTR)})}function t5(t,e){[...t.querySelectorAll(`[${pe.BIND_ATTR}]`)].forEach(n=>{let i=n.getAttribute(pe.BIND_ATTR).split(";");[...n.attributes].forEach(s=>{if(s.name.startsWith("-")&&s.value){let o=Y3(s.name.replace("-",""));i.push(o+":"+s.value),n.removeAttribute(s.name)}}),i.forEach(s=>{if(!s)return;let o=s.split(":").map(h=>h.trim()),a=o[0],l;a.indexOf(pe.ATTR_BIND_PRFX)===0&&(l=!0,a=a.replace(pe.ATTR_BIND_PRFX,""));let c=o[1].split(",").map(h=>h.trim());for(let h of c){let f;h.startsWith("!!")?(f="double",h=h.replace("!!","")):h.startsWith("!")&&(f="single",h=h.replace("!","")),e.sub(h,p=>{f==="double"?p=!!p:f==="single"&&(p=!p),l?(p==null?void 0:p.constructor)===Boolean?p?n.setAttribute(a,""):n.removeAttribute(a):n.setAttribute(a,p):CI(n,a,p)||(n[pe.SET_LATER_KEY]||(n[pe.SET_LATER_KEY]=Object.create(null)),n[pe.SET_LATER_KEY][a]=p)})}}),n.removeAttribute(pe.BIND_ATTR)})}var Zc="{{",bl="}}",n5="skip-text";function r5(t){let e,n=[],r=document.createTreeWalker(t,NodeFilter.SHOW_TEXT,{acceptNode:i=>{var s;return!((s=i.parentElement)!=null&&s.hasAttribute(n5))&&i.textContent.includes(Zc)&&i.textContent.includes(bl)&&1}});for(;e=r.nextNode();)n.push(e);return n}var i5=function(t,e){r5(t).forEach(r=>{let i=[],s;for(;r.textContent.includes(bl);)r.textContent.startsWith(Zc)?(s=r.textContent.indexOf(bl)+bl.length,r.splitText(s),i.push(r)):(s=r.textContent.indexOf(Zc),r.splitText(s)),r=r.nextSibling;i.forEach(o=>{let a=o.textContent.replace(Zc,"").replace(bl,"");o.textContent="",e.sub(a,l=>{o.textContent=l})})})},s5=[J3,Z3,e5,t5,i5],zh="'",ga='"',o5=/\\([0-9a-fA-F]{1,6} ?)/g;function a5(t){return(t[0]===ga||t[0]===zh)&&(t[t.length-1]===ga||t[t.length-1]===zh)}function l5(t){return(t[0]===ga||t[0]===zh)&&(t=t.slice(1)),(t[t.length-1]===ga||t[t.length-1]===zh)&&(t=t.slice(0,-1)),t}function u5(t){let e="",n="";for(var r=0;r<t.length;r++){const i=t[r+1];t[r]==="\\"&&i==='"'?(e+='\\"',r++):t[r]==='"'&&n!=="\\"?e+='\\"':e+=t[r],n=t[r]}return e}function c5(t){let e=t;a5(t)&&(e=l5(e),e=e.replace(o5,(n,r)=>String.fromCodePoint(parseInt(r.trim(),16))),e=e.replaceAll(`\\
`,"\\n"),e=u5(e),e=ga+e+ga);try{return JSON.parse(e)}catch{throw new Error(`Failed to parse CSS property value: ${e}. Original input: ${t}`)}}var Uw=0,vo=null,xr=null,gi=class extends HTMLElement{constructor(){super(),My(this,"updateCssData",()=>{var t;this.dropCssDataCache(),(t=this.__boundCssProps)==null||t.forEach(e=>{let n=this.getCssData(this.__extractCssName(e),!0);n!==null&&this.$[e]!==n&&(this.$[e]=n)})}),this.init$=Object.create(null),this.cssInit$=Object.create(null),this.tplProcessors=new Set,this.ref=Object.create(null),this.allSubs=new Set,this.pauseRender=!1,this.renderShadow=!1,this.readyToDestroy=!0,this.processInnerHtml=!1,this.allowCustomTemplate=!1,this.ctxOwner=!1}get BaseComponent(){return gi}initCallback(){}__initCallback(){var t;this.__initialized||(this.__initialized=!0,(t=this.initCallback)==null||t.call(this))}render(t,e=this.renderShadow){let n;if((e||this.constructor.__shadowStylesUrl)&&!this.shadowRoot&&this.attachShadow({mode:"open"}),this.allowCustomTemplate){let i=this.getAttribute(pe.USE_TPL);if(i){let s=this.getRootNode(),o=(s==null?void 0:s.querySelector(i))||document.querySelector(i);o?t=o.content.cloneNode(!0):console.warn(`Symbiote template "${i}" is not found...`)}}if(this.processInnerHtml)for(let i of this.tplProcessors)i(this,this);if(t||this.constructor.template){if(this.constructor.template&&!this.constructor.__tpl&&(this.constructor.__tpl=document.createElement("template"),this.constructor.__tpl.innerHTML=this.constructor.template),(t==null?void 0:t.constructor)===DocumentFragment)n=t;else if((t==null?void 0:t.constructor)===String){let i=document.createElement("template");i.innerHTML=t,n=i.content.cloneNode(!0)}else this.constructor.__tpl&&(n=this.constructor.__tpl.content.cloneNode(!0));for(let i of this.tplProcessors)i(n,this)}let r=()=>{n&&(e&&this.shadowRoot.appendChild(n)||this.appendChild(n)),this.__initCallback()};if(this.constructor.__shadowStylesUrl){e=!0;let i=document.createElement("link");i.rel="stylesheet",i.href=this.constructor.__shadowStylesUrl,i.onload=r,this.shadowRoot.prepend(i)}else r()}addTemplateProcessor(t){this.tplProcessors.add(t)}get autoCtxName(){return this.__autoCtxName||(this.__autoCtxName=Vu.generate(),this.style.setProperty(pe.CSS_CTX_PROP,`'${this.__autoCtxName}'`)),this.__autoCtxName}get cssCtxName(){return this.getCssData(pe.CSS_CTX_PROP,!0)}get ctxName(){var t;let e=((t=this.getAttribute(pe.CTX_NAME_ATTR))==null?void 0:t.trim())||this.cssCtxName||this.__cachedCtxName||this.autoCtxName;return this.__cachedCtxName=e,e}get localCtx(){return this.__localCtx||(this.__localCtx=xe.registerCtx({},this)),this.__localCtx}get nodeCtx(){return xe.getCtx(this.ctxName,!1)||xe.registerCtx({},this.ctxName)}static __parseProp(t,e){let n,r;if(t.startsWith(pe.EXT_DATA_CTX_PRFX))n=e.nodeCtx,r=t.replace(pe.EXT_DATA_CTX_PRFX,"");else if(t.includes(pe.NAMED_DATA_CTX_SPLTR)){let i=t.split(pe.NAMED_DATA_CTX_SPLTR);n=xe.getCtx(i[0]),r=i[1]}else n=e.localCtx,r=t;return{ctx:n,name:r}}sub(t,e,n=!0){let r=s=>{this.isConnected&&e(s)},i=gi.__parseProp(t,this);i.ctx.has(i.name)?this.allSubs.add(i.ctx.sub(i.name,r,n)):window.setTimeout(()=>{this.allSubs.add(i.ctx.sub(i.name,r,n))})}notify(t){let e=gi.__parseProp(t,this);e.ctx.notify(e.name)}has(t){let e=gi.__parseProp(t,this);return e.ctx.has(e.name)}add(t,e,n=!1){let r=gi.__parseProp(t,this);r.ctx.add(r.name,e,n)}add$(t,e=!1){for(let n in t)this.add(n,t[n],e)}get $(){if(!this.__stateProxy){let t=Object.create(null);this.__stateProxy=new Proxy(t,{set:(e,n,r)=>{let i=gi.__parseProp(n,this);return i.ctx.pub(i.name,r),!0},get:(e,n)=>{let r=gi.__parseProp(n,this);return r.ctx.read(r.name)}})}return this.__stateProxy}set$(t,e=!1){for(let n in t){let r=t[n];e||![String,Number,Boolean].includes(r==null?void 0:r.constructor)?this.$[n]=r:this.$[n]!==r&&(this.$[n]=r)}}get __ctxOwner(){return this.ctxOwner||this.hasAttribute(pe.CTX_OWNER_ATTR)&&this.getAttribute(pe.CTX_OWNER_ATTR)!=="false"}__initDataCtx(){let t=this.constructor.__attrDesc;if(t)for(let e of Object.values(t))Object.keys(this.init$).includes(e)||(this.init$[e]="");for(let e in this.init$)if(e.startsWith(pe.EXT_DATA_CTX_PRFX))this.nodeCtx.add(e.replace(pe.EXT_DATA_CTX_PRFX,""),this.init$[e],this.__ctxOwner);else if(e.includes(pe.NAMED_DATA_CTX_SPLTR)){let n=e.split(pe.NAMED_DATA_CTX_SPLTR),r=n[0].trim(),i=n[1].trim();if(r&&i){let s=xe.getCtx(r,!1);s||(s=xe.registerCtx({},r)),s.add(i,this.init$[e])}}else this.localCtx.add(e,this.init$[e]);for(let e in this.cssInit$)this.bindCssData(e,this.cssInit$[e]);this.__dataCtxInitialized=!0}connectedCallback(){var t;if(this.isConnected){if(this.__disconnectTimeout&&window.clearTimeout(this.__disconnectTimeout),!this.connectedOnce){let e=(t=this.getAttribute(pe.CTX_NAME_ATTR))==null?void 0:t.trim();if(e&&this.style.setProperty(pe.CSS_CTX_PROP,`'${e}'`),this.__initDataCtx(),this[pe.SET_LATER_KEY]){for(let n in this[pe.SET_LATER_KEY])CI(this,n,this[pe.SET_LATER_KEY][n]);delete this[pe.SET_LATER_KEY]}this.initChildren=[...this.childNodes];for(let n of s5)this.addTemplateProcessor(n);if(this.pauseRender)this.__initCallback();else if(this.constructor.__rootStylesLink){let n=this.getRootNode();if(!n)return;if(n==null?void 0:n.querySelector(`link[${pe.ROOT_STYLE_ATTR_NAME}="${this.constructor.is}"]`)){this.render();return}let i=this.constructor.__rootStylesLink.cloneNode(!0);i.setAttribute(pe.ROOT_STYLE_ATTR_NAME,this.constructor.is),i.onload=()=>{this.render()},n.nodeType===Node.DOCUMENT_NODE?n.head.appendChild(i):n.prepend(i)}else this.render()}this.connectedOnce=!0}}destroyCallback(){}disconnectedCallback(){this.connectedOnce&&(this.dropCssDataCache(),this.readyToDestroy&&(this.__disconnectTimeout&&window.clearTimeout(this.__disconnectTimeout),this.__disconnectTimeout=window.setTimeout(()=>{this.destroyCallback();for(let t of this.allSubs)t.remove(),this.allSubs.delete(t);for(let t of this.tplProcessors)this.tplProcessors.delete(t);xr==null||xr.delete(this.updateCssData),xr!=null&&xr.size||(vo==null||vo.disconnect(),vo=null,xr=null)},100)))}static reg(t,e=!1){t||(Uw++,t=`${pe.AUTO_TAG_PRFX}-${Uw}`),this.__tag=t;let n=window.customElements.get(t);if(n){!e&&n!==this&&console.warn([`Element with tag name "${t}" already registered.`,`You're trying to override it with another class "${this.name}".`,"This is most likely a mistake.","New element will not be registered."].join(`
`));return}window.customElements.define(t,e?class extends this{}:this)}static get is(){return this.__tag||this.reg(),this.__tag}static bindAttributes(t){this.observedAttributes=Object.keys(t),this.__attrDesc=t}attributeChangedCallback(t,e,n){var r;if(e===n)return;let i=(r=this.constructor.__attrDesc)==null?void 0:r[t];i?this.__dataCtxInitialized?this.$[i]=n:this.init$[i]=n:this[t]=n}getCssData(t,e=!1){if(this.__cssDataCache||(this.__cssDataCache=Object.create(null)),!Object.keys(this.__cssDataCache).includes(t)){this.__computedStyle||(this.__computedStyle=window.getComputedStyle(this));let n=this.__computedStyle.getPropertyValue(t).trim();try{this.__cssDataCache[t]=c5(n)}catch{!e&&console.warn(`CSS Data error: ${t}`),this.__cssDataCache[t]=null}}return this.__cssDataCache[t]}__extractCssName(t){return t.split("--").map((e,n)=>n===0?"":e).join("--")}__initStyleAttrObserver(){xr||(xr=new Set),xr.add(this.updateCssData),vo||(vo=new MutationObserver(t=>{t[0].type==="attributes"&&xr.forEach(e=>{e()})}),vo.observe(document,{childList:!0,subtree:!0,attributes:!0,attributeFilter:["style"]}))}bindCssData(t,e=""){this.__boundCssProps||(this.__boundCssProps=new Set),this.__boundCssProps.add(t);let n=this.getCssData(this.__extractCssName(t),!0);n===null&&(n=e),this.add(t,n),this.__initStyleAttrObserver()}dropCssDataCache(){this.__cssDataCache=null,this.__computedStyle=null}defineAccessor(t,e,n){let r="__"+t;this[r]=this[t],Object.defineProperty(this,t,{set:i=>{this[r]=i,n?window.setTimeout(()=>{e==null||e(i)}):e==null||e(i)},get:()=>this[r]}),this[t]=this[r]}static set shadowStyles(t){let e=new Blob([t],{type:"text/css"});this.__shadowStylesUrl=URL.createObjectURL(e)}static set rootStyles(t){if(!this.__rootStylesLink){let e=new Blob([t],{type:"text/css"}),n=URL.createObjectURL(e),r=document.createElement("link");r.href=n,r.rel="stylesheet",this.__rootStylesLink=r}}},zd=gi;My(zd,"template");function II(t,e){for(let n in e)n.includes("-")?t.style.setProperty(n,e[n]):t.style[n]=e[n]}function h5(t,e){for(let n in e)e[n].constructor===Boolean?e[n]?t.setAttribute(n,""):t.removeAttribute(n):t.setAttribute(n,e[n])}function Uy(t={tag:"div"}){let e=document.createElement(t.tag);if(t.attributes&&h5(e,t.attributes),t.styles&&II(e,t.styles),t.properties)for(let n in t.properties)e[n]=t.properties[n];return t.processors&&t.processors.forEach(n=>{n(e)}),t.children&&t.children.forEach(n=>{let r=Uy(n);e.appendChild(r)}),e}var SI="idb-store-ready",d5="symbiote-db",f5="symbiote-idb-update_",p5=class{_notifyWhenReady(t=null){window.dispatchEvent(new CustomEvent(SI,{detail:{dbName:this.name,storeName:this.storeName,event:t}}))}get _updEventName(){return f5+this.name}_getUpdateEvent(t){return new CustomEvent(this._updEventName,{detail:{key:this.name,newValue:t}})}_notifySubscribers(t){window.localStorage.removeItem(this.name),window.localStorage.setItem(this.name,t),window.dispatchEvent(this._getUpdateEvent(t))}constructor(t,e){this.name=t,this.storeName=e,this.version=1,this.request=window.indexedDB.open(this.name,this.version),this.request.onupgradeneeded=n=>{this.db=n.target.result,this.objStore=this.db.createObjectStore(e,{keyPath:"_key"}),this.objStore.transaction.oncomplete=r=>{this._notifyWhenReady(r)}},this.request.onsuccess=n=>{this.db=n.target.result,this._notifyWhenReady(n)},this.request.onerror=n=>{console.error(n)},this._subscriptionsMap={},this._updateHandler=n=>{n.key===this.name&&this._subscriptionsMap[n.newValue]&&this._subscriptionsMap[n.newValue].forEach(async i=>{i(await this.read(n.newValue))})},this._localUpdateHandler=n=>{this._updateHandler(n.detail)},window.addEventListener("storage",this._updateHandler),window.addEventListener(this._updEventName,this._localUpdateHandler)}read(t){let n=this.db.transaction(this.storeName,"readwrite").objectStore(this.storeName).get(t);return new Promise((r,i)=>{n.onsuccess=s=>{var o;(o=s.target.result)!=null&&o._value?r(s.target.result._value):(r(null),console.warn(`IDB: cannot read "${t}"`))},n.onerror=s=>{i(s)}})}write(t,e,n=!1){let r={_key:t,_value:e},s=this.db.transaction(this.storeName,"readwrite").objectStore(this.storeName).put(r);return new Promise((o,a)=>{s.onsuccess=l=>{n||this._notifySubscribers(t),o(l.target.result)},s.onerror=l=>{a(l)}})}delete(t,e=!1){let r=this.db.transaction(this.storeName,"readwrite").objectStore(this.storeName).delete(t);return new Promise((i,s)=>{r.onsuccess=o=>{e||this._notifySubscribers(t),i(o)},r.onerror=o=>{s(o)}})}getAll(){let e=this.db.transaction(this.storeName,"readwrite").objectStore(this.storeName).getAll();return new Promise((n,r)=>{e.onsuccess=i=>{let s=i.target.result;n(s.map(o=>o._value))},e.onerror=i=>{r(i)}})}subscribe(t,e){this._subscriptionsMap[t]||(this._subscriptionsMap[t]=new Set);let n=this._subscriptionsMap[t];return n.add(e),{remove:()=>{n.delete(e),n.size||delete this._subscriptionsMap[t]}}}stop(){window.removeEventListener("storage",this._updateHandler),this._subscriptionsMap=null,AI.clear(this.name)}},AI=class{static get readyEventName(){return SI}static open(t=d5,e="store"){let n=t+"/"+e;return this._reg[n]||(this._reg[n]=new p5(t,e)),this._reg[n]}static clear(t){window.indexedDB.deleteDatabase(t);for(let e in this._reg)e.split("/")[0]===t&&delete this._reg[e]}};My(AI,"_reg",Object.create(null));const m5=20,tt=Object.freeze({FILE_ADDED:"file-added",FILE_REMOVED:"file-removed",FILE_UPLOAD_START:"file-upload-start",FILE_UPLOAD_PROGRESS:"file-upload-progress",FILE_UPLOAD_SUCCESS:"file-upload-success",FILE_UPLOAD_FAILED:"file-upload-failed",FILE_URL_CHANGED:"file-url-changed",MODAL_OPEN:"modal-open",MODAL_CLOSE:"modal-close",DONE_CLICK:"done-click",UPLOAD_CLICK:"upload-click",ACTIVITY_CHANGE:"activity-change",COMMON_UPLOAD_START:"common-upload-start",COMMON_UPLOAD_PROGRESS:"common-upload-progress",COMMON_UPLOAD_SUCCESS:"common-upload-success",COMMON_UPLOAD_FAILED:"common-upload-failed",CHANGE:"change",GROUP_CREATED:"group-created"});class g5{constructor(e){U(this,"_timeoutStore",new Map);U(this,"_targets",new Set);U(this,"_debugPrint",null);this._debugPrint=e}bindTarget(e){this._targets.add(e)}unbindTarget(e){this._targets.delete(e)}_dispatch(e,n){var r;for(const i of this._targets)i.dispatchEvent(new CustomEvent(e,{detail:n}));(r=this._debugPrint)==null||r.call(this,()=>{const i=n&&typeof n=="object"?{...n}:n;return[`event "${e}"`,i]})}emit(e,n,{debounce:r}={}){if(typeof r!="number"&&!r){this._dispatch(e,typeof n=="function"?n():n);return}this._timeoutStore.has(e)&&window.clearTimeout(this._timeoutStore.get(e));const i=typeof r=="number"?r:m5,s=window.setTimeout(()=>{this._dispatch(e,typeof n=="function"?n():n),this._timeoutStore.delete(e)},i);this._timeoutStore.set(e,s)}}function Mn(t,e){let n;const r=(...i)=>{clearTimeout(n),n=setTimeout(()=>t(...i),e)};return r.cancel=()=>{clearTimeout(n)},r}const Vw="--uploadcare-blocks-window-height";class Bh{static registerClient(e){this.clientsRegistry.size===0&&this.attachTracker(),this.clientsRegistry.add(e)}static unregisterClient(e){this.clientsRegistry.delete(e),this.clientsRegistry.size===0&&this.detachTracker()}static attachTracker(){window.addEventListener("resize",this.flush,{passive:!0,capture:!0}),this.flush()}static detachTracker(){window.removeEventListener("resize",this.flush,{capture:!0}),document.documentElement.style.removeProperty(Vw)}}U(Bh,"clientsRegistry",new Set),U(Bh,"flush",Mn(()=>{document.documentElement.style.setProperty(Vw,`${window.innerHeight}px`)},100));const y5=t=>{var r;const e=new Intl.Locale(t);let n="ltr";return typeof e.getTextInfo=="function"&&e.getTextInfo().direction?n=e.getTextInfo().direction:"textInfo"in e&&((r=e.textInfo)!=null&&r.direction)&&(n=e.textInfo.direction),n},xI=(t,e)=>new Intl.PluralRules(t).select(e),v5=t=>t,km="{{",kI="}}",$w="plural:";function Pm(t,e,n={}){var o;let{openToken:r=km,closeToken:i=kI,transform:s=v5}=n;for(let a in e){let l=(o=e[a])==null?void 0:o.toString();t=t.replaceAll(r+a+i,typeof l=="string"?s(l):l)}return t}function _5(t){const e=[];let n=t.indexOf(km);for(;n!==-1;){const r=t.indexOf(kI,n),i=t.substring(n+2,r);if(i.startsWith($w)){const s=t.substring(n+2,r).replace($w,""),o=s.substring(0,s.indexOf("(")),a=s.substring(s.indexOf("(")+1,s.indexOf(")"));e.push({variable:i,pluralKey:o,countVariable:a})}n=t.indexOf(km,r)}return e}const w5=({element:t,attribute:e,onSuccess:n,onTimeout:r,timeout:i=300})=>{const s=t.getAttribute(e);if(s!==null){n(s);return}const o=new MutationObserver(c=>{const h=c[c.length-1];l(h)});o.observe(t,{attributes:!0,attributeFilter:[e]});const a=setTimeout(()=>{o.disconnect(),r()},i),l=c=>{const h=t.getAttribute(e);c.type==="attributes"&&c.attributeName===e&&h!==null&&(clearTimeout(a),o.disconnect(),n(h))}};function Fw(t){return Object.prototype.toString.call(t)==="[object Object]"}const E5=/\W|_/g;function b5(t){return t.split(E5).map((e,n)=>e.charAt(0)[n>0?"toUpperCase":"toLowerCase"]()+e.slice(1)).join("")}function jw(t,{ignoreKeys:e}={ignoreKeys:[]}){return Array.isArray(t)?t.map(n=>ni(n,{ignoreKeys:e})):t}function ni(t,{ignoreKeys:e}={ignoreKeys:[]}){if(Array.isArray(t))return jw(t,{ignoreKeys:e});if(!Fw(t))return t;const n={};for(const r of Object.keys(t)){let i=t[r];if(e.includes(r)){n[r]=i;continue}Fw(i)?i=ni(i,{ignoreKeys:e}):Array.isArray(i)&&(i=jw(i,{ignoreKeys:e})),n[b5(r)]=i}return n}const T5=t=>new Promise(e=>setTimeout(e,t));function PI({libraryName:t,libraryVersion:e,userAgent:n,publicKey:r="",integration:i=""}){const s="JavaScript";if(typeof n=="string")return n;if(typeof n=="function")return n({publicKey:r,libraryName:t,libraryVersion:e,languageName:s,integration:i});const o=[t,e,r].filter(Boolean).join("/"),a=[s,i].filter(Boolean).join("; ");return`${o} (${a})`}const C5={factor:2,time:100};function I5(t,e=C5){let n=0;function r(i){const s=Math.round(e.time*e.factor**n);return i({attempt:n,retry:a=>T5(a??s).then(()=>(n+=1,r(i)))})}return r(t)}class Vy extends Error{}class $u extends Vy{constructor(n){super();U(this,"originalProgressEvent");this.name="NetworkError",this.message="Network error",Object.setPrototypeOf(this,$u.prototype),this.originalProgressEvent=n}}const Bd=(t,e)=>{t&&(t.aborted?Promise.resolve().then(e):t.addEventListener("abort",()=>e(),{once:!0}))};class Ks extends Vy{constructor(n="Request canceled"){super(n);U(this,"isCancel",!0);this.name="CancelError",Object.setPrototypeOf(this,Ks.prototype)}}const S5=500,RI=({check:t,interval:e=S5,timeout:n,signal:r})=>new Promise((i,s)=>{let o,a;Bd(r,()=>{o&&clearTimeout(o),s(new Ks("Poll cancelled"))}),n&&(a=setTimeout(()=>{o&&clearTimeout(o),s(new Ks("Timed out"))},n));const l=()=>{try{Promise.resolve(t(r)).then(c=>{c?(a&&clearTimeout(a),i(c)):o=setTimeout(l,e)}).catch(c=>{a&&clearTimeout(a),s(c)})}catch(c){a&&clearTimeout(a),s(c)}};o=setTimeout(l,0)}),Te={baseCDN:"https://ucarecdn.com",baseURL:"https://upload.uploadcare.com",maxContentLength:50*1024*1024,retryThrottledRequestMaxTimes:1,retryNetworkErrorMaxTimes:3,multipartMinFileSize:25*1024*1024,multipartChunkSize:5*1024*1024,multipartMinLastPartSize:1024*1024,maxConcurrentRequests:4,pollingTimeoutMilliseconds:1e4,pusherKey:"79ae88bd931ea68464d9"},Hd="application/octet-stream",NI="original",as=({method:t,url:e,data:n,headers:r={},signal:i,onProgress:s})=>new Promise((o,a)=>{const l=new XMLHttpRequest,c=(t==null?void 0:t.toUpperCase())||"GET";let h=!1;l.open(c,e,!0),r&&Object.entries(r).forEach(f=>{const[p,_]=f;typeof _<"u"&&!Array.isArray(_)&&l.setRequestHeader(p,_)}),l.responseType="text",Bd(i,()=>{h=!0,l.abort(),a(new Ks)}),l.onload=()=>{if(l.status!=200)a(new Error(`Error ${l.status}: ${l.statusText}`));else{const f={method:c,url:e,data:n,headers:r||void 0,signal:i,onProgress:s},p=l.getAllResponseHeaders().trim().split(/[\r\n]+/),_={};p.forEach(function(R){const C=R.split(": "),E=C.shift(),S=C.join(": ");E&&typeof E<"u"&&(_[E]=S)});const w=l.response,I=l.status;o({request:f,data:w,headers:_,status:I})}},l.onerror=f=>{h||a(new $u(f))},s&&typeof s=="function"&&(l.upload.onprogress=f=>{f.lengthComputable?s({isComputable:!0,value:f.loaded/f.total}):s({isComputable:!1})}),n?l.send(n):l.send()});function A5(t,...e){return t}const x5=({name:t})=>t?[t]:[],k5=A5;var P5=()=>new FormData;const OI=t=>!1,Wd=t=>typeof Blob<"u"&&t instanceof Blob,qd=t=>typeof File<"u"&&t instanceof File,Gd=t=>!!t&&typeof t=="object"&&!Array.isArray(t)&&"uri"in t&&typeof t.uri=="string",Ra=t=>Wd(t)||qd(t)||OI()||Gd(t),R5=t=>typeof t=="string"||typeof t=="number"||typeof t>"u",N5=t=>!!t&&typeof t=="object"&&!Array.isArray(t),O5=t=>!!t&&typeof t=="object"&&"data"in t&&Ra(t.data);function LI(t,e,n){if(Array.isArray(n))for(const r of n)LI(t,`${e}[]`,r);else if(O5(n)){const{name:r,contentType:i}=n,s=k5(n.data,r,i??Hd),o=x5({name:r,contentType:i});t.push([e,s,...o])}else if(N5(n))for(const[r,i]of Object.entries(n))typeof i<"u"&&t.push([`${e}[${r}]`,String(i)]);else R5(n)&&n&&t.push([e,n.toString()])}function L5(t){const e=[];for(const[n,r]of Object.entries(t))LI(e,n,r);return e}function Kd(t){const e=P5(),n=L5(t);for(const r of n){const[i,s,...o]=r;e.append(i,s,...o)}return e}class cn extends Vy{constructor(n,r,i,s,o){super();U(this,"code");U(this,"request");U(this,"response");U(this,"headers");this.name="UploadError",this.message=n,this.code=r,this.request=i,this.response=s,this.headers=o,Object.setPrototypeOf(this,cn.prototype)}}const D5=t=>{const e=new URLSearchParams;for(const[n,r]of Object.entries(t))r&&typeof r=="object"&&!Array.isArray(r)?Object.entries(r).filter(i=>i[1]??!1).forEach(i=>e.set(`${n}[${i[0]}]`,String(i[1]))):Array.isArray(r)?r.forEach(i=>{e.append(`${n}[]`,i)}):typeof r=="string"&&r?e.set(n,r):typeof r=="number"&&e.set(n,r.toString());return e.toString()},Xr=(t,e,n)=>{const r=new URL(t);return r.pathname=(r.pathname+e).replace("//","/"),n&&(r.search=D5(n)),r.toString()};var M5="6.14.1";const U5="UploadcareUploadClient",V5=M5;function no(t){return PI({libraryName:U5,libraryVersion:V5,...t})}const $5="RequestThrottledError",zw=15e3,F5=1e3;function j5(t){const{headers:e}=t||{};if(!e||typeof e["retry-after"]!="string")return zw;const n=parseInt(e["retry-after"],10);return Number.isFinite(n)?n*1e3:zw}function ls(t,e){const{retryThrottledRequestMaxTimes:n,retryNetworkErrorMaxTimes:r}=e;return I5(({attempt:i,retry:s})=>t().catch(o=>{if("response"in o&&(o==null?void 0:o.code)===$5&&i<n)return s(j5(o));if(o instanceof $u&&i<r)return s((i+1)*F5);throw o}))}const DI=t=>{let e="";return(Wd(t)||qd(t)||Gd(t))&&(e=t.type),e||Hd},MI=t=>{let e="";return qd(t)&&t.name?e=t.name:Wd(t)||OI()?e="":Gd(t)&&t.name&&(e=t.name),e||NI};function $y(t){return typeof t>"u"||t==="auto"?"auto":t?"1":"0"}function z5(t,{publicKey:e,fileName:n,contentType:r,baseURL:i=Te.baseURL,secureSignature:s,secureExpire:o,store:a,signal:l,onProgress:c,source:h="local",integration:f,userAgent:p,retryThrottledRequestMaxTimes:_=Te.retryThrottledRequestMaxTimes,retryNetworkErrorMaxTimes:w=Te.retryNetworkErrorMaxTimes,metadata:I}){return ls(()=>as({method:"POST",url:Xr(i,"/base/",{jsonerrors:1}),headers:{"X-UC-User-Agent":no({publicKey:e,integration:f,userAgent:p})},data:Kd({file:{data:t,name:n||MI(t),contentType:r||DI(t)},UPLOADCARE_PUB_KEY:e,UPLOADCARE_STORE:$y(a),signature:s,expire:o,source:h,metadata:I}),signal:l,onProgress:c}).then(({data:R,headers:C,request:E})=>{const S=ni(JSON.parse(R));if("error"in S)throw new cn(S.error.content,S.error.errorCode,E,S,C);return S}),{retryNetworkErrorMaxTimes:w,retryThrottledRequestMaxTimes:_})}var Rm;(function(t){t.Token="token",t.FileInfo="file_info"})(Rm||(Rm={}));function B5(t,{publicKey:e,baseURL:n=Te.baseURL,store:r,fileName:i,checkForUrlDuplicates:s,saveUrlForRecurrentUploads:o,secureSignature:a,secureExpire:l,source:c="url",signal:h,integration:f,userAgent:p,retryThrottledRequestMaxTimes:_=Te.retryThrottledRequestMaxTimes,retryNetworkErrorMaxTimes:w=Te.retryNetworkErrorMaxTimes,metadata:I}){return ls(()=>as({method:"POST",headers:{"X-UC-User-Agent":no({publicKey:e,integration:f,userAgent:p})},url:Xr(n,"/from_url/",{jsonerrors:1,pub_key:e,source_url:t,store:$y(r),filename:i,check_URL_duplicates:s?1:void 0,save_URL_duplicates:o?1:void 0,signature:a,expire:l,source:c,metadata:I}),signal:h}).then(({data:R,headers:C,request:E})=>{const S=ni(JSON.parse(R));if("error"in S)throw new cn(S.error.content,S.error.errorCode,E,S,C);return S}),{retryNetworkErrorMaxTimes:w,retryThrottledRequestMaxTimes:_})}var sn;(function(t){t.Unknown="unknown",t.Waiting="waiting",t.Progress="progress",t.Error="error",t.Success="success"})(sn||(sn={}));const H5=t=>"status"in t&&t.status===sn.Error;function W5(t,{publicKey:e,baseURL:n=Te.baseURL,signal:r,integration:i,userAgent:s,retryThrottledRequestMaxTimes:o=Te.retryThrottledRequestMaxTimes,retryNetworkErrorMaxTimes:a=Te.retryNetworkErrorMaxTimes}={}){return ls(()=>as({method:"GET",headers:e?{"X-UC-User-Agent":no({publicKey:e,integration:i,userAgent:s})}:void 0,url:Xr(n,"/from_url/status/",{jsonerrors:1,token:t}),signal:r}).then(({data:l,headers:c,request:h})=>{const f=ni(JSON.parse(l));if("error"in f&&!H5(f))throw new cn(f.error.content,f.error.errorCode,h,f,c);return f}),{retryNetworkErrorMaxTimes:a,retryThrottledRequestMaxTimes:o})}function q5(t,{publicKey:e,baseURL:n=Te.baseURL,jsonpCallback:r,secureSignature:i,secureExpire:s,signal:o,source:a,integration:l,userAgent:c,retryThrottledRequestMaxTimes:h=Te.retryThrottledRequestMaxTimes,retryNetworkErrorMaxTimes:f=Te.retryNetworkErrorMaxTimes}){return ls(()=>as({method:"POST",headers:{"X-UC-User-Agent":no({publicKey:e,integration:l,userAgent:c})},url:Xr(n,"/group/",{jsonerrors:1}),data:Kd({files:t,callback:r,pub_key:e,signature:i,expire:s,source:a}),signal:o}).then(({data:p,headers:_,request:w})=>{const I=ni(JSON.parse(p));if("error"in I)throw new cn(I.error.content,I.error.errorCode,w,I,_);return I}),{retryNetworkErrorMaxTimes:f,retryThrottledRequestMaxTimes:h})}function UI(t,{publicKey:e,baseURL:n=Te.baseURL,signal:r,source:i,integration:s,userAgent:o,retryThrottledRequestMaxTimes:a=Te.retryThrottledRequestMaxTimes,retryNetworkErrorMaxTimes:l=Te.retryNetworkErrorMaxTimes}){return ls(()=>as({method:"GET",headers:{"X-UC-User-Agent":no({publicKey:e,integration:s,userAgent:o})},url:Xr(n,"/info/",{jsonerrors:1,pub_key:e,file_id:t,source:i}),signal:r}).then(({data:c,headers:h,request:f})=>{const p=ni(JSON.parse(c));if("error"in p)throw new cn(p.error.content,p.error.errorCode,f,p,h);return p}),{retryThrottledRequestMaxTimes:a,retryNetworkErrorMaxTimes:l})}function G5(t,{publicKey:e,contentType:n,fileName:r,multipartChunkSize:i=Te.multipartChunkSize,baseURL:s="",secureSignature:o,secureExpire:a,store:l,signal:c,source:h="local",integration:f,userAgent:p,retryThrottledRequestMaxTimes:_=Te.retryThrottledRequestMaxTimes,retryNetworkErrorMaxTimes:w=Te.retryNetworkErrorMaxTimes,metadata:I}){return ls(()=>as({method:"POST",url:Xr(s,"/multipart/start/",{jsonerrors:1}),headers:{"X-UC-User-Agent":no({publicKey:e,integration:f,userAgent:p})},data:Kd({filename:r||NI,size:t,content_type:n||Hd,part_size:i,UPLOADCARE_STORE:$y(l),UPLOADCARE_PUB_KEY:e,signature:o,expire:a,source:h,metadata:I}),signal:c}).then(({data:R,headers:C,request:E})=>{const S=ni(JSON.parse(R));if("error"in S)throw new cn(S.error.content,S.error.errorCode,E,S,C);return S.parts=Object.keys(S.parts).map(D=>S.parts[Number(D)]),S}),{retryThrottledRequestMaxTimes:_,retryNetworkErrorMaxTimes:w})}function K5(t,e,{contentType:n,signal:r,onProgress:i,retryThrottledRequestMaxTimes:s=Te.retryThrottledRequestMaxTimes,retryNetworkErrorMaxTimes:o=Te.retryNetworkErrorMaxTimes}){return ls(()=>as({method:"PUT",url:e,data:t,onProgress:i,signal:r,headers:{"Content-Type":n||Hd}}).then(a=>(i&&i({isComputable:!0,value:1}),a)).then(({status:a})=>({code:a})),{retryThrottledRequestMaxTimes:s,retryNetworkErrorMaxTimes:o})}function Q5(t,{publicKey:e,baseURL:n=Te.baseURL,source:r="local",signal:i,integration:s,userAgent:o,retryThrottledRequestMaxTimes:a=Te.retryThrottledRequestMaxTimes,retryNetworkErrorMaxTimes:l=Te.retryNetworkErrorMaxTimes}){return ls(()=>as({method:"POST",url:Xr(n,"/multipart/complete/",{jsonerrors:1}),headers:{"X-UC-User-Agent":no({publicKey:e,integration:s,userAgent:o})},data:Kd({uuid:t,UPLOADCARE_PUB_KEY:e,source:r}),signal:i}).then(({data:c,headers:h,request:f})=>{const p=ni(JSON.parse(c));if("error"in p)throw new cn(p.error.content,p.error.errorCode,f,p,h);return p}),{retryThrottledRequestMaxTimes:a,retryNetworkErrorMaxTimes:l})}function Fy(t,{publicKey:e,baseURL:n,source:r,integration:i,userAgent:s,retryThrottledRequestMaxTimes:o,retryNetworkErrorMaxTimes:a,signal:l,onProgress:c}){return RI({check:h=>UI(t,{publicKey:e,baseURL:n,signal:h,source:r,integration:i,userAgent:s,retryThrottledRequestMaxTimes:o,retryNetworkErrorMaxTimes:a}).then(f=>f.isReady?f:(c&&c({isComputable:!0,value:1}),!1)),signal:l})}function X5(t){return"defaultEffects"in t}class Na{constructor(e,{baseCDN:n=Te.baseCDN,fileName:r}={}){U(this,"uuid");U(this,"name",null);U(this,"size",null);U(this,"isStored",null);U(this,"isImage",null);U(this,"mimeType",null);U(this,"cdnUrl",null);U(this,"s3Url",null);U(this,"originalFilename",null);U(this,"imageInfo",null);U(this,"videoInfo",null);U(this,"contentInfo",null);U(this,"metadata",null);U(this,"s3Bucket",null);U(this,"defaultEffects",null);const{uuid:i,s3Bucket:s}=e,o=Xr(n,`${i}/`),a=s?Xr(`https://${s}.s3.amazonaws.com/`,`${i}/${e.filename}`):null;this.uuid=i,this.name=r||e.filename,this.size=e.size,this.isStored=e.isStored,this.isImage=e.isImage,this.mimeType=e.mimeType,this.cdnUrl=o,this.originalFilename=e.originalFilename,this.imageInfo=e.imageInfo,this.videoInfo=e.videoInfo,this.contentInfo=e.contentInfo,this.metadata=e.metadata||null,this.s3Bucket=s||null,this.s3Url=a,X5(e)&&(this.defaultEffects=e.defaultEffects)}}const Y5=(t,{publicKey:e,fileName:n,baseURL:r,secureSignature:i,secureExpire:s,store:o,contentType:a,signal:l,onProgress:c,source:h,integration:f,userAgent:p,retryThrottledRequestMaxTimes:_,retryNetworkErrorMaxTimes:w,baseCDN:I,metadata:R})=>z5(t,{publicKey:e,fileName:n,contentType:a,baseURL:r,secureSignature:i,secureExpire:s,store:o,signal:l,onProgress:c,source:h,integration:f,userAgent:p,retryThrottledRequestMaxTimes:_,retryNetworkErrorMaxTimes:w,metadata:R}).then(({file:C})=>Fy(C,{publicKey:e,baseURL:r,source:h,integration:f,userAgent:p,retryThrottledRequestMaxTimes:_,retryNetworkErrorMaxTimes:w,onProgress:c,signal:l})).then(C=>new Na(C,{baseCDN:I})),J5=(t,{publicKey:e,fileName:n,baseURL:r,signal:i,onProgress:s,source:o,integration:a,userAgent:l,retryThrottledRequestMaxTimes:c,retryNetworkErrorMaxTimes:h,baseCDN:f})=>UI(t,{publicKey:e,baseURL:r,signal:i,source:o,integration:a,userAgent:l,retryThrottledRequestMaxTimes:c,retryNetworkErrorMaxTimes:h}).then(p=>new Na(p,{baseCDN:f,fileName:n})).then(p=>(s&&s({isComputable:!0,value:1}),p)),Z5=(t,{signal:e}={})=>{let n=null,r=null;const i=t.map(()=>new AbortController),s=o=>()=>{r=o,i.forEach((a,l)=>l!==o&&a.abort())};return Bd(e,()=>{i.forEach(o=>o.abort())}),Promise.all(t.map((o,a)=>{const l=s(a);return Promise.resolve().then(()=>o({stopRace:l,signal:i[a].signal})).then(c=>(l(),c)).catch(c=>(n=c,null))})).then(o=>{if(r===null)throw n;return o[r]})};var eU=window.WebSocket;class tU{constructor(){U(this,"events",Object.create({}))}emit(e,n){var r;(r=this.events[e])==null||r.forEach(i=>i(n))}on(e,n){this.events[e]=this.events[e]||[],this.events[e].push(n)}off(e,n){n?this.events[e]=this.events[e].filter(r=>r!==n):this.events[e]=[]}}const nU=(t,e)=>t==="success"?{status:sn.Success,...e}:t==="progress"?{status:sn.Progress,...e}:{status:sn.Error,...e};class rU{constructor(e,n=3e4){U(this,"key");U(this,"disconnectTime");U(this,"ws");U(this,"queue",[]);U(this,"isConnected",!1);U(this,"subscribers",0);U(this,"emmitter",new tU);U(this,"disconnectTimeoutId",null);this.key=e,this.disconnectTime=n}connect(){if(this.disconnectTimeoutId&&clearTimeout(this.disconnectTimeoutId),!this.isConnected&&!this.ws){const e=`wss://ws.pusherapp.com/app/${this.key}?protocol=5&client=js&version=1.12.2`;this.ws=new eU(e),this.ws.addEventListener("error",n=>{this.emmitter.emit("error",new Error(n.message))}),this.emmitter.on("connected",()=>{this.isConnected=!0,this.queue.forEach(n=>this.send(n.event,n.data)),this.queue=[]}),this.ws.addEventListener("message",n=>{const r=JSON.parse(n.data.toString());switch(r.event){case"pusher:connection_established":{this.emmitter.emit("connected",void 0);break}case"pusher:ping":{this.send("pusher:pong",{});break}case"progress":case"success":case"fail":this.emmitter.emit(r.channel,nU(r.event,JSON.parse(r.data)))}})}}disconnect(){const e=()=>{var n;(n=this.ws)==null||n.close(),this.ws=void 0,this.isConnected=!1};this.disconnectTime?this.disconnectTimeoutId=setTimeout(()=>{e()},this.disconnectTime):e()}send(e,n){var i;const r=JSON.stringify({event:e,data:n});(i=this.ws)==null||i.send(r)}subscribe(e,n){this.subscribers+=1,this.connect();const r=`task-status-${e}`,i={event:"pusher:subscribe",data:{channel:r}};this.emmitter.on(r,n),this.isConnected?this.send(i.event,i.data):this.queue.push(i)}unsubscribe(e){this.subscribers-=1;const n=`task-status-${e}`,r={event:"pusher:unsubscribe",data:{channel:n}};this.emmitter.off(n),this.isConnected?this.send(r.event,r.data):this.queue=this.queue.filter(i=>i.data.channel!==n),this.subscribers===0&&this.disconnect()}onError(e){return this.emmitter.on("error",e),()=>this.emmitter.off("error",e)}}let Jf=null;const jy=t=>{if(!Jf){const e=typeof window>"u"?0:3e4;Jf=new rU(t,e)}return Jf},iU=t=>{jy(t).connect()};function sU({token:t,publicKey:e,baseURL:n,integration:r,userAgent:i,retryThrottledRequestMaxTimes:s,retryNetworkErrorMaxTimes:o,onProgress:a,signal:l}){return RI({check:c=>W5(t,{publicKey:e,baseURL:n,integration:r,userAgent:i,retryThrottledRequestMaxTimes:s,retryNetworkErrorMaxTimes:o,signal:c}).then(h=>{switch(h.status){case sn.Error:return new cn(h.error,h.errorCode);case sn.Waiting:return!1;case sn.Unknown:return new cn(`Token "${t}" was not found.`);case sn.Progress:return a&&(h.total==="unknown"?a({isComputable:!1}):a({isComputable:!0,value:h.done/h.total})),!1;case sn.Success:return a&&a({isComputable:!0,value:h.done/h.total}),h;default:throw new Error("Unknown status")}}),signal:l})}const oU=({token:t,pusherKey:e,signal:n,onProgress:r})=>new Promise((i,s)=>{const o=jy(e),a=o.onError(s),l=()=>{a(),o.unsubscribe(t)};Bd(n,()=>{l(),s(new Ks("pusher cancelled"))}),o.subscribe(t,c=>{switch(c.status){case sn.Progress:{r&&(c.total==="unknown"?r({isComputable:!1}):r({isComputable:!0,value:c.done/c.total}));break}case sn.Success:{l(),r&&r({isComputable:!0,value:c.done/c.total}),i(c);break}case sn.Error:l(),s(new cn(c.msg,c.error_code))}})}),aU=(t,{publicKey:e,fileName:n,baseURL:r,baseCDN:i,checkForUrlDuplicates:s,saveUrlForRecurrentUploads:o,secureSignature:a,secureExpire:l,store:c,signal:h,onProgress:f,source:p,integration:_,userAgent:w,retryThrottledRequestMaxTimes:I,pusherKey:R=Te.pusherKey,metadata:C})=>Promise.resolve(iU(R)).then(()=>B5(t,{publicKey:e,fileName:n,baseURL:r,checkForUrlDuplicates:s,saveUrlForRecurrentUploads:o,secureSignature:a,secureExpire:l,store:c,signal:h,source:p,integration:_,userAgent:w,retryThrottledRequestMaxTimes:I,metadata:C})).catch(E=>{const S=jy(R);return S==null||S.disconnect(),Promise.reject(E)}).then(E=>E.type===Rm.FileInfo?E:Z5([({signal:S})=>sU({token:E.token,publicKey:e,baseURL:r,integration:_,userAgent:w,retryThrottledRequestMaxTimes:I,onProgress:f,signal:S}),({signal:S})=>oU({token:E.token,pusherKey:R,signal:S,onProgress:f})],{signal:h})).then(E=>{if(E instanceof cn)throw E;return E}).then(E=>Fy(E.uuid,{publicKey:e,baseURL:r,integration:_,userAgent:w,retryThrottledRequestMaxTimes:I,onProgress:f,signal:h})).then(E=>new Na(E,{baseCDN:i})),Zf=new WeakMap,lU=async t=>{if(Zf.has(t))return Zf.get(t);const e=await fetch(t.uri).then(n=>n.blob());return Zf.set(t,e),e},VI=async t=>{if(qd(t)||Wd(t))return t.size;if(Gd(t))return(await lU(t)).size;throw new Error("Unknown file type. Cannot determine file size.")},uU=(t,e=Te.multipartMinFileSize)=>t>=e,$I=t=>{const e="[a-f0-9]{8}-[a-f0-9]{4}-[a-f0-9]{4}-[a-f0-9]{4}-[a-f0-9]{12}",n=new RegExp(e);return!Ra(t)&&n.test(t)},zy=t=>{const e="^(?:\\w+:)?\\/\\/([^\\s\\.]+\\.\\S{2}|localhost[\\:?\\d]*)\\S*$",n=new RegExp(e);return!Ra(t)&&n.test(t)},cU=(t,e)=>new Promise((n,r)=>{const i=[];let s=!1,o=e.length;const a=[...e],l=()=>{const c=e.length-a.length,h=a.shift();h&&h().then(f=>{s||(i[c]=f,o-=1,o?l():n(i))}).catch(f=>{s=!0,r(f)})};for(let c=0;c<t;c++)l()}),hU=(t,e,n,r)=>{const i=r*e,s=Math.min(i+r,n);return t.slice(i,s)},dU=async(t,e,n)=>r=>hU(t,r,e,n),fU=(t,e,{publicKey:n,contentType:r,onProgress:i,signal:s,integration:o,retryThrottledRequestMaxTimes:a,retryNetworkErrorMaxTimes:l})=>K5(t,e,{publicKey:n,contentType:r,onProgress:i,signal:s,integration:o,retryThrottledRequestMaxTimes:a,retryNetworkErrorMaxTimes:l}),pU=async(t,{publicKey:e,fileName:n,fileSize:r,baseURL:i,secureSignature:s,secureExpire:o,store:a,signal:l,onProgress:c,source:h,integration:f,userAgent:p,retryThrottledRequestMaxTimes:_,retryNetworkErrorMaxTimes:w,contentType:I,multipartChunkSize:R=Te.multipartChunkSize,maxConcurrentRequests:C=Te.maxConcurrentRequests,baseCDN:E,metadata:S})=>{const D=r??await VI(t);let F;const z=(g,y)=>{if(!c)return;F||(F=Array(g).fill(0));const T=A=>A.reduce((k,P)=>k+P,0);return A=>{A.isComputable&&(F[y]=A.value,c({isComputable:!0,value:T(F)/g}))}};return I||(I=DI(t)),G5(D,{publicKey:e,contentType:I,fileName:n||MI(t),baseURL:i,secureSignature:s,secureExpire:o,store:a,signal:l,source:h,integration:f,userAgent:p,retryThrottledRequestMaxTimes:_,retryNetworkErrorMaxTimes:w,metadata:S}).then(async({uuid:g,parts:y})=>{const T=await dU(t,D,R);return Promise.all([g,cU(C,y.map((A,k)=>()=>fU(T(k),A,{publicKey:e,contentType:I,onProgress:z(y.length,k),signal:l,integration:f,retryThrottledRequestMaxTimes:_,retryNetworkErrorMaxTimes:w})))])}).then(([g])=>Q5(g,{publicKey:e,baseURL:i,source:h,integration:f,userAgent:p,retryThrottledRequestMaxTimes:_,retryNetworkErrorMaxTimes:w})).then(g=>g.isReady?g:Fy(g.uuid,{publicKey:e,baseURL:i,source:h,integration:f,userAgent:p,retryThrottledRequestMaxTimes:_,retryNetworkErrorMaxTimes:w,onProgress:c,signal:l})).then(g=>new Na(g,{baseCDN:E}))};async function FI(t,{publicKey:e,fileName:n,baseURL:r=Te.baseURL,secureSignature:i,secureExpire:s,store:o,signal:a,onProgress:l,source:c,integration:h,userAgent:f,retryThrottledRequestMaxTimes:p,retryNetworkErrorMaxTimes:_,contentType:w,multipartMinFileSize:I,multipartChunkSize:R,maxConcurrentRequests:C,baseCDN:E=Te.baseCDN,checkForUrlDuplicates:S,saveUrlForRecurrentUploads:D,pusherKey:F,metadata:z}){if(Ra(t)){const g=await VI(t);return uU(g,I)?pU(t,{publicKey:e,contentType:w,multipartChunkSize:R,fileSize:g,fileName:n,baseURL:r,secureSignature:i,secureExpire:s,store:o,signal:a,onProgress:l,source:c,integration:h,userAgent:f,maxConcurrentRequests:C,retryThrottledRequestMaxTimes:p,retryNetworkErrorMaxTimes:_,baseCDN:E,metadata:z}):Y5(t,{publicKey:e,fileName:n,contentType:w,baseURL:r,secureSignature:i,secureExpire:s,store:o,signal:a,onProgress:l,source:c,integration:h,userAgent:f,retryThrottledRequestMaxTimes:p,retryNetworkErrorMaxTimes:_,baseCDN:E,metadata:z})}if(zy(t))return aU(t,{publicKey:e,fileName:n,baseURL:r,baseCDN:E,checkForUrlDuplicates:S,saveUrlForRecurrentUploads:D,secureSignature:i,secureExpire:s,store:o,signal:a,onProgress:l,source:c,integration:h,userAgent:f,retryThrottledRequestMaxTimes:p,retryNetworkErrorMaxTimes:_,pusherKey:F,metadata:z});if($I(t))return J5(t,{publicKey:e,fileName:n,baseURL:r,signal:a,onProgress:l,source:c,integration:h,userAgent:f,retryThrottledRequestMaxTimes:p,retryNetworkErrorMaxTimes:_,baseCDN:E});throw new TypeError(`File uploading from "${t}" is not supported`)}class mU{constructor(e,{baseCDN:n=Te.baseCDN}={}){U(this,"uuid");U(this,"filesCount");U(this,"totalSize");U(this,"isStored");U(this,"isImage");U(this,"cdnUrl");U(this,"files");U(this,"createdAt");U(this,"storedAt",null);this.uuid=e.id,this.filesCount=e.filesCount;const r=e.files.filter(Boolean);this.totalSize=Object.values(r).reduce((i,s)=>i+s.size,0),this.isStored=!!e.datetimeStored,this.isImage=!!Object.values(r).filter(i=>i.isImage).length,this.cdnUrl=e.cdnUrl,this.files=r.map(i=>new Na(i,{baseCDN:n})),this.createdAt=e.datetimeCreated,this.storedAt=e.datetimeStored}}const gU=t=>{for(const e of t)if(!Ra(e))return!1;return!0},yU=t=>{for(const e of t)if(!$I(e))return!1;return!0},vU=t=>{for(const e of t)if(!zy(e))return!1;return!0};function _U(t,{publicKey:e,fileName:n,baseURL:r=Te.baseURL,secureSignature:i,secureExpire:s,store:o,signal:a,onProgress:l,source:c,integration:h,userAgent:f,retryThrottledRequestMaxTimes:p,retryNetworkErrorMaxTimes:_,contentType:w,multipartChunkSize:I=Te.multipartChunkSize,baseCDN:R=Te.baseCDN,checkForUrlDuplicates:C,saveUrlForRecurrentUploads:E,jsonpCallback:S}){if(!gU(t)&&!vU(t)&&!yU(t))throw new TypeError(`Group uploading from "${t}" is not supported`);let D,F=!0;const z=t.length,g=(y,T)=>{if(!l)return;D||(D=Array(y).fill(0));const A=k=>k.reduce((P,x)=>P+x)/y;return k=>{if(!k.isComputable||!F){F=!1,l({isComputable:!1});return}D[T]=k.value,l({isComputable:!0,value:A(D)})}};return Promise.all(t.map((y,T)=>Ra(y)||zy(y)?FI(y,{publicKey:e,fileName:n,baseURL:r,secureSignature:i,secureExpire:s,store:o,signal:a,onProgress:g(z,T),source:c,integration:h,userAgent:f,retryThrottledRequestMaxTimes:p,retryNetworkErrorMaxTimes:_,contentType:w,multipartChunkSize:I,baseCDN:R,checkForUrlDuplicates:C,saveUrlForRecurrentUploads:E}).then(A=>A.uuid):y)).then(y=>q5(y,{publicKey:e,baseURL:r,jsonpCallback:S,secureSignature:i,secureExpire:s,signal:a,source:c,integration:h,userAgent:f,retryThrottledRequestMaxTimes:p,retryNetworkErrorMaxTimes:_}).then(T=>new mU(T,{baseCDN:R})).then(T=>(l&&l({isComputable:!0,value:1}),T)))}class wU{constructor(e){U(this,"_concurrency",1);U(this,"_pending",[]);U(this,"_running",0);U(this,"_resolvers",new Map);U(this,"_rejectors",new Map);this._concurrency=e}_run(){const e=this._concurrency-this._running;for(let n=0;n<e;n++){const r=this._pending.shift();if(!r)return;const i=this._resolvers.get(r),s=this._rejectors.get(r);if(!i||!s)throw new Error("Unexpected behavior: resolver or rejector is undefined");this._running+=1,r().finally(()=>{this._resolvers.delete(r),this._rejectors.delete(r),this._running-=1,this._run()}).then(o=>i(o)).catch(o=>s(o))}}add(e){return new Promise((n,r)=>{this._resolvers.set(e,n),this._rejectors.set(e,r),this._pending.push(e),this._run()})}get pending(){return this._pending.length}get running(){return this._running}set concurrency(e){this._concurrency=e,this._run()}get concurrency(){return this._concurrency}}const jI=()=>({}),zI=t=>({...jI(),"*currentActivity":"","*currentActivityParams":{},"*history":[],"*historyBack":null,"*closeModal":()=>{t.set$({"*modalActive":!1,"*currentActivity":""})}}),BI=t=>({...zI(t),"*commonProgress":0,"*uploadList":[],"*focusedEntry":null,"*uploadMetadata":null,"*uploadQueue":new wU(1),"*uploadCollection":null,"*collectionErrors":[],"*collectionState":null,"*groupInfo":null,"*uploadTrigger":new Set}),By={"locale-id":"en","social-source-lang":"en","upload-file":"Upload file","upload-files":"Upload files","choose-file":"Choose file","choose-files":"Choose files","drop-files-here":"Drop files here","select-file-source":"Select file source",selected:"Selected",upload:"Upload","add-more":"Add more",cancel:"Cancel","start-from-cancel":"Cancel",clear:"Clear","camera-shot":"Shot","upload-url":"Import","upload-url-placeholder":"Paste link here","edit-image":"Edit image","edit-detail":"Details",back:"Back",done:"Done",ok:"Ok","remove-from-list":"Remove",no:"No",yes:"Yes","confirm-your-action":"Confirm your action","are-you-sure":"Are you sure?","selected-count":"Selected:","upload-error":"Upload error","validation-error":"Validation error","no-files":"No files selected",browse:"Browse","not-uploaded-yet":"Not uploaded yet...",file__one:"file",file__other:"files",error__one:"error",error__other:"errors","header-uploading":"Uploading {{count}} {{plural:file(count)}}","header-failed":"{{count}} {{plural:error(count)}}","header-succeed":"{{count}} {{plural:file(count)}} uploaded","header-total":"{{count}} {{plural:file(count)}} selected","src-type-local":"From device","src-type-from-url":"From link","src-type-camera":"Camera","src-type-draw":"Draw","src-type-facebook":"Facebook","src-type-dropbox":"Dropbox","src-type-gdrive":"Google Drive","src-type-gphotos":"Google Photos","src-type-instagram":"Instagram","src-type-flickr":"Flickr","src-type-vk":"VK","src-type-evernote":"Evernote","src-type-box":"Box","src-type-onedrive":"Onedrive","src-type-huddle":"Huddle","src-type-other":"Other","caption-from-url":"Import from link","caption-camera":"Camera","caption-draw":"Draw","caption-edit-file":"Edit file","file-no-name":"No name...","toggle-fullscreen":"Toggle fullscreen","toggle-guides":"Toggle guides",rotate:"Rotate","flip-vertical":"Flip vertical","flip-horizontal":"Flip horizontal",apply:"Apply",brightness:"Brightness",contrast:"Contrast",saturation:"Saturation",exposure:"Exposure",gamma:"Gamma",vibrance:"Vibrance",warmth:"Warmth",enhance:"Enhance",original:"Original",resize:"Resize image",crop:"Crop","select-color":"Select color",text:"Text",draw:"Draw","cancel-edit":"Cancel edit","tab-view":"Preview","tab-details":"Details","file-name":"Name","file-size":"Size","cdn-url":"CDN URL","file-size-unknown":"Unknown","camera-permissions-denied":"Camera access denied","camera-permissions-prompt":"Please allow access to the camera","camera-permissions-request":"Request access","files-count-limit-error-title":"Files count limit overflow","files-count-limit-error-too-few":"Youve chosen {{total}} {{plural:file(total)}}. At least {{min}} {{plural:file(min)}} required.","files-count-limit-error-too-many":"Youve chosen too many files. {{max}} {{plural:file(max)}} is maximum.","files-max-size-limit-error":"File is too big. Max file size is {{maxFileSize}}.","has-validation-errors":"File validation error ocurred. Please, check your files before upload.","images-only-accepted":"Only image files are accepted.","file-type-not-allowed":"Uploading of these file types is not allowed.","some-files-were-not-uploaded":"Some files were not uploaded."},Hh=new Map,Nm=new Map,HI=(t,e)=>{Hh.has(t)&&console.log(`Locale ${t} is already defined. Overwriting...`),Hh.set(t,{...By,...e})},EU=(t,e)=>{Nm.set(t,e)},WI=(t,e)=>{typeof e=="function"?EU(t,e):HI(t,e)},bU=async t=>{if(!Hh.has(t)){if(!Nm.has(t))throw new Error(`Locale ${t} is not defined`);const n=await Nm.get(t)();HI(t,n)}return Hh.get(t)};WI("en",By);const Ns=t=>`*l10n/${t}`,TU="en";class CU{constructor(e){U(this,"_blockInstance",null);U(this,"_localeName","");U(this,"_callbacks",new Set);U(this,"_boundBlocks",new Map);this._blockInstance=e;for(let[n,r]of Object.entries(By))this._blockInstance.add(Ns(n),r,!1);setTimeout(()=>{e.subConfigValue("localeName",async n=>{var s;if(!this._blockInstance||!n)return;this._localeName=n;const r=await bU(n);if(n!==TU&&this._localeName!==n)return;const i=(s=this._blockInstance.cfg.localeDefinitionOverride)==null?void 0:s[n];for(const[o,a]of Object.entries(r)){const l=i==null?void 0:i[o];this._blockInstance.add(Ns(o),l??a,!0);for(const c of this._callbacks)c()}}),e.subConfigValue("localeDefinitionOverride",n=>{var i;if(!n)return;const r=n[this._localeName];if(r)for(const[s,o]of Object.entries(r)){(i=this._blockInstance)==null||i.add(Ns(s),o,!0);for(const a of this._callbacks)a()}})})}onLocaleChange(e){const n=Mn(e,0);return this._callbacks.add(n),()=>{this._callbacks.delete(n)}}bindL10n(e,n,r){var s,o,a;e.$[n]=r(),this._boundBlocks.has(e)||this._boundBlocks.set(e,new Map),(o=(s=this._boundBlocks.get(e))==null?void 0:s.get(n))==null||o();const i=this.onLocaleChange(()=>{e.$[n]=r()});(a=this._boundBlocks.get(e))==null||a.set(n,i)}destroyL10nBindings(e){const n=this._boundBlocks.get(e);if(n){for(const r of n.values())r();this._boundBlocks.delete(e)}}destroy(){this._callbacks.clear()}}function IU(t,e){[...t.querySelectorAll("[l10n]")].forEach(n=>{let r=n.getAttribute("l10n");if(!r)return;let i="textContent",s=!1;if(r.includes(":")){const l=r.split(":");i=l[0],r=l[1],i.startsWith("@")&&(i=i.slice(1),s=!0)}const o=r;e.has(o)&&e.sub(o,l=>{if(!l)return;e.l10nProcessorSubs.has(o)||e.l10nProcessorSubs.set(o,new Set);const c=e.l10nProcessorSubs.get(o);c==null||c.forEach(p=>{p.remove(),c.delete(p),e.allSubs.delete(p)});const h=Ns(l).replace("*","");e.nodeCtx.has(h)||e.nodeCtx.add(h,l);const f=e.nodeCtx.sub(h,()=>{n[i]=e.l10n(l)});c==null||c.add(f),e.allSubs.add(f),n.removeAttribute("l10n")});const a=Ns(r);e.has(a)||e.add(a,""),e.sub(a,()=>{r=r,s?n.setAttribute(i,e.l10n(r)):n[i]=e.l10n(r)}),n.removeAttribute("l10n")})}const kn=t=>`*cfg/${t}`,Hy="blocks",Wy="0.39.1",qI=t=>{if(typeof t!="string"||!t)return"";let e=t.trim();return e.startsWith("-/")?e=e.slice(2):e.startsWith("/")&&(e=e.slice(1)),e.endsWith("/")&&(e=e.slice(0,e.length-1)),e},qy=(...t)=>t.filter(e=>typeof e=="string"&&e).map(e=>qI(e)).join("/-/"),Xi=(...t)=>{let e=qy(...t);return e?`-/${e}/`:""};function GI(t){let e=new URL(t),n=e.pathname+e.search+e.hash,r=n.lastIndexOf("http"),i=n.lastIndexOf("/"),s="";return r>=0?s=n.slice(r):i>=0&&(s=n.slice(i+1)),s}function SU(t){let e=new URL(t),{pathname:n}=e;const r=n.indexOf("/"),i=n.indexOf("/",r+1);return n.substring(r+1,i)}function AU(t){let e=KI(t),n=new URL(e),r=n.pathname.indexOf("/-/");return r===-1?[]:n.pathname.substring(r).split("/-/").filter(Boolean).map(s=>qI(s))}function KI(t){let e=new URL(t),n=GI(t),r=QI(n)?XI(n).pathname:n;return e.pathname=e.pathname.replace(r,""),e.search="",e.hash="",e.toString()}function QI(t){return t.startsWith("http")}function XI(t){let e=new URL(t);return{pathname:e.origin+e.pathname||"",search:e.search||"",hash:e.hash||""}}const Pn=(t,e,n)=>{let r=new URL(KI(t));if(n=n||GI(t),r.pathname.startsWith("//")&&(r.pathname=r.pathname.replace("//","/")),QI(n)){let i=XI(n);r.pathname=r.pathname+(e||"")+(i.pathname||""),r.search=i.search,r.hash=i.hash}else r.pathname=r.pathname+(e||"")+(n||"");return r.toString()},mu=(t,e)=>{let n=new URL(t);return n.pathname=e+"/",n.toString()},Yr=(t,e=",")=>t.trim().split(e).map(n=>n.trim()).filter(n=>n.length>0),Cn=Object.freeze({brightness:0,exposure:0,gamma:100,contrast:0,saturation:0,vibrance:0,warmth:0,enhance:0,filter:0,rotate:0,mirror:!1,flip:!1,crop:void 0}),YI=["enhance","brightness","exposure","gamma","contrast","saturation","vibrance","warmth","filter","mirror","flip","rotate","crop"];function xU(t,e){if(typeof e=="number"){const n=e;return Cn[t]!==n?`${t}/${n}`:""}if(typeof e=="boolean"){const n=e;return Cn[t]!==n?`${t}`:""}if(t==="filter"&&e){const{name:n,amount:r}=e;return Cn.filter===r?"":`${t}/${n}/${r}`}if(t==="crop"&&e){let{dimensions:n,coords:r}=e;return`${t}/${n.join("x")}/${r.join(",")}`}return""}function Qd(t){return qy(...YI.filter(e=>typeof t[e]<"u"&&t[e]!==null).map(e=>{let n=t[e];return xU(e,n)}).filter(e=>!!e))}const JI=qy("format/auto","progressive/yes"),kr=([t])=>typeof t<"u"?Number(t):void 0,Bw=()=>!0,kU=([t,e])=>({name:t,amount:typeof e<"u"?Number(e):100}),PU=([t,e])=>{if(!/\d+x\d+/.test(t)||!/\d+,\d+/.test(e))throw new Error("Crop by aspect ratio, percentage or alignment shortcuts is not supported.");return{dimensions:Yr(t,"x").map(Number),coords:Yr(e).map(Number)}},RU=Object.freeze({enhance:kr,brightness:kr,exposure:kr,gamma:kr,contrast:kr,saturation:kr,vibrance:kr,warmth:kr,filter:kU,mirror:Bw,flip:Bw,rotate:kr,crop:PU});function NU(t){const e={};for(const n of t){const[r,...i]=n.split("/");if(!YI.includes(r))continue;const s=r,o=RU[s];try{const a=o(i);e[s]=a}catch(a){console.warn([`Failed to parse URL operation "${n}". It will be ignored.`,a instanceof Error?`Error message: "${a.message}"`:a,"If you need this functionality, please feel free to open an issue at https://github.com/uploadcare/blocks/issues/new"].join(`
`))}}return e}const Qt=Object.freeze({CROP:"crop",TUNING:"tuning",FILTERS:"filters"}),pr=[Qt.CROP,Qt.TUNING,Qt.FILTERS],OU=["brightness","exposure","gamma","contrast","saturation","vibrance","warmth","enhance"],LU=["adaris","briaril","calarel","carris","cynarel","cyren","elmet","elonni","enzana","erydark","fenralan","ferand","galen","gavin","gethriel","iorill","iothari","iselva","jadis","lavra","misiara","namala","nerion","nethari","pamaya","sarnar","sedis","sewen","sorahel","sorlen","tarian","thellassan","varriel","varven","vevera","virkas","yedis","yllara","zatvel","zevcen"],DU=["rotate","mirror","flip"],ya=Object.freeze({brightness:{zero:Cn.brightness,range:[-100,100],keypointsNumber:2},exposure:{zero:Cn.exposure,range:[-500,500],keypointsNumber:2},gamma:{zero:Cn.gamma,range:[0,1e3],keypointsNumber:2},contrast:{zero:Cn.contrast,range:[-100,500],keypointsNumber:2},saturation:{zero:Cn.saturation,range:[-100,500],keypointsNumber:1},vibrance:{zero:Cn.vibrance,range:[-100,500],keypointsNumber:1},warmth:{zero:Cn.warmth,range:[-100,100],keypointsNumber:1},enhance:{zero:Cn.enhance,range:[0,100],keypointsNumber:1},filter:{zero:Cn.filter,range:[0,100],keypointsNumber:1}}),MU=t=>t?t.split(",").map(e=>e.trim()):[],Gy=t=>t?t.join(","):"",UU="https://ucarecdn.com",VU="https://upload.uploadcare.com",$U="https://social.uploadcare.com",zi={pubkey:"",multiple:!0,multipleMin:0,multipleMax:Number.MAX_SAFE_INTEGER,confirmUpload:!1,imgOnly:!1,accept:"",externalSourcesPreferredTypes:"",store:"auto",cameraMirror:!1,cameraCapture:"",sourceList:"local, url, camera, dropbox, gdrive",cloudImageEditorTabs:Gy(pr),maxLocalFileSizeBytes:0,thumbSize:76,showEmptyList:!1,useLocalImageEditor:!1,useCloudImageEditor:!0,removeCopyright:!1,cropPreset:"",imageShrink:"",modalScrollLock:!0,modalBackdropStrokes:!1,sourceListWrap:!0,remoteTabSessionKey:"",cdnCname:UU,baseUrl:VU,socialBaseUrl:$U,secureSignature:"",secureExpire:"",secureDeliveryProxy:"",retryThrottledRequestMaxTimes:1,multipartMinFileSize:26214400,multipartChunkSize:5242880,maxConcurrentRequests:10,multipartMaxConcurrentRequests:4,multipartMaxAttempts:3,checkForUrlDuplicates:!1,saveUrlForRecurrentUploads:!1,groupOutput:!1,userAgentIntegration:"",debug:!1,metadata:null,localeName:"en",localeDefinitionOverride:null},ep="lr-";class Ne extends zd{constructor(){super();U(this,"requireCtxName",!1);U(this,"allowCustomTemplate",!0);U(this,"activityType",null);U(this,"init$",jI());this.l10nProcessorSubs=new Map,this.addTemplateProcessor(IU)}l10n(n,r={}){if(!n)return"";let i=this.$[Ns(n)]||n,s=_5(i);for(let a of s)r[a.variable]=this.pluralize(a.pluralKey,Number(r[a.countVariable]));return Pm(i,r)}pluralize(n,r){const i=this.l10n("locale-id")||"en",s=xI(i,r);return this.l10n(`${n}__${s}`)}bindL10n(n,r){var i;(i=this.localeManager)==null||i.bindL10n(this,n,r)}emit(n,r,i){const s=this.has("*eventEmitter")&&this.$["*eventEmitter"];s&&s.emit(n,r,i)}hasBlockInCtx(n){let r=this.$["*blocksRegistry"];for(let i of r)if(n(i))return!0;return!1}setOrAddState(n,r){this.add$({[n]:r},!0)}setActivity(n){if(this.hasBlockInCtx(r=>r.activityType===n)){this.$["*currentActivity"]=n;return}console.warn(`Activity type "${n}" not found in the context`)}connectedCallback(){const n=this.constructor.className;n&&this.classList.toggle(`${ep}${n}`,!0),this.hasAttribute("retpl")&&(this.constructor.template=null,this.processInnerHtml=!0),this.requireCtxName?w5({element:this,attribute:"ctx-name",onSuccess:()=>{super.connectedCallback()},onTimeout:()=>{console.error("Attribute `ctx-name` is required and it is not set.")}}):super.connectedCallback(),Bh.registerClient(this)}disconnectedCallback(){super.disconnectedCallback(),Bh.unregisterClient(this)}initCallback(){this.has("*blocksRegistry")||this.add("*blocksRegistry",new Set),this.$["*blocksRegistry"].add(this),this.has("*eventEmitter")||this.add("*eventEmitter",new g5(this.debugPrint.bind(this))),this.has("*localeManager")||this.add("*localeManager",new CU(this)),this.sub(Ns("locale-id"),r=>{this.style.direction=y5(r)})}get localeManager(){return this.has("*localeManager")?this.$["*localeManager"]:null}destroyCallback(){var r;let n=this.$["*blocksRegistry"];n.delete(this),(r=this.localeManager)==null||r.destroyL10nBindings(this),this.l10nProcessorSubs=new Map,xe.deleteCtx(this),n.size===0&&setTimeout(()=>{this.destroyCtxCallback()},0)}destroyCtxCallback(){var n;xe.deleteCtx(this.ctxName),(n=this.localeManager)==null||n.destroy()}fileSizeFmt(n,r=2){let i=["B","KB","MB","GB","TB"];if(n===0)return`0 ${i[0]}`;let s=1024,o=r<0?0:r,a=Math.floor(Math.log(n)/Math.log(s));return parseFloat((n/s**a).toFixed(o))+" "+i[a]}proxyUrl(n){let r=this.cfg.secureDeliveryProxy;return r?Pm(r,{previewUrl:n},{transform:i=>window.encodeURIComponent(i)}):n}get cfg(){if(!this.__cfgProxy){let n=Object.create(null);this.__cfgProxy=new Proxy(n,{set:(r,i,s)=>{if(typeof i!="string")return!1;const o=kn(i);return this.has(o)||this.add(o,zi[i]),this.$[o]=s,!0},get:(r,i)=>{const s=kn(i);return this.has(s)||this.add(s,zi[i]),this.$[kn(i)]}})}return this.__cfgProxy}subConfigValue(n,r){const i=kn(n);this.has(i)||this.add(i,zi[n]),this.sub(i,r)}debugPrint(...n){if(!this.cfg.debug)return;let r=n;if(typeof(n==null?void 0:n[0])=="function"){const i=n[0];r=i()}console.log(`[${this.ctxName}]`,...r)}static reg(n){if(!n){super.reg();return}super.reg(n.startsWith(ep)?n:ep+n)}}U(Ne,"StateConsumerScope",null),U(Ne,"className","");const Hw="active",ul="___ACTIVITY_IS_ACTIVE___",Rr=class Rr extends Ne{constructor(){super(...arguments);U(this,"historyTracked",!1);U(this,"init$",zI(this));U(this,"_debouncedHistoryFlush",Mn(this._historyFlush.bind(this),10))}_deactivate(){var r;let n=Rr._activityCallbacks.get(this);this[ul]=!1,this.removeAttribute(Hw),(r=n==null?void 0:n.deactivateCallback)==null||r.call(n)}_activate(){var r;let n=Rr._activityCallbacks.get(this);this.$["*historyBack"]=this.historyBack.bind(this),this[ul]=!0,this.setAttribute(Hw,""),(r=n==null?void 0:n.activateCallback)==null||r.call(n),this._debouncedHistoryFlush(),this.emit(tt.ACTIVITY_CHANGE,{activity:this.activityType})}initCallback(){super.initCallback(),this.hasAttribute("current-activity")&&this.sub("*currentActivity",n=>{this.setAttribute("current-activity",n)}),this.activityType&&(this.hasAttribute("activity")||this.setAttribute("activity",this.activityType),this.sub("*currentActivity",n=>{this.activityType!==n&&this[ul]?this._deactivate():this.activityType===n&&!this[ul]&&this._activate(),n||(this.$["*history"]=[])}),this.has("*modalActive")&&this.sub("*modalActive",n=>{!n&&this.activityType===this.$["*currentActivity"]&&(this.$["*currentActivity"]=null)}))}_historyFlush(){let n=this.$["*history"];n&&(n.length>10&&(n=n.slice(n.length-11,n.length-1)),this.historyTracked&&n[n.length-1]!==this.activityType&&n.push(this.activityType),this.$["*history"]=n)}_isActivityRegistered(){return this.activityType&&Rr._activityCallbacks.has(this)}get isActivityActive(){return this[ul]}get couldOpenActivity(){return!0}registerActivity(n,r={}){const{onActivate:i,onDeactivate:s}=r;Rr._activityCallbacks.set(this,{activateCallback:i,deactivateCallback:s})}unregisterActivity(){this.isActivityActive&&this._deactivate(),Rr._activityCallbacks.delete(this)}destroyCallback(){super.destroyCallback(),this._isActivityRegistered()&&this.unregisterActivity();const n=this.$["*currentActivity"];!![...this.$["*blocksRegistry"]].find(s=>s instanceof Rr&&s.activityType===n)||(this.$["*currentActivity"]=null)}get activityKey(){return this.ctxName+this.activityType}get activityParams(){return this.$["*currentActivityParams"]}get initActivity(){return this.getCssData("--cfg-init-activity")}get doneActivity(){return this.getCssData("--cfg-done-activity")}historyBack(){let n=this.$["*history"];if(n){let r=n.pop();for(;r===this.activityType;)r=n.pop();let i=!!r;if(r){const o=[...this.$["*blocksRegistry"]].find(a=>a.activityType===r);i=(o==null?void 0:o.couldOpenActivity)??!1}r=i?r:void 0,this.$["*currentActivity"]=r,this.$["*history"]=n,r||this.setOrAddState("*modalActive",!1)}}};U(Rr,"_activityCallbacks",new Map);let fe=Rr;fe.activities=Object.freeze({START_FROM:"start-from",CAMERA:"camera",DRAW:"draw",UPLOAD_LIST:"upload-list",URL:"url",CONFIRMATION:"confirmation",CLOUD_IMG_EDIT:"cloud-image-edit",EXTERNAL:"external",DETAILS:"details"});const FU=20,Om=24,Tl=34,ZI=3,sr=ZI/2,gs=1,Ac=100/3,ge=1,Ww=24,jU=6;function Co(t,e){for(let n in e)t.setAttributeNS(null,n,e[n].toString())}function Fn(t,e={}){let n=document.createElementNS("http://www.w3.org/2000/svg",t);return Co(n,e),n}function zU(t,e,n){let{x:r,y:i,width:s,height:o}=t,a=e.includes("w")?0:1,l=e.includes("n")?0:1,c=[-1,1][a],h=[-1,1][l],f=[r+a*s+sr*c,i+l*o+sr*h-Om*n*h],p=[r+a*s+sr*c,i+l*o+sr*h],_=[r+a*s-Om*n*c+sr*c,i+l*o+sr*h];return{d:`M ${f[0]} ${f[1]} L ${p[0]} ${p[1]} L ${_[0]} ${_[1]}`,center:p}}function BU(t,e,n){let{x:r,y:i,width:s,height:o}=t,a=["n","s"].includes(e)?.5:{w:0,e:1}[e],l=["w","e"].includes(e)?.5:{n:0,s:1}[e],c=[-1,1][a],h=[-1,1][l],f,p;["n","s"].includes(e)?(f=[r+a*s-Tl*n/2,i+l*o+sr*h],p=[r+a*s+Tl*n/2,i+l*o+sr*h]):(f=[r+a*s+sr*c,i+l*o-Tl*n/2],p=[r+a*s+sr*c,i+l*o+Tl*n/2]);let _=`M ${f[0]} ${f[1]} L ${p[0]} ${p[1]}`,w=[p[0]-(p[0]-f[0])/2,p[1]-(p[1]-f[1])/2];return{d:_,center:w}}function HU(t){return t===""?"move":["e","w"].includes(t)?"ew-resize":["n","s"].includes(t)?"ns-resize":["nw","se"].includes(t)?"nwse-resize":"nesw-resize"}function WU({rect:t,delta:[e,n],imageBox:r}){return Wh({...t,x:t.x+e,y:t.y+n},r)}function Wh(t,e){let{x:n}=t,{y:r}=t;return t.x<e.x?n=e.x:t.x+t.width>e.x+e.width&&(n=e.x+e.width-t.width),t.y<e.y?r=e.y:t.y+t.height>e.y+e.height&&(r=e.y+e.height-t.height),{...t,x:n,y:r}}function qU({rect:t,delta:e,aspectRatio:n,imageBox:r}){const[,i]=e;let{y:s,width:o,height:a}=t;s+=i,a-=i,n&&(o=a*n);let l=t.x+t.width/2-o/2;return s<=r.y&&(s=r.y,a=t.y+t.height-s,n&&(o=a*n,l=t.x+t.width/2-o/2)),l<=r.x&&(l=r.x,s=t.y+t.height-a),l+o>=r.x+r.width&&(l=Math.max(r.x,r.x+r.width-o),o=r.x+r.width-l,n&&(a=o/n),s=t.y+t.height-a),a<ge&&(a=ge,n&&(o=a*n,l=t.x+t.width/2-o/2),s=t.y+t.height-a),o<ge&&(o=ge,n&&(a=o/n,l=t.x+t.width/2-o/2),s=t.y+t.height-a),{x:l,y:s,width:o,height:a}}function GU({rect:t,delta:e,aspectRatio:n,imageBox:r}){const[i]=e;let{x:s,width:o,height:a}=t;s+=i,o-=i,n&&(a=o/n);let l=t.y+t.height/2-a/2;return s<=r.x&&(s=r.x,o=t.x+t.width-s,n&&(a=o/n,l=t.y+t.height/2-a/2)),l<=r.y&&(l=r.y,s=t.x+t.width-o),l+a>=r.y+r.height&&(l=Math.max(r.y,r.y+r.height-a),a=r.y+r.height-l,n&&(o=a*n),s=t.x+t.width-o),a<ge&&(a=ge,n&&(o=a*n),l=t.y+t.height/2-a/2,s=t.x+t.width-o),o<ge&&(o=ge,n&&(a=o/n),l=t.y+t.height/2-a/2,s=t.x+t.width-o),{x:s,y:l,width:o,height:a}}function KU({rect:t,delta:e,aspectRatio:n,imageBox:r}){const[,i]=e;let{y:s,width:o,height:a}=t;a+=i,n&&(o=a*n);let l=t.x+t.width/2-o/2;return s+a>=r.y+r.height&&(a=r.y+r.height-s,n&&(o=a*n),l=t.x+t.width/2-o/2),l<=r.x&&(l=r.x,s=t.y),l+o>=r.x+r.width&&(l=Math.max(r.x,r.x+r.width-o),o=r.x+r.width-l,n&&(a=o/n),s=t.y),a<ge&&(a=ge,n&&(o=a*n),l=t.x+t.width/2-o/2),o<ge&&(o=ge,n&&(a=o/n),l=t.x+t.width/2-o/2),{x:l,y:s,width:o,height:a}}function QU({rect:t,delta:e,aspectRatio:n,imageBox:r}){const[i]=e;let{x:s,width:o,height:a}=t;o+=i,n&&(a=o/n);let l=t.y+t.height/2-a/2;return s+o>=r.x+r.width&&(o=r.x+r.width-s,n&&(a=o/n),l=t.y+t.height/2-a/2),l<=r.y&&(l=r.y,s=t.x),l+a>=r.y+r.height&&(l=Math.max(r.y,r.y+r.height-a),a=r.y+r.height-l,n&&(o=a*n),s=t.x),a<ge&&(a=ge,n&&(o=a*n),l=t.y+t.height/2-a/2),o<ge&&(o=ge,n&&(a=o/n),l=t.y+t.height/2-a/2),{x:s,y:l,width:o,height:a}}function XU({rect:t,delta:e,aspectRatio:n,imageBox:r}){let[i,s]=e,{x:o,y:a,width:l,height:c}=t;return o+i<r.x&&(i=r.x-o),a+s<r.y&&(s=r.y-a),o+=i,l-=i,a+=s,c-=s,n&&Math.abs(l/c)>n?(s=l/n-c,c+=s,a-=s,a<=r.y&&(c=c-(r.y-a),l=c*n,o=t.x+t.width-l,a=r.y)):n&&(i=c*n-l,l=l+i,o-=i,o<=r.x&&(l=l-(r.x-o),c=l/n,o=r.x,a=t.y+t.height-c)),c<ge&&(c=ge,n&&(l=c*n),o=t.x+t.width-l,a=t.y+t.height-c),l<ge&&(l=ge,n&&(c=l/n),o=t.x+t.width-l,a=t.y+t.height-c),{x:o,y:a,width:l,height:c}}function YU({rect:t,delta:e,aspectRatio:n,imageBox:r}){let[i,s]=e,{x:o,y:a,width:l,height:c}=t;return o+l+i>r.x+r.width&&(i=r.x+r.width-o-l),a+s<r.y&&(s=r.y-a),l+=i,a+=s,c-=s,n&&Math.abs(l/c)>n?(s=l/n-c,c+=s,a-=s,a<=r.y&&(c=c-(r.y-a),l=c*n,o=t.x,a=r.y)):n&&(i=c*n-l,l+=i,o+l>=r.x+r.width&&(l=r.x+r.width-o,c=l/n,o=r.x+r.width-l,a=t.y+t.height-c)),c<ge&&(c=ge,n&&(l=c*n),a=t.y+t.height-c),l<ge&&(l=ge,n&&(c=l/n),a=t.y+t.height-c),{x:o,y:a,width:l,height:c}}function JU({rect:t,delta:e,aspectRatio:n,imageBox:r}){let[i,s]=e,{x:o,y:a,width:l,height:c}=t;return o+i<r.x&&(i=r.x-o),a+c+s>r.y+r.height&&(s=r.y+r.height-a-c),o+=i,l-=i,c+=s,n&&Math.abs(l/c)>n?(s=l/n-c,c+=s,a+c>=r.y+r.height&&(c=r.y+r.height-a,l=c*n,o=t.x+t.width-l,a=r.y+r.height-c)):n&&(i=c*n-l,l+=i,o-=i,o<=r.x&&(l=l-(r.x-o),c=l/n,o=r.x,a=t.y)),c<ge&&(c=ge,n&&(l=c*n),o=t.x+t.width-l),l<ge&&(l=ge,n&&(c=l/n),o=t.x+t.width-l),{x:o,y:a,width:l,height:c}}function ZU({rect:t,delta:e,aspectRatio:n,imageBox:r}){let[i,s]=e,{x:o,y:a,width:l,height:c}=t;return o+l+i>r.x+r.width&&(i=r.x+r.width-o-l),a+c+s>r.y+r.height&&(s=r.y+r.height-a-c),l+=i,c+=s,n&&Math.abs(l/c)>n?(s=l/n-c,c+=s,a+c>=r.y+r.height&&(c=r.y+r.height-a,l=c*n,o=t.x,a=r.y+r.height-c)):n&&(i=c*n-l,l+=i,o+l>=r.x+r.width&&(l=r.x+r.width-o,c=l/n,o=r.x+r.width-l,a=t.y)),c<ge&&(c=ge,n&&(l=c*n)),l<ge&&(l=ge,n&&(c=l/n)),{x:o,y:a,width:l,height:c}}function eV({direction:t,...e}){switch(t){case"n":return qU(e);case"w":return GU(e);case"s":return KU(e);case"e":return QU(e);case"nw":return XU(e);case"ne":return YU(e);case"sw":return JU(e);case"se":return ZU(e);default:return e.rect}}function tV(t,[e,n]){return t.x<=e&&e<=t.x+t.width&&t.y<=n&&n<=t.y+t.height}function nV(t,e){return t.x>=e.x&&t.y>=e.y&&t.x+t.width<=e.x+e.width&&t.y+t.height<=e.y+e.height}function rV(t,e){return Math.abs(t.width/t.height-e)<.1}function cl({width:t,height:e},n){let r=n/90%2!==0;return{width:r?e:t,height:r?t:e}}function iV(t,e,n){const r=t/e;let i,s;r>n?(i=Math.round(e*n),s=e):(i=t,s=Math.round(t/n));const o=Math.round((t-i)/2),a=Math.round((e-s)/2);return o+i>t&&(i=t-o),a+s>e&&(s=e-a),{x:o,y:a,width:i,height:s}}function eh(t){return{x:Math.round(t.x),y:Math.round(t.y),width:Math.round(t.width),height:Math.round(t.height)}}function Vo(t,e,n){return Math.min(Math.max(t,e),n)}const e2=t=>{if(!t)return[];const[e,n]=t.split(":").map(Number);if(!Number.isFinite(e)||!Number.isFinite(n)){console.error(`Invalid crop preset: ${t}`);return}return[{type:"aspect-ratio",width:e,height:n}]},or=Object.freeze({LOCAL:"local",DROP_AREA:"drop-area",URL_TAB:"url-tab",CAMERA:"camera",EXTERNAL:"external",API:"js-api"});function sV(t){return PI({...t,libraryName:Hy,libraryVersion:Wy})}const t2=({type:t,message:e,...n})=>({type:t,message:e,...n}),_o=t2,tp=t2,Lm=["image/*","image/heif","image/heif-sequence","image/heic","image/heic-sequence","image/avif","image/avif-sequence",".heif",".heifs",".heic",".heics",".avif",".avifs"],qw=t=>t?t.filter(e=>typeof e=="string").map(e=>Yr(e)).flat():[],n2=(t,e)=>e.some(n=>n.endsWith("*")?(n=n.replace("*",""),t.startsWith(n)):t===n),oV=(t,e)=>e.some(n=>n.startsWith(".")?t.toLowerCase().endsWith(n.toLowerCase()):!1),Gw=t=>{let e=t==null?void 0:t.type;return e?n2(e,Lm):!1},nr=1e3,ys=Object.freeze({AUTO:"auto",BYTE:"byte",KB:"kb",MB:"mb",GB:"gb",TB:"tb",PB:"pb"}),hl=t=>Math.ceil(t*100)/100,aV=(t,e=ys.AUTO)=>{const n=e===ys.AUTO;if(e===ys.BYTE||n&&t<nr**1){const r=xI("en-US",t),i={one:"byte",other:"bytes"}[r];return`${t} ${i}`}return e===ys.KB||n&&t<nr**2?`${hl(t/nr**1)} KB`:e===ys.MB||n&&t<nr**3?`${hl(t/nr**2)} MB`:e===ys.GB||n&&t<nr**4?`${hl(t/nr**3)} GB`:e===ys.TB||n&&t<nr**5?`${hl(t/nr**4)} TB`:`${hl(t/nr**5)} PB`},Kw=new Set;function r2(t){Kw.has(t)||(Kw.add(t),console.warn(t))}const Qw="[Typed State] Wrong property name: ",lV="[Typed State] Wrong property type: ";class uV{constructor(e,n){this.__typedSchema=e,this.__ctxId=n||Vu.generate(),this.__schema=Object.keys(e).reduce((r,i)=>(r[i]=e[i].value,r),{}),this.__data=xe.registerCtx(this.__schema,this.__ctxId)}get uid(){return this.__ctxId}setValue(e,n){if(!this.__typedSchema.hasOwnProperty(e)){console.warn(Qw+e);return}let r=this.__typedSchema[e];if((n==null?void 0:n.constructor)===r.type||n instanceof r.type||r.nullable&&n===null){this.__data.pub(e,n);return}console.warn(lV+e)}setMultipleValues(e){for(let n in e)this.setValue(n,e[n])}getValue(e){if(!this.__typedSchema.hasOwnProperty(e)){console.warn(Qw+e);return}return this.__data.read(e)}subscribe(e,n){return this.__data.sub(e,n)}remove(){xe.deleteCtx(this.__ctxId)}}class cV{constructor(e){this.__typedSchema=e.typedSchema,this.__ctxId=e.ctxName||Vu.generate(),this.__data=xe.registerCtx({},this.__ctxId),this.__watchList=e.watchList||[],this.__subsMap=Object.create(null),this.__propertyObservers=new Set,this.__collectionObservers=new Set,this.__items=new Set,this.__removed=new Set,this.__added=new Set;let n=Object.create(null);this.__notifyObservers=(r,i)=>{this.__observeTimeout&&window.clearTimeout(this.__observeTimeout),n[r]||(n[r]=new Set),n[r].add(i),this.__observeTimeout=window.setTimeout(()=>{Object.keys(n).length!==0&&(this.__propertyObservers.forEach(s=>{s({...n})}),n=Object.create(null))})}}notify(){this.__notifyTimeout&&window.clearTimeout(this.__notifyTimeout),this.__notifyTimeout=window.setTimeout(()=>{let e=new Set(this.__added),n=new Set(this.__removed);this.__added.clear(),this.__removed.clear();for(const r of this.__collectionObservers)r==null||r([...this.__items],e,n)})}observeCollection(e){return this.__collectionObservers.add(e),this.__items.size>0&&this.notify(),()=>{this.unobserveCollection(e)}}unobserveCollection(e){var n;(n=this.__collectionObservers)==null||n.delete(e)}add(e){let n=new uV(this.__typedSchema);for(let r in e)n.setValue(r,e[r]);return this.__items.add(n.uid),this.notify(),this.__data.add(n.uid,n),this.__added.add(n),this.__watchList.forEach(r=>{this.__subsMap[n.uid]||(this.__subsMap[n.uid]=[]),this.__subsMap[n.uid].push(n.subscribe(r,()=>{this.__notifyObservers(r,n.uid)}))}),n.uid}read(e){return this.__data.read(e)}readProp(e,n){return this.read(e).getValue(n)}publishProp(e,n,r){this.read(e).setValue(n,r)}remove(e){this.__removed.add(this.__data.read(e)),this.__items.delete(e),this.notify(),this.__data.pub(e,null),delete this.__subsMap[e]}clearAll(){this.__items.forEach(e=>{this.remove(e)})}observeProperties(e){return this.__propertyObservers.add(e),()=>{this.unobserveProperties(e)}}unobserveProperties(e){var n;(n=this.__propertyObservers)==null||n.delete(e)}findItems(e){let n=[];return this.__items.forEach(r=>{let i=this.read(r);e(i)&&n.push(r)}),n}items(){return[...this.__items]}get size(){return this.__items.size}destroy(){xe.deleteCtx(this.__ctxId),this.__propertyObservers=null,this.__collectionObservers=null;for(let e in this.__subsMap)this.__subsMap[e].forEach(n=>{n.remove()}),delete this.__subsMap[e]}}const hV=t=>{const e=new Map;return(...n)=>{const r=JSON.stringify(n);if(e.has(r))return e.get(r);const i=t(...n);return e.set(r,i),i}};function dV(t){let e=!1;return setTimeout(()=>{e=!0},0),r=>(...i)=>(e&&r2(t),r(...i))}function fV(t){const e={progress:()=>t.$["*commonProgress"],errors:()=>t.$["*collectionErrors"],group:()=>t.$["*groupInfo"],totalCount:()=>t.uploadCollection.size,failedCount:()=>n.failedEntries.length,successCount:()=>n.successEntries.length,uploadingCount:()=>n.uploadingEntries.length,status:()=>n.isFailed?"failed":n.isUploading?"uploading":n.isSuccess?"success":"idle",isSuccess:()=>n.errors.length===0&&n.successEntries.length===n.allEntries.length,isUploading:()=>n.allEntries.some(i=>i.status==="uploading"),isFailed:()=>n.errors.length>0||n.failedEntries.length>0,allEntries:()=>t.getOutputData(),successEntries:()=>n.allEntries.filter(i=>i.status==="success"),failedEntries:()=>n.allEntries.filter(i=>i.status==="failed"),uploadingEntries:()=>n.allEntries.filter(i=>i.status==="uploading"),idleEntries:()=>n.allEntries.filter(i=>i.status==="idle")},n={},r=dV("You're trying to access the OutputCollectionState asynchronously. In this case, the data you retrieve will be newer than it was when the OutputCollectionState was created or when the event was dispatched. If you want to retain the state at a specific moment in time, you should use the spread operator like this: `{...outputCollectionState}` or `{...e.detail}`");for(const[i,s]of Object.entries(e)){const o=i,l=hV(r(s));Object.defineProperty(n,o,{get:l,enumerable:!0})}return n}const pV=Object.freeze({file:{type:File,value:null},externalUrl:{type:String,value:null},fileName:{type:String,value:null,nullable:!0},fileSize:{type:Number,value:null,nullable:!0},lastModified:{type:Number,value:Date.now()},uploadProgress:{type:Number,value:0},uuid:{type:String,value:null},isImage:{type:Boolean,value:!1},mimeType:{type:String,value:null,nullable:!0},ctxName:{type:String,value:null},cdnUrl:{type:String,value:null},cdnUrlModifiers:{type:String,value:null},fileInfo:{type:Na,value:null},isUploading:{type:Boolean,value:!1},abortController:{type:AbortController,value:null,nullable:!0},thumbUrl:{type:String,value:null,nullable:!0},silent:{type:Boolean,value:!1},source:{type:String,value:!1,nullable:!0},fullPath:{type:String,value:null,nullable:!0},metadata:{type:Object,value:null,nullable:!0},errors:{type:Array,value:[]},uploadError:{type:Error,value:null,nullable:!0},isRemoved:{type:Boolean,value:!1}}),mV=/[a-f0-9]{8}-[a-f0-9]{4}-[a-f0-9]{4}-[a-f0-9]{4}-[a-f0-9]{12}/i,gV=new RegExp(`^/?(${mV.source})(?:/(-/(?:[^/]+/)+)?([^/]*))?$`,"i"),yV=({url:t,cdnBase:e})=>{const n=new URL(e),r=new URL(t);if(n.host!==r.host)return null;const[,i,s,o]=gV.exec(r.pathname);return{uuid:i,cdnUrlModifiers:s||"",filename:o||null}};class Ke extends fe{constructor(){super(...arguments);U(this,"couldBeCtxOwner",!1);U(this,"isCtxOwner",!1);U(this,"init$",BI(this));U(this,"__initialUploadMetadata",null);U(this,"_fileValidators",[this._validateIsImage.bind(this),this._validateFileType.bind(this),this._validateMaxSizeLimit.bind(this),this._validateUploadError.bind(this)]);U(this,"_collectionValidators",[n=>{const r=n.size,i=this.cfg.multiple?this.cfg.multipleMin:0,s=this.cfg.multiple?this.cfg.multipleMax:1;if(i&&r<i){const o=this.l10n("files-count-limit-error-too-few",{min:i,max:s,total:r});return tp({type:"TOO_FEW_FILES",message:o,total:r,min:i,max:s})}if(s&&r>s){const o=this.l10n("files-count-limit-error-too-many",{min:i,max:s,total:r});return tp({type:"TOO_MANY_FILES",message:o,total:r,min:i,max:s})}},n=>{if(n.items().some(r=>n.readProp(r,"errors").length>0))return tp({type:"SOME_FILES_HAS_ERRORS",message:this.l10n("some-files-were-not-uploaded")})}]);U(this,"uploadAll",()=>{const n=this.uploadCollection.items().filter(r=>{const i=this.uploadCollection.read(r);return!i.getValue("isRemoved")&&!i.getValue("isUploading")&&!i.getValue("fileInfo")});n.length!==0&&(this.$["*uploadTrigger"]=new Set(n),this.emit(tt.COMMON_UPLOAD_START,this.getOutputCollectionState()))});U(this,"_flushOutputItems",Mn(async()=>{if(this.getOutputData().length!==this.uploadCollection.size)return;const r=this.getOutputCollectionState();this.$["*collectionState"]=r,this.emit(tt.CHANGE,()=>this.getOutputCollectionState(),{debounce:!0}),this.cfg.groupOutput&&r.totalCount>0&&r.status==="success"&&this._createGroup(r)},300));U(this,"_handleCollectionUpdate",(n,r,i)=>{var s;(r.size||i.size)&&(this.$["*groupInfo"]=null),this._runFileValidators(),this._runCollectionValidators();for(const o of r)o.getValue("silent")||this.emit(tt.FILE_ADDED,this.getOutputItem(o.uid));for(const o of i)this.$["*uploadTrigger"].delete(o.uid),(s=o.getValue("abortController"))==null||s.abort(),o.setMultipleValues({isRemoved:!0,abortController:null,isUploading:!1,uploadProgress:0}),URL.revokeObjectURL(o==null?void 0:o.getValue("thumbUrl")),this.emit(tt.FILE_REMOVED,this.getOutputItem(o.uid));this.$["*uploadList"]=n.map(o=>({uid:o})),this._flushCommonUploadProgress(),this._flushOutputItems()});U(this,"_handleCollectionPropertiesUpdate",n=>{this._flushOutputItems();const r=this.uploadCollection,i=[...new Set(Object.entries(n).filter(([s])=>["uploadError","fileInfo"].includes(s)).map(([,s])=>[...s]).flat())];if(i.length>0&&setTimeout(()=>{this._runFileValidators(i)}),n.uploadProgress){for(const s of n.uploadProgress){const{isUploading:o,silent:a}=xe.getCtx(s).store;o&&!a&&this.emit(tt.FILE_UPLOAD_PROGRESS,this.getOutputItem(s))}this._flushCommonUploadProgress()}if(n.isUploading)for(const s of n.isUploading){const{isUploading:o,silent:a}=xe.getCtx(s).store;o&&!a&&this.emit(tt.FILE_UPLOAD_START,this.getOutputItem(s))}if(n.fileInfo){for(const a of n.fileInfo){const{fileInfo:l,silent:c}=xe.getCtx(a).store;l&&!c&&this.emit(tt.FILE_UPLOAD_SUCCESS,this.getOutputItem(a))}this.cfg.cropPreset&&this.setInitialCrop();let s=r.findItems(a=>!!a.getValue("fileInfo"));r.findItems(a=>a.getValue("errors").length>0).length===0&&r.size===s.length&&this.emit(tt.COMMON_UPLOAD_SUCCESS,this.getOutputCollectionState())}if(n.errors)for(const s of n.errors){const{errors:o}=xe.getCtx(s).store;o.length>0&&(this.emit(tt.FILE_UPLOAD_FAILED,this.getOutputItem(s)),this.emit(tt.COMMON_UPLOAD_FAILED,()=>this.getOutputCollectionState(),{debounce:!0}))}n.cdnUrl&&([...n.cdnUrl].filter(o=>{var a;return!!((a=this.uploadCollection.read(o))!=null&&a.getValue("cdnUrl"))}).forEach(o=>{this.emit(tt.FILE_URL_CHANGED,this.getOutputItem(o))}),this.$["*groupInfo"]=null)});U(this,"_flushCommonUploadProgress",()=>{let n=0;const i=[...this.$["*uploadTrigger"]].filter(o=>!!this.uploadCollection.read(o));i.forEach(o=>{const a=this.uploadCollection.readProp(o,"uploadProgress");n+=a});const s=i.length?Math.round(n/i.length):0;this.$["*commonProgress"]!==s&&(this.$["*commonProgress"]=s,this.emit(tt.COMMON_UPLOAD_PROGRESS,this.getOutputCollectionState()))})}setUploadMetadata(n){r2("setUploadMetadata is deprecated. Use `metadata` instance property on `lr-config` block instead. See migration guide: https://uploadcare.com/docs/file-uploader/migration-to-0.25.0/"),this.connectedOnce?this.$["*uploadMetadata"]=n:this.__initialUploadMetadata=n}get hasCtxOwner(){return this.hasBlockInCtx(n=>n instanceof Ke?n.isCtxOwner&&n.isConnected&&n!==this:!1)}initCallback(){if(super.initCallback(),!this.$["*uploadCollection"]){let n=new cV({typedSchema:pV,watchList:["uploadProgress","uploadError","fileInfo","errors","cdnUrl","isUploading"]});this.$["*uploadCollection"]=n}!this.hasCtxOwner&&this.couldBeCtxOwner&&this.initCtxOwner()}destroyCtxCallback(){var n,r;(n=this._unobserveCollectionProperties)==null||n.call(this),(r=this._unobserveCollection)==null||r.call(this),this.uploadCollection.destroy(),this.$["*uploadCollection"]=null,super.destroyCtxCallback()}initCtxOwner(){this.isCtxOwner=!0,this._unobserveCollection=this.uploadCollection.observeCollection(this._handleCollectionUpdate),this._unobserveCollectionProperties=this.uploadCollection.observeProperties(this._handleCollectionPropertiesUpdate);const n=()=>{this._runFileValidators(),this._runCollectionValidators()};this.subConfigValue("maxLocalFileSizeBytes",n),this.subConfigValue("multipleMin",n),this.subConfigValue("multipleMax",n),this.subConfigValue("multiple",n),this.subConfigValue("imgOnly",n),this.subConfigValue("accept",n),this.subConfigValue("maxConcurrentRequests",r=>{this.$["*uploadQueue"].concurrency=Number(r)||1}),this.__initialUploadMetadata&&(this.$["*uploadMetadata"]=this.__initialUploadMetadata)}addFileFromUrl(n,{silent:r,fileName:i,source:s}={}){const o=this.uploadCollection.add({externalUrl:n,fileName:i??null,silent:r??!1,source:s??or.API});return this.getOutputItem(o)}addFileFromUuid(n,{silent:r,fileName:i,source:s}={}){const o=this.uploadCollection.add({uuid:n,fileName:i??null,silent:r??!1,source:s??or.API});return this.getOutputItem(o)}addFileFromCdnUrl(n,{silent:r,fileName:i,source:s}={}){const o=yV({url:n,cdnBase:this.cfg.cdnCname});if(!o)throw new Error("Invalid CDN URL");const a=this.uploadCollection.add({uuid:o.uuid,cdnUrl:n,cdnUrlModifiers:o.cdnUrlModifiers,fileName:i??o.filename??null,silent:r??!1,source:s??or.API});return this.getOutputItem(a)}addFileFromObject(n,{silent:r,fileName:i,source:s,fullPath:o}={}){const a=this.uploadCollection.add({file:n,isImage:Gw(n),mimeType:n.type,fileName:i??n.name,fileSize:n.size,silent:r??!1,source:s??or.API,fullPath:o??null});return this.getOutputItem(a)}addFiles(n){return console.warn("`addFiles` method is deprecated. Please use `addFileFromObject`, `addFileFromUrl` or `addFileFromUuid` instead."),n.map(r=>{const i=this.uploadCollection.add({file:r,isImage:Gw(r),mimeType:r.type,fileName:r.name,fileSize:r.size});return this.getOutputItem(i)})}removeFileByInternalId(n){if(!this.uploadCollection.read(n))throw new Error(`File with internalId ${n} not found`);this.uploadCollection.remove(n)}removeAllFiles(){this.uploadCollection.clearAll()}openSystemDialog(n={}){let r=Gy(qw([this.cfg.accept??"",...this.cfg.imgOnly?Lm:[]]));this.cfg.accept&&this.cfg.imgOnly&&console.warn("There could be a mistake.\nBoth `accept` and `imgOnly` parameters are set.\nThe value of `accept` will be concatenated with the internal image mime types list."),this.fileInput=document.createElement("input"),this.fileInput.type="file",this.fileInput.multiple=this.cfg.multiple,n.captureCamera?(this.fileInput.capture=this.cfg.cameraCapture,this.fileInput.accept="image/*"):this.fileInput.accept=r,this.fileInput.dispatchEvent(new MouseEvent("click")),this.fileInput.onchange=()=>{[...this.fileInput.files].forEach(i=>this.addFileFromObject(i,{source:n.captureCamera?or.CAMERA:or.LOCAL})),this.$["*currentActivity"]=fe.activities.UPLOAD_LIST,this.setOrAddState("*modalActive",!0),this.fileInput.value="",this.fileInput=null}}get sourceList(){let n=[];return this.cfg.sourceList&&(n=Yr(this.cfg.sourceList)),n}initFlow(n=!1){var r;if(this.uploadCollection.size>0&&!n)this.set$({"*currentActivity":fe.activities.UPLOAD_LIST}),this.setOrAddState("*modalActive",!0);else if(((r=this.sourceList)==null?void 0:r.length)===1){const i=this.sourceList[0];if(i==="local"){this.$["*currentActivity"]=fe.activities.UPLOAD_LIST,this==null||this.openSystemDialog();return}const s=this.$["*blocksRegistry"],o=l=>"type"in l&&l.type===i,a=[...s].find(o);a==null||a.activate(),this.$["*currentActivity"]&&this.setOrAddState("*modalActive",!0)}else this.set$({"*currentActivity":fe.activities.START_FROM}),this.setOrAddState("*modalActive",!0)}doneFlow(){this.set$({"*currentActivity":this.doneActivity,"*history":this.doneActivity?[this.doneActivity]:[]}),this.$["*currentActivity"]||this.setOrAddState("*modalActive",!1)}get uploadCollection(){return this.$["*uploadCollection"]}_validateFileType(n){const r=this.cfg.imgOnly,i=this.cfg.accept,s=qw([...r?Lm:[],i]);if(!s.length)return;const o=n.mimeType,a=n.name;if(!o||!a)return;const l=n2(o,s),c=oV(a,s);if(!l&&!c)return _o({type:"FORBIDDEN_FILE_TYPE",message:this.l10n("file-type-not-allowed"),entry:n})}_validateMaxSizeLimit(n){const r=this.cfg.maxLocalFileSizeBytes,i=n.size;if(r&&i&&i>r)return _o({type:"FILE_SIZE_EXCEEDED",message:this.l10n("files-max-size-limit-error",{maxFileSize:aV(r)}),entry:n})}_validateUploadError(n,r){const i=r==null?void 0:r.getValue("uploadError");if(i){if(i instanceof cn)return _o({type:"UPLOAD_ERROR",message:i.message,entry:n,error:i});if(i instanceof $u)return _o({type:"NETWORK_ERROR",message:i.message,entry:n,error:i});{const s=i instanceof Error?i:new Error("Unknown error",{cause:i});return _o({type:"UNKNOWN_ERROR",message:s.message,entry:n,error:s})}}}_validateIsImage(n){const r=this.cfg.imgOnly,i=n.isImage;if(!(!r||i)&&!(!n.fileInfo&&n.externalUrl)&&!(!n.fileInfo&&!n.mimeType))return _o({type:"NOT_AN_IMAGE",message:this.l10n("images-only-accepted"),entry:n})}_runFileValidatorsForEntry(n){const r=this.getOutputItem(n.uid),i=[];for(const s of this._fileValidators){const o=s(r,n);o&&i.push(o)}n.setValue("errors",i)}_runFileValidators(n){const r=n??this.uploadCollection.items();for(const i of r){const s=this.uploadCollection.read(i);s&&this._runFileValidatorsForEntry(s)}}_runCollectionValidators(){const n=this.uploadCollection,r=[];for(const i of this._collectionValidators){const s=i(n);s&&(Array.isArray(s)?r.push(...s):r.push(s))}this.$["*collectionErrors"]=r,r.length>0&&this.emit(tt.COMMON_UPLOAD_FAILED,()=>this.getOutputCollectionState(),{debounce:!0})}async _createGroup(n){const r=this.getUploadClientOptions(),i=n.allEntries.map(l=>l.uuid+(l.cdnUrlModifiers?`/${l.cdnUrlModifiers}`:"")),s=new AbortController,o=await _U(i,{...r,signal:s.signal});if(this.$["*collectionState"]!==n){s.abort();return}this.$["*groupInfo"]=o;const a=this.getOutputCollectionState();this.emit(tt.GROUP_CREATED,a),this.emit(tt.CHANGE,()=>this.getOutputCollectionState(),{debounce:!0}),this.$["*collectionState"]=a}setInitialCrop(){const n=e2(this.cfg.cropPreset);if(n){const[r]=n,i=this.uploadCollection.findItems(s=>{var o;return s.getValue("fileInfo")&&s.getValue("isImage")&&!((o=s.getValue("cdnUrlModifiers"))!=null&&o.includes("/crop/"))}).map(s=>this.uploadCollection.read(s));for(const s of i){const o=s.getValue("fileInfo"),{width:a,height:l}=o.imageInfo,c=r.width/r.height,h=iV(a,l,c),f=Xi(`crop/${h.width}x${h.height}/${h.x},${h.y}`,"preview");s.setMultipleValues({cdnUrlModifiers:f,cdnUrl:Pn(s.getValue("cdnUrl"),f)}),this.uploadCollection.size===1&&this.cfg.useCloudImageEditor&&this.hasBlockInCtx(p=>p.activityType===fe.activities.CLOUD_IMG_EDIT)&&(this.$["*focusedEntry"]=s,this.$["*currentActivity"]=fe.activities.CLOUD_IMG_EDIT)}}}async getMetadataFor(n){const r=this.cfg.metadata??this.$["*uploadMetadata"];if(typeof r=="function"){const i=this.getOutputItem(n);return await r(i)}return r}getUploadClientOptions(){return{store:this.cfg.store,publicKey:this.cfg.pubkey,baseCDN:this.cfg.cdnCname,baseURL:this.cfg.baseUrl,userAgent:sV,integration:this.cfg.userAgentIntegration,secureSignature:this.cfg.secureSignature,secureExpire:this.cfg.secureExpire,retryThrottledRequestMaxTimes:this.cfg.retryThrottledRequestMaxTimes,multipartMinFileSize:this.cfg.multipartMinFileSize,multipartChunkSize:this.cfg.multipartChunkSize,maxConcurrentRequests:this.cfg.multipartMaxConcurrentRequests,multipartMaxAttempts:this.cfg.multipartMaxAttempts,checkForUrlDuplicates:!!this.cfg.checkForUrlDuplicates,saveUrlForRecurrentUploads:!!this.cfg.saveUrlForRecurrentUploads}}getOutputItem(n){const r=xe.getCtx(n).store,i=r.fileInfo;let s=r.isRemoved?"removed":r.errors.length>0?"failed":r.fileInfo?"success":r.isUploading?"uploading":"idle";return{uuid:(i==null?void 0:i.uuid)??r.uuid??null,internalId:n,name:(i==null?void 0:i.originalFilename)??r.fileName,size:(i==null?void 0:i.size)??r.fileSize,isImage:(i==null?void 0:i.isImage)??r.isImage,mimeType:(i==null?void 0:i.mimeType)??r.mimeType,file:r.file,externalUrl:r.externalUrl,cdnUrlModifiers:r.cdnUrlModifiers,cdnUrl:r.cdnUrl??(i==null?void 0:i.cdnUrl)??null,fullPath:r.fullPath,uploadProgress:r.uploadProgress,fileInfo:i??null,metadata:r.metadata??(i==null?void 0:i.metadata)??null,isSuccess:s==="success",isUploading:s==="uploading",isFailed:s==="failed",isRemoved:s==="removed",errors:r.errors,status:s}}getOutputData(n){return(n?this.uploadCollection.findItems(n):this.uploadCollection.items()).map(s=>this.getOutputItem(s))}getOutputCollectionState(){return fV(this)}}Ke.extSrcList=Object.freeze({FACEBOOK:"facebook",DROPBOX:"dropbox",GDRIVE:"gdrive",GPHOTOS:"gphotos",INSTAGRAM:"instagram",FLICKR:"flickr",VK:"vk",EVERNOTE:"evernote",BOX:"box",ONEDRIVE:"onedrive",HUDDLE:"huddle"});Ke.sourceTypes=Object.freeze({LOCAL:"local",URL:"url",CAMERA:"camera",DRAW:"draw",...Ke.extSrcList});const Xd=t=>{var e;return(e=t.match(/[A-Z]{2,}(?=[A-Z][a-z]+[0-9]*|\b)|[A-Z]?[a-z]+[0-9]*|[A-Z]|[0-9]+/g))==null?void 0:e.map(n=>n.toLowerCase()).join("-")},At=t=>String(t),rr=t=>{const e=Number(t);if(Number.isNaN(e))throw new Error(`Invalid number: "${t}"`);return e},nt=t=>{if(typeof t>"u"||t===null)return!1;if(typeof t=="boolean")return t;if(t==="true"||t==="")return!0;if(t==="false")return!1;throw new Error(`Invalid boolean: "${t}"`)},vV=t=>t==="auto"?t:nt(t),_V=t=>{const e=At(t);if(e!=="user"&&e!=="environment"&&e!=="")throw new Error(`Invalid "cameraCapture" value: "${e}"`);return e},wV=t=>{if(typeof t=="object"&&!Array.isArray(t)||typeof t=="function")return t;throw new Error("Invalid metadata value. Must be an object or function.")},EV=t=>{if(typeof t=="object")return t;throw new Error("Invalid localeDefinitionOverride value. Must be an object.")},bV={pubkey:At,multiple:nt,multipleMin:rr,multipleMax:rr,confirmUpload:nt,imgOnly:nt,accept:At,externalSourcesPreferredTypes:At,store:vV,cameraMirror:nt,cameraCapture:_V,sourceList:At,maxLocalFileSizeBytes:rr,thumbSize:rr,showEmptyList:nt,useLocalImageEditor:nt,useCloudImageEditor:nt,cloudImageEditorTabs:At,removeCopyright:nt,cropPreset:At,imageShrink:At,modalScrollLock:nt,modalBackdropStrokes:nt,sourceListWrap:nt,remoteTabSessionKey:At,cdnCname:At,baseUrl:At,socialBaseUrl:At,secureSignature:At,secureExpire:At,secureDeliveryProxy:At,retryThrottledRequestMaxTimes:rr,multipartMinFileSize:rr,multipartChunkSize:rr,maxConcurrentRequests:rr,multipartMaxConcurrentRequests:rr,multipartMaxAttempts:rr,checkForUrlDuplicates:nt,saveUrlForRecurrentUploads:nt,groupOutput:nt,userAgentIntegration:At,debug:nt,localeName:At,metadata:wV,localeDefinitionOverride:EV},TV=(t,e)=>{if(!(typeof e>"u"||e===null))try{return bV[t](e)}catch(n){return console.error(`Invalid value for config key "${t}".`,n),zi[t]}},Ky=[...new Set(["debug",...Object.keys(zi)])],CV=["metadata","localeDefinitionOverride"],IV=t=>CV.includes(t),va=Ky.filter(t=>!IV(t)),SV={...Object.fromEntries(va.map(t=>[Xd(t),t])),...Object.fromEntries(va.map(t=>[t.toLowerCase(),t]))},AV={...Object.fromEntries(va.map(t=>[Xd(t),kn(t)])),...Object.fromEntries(va.map(t=>[t.toLowerCase(),kn(t)]))},Xw=t=>"__"+t;class Qy extends Ne{constructor(){super();U(this,"requireCtxName",!0);this.init$={...this.init$,...Object.fromEntries(Object.entries(zi).map(([n,r])=>[kn(n),r]))}}_flushValueToAttribute(n,r){if(va.includes(n)){const i=[...new Set([Xd(n),n.toLowerCase()])];for(const s of i)typeof r>"u"||r===null?this.removeAttribute(s):this.getAttribute(s)!==r.toString()&&this.setAttribute(s,r.toString())}}_flushValueToState(n,r){this.$[kn(n)]!==r&&(typeof r>"u"||r===null?this.$[kn(n)]=zi[n]:this.$[kn(n)]=r)}_setValue(n,r){const i=this,s=TV(n,r),o=Xw(n);i[o]!==s&&(this._assertSameValueDifferentReference(n,i[o],s),i[o]=s,this._flushValueToAttribute(n,s),this._flushValueToState(n,s),this.debugPrint(`[lr-config] "${n}"`,s))}_getValue(n){const r=this,i=Xw(n);return r[i]}_assertSameValueDifferentReference(n,r,i){this.cfg.debug&&JSON.stringify(i)===JSON.stringify(r)&&(console.warn(`[lr-config] Option "${n}" value is the same as the previous one but the reference is different`),console.warn("[lr-config] You should avoid changing the reference of the object to prevent unnecessary calculations"),console.warn(`[lr-config] "${n}" previous value:`,r),console.warn(`[lr-config] "${n}" new value:`,i))}initCallback(){super.initCallback();const n=this;for(const r of va)this.sub(kn(r),i=>{this._setValue(r,i)},!1);for(const r of Ky){const i=n[r]??this.$[kn(r)];i!==zi[r]&&this._setValue(r,i),Object.defineProperty(this,r,{set:s=>{this._setValue(r,s)},get:()=>this._getValue(r)})}}attributeChangedCallback(n,r,i){if(r===i)return;const s=this,o=SV[n];s[o]=i}}Qy.bindAttributes(AV);for(const t of Ky)Qy.prototype[t]=void 0;const i2=Qy;class Xy extends Ne{constructor(){super(...arguments);U(this,"init$",{...this.init$,name:"",path:"",size:"24",viewBox:""})}initCallback(){super.initCallback(),this.sub("name",n=>{if(!n)return;let r=this.getCssData(`--icon-${n}`);r&&(this.$.path=r)}),this.sub("path",n=>{if(!n)return;n.trimStart().startsWith("<")?(this.setAttribute("raw",""),this.ref.svg.innerHTML=n):(this.removeAttribute("raw"),this.ref.svg.innerHTML=`<path fill-rule="evenodd" d="${n}"></path>`)}),this.sub("size",n=>{this.$.viewBox=`0 0 ${n} ${n}`})}}Xy.template=`
  <svg ref="svg" xmlns="http://www.w3.org/2000/svg" set="@viewBox: viewBox; @height: size; @width: size"></svg>
`;Xy.bindAttributes({name:"name",size:"size"});const xV=t=>[...new Set(t)],kV=t=>Object.entries(t).filter(([e,n])=>n!==void 0&&n!=="").map(([e,n])=>e==="cdn-operations"||e==="analytics"?n:`${e}/${n}`),PV="https://ucarecdn.com",qh=Object.freeze({"dev-mode":{},pubkey:{},uuid:{},src:{},lazy:{default:1},intersection:{},breakpoints:{},"cdn-cname":{default:PV},"proxy-cname":{},"secure-delivery-proxy":{},"hi-res-support":{default:1},"ultra-res-support":{},format:{},"cdn-operations":{},progressive:{},quality:{},"is-background-for":{},"is-preview-blur":{default:1}}),Cl="--lr-img-",Yw="unresolved",xc=2,kc=3,Jw=!window.location.host.trim()||window.location.host.includes(":")||window.location.hostname.includes("localhost"),Zw=3e3,e1=5e3,t1=Object.freeze({PREVIEW:"PREVIEW",MAIN:"MAIN"}),s2=Object.create(null);var f1;for(let t in qh)s2[Cl+t]=((f1=qh[t])==null?void 0:f1.default)||"";class RV extends zd{constructor(){super(...arguments);U(this,"cssInit$",s2)}$$(n){return this.$[Cl+n]}set$$(n){for(let r in n)this.$[Cl+r]=n[r]}sub$$(n,r){this.sub(Cl+n,i=>{i===null||i===""||r(i)})}analyticsParams(){return`-/@clib/${Hy}/${Wy}/lr-img/`}initAttributes(n){[...this.attributes].forEach(r=>{qh[r.name]||n.setAttribute(r.name,r.value)})}initIntersection(n,r){let i={root:null,rootMargin:"0px"};this._isnObserver=new IntersectionObserver(s=>{s.forEach(o=>{o.isIntersecting&&(r(),this._isnObserver.unobserve(n))})},i),this._isnObserver.observe(n),this._observed||(this._observed=new Set),this._observed.add(n)}destroyCallback(){super.destroyCallback(),this._isnObserver&&(this._observed.forEach(n=>{this._isnObserver.unobserve(n)}),this._isnObserver=null),xe.deleteCtx(this)}static get observedAttributes(){return Object.keys(qh)}attributeChangedCallback(n,r,i){window.setTimeout(()=>{this.$[Cl+n]=i})}}class NV extends RV{constructor(){super(...arguments);U(this,"_img",new Image);U(this,"_imgPreview",new Image)}_fmtAbs(n){return!n.includes("//")&&!Jw&&(n=new URL(n,document.baseURI).href),n}_validateSize(n){if((n==null?void 0:n.trim())!==""){let r=n.match(/\d+/)[0],i=n.match(/[a-zA-Z]+/)[0];const s=parseInt(r,10);if(Number(s)>e1&&this.hasFormatJPG)return e1+i;if(Number(s)>Zw&&!this.hasFormatJPG)return Zw+i}return n}_getCdnModifiers(n,r){const i={format:this.$$("format"),quality:this.$$("quality"),resize:this._validateSize(n),blur:r,"cdn-operations":this.$$("cdn-operations"),analytics:this.analyticsParams()};return Xi(...kV(i))}_getUrlBase(n="",r=""){if(this.$$("src").startsWith("data:")||this.$$("src").startsWith("blob:"))return this.$$("src");if(Jw&&this.$$("src")&&!this.$$("src").includes("//"))return this._proxyUrl(this.$$("src"));let i=this._getCdnModifiers(n,r);if(this.$$("src").startsWith(this.$$("cdn-cname")))return Pn(this.$$("src"),i);if(this.$$("cdn-cname")&&this.$$("uuid"))return this._proxyUrl(Pn(mu(this.$$("cdn-cname"),this.$$("uuid")),i));if(this.$$("uuid"))return this._proxyUrl(Pn(mu(this.$$("cdn-cname"),this.$$("uuid")),i));if(this.$$("proxy-cname"))return this._proxyUrl(Pn(this.$$("proxy-cname"),i,this._fmtAbs(this.$$("src"))));if(this.$$("pubkey"))return this._proxyUrl(Pn(`https://${this.$$("pubkey")}.ucr.io/`,i,this._fmtAbs(this.$$("src"))))}_proxyUrl(n){return this.$$("secure-delivery-proxy")?Pm(this.$$("secure-delivery-proxy"),{previewUrl:n},{transform:i=>window.encodeURIComponent(i)}):n}_getElSize(n,r=1,i=!0){let s=n.getBoundingClientRect(),o=r*Math.round(s.width),a=i?"":r*Math.round(s.height);return o||a?`${o||""}x${a||""}`:null}_setupEventProxy(n){let r=s=>{s.stopPropagation();let o=new Event(s.type,s);this.dispatchEvent(o)},i=["load","error"];for(let s of i)n.addEventListener(s,r)}get img(){return this.hasPreviewImage||(this._setupConfigForImage({elNode:this._img}),this.appendChild(this._img)),this._img}get currentImg(){return this.hasPreviewImage?{type:t1.PREVIEW,img:this._imgPreview}:{type:t1.MAIN,img:this.img}}get hasPreviewImage(){return this.$$("is-preview-blur")}get bgSelector(){return this.$$("is-background-for")}get breakpoints(){if(this.$$("breakpoints")){const n=Yr(this.$$("breakpoints"));return xV(n.map(r=>parseInt(r,10)))}else return null}get hasFormatJPG(){return this.$$("format").toLowerCase()==="jpeg"}renderBg(n){let r=new Set;r.add(`url("${this._getUrlBase(this._getElSize(n))}") 1x`),this.$$("hi-res-support")&&r.add(`url("${this._getUrlBase(this._getElSize(n,xc))}") ${xc}x`),this.$$("ultra-res-support")&&r.add(`url("${this._getUrlBase(this._getElSize(n,kc))}") ${kc}x`);let i=`image-set(${[...r].join(", ")})`;n.style.setProperty("background-image",i),n.style.setProperty("background-image","-webkit-"+i)}getSrcset(){let n=new Set;return this.breakpoints?this.breakpoints.forEach(r=>{n.add(this._getUrlBase(r+"x")+` ${this._validateSize(r+"w")}`),this.$$("hi-res-support")&&n.add(this._getUrlBase(r*xc+"x")+` ${this._validateSize(r*xc+"w")}`),this.$$("ultra-res-support")&&n.add(this._getUrlBase(r*kc+"x")+` ${this._validateSize(r*kc+"w")}`)}):(n.add(this._getUrlBase(this._getElSize(this.currentImg.img))+" 1x"),this.$$("hi-res-support")&&n.add(this._getUrlBase(this._getElSize(this.currentImg.img,2))+" 2x"),this.$$("ultra-res-support")&&n.add(this._getUrlBase(this._getElSize(this.currentImg.img,3))+" 3x")),[...n].join()}getSrc(){return this._getUrlBase()}get srcUrlPreview(){return this._getUrlBase("100x","100")}renderBackground(){[...document.querySelectorAll(this.bgSelector)].forEach(n=>{this.$$("intersection")?this.initIntersection(n,()=>{this.renderBg(n)}):this.renderBg(n)})}_appendURL({elNode:n,src:r,srcset:i}){r&&(n.src=r),i&&(n.srcset=i)}_setupConfigForImage({elNode:n}){this._setupEventProxy(n),this.initAttributes(n)}loaderImage({src:n,srcset:r,elNode:i}){return new Promise((s,o)=>{this._setupConfigForImage({elNode:i}),i.setAttribute(Yw,""),i.addEventListener("load",()=>{i.removeAttribute(Yw),s(i)}),i.addEventListener("error",()=>{o(!1)}),this._appendURL({elNode:i,src:n,srcset:r})})}async renderImage(){var n,r;if(this.$$("intersection")){this.hasPreviewImage&&(this._setupConfigForImage({elNode:this._imgPreview}),this.appendChild(this._imgPreview)),this.initIntersection(this.currentImg.img,async()=>{var i;this.hasPreviewImage&&(this._imgPreview.src=this.srcUrlPreview);try{await this.loaderImage({src:this.getSrc(),srcset:this.getSrcset(),elNode:this._img}),this.hasPreviewImage&&await this._imgPreview.remove(),this.appendChild(this._img)}catch{this.hasPreviewImage&&await((i=this._imgPreview)==null?void 0:i.remove()),this.appendChild(this._img)}});return}try{this.hasPreviewImage&&(await this.loaderImage({src:this.srcUrlPreview,elNode:this._imgPreview}),this.appendChild(this._imgPreview)),await this.loaderImage({src:this.getSrc(),srcset:this.getSrcset(),elNode:this._img}),this.hasPreviewImage&&await((n=this._imgPreview)==null?void 0:n.remove()),this.appendChild(this._img)}catch{this.hasPreviewImage&&await((r=this._imgPreview)==null?void 0:r.remove()),this.appendChild(this._img)}}init(){this.bgSelector?this.renderBackground():this.renderImage()}}class OV extends NV{initCallback(){super.initCallback(),this.sub$$("src",()=>{this.init()}),this.sub$$("uuid",()=>{this.init()}),this.sub$$("lazy",e=>{!this.$$("is-background-for")&&!this.$$("is-preview-blur")&&(this.img.loading=e?"lazy":"eager")})}}class Yy extends Ke{constructor(){super();U(this,"couldBeCtxOwner",!0);this.init$={...this.init$,withDropZone:!0,onClick:()=>{this.initFlow()},"button-text":""}}initCallback(){super.initCallback(),this.defineAccessor("dropzone",n=>{typeof n>"u"||(this.$.withDropZone=nt(n))}),this.subConfigValue("multiple",n=>{this.$["button-text"]=n?"upload-files":"upload-file"})}}Yy.template=`
  <lr-drop-area set="@disabled: !withDropZone">
    <button type="button" set="onclick: onClick">
      <lr-icon name="upload"></lr-icon>
      <span l10n="button-text"></span>
      <slot></slot>
      <div class="visual-drop-area" l10n="drop-files-here"></div>
    </button>
  </lr-drop-area>
`;Yy.bindAttributes({dropzone:null});class o2 extends fe{constructor(){super(...arguments);U(this,"historyTracked",!0);U(this,"activityType","start-from")}initCallback(){super.initCallback(),this.registerActivity(this.activityType)}}o2.template=' <div class="content"><slot></slot></div> ';function LV(t){return new Promise(e=>{typeof window.FileReader!="function"&&e(!1);try{let n=new FileReader;n.onerror=()=>{e(!0)};let r=i=>{i.type!=="loadend"&&n.abort(),e(!1)};n.onloadend=r,n.onprogress=r,n.readAsDataURL(t)}catch{e(!1)}})}function DV(t,e){return new Promise(n=>{let r=0;const i=[],s=a=>{a||(console.warn("Unexpectedly received empty content entry",{scope:"drag-and-drop"}),n(null)),a.isFile?(r++,a.file(l=>{r--;const c=new File([l],l.name,{type:l.type||e});i.push({type:"file",file:c,fullPath:a.fullPath}),r===0&&n(i)})):a.isDirectory&&o(a.createReader())};let o=a=>{r++,a.readEntries(l=>{r--;for(let c of l)s(c);r===0&&n(i)})};s(t)})}function MV(t){const e=[],n=[];for(let r=0;r<t.items.length;r++){let i=t.items[r];if(i)if(i.kind==="file"){const s=i.type;if(typeof i.webkitGetAsEntry=="function"||typeof i.getAsEntry=="function"){let a=typeof i.webkitGetAsEntry=="function"?i.webkitGetAsEntry():i.getAsEntry();n.push(DV(a,s).then(l=>{l&&e.push(...l)}));continue}const o=i.getAsFile();o&&n.push(LV(o).then(a=>{a||e.push({type:"file",file:o})}))}else i.kind==="string"&&i.type.match("^text/uri-list")&&n.push(new Promise(s=>{i.getAsString(o=>{e.push({type:"url",url:o}),s(void 0)})}))}return Promise.all(n).then(()=>e)}const tn={ACTIVE:0,INACTIVE:1,NEAR:2,OVER:3};let n1=["focus"],UV=100,np=new Map;function VV(t,e){let n=Math.max(Math.min(t[0],e.x+e.width),e.x),r=Math.max(Math.min(t[1],e.y+e.height),e.y);return Math.sqrt((t[0]-n)*(t[0]-n)+(t[1]-r)*(t[1]-r))}function r1(t){let e=0,n=document.body,r=new Set,i=w=>r.add(w),s=tn.INACTIVE,o=w=>{t.shouldIgnore()&&w!==tn.INACTIVE||(s!==w&&r.forEach(I=>I(w)),s=w)},a=()=>e>0;i(w=>t.onChange(w));let l=()=>{e=0,o(tn.INACTIVE)},c=()=>{e+=1,s===tn.INACTIVE&&o(tn.ACTIVE)},h=()=>{e-=1,a()||o(tn.INACTIVE)},f=w=>{w.preventDefault(),e=0,o(tn.INACTIVE)},p=w=>{if(t.shouldIgnore())return;a()||(e+=1);let I=[w.x,w.y],R=t.element.getBoundingClientRect(),C=Math.floor(VV(I,R)),E=C<UV,S=w.composedPath().includes(t.element);np.set(t.element,C);let D=Math.min(...np.values())===C;S&&D?(w.preventDefault(),o(tn.OVER)):o(E&&D?tn.NEAR:tn.ACTIVE)},_=async w=>{if(t.shouldIgnore())return;w.preventDefault();let I=await MV(w.dataTransfer);t.onItems(I),o(tn.INACTIVE)};return n.addEventListener("drop",f),n.addEventListener("dragleave",h),n.addEventListener("dragenter",c),n.addEventListener("dragover",p),t.element.addEventListener("drop",_),n1.forEach(w=>{window.addEventListener(w,l)}),()=>{np.delete(t.element),n.removeEventListener("drop",f),n.removeEventListener("dragleave",h),n.removeEventListener("dragenter",c),n.removeEventListener("dragover",p),t.element.removeEventListener("drop",_),n1.forEach(w=>{window.removeEventListener(w,l)})}}const a2="lr-drop-area",wo=`${a2}/registry`;class Jy extends Ke{constructor(){super(),this.init$={...this.init$,state:tn.INACTIVE,withIcon:!1,isClickable:!1,isFullscreen:!1,isEnabled:!0,isVisible:!0,text:"",[wo]:null}}isActive(){if(!this.$.isEnabled)return!1;const e=this.getBoundingClientRect(),n=e.width>0&&e.height>0,r=e.top>=0&&e.left>=0&&e.bottom<=(window.innerHeight||document.documentElement.clientHeight)&&e.right<=(window.innerWidth||document.documentElement.clientWidth),i=window.getComputedStyle(this),s=i.visibility!=="hidden"&&i.display!=="none";return n&&s&&r}initCallback(){super.initCallback(),this.bindL10n("text",()=>this.l10n("drop-files-here")),this.$[wo]||(this.$[wo]=new Set),this.$[wo].add(this),this.defineAccessor("disabled",n=>{this.set$({isEnabled:!nt(n)})}),this.defineAccessor("clickable",n=>{this.set$({isClickable:nt(n)})}),this.defineAccessor("with-icon",n=>{this.set$({withIcon:nt(n)})}),this.defineAccessor("fullscreen",n=>{this.set$({isFullscreen:nt(n)})}),this.defineAccessor("text",n=>{typeof n=="string"?this.bindL10n("text",()=>this.l10n(n)||n):this.bindL10n("text",()=>this.l10n("drop-files-here"))}),this._destroyDropzone=r1({element:this,shouldIgnore:()=>this._shouldIgnore(),onChange:n=>{this.$.state=n},onItems:n=>{n.length&&(n.forEach(r=>{r.type==="url"?this.addFileFromUrl(r.url,{source:or.DROP_AREA}):r.type==="file"&&this.addFileFromObject(r.file,{source:or.DROP_AREA,fullPath:r.fullPath})}),this.uploadCollection.size&&(this.set$({"*currentActivity":fe.activities.UPLOAD_LIST}),this.setOrAddState("*modalActive",!0)))}});let e=this.ref["content-wrapper"];e&&(this._destroyContentWrapperDropzone=r1({element:e,onChange:n=>{var i;const r=(i=Object.entries(tn).find(([,s])=>s===n))==null?void 0:i[0].toLowerCase();r&&e.setAttribute("drag-state",r)},onItems:()=>{},shouldIgnore:()=>this._shouldIgnore()})),this.sub("state",n=>{var i;const r=(i=Object.entries(tn).find(([,s])=>s===n))==null?void 0:i[0].toLowerCase();r&&this.setAttribute("drag-state",r)}),this.subConfigValue("sourceList",n=>{const r=Yr(n);this.$.isEnabled=r.includes(Ke.sourceTypes.LOCAL),this.$.isVisible=this.$.isEnabled||!this.querySelector("[data-default-slot]")}),this.sub("isVisible",n=>{this.toggleAttribute("hidden",!n)}),this.sub("isClickable",n=>{this.toggleAttribute("clickable",n)}),this.$.isClickable&&(this._onAreaClicked=()=>{this.openSystemDialog()},this.addEventListener("click",this._onAreaClicked))}_shouldIgnore(){return!this.$.isEnabled||!this._couldHandleFiles()?!0:this.$.isFullscreen?[...this.$[wo]].filter(r=>r!==this).filter(r=>r.isActive()).length>0:!1}_couldHandleFiles(){let e=this.cfg.multiple,n=this.cfg.multipleMax,r=this.uploadCollection.size;return!(e&&n&&r>=n||!e&&r>0)}destroyCallback(){var n,r;super.destroyCallback();const e=this.$[wo];e&&(e.delete(this),e.size===0&&xe.deleteCtx(a2)),(n=this._destroyDropzone)==null||n.call(this),(r=this._destroyContentWrapperDropzone)==null||r.call(this),this._onAreaClicked&&this.removeEventListener("click",this._onAreaClicked)}}Jy.template=`
  <slot>
    <div data-default-slot hidden></div>
    <div ref="content-wrapper" class="content-wrapper" set="@hidden: !isVisible">
      <div class="icon-container" set="@hidden: !withIcon">
        <lr-icon name="default"></lr-icon>
        <lr-icon name="arrow-down"></lr-icon>
      </div>
      <span class="text">{{text}}</span>
    </div>
  </slot>
`;Jy.bindAttributes({"with-icon":null,clickable:null,text:null,fullscreen:null,disabled:null});const $V="src-type-";class Zy extends Ke{constructor(){super();U(this,"couldBeCtxOwner",!0);U(this,"type");U(this,"_registeredTypes",{});this.init$={...this.init$,iconName:"default","src-type":""}}initTypes(){this.registerType({type:Ke.sourceTypes.LOCAL,activate:()=>(this.openSystemDialog(),!1)}),this.registerType({type:Ke.sourceTypes.URL,activity:fe.activities.URL,textKey:"from-url"}),this.registerType({type:Ke.sourceTypes.CAMERA,activity:fe.activities.CAMERA,activate:()=>{const n="capture"in document.createElement("input");return n&&this.openSystemDialog({captureCamera:!0}),!n}}),this.registerType({type:"draw",activity:fe.activities.DRAW,icon:"edit-draw"});for(let n of Object.values(Ke.extSrcList))this.registerType({type:n,activity:fe.activities.EXTERNAL,activityParams:{externalSourceType:n}})}initCallback(){super.initCallback(),this.initTypes(),this.setAttribute("role","button"),this.defineAccessor("type",n=>{n&&this.applyType(n)})}registerType(n){this._registeredTypes[n.type]=n}getType(n){return this._registeredTypes[n]}activate(){if(!this.type)return;const n=this._registeredTypes[this.type],{activity:r,activate:i,activityParams:s={}}=n;(i?i():!!r)&&this.set$({"*currentActivityParams":s,"*currentActivity":r})}applyType(n){const r=this._registeredTypes[n];if(!r){console.warn("Unsupported source type: "+n);return}const{textKey:i=n,icon:s=n}=r;this.$["src-type"]=`${$V}${i}`,this.$.iconName=s,this.onclick=()=>{this.activate()}}}Zy.template=`
  <lr-icon set="@name: iconName"></lr-icon>
  <div class="txt" l10n="src-type"></div>
`;Zy.bindAttributes({type:null});class FV extends Ne{initCallback(){super.initCallback(),this.subConfigValue("sourceList",e=>{let n=Yr(e),r="";n.forEach(i=>{r+=`<lr-source-btn type="${i}"></lr-source-btn>`}),this.cfg.sourceListWrap?this.innerHTML=r:this.outerHTML=r})}}const Yd=()=>{const t=[];return{stack:t,promiseReadJpegChunks:n=>new Promise((r,i)=>{let s=2;const o=(c,h)=>{const f=new FileReader;f.addEventListener("load",()=>{h(new DataView(f.result))}),f.addEventListener("error",p=>{i(`Reader error: ${p}`)}),f.readAsArrayBuffer(c)},a=()=>o(n.slice(s,s+128),c=>{let h,f,p;for(h=f=0,p=c.byteLength;p>=0?f<p:f>p;h=p>=0?++f:--f)if(c.getUint8(h)===255){s+=h;break}l()}),l=()=>{const c=s;return o(n.slice(s,s+=4),h=>{if(h.byteLength!==4||h.getUint8(0)!==255){i("Corrupted");return}const f=h.getUint8(1);if(f===218){r(!0);return}const p=h.getUint16(2)-2;return o(n.slice(s,s+=p),_=>{if(_.byteLength!==p){i("Corrupted");return}t.push({startPos:c,length:p,marker:f,view:_}),a()})})};FileReader&&DataView||i("Not Support"),o(n.slice(0,2),c=>{c.getUint16(0)!==65496&&i("Not jpeg"),a()})})}},jV=async t=>{const e=[],{promiseReadJpegChunks:n,stack:r}=Yd();return await n(t),r.forEach(({marker:i,view:s})=>{i===226&&s.getUint32(0)===1229144927&&s.getUint32(4)===1347571526&&s.getUint32(8)===1229735168&&e.push(s)}),e},l2=async(t,e,n)=>{{const r=[],i=[],{promiseReadJpegChunks:s,stack:o}=Yd();await s(t),o.forEach(c=>{if(c.marker===e)return r.push(c.startPos),i.push(c.length)});const a=[t.slice(0,2)];for(const c of n){const h=new DataView(new ArrayBuffer(4));h.setUint16(0,65280+e),h.setUint16(2,c.byteLength+2),a.push(h.buffer),a.push(c)}let l=2;for(let c=0;c<r.length;c++)r[c]>l&&a.push(t.slice(l,r[c])),l=r[c]+i[c]+4;return a.push(t.slice(l,t.size)),new Blob(a,{type:t.type})}},zV=226,u2=(t,e)=>l2(t,zV,e.map(n=>n.buffer)),BV=async t=>{try{return await u2(t,[])}catch(e){throw new Error(`Failed to strip ICC profile: ${e}`)}},HV=(t,e,n)=>new Promise((r,i)=>{const s=o=>{if(!o){i("Failed to convert canvas to blob");return}r(o)};t.toBlob(s,e,n),t.width=t.height=1}),gu=()=>{const t=document.createElement("canvas"),e=t.getContext("2d");return{canvas:t,ctx:e}},WV=t=>{const{ctx:n,canvas:r}=gu();r.width=r.height=50,n.drawImage(t,0,0,50,50);const i=n.getImageData(0,0,50,50).data;r.width=r.height=1;for(let s=3;s<i.length;s+=4)if(i[s]<254)return!0;return!1},qV=async t=>{let e=null;const{promiseReadJpegChunks:n,stack:r}=Yd();return await n(t),r.forEach(({marker:i,view:s})=>{if(!e&&i===225&&s.byteLength>=14&&s.getUint32(0)===1165519206&&s.getUint16(4)===0){e=s;return}}),e},GV="data:image/jpg;base64,/9j/4AAQSkZJRgABAQEASABIAAD/4QA6RXhpZgAATU0AKgAAAAgAAwESAAMAAAABAAYAAAEoAAMAAAABAAIAAAITAAMAAAABAAEAAAAAAAD/2wBDAP//////////////////////////////////////////////////////////////////////////////////////wAALCAABAAIBASIA/8QAJgABAAAAAAAAAAAAAAAAAAAAAxABAAAAAAAAAAAAAAAAAAAAAP/aAAgBAQAAPwBH/9k=";let Pc;const KV=()=>new Promise(t=>{if(Pc!==void 0)t(Pc);else{const e=new Image;e.addEventListener("load",()=>{Pc=e.naturalWidth<e.naturalHeight,e.src="//:0",t(Pc)}),e.src=GV}}),QV=(t,e)=>{let n,r,i,s;if(!t||t.byteLength<14||t.getUint32(0)!==1165519206||t.getUint16(4)!==0)return;if(t.getUint16(6)===18761)r=!0;else if(t.getUint16(6)===19789)r=!1;else return;if(t.getUint16(8,r)!==42)return;i=8+t.getUint32(10,r);const o=t.getUint16(i-2,r);for(n=0,s=o;s>=0?n<s:n>s;s>=0?++n:--n){if(t.byteLength<i+10)return;t.getUint16(i,r)===274&&e(i+8,r),i+=12}},XV=(t,e)=>{QV(t,(n,r)=>t.setUint16(n,e,r))},YV=async(t,e,n)=>(n&&XV(e,1),l2(t,225,[e.buffer])),JV=(t,e)=>new Promise((n,r)=>{e&&(t.src=e),t.complete?n(t):(t.addEventListener("load",()=>{n(t)}),t.addEventListener("error",()=>{r(new Error("Failed to load image. Probably not an image."))}))}),ZV=t=>JV(new Image,t),e$=[1,3],t$=[192,193,194,195,197,198,199,201,202,203,205,206,207],i1={squareSide:[Math.floor(Math.sqrt(5*1e3*1e3)),4096,8192,11180,10836,11402,14188,16384],dimension:[4096,8192,16384,32767,65535]},n$=async t=>{let e=!1;const{promiseReadJpegChunks:n,stack:r}=Yd();return await n(t).then(()=>(r.forEach(({marker:i,view:s})=>{if(!e&&t$.indexOf(i)>=0){const o=s.getUint8(5);e$.indexOf(o)<0&&(e=!0)}}),e)).catch(()=>e)},c2=(t,e)=>{const n={};return(...r)=>{const i=e(r,n);return i in n?n[i]:n[i]=t(...r)}},h2=(t,e)=>{const[n]=t,r=Object.keys(e).map(i=>parseInt(i,10)).sort((i,s)=>i-s);for(let i=0;i<r.length;i++){const s=r[i],o=!!e[s];if(s>n&&o||s<n&&!o)return s}return n},Ai={R:55,G:110,B:165,A:255},r$=`rgba(${Ai.R}, ${Ai.G}, ${Ai.B}, ${Ai.A/255})`,d2=(t,e)=>{try{const n=[t-1,e-1,1,1],{canvas:r,ctx:i}=gu();r.width=1,r.height=1;const{canvas:s,ctx:o}=gu();s.width=t,s.height=e,o&&(o.fillStyle=r$,o.fillRect(...n),i.drawImage(s,t-1,e-1,1,1,0,0,1,1));const a=i&&i.getImageData(0,0,1,1).data;let l=!1;return a&&(l=a[0]===Ai.R&&a[1]===Ai.G&&a[2]===Ai.B&&a[3]===Ai.A),s.width=s.height=1,l}catch{return console.error(`Failed to test for max canvas size of ${t}x${e}.`),!1}};function f2(t){return(...e)=>new Promise(n=>{setTimeout(()=>{const r=t(...e);n(r)},0)})}const i$=f2(c2(d2,h2)),s$=f2(c2(d2,h2)),p2=async(t,e)=>{const n=i1.squareSide.find(o=>o*o>=t*e),r=i1.dimension.find(o=>o>=t&&o>=e);if(!n||!r)throw new Error("Not supported");const[i,s]=await Promise.all([i$(n,n),s$(r,1)]);if(i&&s)return!0;throw new Error("Not supported")},m2=async(t,e,n)=>{try{const{ctx:r,canvas:i}=gu();return i.width=e,i.height=n,r.imageSmoothingQuality="high",r.drawImage(t,0,0,e,n),t instanceof HTMLImageElement&&(t.src="//:0"),t instanceof HTMLCanvasElement&&(t.width=t.height=1),i}catch(r){throw new Error("Canvas resize error",{cause:r})}},o$=({img:t,targetW:e,targetH:n})=>m2(t,e,n),a$=function({sourceW:t,targetW:e,targetH:n,step:r}){const i=[];let s=e,o=n;do i.push([s,o]),s=Math.round(s/r),o=Math.round(o/r);while(s<t*r);return i.reverse()},l$=({img:t,sourceW:e,targetW:n,targetH:r,step:i})=>a$({sourceW:e,targetW:n,targetH:r,step:i}).reduce((o,[a,l])=>o.then(c=>p2(a,l).then(()=>m2(c,a,l)).catch(()=>c)),Promise.resolve(t)),u$=()=>/iPad|iPhone|iPod/.test(navigator.platform)?!0:navigator.maxTouchPoints&&navigator.maxTouchPoints>2&&/MacIntel/.test(navigator.platform),c$=navigator.maxTouchPoints&&navigator.maxTouchPoints>2&&/MacIntel/.test(navigator.platform),rp=.71,h$=(t,e)=>{if(t.width*rp*t.height*rp<e.size)throw new Error("Not required");const n=t.width,r=t.height,i=n/r,s=Math.floor(Math.sqrt(e.size*i)),o=Math.floor(e.size/Math.sqrt(e.size*i));return p2(s,o).then(()=>{const{ctx:a}=gu();return"imageSmoothingQuality"in a&&!u$()&&!c$?o$({img:t,targetW:s,targetH:o}):l$({img:t,sourceW:n,targetW:s,targetH:o,step:rp})}).catch(()=>Promise.reject("Not supported"))},d$=async(t,e)=>{try{if(await n$(t))throw new Error("Should skipped");const r=await Promise.allSettled([qV(t),KV(),jV(t)]),s=!r.some(I=>I.status==="rejected"),[o,a,l]=r,c=await BV(t).catch(()=>t),h=await ZV(URL.createObjectURL(c));URL.revokeObjectURL(h.src);const f=await h$(h,e);let p="image/jpeg",_=(e==null?void 0:e.quality)||.8;!s&&WV(f)&&(p="image/png",_=void 0);let w=await HV(f,p,_);if(s&&o.status==="fulfilled"&&o.value){const I=o.value,R=a.status==="fulfilled"?a.value:!1;w=await YV(w,I,R)}return s&&l.status==="fulfilled"&&l.value.length>0&&(w=await u2(w,l.value)),w}catch(n){let r;throw n instanceof Error&&(r=n.message),typeof n=="string"&&(r=n),new Error(`Failed to shrink image. ${r?`Message: "${r}".`:""}`,{cause:n})}};function g2(t){let e=new Blob([t],{type:"image/svg+xml"});return URL.createObjectURL(e)}function f$(t="#fff",e="rgba(0, 0, 0, .1)"){return g2(`<svg height="20" width="20" viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg">
    <rect x="0" y="0" width="20" height="20" fill="${t}" />
    <rect x="0" y="0" width="10" height="10" fill="${e}" />
    <rect x="10" y="10" width="10" height="10" fill="${e}" />
  </svg>`)}function s1(t="hsl(209, 21%, 65%)",e=32,n=32){return g2(`
  <svg width="${e}" height="${n}" viewBox="0 0 30 30" fill="none" xmlns="http://www.w3.org/2000/svg">
    <path fill-rule="evenodd" fill="${t}" d="M9.68848 8.70068C9.68848 8.42454 9.91233 8.20068 10.1885 8.20068H15.0885C15.2211 8.20068 15.3483 8.25336 15.442 8.34713L20.342 13.2471C20.4358 13.3409 20.4885 13.4681 20.4885 13.6007V21.3007C20.4885 21.5768 20.2646 21.8007 19.9885 21.8007H10.1885C9.91233 21.8007 9.68848 21.5768 9.68848 21.3007V8.70068ZM10.6885 9.20068V20.8007H19.4885V14.1007L15.0885 14.1007C14.8123 14.1007 14.5885 13.8768 14.5885 13.6007L14.5885 9.20068H10.6885ZM15.5885 9.90779L18.7814 13.1007L15.5885 13.1007L15.5885 9.90779Z"/>
  </svg>
  `)}function p$(t,e=40){if(t.type==="image/svg+xml")return URL.createObjectURL(t);let n=document.createElement("canvas"),r=n.getContext("2d"),i=new Image,s=new Promise((o,a)=>{i.onload=()=>{let l=i.height/i.width;l>1?(n.width=e,n.height=e*l):(n.height=e,n.width=e/l),r.fillStyle="rgb(240, 240, 240)",r.fillRect(0,0,n.width,n.height),r.drawImage(i,0,0,n.width,n.height),n.toBlob(c=>{if(!c){a();return}let h=URL.createObjectURL(c);o(h)})},i.onerror=l=>{a(l)}});return i.src=URL.createObjectURL(t),s}const o1=16384,m$=/^([0-9]+)x([0-9]+)(?:\s+(\d{1,2}|100)%)?$/i,g$=t=>{const e=m$.exec(t==null?void 0:t.toLocaleLowerCase())||[];if(!e.length)return!1;const n=e[1]*e[2],r=o1*o1;return n>r?(console.warn(`Shrinked size can not be larger than ${Math.floor(r/1e3/1e3)}MP. You have set ${e[1]}x${e[2]} (${Math.ceil(n/1e3/100)/10}MP).`),!1):{quality:e[3]?e[3]/100:void 0,size:n}},Tn=Object.freeze({FINISHED:Symbol(0),FAILED:Symbol(1),UPLOADING:Symbol(2),IDLE:Symbol(3)});class Os extends Ke{constructor(){super();U(this,"couldBeCtxOwner",!0);U(this,"pauseRender",!0);U(this,"_entrySubs",new Set);U(this,"_entry",null);U(this,"_isIntersecting",!1);U(this,"_debouncedGenerateThumb",Mn(this._generateThumbnail.bind(this),100));U(this,"_debouncedCalculateState",Mn(this._calculateState.bind(this),100));U(this,"_renderedOnce",!1);this.init$={...this.init$,uid:"",itemName:"",errorText:"",thumbUrl:"",progressValue:0,progressVisible:!1,badgeIcon:"",isFinished:!1,isFailed:!1,isUploading:!1,isFocused:!1,isEditable:!1,state:Tn.IDLE,onEdit:()=>{this.set$({"*focusedEntry":this._entry}),this.hasBlockInCtx(n=>n.activityType===fe.activities.DETAILS)?this.$["*currentActivity"]=fe.activities.DETAILS:this.$["*currentActivity"]=fe.activities.CLOUD_IMG_EDIT},onRemove:()=>{this.uploadCollection.remove(this.$.uid)},onUpload:()=>{this.upload()}}}_reset(){for(let n of this._entrySubs)n.remove();this._debouncedGenerateThumb.cancel(),this._debouncedCalculateState.cancel(),this._entrySubs=new Set,this._entry=null}_observerCallback(n){let[r]=n;this._isIntersecting=r.isIntersecting,r.isIntersecting&&!this._renderedOnce&&(this.render(),this._renderedOnce=!0),r.intersectionRatio===0?this._debouncedGenerateThumb.cancel():this._debouncedGenerateThumb()}_calculateState(){if(!this._entry)return;let n=this._entry,r=Tn.IDLE;n.getValue("errors").length>0?r=Tn.FAILED:n.getValue("isUploading")?r=Tn.UPLOADING:n.getValue("fileInfo")&&(r=Tn.FINISHED),this.$.state=r}async _generateThumbnail(){var r;if(!this._entry)return;let n=this._entry;if(n.getValue("fileInfo")&&n.getValue("isImage")){let i=this.cfg.thumbSize,s=this.proxyUrl(Pn(mu(this.cfg.cdnCname,this._entry.getValue("uuid")),Xi(n.getValue("cdnUrlModifiers"),`scale_crop/${i}x${i}/center`))),o=n.getValue("thumbUrl");o!==s&&(n.setValue("thumbUrl",s),o!=null&&o.startsWith("blob:")&&URL.revokeObjectURL(o));return}if(!n.getValue("thumbUrl"))if((r=n.getValue("file"))!=null&&r.type.includes("image"))try{let i=await p$(n.getValue("file"),this.cfg.thumbSize);n.setValue("thumbUrl",i)}catch{let s=window.getComputedStyle(this).getPropertyValue("--clr-generic-file-icon");n.setValue("thumbUrl",s1(s))}else{let i=window.getComputedStyle(this).getPropertyValue("--clr-generic-file-icon");n.setValue("thumbUrl",s1(i))}}_subEntry(n,r){let i=this._entry.subscribe(n,s=>{this.isConnected&&r(s)});this._entrySubs.add(i)}_handleEntryId(n){var i;this._reset();let r=(i=this.uploadCollection)==null?void 0:i.read(n);this._entry=r,r&&(this._subEntry("uploadProgress",s=>{this.$.progressValue=s}),this._subEntry("fileName",s=>{this.$.itemName=s||r.getValue("externalUrl")||this.l10n("file-no-name"),this._debouncedCalculateState()}),this._subEntry("externalUrl",s=>{this.$.itemName=r.getValue("fileName")||s||this.l10n("file-no-name")}),this._subEntry("fileInfo",s=>{this._debouncedCalculateState(),s&&this._isIntersecting&&this._debouncedGenerateThumb()}),this._subEntry("cdnUrlModifiers",()=>{this._isIntersecting&&this._debouncedGenerateThumb()}),this._subEntry("thumbUrl",s=>{this.$.thumbUrl=s?`url(${s})`:""}),this._subEntry("errors",()=>this._debouncedCalculateState()),this._subEntry("isUploading",()=>this._debouncedCalculateState()),this._subEntry("fileSize",()=>this._debouncedCalculateState()),this._subEntry("mimeType",()=>this._debouncedCalculateState()),this._subEntry("isImage",()=>this._debouncedCalculateState()),this._isIntersecting&&this._debouncedGenerateThumb())}initCallback(){super.initCallback(),this.sub("uid",n=>{this._handleEntryId(n)}),this.sub("state",n=>{this._handleState(n)}),this.subConfigValue("useCloudImageEditor",()=>this._debouncedCalculateState()),this.onclick=()=>{Os.activeInstances.forEach(n=>{n===this?n.setAttribute("focused",""):n.removeAttribute("focused")})},this.sub("*uploadTrigger",n=>{n.has(this._entry.uid)&&setTimeout(()=>this.isConnected&&this.upload())}),Os.activeInstances.add(this)}_handleState(n){var r,i,s,o;n===Tn.FAILED?this.$.badgeIcon="badge-error":n===Tn.FINISHED&&(this.$.badgeIcon="badge-success"),n===Tn.UPLOADING?this.$.isFocused=!1:this.$.progressValue=0,this.set$({isFailed:n===Tn.FAILED,isUploading:n===Tn.UPLOADING,isFinished:n===Tn.FINISHED,progressVisible:n===Tn.UPLOADING,isEditable:this.cfg.useCloudImageEditor&&((r=this._entry)==null?void 0:r.getValue("isImage"))&&((i=this._entry)==null?void 0:i.getValue("cdnUrl")),errorText:(o=(s=this._entry.getValue("errors"))==null?void 0:s[0])==null?void 0:o.message})}destroyCallback(){super.destroyCallback(),Os.activeInstances.delete(this),this._reset()}connectedCallback(){super.connectedCallback(),this._observer=new window.IntersectionObserver(this._observerCallback.bind(this),{root:this.parentElement,rootMargin:"50% 0px 50% 0px",threshold:[0,1]}),this._observer.observe(this)}disconnectedCallback(){var n;super.disconnectedCallback(),this._debouncedGenerateThumb.cancel(),(n=this._observer)==null||n.disconnect()}_settingsOfShrink(){return g$(this.cfg.imageShrink)}_processShrink(n){return d$(n,this._settingsOfShrink())}async upload(){var i,s;let n=this._entry;if(!this.uploadCollection.read(n.uid)||n.getValue("fileInfo")||n.getValue("isUploading")||n.getValue("errors").length>0)return;const r=this.cfg.multiple?this.cfg.multipleMax:1;if(!(r&&this.uploadCollection.size>r)){this._debouncedCalculateState(),n.setValue("isUploading",!0),n.setValue("errors",[]);try{let o=new AbortController;n.setValue("abortController",o);const a=async()=>{let c=n.getValue("file");c&&this.cfg.imageShrink&&(c=await this._processShrink(c).catch(()=>c));const h=c||n.getValue("externalUrl")||n.getValue("uuid"),p={...this.getUploadClientOptions(),fileName:n.getValue("fileName"),source:n.getValue("source"),onProgress:_=>{if(_.isComputable){let w=_.value*100;n.setValue("uploadProgress",w)}},signal:o.signal,metadata:await this.getMetadataFor(n.uid)};return this.debugPrint("upload options",h,p),FI(h,p)};let l=await this.$["*uploadQueue"].add(a);n.setMultipleValues({fileInfo:l,isUploading:!1,fileName:l.originalFilename,fileSize:l.size,isImage:l.isImage,mimeType:((s=(i=l.contentInfo)==null?void 0:i.mime)==null?void 0:s.mime)??l.mimeType,uuid:l.uuid,cdnUrl:n.getValue("cdnUrl")??l.cdnUrl,cdnUrlModifiers:n.getValue("cdnUrlModifiers")??"",uploadProgress:100}),n===this._entry&&this._debouncedCalculateState()}catch(o){o instanceof Ks&&o.isCancel?n.setMultipleValues({isUploading:!1,uploadProgress:0}):n.setMultipleValues({isUploading:!1,uploadProgress:0,uploadError:o}),n===this._entry&&this._debouncedCalculateState()}}}}Os.template=`
  <div class="inner" set="@finished: isFinished; @uploading: isUploading; @failed: isFailed; @focused: isFocused">
    <div class="thumb" set="style.backgroundImage: thumbUrl">
      <div class="badge">
        <lr-icon set="@name: badgeIcon"></lr-icon>
      </div>
    </div>
    <div class="file-name-wrapper">
      <span class="file-name" set="@title: itemName">{{itemName}}</span>
      <span class="file-error" set="@hidden: !errorText">{{errorText}}</span>
    </div>
    <div class="file-actions">
      <button type="button" class="edit-btn mini-btn" set="onclick: onEdit; @hidden: !isEditable">
        <lr-icon name="edit-file"></lr-icon>
      </button>
      <button type="button" class="remove-btn mini-btn" set="onclick: onRemove;">
        <lr-icon name="remove-file"></lr-icon>
      </button>
      <button type="button" class="upload-btn mini-btn" set="onclick: onUpload;">
        <lr-icon name="upload"></lr-icon>
      </button>
    </div>
    <lr-progress-bar class="progress-bar" set="value: progressValue; visible: progressVisible;"> </lr-progress-bar>
  </div>
`;Os.activeInstances=new Set;class ev extends Ne{constructor(){super();U(this,"_handleBackdropClick",()=>{this._closeDialog()});U(this,"_closeDialog",()=>{this.setOrAddState("*modalActive",!1)});U(this,"_handleDialogClose",()=>{this._closeDialog()});U(this,"_handleDialogMouseDown",n=>{this._mouseDownTarget=n.target});U(this,"_handleDialogMouseUp",n=>{n.target===this.ref.dialog&&n.target===this._mouseDownTarget&&this._closeDialog()});this.init$={...this.init$,"*modalActive":!1,isOpen:!1,closeClicked:this._handleDialogClose}}show(){this.ref.dialog.showModal?this.ref.dialog.showModal():this.ref.dialog.setAttribute("open","")}hide(){this.ref.dialog.close?this.ref.dialog.close():this.ref.dialog.removeAttribute("open")}initCallback(){if(super.initCallback(),typeof HTMLDialogElement=="function")this.ref.dialog.addEventListener("close",this._handleDialogClose),this.ref.dialog.addEventListener("mousedown",this._handleDialogMouseDown),this.ref.dialog.addEventListener("mouseup",this._handleDialogMouseUp);else{this.setAttribute("dialog-fallback","");let n=document.createElement("div");n.className="backdrop",this.appendChild(n),n.addEventListener("click",this._handleBackdropClick)}this.sub("*modalActive",n=>{this.$.isOpen!==n&&(this.$.isOpen=n),n&&this.cfg.modalScrollLock?document.body.style.overflow="hidden":document.body.style.overflow=""}),this.subConfigValue("modalBackdropStrokes",n=>{n?this.setAttribute("strokes",""):this.removeAttribute("strokes")}),this.sub("isOpen",n=>{n?this.show():this.hide()})}destroyCallback(){super.destroyCallback(),document.body.style.overflow="",this._mouseDownTarget=void 0,this.ref.dialog.removeEventListener("close",this._handleDialogClose),this.ref.dialog.removeEventListener("mousedown",this._handleDialogMouseDown),this.ref.dialog.removeEventListener("mouseup",this._handleDialogMouseUp)}}U(ev,"StateConsumerScope","modal");ev.template=`
  <dialog ref="dialog">
    <slot></slot>
  </dialog>
`;const y2=(t,e)=>{let n,r,i;const s=(...o)=>{n?(clearTimeout(r),r=setTimeout(()=>{Date.now()-i>=e&&(t(...o),i=Date.now())},Math.max(e-(Date.now()-i),0))):(t(...o),i=Date.now(),n=!0)};return Object.defineProperty(s,"cancel",{configurable:!1,writable:!1,enumerable:!1,value:()=>{clearTimeout(r)}}),s};class v2 extends Ke{constructor(){super();U(this,"couldBeCtxOwner",!0);U(this,"historyTracked",!0);U(this,"activityType",fe.activities.UPLOAD_LIST);U(this,"_throttledHandleCollectionUpdate",y2(()=>{this.isConnected&&(this._updateUploadsState(),!this.couldOpenActivity&&this.$["*currentActivity"]===this.activityType&&this.historyBack())},300));this.init$={...this.init$,doneBtnVisible:!1,doneBtnEnabled:!1,uploadBtnVisible:!1,addMoreBtnVisible:!1,addMoreBtnEnabled:!1,headerText:"",commonErrorMessage:"",hasFiles:!1,onAdd:()=>{this.initFlow(!0)},onUpload:()=>{this.emit(tt.UPLOAD_CLICK),this.uploadAll(),this._throttledHandleCollectionUpdate()},onDone:()=>{this.emit(tt.DONE_CLICK,this.getOutputCollectionState()),this.doneFlow()},onCancel:()=>{this.uploadCollection.clearAll()}}}_updateUploadsState(){const n=this.getOutputCollectionState(),r={total:n.totalCount,succeed:n.successCount,uploading:n.uploadingCount,failed:n.failedCount},i=!n.errors.some(p=>p.type==="TOO_MANY_FILES"||p.type==="TOO_FEW_FILES"),s=n.errors.some(p=>p.type==="TOO_MANY_FILES"),o=n.totalCount===(this.cfg.multiple?this.cfg.multipleMax:1),a=r.failed===0;let l=!1,c=!1,h=!1;r.total-r.succeed-r.uploading-r.failed>0&&i?l=!0:(c=!0,h=r.total===r.succeed&&i&&a),this.set$({doneBtnVisible:c,doneBtnEnabled:h,uploadBtnVisible:l,addMoreBtnEnabled:r.total===0||!s&&!o,addMoreBtnVisible:!o||this.cfg.multiple}),this.bindL10n("headerText",()=>this._getHeaderText(r))}_getHeaderText(n){const r=i=>{const s=n[i];return this.l10n(`header-${i}`,{count:s})};return n.uploading>0?r("uploading"):n.failed>0?r("failed"):n.succeed>0?r("succeed"):r("total")}get couldOpenActivity(){return this.cfg.showEmptyList||this.uploadCollection.size>0}initCallback(){super.initCallback(),this.registerActivity(this.activityType),this.subConfigValue("multiple",this._throttledHandleCollectionUpdate),this.subConfigValue("multipleMin",this._throttledHandleCollectionUpdate),this.subConfigValue("multipleMax",this._throttledHandleCollectionUpdate),this.sub("*currentActivity",n=>{!this.couldOpenActivity&&n===this.activityType&&(this.$["*currentActivity"]=this.initActivity)}),this.uploadCollection.observeProperties(this._throttledHandleCollectionUpdate),this.sub("*uploadList",n=>{this._throttledHandleCollectionUpdate(),this.set$({hasFiles:n.length>0}),this.cfg.confirmUpload||this.uploadAll()},!1),this.sub("*collectionErrors",n=>{const r=n.filter(i=>i.type!=="SOME_FILES_HAS_ERRORS")[0];if(!r){this.set$({commonErrorMessage:null});return}this.set$({commonErrorMessage:r.message})})}destroyCallback(){super.destroyCallback(),this.uploadCollection.unobserveProperties(this._throttledHandleCollectionUpdate)}}v2.template=`
  <lr-activity-header>
    <span class="header-text">{{headerText}}</span>
    <button type="button" class="mini-btn close-btn" set="onclick: *closeModal">
      <lr-icon name="close"></lr-icon>
    </button>
  </lr-activity-header>

  <div class="no-files" set="@hidden: hasFiles">
    <slot name="empty"><span l10n="no-files"></span></slot>
  </div>

  <div class="files" repeat="*uploadList" repeat-item-tag="lr-file-item"></div>

  <div class="common-error" set="@hidden: !commonErrorMessage; textContent: commonErrorMessage;"></div>

  <div class="toolbar">
    <button type="button" class="cancel-btn secondary-btn" set="onclick: onCancel;" l10n="clear"></button>
    <div class="toolbar-spacer"></div>
    <button
      type="button"
      class="add-more-btn secondary-btn"
      set="onclick: onAdd; @disabled: !addMoreBtnEnabled; @hidden: !addMoreBtnVisible"
    >
      <lr-icon name="add"></lr-icon><span l10n="add-more"></span>
    </button>
    <button
      type="button"
      class="upload-btn primary-btn"
      set="@hidden: !uploadBtnVisible; onclick: onUpload;"
      l10n="upload"
    ></button>
    <button
      type="button"
      class="done-btn primary-btn"
      set="@hidden: !doneBtnVisible; onclick: onDone;  @disabled: !doneBtnEnabled"
      l10n="done"
    ></button>
  </div>

  <lr-drop-area ghost></lr-drop-area>
`;class _2 extends Ke{constructor(){super(...arguments);U(this,"couldBeCtxOwner",!0);U(this,"activityType",fe.activities.URL);U(this,"init$",{...this.init$,importDisabled:!0,onUpload:n=>{n.preventDefault();let r=this.ref.input.value;this.addFileFromUrl(r,{source:or.URL_TAB}),this.$["*currentActivity"]=fe.activities.UPLOAD_LIST},onCancel:()=>{this.historyBack()},onInput:n=>{let r=n.target.value;this.set$({importDisabled:!r})}})}initCallback(){super.initCallback(),this.registerActivity(this.activityType,{onActivate:()=>{this.ref.input.value="",this.ref.input.focus()}})}}_2.template=`
  <lr-activity-header>
    <button type="button" class="mini-btn" set="onclick: *historyBack">
      <lr-icon name="back"></lr-icon>
    </button>
    <div>
      <lr-icon name="url"></lr-icon>
      <span l10n="caption-from-url"></span>
    </div>
    <button type="button" class="mini-btn close-btn" set="onclick: *closeModal">
      <lr-icon name="close"></lr-icon>
    </button>
  </lr-activity-header>
  <form class="content">
    <input placeholder="https://" class="url-input" type="text" ref="input" set="oninput: onInput" />
    <button
      type="submit"
      class="url-upload-btn primary-btn"
      set="onclick: onUpload; @disabled: importDisabled"
      l10n="upload-url"
    ></button>
  </form>
`;const a1=()=>typeof navigator.permissions<"u";class w2 extends Ke{constructor(){super(...arguments);U(this,"couldBeCtxOwner",!0);U(this,"activityType",fe.activities.CAMERA);U(this,"_unsubPermissions",null);U(this,"init$",{...this.init$,video:null,videoTransformCss:null,shotBtnDisabled:!0,videoHidden:!0,messageHidden:!0,requestBtnHidden:a1(),cameraSelectOptions:null,cameraSelectHidden:!0,l10nMessage:"",onCameraSelectChange:n=>{this._selectedCameraId=n.target.value,this._capture()},onCancel:()=>{this.historyBack()},onShot:()=>{this._shot()},onRequestPermissions:()=>{this._capture()}});U(this,"_onActivate",()=>{a1()&&this._subscribePermissions(),this._capture()});U(this,"_onDeactivate",()=>{this._unsubPermissions&&this._unsubPermissions(),this._stopCapture()});U(this,"_handlePermissionsChange",()=>{this._capture()});U(this,"_setPermissionsState",Mn(n=>{this.classList.toggle("initialized",n==="granted"),n==="granted"?this.set$({videoHidden:!1,shotBtnDisabled:!1,messageHidden:!0}):n==="prompt"?(this.$.l10nMessage="camera-permissions-prompt",this.set$({videoHidden:!0,shotBtnDisabled:!0,messageHidden:!1}),this._stopCapture()):(this.$.l10nMessage="camera-permissions-denied",this.set$({videoHidden:!0,shotBtnDisabled:!0,messageHidden:!1}),this._stopCapture())},300))}async _subscribePermissions(){try{(await navigator.permissions.query({name:"camera"})).addEventListener("change",this._handlePermissionsChange)}catch(n){console.log("Failed to use permissions API. Fallback to manual request mode.",n),this._capture()}}async _capture(){let n={video:{width:{ideal:1920},height:{ideal:1080},frameRate:{ideal:30}},audio:!1};this._selectedCameraId&&(n.video.deviceId={exact:this._selectedCameraId}),this._canvas=document.createElement("canvas"),this._ctx=this._canvas.getContext("2d");try{this._setPermissionsState("prompt");let r=await navigator.mediaDevices.getUserMedia(n);r.addEventListener("inactive",()=>{this._setPermissionsState("denied")}),this.$.video=r,this._capturing=!0,this._setPermissionsState("granted")}catch(r){this._setPermissionsState("denied"),console.error("Failed to capture camera",r)}}_stopCapture(){var n;this._capturing&&((n=this.$.video)==null||n.getTracks()[0].stop(),this.$.video=null,this._capturing=!1)}_shot(){this._canvas.height=this.ref.video.videoHeight,this._canvas.width=this.ref.video.videoWidth,this._ctx.drawImage(this.ref.video,0,0);const n=Date.now(),r=`camera-${n}.jpeg`,i="image/jpeg";this._canvas.toBlob(s=>{let o=new File([s],r,{lastModified:n,type:i});this.addFileFromObject(o,{source:or.CAMERA}),this.set$({"*currentActivity":fe.activities.UPLOAD_LIST})},i)}async initCallback(){var n;super.initCallback(),this.registerActivity(this.activityType,{onActivate:this._onActivate,onDeactivate:this._onDeactivate}),this.subConfigValue("cameraMirror",r=>{this.$.videoTransformCss=r?"scaleX(-1)":null});try{let i=(await navigator.mediaDevices.enumerateDevices()).filter(s=>s.kind==="videoinput").map((s,o)=>({text:s.label.trim()||`${this.l10n("caption-camera")} ${o+1}`,value:s.deviceId}));i.length>1&&(this.$.cameraSelectOptions=i,this.$.cameraSelectHidden=!1),this._selectedCameraId=(n=i[0])==null?void 0:n.value}catch{}}}w2.template=`
  <lr-activity-header>
    <button type="button" class="mini-btn" set="onclick: *historyBack">
      <lr-icon name="back"></lr-icon>
    </button>
    <div set="@hidden: !cameraSelectHidden">
      <lr-icon name="camera"></lr-icon>
      <span l10n="caption-camera"></span>
    </div>
    <lr-select
      class="camera-select"
      set="$.options: cameraSelectOptions; @hidden: cameraSelectHidden; onchange: onCameraSelectChange"
    >
    </lr-select>
    <button type="button" class="mini-btn close-btn" set="onclick: *closeModal">
      <lr-icon name="close"></lr-icon>
    </button>
  </lr-activity-header>
  <div class="content">
    <video
      autoplay
      playsinline
      set="srcObject: video; style.transform: videoTransformCss; @hidden: videoHidden"
      ref="video"
    ></video>
    <div class="message-box" set="@hidden: messageHidden">
      <span l10n="l10nMessage"></span>
      <button
        type="button"
        set="onclick: onRequestPermissions; @hidden: requestBtnHidden"
        l10n="camera-permissions-request"
      ></button>
    </div>
    <button type="button" class="shot-btn" set="onclick: onShot; @disabled: shotBtnDisabled">
      <lr-icon name="camera"></lr-icon>
    </button>
  </div>
`;class E2 extends Ke{constructor(){super(...arguments);U(this,"requireCtxName",!0)}initCallback(){super.initCallback(),this.$["*eventEmitter"].bindTarget(this)}destroyCallback(){super.destroyCallback(),this.$["*eventEmitter"].unbindTarget(this)}}E2.EventType=tt;const Dm=E2;class y${constructor(){U(this,"captionL10nStr","confirm-your-action");U(this,"messageL10Str","are-you-sure");U(this,"confirmL10nStr","yes");U(this,"denyL10nStr","no")}confirmAction(){console.log("Confirmed")}denyAction(){this.historyBack()}}class b2 extends fe{constructor(){super(...arguments);U(this,"activityType",fe.activities.CONFIRMATION);U(this,"_defaults",new y$);U(this,"init$",{...this.init$,activityCaption:"",messageTxt:"",confirmBtnTxt:"",denyBtnTxt:"","*confirmation":null,onConfirm:this._defaults.confirmAction,onDeny:this._defaults.denyAction.bind(this)})}initCallback(){super.initCallback(),this.set$({messageTxt:this.l10n(this._defaults.messageL10Str),confirmBtnTxt:this.l10n(this._defaults.confirmL10nStr),denyBtnTxt:this.l10n(this._defaults.denyL10nStr)}),this.sub("*confirmation",n=>{n&&this.set$({"*currentActivity":fe.activities.CONFIRMATION,activityCaption:this.l10n(n.captionL10nStr),messageTxt:this.l10n(n.messageL10Str),confirmBtnTxt:this.l10n(n.confirmL10nStr),denyBtnTxt:this.l10n(n.denyL10nStr),onDeny:()=>{n.denyAction()},onConfirm:()=>{n.confirmAction()}})})}}b2.template=`
  <lr-activity-header>
    <button type="button" class="mini-btn" set="onclick: *historyBack">
      <lr-icon name="back"></lr-icon>
    </button>
    <span>{{activityCaption}}</span>
    <button type="button" class="mini-btn close-btn" set="onclick: *closeModal">
      <lr-icon name="close"></lr-icon>
    </button>
  </lr-activity-header>

  <div class="message">{{messageTxt}}</div>
  <div class="toolbar">
    <button type="button" class="deny-btn secondary-btn" set="onclick: onDeny">{{denyBtnTxt}}</button>
    <button type="button" class="confirm-btn primary-btn" set="onclick: onConfirm">{{confirmBtnTxt}}</button>
  </div>
`;class T2 extends Ke{constructor(){super(...arguments);U(this,"init$",{...this.init$,visible:!1,value:0,"*commonProgress":0})}initCallback(){super.initCallback(),this._unobserveCollection=this.uploadCollection.observeProperties(()=>{let n=this.uploadCollection.items().some(r=>this.uploadCollection.read(r).getValue("isUploading"));this.$.visible=n}),this.sub("visible",n=>{n?this.setAttribute("active",""):this.removeAttribute("active")}),this.sub("*commonProgress",n=>{this.$.value=n})}destroyCallback(){var n;super.destroyCallback(),(n=this._unobserveCollection)==null||n.call(this)}}T2.template=' <lr-progress-bar set="visible: visible; value: value"></lr-progress-bar> ';class C2 extends Ne{constructor(){super(...arguments);U(this,"_value",0);U(this,"init$",{...this.init$,width:0,opacity:0})}initCallback(){super.initCallback(),this.defineAccessor("value",n=>{if(n===void 0)return;const r=this._value;if(this._value=n,n===0&&r>0){this.ref.line.addEventListener("transitionend",()=>{this.style.setProperty("--l-width",this._value.toString())});return}this.style.setProperty("--l-width",this._value.toString())}),this.defineAccessor("visible",n=>{this.ref.line.classList.toggle("progress--hidden",!n)})}}C2.template=' <div ref="line" class="progress"></div> ';const Yi="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAQAAAC1HAwCAAAAC0lEQVR42mNkYAAAAAYAAjCB0C8AAAAASUVORK5CYII=";class tv extends Ne{constructor(){super();U(this,"init$",{...this.init$,checkerboard:!1,src:Yi})}initCallback(){super.initCallback(),this.sub("checkerboard",()=>{this.style.backgroundImage=this.hasAttribute("checkerboard")?`url(${f$()})`:"unset"})}destroyCallback(){super.destroyCallback(),URL.revokeObjectURL(this._lastObjectUrl)}setImage(n){this.$.src=n.src}setImageFile(n){let r=URL.createObjectURL(n);this.$.src=r,this._lastObjectUrl=r}setImageUrl(n){this.$.src=n}clear(){URL.revokeObjectURL(this._lastObjectUrl),this.$.src=Yi}}tv.template=' <lr-img class="img-view" ref="img" set="@src: src; style.aa: src;" /> ';tv.bindAttributes({checkerboard:"checkerboard"});function I2(...t){return t.reduce((e,n)=>{if(typeof n=="string")return e[n]=!0,e;for(let r of Object.keys(n))e[r]=n[r];return e},{})}function Xn(...t){let e=I2(...t);return Object.keys(e).reduce((n,r)=>(e[r]&&n.push(r),n),[]).join(" ")}function v$(t,...e){let n=I2(...e);for(let r of Object.keys(n))t.classList.toggle(r,n[r])}const _$=t=>{if(!t)return pr;const e=MU(t).filter(n=>pr.includes(n));return e.length===0?pr:e};function w$(t){return{"*originalUrl":null,"*faderEl":null,"*cropperEl":null,"*imgEl":null,"*imgContainerEl":null,"*networkProblems":!1,"*imageSize":null,"*editorTransformations":{},"*cropPresetList":[],"*tabList":pr,"*tabId":Qt.CROP,entry:null,extension:null,editorMode:!1,modalCaption:"",isImage:!1,msg:"",src:Yi,fileType:"",showLoader:!1,uuid:null,cdnUrl:null,cropPreset:"",tabs:Gy(pr),"presence.networkProblems":!1,"presence.modalCaption":!0,"presence.editorToolbar":!1,"presence.viewerToolbar":!0,"*on.retryNetwork":()=>{let e=t.querySelectorAll("img");for(let n of e){let r=n.src;n.src=Yi,n.src=r}t.$["*networkProblems"]=!1},"*on.apply":e=>{if(!e)return;let n=t.$["*originalUrl"],r=Xi(Qd(e),"preview"),i=Pn(n,r),s={originalUrl:n,cdnUrlModifiers:r,cdnUrl:i,transformations:e};t.dispatchEvent(new CustomEvent("apply",{detail:s,bubbles:!0,composed:!0})),t.remove()},"*on.cancel":()=>{t.remove(),t.dispatchEvent(new CustomEvent("cancel",{bubbles:!0,composed:!0}))}}}const E$=`
  <div class="wrapper wrapper_desktop">
    <lr-presence-toggle class="network_problems_splash" set="visible: presence.networkProblems;">
      <div class="network_problems_content">
        <div class="network_problems_icon">
          <lr-icon size="20" name="sad"></lr-icon>
        </div>
        <div class="network_problems_text">Network error</div>
      </div>
      <div class="network_problems_footer">
        <lr-btn-ui theme="primary" text="Retry" set="onclick: *on.retryNetwork"></lr-btn-ui>
      </div>
    </lr-presence-toggle>
    <div class="viewport">
      <div class="file_type_outer">
        <div class="file_type">{{fileType}}</div>
      </div>
      <div class="image_container" ref="img-container-el">
        <img src="${Yi}" class="image image_visible_from_editor" ref="img-el" />
        <lr-editor-image-cropper ref="cropper-el"></lr-editor-image-cropper>
        <lr-editor-image-fader ref="fader-el"></lr-editor-image-fader>
      </div>
      <div class="info_pan">{{msg}}</div>
    </div>
    <div class="toolbar">
      <lr-line-loader-ui set="active: showLoader"></lr-line-loader-ui>
      <div class="toolbar_content toolbar_content__editor">
        <lr-editor-toolbar></lr-editor-toolbar>
      </div>
    </div>
  </div>
`;class Oa extends Ne{constructor(){super();U(this,"ctxOwner",!0);U(this,"_debouncedShowLoader",Mn(this._showLoader.bind(this),300));this.init$={...this.init$,...w$(this)}}_showLoader(n){this.$.showLoader=n}_waitForSize(){return new Promise((r,i)=>{const s=setTimeout(()=>{i(new Error("[cloud-image-editor] timeout waiting for non-zero container size"))},3e3),o=new ResizeObserver(([a])=>{a.contentRect.width>0&&a.contentRect.height>0&&(r(),clearTimeout(s),o.disconnect())});o.observe(this)})}initCallback(){super.initCallback(),this.$["*faderEl"]=this.ref["fader-el"],this.$["*cropperEl"]=this.ref["cropper-el"],this.$["*imgContainerEl"]=this.ref["img-container-el"],this.initEditor()}async updateImage(){if(this.isConnected){if(await this._waitForSize(),this.$.cdnUrl){const n=SU(this.$.cdnUrl),r=mu(this.$.cdnUrl,n);if(r===this.$["*originalUrl"])return;this.$["*originalUrl"]=r;const i=AU(this.$.cdnUrl),s=NU(i);this.$["*editorTransformations"]=s}else if(this.$.uuid){const n=mu(this.cfg.cdnCname,this.$.uuid);if(n===this.$["*originalUrl"])return;this.$["*originalUrl"]=n,this.$["*editorTransformations"]={}}else throw new Error("No UUID nor CDN URL provided");this.$["*tabId"]===Qt.CROP?this.$["*cropperEl"].deactivate({reset:!0}):this.$["*faderEl"].deactivate();try{const n=Pn(this.$["*originalUrl"],Xi("json")),r=await fetch(n).then(o=>o.json()),{width:i,height:s}=r;this.$["*imageSize"]={width:i,height:s},this.$["*tabId"]===Qt.CROP?this.$["*cropperEl"].activate(this.$["*imageSize"]):this.$["*faderEl"].activate({url:this.$["*originalUrl"]})}catch(n){n&&console.error("Failed to load image info",n)}}}async initEditor(){try{await this._waitForSize()}catch(n){this.isConnected&&console.error(n.message);return}this.ref["img-el"].addEventListener("load",()=>{this._imgLoading=!1,this._debouncedShowLoader(!1),this.$.src!==Yi&&(this.$["*networkProblems"]=!1)}),this.ref["img-el"].addEventListener("error",()=>{this._imgLoading=!1,this._debouncedShowLoader(!1),this.$["*networkProblems"]=!0}),this.sub("src",n=>{let r=this.ref["img-el"];r.src!==n&&(this._imgLoading=!0,r.src=n||Yi)}),this.sub("cropPreset",n=>{this.$["*cropPresetList"]=e2(n)}),this.sub("tabs",n=>{this.$["*tabList"]=_$(n)}),this.sub("*tabId",n=>{this.ref["img-el"].className=Xn("image",{image_hidden_to_cropper:n===Qt.CROP,image_hidden_effects:n!==Qt.CROP})}),this.classList.add("editor_ON"),this.sub("*networkProblems",n=>{this.$["presence.networkProblems"]=n,this.$["presence.modalCaption"]=!n}),this.sub("*editorTransformations",n=>{if(Object.keys(n).length===0)return;let r=this.$["*originalUrl"],i=Xi(Qd(n),"preview"),s=Pn(r,i),o={originalUrl:r,cdnUrlModifiers:i,cdnUrl:s,transformations:n};this.dispatchEvent(new CustomEvent("change",{detail:o,bubbles:!0,composed:!0}))},!1),this.sub("uuid",n=>n&&this.updateImage()),this.sub("cdnUrl",n=>n&&this.updateImage())}}U(Oa,"className","cloud-image-editor");Oa.template=E$;Oa.bindAttributes({uuid:"uuid","cdn-url":"cdnUrl","crop-preset":"cropPreset",tabs:"tabs"});class S2 extends Ne{constructor(){super(),this.init$={...this.init$,dragging:!1},this._handlePointerUp=this._handlePointerUp_.bind(this),this._handlePointerMove=this._handlePointerMove_.bind(this),this._handleSvgPointerMove=this._handleSvgPointerMove_.bind(this)}_shouldThumbBeDisabled(e){let n=this.$["*imageBox"];if(!n)return;if(e===""&&n.height<=ge&&n.width<=ge)return!0;let r=n.height<=ge&&(e.includes("n")||e.includes("s")),i=n.width<=ge&&(e.includes("e")||e.includes("w"));return r||i}_createBackdrop(){let e=this.$["*cropBox"];if(!e)return;let{x:n,y:r,width:i,height:s}=e,o=this.ref["svg-el"],a=Fn("mask",{id:"backdrop-mask"}),l=Fn("rect",{x:0,y:0,width:"100%",height:"100%",fill:"white"}),c=Fn("rect",{x:n,y:r,width:i,height:s,fill:"black"});a.appendChild(l),a.appendChild(c);let h=Fn("rect",{x:0,y:0,width:"100%",height:"100%",fill:"var(--color-image-background)","fill-opacity":.85,mask:"url(#backdrop-mask)"});o.appendChild(h),o.appendChild(a),this._backdropMask=a,this._backdropMaskInner=c}_resizeBackdrop(){this._backdropMask&&(this._backdropMask.style.display="none",window.requestAnimationFrame(()=>{this._backdropMask&&(this._backdropMask.style.display="block")}))}_updateBackdrop(){let e=this.$["*cropBox"];if(!e)return;let{x:n,y:r,width:i,height:s}=e;this._backdropMaskInner&&Co(this._backdropMaskInner,{x:n,y:r,width:i,height:s})}_updateFrame(){let e=this.$["*cropBox"];if(!(!e||!this._frameGuides||!this._frameThumbs)){for(let n of Object.values(this._frameThumbs)){let{direction:r,pathNode:i,interactionNode:s,groupNode:o}=n,a=r==="",l=r.length===2,{x:c,y:h,width:f,height:p}=e;if(a){const w={x:c+f/3,y:h+p/3,width:f/3,height:p/3};Co(s,w)}else{const w=Vo(Math.min(f,p)/(Om*2+Tl)/2,0,1);let{d:I,center:R}=l?zU(e,r,w):BU(e,r,w);const C=Math.max(Ww*Vo(Math.min(f,p)/Ww/3,0,1),jU);Co(s,{x:R[0]-C,y:R[1]-C,width:C*2,height:C*2}),Co(i,{d:I})}let _=this._shouldThumbBeDisabled(r);o.setAttribute("class",Xn("thumb",{"thumb--hidden":_,"thumb--visible":!_}))}Co(this._frameGuides,{x:e.x-gs*.5,y:e.y-gs*.5,width:e.width+gs,height:e.height+gs})}}_createThumbs(){const e={};for(let n=0;n<3;n++)for(let r=0;r<3;r++){let i=`${["n","","s"][n]}${["w","","e"][r]}`,s=Fn("g");s.classList.add("thumb"),s.setAttribute("with-effects","");let o=Fn("rect",{fill:"transparent"}),a=Fn("path",{stroke:"currentColor",fill:"none","stroke-width":ZI});s.appendChild(a),s.appendChild(o),e[i]={direction:i,pathNode:a,interactionNode:o,groupNode:s},o.addEventListener("pointerdown",this._handlePointerDown.bind(this,i))}return e}_createGuides(){let e=Fn("svg"),n=Fn("rect",{x:0,y:0,width:"100%",height:"100%",fill:"none",stroke:"#000000","stroke-width":gs,"stroke-opacity":.5});e.appendChild(n);for(let r=1;r<=2;r++){let i=Fn("line",{x1:`${Ac*r}%`,y1:"0%",x2:`${Ac*r}%`,y2:"100%",stroke:"#000000","stroke-width":gs,"stroke-opacity":.3});e.appendChild(i)}for(let r=1;r<=2;r++){let i=Fn("line",{x1:"0%",y1:`${Ac*r}%`,x2:"100%",y2:`${Ac*r}%`,stroke:"#000000","stroke-width":gs,"stroke-opacity":.3});e.appendChild(i)}return e.classList.add("guides","guides--semi-hidden"),e}_createFrame(){let e=this.ref["svg-el"],n=document.createDocumentFragment(),r=this._createGuides();n.appendChild(r);let i=this._createThumbs();for(let{groupNode:s}of Object.values(i))n.appendChild(s);e.appendChild(n),this._frameThumbs=i,this._frameGuides=r}_handlePointerDown(e,n){if(!this._frameThumbs)return;let r=this._frameThumbs[e];if(this._shouldThumbBeDisabled(e))return;let i=this.$["*cropBox"],{x:s,y:o}=this.ref["svg-el"].getBoundingClientRect(),a=n.x-s,l=n.y-o;this.$.dragging=!0,this._draggingThumb=r,this._dragStartPoint=[a,l],this._dragStartCrop={...i}}_handlePointerUp_(e){this._updateCursor(),this.$.dragging&&(e.stopPropagation(),e.preventDefault(),this.$.dragging=!1)}_handlePointerMove_(e){if(!this.$.dragging||!this._dragStartPoint||!this._draggingThumb)return;e.stopPropagation(),e.preventDefault();let n=this.ref["svg-el"],{x:r,y:i}=n.getBoundingClientRect(),s=e.x-r,o=e.y-i,a=s-this._dragStartPoint[0],l=o-this._dragStartPoint[1],{direction:c}=this._draggingThumb;const h=this._calcCropBox(c,[a,l]);h&&(this.$["*cropBox"]=h)}_calcCropBox(e,n){var c;const[r,i]=n;let s=this.$["*imageBox"],o=this._dragStartCrop??this.$["*cropBox"];const a=(c=this.$["*cropPresetList"])==null?void 0:c[0],l=a?a.width/a.height:void 0;if(e===""?o=WU({rect:o,delta:[r,i],imageBox:s}):o=eV({rect:o,delta:[r,i],direction:e,aspectRatio:l,imageBox:s}),!Object.values(o).every(h=>Number.isFinite(h)&&h>=0)){console.error("CropFrame is trying to create invalid rectangle",{payload:o});return}return Wh(eh(o),this.$["*imageBox"])}_handleSvgPointerMove_(e){if(!this._frameThumbs)return;let n=Object.values(this._frameThumbs).find(r=>{if(this._shouldThumbBeDisabled(r.direction))return!1;let s=r.interactionNode.getBoundingClientRect(),o={x:s.x,y:s.y,width:s.width,height:s.height};return tV(o,[e.x,e.y])});this._hoverThumb=n,this._updateCursor()}_updateCursor(){let e=this._hoverThumb;this.ref["svg-el"].style.cursor=e?HU(e.direction):"initial"}_render(){this._updateBackdrop(),this._updateFrame()}toggleThumbs(e){this._frameThumbs&&Object.values(this._frameThumbs).map(({groupNode:n})=>n).forEach(n=>{n.setAttribute("class",Xn("thumb",{"thumb--hidden":!e,"thumb--visible":e}))})}initCallback(){super.initCallback(),this._createBackdrop(),this._createFrame(),this.sub("*imageBox",()=>{this._resizeBackdrop(),window.requestAnimationFrame(()=>{this._render()})}),this.sub("*cropBox",e=>{e&&(this._guidesHidden=e.height<=ge||e.width<=ge,window.requestAnimationFrame(()=>{this._render()}))}),this.sub("dragging",e=>{this._frameGuides&&this._frameGuides.setAttribute("class",Xn({"guides--hidden":this._guidesHidden,"guides--visible":!this._guidesHidden&&e,"guides--semi-hidden":!this._guidesHidden&&!e}))}),this.ref["svg-el"].addEventListener("pointermove",this._handleSvgPointerMove,!0),document.addEventListener("pointermove",this._handlePointerMove,!0),document.addEventListener("pointerup",this._handlePointerUp,!0)}destroyCallback(){super.destroyCallback(),document.removeEventListener("pointermove",this._handlePointerMove),document.removeEventListener("pointerup",this._handlePointerUp)}}S2.template=' <svg class="svg" ref="svg-el" xmlns="http://www.w3.org/2000/svg"></svg> ';class Jd extends Ne{constructor(){super(...arguments);U(this,"init$",{...this.init$,active:!1,title:"",icon:"","on.click":null})}initCallback(){super.initCallback(),this._titleEl=this.ref["title-el"],this._iconEl=this.ref["icon-el"],this.setAttribute("role","button"),this.tabIndex===-1&&(this.tabIndex=0),this.sub("title",n=>{this._titleEl&&(this._titleEl.style.display=n?"block":"none")}),this.sub("active",n=>{this.className=Xn({active:n,not_active:!n})}),this.sub("on.click",n=>{this.onclick=n})}}Jd.template=`
  <div class="before"></div>
  <lr-icon size="20" set="@name: icon;"></lr-icon>
  <div class="title" ref="title-el">{{title}}</div>
`;function b$(t){let e=t+90;return e=e>=360?0:e,e}function T$(t,e){return t==="rotate"?b$(e):["mirror","flip"].includes(t)?!e:null}class A2 extends Jd{initCallback(){super.initCallback(),this.defineAccessor("operation",e=>{e&&(this._operation=e,this.$.icon=e)}),this.$["on.click"]=e=>{let n=this.$["*cropperEl"].getValue(this._operation),r=T$(this._operation,n);this.$["*cropperEl"].setValue(this._operation,r)}}}const dl={FILTER:"filter",COLOR_OPERATION:"color_operation"},Bi="original";class x2 extends Ne{constructor(){super(...arguments);U(this,"init$",{...this.init$,disabled:!1,min:0,max:100,value:0,defaultValue:0,zero:0,"on.input":n=>{this.$["*faderEl"].set(n),this.$.value=n}})}setOperation(n,r){this._controlType=n==="filter"?dl.FILTER:dl.COLOR_OPERATION,this._operation=n,this._iconName=n,this._title=n.toUpperCase(),this._filter=r,this._initializeValues(),this.$["*faderEl"].activate({url:this.$["*originalUrl"],operation:this._operation,value:this._filter===Bi?void 0:this.$.value,filter:this._filter===Bi?void 0:this._filter,fromViewer:!1})}_initializeValues(){let{range:n,zero:r}=ya[this._operation],[i,s]=n;this.$.min=i,this.$.max=s,this.$.zero=r;let o=this.$["*editorTransformations"][this._operation];if(this._controlType===dl.FILTER){let a=s;if(o){let{name:l,amount:c}=o;a=l===this._filter?c:s}this.$.value=a,this.$.defaultValue=a}if(this._controlType===dl.COLOR_OPERATION){let a=typeof o<"u"?o:r;this.$.value=a,this.$.defaultValue=a}}apply(){let n;this._controlType===dl.FILTER?this._filter===Bi?n=null:n={name:this._filter,amount:this.$.value}:n=this.$.value;let r={...this.$["*editorTransformations"],[this._operation]:n};this.$["*editorTransformations"]=r}cancel(){this.$["*faderEl"].deactivate({hide:!1})}initCallback(){super.initCallback(),this.sub("*originalUrl",n=>{this._originalUrl=n}),this.sub("value",n=>{let r=`${this._filter||this._operation} ${n}`;this.$["*operationTooltip"]=r})}}x2.template=`
  <lr-slider-ui
    ref="slider-el"
    set="disabled: disabled; min: min; max: max; defaultValue: defaultValue; zero: zero; onInput: on.input;"
  ></lr-slider-ui>
`;function nv(t){let e=new Image;return{promise:new Promise((i,s)=>{e.src=t,e.onload=i,e.onerror=s}),image:e,cancel:()=>{e.naturalWidth===0&&(e.src=Yi)}}}function Mm(t){let e=[];for(let s of t){let o=nv(s);e.push(o)}let n=e.map(s=>s.image);return{promise:Promise.allSettled(e.map(s=>s.promise)),images:n,cancel:()=>{e.forEach(s=>{s.cancel()})}}}class rv extends Jd{constructor(){super(...arguments);U(this,"init$",{...this.init$,active:!1,title:"",icon:"",isOriginal:!1,iconSize:"20","on.click":null})}_previewSrc(){let n=parseInt(window.getComputedStyle(this).getPropertyValue("--l-base-min-width"),10),r=window.devicePixelRatio,i=Math.ceil(r*n),s=r>=2?"lightest":"normal",o=100,a={...this.$["*editorTransformations"]};return a[this._operation]=this._filter!==Bi?{name:this._filter,amount:o}:void 0,Pn(this._originalUrl,Xi(JI,Qd(a),`quality/${s}`,`scale_crop/${i}x${i}/center`))}_observerCallback(n,r){if(n[0].isIntersecting){let s=this.proxyUrl(this._previewSrc()),o=this.ref["preview-el"],{promise:a,cancel:l}=nv(s);this._cancelPreload=l,a.catch(c=>{this.$["*networkProblems"]=!0,console.error("Failed to load image",{error:c})}).finally(()=>{o.style.backgroundImage=`url(${s})`,o.setAttribute("loaded",""),r.unobserve(this)})}else this._cancelPreload&&this._cancelPreload()}initCallback(){super.initCallback(),this.$["on.click"]=r=>{this.$.active?this.$.isOriginal||(this.$["*sliderEl"].setOperation(this._operation,this._filter),this.$["*showSlider"]=!0):(this.$["*sliderEl"].setOperation(this._operation,this._filter),this.$["*sliderEl"].apply()),this.$["*currentFilter"]=this._filter},this.defineAccessor("filter",r=>{this._operation="filter",this._filter=r,this.$.isOriginal=r===Bi,this.$.icon=this.$.isOriginal?"original":"slider"}),this._observer=new window.IntersectionObserver(this._observerCallback.bind(this),{threshold:[0,1]});let n=this.$["*originalUrl"];this._originalUrl=n,this.$.isOriginal?this.ref["icon-el"].classList.add("original-icon"):this._observer.observe(this),this.sub("*currentFilter",r=>{this.$.active=r&&r===this._filter}),this.sub("isOriginal",r=>{this.$.iconSize=r?40:20}),this.sub("active",r=>{if(this.$.isOriginal)return;let i=this.ref["icon-el"];i.style.opacity=r?"1":"0";let s=this.ref["preview-el"];r?s.style.opacity="0":s.style.backgroundImage&&(s.style.opacity="1")}),this.sub("*networkProblems",r=>{if(!r){let i=this.proxyUrl(this._previewSrc()),s=this.ref["preview-el"];s.style.backgroundImage&&(s.style.backgroundImage="none",s.style.backgroundImage=`url(${i})`)}})}destroyCallback(){var n;super.destroyCallback(),(n=this._observer)==null||n.disconnect(),this._cancelPreload&&this._cancelPreload()}}rv.template=`
  <div class="before"></div>
  <div class="preview" ref="preview-el"></div>
  <lr-icon size="40" ref="icon-el" set="@name: icon; @size: iconSize;"></lr-icon>
`;class k2 extends Jd{constructor(){super(...arguments);U(this,"_operation","")}initCallback(){super.initCallback(),this.$["on.click"]=n=>{this.$["*sliderEl"].setOperation(this._operation),this.$["*showSlider"]=!0,this.$["*currentOperation"]=this._operation},this.defineAccessor("operation",n=>{n&&(this._operation=n,this.$.icon=n,this.bindL10n("title",()=>this.l10n(n)))}),this.sub("*editorTransformations",n=>{if(!this._operation)return;let{zero:r}=ya[this._operation],i=n[this._operation],s=typeof i<"u"?i!==r:!1;this.$.active=s})}}function C$(t,e){let n={};for(let r of e){let i=t[r];(t.hasOwnProperty(r)||i!==void 0)&&(n[r]=i)}return n}function iv(t,e,n){let i=window.devicePixelRatio,s=Math.min(Math.ceil(e*i),3e3),o=i>=2?"lightest":"normal";return Pn(t,Xi(JI,Qd(n),`quality/${o}`,`stretch/off/-/resize/${s}x`))}function I$(t){return t?[({dimensions:n,coords:r})=>[...n,...r].every(i=>Number.isInteger(i)&&Number.isFinite(i)),({dimensions:n,coords:r})=>n.every(i=>i>0)&&r.every(i=>i>=0)].every(n=>n(t)):!0}class P2 extends Ne{constructor(){super();U(this,"ctxOwner",!0);this.init$={...this.init$,image:null,"*padding":FU,"*operations":{rotate:0,mirror:!1,flip:!1},"*imageBox":{x:0,y:0,width:0,height:0},"*cropBox":{x:0,y:0,width:0,height:0}},this._commitDebounced=Mn(this._commit.bind(this),300),this._handleResizeThrottled=y2(this._handleResize.bind(this),100),this._imageSize={width:0,height:0}}_handleResize(){!this.isConnected||!this._isActive||(this._initCanvas(),this._syncTransformations(),this._alignImage(),this._alignCrop(),this._draw())}_syncTransformations(){let n=this.$["*editorTransformations"],r=C$(n,Object.keys(this.$["*operations"])),i={...this.$["*operations"],...r};this.$["*operations"]=i}_initCanvas(){let n=this.ref["canvas-el"],r=n.getContext("2d"),i=this.offsetWidth,s=this.offsetHeight,o=window.devicePixelRatio;n.style.width=`${i}px`,n.style.height=`${s}px`,n.width=i*o,n.height=s*o,r==null||r.scale(o,o),this._canvas=n,this._ctx=r}_alignImage(){if(!this._isActive||!this.$.image)return;let n=this.$.image,r=this.$["*padding"],i=this.$["*operations"],{rotate:s}=i,o={width:this.offsetWidth,height:this.offsetHeight},a=cl({width:n.naturalWidth,height:n.naturalHeight},s),l;if(a.width>o.width-r*2||a.height>o.height-r*2){let c=a.width/a.height,h=o.width/o.height;if(c>h){let f=o.width-r*2,p=f/c,_=0+r,w=r+(o.height-r*2)/2-p/2;l={x:_,y:w,width:f,height:p}}else{let f=o.height-r*2,p=f*c,_=r+(o.width-r*2)/2-p/2,w=0+r;l={x:_,y:w,width:p,height:f}}}else{let{width:c,height:h}=a,f=r+(o.width-r*2)/2-c/2,p=r+(o.height-r*2)/2-h/2;l={x:f,y:p,width:c,height:h}}this.$["*imageBox"]=eh(l)}_alignCrop(){var p;let n=this.$["*cropBox"],r=this.$["*imageBox"],i=this.$["*operations"],{rotate:s}=i,o=this.$["*editorTransformations"].crop,{width:a,x:l,y:c}=this.$["*imageBox"];if(o){let{dimensions:[_,w],coords:[I,R]}=o,{width:C}=cl(this._imageSize,s),E=a/C;n=Wh(eh({x:l+I*E,y:c+R*E,width:_*E,height:w*E}),this.$["*imageBox"])}const h=(p=this.$["*cropPresetList"])==null?void 0:p[0],f=h?h.width/h.height:void 0;if(!nV(n,r)||f&&!rV(n,f)){const _=r.width/r.height;let w=r.width,I=r.height;f&&(_>f?w=Math.min(r.height*f,r.width):I=Math.min(r.width/f,r.height)),n={x:r.x+r.width/2-w/2,y:r.y+r.height/2-I/2,width:w,height:I}}this.$["*cropBox"]=Wh(eh(n),this.$["*imageBox"])}_drawImage(){let n=this._ctx;if(!n)return;let r=this.$.image,i=this.$["*imageBox"],s=this.$["*operations"],{mirror:o,flip:a,rotate:l}=s,c=cl({width:i.width,height:i.height},l);n.save(),n.translate(i.x+i.width/2,i.y+i.height/2),n.rotate(l*Math.PI*-1/180),n.scale(o?-1:1,a?-1:1),n.drawImage(r,-c.width/2,-c.height/2,c.width,c.height),n.restore()}_draw(){if(!this._isActive||!this.$.image||!this._canvas||!this._ctx)return;let n=this._canvas;this._ctx.clearRect(0,0,n.width,n.height),this._drawImage()}_animateIn({fromViewer:n}){this.$.image&&(this.ref["frame-el"].toggleThumbs(!0),this._transitionToImage(),setTimeout(()=>{this.className=Xn({active_from_viewer:n,active_from_editor:!n,inactive_to_editor:!1})}))}_getCropDimensions(){let n=this.$["*cropBox"],r=this.$["*imageBox"],i=this.$["*operations"],{rotate:s}=i,{width:o,height:a}=r,{width:l,height:c}=cl(this._imageSize,s),{width:h,height:f}=n,p=o/l,_=a/c;return[Vo(Math.round(h/p),1,l),Vo(Math.round(f/_),1,c)]}_getCropTransformation(){let n=this.$["*cropBox"],r=this.$["*imageBox"],i=this.$["*operations"],{rotate:s}=i,{width:o,height:a,x:l,y:c}=r,{width:h,height:f}=cl(this._imageSize,s),{x:p,y:_}=n,w=o/h,I=a/f,R=this._getCropDimensions(),C={dimensions:R,coords:[Vo(Math.round((p-l)/w),0,h-R[0]),Vo(Math.round((_-c)/I),0,f-R[1])]};if(!I$(C)){console.error("Cropper is trying to create invalid crop object",{payload:C});return}if(!(R[0]===h&&R[1]===f))return C}_commit(){if(!this.isConnected)return;let n=this.$["*operations"],{rotate:r,mirror:i,flip:s}=n,o=this._getCropTransformation(),l={...this.$["*editorTransformations"],crop:o,rotate:r,mirror:i,flip:s};this.$["*editorTransformations"]=l}setValue(n,r){this.$["*operations"]={...this.$["*operations"],[n]:r},this._isActive&&(this._alignImage(),this._alignCrop(),this._draw())}getValue(n){return this.$["*operations"][n]}async activate(n,{fromViewer:r}={}){if(!this._isActive){this._isActive=!0,this._imageSize=n,this.removeEventListener("transitionend",this._reset);try{this.$.image=await this._waitForImage(this.$["*originalUrl"],this.$["*editorTransformations"]),this._syncTransformations(),this._animateIn({fromViewer:r})}catch(i){console.error("Failed to activate cropper",{error:i})}this._observer=new ResizeObserver(([i])=>{i.contentRect.width>0&&i.contentRect.height>0&&this._isActive&&this.$.image&&this._handleResizeThrottled()}),this._observer.observe(this)}}deactivate({reset:n=!1}={}){var r;this._isActive&&(!n&&this._commit(),this._isActive=!1,this._transitionToCrop(),this.className=Xn({active_from_viewer:!1,active_from_editor:!1,inactive_to_editor:!0}),this.ref["frame-el"].toggleThumbs(!1),this.addEventListener("transitionend",this._reset,{once:!0}),(r=this._observer)==null||r.disconnect())}_transitionToCrop(){let n=this._getCropDimensions(),r=Math.min(this.offsetWidth,n[0])/this.$["*cropBox"].width,i=Math.min(this.offsetHeight,n[1])/this.$["*cropBox"].height,s=Math.min(r,i),o=this.$["*cropBox"].x+this.$["*cropBox"].width/2,a=this.$["*cropBox"].y+this.$["*cropBox"].height/2;this.style.transform=`scale(${s}) translate(${(this.offsetWidth/2-o)/s}px, ${(this.offsetHeight/2-a)/s}px)`,this.style.transformOrigin=`${o}px ${a}px`}_transitionToImage(){let n=this.$["*cropBox"].x+this.$["*cropBox"].width/2,r=this.$["*cropBox"].y+this.$["*cropBox"].height/2;this.style.transform="scale(1)",this.style.transformOrigin=`${n}px ${r}px`}_reset(){this._isActive||(this.$.image=null)}_waitForImage(n,r){let i=this.offsetWidth;r={...r,crop:void 0,rotate:void 0,flip:void 0,mirror:void 0};let s=this.proxyUrl(iv(n,i,r)),{promise:o,cancel:a,image:l}=nv(s),c=this._handleImageLoading(s);return l.addEventListener("load",c,{once:!0}),l.addEventListener("error",c,{once:!0}),this._cancelPreload&&this._cancelPreload(),this._cancelPreload=a,o.then(()=>l).catch(h=>(console.error("Failed to load image",{error:h}),this.$["*networkProblems"]=!0,Promise.resolve(l)))}_handleImageLoading(n){let r="crop",i=this.$["*loadingOperations"];return i.get(r)||i.set(r,new Map),i.get(r).get(n)||(i.set(r,i.get(r).set(n,!0)),this.$["*loadingOperations"]=i),()=>{var s;(s=i==null?void 0:i.get(r))!=null&&s.has(n)&&(i.get(r).delete(n),this.$["*loadingOperations"]=i)}}initCallback(){super.initCallback(),this.sub("*imageBox",()=>{this._draw()}),this.sub("*cropBox",()=>{this.$.image&&this._commitDebounced()}),this.sub("*cropPresetList",()=>{this._alignCrop()}),setTimeout(()=>{this.sub("*networkProblems",n=>{n||this._isActive&&this.activate(this._imageSize,{fromViewer:!1})})},0)}destroyCallback(){var n;super.destroyCallback(),(n=this._observer)==null||n.disconnect()}}P2.template=`
  <canvas class="canvas" ref="canvas-el"></canvas>
  <lr-crop-frame ref="frame-el"></lr-crop-frame>
`;function l1(t,e,n){let r=Array(n);n--;for(let i=n;i>=0;i--)r[i]=Math.ceil((i*e+(n-i)*t)/n);return r}function S$(t){return t.reduce((e,n,r)=>r<t.length-1?[...e,[n,t[r+1]]]:e,[])}function A$(t,e,n){let r=S$(t).find(([i,s])=>i<=e&&e<=s);return t.map(i=>{let s=Math.abs(r[0]-r[1]),o=Math.abs(e-r[0])/s;return r[0]===i?e>n?1:1-o:r[1]===i?e>=n?o:1:0})}function x$(t,e){return t.map((n,r)=>n<e?t.length-r:r)}function u1(t,e){let n=ya[t].keypointsNumber,{range:r,zero:i}=ya[t];return[...new Set([...l1(r[0],i,n+1),...l1(i,r[1],n+1),i,e])].sort((s,o)=>s-o)}class k$ extends Ne{constructor(){super(),this._isActive=!1,this._hidden=!0,this._addKeypointDebounced=Mn(this._addKeypoint.bind(this),600),this.classList.add("inactive_to_cropper")}_handleImageLoading(e){let n=this._operation,r=this.$["*loadingOperations"];return r.get(n)||r.set(n,new Map),r.get(n).get(e)||(r.set(n,r.get(n).set(e,!0)),this.$["*loadingOperations"]=r),()=>{var i;(i=r==null?void 0:r.get(n))!=null&&i.has(e)&&(r.get(n).delete(e),this.$["*loadingOperations"]=r)}}_flush(){window.cancelAnimationFrame(this._raf),this._raf=window.requestAnimationFrame(()=>{for(let e of this._keypoints){let{image:n}=e;n&&(n.style.opacity=e.opacity.toString(),n.style.zIndex=e.zIndex.toString())}})}_imageSrc({url:e=this._url,filter:n=this._filter,operation:r,value:i}={}){let s={...this._transformations};r&&(s[r]=n?{name:n,amount:i}:i);let o=this.offsetWidth;return this.proxyUrl(iv(e,o,s))}_constructKeypoint(e,n){return{src:this._imageSrc({operation:e,value:n}),image:null,opacity:0,zIndex:0,value:n}}_isSame(e,n){return this._operation===e&&this._filter===n}_addKeypoint(e,n,r){let i=()=>!this._isSame(e,n)||this._value!==r||!!this._keypoints.find(l=>l.value===r);if(i())return;let s=this._constructKeypoint(e,r),o=new Image;o.src=s.src;let a=this._handleImageLoading(s.src);o.addEventListener("load",a,{once:!0}),o.addEventListener("error",a,{once:!0}),s.image=o,o.classList.add("fader-image"),o.addEventListener("load",()=>{if(i())return;let l=this._keypoints,c=l.findIndex(f=>f.value>r),h=c<l.length?l[c].image:null;!this._container||h&&!this._container.contains(h)||(l.splice(c,0,s),this._container.insertBefore(o,h),this._update(e,r))},{once:!0}),o.addEventListener("error",()=>{this.$["*networkProblems"]=!0},{once:!0})}set(e){e=typeof e=="string"?parseInt(e,10):e,this._update(this._operation,e),this._addKeypointDebounced(this._operation,this._filter,e)}_update(e,n){this._operation=e,this._value=n;let{zero:r}=ya[e],i=this._keypoints.map(a=>a.value),s=A$(i,n,r),o=x$(i,r);for(let[a,l]of Object.entries(this._keypoints))l.opacity=s[a],l.zIndex=o[a];this._flush()}_createPreviewImage(){let e=new Image;return e.classList.add("fader-image","fader-image--preview"),e.style.opacity="0",e}async _initNodes(){let e=document.createDocumentFragment();this._previewImage=this._previewImage||this._createPreviewImage(),!this.contains(this._previewImage)&&e.appendChild(this._previewImage);let n=document.createElement("div");e.appendChild(n);let r=this._keypoints.map(c=>c.src),{images:i,promise:s,cancel:o}=Mm(r);i.forEach(c=>{let h=this._handleImageLoading(c.src);c.addEventListener("load",h),c.addEventListener("error",h)}),this._cancelLastImages=()=>{o(),this._cancelLastImages=void 0};let a=this._operation,l=this._filter;await s,this._isActive&&this._isSame(a,l)&&(this._container&&this._container.remove(),this._container=n,this._keypoints.forEach((c,h)=>{let f=i[h];f.classList.add("fader-image"),c.image=f,this._container.appendChild(f)}),this.appendChild(e),this._flush())}setTransformations(e){if(this._transformations=e,this._previewImage){let n=this._imageSrc(),r=this._handleImageLoading(n);this._previewImage.src=n,this._previewImage.addEventListener("load",r,{once:!0}),this._previewImage.addEventListener("error",r,{once:!0}),this._previewImage.style.opacity="1",this._previewImage.addEventListener("error",()=>{this.$["*networkProblems"]=!0},{once:!0})}}preload({url:e,filter:n,operation:r,value:i}){this._cancelBatchPreload&&this._cancelBatchPreload();let o=u1(r,i).map(l=>this._imageSrc({url:e,filter:n,operation:r,value:l})),{cancel:a}=Mm(o);this._cancelBatchPreload=a}_setOriginalSrc(e){let n=this._previewImage||this._createPreviewImage();if(!this.contains(n)&&this.appendChild(n),this._previewImage=n,n.src===e){n.style.opacity="1",n.style.transform="scale(1)",this.className=Xn({active_from_viewer:this._fromViewer,active_from_cropper:!this._fromViewer,inactive_to_cropper:!1});return}n.style.opacity="0";let r=this._handleImageLoading(e);n.addEventListener("error",r,{once:!0}),n.src=e,n.addEventListener("load",()=>{r(),n&&(n.style.opacity="1",n.style.transform="scale(1)",this.className=Xn({active_from_viewer:this._fromViewer,active_from_cropper:!this._fromViewer,inactive_to_cropper:!1}))},{once:!0}),n.addEventListener("error",()=>{this.$["*networkProblems"]=!0},{once:!0})}activate({url:e,operation:n,value:r,filter:i,fromViewer:s}){if(this._isActive=!0,this._hidden=!1,this._url=e,this._operation=n||"initial",this._value=r,this._filter=i,this._fromViewer=s,typeof r!="number"&&!i){let a=this._imageSrc({operation:n,value:r});this._setOriginalSrc(a),this._container&&this._container.remove();return}this._keypoints=u1(n,r).map(a=>this._constructKeypoint(n,a)),this._update(n,r),this._initNodes()}deactivate({hide:e=!0}={}){this._isActive=!1,this._cancelLastImages&&this._cancelLastImages(),this._cancelBatchPreload&&this._cancelBatchPreload(),e&&!this._hidden?(this._hidden=!0,this._previewImage&&(this._previewImage.style.transform="scale(1)"),this.className=Xn({active_from_viewer:!1,active_from_cropper:!1,inactive_to_cropper:!0}),this.addEventListener("transitionend",()=>{this._container&&this._container.remove()},{once:!0})):this._container&&this._container.remove()}}const P$=1;class R2 extends Ne{initCallback(){super.initCallback(),this.addEventListener("wheel",e=>{e.preventDefault();let{deltaY:n,deltaX:r}=e;Math.abs(r)>P$?this.scrollLeft+=r:this.scrollLeft+=n})}}R2.template=" <slot></slot> ";function R$(t){return`
    <lr-presence-toggle class="tab-toggle" set="visible: presence.tabToggle.${t}; styles: presence.tabToggleStyles;">
      <lr-btn-ui
        theme="boring"
        ref="tab-toggle-${t}"
        data-id="${t}"
        icon="${t}"
        tabindex="0"
        set="onclick: on.clickTab;"
      >
      </lr-btn-ui>
    </lr-presence-toggle>
  `}function N$(t){return`
    <lr-presence-toggle class="tab-content" set="visible: presence.tabContent.${t}; styles: presence.tabContentStyles">
      <lr-editor-scroller hidden-scrollbar>
        <div class="controls-list_align">
          <div class="controls-list_inner" ref="controls-list-${t}"></div>
        </div>
      </lr-editor-scroller>
    </lr-presence-toggle>
  `}class N2 extends Ne{constructor(){super();U(this,"_updateInfoTooltip",Mn(()=>{var o,a;const n=this.$["*editorTransformations"],r=this.$["*currentOperation"];let i="",s=!1;if(this.$["*tabId"]===Qt.FILTERS)if(s=!0,this.$["*currentFilter"]&&((o=n==null?void 0:n.filter)==null?void 0:o.name)===this.$["*currentFilter"]){let l=((a=n==null?void 0:n.filter)==null?void 0:a.amount)||100;i=this.$["*currentFilter"]+" "+l}else i=this.l10n(Bi);else if(this.$["*tabId"]===Qt.TUNING&&r){s=!0;let l=(n==null?void 0:n[r])||ya[r].zero;i=this.l10n(r)+" "+l}s&&(this.$["*operationTooltip"]=i),this.ref["tooltip-el"].classList.toggle("info-tooltip_visible",s)},0));this.init$={...this.init$,"*sliderEl":null,"*loadingOperations":new Map,"*showSlider":!1,"*currentFilter":Bi,"*currentOperation":null,showLoader:!1,filters:LU,colorOperations:OU,cropOperations:DU,"*operationTooltip":null,"presence.mainToolbar":!0,"presence.subToolbar":!1,"presence.tabToggles":!0,"presence.tabContent.crop":!1,"presence.tabContent.tuning":!1,"presence.tabContent.filters":!1,"presence.tabToggle.crop":!0,"presence.tabToggle.tuning":!0,"presence.tabToggle.filters":!0,"presence.subTopToolbarStyles":{hidden:"sub-toolbar--top-hidden",visible:"sub-toolbar--visible"},"presence.subBottomToolbarStyles":{hidden:"sub-toolbar--bottom-hidden",visible:"sub-toolbar--visible"},"presence.tabContentStyles":{hidden:"tab-content--hidden",visible:"tab-content--visible"},"presence.tabToggleStyles":{hidden:"tab-toggle--hidden",visible:"tab-toggle--visible"},"presence.tabTogglesStyles":{hidden:"tab-toggles--hidden",visible:"tab-toggles--visible"},"on.cancel":()=>{this._cancelPreload&&this._cancelPreload(),this.$["*on.cancel"]()},"on.apply":()=>{this.$["*on.apply"](this.$["*editorTransformations"])},"on.applySlider":()=>{this.ref["slider-el"].apply(),this._onSliderClose()},"on.cancelSlider":()=>{this.ref["slider-el"].cancel(),this._onSliderClose()},"on.clickTab":n=>{const r=n.currentTarget.getAttribute("data-id");r&&this._activateTab(r,{fromViewer:!1})}},this._debouncedShowLoader=Mn(this._showLoader.bind(this),500)}_onSliderClose(){this.$["*showSlider"]=!1,this.$["*tabId"]===Qt.TUNING&&this.ref["tooltip-el"].classList.toggle("info-tooltip_visible",!1)}_createOperationControl(n){let r=new k2;return r.operation=n,r}_createFilterControl(n){let r=new rv;return r.filter=n,r}_createToggleControl(n){let r=new A2;return r.operation=n,r}_renderControlsList(n){let r=this.ref[`controls-list-${n}`],i=document.createDocumentFragment();n===Qt.CROP?this.$.cropOperations.forEach(s=>{let o=this._createToggleControl(s);i.appendChild(o)}):n===Qt.FILTERS?[Bi,...this.$.filters].forEach(s=>{let o=this._createFilterControl(s);i.appendChild(o)}):n===Qt.TUNING&&this.$.colorOperations.forEach(s=>{let o=this._createOperationControl(s);i.appendChild(o)}),[...i.children].forEach((s,o)=>{o===i.childNodes.length-1&&s.classList.add("controls-list_last-item")}),r.innerHTML="",r.appendChild(i)}_activateTab(n,{fromViewer:r}){this.$["*tabId"]=n,n===Qt.CROP?(this.$["*faderEl"].deactivate(),this.$["*cropperEl"].activate(this.$["*imageSize"],{fromViewer:r})):(this.$["*faderEl"].activate({url:this.$["*originalUrl"],fromViewer:r}),this.$["*cropperEl"].deactivate());for(let i of pr){let s=i===n,o=this.ref[`tab-toggle-${i}`];o.active=s,s?(this._renderControlsList(n),this._syncTabIndicator()):this._unmountTabControls(i),this.$[`presence.tabContent.${i}`]=s}}_unmountTabControls(n){let r=this.ref[`controls-list-${n}`];r&&(r.innerHTML="")}_syncTabIndicator(){let n=this.ref[`tab-toggle-${this.$["*tabId"]}`],r=this.ref["tabs-indicator"];r.style.transform=`translateX(${n.offsetLeft}px)`}_preloadEditedImage(){if(this.$["*imgContainerEl"]&&this.$["*originalUrl"]){let n=this.$["*imgContainerEl"].offsetWidth,r=this.proxyUrl(iv(this.$["*originalUrl"],n,this.$["*editorTransformations"]));this._cancelPreload&&this._cancelPreload();let{cancel:i}=Mm([r]);this._cancelPreload=()=>{i(),this._cancelPreload=void 0}}}_showLoader(n){this.$.showLoader=n}initCallback(){super.initCallback(),this.$["*sliderEl"]=this.ref["slider-el"],this.sub("*imageSize",n=>{n&&setTimeout(()=>{this._activateTab(this.$["*tabId"],{fromViewer:!0})},0)}),this.sub("*editorTransformations",n=>{var i;let r=(i=n==null?void 0:n.filter)==null?void 0:i.name;this.$["*currentFilter"]!==r&&(this.$["*currentFilter"]=r)}),this.sub("*currentFilter",()=>{this._updateInfoTooltip()}),this.sub("*currentOperation",()=>{this._updateInfoTooltip()}),this.sub("*tabId",()=>{this._updateInfoTooltip()}),this.sub("*originalUrl",()=>{this.$["*faderEl"]&&this.$["*faderEl"].deactivate()}),this.sub("*editorTransformations",n=>{this._preloadEditedImage(),this.$["*faderEl"]&&this.$["*faderEl"].setTransformations(n)}),this.sub("*loadingOperations",n=>{let r=!1;for(let[,i]of n.entries()){if(r)break;for(let[,s]of i.entries())if(s){r=!0;break}}this._debouncedShowLoader(r)}),this.sub("*showSlider",n=>{this.$["presence.subToolbar"]=n,this.$["presence.mainToolbar"]=!n}),this.sub("*tabList",n=>{this.$["presence.tabToggles"]=n.length>1;for(const r of pr){this.$[`presence.tabToggle.${r}`]=n.includes(r);const i=this.ref[`tab-toggle-${r}`];i.style.gridColumn=n.indexOf(r)+1}n.includes(this.$["*tabId"])||this._activateTab(n[0],{fromViewer:!1})}),this._updateInfoTooltip()}}N2.template=`
  <lr-line-loader-ui set="active: showLoader"></lr-line-loader-ui>
  <div class="info-tooltip_container">
    <div class="info-tooltip_wrapper">
      <div ref="tooltip-el" class="info-tooltip info-tooltip_hidden">{{*operationTooltip}}</div>
    </div>
  </div>
  <div class="toolbar-container">
    <lr-presence-toggle class="sub-toolbar" set="visible: presence.mainToolbar; styles: presence.subTopToolbarStyles">
      <div class="tab-content-row">${pr.map(N$).join("")}</div>
      <div class="controls-row">
        <lr-btn-ui theme="boring" icon="closeMax" set="onclick: on.cancel"> </lr-btn-ui>
        <lr-presence-toggle class="tab-toggles" set="visible: presence.tabToggles; styles: presence.tabTogglesStyles">
          <div ref="tabs-indicator" class="tab-toggles_indicator"></div>
          ${pr.map(R$).join("")}
        </lr-presence-toggle>
        <lr-btn-ui theme="primary" icon="done" set="onclick: on.apply"> </lr-btn-ui>
      </div>
    </lr-presence-toggle>
    <lr-presence-toggle class="sub-toolbar" set="visible: presence.subToolbar; styles: presence.subBottomToolbarStyles">
      <div class="slider">
        <lr-editor-slider ref="slider-el"></lr-editor-slider>
      </div>
      <div class="controls-row">
        <lr-btn-ui theme="boring" set="onclick: on.cancelSlider;" l10n="@text:cancel"> </lr-btn-ui>
        <lr-btn-ui theme="primary" set="onclick: on.applySlider;" l10n="@text:apply"> </lr-btn-ui>
      </div>
    </lr-presence-toggle>
  </div>
`;class sv extends Ne{constructor(){super(),this._iconReversed=!1,this._iconSingle=!1,this._iconHidden=!1,this.init$={...this.init$,text:"",icon:"",iconCss:this._iconCss(),theme:null},this.defineAccessor("active",e=>{e?this.setAttribute("active",""):this.removeAttribute("active")})}_iconCss(){return Xn("icon",{icon_left:!this._iconReversed,icon_right:this._iconReversed,icon_hidden:this._iconHidden,icon_single:this._iconSingle})}initCallback(){super.initCallback(),this.sub("icon",e=>{this._iconSingle=!this.$.text,this._iconHidden=!e,this.$.iconCss=this._iconCss()}),this.sub("theme",e=>{e!=="custom"&&(this.className=e)}),this.sub("text",e=>{this._iconSingle=!1}),this.setAttribute("role","button"),this.tabIndex===-1&&(this.tabIndex=0),this.hasAttribute("theme")||this.setAttribute("theme","default")}set reverse(e){this.hasAttribute("reverse")?(this.style.flexDirection="row-reverse",this._iconReversed=!0):(this._iconReversed=!1,this.style.flexDirection=null)}}sv.bindAttributes({text:"text",icon:"icon",reverse:"reverse",theme:"theme"});sv.template=`
  <lr-icon size="20" set="className: iconCss; @name: icon;"></lr-icon>
  <div class="text">{{text}}</div>
`;class O2 extends Ne{constructor(){super(),this._active=!1,this._handleTransitionEndRight=()=>{let e=this.ref["line-el"];e.style.transition="initial",e.style.opacity="0",e.style.transform="translateX(-101%)",this._active&&this._start()}}initCallback(){super.initCallback(),this.defineAccessor("active",e=>{typeof e=="boolean"&&(e?this._start():this._stop())})}_start(){this._active=!0;let{width:e}=this.getBoundingClientRect(),n=this.ref["line-el"];n.style.transition="transform 1s",n.style.opacity="1",n.style.transform=`translateX(${e}px)`,n.addEventListener("transitionend",this._handleTransitionEndRight,{once:!0})}_stop(){this._active=!1}}O2.template=`
  <div class="inner">
    <div class="line" ref="line-el"></div>
  </div>
`;const Rc={transition:"transition",visible:"visible",hidden:"hidden"};class L2 extends Ne{constructor(){super(),this._visible=!1,this._visibleStyle=Rc.visible,this._hiddenStyle=Rc.hidden,this._externalTransitions=!1,this.defineAccessor("styles",e=>{e&&(this._externalTransitions=!0,this._visibleStyle=e.visible,this._hiddenStyle=e.hidden)}),this.defineAccessor("visible",e=>{typeof e=="boolean"&&(this._visible=e,this._handleVisible())})}_handleVisible(){this.style.visibility=this._visible?"inherit":"hidden",v$(this,{[Rc.transition]:!this._externalTransitions,[this._visibleStyle]:this._visible,[this._hiddenStyle]:!this._visible}),this.setAttribute("aria-hidden",this._visible?"false":"true")}initCallback(){super.initCallback(),this.setAttribute("hidden",""),this._externalTransitions||this.classList.add(Rc.transition),this._handleVisible(),setTimeout(()=>this.removeAttribute("hidden"),0)}}L2.template=" <slot></slot> ";class D2 extends Ne{constructor(){super();U(this,"init$",{...this.init$,disabled:!1,min:0,max:100,onInput:null,onChange:null,defaultValue:null,"on.sliderInput":()=>{let n=parseInt(this.ref["input-el"].value,10);this._updateValue(n),this.$.onInput&&this.$.onInput(n)},"on.sliderChange":()=>{let n=parseInt(this.ref["input-el"].value,10);this.$.onChange&&this.$.onChange(n)}});this.setAttribute("with-effects","")}initCallback(){super.initCallback(),this.defineAccessor("disabled",r=>{this.$.disabled=r}),this.defineAccessor("min",r=>{this.$.min=r}),this.defineAccessor("max",r=>{this.$.max=r}),this.defineAccessor("defaultValue",r=>{this.$.defaultValue=r,this.ref["input-el"].value=r,this._updateValue(r)}),this.defineAccessor("zero",r=>{this._zero=r}),this.defineAccessor("onInput",r=>{r&&(this.$.onInput=r)}),this.defineAccessor("onChange",r=>{r&&(this.$.onChange=r)}),this._updateSteps(),this._observer=new ResizeObserver(()=>{this._updateSteps();let r=parseInt(this.ref["input-el"].value,10);this._updateValue(r)}),this._observer.observe(this),this._thumbSize=parseInt(window.getComputedStyle(this).getPropertyValue("--l-thumb-size"),10),setTimeout(()=>{let r=parseInt(this.ref["input-el"].value,10);this._updateValue(r)},0),this.sub("disabled",r=>{let i=this.ref["input-el"];r?i.setAttribute("disabled","disabled"):i.removeAttribute("disabled")});let n=this.ref["input-el"];n.addEventListener("focus",()=>{this.style.setProperty("--color-effect","var(--hover-color-rgb)")}),n.addEventListener("blur",()=>{this.style.setProperty("--color-effect","var(--idle-color-rgb)")})}_updateValue(n){this._updateZeroDot(n);let{width:r}=this.getBoundingClientRect(),o=100/(this.$.max-this.$.min)*(n-this.$.min)*(r-this._thumbSize)/100;window.requestAnimationFrame(()=>{this.ref["thumb-el"].style.transform=`translateX(${o}px)`})}_updateZeroDot(n){if(!this._zeroDotEl)return;n===this._zero?this._zeroDotEl.style.opacity="0":this._zeroDotEl.style.opacity="0.2";let{width:r}=this.getBoundingClientRect(),o=100/(this.$.max-this.$.min)*(this._zero-this.$.min)*(r-this._thumbSize)/100;window.requestAnimationFrame(()=>{this._zeroDotEl.style.transform=`translateX(${o}px)`})}_updateSteps(){let r=this.ref["steps-el"],{width:i}=r.getBoundingClientRect(),s=Math.ceil(i/2),o=Math.ceil(s/15)-2;if(this._stepsCount===o)return;let a=document.createDocumentFragment(),l=document.createElement("div"),c=document.createElement("div");l.className="minor-step",c.className="border-step",a.appendChild(c);for(let f=0;f<o;f++)a.appendChild(l.cloneNode());a.appendChild(c.cloneNode());for(let f=0;f<o;f++)a.appendChild(l.cloneNode());a.appendChild(c.cloneNode());let h=document.createElement("div");h.className="zero-dot",a.appendChild(h),this._zeroDotEl=h,r.innerHTML="",r.appendChild(a),this._stepsCount=o}destroyCallback(){var n;(n=this._observer)==null||n.disconnect()}}D2.template=`
  <div class="steps" ref="steps-el"></div>
  <div ref="thumb-el" class="thumb"></div>
  <input
    class="input"
    type="range"
    ref="input-el"
    tabindex="0"
    set="oninput: on.sliderInput; onchange: on.sliderChange; @min: min; @max: max; @value: defaultValue;"
  />
`;class O$ extends Ke{constructor(){super();U(this,"couldBeCtxOwner",!0);U(this,"activityType",fe.activities.CLOUD_IMG_EDIT);this.init$={...this.init$,cdnUrl:null}}initCallback(){super.initCallback(),this.registerActivity(this.activityType,{onActivate:()=>this.mountEditor(),onDeactivate:()=>this.unmountEditor()}),this.sub("*focusedEntry",n=>{n&&(this.entry=n,this.entry.subscribe("cdnUrl",r=>{r&&(this.$.cdnUrl=r)}))}),this.subConfigValue("cropPreset",n=>{this._instance&&this._instance.getAttribute("crop-preset")!==n&&this._instance.setAttribute("crop-preset",n)}),this.subConfigValue("cloudImageEditorTabs",n=>{this._instance&&this._instance.getAttribute("tabs")!==n&&this._instance.setAttribute("tabs",n)})}handleApply(n){if(!this.entry)return;let r=n.detail;this.entry.setMultipleValues({cdnUrl:r.cdnUrl,cdnUrlModifiers:r.cdnUrlModifiers}),this.historyBack()}handleCancel(){this.historyBack()}mountEditor(){const n=new Oa,r=this.$.cdnUrl,i=this.cfg.cropPreset,s=this.cfg.cloudImageEditorTabs;n.setAttribute("ctx-name",this.ctxName),n.setAttribute("cdn-url",r),i&&n.setAttribute("crop-preset",i),s&&n.setAttribute("tabs",s),n.addEventListener("apply",o=>{const a=o;this.handleApply(a),this.debugPrint('editor event "apply"',a.detail)}),n.addEventListener("cancel",o=>{const a=o;this.handleCancel(),this.debugPrint('editor event "cancel"',a.detail)}),n.addEventListener("change",o=>{const a=o;this.debugPrint('editor event "change"',a.detail)}),this.innerHTML="",this.appendChild(n),this._mounted=!0,this._instance=n}unmountEditor(){this._instance=void 0,this.innerHTML=""}}const L$=function(t){return t.replace(/[\\-\\[]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&")},D$=function(t,e="i"){const n=t.split("*").map(L$);return new RegExp("^"+n.join(".+")+"$",e)};let M$=t=>Object.keys(t).reduce((n,r)=>{let i=t[r],s=Object.keys(i).reduce((o,a)=>{let l=i[a];return o+`${a}: ${l};`},"");return n+`${r}{${s}}`},"");function U$({textColor:t,backgroundColor:e,linkColor:n,linkColorHover:r,shadeColor:i}){let s=`solid 1px ${i}`;return M$({body:{color:t,"background-color":e},".side-bar":{background:"inherit","border-right":s},".main-content":{background:"inherit"},".main-content-header":{background:"inherit"},".main-content-footer":{background:"inherit"},".list-table-row":{color:"inherit"},".list-table-row:hover":{background:i},".list-table-row .list-table-cell-a, .list-table-row .list-table-cell-b":{"border-top":s},".list-table-body .list-items":{"border-bottom":s},".bread-crumbs a":{color:n},".bread-crumbs a:hover":{color:r},".main-content.loading":{background:`${e} url(/static/images/loading_spinner.gif) center no-repeat`,"background-size":"25px 25px"},".list-icons-item":{"background-color":i},".source-gdrive .side-bar-menu a, .source-gphotos .side-bar-menu a":{color:n},".source-gdrive .side-bar-menu a, .source-gphotos .side-bar-menu a:hover":{color:r},".side-bar-menu a":{color:n},".side-bar-menu a:hover":{color:r},".source-gdrive .side-bar-menu .current, .source-gdrive .side-bar-menu a:hover, .source-gphotos .side-bar-menu .current, .source-gphotos .side-bar-menu a:hover":{color:r},".source-vk .side-bar-menu a":{color:n},".source-vk .side-bar-menu a:hover":{color:r,background:"none"}})}let Hi={};window.addEventListener("message",t=>{let e;try{e=JSON.parse(t.data)}catch{return}if((e==null?void 0:e.type)in Hi){let n=Hi[e.type];for(let[r,i]of n)t.source===r&&i(e)}});const V$=function(t,e,n){t in Hi||(Hi[t]=[]),Hi[t].push([e,n])},$$=function(t,e){t in Hi&&(Hi[t]=Hi[t].filter(n=>n[0]!==e))};function F$(t){let e=[];for(let[n,r]of Object.entries(t))r==null||typeof r=="string"&&r.length===0||e.push(`${n}=${encodeURIComponent(r)}`);return e.join("&")}class M2 extends Ke{constructor(){super();U(this,"couldBeCtxOwner",!0);U(this,"activityType",fe.activities.EXTERNAL);U(this,"_iframe",null);this.init$={...this.init$,activityIcon:"",activityCaption:"",selectedList:[],counter:0,multiple:!1,onDone:()=>{for(const n of this.$.selectedList){const r=this.extractUrlFromMessage(n),{filename:i}=n,{externalSourceType:s}=this.activityParams;this.addFileFromUrl(r,{fileName:i,source:s})}this.$["*currentActivity"]=fe.activities.UPLOAD_LIST},onCancel:()=>{this.historyBack()}}}initCallback(){super.initCallback(),this.registerActivity(this.activityType,{onActivate:()=>{let{externalSourceType:n}=this.activityParams;this.set$({activityCaption:`${n==null?void 0:n[0].toUpperCase()}${n==null?void 0:n.slice(1)}`,activityIcon:n}),this.mountIframe()}}),this.sub("*currentActivity",n=>{n!==this.activityType&&this.unmountIframe()}),this.sub("selectedList",n=>{this.$.counter=n.length}),this.subConfigValue("multiple",n=>{this.$.multiple=n})}extractUrlFromMessage(n){if(n.alternatives){const r=Yr(this.cfg.externalSourcesPreferredTypes);for(const i of r){const s=D$(i);for(const[o,a]of Object.entries(n.alternatives))if(s.test(o))return a}}return n.url}sendMessage(n){var r,i;(i=(r=this._iframe)==null?void 0:r.contentWindow)==null||i.postMessage(JSON.stringify(n),"*")}async handleFileSelected(n){!this.$.multiple&&this.$.selectedList.length||(this.$.selectedList=[...this.$.selectedList,n],this.$.multiple||this.$.onDone())}handleIframeLoad(){this.applyStyles()}getCssValue(n){return window.getComputedStyle(this).getPropertyValue(n).trim()}applyStyles(){let n={backgroundColor:this.getCssValue("--clr-background-light"),textColor:this.getCssValue("--clr-txt"),shadeColor:this.getCssValue("--clr-shade-lv1"),linkColor:"#157cfc",linkColorHover:"#3891ff"};this.sendMessage({type:"embed-css",style:U$(n)})}remoteUrl(){var c,h;const{pubkey:n,remoteTabSessionKey:r,socialBaseUrl:i}=this.cfg,{externalSourceType:s}=this.activityParams,a={lang:((h=(c=this.l10n("social-source-lang"))==null?void 0:c.split("-"))==null?void 0:h[0])||"en",public_key:n,images_only:"false",pass_window_open:!1,session_key:r},l=new URL(`/window3/${s}`,i);return l.search=F$(a),l.toString()}mountIframe(){let n=Uy({tag:"iframe",attributes:{src:this.remoteUrl(),marginheight:0,marginwidth:0,frameborder:0,allowTransparency:!0}});n.addEventListener("load",this.handleIframeLoad.bind(this)),this.ref.iframeWrapper.innerHTML="",this.ref.iframeWrapper.appendChild(n),V$("file-selected",n.contentWindow,this.handleFileSelected.bind(this)),this._iframe=n,this.$.selectedList=[]}unmountIframe(){this._iframe&&$$("file-selected",this._iframe.contentWindow),this.ref.iframeWrapper.innerHTML="",this._iframe=null,this.$.selectedList=[],this.$.counter=0}}M2.template=`
  <lr-activity-header>
    <button type="button" class="mini-btn" set="onclick: *historyBack">
      <lr-icon name="back"></lr-icon>
    </button>
    <div>
      <lr-icon set="@name: activityIcon"></lr-icon>
      <span>{{activityCaption}}</span>
    </div>
    <button type="button" class="mini-btn close-btn" set="onclick: *historyBack">
      <lr-icon name="close"></lr-icon>
    </button>
  </lr-activity-header>
  <div class="content">
    <div ref="iframeWrapper" class="iframe-wrapper"></div>
    <div class="toolbar">
      <button type="button" class="cancel-btn secondary-btn" set="onclick: onCancel" l10n="cancel"></button>
      <div></div>
      <div set="@hidden: !multiple" class="selected-counter"><span l10n="selected-count"></span>{{counter}}</div>
      <button type="button" class="done-btn primary-btn" set="onclick: onDone; @disabled: !counter">
        <lr-icon name="check"></lr-icon>
      </button>
    </div>
  </div>
`;class ov extends Ne{setCurrentTab(e){if(!e)return;[...this.ref.context.querySelectorAll("[tab-ctx]")].forEach(r=>{r.getAttribute("tab-ctx")===e?r.removeAttribute("hidden"):r.setAttribute("hidden","")});for(let r in this._tabMap)r===e?this._tabMap[r].setAttribute("current",""):this._tabMap[r].removeAttribute("current")}initCallback(){super.initCallback(),this._tabMap={},this.defineAccessor("tab-list",e=>{if(!e)return;Yr(e).forEach(r=>{let i=Uy({tag:"div",attributes:{class:"tab"},properties:{onclick:()=>{this.setCurrentTab(r)}}});i.textContent=this.l10n(r),this.ref.row.appendChild(i),this._tabMap[r]=i})}),this.defineAccessor("default",e=>{this.setCurrentTab(e)}),this.hasAttribute("default")||this.setCurrentTab(Object.keys(this._tabMap)[0])}}ov.bindAttributes({"tab-list":null,default:null});ov.template=`
  <div ref="row" class="tabs-row"></div>
  <div ref="context" class="tabs-context">
    <slot></slot>
  </div>
`;class j$ extends Ke{constructor(){super(...arguments);U(this,"requireCtxName",!0)}_createValidationInput(){const n=document.createElement("input");return n.type="text",n.name=this.ctxName,n.required=this.cfg.multipleMin>0,n.tabIndex=-1,II(n,{opacity:0,height:0,width:0}),n}initCallback(){super.initCallback(),this._validationInputElement=this._createValidationInput(),this.appendChild(this._validationInputElement),this.sub("*collectionState",n=>{var r;{if(this._dynamicInputsContainer||(this._dynamicInputsContainer=document.createElement("div"),this.appendChild(this._dynamicInputsContainer)),!this._validationInputElement){const a=this._createValidationInput();this.appendChild(a),this._validationInputElement=a}if(this._dynamicInputsContainer.innerHTML="",n.status==="uploading"||n.status==="idle"){this._validationInputElement.value="",this._validationInputElement.setCustomValidity("");return}if(n.status==="failed"){const a=(r=n.errors[0])==null?void 0:r.message;this._validationInputElement.value="",this._validationInputElement.setCustomValidity(a);return}const i=n.group?n.group:null;if(i){this._validationInputElement.value=i.cdnUrl,this._validationInputElement.setCustomValidity("");return}const s=n.allEntries.map(a=>a.cdnUrl);if(!this.cfg.multiple&&s.length===1){this._validationInputElement.value=s[0],this._validationInputElement.setCustomValidity("");return}this._validationInputElement.remove(),this._validationInputElement=null;const o=new DocumentFragment;for(let a of s){const l=document.createElement("input");l.type="hidden",l.name=`${this.ctxName}[]`,l.value=a,o.appendChild(l)}this._dynamicInputsContainer.replaceChildren(o)}},!1)}}class z$ extends fe{}class U2 extends Ne{constructor(){super(...arguments);U(this,"init$",{...this.init$,currentText:"",options:[],selectHtml:"",onSelect:n=>{var r;n.preventDefault(),n.stopPropagation(),this.value=this.ref.select.value,this.$.currentText=((r=this.$.options.find(i=>i.value==this.value))==null?void 0:r.text)||"",this.dispatchEvent(new Event("change"))}})}initCallback(){super.initCallback(),this.sub("options",n=>{var i;this.$.currentText=((i=n==null?void 0:n[0])==null?void 0:i.text)||"";let r="";n==null||n.forEach(s=>{r+=`<option value="${s.value}">${s.text}</option>`}),this.$.selectHtml=r})}}U2.template=`
  <button>
    {{currentText}}
    <lr-icon name="select"></lr-icon>
    <select ref="select" set="innerHTML: selectHtml; onchange: onSelect"></select>
  </button>
`;const en={PLAY:"play",PAUSE:"pause",FS_ON:"fullscreen-on",FS_OFF:"fullscreen-off",VOL_ON:"unmute",VOL_OFF:"mute",CAP_ON:"captions",CAP_OFF:"captions-off"},c1={requestFullscreen:t=>{t.requestFullscreen?t.requestFullscreen():t.webkitRequestFullscreen&&t.webkitRequestFullscreen()},exitFullscreen:()=>{document.exitFullscreen?document.exitFullscreen():document.webkitExitFullscreen&&document.webkitExitFullscreen()}};class Lr extends Ne{constructor(){super(...arguments);U(this,"init$",{...this.init$,src:"",ppIcon:en.PLAY,fsIcon:en.FS_ON,volIcon:en.VOL_ON,capIcon:en.CAP_OFF,totalTime:"00:00",currentTime:"00:00",progressCssWidth:"0",hasSubtitles:!1,volumeDisabled:!1,volumeValue:0,onPP:()=>{this.togglePlay()},onFs:()=>{this.toggleFullscreen()},onCap:()=>{this.toggleCaptions()},onMute:()=>{this.toggleSound()},onVolChange:n=>{let r=parseFloat(n.currentTarget.$.value);this.setVolume(r)},progressClicked:n=>{let r=this.progress.getBoundingClientRect();this._video.currentTime=this._video.duration*(n.offsetX/r.width)}})}togglePlay(){this._video.paused||this._video.ended?this._video.play():this._video.pause()}toggleFullscreen(){(document.fullscreenElement||document.webkitFullscreenElement)===this?c1.exitFullscreen():c1.requestFullscreen(this)}toggleCaptions(){this.$.capIcon===en.CAP_OFF?(this.$.capIcon=en.CAP_ON,this._video.textTracks[0].mode="showing",window.localStorage.setItem(Lr.is+":captions","1")):(this.$.capIcon=en.CAP_OFF,this._video.textTracks[0].mode="hidden",window.localStorage.removeItem(Lr.is+":captions"))}toggleSound(){this.$.volIcon===en.VOL_ON?(this.$.volIcon=en.VOL_OFF,this.$.volumeDisabled=!0,this._video.muted=!0):(this.$.volIcon=en.VOL_ON,this.$.volumeDisabled=!1,this._video.muted=!1)}setVolume(n){window.localStorage.setItem(Lr.is+":volume",n);let r=n?n/100:0;this._video.volume=r}get progress(){return this.ref.progress}_getUrl(n){return n.includes("/")?n:`https://ucarecdn.com/${n}/`}_desc2attrs(n){let r=[];for(let i in n){let s=i==="src"?this._getUrl(n[i]):n[i];r.push(`${i}="${s}"`)}return r.join(" ")}_timeFmt(n){let r=new Date(Math.round(n)*1e3);return[r.getMinutes(),r.getSeconds()].map(i=>i<10?"0"+i:i).join(":")}_initTracks(){[...this._video.textTracks].forEach(n=>{n.mode="hidden"}),window.localStorage.getItem(Lr.is+":captions")&&this.toggleCaptions()}_castAttributes(){let n=["autoplay","loop","muted"];[...this.attributes].forEach(r=>{n.includes(r.name)&&this._video.setAttribute(r.name,r.value)})}initCallback(){super.initCallback(),this._video=this.ref.video,this._castAttributes(),this._video.addEventListener("play",()=>{this.$.ppIcon=en.PAUSE,this.setAttribute("playback","")}),this._video.addEventListener("pause",()=>{this.$.ppIcon=en.PLAY,this.removeAttribute("playback")}),this.addEventListener("fullscreenchange",r=>{console.log(r),document.fullscreenElement===this?this.$.fsIcon=en.FS_OFF:this.$.fsIcon=en.FS_ON}),this.sub("src",r=>{if(!r)return;let i=this._getUrl(r);this._video.src=i}),this.sub("video",async r=>{if(!r)return;let i=await(await window.fetch(this._getUrl(r))).json();i.poster&&(this._video.poster=this._getUrl(i.poster));let s="";i==null||i.sources.forEach(o=>{s+=`<source ${this._desc2attrs(o)} />`}),i.tracks&&(i.tracks.forEach(o=>{s+=`<track ${this._desc2attrs(o)} />`}),this.$.hasSubtitles=!0),this._video.innerHTML+=s,this._initTracks(),console.log(i)}),this._video.addEventListener("loadedmetadata",r=>{this.$.currentTime=this._timeFmt(this._video.currentTime),this.$.totalTime=this._timeFmt(this._video.duration)}),this._video.addEventListener("timeupdate",r=>{let i=Math.round(100*(this._video.currentTime/this._video.duration));this.$.progressCssWidth=i+"%",this.$.currentTime=this._timeFmt(this._video.currentTime)});let n=window.localStorage.getItem(Lr.is+":volume");if(n){let r=parseFloat(n);this.setVolume(r),this.$.volumeValue=r}}}Lr.template=`
  <div class="video-wrapper">
    <video ref="video" preload="metadata" crossorigin="anonymous"></video>
  </div>

  <div class="toolbar">
    <div class="progress" ref="progress" set -onclick="progressClicked">
      <div class="bar" set -style.width="progressCssWidth"></div>
    </div>

    <div class="tb-block">
      <button set -onclick="onPP">
        <lr-icon set -@name="ppIcon"></lr-icon>
      </button>
      <div class="timer">{{currentTime}} / {{totalTime}}</div>
    </div>

    <div class="tb-block">
      <button set -onclick="onCap" -@hidden="!hasSubtitles">
        <lr-icon set -@name="capIcon"></lr-icon>
      </button>

      <button set -onclick="onMute">
        <lr-icon set -@name="volIcon"></lr-icon>
      </button>

      <lr-range type="range" set -onchange="onVolChange" -@disabled="volumeDisabled" -value="volumeValue"> </lr-range>

      <button set -onclick="onFs">
        <lr-icon set -@name="fsIcon"></lr-icon>
      </button>
    </div>
  </div>
`;Lr.bindAttributes({video:"video",src:"src"});class V2 extends Ne{initCallback(){super.initCallback(),this.subConfigValue("removeCopyright",e=>{this.toggleAttribute("hidden",!!e)})}}U(V2,"template",`
    <a
      href="https://uploadcare.com/?utm_source=copyright&utm_medium=referral&utm_campaign=v4"
      target="_blank noopener"
      class="credits"
      >Powered by Uploadcare</a
    >
  `);class av extends Ne{constructor(){super(...arguments);U(this,"requireCtxName",!0);U(this,"init$",BI(this));U(this,"_template",null)}static set template(n){this._template=n+"<slot></slot>"}static get template(){return this._template}}class lv extends av{initCallback(){super.initCallback(),this.sub("*modalActive",e=>{this._lastModalActive!==e&&this.emit(e?tt.MODAL_OPEN:tt.MODAL_CLOSE,void 0,{debounce:!0}),this._lastModalActive=e},!1)}}lv.template=`
  <lr-simple-btn></lr-simple-btn>

  <lr-modal strokes block-body-scrolling>
    <lr-start-from>
      <lr-drop-area with-icon clickable></lr-drop-area>
      <lr-source-list wrap></lr-source-list>
      <button type="button" l10n="start-from-cancel" class="secondary-btn" set="onclick: *historyBack"></button>
      <lr-copyright></lr-copyright>
    </lr-start-from>
    <lr-upload-list></lr-upload-list>
    <lr-camera-source></lr-camera-source>
    <lr-url-source></lr-url-source>
    <lr-external-source></lr-external-source>
    <lr-cloud-image-editor-activity></lr-cloud-image-editor-activity>
  </lr-modal>

  <lr-progress-bar-common></lr-progress-bar-common>
`;class Zd extends av{initCallback(){super.initCallback();const e=this.ref.uBlock;this.sub("*currentActivity",n=>{n||(this.$["*currentActivity"]=e.initActivity||fe.activities.START_FROM)}),this.sub("*uploadList",n=>{(n==null?void 0:n.length)>0?this.$["*currentActivity"]=fe.activities.UPLOAD_LIST:this.$["*currentActivity"]=e.initActivity||fe.activities.START_FROM}),this.subConfigValue("sourceList",n=>{n!=="local"&&(this.cfg.sourceList="local")}),this.subConfigValue("confirmUpload",n=>{n!==!1&&(this.cfg.confirmUpload=!1)})}}Zd.template=`
  <lr-start-from>
    <lr-drop-area clickable l10n="choose-file"></lr-drop-area>
    <lr-copyright></lr-copyright>
  </lr-start-from>
  <lr-upload-list ref="uBlock"></lr-upload-list>
`;class $2 extends av{constructor(){super(),this.init$={...this.init$,couldCancel:!1,cancel:()=>{this.couldHistoryBack?this.$["*historyBack"]():this.couldShowList&&(this.$["*currentActivity"]=fe.activities.UPLOAD_LIST)}}}get couldHistoryBack(){const e=this.$["*history"];return e.length>1&&e[e.length-1]!==fe.activities.START_FROM}get couldShowList(){return this.cfg.showEmptyList||this.$["*uploadList"].length>0}initCallback(){super.initCallback();const e=this.ref.uBlock;this.sub("*currentActivity",n=>{n||(this.$["*currentActivity"]=e.initActivity||fe.activities.START_FROM)}),this.sub("*uploadList",n=>{(n==null?void 0:n.length)>0&&this.$["*currentActivity"]===(e.initActivity||fe.activities.START_FROM)&&(this.$["*currentActivity"]=fe.activities.UPLOAD_LIST)}),this.sub("*history",()=>{this.$.couldCancel=this.couldHistoryBack||this.couldShowList})}}$2.template=` <lr-start-from>
    <lr-drop-area with-icon clickable></lr-drop-area>
    <lr-source-list wrap></lr-source-list>
    <button
      type="button"
      l10n="start-from-cancel"
      class="cancel-btn secondary-btn"
      set="onclick: cancel; @hidden: !couldCancel"
    ></button>
    <lr-copyright></lr-copyright>
  </lr-start-from>
  <lr-upload-list ref="uBlock"></lr-upload-list>
  <lr-camera-source></lr-camera-source>
  <lr-url-source></lr-url-source>
  <lr-external-source></lr-external-source>
  <lr-progress-bar></lr-progress-bar>
  <lr-cloud-image-editor-activity></lr-cloud-image-editor-activity>`;class B$ extends Oa{initCallback(){super.initCallback(),this.__shadowReady=!0,this.$["*faderEl"]=this.ref["fader-el"],this.$["*cropperEl"]=this.ref["cropper-el"],this.$["*imgContainerEl"]=this.ref["img-container-el"],this.initEditor()}async initEditor(){this.__shadowReady&&await super.initEditor()}}function Fu(t){for(let e in t){let n=[...e].reduce((r,i)=>(i.toUpperCase()===i&&(i="-"+i.toLowerCase()),r+=i),"");n.startsWith("-")&&(n=n.replace("-","")),n.startsWith("lr-")||(n="lr-"+n),t[e].reg&&t[e].reg(n)}}const ip="LR";async function H$(t,e=!1){return new Promise((n,r)=>{if(typeof document!="object"){n(null);return}if(typeof window=="object"&&window[ip]){n(window[ip]);return}let i=document.createElement("script");i.async=!0,i.src=t,i.onerror=()=>{r()},i.onload=()=>{let s=window[ip];e&&Fu(s),n(s)},document.head.appendChild(i)})}const uv=Object.freeze(Object.defineProperty({__proto__:null,ActivityBlock:fe,ActivityHeader:z$,BaseComponent:zd,Block:Ne,CameraSource:w2,CloudImageEditor:B$,CloudImageEditorActivity:O$,CloudImageEditorBlock:Oa,Config:i2,ConfirmationDialog:b2,Copyright:V2,CropFrame:S2,Data:xe,DropArea:Jy,EditorCropButtonControl:A2,EditorFilterControl:rv,EditorImageCropper:P2,EditorImageFader:k$,EditorOperationControl:k2,EditorScroller:R2,EditorSlider:x2,EditorToolbar:N2,ExternalSource:M2,FileItem:Os,FilePreview:tv,FileUploaderInline:$2,FileUploaderMinimal:Zd,FileUploaderRegular:lv,FormInput:j$,Icon:Xy,Img:OV,LineLoaderUi:O2,LrBtnUi:sv,Modal:ev,PACKAGE_NAME:Hy,PACKAGE_VERSION:Wy,PresenceToggle:L2,ProgressBar:C2,ProgressBarCommon:T2,Select:U2,SimpleBtn:Yy,SliderUi:D2,SourceBtn:Zy,SourceList:FV,StartFrom:o2,Tabs:ov,UID:Vu,UploadCtxProvider:Dm,UploadList:v2,UploaderBlock:Ke,UrlSource:_2,Video:Lr,connectBlocksFrom:H$,defineLocale:WI,registerBlocks:Fu,toKebabCase:Xd},Symbol.toStringTag,{value:"Module"})),W$=new Set(["children","ref","style","className"]),q$=(t={})=>Object==null?void 0:Object.keys(t).reduce((e,n)=>{var r,i;const s=t==null?void 0:t[n],o=`on${(i=(r=s==null?void 0:s.split("-"))==null?void 0:r.map(a=>a.charAt(0).toUpperCase()+a.slice(1)))==null?void 0:i.join("")}`;return e[o]=s,e},{}),h1=new WeakMap,G$=t=>{let e=h1.get(t);return e===void 0&&(e=new Map,h1.set(t,e)),e},d1=({node:t,nameProp:e,valueProp:n,prevValueProp:r,event:i})=>{if(i!==void 0){if(n!==r){const s=G$(t),o=s.has(i);let a=s.get(i);n!==void 0?o?a.handleEvent=n:(a={handleEvent:n},s.set(i,a),t.addEventListener(i,l=>a.handleEvent(l.detail))):o&&(s.delete(i),t.removeEventListener(i,a))}return}t[e]=n,n==null&&e in HTMLElement.prototype&&t.removeAttribute(e)},K$=(t,e,n)=>{const r={},i={};return Object.entries(t).forEach(([s,o])=>{W$.has(s)?r[s==="className"?"class":s]=o:e.has(s)||s in n.prototype?i[s]=o:r[s]=o}),{reactProps:r,customElProps:i}},ju=({react:t,tag:e,elClass:n,schemaEvents:r})=>{const i=q$(r),s=new Set(Object.keys(i??{})),o=t.forwardRef((a,l)=>{const c=t.useRef(new Map),h=t.useRef(null),{reactProps:f,customElProps:p}=K$(a,s,n);return t.useLayoutEffect(()=>{if(h.current===null)return;const _=new Map;for(const w in p)d1({node:h.current,nameProp:w,valueProp:p[w],prevValueProp:c.current.get(w),event:i[w]}),c.current.delete(w),_.set(w,a[w]);for(const[w,I]of c.current)d1({node:h.current,nameProp:w,valueProp:void 0,prevValueProp:I,event:i[w]});c.current=_}),t.createElement(e??n.__tag,{...f,ref:t.useCallback(_=>{h.current=_,typeof l=="function"?l(_):l!==null&&(l.current=_)},[l])})});return o.displayName=n.name,o},Q$=ju({react:Xt,tag:"lr-config",elClass:i2}),X$=ju({react:Xt,tag:"lr-upload-ctx-provider",elClass:Dm,schemaEvents:Dm.EventType}),Y$=t=>{const e={},n={};return Object.entries(t).forEach(([r,i])=>{r.startsWith("on")?e[r]=i:n[r]=i}),{eventHandlers:e,config:n}},J$="0.5.2",Z$="React-Uploader",e6=()=>`${Z$}/${J$}`,t6=({condition:t,fallback:e,children:n,...r})=>t?Xt.createElement(L.Suspense,{fallback:e,...r},n):Xt.createElement(Xt.Fragment,null,e),n6=()=>{const[t,e]=L.useState(!1);return L.useEffect(()=>{typeof window<"u"&&e(!0)},[]),t};Fu(uv);const r6=ju({react:Xt,tag:"lr-file-uploader-regular",elClass:lv}),i6=({ctxName:t,className:e,classNameUploader:n,apiRef:r,fallback:i,...s})=>{const o=L.useMemo(()=>t??Vu.generate(),[t]),{eventHandlers:a,config:l}=L.useMemo(()=>Y$(s),[s]),c=n6();return Xt.createElement(t6,{condition:c,fallback:i},Xt.createElement("div",{className:e},Xt.createElement(Q$,{userAgentIntegration:e6(),"ctx-name":o,...l}),Xt.createElement(X$,{ref:r,"ctx-name":o,...a}),Xt.createElement(r6,{class:n,"ctx-name":o})))};Fu(uv);ju({react:Xt,tag:"lr-file-uploader-minimal",elClass:Zd});Fu(uv);ju({react:Xt,tag:"lr-file-uploader-inline",elClass:Zd});const F2=({fileEntry:t,onChange:e,preview:n})=>{const r=L.useRef(null),i=a=>{const l=a.successEntries.map(c=>({cdnUrl:c.cdnUrl||null,uuid:c.uuid||null}));e({files:l}),console.log("The uploaded file event is: ",l)},s=L.useCallback(a=>e({files:t.files.filter(l=>l.uuid!==a)}),[t.files,e]),o=()=>{var a;(a=r.current)==null||a.uploadCollection.clearAll(),e({files:[]})};return b.jsxs("div",{children:[b.jsx(i6,{maxLocalFileSizeBytes:1e7,multipleMax:50,multiple:n,imgOnly:!0,sourceList:"local, url, camera, dropbox, instagram",removeCopyright:!0,confirmUpload:!1,onChange:i,pubkey:"e70c89d72eb677ec70b2"}),n?b.jsx("div",{className:"grid grid-cols-2 gap-4 mt-8",children:t.files.map(a=>b.jsxs("div",{className:"relative",children:[b.jsx("img",{src:`${a.cdnUrl}/-/format/webp/-/quality/smart/-/stretch/fill/
              `,alt:a.uuid??""}),b.jsx("div",{className:"cursor-pointer flex justify-center absolute -right-2 -top-2 bg-white border-2 border-slate-800  rounded-full w-7 h-7",children:b.jsx("button",{className:"text-slate-800 text-center",type:"button",onClick:()=>s(a.uuid),children:""})}),b.jsx("button",{onClick:o,children:"test"})]},a.uuid))}):b.jsx(b.Fragment,{})]})},cv=L.forwardRef(({className:t,...e},n)=>b.jsx("textarea",{className:_n("flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",t),ref:n,...e}));cv.displayName="Textarea";const s6=()=>{const{user:t}=vr(),e=Ys(),[n,r]=L.useState({files:[]}),[i,s]=L.useState({caption:"",photos:[],likes:0,userLikes:[],userId:"",date:new Date}),o=async a=>{a.preventDefault(),console.log("Uploaded File Entry: ",n.files),console.log("The create post is: ",i);const l=n.files.map(c=>({cdnUrl:c.cdnUrl,uuid:c.uuid}));if(t!==null){const c={...i,photos:l,userId:(t==null?void 0:t.uid)||null,username:t.displayName,photoURL:t.photoURL};console.log("The final post:",c),await S3(c),e("/edelgram/")}else e("/edelgram/login")};return b.jsx(Uu,{children:b.jsx("div",{className:"flex justify-center",children:b.jsxs("div",{className:"border max-w-3xl w-full",children:[b.jsx("h3",{className:"bg-slate-800 text-white text-center text-lg p-2",children:"Create post"}),b.jsx("div",{className:"p-8",children:b.jsxs("form",{onSubmit:o,children:[b.jsxs("div",{className:"flex flex-col",children:[b.jsx(Qn,{className:"mb-4",htmlFor:"caption",children:"Photo caption"}),b.jsx(cv,{className:"mb-8",id:"caption",placeholder:"Write something....",value:i.caption,onChange:a=>s({...i,caption:a.target.value})})]}),b.jsxs("div",{className:"flex flex-col",children:[b.jsx(Qn,{className:"mb-4",htmlFor:"photo",children:"Photos"}),b.jsx(F2,{fileEntry:n,onChange:r,preview:!0})]}),b.jsx(mr,{className:"mt-8 w-32",type:"submit",children:"Post"})]})})]})})})};/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */function o6(t,e,n,r){function i(s){return s instanceof n?s:new n(function(o){o(s)})}return new(n||(n=Promise))(function(s,o){function a(h){try{c(r.next(h))}catch(f){o(f)}}function l(h){try{c(r.throw(h))}catch(f){o(f)}}function c(h){h.done?s(h.value):i(h.value).then(a,l)}c((r=r.apply(t,[])).next())})}function a6(t,e){var n={label:0,sent:function(){if(s[0]&1)throw s[1];return s[1]},trys:[],ops:[]},r,i,s,o;return o={next:a(0),throw:a(1),return:a(2)},typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function a(c){return function(h){return l([c,h])}}function l(c){if(r)throw new TypeError("Generator is already executing.");for(;n;)try{if(r=1,i&&(s=c[0]&2?i.return:c[0]?i.throw||((s=i.return)&&s.call(i),0):i.next)&&!(s=s.call(i,c[1])).done)return s;switch(i=0,s&&(c=[c[0]&2,s.value]),c[0]){case 0:case 1:s=c;break;case 4:return n.label++,{value:c[1],done:!1};case 5:n.label++,i=c[1],c=[0];continue;case 7:c=n.ops.pop(),n.trys.pop();continue;default:if(s=n.trys,!(s=s.length>0&&s[s.length-1])&&(c[0]===6||c[0]===2)){n=0;continue}if(c[0]===3&&(!s||c[1]>s[0]&&c[1]<s[3])){n.label=c[1];break}if(c[0]===6&&n.label<s[1]){n.label=s[1],s=c;break}if(s&&n.label<s[2]){n.label=s[2],n.ops.push(c);break}s[2]&&n.ops.pop(),n.trys.pop();continue}c=e.call(t,n)}catch(h){c=[6,h],i=0}finally{r=s=0}if(c[0]&5)throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}}/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var $o=function(){return $o=Object.assign||function(e){for(var n,r=1,i=arguments.length;r<i;r++){n=arguments[r];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},$o.apply(this,arguments)},j2=function(t){return{loading:t==null,value:t}},l6=function(){return function(t,e){switch(e.type){case"error":return $o($o({},t),{error:e.error,loading:!1,value:void 0});case"reset":return j2(e.defaultValue);case"value":return $o($o({},t),{error:void 0,loading:!1,value:e.value});default:return t}}},u6=function(t){var e=t?t():void 0,n=L.useReducer(l6(),j2(e)),r=n[0],i=n[1],s=L.useCallback(function(){var l=t?t():void 0;i({type:"reset",defaultValue:l})},[t]),o=L.useCallback(function(l){i({type:"error",error:l})},[]),a=L.useCallback(function(l){i({type:"value",value:l})},[]);return L.useMemo(function(){return{error:r.error,loading:r.loading,reset:s,setError:o,setValue:a,value:r.value}},[r.error,r.loading,s,o,a,r.value])},c6=function(t,e){var n=u6(function(){return t.currentUser}),r=n.error,i=n.loading,s=n.setError,o=n.setValue,a=n.value;return L.useEffect(function(){var l=PT(t,function(c){return o6(void 0,void 0,void 0,function(){var h;return a6(this,function(f){switch(f.label){case 0:return[3,4];case 1:return f.trys.push([1,3,,4]),[4,e.onUserChanged(c)];case 2:return f.sent(),[3,4];case 3:return h=f.sent(),s(h),[3,4];case 4:return o(c),[2]}})})},s);return function(){l()}},[t]),[a,i,r]};const h6=()=>{const t=zT(),[e,n]=c6(t),r=rs();return n?b.jsx("div",{children:"Loading..."}):e?b.jsx(Gk,{}):b.jsx(qk,{to:"edelgram/login",state:{from:r}})},d6=()=>{const{user:t,updateProfileInfo:e}=vr(),n=rs(),r=Ys(),{id:i,userId:s,userBio:o,displayName:a,photoURL:l}=n.state;console.log("location",n.state);const[c,h]=L.useState({userId:s||"",userBio:o||"",displayName:a||"",photoURL:l||""}),[f,p]=L.useState({files:[]});console.log("data",c),console.log("id",i,s,a);const _=async w=>{w.preventDefault();try{i?await g3(i,c):await p3(c);const I={user:t,displayName:c.displayName,photoURL:c.photoURL};e(I),P3(I)}catch(I){console.error(I)}r("/edelgram/profile/")};return L.useEffect(()=>{f.files.length>0&&h(w=>({...w,photoURL:f.files[0].cdnUrl||""}))},[f]),b.jsx("div",{children:b.jsx(Uu,{children:b.jsx("div",{className:"flex justify-center",children:b.jsxs("div",{className:"border max-w-3xl w-full",children:[b.jsx("h3",{className:"bg-slate-800 text-white text-center text-lg p-2",children:"Edit profile"}),b.jsx("div",{className:"p-8",children:b.jsxs("form",{onSubmit:_,children:[b.jsxs("div",{className:"flex flex-col",children:[b.jsx(Qn,{className:"mb-4",htmlFor:"photos",children:"Profile picture"}),b.jsx("div",{className:"mb-4",children:f.files.length>0?b.jsx("img",{src:f.files[0].cdnUrl,alt:"avatar",className:"w-28 h-28 rounded-full border-2 border-slate-800 object-cover"}):b.jsx("img",{src:c.photoURL?c.photoURL:Gs,alt:"avatar",className:"w-28 h-28 rounded-full border-2 border-slate-800 object-cover"})}),b.jsx(F2,{fileEntry:f,onChange:p,preview:!1})]}),b.jsxs("div",{className:"flex flex-col mt-4",children:[b.jsx(Qn,{className:"mb-4",htmlFor:"name",children:"Display Name"}),b.jsx(ji,{className:"mb-8",id:"name",placeholder:"Enter your username",value:c.displayName,onChange:w=>h({...c,displayName:w.target.value})})]}),b.jsxs("div",{className:"flex flex-col",children:[b.jsx(Qn,{className:"mb-4",htmlFor:"bio",children:"Profile bio"}),b.jsx(cv,{className:"mb-8 max-h-56",id:"bio",placeholder:"Enter your profile bio",value:c.userBio,onChange:w=>h({...c,userBio:w.target.value})})]}),b.jsx(mr,{className:"mt-4 w-32 mr-8",type:"submit",children:"Update"}),b.jsx(mr,{variant:"destructive",className:"mt-4 w-32 mr-8",type:"submit",onClick:()=>r("/edelgram/profile/"),children:"Cancel"})]})})]})})})})},f6=tP([{element:b.jsx(h6,{}),children:[{path:"/edelgram/",element:b.jsx(D3,{}),errorElement:b.jsx(ms,{})},{path:"/edelgram/myphotos",element:b.jsx(B3,{}),errorElement:b.jsx(ms,{})},{path:"/edelgram/createpost",element:b.jsx(s6,{}),errorElement:b.jsx(ms,{})},{path:"/edelgram/profile",element:b.jsx(H3,{}),errorElement:b.jsx(ms,{})},{path:"/edelgram/profile/edit/",element:b.jsx(d6,{}),errorElement:b.jsx(ms,{})}]},{path:"/edelgram/login",element:b.jsx(j3,{}),errorElement:b.jsx(ms,{})},{path:"/edelgram/signup",element:b.jsx(q3,{}),errorElement:b.jsx(ms,{})}]),p6=()=>b.jsx(h3,{children:b.jsx(cP,{router:f6})});sp.createRoot(document.getElementById("root")).render(b.jsx(Xt.StrictMode,{children:b.jsx(p6,{})}));
