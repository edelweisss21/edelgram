var XS=Object.defineProperty;var YS=(t,e,n)=>e in t?XS(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n;var V=(t,e,n)=>(YS(t,typeof e!="symbol"?e+"":e,n),n);function r1(t,e){for(var n=0;n<e.length;n++){const r=e[n];if(typeof r!="string"&&!Array.isArray(r)){for(const i in r)if(i!=="default"&&!(i in t)){const s=Object.getOwnPropertyDescriptor(r,i);s&&Object.defineProperty(t,i,s.get?s:{enumerable:!0,get:()=>r[i]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerPolicy&&(s.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?s.credentials="include":i.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(i){if(i.ep)return;i.ep=!0;const s=n(i);fetch(i.href,s)}})();function i1(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var s1={exports:{}},jh={},o1={exports:{}},ve={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var hu=Symbol.for("react.element"),JS=Symbol.for("react.portal"),ZS=Symbol.for("react.fragment"),e2=Symbol.for("react.strict_mode"),t2=Symbol.for("react.profiler"),n2=Symbol.for("react.provider"),r2=Symbol.for("react.context"),i2=Symbol.for("react.forward_ref"),s2=Symbol.for("react.suspense"),o2=Symbol.for("react.memo"),a2=Symbol.for("react.lazy"),Pv=Symbol.iterator;function l2(t){return t===null||typeof t!="object"?null:(t=Pv&&t[Pv]||t["@@iterator"],typeof t=="function"?t:null)}var a1={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},l1=Object.assign,u1={};function ha(t,e,n){this.props=t,this.context=e,this.refs=u1,this.updater=n||a1}ha.prototype.isReactComponent={};ha.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};ha.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function c1(){}c1.prototype=ha.prototype;function Im(t,e,n){this.props=t,this.context=e,this.refs=u1,this.updater=n||a1}var Sm=Im.prototype=new c1;Sm.constructor=Im;l1(Sm,ha.prototype);Sm.isPureReactComponent=!0;var Rv=Array.isArray,h1=Object.prototype.hasOwnProperty,Am={current:null},d1={key:!0,ref:!0,__self:!0,__source:!0};function f1(t,e,n){var r,i={},s=null,o=null;if(e!=null)for(r in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(s=""+e.key),e)h1.call(e,r)&&!d1.hasOwnProperty(r)&&(i[r]=e[r]);var a=arguments.length-2;if(a===1)i.children=n;else if(1<a){for(var l=Array(a),c=0;c<a;c++)l[c]=arguments[c+2];i.children=l}if(t&&t.defaultProps)for(r in a=t.defaultProps,a)i[r]===void 0&&(i[r]=a[r]);return{$$typeof:hu,type:t,key:s,ref:o,props:i,_owner:Am.current}}function u2(t,e){return{$$typeof:hu,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function xm(t){return typeof t=="object"&&t!==null&&t.$$typeof===hu}function c2(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var Ov=/\/+/g;function ef(t,e){return typeof t=="object"&&t!==null&&t.key!=null?c2(""+t.key):e.toString(36)}function Cc(t,e,n,r,i){var s=typeof t;(s==="undefined"||s==="boolean")&&(t=null);var o=!1;if(t===null)o=!0;else switch(s){case"string":case"number":o=!0;break;case"object":switch(t.$$typeof){case hu:case JS:o=!0}}if(o)return o=t,i=i(o),t=r===""?"."+ef(o,0):r,Rv(i)?(n="",t!=null&&(n=t.replace(Ov,"$&/")+"/"),Cc(i,e,n,"",function(c){return c})):i!=null&&(xm(i)&&(i=u2(i,n+(!i.key||o&&o.key===i.key?"":(""+i.key).replace(Ov,"$&/")+"/")+t)),e.push(i)),1;if(o=0,r=r===""?".":r+":",Rv(t))for(var a=0;a<t.length;a++){s=t[a];var l=r+ef(s,a);o+=Cc(s,e,n,l,i)}else if(l=l2(t),typeof l=="function")for(t=l.call(t),a=0;!(s=t.next()).done;)s=s.value,l=r+ef(s,a++),o+=Cc(s,e,n,l,i);else if(s==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return o}function Qu(t,e,n){if(t==null)return t;var r=[],i=0;return Cc(t,r,"","",function(s){return e.call(n,s,i++)}),r}function h2(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var Jt={current:null},Ic={transition:null},d2={ReactCurrentDispatcher:Jt,ReactCurrentBatchConfig:Ic,ReactCurrentOwner:Am};function p1(){throw Error("act(...) is not supported in production builds of React.")}ve.Children={map:Qu,forEach:function(t,e,n){Qu(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return Qu(t,function(){e++}),e},toArray:function(t){return Qu(t,function(e){return e})||[]},only:function(t){if(!xm(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};ve.Component=ha;ve.Fragment=ZS;ve.Profiler=t2;ve.PureComponent=Im;ve.StrictMode=e2;ve.Suspense=s2;ve.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=d2;ve.act=p1;ve.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var r=l1({},t.props),i=t.key,s=t.ref,o=t._owner;if(e!=null){if(e.ref!==void 0&&(s=e.ref,o=Am.current),e.key!==void 0&&(i=""+e.key),t.type&&t.type.defaultProps)var a=t.type.defaultProps;for(l in e)h1.call(e,l)&&!d1.hasOwnProperty(l)&&(r[l]=e[l]===void 0&&a!==void 0?a[l]:e[l])}var l=arguments.length-2;if(l===1)r.children=n;else if(1<l){a=Array(l);for(var c=0;c<l;c++)a[c]=arguments[c+2];r.children=a}return{$$typeof:hu,type:t.type,key:i,ref:s,props:r,_owner:o}};ve.createContext=function(t){return t={$$typeof:r2,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:n2,_context:t},t.Consumer=t};ve.createElement=f1;ve.createFactory=function(t){var e=f1.bind(null,t);return e.type=t,e};ve.createRef=function(){return{current:null}};ve.forwardRef=function(t){return{$$typeof:i2,render:t}};ve.isValidElement=xm;ve.lazy=function(t){return{$$typeof:a2,_payload:{_status:-1,_result:t},_init:h2}};ve.memo=function(t,e){return{$$typeof:o2,type:t,compare:e===void 0?null:e}};ve.startTransition=function(t){var e=Ic.transition;Ic.transition={};try{t()}finally{Ic.transition=e}};ve.unstable_act=p1;ve.useCallback=function(t,e){return Jt.current.useCallback(t,e)};ve.useContext=function(t){return Jt.current.useContext(t)};ve.useDebugValue=function(){};ve.useDeferredValue=function(t){return Jt.current.useDeferredValue(t)};ve.useEffect=function(t,e){return Jt.current.useEffect(t,e)};ve.useId=function(){return Jt.current.useId()};ve.useImperativeHandle=function(t,e,n){return Jt.current.useImperativeHandle(t,e,n)};ve.useInsertionEffect=function(t,e){return Jt.current.useInsertionEffect(t,e)};ve.useLayoutEffect=function(t,e){return Jt.current.useLayoutEffect(t,e)};ve.useMemo=function(t,e){return Jt.current.useMemo(t,e)};ve.useReducer=function(t,e,n){return Jt.current.useReducer(t,e,n)};ve.useRef=function(t){return Jt.current.useRef(t)};ve.useState=function(t){return Jt.current.useState(t)};ve.useSyncExternalStore=function(t,e,n){return Jt.current.useSyncExternalStore(t,e,n)};ve.useTransition=function(){return Jt.current.useTransition()};ve.version="18.3.1";o1.exports=ve;var D=o1.exports;const Qt=i1(D),f2=r1({__proto__:null,default:Qt},[D]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var p2=D,m2=Symbol.for("react.element"),g2=Symbol.for("react.fragment"),y2=Object.prototype.hasOwnProperty,v2=p2.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,_2={key:!0,ref:!0,__self:!0,__source:!0};function m1(t,e,n){var r,i={},s=null,o=null;n!==void 0&&(s=""+n),e.key!==void 0&&(s=""+e.key),e.ref!==void 0&&(o=e.ref);for(r in e)y2.call(e,r)&&!_2.hasOwnProperty(r)&&(i[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps,e)i[r]===void 0&&(i[r]=e[r]);return{$$typeof:m2,type:t,key:s,ref:o,props:i,_owner:v2.current}}jh.Fragment=g2;jh.jsx=m1;jh.jsxs=m1;s1.exports=jh;var x=s1.exports,Kf={},g1={exports:{}},yn={},y1={exports:{}},v1={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(H,ee){var re=H.length;H.push(ee);e:for(;0<re;){var _e=re-1>>>1,he=H[_e];if(0<i(he,ee))H[_e]=ee,H[re]=he,re=_e;else break e}}function n(H){return H.length===0?null:H[0]}function r(H){if(H.length===0)return null;var ee=H[0],re=H.pop();if(re!==ee){H[0]=re;e:for(var _e=0,he=H.length,Pe=he>>>1;_e<Pe;){var Wt=2*(_e+1)-1,ht=H[Wt],wt=Wt+1,Et=H[wt];if(0>i(ht,re))wt<he&&0>i(Et,ht)?(H[_e]=Et,H[wt]=re,_e=wt):(H[_e]=ht,H[Wt]=re,_e=Wt);else if(wt<he&&0>i(Et,re))H[_e]=Et,H[wt]=re,_e=wt;else break e}}return ee}function i(H,ee){var re=H.sortIndex-ee.sortIndex;return re!==0?re:H.id-ee.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;t.unstable_now=function(){return s.now()}}else{var o=Date,a=o.now();t.unstable_now=function(){return o.now()-a}}var l=[],c=[],h=1,f=null,p=3,w=!1,E=!1,S=!1,R=typeof setTimeout=="function"?setTimeout:null,T=typeof clearTimeout=="function"?clearTimeout:null,_=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function C(H){for(var ee=n(c);ee!==null;){if(ee.callback===null)r(c);else if(ee.startTime<=H)r(c),ee.sortIndex=ee.expirationTime,e(l,ee);else break;ee=n(c)}}function L(H){if(S=!1,C(H),!E)if(n(l)!==null)E=!0,Ht(F);else{var ee=n(c);ee!==null&&_t(L,ee.startTime-H)}}function F(H,ee){E=!1,S&&(S=!1,T(y),y=-1),w=!0;var re=p;try{for(C(ee),f=n(l);f!==null&&(!(f.expirationTime>ee)||H&&!k());){var _e=f.callback;if(typeof _e=="function"){f.callback=null,p=f.priorityLevel;var he=_e(f.expirationTime<=ee);ee=t.unstable_now(),typeof he=="function"?f.callback=he:f===n(l)&&r(l),C(ee)}else r(l);f=n(l)}if(f!==null)var Pe=!0;else{var Wt=n(c);Wt!==null&&_t(L,Wt.startTime-ee),Pe=!1}return Pe}finally{f=null,p=re,w=!1}}var z=!1,g=null,y=-1,b=5,I=-1;function k(){return!(t.unstable_now()-I<b)}function P(){if(g!==null){var H=t.unstable_now();I=H;var ee=!0;try{ee=g(!0,H)}finally{ee?A():(z=!1,g=null)}}else z=!1}var A;if(typeof _=="function")A=function(){_(P)};else if(typeof MessageChannel<"u"){var Ie=new MessageChannel,it=Ie.port2;Ie.port1.onmessage=P,A=function(){it.postMessage(null)}}else A=function(){R(P,0)};function Ht(H){g=H,z||(z=!0,A())}function _t(H,ee){y=R(function(){H(t.unstable_now())},ee)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(H){H.callback=null},t.unstable_continueExecution=function(){E||w||(E=!0,Ht(F))},t.unstable_forceFrameRate=function(H){0>H||125<H?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):b=0<H?Math.floor(1e3/H):5},t.unstable_getCurrentPriorityLevel=function(){return p},t.unstable_getFirstCallbackNode=function(){return n(l)},t.unstable_next=function(H){switch(p){case 1:case 2:case 3:var ee=3;break;default:ee=p}var re=p;p=ee;try{return H()}finally{p=re}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(H,ee){switch(H){case 1:case 2:case 3:case 4:case 5:break;default:H=3}var re=p;p=H;try{return ee()}finally{p=re}},t.unstable_scheduleCallback=function(H,ee,re){var _e=t.unstable_now();switch(typeof re=="object"&&re!==null?(re=re.delay,re=typeof re=="number"&&0<re?_e+re:_e):re=_e,H){case 1:var he=-1;break;case 2:he=250;break;case 5:he=1073741823;break;case 4:he=1e4;break;default:he=5e3}return he=re+he,H={id:h++,callback:ee,priorityLevel:H,startTime:re,expirationTime:he,sortIndex:-1},re>_e?(H.sortIndex=re,e(c,H),n(l)===null&&H===n(c)&&(S?(T(y),y=-1):S=!0,_t(L,re-_e))):(H.sortIndex=he,e(l,H),E||w||(E=!0,Ht(F))),H},t.unstable_shouldYield=k,t.unstable_wrapCallback=function(H){var ee=p;return function(){var re=p;p=ee;try{return H.apply(this,arguments)}finally{p=re}}}})(v1);y1.exports=v1;var w2=y1.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var E2=D,mn=w2;function W(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var _1=new Set,Ll={};function zs(t,e){Ho(t,e),Ho(t+"Capture",e)}function Ho(t,e){for(Ll[t]=e,t=0;t<e.length;t++)_1.add(e[t])}var $r=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Qf=Object.prototype.hasOwnProperty,b2=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,Nv={},Lv={};function T2(t){return Qf.call(Lv,t)?!0:Qf.call(Nv,t)?!1:b2.test(t)?Lv[t]=!0:(Nv[t]=!0,!1)}function C2(t,e,n,r){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function I2(t,e,n,r){if(e===null||typeof e>"u"||C2(t,e,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function Zt(t,e,n,r,i,s,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=s,this.removeEmptyString=o}var Ot={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){Ot[t]=new Zt(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];Ot[e]=new Zt(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){Ot[t]=new Zt(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){Ot[t]=new Zt(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){Ot[t]=new Zt(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){Ot[t]=new Zt(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){Ot[t]=new Zt(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){Ot[t]=new Zt(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){Ot[t]=new Zt(t,5,!1,t.toLowerCase(),null,!1,!1)});var km=/[\-:]([a-z])/g;function Pm(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(km,Pm);Ot[e]=new Zt(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(km,Pm);Ot[e]=new Zt(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(km,Pm);Ot[e]=new Zt(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){Ot[t]=new Zt(t,1,!1,t.toLowerCase(),null,!1,!1)});Ot.xlinkHref=new Zt("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){Ot[t]=new Zt(t,1,!1,t.toLowerCase(),null,!0,!0)});function Rm(t,e,n,r){var i=Ot.hasOwnProperty(e)?Ot[e]:null;(i!==null?i.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(I2(e,n,i,r)&&(n=null),r||i===null?T2(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):i.mustUseProperty?t[i.propertyName]=n===null?i.type===3?!1:"":n:(e=i.attributeName,r=i.attributeNamespace,n===null?t.removeAttribute(e):(i=i.type,n=i===3||i===4&&n===!0?"":""+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}var Kr=E2.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Xu=Symbol.for("react.element"),vo=Symbol.for("react.portal"),_o=Symbol.for("react.fragment"),Om=Symbol.for("react.strict_mode"),Xf=Symbol.for("react.profiler"),w1=Symbol.for("react.provider"),E1=Symbol.for("react.context"),Nm=Symbol.for("react.forward_ref"),Yf=Symbol.for("react.suspense"),Jf=Symbol.for("react.suspense_list"),Lm=Symbol.for("react.memo"),di=Symbol.for("react.lazy"),b1=Symbol.for("react.offscreen"),Dv=Symbol.iterator;function Ba(t){return t===null||typeof t!="object"?null:(t=Dv&&t[Dv]||t["@@iterator"],typeof t=="function"?t:null)}var Xe=Object.assign,tf;function al(t){if(tf===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);tf=e&&e[1]||""}return`
`+tf+t}var nf=!1;function rf(t,e){if(!t||nf)return"";nf=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(c){var r=c}Reflect.construct(t,[],e)}else{try{e.call()}catch(c){r=c}t.call(e.prototype)}else{try{throw Error()}catch(c){r=c}t()}}catch(c){if(c&&r&&typeof c.stack=="string"){for(var i=c.stack.split(`
`),s=r.stack.split(`
`),o=i.length-1,a=s.length-1;1<=o&&0<=a&&i[o]!==s[a];)a--;for(;1<=o&&0<=a;o--,a--)if(i[o]!==s[a]){if(o!==1||a!==1)do if(o--,a--,0>a||i[o]!==s[a]){var l=`
`+i[o].replace(" at new "," at ");return t.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",t.displayName)),l}while(1<=o&&0<=a);break}}}finally{nf=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?al(t):""}function S2(t){switch(t.tag){case 5:return al(t.type);case 16:return al("Lazy");case 13:return al("Suspense");case 19:return al("SuspenseList");case 0:case 2:case 15:return t=rf(t.type,!1),t;case 11:return t=rf(t.type.render,!1),t;case 1:return t=rf(t.type,!0),t;default:return""}}function Zf(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case _o:return"Fragment";case vo:return"Portal";case Xf:return"Profiler";case Om:return"StrictMode";case Yf:return"Suspense";case Jf:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case E1:return(t.displayName||"Context")+".Consumer";case w1:return(t._context.displayName||"Context")+".Provider";case Nm:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case Lm:return e=t.displayName||null,e!==null?e:Zf(t.type)||"Memo";case di:e=t._payload,t=t._init;try{return Zf(t(e))}catch{}}return null}function A2(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Zf(e);case 8:return e===Om?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function Fi(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function T1(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function x2(t){var e=T1(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var i=n.get,s=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return i.call(this)},set:function(o){r=""+o,s.call(this,o)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(o){r=""+o},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function Yu(t){t._valueTracker||(t._valueTracker=x2(t))}function C1(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=T1(t)?t.checked?"true":"false":t.value),t=r,t!==n?(e.setValue(t),!0):!1}function Gc(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function ep(t,e){var n=e.checked;return Xe({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function Mv(t,e){var n=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;n=Fi(e.value!=null?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function I1(t,e){e=e.checked,e!=null&&Rm(t,"checked",e,!1)}function tp(t,e){I1(t,e);var n=Fi(e.value),r=e.type;if(n!=null)r==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(r==="submit"||r==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?np(t,e.type,n):e.hasOwnProperty("defaultValue")&&np(t,e.type,Fi(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function Vv(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function np(t,e,n){(e!=="number"||Gc(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var ll=Array.isArray;function Lo(t,e,n,r){if(t=t.options,e){e={};for(var i=0;i<n.length;i++)e["$"+n[i]]=!0;for(n=0;n<t.length;n++)i=e.hasOwnProperty("$"+t[n].value),t[n].selected!==i&&(t[n].selected=i),i&&r&&(t[n].defaultSelected=!0)}else{for(n=""+Fi(n),e=null,i=0;i<t.length;i++){if(t[i].value===n){t[i].selected=!0,r&&(t[i].defaultSelected=!0);return}e!==null||t[i].disabled||(e=t[i])}e!==null&&(e.selected=!0)}}function rp(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(W(91));return Xe({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function Uv(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(W(92));if(ll(n)){if(1<n.length)throw Error(W(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:Fi(n)}}function S1(t,e){var n=Fi(e.value),r=Fi(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),r!=null&&(t.defaultValue=""+r)}function $v(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function A1(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function ip(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?A1(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var Ju,x1=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,r,i){MSApp.execUnsafeLocalFunction(function(){return t(e,n,r,i)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(Ju=Ju||document.createElement("div"),Ju.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=Ju.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function Dl(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var _l={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},k2=["Webkit","ms","Moz","O"];Object.keys(_l).forEach(function(t){k2.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),_l[e]=_l[t]})});function k1(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||_l.hasOwnProperty(t)&&_l[t]?(""+e).trim():e+"px"}function P1(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var r=n.indexOf("--")===0,i=k1(n,e[n],r);n==="float"&&(n="cssFloat"),r?t.setProperty(n,i):t[n]=i}}var P2=Xe({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function sp(t,e){if(e){if(P2[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(W(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(W(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(W(61))}if(e.style!=null&&typeof e.style!="object")throw Error(W(62))}}function op(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var ap=null;function Dm(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var lp=null,Do=null,Mo=null;function Fv(t){if(t=pu(t)){if(typeof lp!="function")throw Error(W(280));var e=t.stateNode;e&&(e=qh(e),lp(t.stateNode,t.type,e))}}function R1(t){Do?Mo?Mo.push(t):Mo=[t]:Do=t}function O1(){if(Do){var t=Do,e=Mo;if(Mo=Do=null,Fv(t),e)for(t=0;t<e.length;t++)Fv(e[t])}}function N1(t,e){return t(e)}function L1(){}var sf=!1;function D1(t,e,n){if(sf)return t(e,n);sf=!0;try{return N1(t,e,n)}finally{sf=!1,(Do!==null||Mo!==null)&&(L1(),O1())}}function Ml(t,e){var n=t.stateNode;if(n===null)return null;var r=qh(n);if(r===null)return null;n=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(t=t.type,r=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!r;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(W(231,e,typeof n));return n}var up=!1;if($r)try{var Ha={};Object.defineProperty(Ha,"passive",{get:function(){up=!0}}),window.addEventListener("test",Ha,Ha),window.removeEventListener("test",Ha,Ha)}catch{up=!1}function R2(t,e,n,r,i,s,o,a,l){var c=Array.prototype.slice.call(arguments,3);try{e.apply(n,c)}catch(h){this.onError(h)}}var wl=!1,Kc=null,Qc=!1,cp=null,O2={onError:function(t){wl=!0,Kc=t}};function N2(t,e,n,r,i,s,o,a,l){wl=!1,Kc=null,R2.apply(O2,arguments)}function L2(t,e,n,r,i,s,o,a,l){if(N2.apply(this,arguments),wl){if(wl){var c=Kc;wl=!1,Kc=null}else throw Error(W(198));Qc||(Qc=!0,cp=c)}}function Bs(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function M1(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function jv(t){if(Bs(t)!==t)throw Error(W(188))}function D2(t){var e=t.alternate;if(!e){if(e=Bs(t),e===null)throw Error(W(188));return e!==t?null:t}for(var n=t,r=e;;){var i=n.return;if(i===null)break;var s=i.alternate;if(s===null){if(r=i.return,r!==null){n=r;continue}break}if(i.child===s.child){for(s=i.child;s;){if(s===n)return jv(i),t;if(s===r)return jv(i),e;s=s.sibling}throw Error(W(188))}if(n.return!==r.return)n=i,r=s;else{for(var o=!1,a=i.child;a;){if(a===n){o=!0,n=i,r=s;break}if(a===r){o=!0,r=i,n=s;break}a=a.sibling}if(!o){for(a=s.child;a;){if(a===n){o=!0,n=s,r=i;break}if(a===r){o=!0,r=s,n=i;break}a=a.sibling}if(!o)throw Error(W(189))}}if(n.alternate!==r)throw Error(W(190))}if(n.tag!==3)throw Error(W(188));return n.stateNode.current===n?t:e}function V1(t){return t=D2(t),t!==null?U1(t):null}function U1(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=U1(t);if(e!==null)return e;t=t.sibling}return null}var $1=mn.unstable_scheduleCallback,zv=mn.unstable_cancelCallback,M2=mn.unstable_shouldYield,V2=mn.unstable_requestPaint,rt=mn.unstable_now,U2=mn.unstable_getCurrentPriorityLevel,Mm=mn.unstable_ImmediatePriority,F1=mn.unstable_UserBlockingPriority,Xc=mn.unstable_NormalPriority,$2=mn.unstable_LowPriority,j1=mn.unstable_IdlePriority,zh=null,ar=null;function F2(t){if(ar&&typeof ar.onCommitFiberRoot=="function")try{ar.onCommitFiberRoot(zh,t,void 0,(t.current.flags&128)===128)}catch{}}var qn=Math.clz32?Math.clz32:B2,j2=Math.log,z2=Math.LN2;function B2(t){return t>>>=0,t===0?32:31-(j2(t)/z2|0)|0}var Zu=64,ec=4194304;function ul(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function Yc(t,e){var n=t.pendingLanes;if(n===0)return 0;var r=0,i=t.suspendedLanes,s=t.pingedLanes,o=n&268435455;if(o!==0){var a=o&~i;a!==0?r=ul(a):(s&=o,s!==0&&(r=ul(s)))}else o=n&~i,o!==0?r=ul(o):s!==0&&(r=ul(s));if(r===0)return 0;if(e!==0&&e!==r&&!(e&i)&&(i=r&-r,s=e&-e,i>=s||i===16&&(s&4194240)!==0))return e;if(r&4&&(r|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=r;0<e;)n=31-qn(e),i=1<<n,r|=t[n],e&=~i;return r}function H2(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function W2(t,e){for(var n=t.suspendedLanes,r=t.pingedLanes,i=t.expirationTimes,s=t.pendingLanes;0<s;){var o=31-qn(s),a=1<<o,l=i[o];l===-1?(!(a&n)||a&r)&&(i[o]=H2(a,e)):l<=e&&(t.expiredLanes|=a),s&=~a}}function hp(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function z1(){var t=Zu;return Zu<<=1,!(Zu&4194240)&&(Zu=64),t}function of(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function du(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-qn(e),t[e]=n}function q2(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var r=t.eventTimes;for(t=t.expirationTimes;0<n;){var i=31-qn(n),s=1<<i;e[i]=0,r[i]=-1,t[i]=-1,n&=~s}}function Vm(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var r=31-qn(n),i=1<<r;i&e|t[r]&e&&(t[r]|=e),n&=~i}}var ke=0;function B1(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var H1,Um,W1,q1,G1,dp=!1,tc=[],Ti=null,Ci=null,Ii=null,Vl=new Map,Ul=new Map,pi=[],G2="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Bv(t,e){switch(t){case"focusin":case"focusout":Ti=null;break;case"dragenter":case"dragleave":Ci=null;break;case"mouseover":case"mouseout":Ii=null;break;case"pointerover":case"pointerout":Vl.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":Ul.delete(e.pointerId)}}function Wa(t,e,n,r,i,s){return t===null||t.nativeEvent!==s?(t={blockedOn:e,domEventName:n,eventSystemFlags:r,nativeEvent:s,targetContainers:[i]},e!==null&&(e=pu(e),e!==null&&Um(e)),t):(t.eventSystemFlags|=r,e=t.targetContainers,i!==null&&e.indexOf(i)===-1&&e.push(i),t)}function K2(t,e,n,r,i){switch(e){case"focusin":return Ti=Wa(Ti,t,e,n,r,i),!0;case"dragenter":return Ci=Wa(Ci,t,e,n,r,i),!0;case"mouseover":return Ii=Wa(Ii,t,e,n,r,i),!0;case"pointerover":var s=i.pointerId;return Vl.set(s,Wa(Vl.get(s)||null,t,e,n,r,i)),!0;case"gotpointercapture":return s=i.pointerId,Ul.set(s,Wa(Ul.get(s)||null,t,e,n,r,i)),!0}return!1}function K1(t){var e=ps(t.target);if(e!==null){var n=Bs(e);if(n!==null){if(e=n.tag,e===13){if(e=M1(n),e!==null){t.blockedOn=e,G1(t.priority,function(){W1(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function Sc(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=fp(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var r=new n.constructor(n.type,n);ap=r,n.target.dispatchEvent(r),ap=null}else return e=pu(n),e!==null&&Um(e),t.blockedOn=n,!1;e.shift()}return!0}function Hv(t,e,n){Sc(t)&&n.delete(e)}function Q2(){dp=!1,Ti!==null&&Sc(Ti)&&(Ti=null),Ci!==null&&Sc(Ci)&&(Ci=null),Ii!==null&&Sc(Ii)&&(Ii=null),Vl.forEach(Hv),Ul.forEach(Hv)}function qa(t,e){t.blockedOn===e&&(t.blockedOn=null,dp||(dp=!0,mn.unstable_scheduleCallback(mn.unstable_NormalPriority,Q2)))}function $l(t){function e(i){return qa(i,t)}if(0<tc.length){qa(tc[0],t);for(var n=1;n<tc.length;n++){var r=tc[n];r.blockedOn===t&&(r.blockedOn=null)}}for(Ti!==null&&qa(Ti,t),Ci!==null&&qa(Ci,t),Ii!==null&&qa(Ii,t),Vl.forEach(e),Ul.forEach(e),n=0;n<pi.length;n++)r=pi[n],r.blockedOn===t&&(r.blockedOn=null);for(;0<pi.length&&(n=pi[0],n.blockedOn===null);)K1(n),n.blockedOn===null&&pi.shift()}var Vo=Kr.ReactCurrentBatchConfig,Jc=!0;function X2(t,e,n,r){var i=ke,s=Vo.transition;Vo.transition=null;try{ke=1,$m(t,e,n,r)}finally{ke=i,Vo.transition=s}}function Y2(t,e,n,r){var i=ke,s=Vo.transition;Vo.transition=null;try{ke=4,$m(t,e,n,r)}finally{ke=i,Vo.transition=s}}function $m(t,e,n,r){if(Jc){var i=fp(t,e,n,r);if(i===null)gf(t,e,r,Zc,n),Bv(t,r);else if(K2(i,t,e,n,r))r.stopPropagation();else if(Bv(t,r),e&4&&-1<G2.indexOf(t)){for(;i!==null;){var s=pu(i);if(s!==null&&H1(s),s=fp(t,e,n,r),s===null&&gf(t,e,r,Zc,n),s===i)break;i=s}i!==null&&r.stopPropagation()}else gf(t,e,r,null,n)}}var Zc=null;function fp(t,e,n,r){if(Zc=null,t=Dm(r),t=ps(t),t!==null)if(e=Bs(t),e===null)t=null;else if(n=e.tag,n===13){if(t=M1(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return Zc=t,null}function Q1(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(U2()){case Mm:return 1;case F1:return 4;case Xc:case $2:return 16;case j1:return 536870912;default:return 16}default:return 16}}var _i=null,Fm=null,Ac=null;function X1(){if(Ac)return Ac;var t,e=Fm,n=e.length,r,i="value"in _i?_i.value:_i.textContent,s=i.length;for(t=0;t<n&&e[t]===i[t];t++);var o=n-t;for(r=1;r<=o&&e[n-r]===i[s-r];r++);return Ac=i.slice(t,1<r?1-r:void 0)}function xc(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function nc(){return!0}function Wv(){return!1}function vn(t){function e(n,r,i,s,o){this._reactName=n,this._targetInst=i,this.type=r,this.nativeEvent=s,this.target=o,this.currentTarget=null;for(var a in t)t.hasOwnProperty(a)&&(n=t[a],this[a]=n?n(s):s[a]);return this.isDefaultPrevented=(s.defaultPrevented!=null?s.defaultPrevented:s.returnValue===!1)?nc:Wv,this.isPropagationStopped=Wv,this}return Xe(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=nc)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=nc)},persist:function(){},isPersistent:nc}),e}var da={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},jm=vn(da),fu=Xe({},da,{view:0,detail:0}),J2=vn(fu),af,lf,Ga,Bh=Xe({},fu,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:zm,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==Ga&&(Ga&&t.type==="mousemove"?(af=t.screenX-Ga.screenX,lf=t.screenY-Ga.screenY):lf=af=0,Ga=t),af)},movementY:function(t){return"movementY"in t?t.movementY:lf}}),qv=vn(Bh),Z2=Xe({},Bh,{dataTransfer:0}),eA=vn(Z2),tA=Xe({},fu,{relatedTarget:0}),uf=vn(tA),nA=Xe({},da,{animationName:0,elapsedTime:0,pseudoElement:0}),rA=vn(nA),iA=Xe({},da,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),sA=vn(iA),oA=Xe({},da,{data:0}),Gv=vn(oA),aA={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},lA={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},uA={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function cA(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=uA[t])?!!e[t]:!1}function zm(){return cA}var hA=Xe({},fu,{key:function(t){if(t.key){var e=aA[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=xc(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?lA[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:zm,charCode:function(t){return t.type==="keypress"?xc(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?xc(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),dA=vn(hA),fA=Xe({},Bh,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Kv=vn(fA),pA=Xe({},fu,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:zm}),mA=vn(pA),gA=Xe({},da,{propertyName:0,elapsedTime:0,pseudoElement:0}),yA=vn(gA),vA=Xe({},Bh,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),_A=vn(vA),wA=[9,13,27,32],Bm=$r&&"CompositionEvent"in window,El=null;$r&&"documentMode"in document&&(El=document.documentMode);var EA=$r&&"TextEvent"in window&&!El,Y1=$r&&(!Bm||El&&8<El&&11>=El),Qv=" ",Xv=!1;function J1(t,e){switch(t){case"keyup":return wA.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Z1(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var wo=!1;function bA(t,e){switch(t){case"compositionend":return Z1(e);case"keypress":return e.which!==32?null:(Xv=!0,Qv);case"textInput":return t=e.data,t===Qv&&Xv?null:t;default:return null}}function TA(t,e){if(wo)return t==="compositionend"||!Bm&&J1(t,e)?(t=X1(),Ac=Fm=_i=null,wo=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return Y1&&e.locale!=="ko"?null:e.data;default:return null}}var CA={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Yv(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!CA[t.type]:e==="textarea"}function eE(t,e,n,r){R1(r),e=eh(e,"onChange"),0<e.length&&(n=new jm("onChange","change",null,n,r),t.push({event:n,listeners:e}))}var bl=null,Fl=null;function IA(t){hE(t,0)}function Hh(t){var e=To(t);if(C1(e))return t}function SA(t,e){if(t==="change")return e}var tE=!1;if($r){var cf;if($r){var hf="oninput"in document;if(!hf){var Jv=document.createElement("div");Jv.setAttribute("oninput","return;"),hf=typeof Jv.oninput=="function"}cf=hf}else cf=!1;tE=cf&&(!document.documentMode||9<document.documentMode)}function Zv(){bl&&(bl.detachEvent("onpropertychange",nE),Fl=bl=null)}function nE(t){if(t.propertyName==="value"&&Hh(Fl)){var e=[];eE(e,Fl,t,Dm(t)),D1(IA,e)}}function AA(t,e,n){t==="focusin"?(Zv(),bl=e,Fl=n,bl.attachEvent("onpropertychange",nE)):t==="focusout"&&Zv()}function xA(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return Hh(Fl)}function kA(t,e){if(t==="click")return Hh(e)}function PA(t,e){if(t==="input"||t==="change")return Hh(e)}function RA(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var Xn=typeof Object.is=="function"?Object.is:RA;function jl(t,e){if(Xn(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!Qf.call(e,i)||!Xn(t[i],e[i]))return!1}return!0}function e_(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function t_(t,e){var n=e_(t);t=0;for(var r;n;){if(n.nodeType===3){if(r=t+n.textContent.length,t<=e&&r>=e)return{node:n,offset:e-t};t=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=e_(n)}}function rE(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?rE(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function iE(){for(var t=window,e=Gc();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=Gc(t.document)}return e}function Hm(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function OA(t){var e=iE(),n=t.focusedElem,r=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&rE(n.ownerDocument.documentElement,n)){if(r!==null&&Hm(n)){if(e=r.start,t=r.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var i=n.textContent.length,s=Math.min(r.start,i);r=r.end===void 0?s:Math.min(r.end,i),!t.extend&&s>r&&(i=r,r=s,s=i),i=t_(n,s);var o=t_(n,r);i&&o&&(t.rangeCount!==1||t.anchorNode!==i.node||t.anchorOffset!==i.offset||t.focusNode!==o.node||t.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(i.node,i.offset),t.removeAllRanges(),s>r?(t.addRange(e),t.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var NA=$r&&"documentMode"in document&&11>=document.documentMode,Eo=null,pp=null,Tl=null,mp=!1;function n_(t,e,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;mp||Eo==null||Eo!==Gc(r)||(r=Eo,"selectionStart"in r&&Hm(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),Tl&&jl(Tl,r)||(Tl=r,r=eh(pp,"onSelect"),0<r.length&&(e=new jm("onSelect","select",null,e,n),t.push({event:e,listeners:r}),e.target=Eo)))}function rc(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var bo={animationend:rc("Animation","AnimationEnd"),animationiteration:rc("Animation","AnimationIteration"),animationstart:rc("Animation","AnimationStart"),transitionend:rc("Transition","TransitionEnd")},df={},sE={};$r&&(sE=document.createElement("div").style,"AnimationEvent"in window||(delete bo.animationend.animation,delete bo.animationiteration.animation,delete bo.animationstart.animation),"TransitionEvent"in window||delete bo.transitionend.transition);function Wh(t){if(df[t])return df[t];if(!bo[t])return t;var e=bo[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in sE)return df[t]=e[n];return t}var oE=Wh("animationend"),aE=Wh("animationiteration"),lE=Wh("animationstart"),uE=Wh("transitionend"),cE=new Map,r_="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Gi(t,e){cE.set(t,e),zs(e,[t])}for(var ff=0;ff<r_.length;ff++){var pf=r_[ff],LA=pf.toLowerCase(),DA=pf[0].toUpperCase()+pf.slice(1);Gi(LA,"on"+DA)}Gi(oE,"onAnimationEnd");Gi(aE,"onAnimationIteration");Gi(lE,"onAnimationStart");Gi("dblclick","onDoubleClick");Gi("focusin","onFocus");Gi("focusout","onBlur");Gi(uE,"onTransitionEnd");Ho("onMouseEnter",["mouseout","mouseover"]);Ho("onMouseLeave",["mouseout","mouseover"]);Ho("onPointerEnter",["pointerout","pointerover"]);Ho("onPointerLeave",["pointerout","pointerover"]);zs("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));zs("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));zs("onBeforeInput",["compositionend","keypress","textInput","paste"]);zs("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));zs("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));zs("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var cl="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),MA=new Set("cancel close invalid load scroll toggle".split(" ").concat(cl));function i_(t,e,n){var r=t.type||"unknown-event";t.currentTarget=n,L2(r,e,void 0,t),t.currentTarget=null}function hE(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var r=t[n],i=r.event;r=r.listeners;e:{var s=void 0;if(e)for(var o=r.length-1;0<=o;o--){var a=r[o],l=a.instance,c=a.currentTarget;if(a=a.listener,l!==s&&i.isPropagationStopped())break e;i_(i,a,c),s=l}else for(o=0;o<r.length;o++){if(a=r[o],l=a.instance,c=a.currentTarget,a=a.listener,l!==s&&i.isPropagationStopped())break e;i_(i,a,c),s=l}}}if(Qc)throw t=cp,Qc=!1,cp=null,t}function $e(t,e){var n=e[wp];n===void 0&&(n=e[wp]=new Set);var r=t+"__bubble";n.has(r)||(dE(e,t,2,!1),n.add(r))}function mf(t,e,n){var r=0;e&&(r|=4),dE(n,t,r,e)}var ic="_reactListening"+Math.random().toString(36).slice(2);function zl(t){if(!t[ic]){t[ic]=!0,_1.forEach(function(n){n!=="selectionchange"&&(MA.has(n)||mf(n,!1,t),mf(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[ic]||(e[ic]=!0,mf("selectionchange",!1,e))}}function dE(t,e,n,r){switch(Q1(e)){case 1:var i=X2;break;case 4:i=Y2;break;default:i=$m}n=i.bind(null,e,n,t),i=void 0,!up||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(i=!0),r?i!==void 0?t.addEventListener(e,n,{capture:!0,passive:i}):t.addEventListener(e,n,!0):i!==void 0?t.addEventListener(e,n,{passive:i}):t.addEventListener(e,n,!1)}function gf(t,e,n,r,i){var s=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var o=r.tag;if(o===3||o===4){var a=r.stateNode.containerInfo;if(a===i||a.nodeType===8&&a.parentNode===i)break;if(o===4)for(o=r.return;o!==null;){var l=o.tag;if((l===3||l===4)&&(l=o.stateNode.containerInfo,l===i||l.nodeType===8&&l.parentNode===i))return;o=o.return}for(;a!==null;){if(o=ps(a),o===null)return;if(l=o.tag,l===5||l===6){r=s=o;continue e}a=a.parentNode}}r=r.return}D1(function(){var c=s,h=Dm(n),f=[];e:{var p=cE.get(t);if(p!==void 0){var w=jm,E=t;switch(t){case"keypress":if(xc(n)===0)break e;case"keydown":case"keyup":w=dA;break;case"focusin":E="focus",w=uf;break;case"focusout":E="blur",w=uf;break;case"beforeblur":case"afterblur":w=uf;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":w=qv;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":w=eA;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":w=mA;break;case oE:case aE:case lE:w=rA;break;case uE:w=yA;break;case"scroll":w=J2;break;case"wheel":w=_A;break;case"copy":case"cut":case"paste":w=sA;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":w=Kv}var S=(e&4)!==0,R=!S&&t==="scroll",T=S?p!==null?p+"Capture":null:p;S=[];for(var _=c,C;_!==null;){C=_;var L=C.stateNode;if(C.tag===5&&L!==null&&(C=L,T!==null&&(L=Ml(_,T),L!=null&&S.push(Bl(_,L,C)))),R)break;_=_.return}0<S.length&&(p=new w(p,E,null,n,h),f.push({event:p,listeners:S}))}}if(!(e&7)){e:{if(p=t==="mouseover"||t==="pointerover",w=t==="mouseout"||t==="pointerout",p&&n!==ap&&(E=n.relatedTarget||n.fromElement)&&(ps(E)||E[Fr]))break e;if((w||p)&&(p=h.window===h?h:(p=h.ownerDocument)?p.defaultView||p.parentWindow:window,w?(E=n.relatedTarget||n.toElement,w=c,E=E?ps(E):null,E!==null&&(R=Bs(E),E!==R||E.tag!==5&&E.tag!==6)&&(E=null)):(w=null,E=c),w!==E)){if(S=qv,L="onMouseLeave",T="onMouseEnter",_="mouse",(t==="pointerout"||t==="pointerover")&&(S=Kv,L="onPointerLeave",T="onPointerEnter",_="pointer"),R=w==null?p:To(w),C=E==null?p:To(E),p=new S(L,_+"leave",w,n,h),p.target=R,p.relatedTarget=C,L=null,ps(h)===c&&(S=new S(T,_+"enter",E,n,h),S.target=C,S.relatedTarget=R,L=S),R=L,w&&E)t:{for(S=w,T=E,_=0,C=S;C;C=ao(C))_++;for(C=0,L=T;L;L=ao(L))C++;for(;0<_-C;)S=ao(S),_--;for(;0<C-_;)T=ao(T),C--;for(;_--;){if(S===T||T!==null&&S===T.alternate)break t;S=ao(S),T=ao(T)}S=null}else S=null;w!==null&&s_(f,p,w,S,!1),E!==null&&R!==null&&s_(f,R,E,S,!0)}}e:{if(p=c?To(c):window,w=p.nodeName&&p.nodeName.toLowerCase(),w==="select"||w==="input"&&p.type==="file")var F=SA;else if(Yv(p))if(tE)F=PA;else{F=xA;var z=AA}else(w=p.nodeName)&&w.toLowerCase()==="input"&&(p.type==="checkbox"||p.type==="radio")&&(F=kA);if(F&&(F=F(t,c))){eE(f,F,n,h);break e}z&&z(t,p,c),t==="focusout"&&(z=p._wrapperState)&&z.controlled&&p.type==="number"&&np(p,"number",p.value)}switch(z=c?To(c):window,t){case"focusin":(Yv(z)||z.contentEditable==="true")&&(Eo=z,pp=c,Tl=null);break;case"focusout":Tl=pp=Eo=null;break;case"mousedown":mp=!0;break;case"contextmenu":case"mouseup":case"dragend":mp=!1,n_(f,n,h);break;case"selectionchange":if(NA)break;case"keydown":case"keyup":n_(f,n,h)}var g;if(Bm)e:{switch(t){case"compositionstart":var y="onCompositionStart";break e;case"compositionend":y="onCompositionEnd";break e;case"compositionupdate":y="onCompositionUpdate";break e}y=void 0}else wo?J1(t,n)&&(y="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(y="onCompositionStart");y&&(Y1&&n.locale!=="ko"&&(wo||y!=="onCompositionStart"?y==="onCompositionEnd"&&wo&&(g=X1()):(_i=h,Fm="value"in _i?_i.value:_i.textContent,wo=!0)),z=eh(c,y),0<z.length&&(y=new Gv(y,t,null,n,h),f.push({event:y,listeners:z}),g?y.data=g:(g=Z1(n),g!==null&&(y.data=g)))),(g=EA?bA(t,n):TA(t,n))&&(c=eh(c,"onBeforeInput"),0<c.length&&(h=new Gv("onBeforeInput","beforeinput",null,n,h),f.push({event:h,listeners:c}),h.data=g))}hE(f,e)})}function Bl(t,e,n){return{instance:t,listener:e,currentTarget:n}}function eh(t,e){for(var n=e+"Capture",r=[];t!==null;){var i=t,s=i.stateNode;i.tag===5&&s!==null&&(i=s,s=Ml(t,n),s!=null&&r.unshift(Bl(t,s,i)),s=Ml(t,e),s!=null&&r.push(Bl(t,s,i))),t=t.return}return r}function ao(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function s_(t,e,n,r,i){for(var s=e._reactName,o=[];n!==null&&n!==r;){var a=n,l=a.alternate,c=a.stateNode;if(l!==null&&l===r)break;a.tag===5&&c!==null&&(a=c,i?(l=Ml(n,s),l!=null&&o.unshift(Bl(n,l,a))):i||(l=Ml(n,s),l!=null&&o.push(Bl(n,l,a)))),n=n.return}o.length!==0&&t.push({event:e,listeners:o})}var VA=/\r\n?/g,UA=/\u0000|\uFFFD/g;function o_(t){return(typeof t=="string"?t:""+t).replace(VA,`
`).replace(UA,"")}function sc(t,e,n){if(e=o_(e),o_(t)!==e&&n)throw Error(W(425))}function th(){}var gp=null,yp=null;function vp(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var _p=typeof setTimeout=="function"?setTimeout:void 0,$A=typeof clearTimeout=="function"?clearTimeout:void 0,a_=typeof Promise=="function"?Promise:void 0,FA=typeof queueMicrotask=="function"?queueMicrotask:typeof a_<"u"?function(t){return a_.resolve(null).then(t).catch(jA)}:_p;function jA(t){setTimeout(function(){throw t})}function yf(t,e){var n=e,r=0;do{var i=n.nextSibling;if(t.removeChild(n),i&&i.nodeType===8)if(n=i.data,n==="/$"){if(r===0){t.removeChild(i),$l(e);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=i}while(n);$l(e)}function Si(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function l_(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var fa=Math.random().toString(36).slice(2),or="__reactFiber$"+fa,Hl="__reactProps$"+fa,Fr="__reactContainer$"+fa,wp="__reactEvents$"+fa,zA="__reactListeners$"+fa,BA="__reactHandles$"+fa;function ps(t){var e=t[or];if(e)return e;for(var n=t.parentNode;n;){if(e=n[Fr]||n[or]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=l_(t);t!==null;){if(n=t[or])return n;t=l_(t)}return e}t=n,n=t.parentNode}return null}function pu(t){return t=t[or]||t[Fr],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function To(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(W(33))}function qh(t){return t[Hl]||null}var Ep=[],Co=-1;function Ki(t){return{current:t}}function je(t){0>Co||(t.current=Ep[Co],Ep[Co]=null,Co--)}function Le(t,e){Co++,Ep[Co]=t.current,t.current=e}var ji={},zt=Ki(ji),on=Ki(!1),xs=ji;function Wo(t,e){var n=t.type.contextTypes;if(!n)return ji;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var i={},s;for(s in n)i[s]=e[s];return r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=i),i}function an(t){return t=t.childContextTypes,t!=null}function nh(){je(on),je(zt)}function u_(t,e,n){if(zt.current!==ji)throw Error(W(168));Le(zt,e),Le(on,n)}function fE(t,e,n){var r=t.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var i in r)if(!(i in e))throw Error(W(108,A2(t)||"Unknown",i));return Xe({},n,r)}function rh(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||ji,xs=zt.current,Le(zt,t),Le(on,on.current),!0}function c_(t,e,n){var r=t.stateNode;if(!r)throw Error(W(169));n?(t=fE(t,e,xs),r.__reactInternalMemoizedMergedChildContext=t,je(on),je(zt),Le(zt,t)):je(on),Le(on,n)}var Ar=null,Gh=!1,vf=!1;function pE(t){Ar===null?Ar=[t]:Ar.push(t)}function HA(t){Gh=!0,pE(t)}function Qi(){if(!vf&&Ar!==null){vf=!0;var t=0,e=ke;try{var n=Ar;for(ke=1;t<n.length;t++){var r=n[t];do r=r(!0);while(r!==null)}Ar=null,Gh=!1}catch(i){throw Ar!==null&&(Ar=Ar.slice(t+1)),$1(Mm,Qi),i}finally{ke=e,vf=!1}}return null}var Io=[],So=0,ih=null,sh=0,Tn=[],Cn=0,ks=null,Pr=1,Rr="";function hs(t,e){Io[So++]=sh,Io[So++]=ih,ih=t,sh=e}function mE(t,e,n){Tn[Cn++]=Pr,Tn[Cn++]=Rr,Tn[Cn++]=ks,ks=t;var r=Pr;t=Rr;var i=32-qn(r)-1;r&=~(1<<i),n+=1;var s=32-qn(e)+i;if(30<s){var o=i-i%5;s=(r&(1<<o)-1).toString(32),r>>=o,i-=o,Pr=1<<32-qn(e)+i|n<<i|r,Rr=s+t}else Pr=1<<s|n<<i|r,Rr=t}function Wm(t){t.return!==null&&(hs(t,1),mE(t,1,0))}function qm(t){for(;t===ih;)ih=Io[--So],Io[So]=null,sh=Io[--So],Io[So]=null;for(;t===ks;)ks=Tn[--Cn],Tn[Cn]=null,Rr=Tn[--Cn],Tn[Cn]=null,Pr=Tn[--Cn],Tn[Cn]=null}var pn=null,fn=null,He=!1,Bn=null;function gE(t,e){var n=kn(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function h_(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,pn=t,fn=Si(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,pn=t,fn=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=ks!==null?{id:Pr,overflow:Rr}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=kn(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,pn=t,fn=null,!0):!1;default:return!1}}function bp(t){return(t.mode&1)!==0&&(t.flags&128)===0}function Tp(t){if(He){var e=fn;if(e){var n=e;if(!h_(t,e)){if(bp(t))throw Error(W(418));e=Si(n.nextSibling);var r=pn;e&&h_(t,e)?gE(r,n):(t.flags=t.flags&-4097|2,He=!1,pn=t)}}else{if(bp(t))throw Error(W(418));t.flags=t.flags&-4097|2,He=!1,pn=t}}}function d_(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;pn=t}function oc(t){if(t!==pn)return!1;if(!He)return d_(t),He=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!vp(t.type,t.memoizedProps)),e&&(e=fn)){if(bp(t))throw yE(),Error(W(418));for(;e;)gE(t,e),e=Si(e.nextSibling)}if(d_(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(W(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){fn=Si(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}fn=null}}else fn=pn?Si(t.stateNode.nextSibling):null;return!0}function yE(){for(var t=fn;t;)t=Si(t.nextSibling)}function qo(){fn=pn=null,He=!1}function Gm(t){Bn===null?Bn=[t]:Bn.push(t)}var WA=Kr.ReactCurrentBatchConfig;function Ka(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(W(309));var r=n.stateNode}if(!r)throw Error(W(147,t));var i=r,s=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===s?e.ref:(e=function(o){var a=i.refs;o===null?delete a[s]:a[s]=o},e._stringRef=s,e)}if(typeof t!="string")throw Error(W(284));if(!n._owner)throw Error(W(290,t))}return t}function ac(t,e){throw t=Object.prototype.toString.call(e),Error(W(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function f_(t){var e=t._init;return e(t._payload)}function vE(t){function e(T,_){if(t){var C=T.deletions;C===null?(T.deletions=[_],T.flags|=16):C.push(_)}}function n(T,_){if(!t)return null;for(;_!==null;)e(T,_),_=_.sibling;return null}function r(T,_){for(T=new Map;_!==null;)_.key!==null?T.set(_.key,_):T.set(_.index,_),_=_.sibling;return T}function i(T,_){return T=Pi(T,_),T.index=0,T.sibling=null,T}function s(T,_,C){return T.index=C,t?(C=T.alternate,C!==null?(C=C.index,C<_?(T.flags|=2,_):C):(T.flags|=2,_)):(T.flags|=1048576,_)}function o(T){return t&&T.alternate===null&&(T.flags|=2),T}function a(T,_,C,L){return _===null||_.tag!==6?(_=If(C,T.mode,L),_.return=T,_):(_=i(_,C),_.return=T,_)}function l(T,_,C,L){var F=C.type;return F===_o?h(T,_,C.props.children,L,C.key):_!==null&&(_.elementType===F||typeof F=="object"&&F!==null&&F.$$typeof===di&&f_(F)===_.type)?(L=i(_,C.props),L.ref=Ka(T,_,C),L.return=T,L):(L=Dc(C.type,C.key,C.props,null,T.mode,L),L.ref=Ka(T,_,C),L.return=T,L)}function c(T,_,C,L){return _===null||_.tag!==4||_.stateNode.containerInfo!==C.containerInfo||_.stateNode.implementation!==C.implementation?(_=Sf(C,T.mode,L),_.return=T,_):(_=i(_,C.children||[]),_.return=T,_)}function h(T,_,C,L,F){return _===null||_.tag!==7?(_=Ts(C,T.mode,L,F),_.return=T,_):(_=i(_,C),_.return=T,_)}function f(T,_,C){if(typeof _=="string"&&_!==""||typeof _=="number")return _=If(""+_,T.mode,C),_.return=T,_;if(typeof _=="object"&&_!==null){switch(_.$$typeof){case Xu:return C=Dc(_.type,_.key,_.props,null,T.mode,C),C.ref=Ka(T,null,_),C.return=T,C;case vo:return _=Sf(_,T.mode,C),_.return=T,_;case di:var L=_._init;return f(T,L(_._payload),C)}if(ll(_)||Ba(_))return _=Ts(_,T.mode,C,null),_.return=T,_;ac(T,_)}return null}function p(T,_,C,L){var F=_!==null?_.key:null;if(typeof C=="string"&&C!==""||typeof C=="number")return F!==null?null:a(T,_,""+C,L);if(typeof C=="object"&&C!==null){switch(C.$$typeof){case Xu:return C.key===F?l(T,_,C,L):null;case vo:return C.key===F?c(T,_,C,L):null;case di:return F=C._init,p(T,_,F(C._payload),L)}if(ll(C)||Ba(C))return F!==null?null:h(T,_,C,L,null);ac(T,C)}return null}function w(T,_,C,L,F){if(typeof L=="string"&&L!==""||typeof L=="number")return T=T.get(C)||null,a(_,T,""+L,F);if(typeof L=="object"&&L!==null){switch(L.$$typeof){case Xu:return T=T.get(L.key===null?C:L.key)||null,l(_,T,L,F);case vo:return T=T.get(L.key===null?C:L.key)||null,c(_,T,L,F);case di:var z=L._init;return w(T,_,C,z(L._payload),F)}if(ll(L)||Ba(L))return T=T.get(C)||null,h(_,T,L,F,null);ac(_,L)}return null}function E(T,_,C,L){for(var F=null,z=null,g=_,y=_=0,b=null;g!==null&&y<C.length;y++){g.index>y?(b=g,g=null):b=g.sibling;var I=p(T,g,C[y],L);if(I===null){g===null&&(g=b);break}t&&g&&I.alternate===null&&e(T,g),_=s(I,_,y),z===null?F=I:z.sibling=I,z=I,g=b}if(y===C.length)return n(T,g),He&&hs(T,y),F;if(g===null){for(;y<C.length;y++)g=f(T,C[y],L),g!==null&&(_=s(g,_,y),z===null?F=g:z.sibling=g,z=g);return He&&hs(T,y),F}for(g=r(T,g);y<C.length;y++)b=w(g,T,y,C[y],L),b!==null&&(t&&b.alternate!==null&&g.delete(b.key===null?y:b.key),_=s(b,_,y),z===null?F=b:z.sibling=b,z=b);return t&&g.forEach(function(k){return e(T,k)}),He&&hs(T,y),F}function S(T,_,C,L){var F=Ba(C);if(typeof F!="function")throw Error(W(150));if(C=F.call(C),C==null)throw Error(W(151));for(var z=F=null,g=_,y=_=0,b=null,I=C.next();g!==null&&!I.done;y++,I=C.next()){g.index>y?(b=g,g=null):b=g.sibling;var k=p(T,g,I.value,L);if(k===null){g===null&&(g=b);break}t&&g&&k.alternate===null&&e(T,g),_=s(k,_,y),z===null?F=k:z.sibling=k,z=k,g=b}if(I.done)return n(T,g),He&&hs(T,y),F;if(g===null){for(;!I.done;y++,I=C.next())I=f(T,I.value,L),I!==null&&(_=s(I,_,y),z===null?F=I:z.sibling=I,z=I);return He&&hs(T,y),F}for(g=r(T,g);!I.done;y++,I=C.next())I=w(g,T,y,I.value,L),I!==null&&(t&&I.alternate!==null&&g.delete(I.key===null?y:I.key),_=s(I,_,y),z===null?F=I:z.sibling=I,z=I);return t&&g.forEach(function(P){return e(T,P)}),He&&hs(T,y),F}function R(T,_,C,L){if(typeof C=="object"&&C!==null&&C.type===_o&&C.key===null&&(C=C.props.children),typeof C=="object"&&C!==null){switch(C.$$typeof){case Xu:e:{for(var F=C.key,z=_;z!==null;){if(z.key===F){if(F=C.type,F===_o){if(z.tag===7){n(T,z.sibling),_=i(z,C.props.children),_.return=T,T=_;break e}}else if(z.elementType===F||typeof F=="object"&&F!==null&&F.$$typeof===di&&f_(F)===z.type){n(T,z.sibling),_=i(z,C.props),_.ref=Ka(T,z,C),_.return=T,T=_;break e}n(T,z);break}else e(T,z);z=z.sibling}C.type===_o?(_=Ts(C.props.children,T.mode,L,C.key),_.return=T,T=_):(L=Dc(C.type,C.key,C.props,null,T.mode,L),L.ref=Ka(T,_,C),L.return=T,T=L)}return o(T);case vo:e:{for(z=C.key;_!==null;){if(_.key===z)if(_.tag===4&&_.stateNode.containerInfo===C.containerInfo&&_.stateNode.implementation===C.implementation){n(T,_.sibling),_=i(_,C.children||[]),_.return=T,T=_;break e}else{n(T,_);break}else e(T,_);_=_.sibling}_=Sf(C,T.mode,L),_.return=T,T=_}return o(T);case di:return z=C._init,R(T,_,z(C._payload),L)}if(ll(C))return E(T,_,C,L);if(Ba(C))return S(T,_,C,L);ac(T,C)}return typeof C=="string"&&C!==""||typeof C=="number"?(C=""+C,_!==null&&_.tag===6?(n(T,_.sibling),_=i(_,C),_.return=T,T=_):(n(T,_),_=If(C,T.mode,L),_.return=T,T=_),o(T)):n(T,_)}return R}var Go=vE(!0),_E=vE(!1),oh=Ki(null),ah=null,Ao=null,Km=null;function Qm(){Km=Ao=ah=null}function Xm(t){var e=oh.current;je(oh),t._currentValue=e}function Cp(t,e,n){for(;t!==null;){var r=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),t===n)break;t=t.return}}function Uo(t,e){ah=t,Km=Ao=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(sn=!0),t.firstContext=null)}function On(t){var e=t._currentValue;if(Km!==t)if(t={context:t,memoizedValue:e,next:null},Ao===null){if(ah===null)throw Error(W(308));Ao=t,ah.dependencies={lanes:0,firstContext:t}}else Ao=Ao.next=t;return e}var ms=null;function Ym(t){ms===null?ms=[t]:ms.push(t)}function wE(t,e,n,r){var i=e.interleaved;return i===null?(n.next=n,Ym(e)):(n.next=i.next,i.next=n),e.interleaved=n,jr(t,r)}function jr(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var fi=!1;function Jm(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function EE(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function Dr(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function Ai(t,e,n){var r=t.updateQueue;if(r===null)return null;if(r=r.shared,Ce&2){var i=r.pending;return i===null?e.next=e:(e.next=i.next,i.next=e),r.pending=e,jr(t,n)}return i=r.interleaved,i===null?(e.next=e,Ym(r)):(e.next=i.next,i.next=e),r.interleaved=e,jr(t,n)}function kc(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,Vm(t,n)}}function p_(t,e){var n=t.updateQueue,r=t.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var i=null,s=null;if(n=n.firstBaseUpdate,n!==null){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};s===null?i=s=o:s=s.next=o,n=n.next}while(n!==null);s===null?i=s=e:s=s.next=e}else i=s=e;n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:s,shared:r.shared,effects:r.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function lh(t,e,n,r){var i=t.updateQueue;fi=!1;var s=i.firstBaseUpdate,o=i.lastBaseUpdate,a=i.shared.pending;if(a!==null){i.shared.pending=null;var l=a,c=l.next;l.next=null,o===null?s=c:o.next=c,o=l;var h=t.alternate;h!==null&&(h=h.updateQueue,a=h.lastBaseUpdate,a!==o&&(a===null?h.firstBaseUpdate=c:a.next=c,h.lastBaseUpdate=l))}if(s!==null){var f=i.baseState;o=0,h=c=l=null,a=s;do{var p=a.lane,w=a.eventTime;if((r&p)===p){h!==null&&(h=h.next={eventTime:w,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var E=t,S=a;switch(p=e,w=n,S.tag){case 1:if(E=S.payload,typeof E=="function"){f=E.call(w,f,p);break e}f=E;break e;case 3:E.flags=E.flags&-65537|128;case 0:if(E=S.payload,p=typeof E=="function"?E.call(w,f,p):E,p==null)break e;f=Xe({},f,p);break e;case 2:fi=!0}}a.callback!==null&&a.lane!==0&&(t.flags|=64,p=i.effects,p===null?i.effects=[a]:p.push(a))}else w={eventTime:w,lane:p,tag:a.tag,payload:a.payload,callback:a.callback,next:null},h===null?(c=h=w,l=f):h=h.next=w,o|=p;if(a=a.next,a===null){if(a=i.shared.pending,a===null)break;p=a,a=p.next,p.next=null,i.lastBaseUpdate=p,i.shared.pending=null}}while(!0);if(h===null&&(l=f),i.baseState=l,i.firstBaseUpdate=c,i.lastBaseUpdate=h,e=i.shared.interleaved,e!==null){i=e;do o|=i.lane,i=i.next;while(i!==e)}else s===null&&(i.shared.lanes=0);Rs|=o,t.lanes=o,t.memoizedState=f}}function m_(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var r=t[e],i=r.callback;if(i!==null){if(r.callback=null,r=n,typeof i!="function")throw Error(W(191,i));i.call(r)}}}var mu={},lr=Ki(mu),Wl=Ki(mu),ql=Ki(mu);function gs(t){if(t===mu)throw Error(W(174));return t}function Zm(t,e){switch(Le(ql,e),Le(Wl,t),Le(lr,mu),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:ip(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=ip(e,t)}je(lr),Le(lr,e)}function Ko(){je(lr),je(Wl),je(ql)}function bE(t){gs(ql.current);var e=gs(lr.current),n=ip(e,t.type);e!==n&&(Le(Wl,t),Le(lr,n))}function eg(t){Wl.current===t&&(je(lr),je(Wl))}var Ge=Ki(0);function uh(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var _f=[];function tg(){for(var t=0;t<_f.length;t++)_f[t]._workInProgressVersionPrimary=null;_f.length=0}var Pc=Kr.ReactCurrentDispatcher,wf=Kr.ReactCurrentBatchConfig,Ps=0,Qe=null,ft=null,yt=null,ch=!1,Cl=!1,Gl=0,qA=0;function Mt(){throw Error(W(321))}function ng(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!Xn(t[n],e[n]))return!1;return!0}function rg(t,e,n,r,i,s){if(Ps=s,Qe=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,Pc.current=t===null||t.memoizedState===null?XA:YA,t=n(r,i),Cl){s=0;do{if(Cl=!1,Gl=0,25<=s)throw Error(W(301));s+=1,yt=ft=null,e.updateQueue=null,Pc.current=JA,t=n(r,i)}while(Cl)}if(Pc.current=hh,e=ft!==null&&ft.next!==null,Ps=0,yt=ft=Qe=null,ch=!1,e)throw Error(W(300));return t}function ig(){var t=Gl!==0;return Gl=0,t}function rr(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return yt===null?Qe.memoizedState=yt=t:yt=yt.next=t,yt}function Nn(){if(ft===null){var t=Qe.alternate;t=t!==null?t.memoizedState:null}else t=ft.next;var e=yt===null?Qe.memoizedState:yt.next;if(e!==null)yt=e,ft=t;else{if(t===null)throw Error(W(310));ft=t,t={memoizedState:ft.memoizedState,baseState:ft.baseState,baseQueue:ft.baseQueue,queue:ft.queue,next:null},yt===null?Qe.memoizedState=yt=t:yt=yt.next=t}return yt}function Kl(t,e){return typeof e=="function"?e(t):e}function Ef(t){var e=Nn(),n=e.queue;if(n===null)throw Error(W(311));n.lastRenderedReducer=t;var r=ft,i=r.baseQueue,s=n.pending;if(s!==null){if(i!==null){var o=i.next;i.next=s.next,s.next=o}r.baseQueue=i=s,n.pending=null}if(i!==null){s=i.next,r=r.baseState;var a=o=null,l=null,c=s;do{var h=c.lane;if((Ps&h)===h)l!==null&&(l=l.next={lane:0,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null}),r=c.hasEagerState?c.eagerState:t(r,c.action);else{var f={lane:h,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null};l===null?(a=l=f,o=r):l=l.next=f,Qe.lanes|=h,Rs|=h}c=c.next}while(c!==null&&c!==s);l===null?o=r:l.next=a,Xn(r,e.memoizedState)||(sn=!0),e.memoizedState=r,e.baseState=o,e.baseQueue=l,n.lastRenderedState=r}if(t=n.interleaved,t!==null){i=t;do s=i.lane,Qe.lanes|=s,Rs|=s,i=i.next;while(i!==t)}else i===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function bf(t){var e=Nn(),n=e.queue;if(n===null)throw Error(W(311));n.lastRenderedReducer=t;var r=n.dispatch,i=n.pending,s=e.memoizedState;if(i!==null){n.pending=null;var o=i=i.next;do s=t(s,o.action),o=o.next;while(o!==i);Xn(s,e.memoizedState)||(sn=!0),e.memoizedState=s,e.baseQueue===null&&(e.baseState=s),n.lastRenderedState=s}return[s,r]}function TE(){}function CE(t,e){var n=Qe,r=Nn(),i=e(),s=!Xn(r.memoizedState,i);if(s&&(r.memoizedState=i,sn=!0),r=r.queue,sg(AE.bind(null,n,r,t),[t]),r.getSnapshot!==e||s||yt!==null&&yt.memoizedState.tag&1){if(n.flags|=2048,Ql(9,SE.bind(null,n,r,i,e),void 0,null),vt===null)throw Error(W(349));Ps&30||IE(n,e,i)}return i}function IE(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=Qe.updateQueue,e===null?(e={lastEffect:null,stores:null},Qe.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function SE(t,e,n,r){e.value=n,e.getSnapshot=r,xE(e)&&kE(t)}function AE(t,e,n){return n(function(){xE(e)&&kE(t)})}function xE(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!Xn(t,n)}catch{return!0}}function kE(t){var e=jr(t,1);e!==null&&Gn(e,t,1,-1)}function g_(t){var e=rr();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Kl,lastRenderedState:t},e.queue=t,t=t.dispatch=QA.bind(null,Qe,t),[e.memoizedState,t]}function Ql(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},e=Qe.updateQueue,e===null?(e={lastEffect:null,stores:null},Qe.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t)),t}function PE(){return Nn().memoizedState}function Rc(t,e,n,r){var i=rr();Qe.flags|=t,i.memoizedState=Ql(1|e,n,void 0,r===void 0?null:r)}function Kh(t,e,n,r){var i=Nn();r=r===void 0?null:r;var s=void 0;if(ft!==null){var o=ft.memoizedState;if(s=o.destroy,r!==null&&ng(r,o.deps)){i.memoizedState=Ql(e,n,s,r);return}}Qe.flags|=t,i.memoizedState=Ql(1|e,n,s,r)}function y_(t,e){return Rc(8390656,8,t,e)}function sg(t,e){return Kh(2048,8,t,e)}function RE(t,e){return Kh(4,2,t,e)}function OE(t,e){return Kh(4,4,t,e)}function NE(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function LE(t,e,n){return n=n!=null?n.concat([t]):null,Kh(4,4,NE.bind(null,e,t),n)}function og(){}function DE(t,e){var n=Nn();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&ng(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function ME(t,e){var n=Nn();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&ng(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)}function VE(t,e,n){return Ps&21?(Xn(n,e)||(n=z1(),Qe.lanes|=n,Rs|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,sn=!0),t.memoizedState=n)}function GA(t,e){var n=ke;ke=n!==0&&4>n?n:4,t(!0);var r=wf.transition;wf.transition={};try{t(!1),e()}finally{ke=n,wf.transition=r}}function UE(){return Nn().memoizedState}function KA(t,e,n){var r=ki(t);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},$E(t))FE(e,n);else if(n=wE(t,e,n,r),n!==null){var i=Xt();Gn(n,t,r,i),jE(n,e,r)}}function QA(t,e,n){var r=ki(t),i={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if($E(t))FE(e,i);else{var s=t.alternate;if(t.lanes===0&&(s===null||s.lanes===0)&&(s=e.lastRenderedReducer,s!==null))try{var o=e.lastRenderedState,a=s(o,n);if(i.hasEagerState=!0,i.eagerState=a,Xn(a,o)){var l=e.interleaved;l===null?(i.next=i,Ym(e)):(i.next=l.next,l.next=i),e.interleaved=i;return}}catch{}finally{}n=wE(t,e,i,r),n!==null&&(i=Xt(),Gn(n,t,r,i),jE(n,e,r))}}function $E(t){var e=t.alternate;return t===Qe||e!==null&&e===Qe}function FE(t,e){Cl=ch=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function jE(t,e,n){if(n&4194240){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,Vm(t,n)}}var hh={readContext:On,useCallback:Mt,useContext:Mt,useEffect:Mt,useImperativeHandle:Mt,useInsertionEffect:Mt,useLayoutEffect:Mt,useMemo:Mt,useReducer:Mt,useRef:Mt,useState:Mt,useDebugValue:Mt,useDeferredValue:Mt,useTransition:Mt,useMutableSource:Mt,useSyncExternalStore:Mt,useId:Mt,unstable_isNewReconciler:!1},XA={readContext:On,useCallback:function(t,e){return rr().memoizedState=[t,e===void 0?null:e],t},useContext:On,useEffect:y_,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,Rc(4194308,4,NE.bind(null,e,t),n)},useLayoutEffect:function(t,e){return Rc(4194308,4,t,e)},useInsertionEffect:function(t,e){return Rc(4,2,t,e)},useMemo:function(t,e){var n=rr();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=rr();return e=n!==void 0?n(e):e,r.memoizedState=r.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},r.queue=t,t=t.dispatch=KA.bind(null,Qe,t),[r.memoizedState,t]},useRef:function(t){var e=rr();return t={current:t},e.memoizedState=t},useState:g_,useDebugValue:og,useDeferredValue:function(t){return rr().memoizedState=t},useTransition:function(){var t=g_(!1),e=t[0];return t=GA.bind(null,t[1]),rr().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var r=Qe,i=rr();if(He){if(n===void 0)throw Error(W(407));n=n()}else{if(n=e(),vt===null)throw Error(W(349));Ps&30||IE(r,e,n)}i.memoizedState=n;var s={value:n,getSnapshot:e};return i.queue=s,y_(AE.bind(null,r,s,t),[t]),r.flags|=2048,Ql(9,SE.bind(null,r,s,n,e),void 0,null),n},useId:function(){var t=rr(),e=vt.identifierPrefix;if(He){var n=Rr,r=Pr;n=(r&~(1<<32-qn(r)-1)).toString(32)+n,e=":"+e+"R"+n,n=Gl++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=qA++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},YA={readContext:On,useCallback:DE,useContext:On,useEffect:sg,useImperativeHandle:LE,useInsertionEffect:RE,useLayoutEffect:OE,useMemo:ME,useReducer:Ef,useRef:PE,useState:function(){return Ef(Kl)},useDebugValue:og,useDeferredValue:function(t){var e=Nn();return VE(e,ft.memoizedState,t)},useTransition:function(){var t=Ef(Kl)[0],e=Nn().memoizedState;return[t,e]},useMutableSource:TE,useSyncExternalStore:CE,useId:UE,unstable_isNewReconciler:!1},JA={readContext:On,useCallback:DE,useContext:On,useEffect:sg,useImperativeHandle:LE,useInsertionEffect:RE,useLayoutEffect:OE,useMemo:ME,useReducer:bf,useRef:PE,useState:function(){return bf(Kl)},useDebugValue:og,useDeferredValue:function(t){var e=Nn();return ft===null?e.memoizedState=t:VE(e,ft.memoizedState,t)},useTransition:function(){var t=bf(Kl)[0],e=Nn().memoizedState;return[t,e]},useMutableSource:TE,useSyncExternalStore:CE,useId:UE,unstable_isNewReconciler:!1};function Fn(t,e){if(t&&t.defaultProps){e=Xe({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function Ip(t,e,n,r){e=t.memoizedState,n=n(r,e),n=n==null?e:Xe({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var Qh={isMounted:function(t){return(t=t._reactInternals)?Bs(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var r=Xt(),i=ki(t),s=Dr(r,i);s.payload=e,n!=null&&(s.callback=n),e=Ai(t,s,i),e!==null&&(Gn(e,t,i,r),kc(e,t,i))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var r=Xt(),i=ki(t),s=Dr(r,i);s.tag=1,s.payload=e,n!=null&&(s.callback=n),e=Ai(t,s,i),e!==null&&(Gn(e,t,i,r),kc(e,t,i))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=Xt(),r=ki(t),i=Dr(n,r);i.tag=2,e!=null&&(i.callback=e),e=Ai(t,i,r),e!==null&&(Gn(e,t,r,n),kc(e,t,r))}};function v_(t,e,n,r,i,s,o){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(r,s,o):e.prototype&&e.prototype.isPureReactComponent?!jl(n,r)||!jl(i,s):!0}function zE(t,e,n){var r=!1,i=ji,s=e.contextType;return typeof s=="object"&&s!==null?s=On(s):(i=an(e)?xs:zt.current,r=e.contextTypes,s=(r=r!=null)?Wo(t,i):ji),e=new e(n,s),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=Qh,t.stateNode=e,e._reactInternals=t,r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=i,t.__reactInternalMemoizedMaskedChildContext=s),e}function __(t,e,n,r){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&Qh.enqueueReplaceState(e,e.state,null)}function Sp(t,e,n,r){var i=t.stateNode;i.props=n,i.state=t.memoizedState,i.refs={},Jm(t);var s=e.contextType;typeof s=="object"&&s!==null?i.context=On(s):(s=an(e)?xs:zt.current,i.context=Wo(t,s)),i.state=t.memoizedState,s=e.getDerivedStateFromProps,typeof s=="function"&&(Ip(t,e,s,n),i.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof i.getSnapshotBeforeUpdate=="function"||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(e=i.state,typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount(),e!==i.state&&Qh.enqueueReplaceState(i,i.state,null),lh(t,n,i,r),i.state=t.memoizedState),typeof i.componentDidMount=="function"&&(t.flags|=4194308)}function Qo(t,e){try{var n="",r=e;do n+=S2(r),r=r.return;while(r);var i=n}catch(s){i=`
Error generating stack: `+s.message+`
`+s.stack}return{value:t,source:e,stack:i,digest:null}}function Tf(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function Ap(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var ZA=typeof WeakMap=="function"?WeakMap:Map;function BE(t,e,n){n=Dr(-1,n),n.tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){fh||(fh=!0,Vp=r),Ap(t,e)},n}function HE(t,e,n){n=Dr(-1,n),n.tag=3;var r=t.type.getDerivedStateFromError;if(typeof r=="function"){var i=e.value;n.payload=function(){return r(i)},n.callback=function(){Ap(t,e)}}var s=t.stateNode;return s!==null&&typeof s.componentDidCatch=="function"&&(n.callback=function(){Ap(t,e),typeof r!="function"&&(xi===null?xi=new Set([this]):xi.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),n}function w_(t,e,n){var r=t.pingCache;if(r===null){r=t.pingCache=new ZA;var i=new Set;r.set(e,i)}else i=r.get(e),i===void 0&&(i=new Set,r.set(e,i));i.has(n)||(i.add(n),t=fx.bind(null,t,e,n),e.then(t,t))}function E_(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function b_(t,e,n,r,i){return t.mode&1?(t.flags|=65536,t.lanes=i,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=Dr(-1,1),e.tag=2,Ai(n,e,1))),n.lanes|=1),t)}var ex=Kr.ReactCurrentOwner,sn=!1;function Gt(t,e,n,r){e.child=t===null?_E(e,null,n,r):Go(e,t.child,n,r)}function T_(t,e,n,r,i){n=n.render;var s=e.ref;return Uo(e,i),r=rg(t,e,n,r,s,i),n=ig(),t!==null&&!sn?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,zr(t,e,i)):(He&&n&&Wm(e),e.flags|=1,Gt(t,e,r,i),e.child)}function C_(t,e,n,r,i){if(t===null){var s=n.type;return typeof s=="function"&&!pg(s)&&s.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=s,WE(t,e,s,r,i)):(t=Dc(n.type,null,r,e,e.mode,i),t.ref=e.ref,t.return=e,e.child=t)}if(s=t.child,!(t.lanes&i)){var o=s.memoizedProps;if(n=n.compare,n=n!==null?n:jl,n(o,r)&&t.ref===e.ref)return zr(t,e,i)}return e.flags|=1,t=Pi(s,r),t.ref=e.ref,t.return=e,e.child=t}function WE(t,e,n,r,i){if(t!==null){var s=t.memoizedProps;if(jl(s,r)&&t.ref===e.ref)if(sn=!1,e.pendingProps=r=s,(t.lanes&i)!==0)t.flags&131072&&(sn=!0);else return e.lanes=t.lanes,zr(t,e,i)}return xp(t,e,n,r,i)}function qE(t,e,n){var r=e.pendingProps,i=r.children,s=t!==null?t.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},Le(ko,dn),dn|=n;else{if(!(n&1073741824))return t=s!==null?s.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,Le(ko,dn),dn|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=s!==null?s.baseLanes:n,Le(ko,dn),dn|=r}else s!==null?(r=s.baseLanes|n,e.memoizedState=null):r=n,Le(ko,dn),dn|=r;return Gt(t,e,i,n),e.child}function GE(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function xp(t,e,n,r,i){var s=an(n)?xs:zt.current;return s=Wo(e,s),Uo(e,i),n=rg(t,e,n,r,s,i),r=ig(),t!==null&&!sn?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,zr(t,e,i)):(He&&r&&Wm(e),e.flags|=1,Gt(t,e,n,i),e.child)}function I_(t,e,n,r,i){if(an(n)){var s=!0;rh(e)}else s=!1;if(Uo(e,i),e.stateNode===null)Oc(t,e),zE(e,n,r),Sp(e,n,r,i),r=!0;else if(t===null){var o=e.stateNode,a=e.memoizedProps;o.props=a;var l=o.context,c=n.contextType;typeof c=="object"&&c!==null?c=On(c):(c=an(n)?xs:zt.current,c=Wo(e,c));var h=n.getDerivedStateFromProps,f=typeof h=="function"||typeof o.getSnapshotBeforeUpdate=="function";f||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==r||l!==c)&&__(e,o,r,c),fi=!1;var p=e.memoizedState;o.state=p,lh(e,r,o,i),l=e.memoizedState,a!==r||p!==l||on.current||fi?(typeof h=="function"&&(Ip(e,n,h,r),l=e.memoizedState),(a=fi||v_(e,n,a,r,p,l,c))?(f||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=l),o.props=r,o.state=l,o.context=c,r=a):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{o=e.stateNode,EE(t,e),a=e.memoizedProps,c=e.type===e.elementType?a:Fn(e.type,a),o.props=c,f=e.pendingProps,p=o.context,l=n.contextType,typeof l=="object"&&l!==null?l=On(l):(l=an(n)?xs:zt.current,l=Wo(e,l));var w=n.getDerivedStateFromProps;(h=typeof w=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==f||p!==l)&&__(e,o,r,l),fi=!1,p=e.memoizedState,o.state=p,lh(e,r,o,i);var E=e.memoizedState;a!==f||p!==E||on.current||fi?(typeof w=="function"&&(Ip(e,n,w,r),E=e.memoizedState),(c=fi||v_(e,n,c,r,p,E,l)||!1)?(h||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(r,E,l),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(r,E,l)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&p===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&p===t.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=E),o.props=r,o.state=E,o.context=l,r=c):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&p===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&p===t.memoizedState||(e.flags|=1024),r=!1)}return kp(t,e,n,r,s,i)}function kp(t,e,n,r,i,s){GE(t,e);var o=(e.flags&128)!==0;if(!r&&!o)return i&&c_(e,n,!1),zr(t,e,s);r=e.stateNode,ex.current=e;var a=o&&typeof n.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,t!==null&&o?(e.child=Go(e,t.child,null,s),e.child=Go(e,null,a,s)):Gt(t,e,a,s),e.memoizedState=r.state,i&&c_(e,n,!0),e.child}function KE(t){var e=t.stateNode;e.pendingContext?u_(t,e.pendingContext,e.pendingContext!==e.context):e.context&&u_(t,e.context,!1),Zm(t,e.containerInfo)}function S_(t,e,n,r,i){return qo(),Gm(i),e.flags|=256,Gt(t,e,n,r),e.child}var Pp={dehydrated:null,treeContext:null,retryLane:0};function Rp(t){return{baseLanes:t,cachePool:null,transitions:null}}function QE(t,e,n){var r=e.pendingProps,i=Ge.current,s=!1,o=(e.flags&128)!==0,a;if((a=o)||(a=t!==null&&t.memoizedState===null?!1:(i&2)!==0),a?(s=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(i|=1),Le(Ge,i&1),t===null)return Tp(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(o=r.children,t=r.fallback,s?(r=e.mode,s=e.child,o={mode:"hidden",children:o},!(r&1)&&s!==null?(s.childLanes=0,s.pendingProps=o):s=Jh(o,r,0,null),t=Ts(t,r,n,null),s.return=e,t.return=e,s.sibling=t,e.child=s,e.child.memoizedState=Rp(n),e.memoizedState=Pp,t):ag(e,o));if(i=t.memoizedState,i!==null&&(a=i.dehydrated,a!==null))return tx(t,e,o,r,a,i,n);if(s){s=r.fallback,o=e.mode,i=t.child,a=i.sibling;var l={mode:"hidden",children:r.children};return!(o&1)&&e.child!==i?(r=e.child,r.childLanes=0,r.pendingProps=l,e.deletions=null):(r=Pi(i,l),r.subtreeFlags=i.subtreeFlags&14680064),a!==null?s=Pi(a,s):(s=Ts(s,o,n,null),s.flags|=2),s.return=e,r.return=e,r.sibling=s,e.child=r,r=s,s=e.child,o=t.child.memoizedState,o=o===null?Rp(n):{baseLanes:o.baseLanes|n,cachePool:null,transitions:o.transitions},s.memoizedState=o,s.childLanes=t.childLanes&~n,e.memoizedState=Pp,r}return s=t.child,t=s.sibling,r=Pi(s,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=n),r.return=e,r.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=r,e.memoizedState=null,r}function ag(t,e){return e=Jh({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function lc(t,e,n,r){return r!==null&&Gm(r),Go(e,t.child,null,n),t=ag(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function tx(t,e,n,r,i,s,o){if(n)return e.flags&256?(e.flags&=-257,r=Tf(Error(W(422))),lc(t,e,o,r)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(s=r.fallback,i=e.mode,r=Jh({mode:"visible",children:r.children},i,0,null),s=Ts(s,i,o,null),s.flags|=2,r.return=e,s.return=e,r.sibling=s,e.child=r,e.mode&1&&Go(e,t.child,null,o),e.child.memoizedState=Rp(o),e.memoizedState=Pp,s);if(!(e.mode&1))return lc(t,e,o,null);if(i.data==="$!"){if(r=i.nextSibling&&i.nextSibling.dataset,r)var a=r.dgst;return r=a,s=Error(W(419)),r=Tf(s,r,void 0),lc(t,e,o,r)}if(a=(o&t.childLanes)!==0,sn||a){if(r=vt,r!==null){switch(o&-o){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}i=i&(r.suspendedLanes|o)?0:i,i!==0&&i!==s.retryLane&&(s.retryLane=i,jr(t,i),Gn(r,t,i,-1))}return fg(),r=Tf(Error(W(421))),lc(t,e,o,r)}return i.data==="$?"?(e.flags|=128,e.child=t.child,e=px.bind(null,t),i._reactRetry=e,null):(t=s.treeContext,fn=Si(i.nextSibling),pn=e,He=!0,Bn=null,t!==null&&(Tn[Cn++]=Pr,Tn[Cn++]=Rr,Tn[Cn++]=ks,Pr=t.id,Rr=t.overflow,ks=e),e=ag(e,r.children),e.flags|=4096,e)}function A_(t,e,n){t.lanes|=e;var r=t.alternate;r!==null&&(r.lanes|=e),Cp(t.return,e,n)}function Cf(t,e,n,r,i){var s=t.memoizedState;s===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(s.isBackwards=e,s.rendering=null,s.renderingStartTime=0,s.last=r,s.tail=n,s.tailMode=i)}function XE(t,e,n){var r=e.pendingProps,i=r.revealOrder,s=r.tail;if(Gt(t,e,r.children,n),r=Ge.current,r&2)r=r&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&A_(t,n,e);else if(t.tag===19)A_(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(Le(Ge,r),!(e.mode&1))e.memoizedState=null;else switch(i){case"forwards":for(n=e.child,i=null;n!==null;)t=n.alternate,t!==null&&uh(t)===null&&(i=n),n=n.sibling;n=i,n===null?(i=e.child,e.child=null):(i=n.sibling,n.sibling=null),Cf(e,!1,i,n,s);break;case"backwards":for(n=null,i=e.child,e.child=null;i!==null;){if(t=i.alternate,t!==null&&uh(t)===null){e.child=i;break}t=i.sibling,i.sibling=n,n=i,i=t}Cf(e,!0,n,null,s);break;case"together":Cf(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function Oc(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function zr(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),Rs|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(W(153));if(e.child!==null){for(t=e.child,n=Pi(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=Pi(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function nx(t,e,n){switch(e.tag){case 3:KE(e),qo();break;case 5:bE(e);break;case 1:an(e.type)&&rh(e);break;case 4:Zm(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,i=e.memoizedProps.value;Le(oh,r._currentValue),r._currentValue=i;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(Le(Ge,Ge.current&1),e.flags|=128,null):n&e.child.childLanes?QE(t,e,n):(Le(Ge,Ge.current&1),t=zr(t,e,n),t!==null?t.sibling:null);Le(Ge,Ge.current&1);break;case 19:if(r=(n&e.childLanes)!==0,t.flags&128){if(r)return XE(t,e,n);e.flags|=128}if(i=e.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),Le(Ge,Ge.current),r)break;return null;case 22:case 23:return e.lanes=0,qE(t,e,n)}return zr(t,e,n)}var YE,Op,JE,ZE;YE=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};Op=function(){};JE=function(t,e,n,r){var i=t.memoizedProps;if(i!==r){t=e.stateNode,gs(lr.current);var s=null;switch(n){case"input":i=ep(t,i),r=ep(t,r),s=[];break;case"select":i=Xe({},i,{value:void 0}),r=Xe({},r,{value:void 0}),s=[];break;case"textarea":i=rp(t,i),r=rp(t,r),s=[];break;default:typeof i.onClick!="function"&&typeof r.onClick=="function"&&(t.onclick=th)}sp(n,r);var o;n=null;for(c in i)if(!r.hasOwnProperty(c)&&i.hasOwnProperty(c)&&i[c]!=null)if(c==="style"){var a=i[c];for(o in a)a.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else c!=="dangerouslySetInnerHTML"&&c!=="children"&&c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&c!=="autoFocus"&&(Ll.hasOwnProperty(c)?s||(s=[]):(s=s||[]).push(c,null));for(c in r){var l=r[c];if(a=i!=null?i[c]:void 0,r.hasOwnProperty(c)&&l!==a&&(l!=null||a!=null))if(c==="style")if(a){for(o in a)!a.hasOwnProperty(o)||l&&l.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in l)l.hasOwnProperty(o)&&a[o]!==l[o]&&(n||(n={}),n[o]=l[o])}else n||(s||(s=[]),s.push(c,n)),n=l;else c==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,a=a?a.__html:void 0,l!=null&&a!==l&&(s=s||[]).push(c,l)):c==="children"?typeof l!="string"&&typeof l!="number"||(s=s||[]).push(c,""+l):c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&(Ll.hasOwnProperty(c)?(l!=null&&c==="onScroll"&&$e("scroll",t),s||a===l||(s=[])):(s=s||[]).push(c,l))}n&&(s=s||[]).push("style",n);var c=s;(e.updateQueue=c)&&(e.flags|=4)}};ZE=function(t,e,n,r){n!==r&&(e.flags|=4)};function Qa(t,e){if(!He)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:r.sibling=null}}function Vt(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,r=0;if(e)for(var i=t.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags&14680064,r|=i.flags&14680064,i.return=t,i=i.sibling;else for(i=t.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=t,i=i.sibling;return t.subtreeFlags|=r,t.childLanes=n,e}function rx(t,e,n){var r=e.pendingProps;switch(qm(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Vt(e),null;case 1:return an(e.type)&&nh(),Vt(e),null;case 3:return r=e.stateNode,Ko(),je(on),je(zt),tg(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&(oc(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,Bn!==null&&(Fp(Bn),Bn=null))),Op(t,e),Vt(e),null;case 5:eg(e);var i=gs(ql.current);if(n=e.type,t!==null&&e.stateNode!=null)JE(t,e,n,r,i),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error(W(166));return Vt(e),null}if(t=gs(lr.current),oc(e)){r=e.stateNode,n=e.type;var s=e.memoizedProps;switch(r[or]=e,r[Hl]=s,t=(e.mode&1)!==0,n){case"dialog":$e("cancel",r),$e("close",r);break;case"iframe":case"object":case"embed":$e("load",r);break;case"video":case"audio":for(i=0;i<cl.length;i++)$e(cl[i],r);break;case"source":$e("error",r);break;case"img":case"image":case"link":$e("error",r),$e("load",r);break;case"details":$e("toggle",r);break;case"input":Mv(r,s),$e("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!s.multiple},$e("invalid",r);break;case"textarea":Uv(r,s),$e("invalid",r)}sp(n,s),i=null;for(var o in s)if(s.hasOwnProperty(o)){var a=s[o];o==="children"?typeof a=="string"?r.textContent!==a&&(s.suppressHydrationWarning!==!0&&sc(r.textContent,a,t),i=["children",a]):typeof a=="number"&&r.textContent!==""+a&&(s.suppressHydrationWarning!==!0&&sc(r.textContent,a,t),i=["children",""+a]):Ll.hasOwnProperty(o)&&a!=null&&o==="onScroll"&&$e("scroll",r)}switch(n){case"input":Yu(r),Vv(r,s,!0);break;case"textarea":Yu(r),$v(r);break;case"select":case"option":break;default:typeof s.onClick=="function"&&(r.onclick=th)}r=i,e.updateQueue=r,r!==null&&(e.flags|=4)}else{o=i.nodeType===9?i:i.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=A1(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=o.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof r.is=="string"?t=o.createElement(n,{is:r.is}):(t=o.createElement(n),n==="select"&&(o=t,r.multiple?o.multiple=!0:r.size&&(o.size=r.size))):t=o.createElementNS(t,n),t[or]=e,t[Hl]=r,YE(t,e,!1,!1),e.stateNode=t;e:{switch(o=op(n,r),n){case"dialog":$e("cancel",t),$e("close",t),i=r;break;case"iframe":case"object":case"embed":$e("load",t),i=r;break;case"video":case"audio":for(i=0;i<cl.length;i++)$e(cl[i],t);i=r;break;case"source":$e("error",t),i=r;break;case"img":case"image":case"link":$e("error",t),$e("load",t),i=r;break;case"details":$e("toggle",t),i=r;break;case"input":Mv(t,r),i=ep(t,r),$e("invalid",t);break;case"option":i=r;break;case"select":t._wrapperState={wasMultiple:!!r.multiple},i=Xe({},r,{value:void 0}),$e("invalid",t);break;case"textarea":Uv(t,r),i=rp(t,r),$e("invalid",t);break;default:i=r}sp(n,i),a=i;for(s in a)if(a.hasOwnProperty(s)){var l=a[s];s==="style"?P1(t,l):s==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,l!=null&&x1(t,l)):s==="children"?typeof l=="string"?(n!=="textarea"||l!=="")&&Dl(t,l):typeof l=="number"&&Dl(t,""+l):s!=="suppressContentEditableWarning"&&s!=="suppressHydrationWarning"&&s!=="autoFocus"&&(Ll.hasOwnProperty(s)?l!=null&&s==="onScroll"&&$e("scroll",t):l!=null&&Rm(t,s,l,o))}switch(n){case"input":Yu(t),Vv(t,r,!1);break;case"textarea":Yu(t),$v(t);break;case"option":r.value!=null&&t.setAttribute("value",""+Fi(r.value));break;case"select":t.multiple=!!r.multiple,s=r.value,s!=null?Lo(t,!!r.multiple,s,!1):r.defaultValue!=null&&Lo(t,!!r.multiple,r.defaultValue,!0);break;default:typeof i.onClick=="function"&&(t.onclick=th)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return Vt(e),null;case 6:if(t&&e.stateNode!=null)ZE(t,e,t.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(W(166));if(n=gs(ql.current),gs(lr.current),oc(e)){if(r=e.stateNode,n=e.memoizedProps,r[or]=e,(s=r.nodeValue!==n)&&(t=pn,t!==null))switch(t.tag){case 3:sc(r.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&sc(r.nodeValue,n,(t.mode&1)!==0)}s&&(e.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[or]=e,e.stateNode=r}return Vt(e),null;case 13:if(je(Ge),r=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(He&&fn!==null&&e.mode&1&&!(e.flags&128))yE(),qo(),e.flags|=98560,s=!1;else if(s=oc(e),r!==null&&r.dehydrated!==null){if(t===null){if(!s)throw Error(W(318));if(s=e.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(W(317));s[or]=e}else qo(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;Vt(e),s=!1}else Bn!==null&&(Fp(Bn),Bn=null),s=!0;if(!s)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(r=r!==null,r!==(t!==null&&t.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(t===null||Ge.current&1?pt===0&&(pt=3):fg())),e.updateQueue!==null&&(e.flags|=4),Vt(e),null);case 4:return Ko(),Op(t,e),t===null&&zl(e.stateNode.containerInfo),Vt(e),null;case 10:return Xm(e.type._context),Vt(e),null;case 17:return an(e.type)&&nh(),Vt(e),null;case 19:if(je(Ge),s=e.memoizedState,s===null)return Vt(e),null;if(r=(e.flags&128)!==0,o=s.rendering,o===null)if(r)Qa(s,!1);else{if(pt!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(o=uh(t),o!==null){for(e.flags|=128,Qa(s,!1),r=o.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=n,n=e.child;n!==null;)s=n,t=r,s.flags&=14680066,o=s.alternate,o===null?(s.childLanes=0,s.lanes=t,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=o.childLanes,s.lanes=o.lanes,s.child=o.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=o.memoizedProps,s.memoizedState=o.memoizedState,s.updateQueue=o.updateQueue,s.type=o.type,t=o.dependencies,s.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return Le(Ge,Ge.current&1|2),e.child}t=t.sibling}s.tail!==null&&rt()>Xo&&(e.flags|=128,r=!0,Qa(s,!1),e.lanes=4194304)}else{if(!r)if(t=uh(o),t!==null){if(e.flags|=128,r=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),Qa(s,!0),s.tail===null&&s.tailMode==="hidden"&&!o.alternate&&!He)return Vt(e),null}else 2*rt()-s.renderingStartTime>Xo&&n!==1073741824&&(e.flags|=128,r=!0,Qa(s,!1),e.lanes=4194304);s.isBackwards?(o.sibling=e.child,e.child=o):(n=s.last,n!==null?n.sibling=o:e.child=o,s.last=o)}return s.tail!==null?(e=s.tail,s.rendering=e,s.tail=e.sibling,s.renderingStartTime=rt(),e.sibling=null,n=Ge.current,Le(Ge,r?n&1|2:n&1),e):(Vt(e),null);case 22:case 23:return dg(),r=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?dn&1073741824&&(Vt(e),e.subtreeFlags&6&&(e.flags|=8192)):Vt(e),null;case 24:return null;case 25:return null}throw Error(W(156,e.tag))}function ix(t,e){switch(qm(e),e.tag){case 1:return an(e.type)&&nh(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return Ko(),je(on),je(zt),tg(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return eg(e),null;case 13:if(je(Ge),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(W(340));qo()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return je(Ge),null;case 4:return Ko(),null;case 10:return Xm(e.type._context),null;case 22:case 23:return dg(),null;case 24:return null;default:return null}}var uc=!1,Ft=!1,sx=typeof WeakSet=="function"?WeakSet:Set,X=null;function xo(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){Ze(t,e,r)}else n.current=null}function Np(t,e,n){try{n()}catch(r){Ze(t,e,r)}}var x_=!1;function ox(t,e){if(gp=Jc,t=iE(),Hm(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var i=r.anchorOffset,s=r.focusNode;r=r.focusOffset;try{n.nodeType,s.nodeType}catch{n=null;break e}var o=0,a=-1,l=-1,c=0,h=0,f=t,p=null;t:for(;;){for(var w;f!==n||i!==0&&f.nodeType!==3||(a=o+i),f!==s||r!==0&&f.nodeType!==3||(l=o+r),f.nodeType===3&&(o+=f.nodeValue.length),(w=f.firstChild)!==null;)p=f,f=w;for(;;){if(f===t)break t;if(p===n&&++c===i&&(a=o),p===s&&++h===r&&(l=o),(w=f.nextSibling)!==null)break;f=p,p=f.parentNode}f=w}n=a===-1||l===-1?null:{start:a,end:l}}else n=null}n=n||{start:0,end:0}}else n=null;for(yp={focusedElem:t,selectionRange:n},Jc=!1,X=e;X!==null;)if(e=X,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,X=t;else for(;X!==null;){e=X;try{var E=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(E!==null){var S=E.memoizedProps,R=E.memoizedState,T=e.stateNode,_=T.getSnapshotBeforeUpdate(e.elementType===e.type?S:Fn(e.type,S),R);T.__reactInternalSnapshotBeforeUpdate=_}break;case 3:var C=e.stateNode.containerInfo;C.nodeType===1?C.textContent="":C.nodeType===9&&C.documentElement&&C.removeChild(C.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(W(163))}}catch(L){Ze(e,e.return,L)}if(t=e.sibling,t!==null){t.return=e.return,X=t;break}X=e.return}return E=x_,x_=!1,E}function Il(t,e,n){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var i=r=r.next;do{if((i.tag&t)===t){var s=i.destroy;i.destroy=void 0,s!==void 0&&Np(e,n,s)}i=i.next}while(i!==r)}}function Xh(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var r=n.create;n.destroy=r()}n=n.next}while(n!==e)}}function Lp(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function eb(t){var e=t.alternate;e!==null&&(t.alternate=null,eb(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[or],delete e[Hl],delete e[wp],delete e[zA],delete e[BA])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function tb(t){return t.tag===5||t.tag===3||t.tag===4}function k_(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||tb(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function Dp(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=th));else if(r!==4&&(t=t.child,t!==null))for(Dp(t,e,n),t=t.sibling;t!==null;)Dp(t,e,n),t=t.sibling}function Mp(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(r!==4&&(t=t.child,t!==null))for(Mp(t,e,n),t=t.sibling;t!==null;)Mp(t,e,n),t=t.sibling}var At=null,jn=!1;function oi(t,e,n){for(n=n.child;n!==null;)nb(t,e,n),n=n.sibling}function nb(t,e,n){if(ar&&typeof ar.onCommitFiberUnmount=="function")try{ar.onCommitFiberUnmount(zh,n)}catch{}switch(n.tag){case 5:Ft||xo(n,e);case 6:var r=At,i=jn;At=null,oi(t,e,n),At=r,jn=i,At!==null&&(jn?(t=At,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):At.removeChild(n.stateNode));break;case 18:At!==null&&(jn?(t=At,n=n.stateNode,t.nodeType===8?yf(t.parentNode,n):t.nodeType===1&&yf(t,n),$l(t)):yf(At,n.stateNode));break;case 4:r=At,i=jn,At=n.stateNode.containerInfo,jn=!0,oi(t,e,n),At=r,jn=i;break;case 0:case 11:case 14:case 15:if(!Ft&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){i=r=r.next;do{var s=i,o=s.destroy;s=s.tag,o!==void 0&&(s&2||s&4)&&Np(n,e,o),i=i.next}while(i!==r)}oi(t,e,n);break;case 1:if(!Ft&&(xo(n,e),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(a){Ze(n,e,a)}oi(t,e,n);break;case 21:oi(t,e,n);break;case 22:n.mode&1?(Ft=(r=Ft)||n.memoizedState!==null,oi(t,e,n),Ft=r):oi(t,e,n);break;default:oi(t,e,n)}}function P_(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new sx),e.forEach(function(r){var i=mx.bind(null,t,r);n.has(r)||(n.add(r),r.then(i,i))})}}function Un(t,e){var n=e.deletions;if(n!==null)for(var r=0;r<n.length;r++){var i=n[r];try{var s=t,o=e,a=o;e:for(;a!==null;){switch(a.tag){case 5:At=a.stateNode,jn=!1;break e;case 3:At=a.stateNode.containerInfo,jn=!0;break e;case 4:At=a.stateNode.containerInfo,jn=!0;break e}a=a.return}if(At===null)throw Error(W(160));nb(s,o,i),At=null,jn=!1;var l=i.alternate;l!==null&&(l.return=null),i.return=null}catch(c){Ze(i,e,c)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)rb(e,t),e=e.sibling}function rb(t,e){var n=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(Un(e,t),er(t),r&4){try{Il(3,t,t.return),Xh(3,t)}catch(S){Ze(t,t.return,S)}try{Il(5,t,t.return)}catch(S){Ze(t,t.return,S)}}break;case 1:Un(e,t),er(t),r&512&&n!==null&&xo(n,n.return);break;case 5:if(Un(e,t),er(t),r&512&&n!==null&&xo(n,n.return),t.flags&32){var i=t.stateNode;try{Dl(i,"")}catch(S){Ze(t,t.return,S)}}if(r&4&&(i=t.stateNode,i!=null)){var s=t.memoizedProps,o=n!==null?n.memoizedProps:s,a=t.type,l=t.updateQueue;if(t.updateQueue=null,l!==null)try{a==="input"&&s.type==="radio"&&s.name!=null&&I1(i,s),op(a,o);var c=op(a,s);for(o=0;o<l.length;o+=2){var h=l[o],f=l[o+1];h==="style"?P1(i,f):h==="dangerouslySetInnerHTML"?x1(i,f):h==="children"?Dl(i,f):Rm(i,h,f,c)}switch(a){case"input":tp(i,s);break;case"textarea":S1(i,s);break;case"select":var p=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!s.multiple;var w=s.value;w!=null?Lo(i,!!s.multiple,w,!1):p!==!!s.multiple&&(s.defaultValue!=null?Lo(i,!!s.multiple,s.defaultValue,!0):Lo(i,!!s.multiple,s.multiple?[]:"",!1))}i[Hl]=s}catch(S){Ze(t,t.return,S)}}break;case 6:if(Un(e,t),er(t),r&4){if(t.stateNode===null)throw Error(W(162));i=t.stateNode,s=t.memoizedProps;try{i.nodeValue=s}catch(S){Ze(t,t.return,S)}}break;case 3:if(Un(e,t),er(t),r&4&&n!==null&&n.memoizedState.isDehydrated)try{$l(e.containerInfo)}catch(S){Ze(t,t.return,S)}break;case 4:Un(e,t),er(t);break;case 13:Un(e,t),er(t),i=t.child,i.flags&8192&&(s=i.memoizedState!==null,i.stateNode.isHidden=s,!s||i.alternate!==null&&i.alternate.memoizedState!==null||(cg=rt())),r&4&&P_(t);break;case 22:if(h=n!==null&&n.memoizedState!==null,t.mode&1?(Ft=(c=Ft)||h,Un(e,t),Ft=c):Un(e,t),er(t),r&8192){if(c=t.memoizedState!==null,(t.stateNode.isHidden=c)&&!h&&t.mode&1)for(X=t,h=t.child;h!==null;){for(f=X=h;X!==null;){switch(p=X,w=p.child,p.tag){case 0:case 11:case 14:case 15:Il(4,p,p.return);break;case 1:xo(p,p.return);var E=p.stateNode;if(typeof E.componentWillUnmount=="function"){r=p,n=p.return;try{e=r,E.props=e.memoizedProps,E.state=e.memoizedState,E.componentWillUnmount()}catch(S){Ze(r,n,S)}}break;case 5:xo(p,p.return);break;case 22:if(p.memoizedState!==null){O_(f);continue}}w!==null?(w.return=p,X=w):O_(f)}h=h.sibling}e:for(h=null,f=t;;){if(f.tag===5){if(h===null){h=f;try{i=f.stateNode,c?(s=i.style,typeof s.setProperty=="function"?s.setProperty("display","none","important"):s.display="none"):(a=f.stateNode,l=f.memoizedProps.style,o=l!=null&&l.hasOwnProperty("display")?l.display:null,a.style.display=k1("display",o))}catch(S){Ze(t,t.return,S)}}}else if(f.tag===6){if(h===null)try{f.stateNode.nodeValue=c?"":f.memoizedProps}catch(S){Ze(t,t.return,S)}}else if((f.tag!==22&&f.tag!==23||f.memoizedState===null||f===t)&&f.child!==null){f.child.return=f,f=f.child;continue}if(f===t)break e;for(;f.sibling===null;){if(f.return===null||f.return===t)break e;h===f&&(h=null),f=f.return}h===f&&(h=null),f.sibling.return=f.return,f=f.sibling}}break;case 19:Un(e,t),er(t),r&4&&P_(t);break;case 21:break;default:Un(e,t),er(t)}}function er(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(tb(n)){var r=n;break e}n=n.return}throw Error(W(160))}switch(r.tag){case 5:var i=r.stateNode;r.flags&32&&(Dl(i,""),r.flags&=-33);var s=k_(t);Mp(t,s,i);break;case 3:case 4:var o=r.stateNode.containerInfo,a=k_(t);Dp(t,a,o);break;default:throw Error(W(161))}}catch(l){Ze(t,t.return,l)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function ax(t,e,n){X=t,ib(t)}function ib(t,e,n){for(var r=(t.mode&1)!==0;X!==null;){var i=X,s=i.child;if(i.tag===22&&r){var o=i.memoizedState!==null||uc;if(!o){var a=i.alternate,l=a!==null&&a.memoizedState!==null||Ft;a=uc;var c=Ft;if(uc=o,(Ft=l)&&!c)for(X=i;X!==null;)o=X,l=o.child,o.tag===22&&o.memoizedState!==null?N_(i):l!==null?(l.return=o,X=l):N_(i);for(;s!==null;)X=s,ib(s),s=s.sibling;X=i,uc=a,Ft=c}R_(t)}else i.subtreeFlags&8772&&s!==null?(s.return=i,X=s):R_(t)}}function R_(t){for(;X!==null;){var e=X;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:Ft||Xh(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!Ft)if(n===null)r.componentDidMount();else{var i=e.elementType===e.type?n.memoizedProps:Fn(e.type,n.memoizedProps);r.componentDidUpdate(i,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var s=e.updateQueue;s!==null&&m_(e,s,r);break;case 3:var o=e.updateQueue;if(o!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}m_(e,o,n)}break;case 5:var a=e.stateNode;if(n===null&&e.flags&4){n=a;var l=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":l.autoFocus&&n.focus();break;case"img":l.src&&(n.src=l.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var c=e.alternate;if(c!==null){var h=c.memoizedState;if(h!==null){var f=h.dehydrated;f!==null&&$l(f)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(W(163))}Ft||e.flags&512&&Lp(e)}catch(p){Ze(e,e.return,p)}}if(e===t){X=null;break}if(n=e.sibling,n!==null){n.return=e.return,X=n;break}X=e.return}}function O_(t){for(;X!==null;){var e=X;if(e===t){X=null;break}var n=e.sibling;if(n!==null){n.return=e.return,X=n;break}X=e.return}}function N_(t){for(;X!==null;){var e=X;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{Xh(4,e)}catch(l){Ze(e,n,l)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var i=e.return;try{r.componentDidMount()}catch(l){Ze(e,i,l)}}var s=e.return;try{Lp(e)}catch(l){Ze(e,s,l)}break;case 5:var o=e.return;try{Lp(e)}catch(l){Ze(e,o,l)}}}catch(l){Ze(e,e.return,l)}if(e===t){X=null;break}var a=e.sibling;if(a!==null){a.return=e.return,X=a;break}X=e.return}}var lx=Math.ceil,dh=Kr.ReactCurrentDispatcher,lg=Kr.ReactCurrentOwner,Pn=Kr.ReactCurrentBatchConfig,Ce=0,vt=null,ut=null,Pt=0,dn=0,ko=Ki(0),pt=0,Xl=null,Rs=0,Yh=0,ug=0,Sl=null,nn=null,cg=0,Xo=1/0,Ir=null,fh=!1,Vp=null,xi=null,cc=!1,wi=null,ph=0,Al=0,Up=null,Nc=-1,Lc=0;function Xt(){return Ce&6?rt():Nc!==-1?Nc:Nc=rt()}function ki(t){return t.mode&1?Ce&2&&Pt!==0?Pt&-Pt:WA.transition!==null?(Lc===0&&(Lc=z1()),Lc):(t=ke,t!==0||(t=window.event,t=t===void 0?16:Q1(t.type)),t):1}function Gn(t,e,n,r){if(50<Al)throw Al=0,Up=null,Error(W(185));du(t,n,r),(!(Ce&2)||t!==vt)&&(t===vt&&(!(Ce&2)&&(Yh|=n),pt===4&&mi(t,Pt)),ln(t,r),n===1&&Ce===0&&!(e.mode&1)&&(Xo=rt()+500,Gh&&Qi()))}function ln(t,e){var n=t.callbackNode;W2(t,e);var r=Yc(t,t===vt?Pt:0);if(r===0)n!==null&&zv(n),t.callbackNode=null,t.callbackPriority=0;else if(e=r&-r,t.callbackPriority!==e){if(n!=null&&zv(n),e===1)t.tag===0?HA(L_.bind(null,t)):pE(L_.bind(null,t)),FA(function(){!(Ce&6)&&Qi()}),n=null;else{switch(B1(r)){case 1:n=Mm;break;case 4:n=F1;break;case 16:n=Xc;break;case 536870912:n=j1;break;default:n=Xc}n=db(n,sb.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function sb(t,e){if(Nc=-1,Lc=0,Ce&6)throw Error(W(327));var n=t.callbackNode;if($o()&&t.callbackNode!==n)return null;var r=Yc(t,t===vt?Pt:0);if(r===0)return null;if(r&30||r&t.expiredLanes||e)e=mh(t,r);else{e=r;var i=Ce;Ce|=2;var s=ab();(vt!==t||Pt!==e)&&(Ir=null,Xo=rt()+500,bs(t,e));do try{hx();break}catch(a){ob(t,a)}while(!0);Qm(),dh.current=s,Ce=i,ut!==null?e=0:(vt=null,Pt=0,e=pt)}if(e!==0){if(e===2&&(i=hp(t),i!==0&&(r=i,e=$p(t,i))),e===1)throw n=Xl,bs(t,0),mi(t,r),ln(t,rt()),n;if(e===6)mi(t,r);else{if(i=t.current.alternate,!(r&30)&&!ux(i)&&(e=mh(t,r),e===2&&(s=hp(t),s!==0&&(r=s,e=$p(t,s))),e===1))throw n=Xl,bs(t,0),mi(t,r),ln(t,rt()),n;switch(t.finishedWork=i,t.finishedLanes=r,e){case 0:case 1:throw Error(W(345));case 2:ds(t,nn,Ir);break;case 3:if(mi(t,r),(r&130023424)===r&&(e=cg+500-rt(),10<e)){if(Yc(t,0)!==0)break;if(i=t.suspendedLanes,(i&r)!==r){Xt(),t.pingedLanes|=t.suspendedLanes&i;break}t.timeoutHandle=_p(ds.bind(null,t,nn,Ir),e);break}ds(t,nn,Ir);break;case 4:if(mi(t,r),(r&4194240)===r)break;for(e=t.eventTimes,i=-1;0<r;){var o=31-qn(r);s=1<<o,o=e[o],o>i&&(i=o),r&=~s}if(r=i,r=rt()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*lx(r/1960))-r,10<r){t.timeoutHandle=_p(ds.bind(null,t,nn,Ir),r);break}ds(t,nn,Ir);break;case 5:ds(t,nn,Ir);break;default:throw Error(W(329))}}}return ln(t,rt()),t.callbackNode===n?sb.bind(null,t):null}function $p(t,e){var n=Sl;return t.current.memoizedState.isDehydrated&&(bs(t,e).flags|=256),t=mh(t,e),t!==2&&(e=nn,nn=n,e!==null&&Fp(e)),t}function Fp(t){nn===null?nn=t:nn.push.apply(nn,t)}function ux(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var i=n[r],s=i.getSnapshot;i=i.value;try{if(!Xn(s(),i))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function mi(t,e){for(e&=~ug,e&=~Yh,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-qn(e),r=1<<n;t[n]=-1,e&=~r}}function L_(t){if(Ce&6)throw Error(W(327));$o();var e=Yc(t,0);if(!(e&1))return ln(t,rt()),null;var n=mh(t,e);if(t.tag!==0&&n===2){var r=hp(t);r!==0&&(e=r,n=$p(t,r))}if(n===1)throw n=Xl,bs(t,0),mi(t,e),ln(t,rt()),n;if(n===6)throw Error(W(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,ds(t,nn,Ir),ln(t,rt()),null}function hg(t,e){var n=Ce;Ce|=1;try{return t(e)}finally{Ce=n,Ce===0&&(Xo=rt()+500,Gh&&Qi())}}function Os(t){wi!==null&&wi.tag===0&&!(Ce&6)&&$o();var e=Ce;Ce|=1;var n=Pn.transition,r=ke;try{if(Pn.transition=null,ke=1,t)return t()}finally{ke=r,Pn.transition=n,Ce=e,!(Ce&6)&&Qi()}}function dg(){dn=ko.current,je(ko)}function bs(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,$A(n)),ut!==null)for(n=ut.return;n!==null;){var r=n;switch(qm(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&nh();break;case 3:Ko(),je(on),je(zt),tg();break;case 5:eg(r);break;case 4:Ko();break;case 13:je(Ge);break;case 19:je(Ge);break;case 10:Xm(r.type._context);break;case 22:case 23:dg()}n=n.return}if(vt=t,ut=t=Pi(t.current,null),Pt=dn=e,pt=0,Xl=null,ug=Yh=Rs=0,nn=Sl=null,ms!==null){for(e=0;e<ms.length;e++)if(n=ms[e],r=n.interleaved,r!==null){n.interleaved=null;var i=r.next,s=n.pending;if(s!==null){var o=s.next;s.next=i,r.next=o}n.pending=r}ms=null}return t}function ob(t,e){do{var n=ut;try{if(Qm(),Pc.current=hh,ch){for(var r=Qe.memoizedState;r!==null;){var i=r.queue;i!==null&&(i.pending=null),r=r.next}ch=!1}if(Ps=0,yt=ft=Qe=null,Cl=!1,Gl=0,lg.current=null,n===null||n.return===null){pt=1,Xl=e,ut=null;break}e:{var s=t,o=n.return,a=n,l=e;if(e=Pt,a.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){var c=l,h=a,f=h.tag;if(!(h.mode&1)&&(f===0||f===11||f===15)){var p=h.alternate;p?(h.updateQueue=p.updateQueue,h.memoizedState=p.memoizedState,h.lanes=p.lanes):(h.updateQueue=null,h.memoizedState=null)}var w=E_(o);if(w!==null){w.flags&=-257,b_(w,o,a,s,e),w.mode&1&&w_(s,c,e),e=w,l=c;var E=e.updateQueue;if(E===null){var S=new Set;S.add(l),e.updateQueue=S}else E.add(l);break e}else{if(!(e&1)){w_(s,c,e),fg();break e}l=Error(W(426))}}else if(He&&a.mode&1){var R=E_(o);if(R!==null){!(R.flags&65536)&&(R.flags|=256),b_(R,o,a,s,e),Gm(Qo(l,a));break e}}s=l=Qo(l,a),pt!==4&&(pt=2),Sl===null?Sl=[s]:Sl.push(s),s=o;do{switch(s.tag){case 3:s.flags|=65536,e&=-e,s.lanes|=e;var T=BE(s,l,e);p_(s,T);break e;case 1:a=l;var _=s.type,C=s.stateNode;if(!(s.flags&128)&&(typeof _.getDerivedStateFromError=="function"||C!==null&&typeof C.componentDidCatch=="function"&&(xi===null||!xi.has(C)))){s.flags|=65536,e&=-e,s.lanes|=e;var L=HE(s,a,e);p_(s,L);break e}}s=s.return}while(s!==null)}ub(n)}catch(F){e=F,ut===n&&n!==null&&(ut=n=n.return);continue}break}while(!0)}function ab(){var t=dh.current;return dh.current=hh,t===null?hh:t}function fg(){(pt===0||pt===3||pt===2)&&(pt=4),vt===null||!(Rs&268435455)&&!(Yh&268435455)||mi(vt,Pt)}function mh(t,e){var n=Ce;Ce|=2;var r=ab();(vt!==t||Pt!==e)&&(Ir=null,bs(t,e));do try{cx();break}catch(i){ob(t,i)}while(!0);if(Qm(),Ce=n,dh.current=r,ut!==null)throw Error(W(261));return vt=null,Pt=0,pt}function cx(){for(;ut!==null;)lb(ut)}function hx(){for(;ut!==null&&!M2();)lb(ut)}function lb(t){var e=hb(t.alternate,t,dn);t.memoizedProps=t.pendingProps,e===null?ub(t):ut=e,lg.current=null}function ub(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=ix(n,e),n!==null){n.flags&=32767,ut=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{pt=6,ut=null;return}}else if(n=rx(n,e,dn),n!==null){ut=n;return}if(e=e.sibling,e!==null){ut=e;return}ut=e=t}while(e!==null);pt===0&&(pt=5)}function ds(t,e,n){var r=ke,i=Pn.transition;try{Pn.transition=null,ke=1,dx(t,e,n,r)}finally{Pn.transition=i,ke=r}return null}function dx(t,e,n,r){do $o();while(wi!==null);if(Ce&6)throw Error(W(327));n=t.finishedWork;var i=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(W(177));t.callbackNode=null,t.callbackPriority=0;var s=n.lanes|n.childLanes;if(q2(t,s),t===vt&&(ut=vt=null,Pt=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||cc||(cc=!0,db(Xc,function(){return $o(),null})),s=(n.flags&15990)!==0,n.subtreeFlags&15990||s){s=Pn.transition,Pn.transition=null;var o=ke;ke=1;var a=Ce;Ce|=4,lg.current=null,ox(t,n),rb(n,t),OA(yp),Jc=!!gp,yp=gp=null,t.current=n,ax(n),V2(),Ce=a,ke=o,Pn.transition=s}else t.current=n;if(cc&&(cc=!1,wi=t,ph=i),s=t.pendingLanes,s===0&&(xi=null),F2(n.stateNode),ln(t,rt()),e!==null)for(r=t.onRecoverableError,n=0;n<e.length;n++)i=e[n],r(i.value,{componentStack:i.stack,digest:i.digest});if(fh)throw fh=!1,t=Vp,Vp=null,t;return ph&1&&t.tag!==0&&$o(),s=t.pendingLanes,s&1?t===Up?Al++:(Al=0,Up=t):Al=0,Qi(),null}function $o(){if(wi!==null){var t=B1(ph),e=Pn.transition,n=ke;try{if(Pn.transition=null,ke=16>t?16:t,wi===null)var r=!1;else{if(t=wi,wi=null,ph=0,Ce&6)throw Error(W(331));var i=Ce;for(Ce|=4,X=t.current;X!==null;){var s=X,o=s.child;if(X.flags&16){var a=s.deletions;if(a!==null){for(var l=0;l<a.length;l++){var c=a[l];for(X=c;X!==null;){var h=X;switch(h.tag){case 0:case 11:case 15:Il(8,h,s)}var f=h.child;if(f!==null)f.return=h,X=f;else for(;X!==null;){h=X;var p=h.sibling,w=h.return;if(eb(h),h===c){X=null;break}if(p!==null){p.return=w,X=p;break}X=w}}}var E=s.alternate;if(E!==null){var S=E.child;if(S!==null){E.child=null;do{var R=S.sibling;S.sibling=null,S=R}while(S!==null)}}X=s}}if(s.subtreeFlags&2064&&o!==null)o.return=s,X=o;else e:for(;X!==null;){if(s=X,s.flags&2048)switch(s.tag){case 0:case 11:case 15:Il(9,s,s.return)}var T=s.sibling;if(T!==null){T.return=s.return,X=T;break e}X=s.return}}var _=t.current;for(X=_;X!==null;){o=X;var C=o.child;if(o.subtreeFlags&2064&&C!==null)C.return=o,X=C;else e:for(o=_;X!==null;){if(a=X,a.flags&2048)try{switch(a.tag){case 0:case 11:case 15:Xh(9,a)}}catch(F){Ze(a,a.return,F)}if(a===o){X=null;break e}var L=a.sibling;if(L!==null){L.return=a.return,X=L;break e}X=a.return}}if(Ce=i,Qi(),ar&&typeof ar.onPostCommitFiberRoot=="function")try{ar.onPostCommitFiberRoot(zh,t)}catch{}r=!0}return r}finally{ke=n,Pn.transition=e}}return!1}function D_(t,e,n){e=Qo(n,e),e=BE(t,e,1),t=Ai(t,e,1),e=Xt(),t!==null&&(du(t,1,e),ln(t,e))}function Ze(t,e,n){if(t.tag===3)D_(t,t,n);else for(;e!==null;){if(e.tag===3){D_(e,t,n);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(xi===null||!xi.has(r))){t=Qo(n,t),t=HE(e,t,1),e=Ai(e,t,1),t=Xt(),e!==null&&(du(e,1,t),ln(e,t));break}}e=e.return}}function fx(t,e,n){var r=t.pingCache;r!==null&&r.delete(e),e=Xt(),t.pingedLanes|=t.suspendedLanes&n,vt===t&&(Pt&n)===n&&(pt===4||pt===3&&(Pt&130023424)===Pt&&500>rt()-cg?bs(t,0):ug|=n),ln(t,e)}function cb(t,e){e===0&&(t.mode&1?(e=ec,ec<<=1,!(ec&130023424)&&(ec=4194304)):e=1);var n=Xt();t=jr(t,e),t!==null&&(du(t,e,n),ln(t,n))}function px(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),cb(t,n)}function mx(t,e){var n=0;switch(t.tag){case 13:var r=t.stateNode,i=t.memoizedState;i!==null&&(n=i.retryLane);break;case 19:r=t.stateNode;break;default:throw Error(W(314))}r!==null&&r.delete(e),cb(t,n)}var hb;hb=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||on.current)sn=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return sn=!1,nx(t,e,n);sn=!!(t.flags&131072)}else sn=!1,He&&e.flags&1048576&&mE(e,sh,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;Oc(t,e),t=e.pendingProps;var i=Wo(e,zt.current);Uo(e,n),i=rg(null,e,r,t,i,n);var s=ig();return e.flags|=1,typeof i=="object"&&i!==null&&typeof i.render=="function"&&i.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,an(r)?(s=!0,rh(e)):s=!1,e.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,Jm(e),i.updater=Qh,e.stateNode=i,i._reactInternals=e,Sp(e,r,t,n),e=kp(null,e,r,!0,s,n)):(e.tag=0,He&&s&&Wm(e),Gt(null,e,i,n),e=e.child),e;case 16:r=e.elementType;e:{switch(Oc(t,e),t=e.pendingProps,i=r._init,r=i(r._payload),e.type=r,i=e.tag=yx(r),t=Fn(r,t),i){case 0:e=xp(null,e,r,t,n);break e;case 1:e=I_(null,e,r,t,n);break e;case 11:e=T_(null,e,r,t,n);break e;case 14:e=C_(null,e,r,Fn(r.type,t),n);break e}throw Error(W(306,r,""))}return e;case 0:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Fn(r,i),xp(t,e,r,i,n);case 1:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Fn(r,i),I_(t,e,r,i,n);case 3:e:{if(KE(e),t===null)throw Error(W(387));r=e.pendingProps,s=e.memoizedState,i=s.element,EE(t,e),lh(e,r,null,n);var o=e.memoizedState;if(r=o.element,s.isDehydrated)if(s={element:r,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=s,e.memoizedState=s,e.flags&256){i=Qo(Error(W(423)),e),e=S_(t,e,r,n,i);break e}else if(r!==i){i=Qo(Error(W(424)),e),e=S_(t,e,r,n,i);break e}else for(fn=Si(e.stateNode.containerInfo.firstChild),pn=e,He=!0,Bn=null,n=_E(e,null,r,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(qo(),r===i){e=zr(t,e,n);break e}Gt(t,e,r,n)}e=e.child}return e;case 5:return bE(e),t===null&&Tp(e),r=e.type,i=e.pendingProps,s=t!==null?t.memoizedProps:null,o=i.children,vp(r,i)?o=null:s!==null&&vp(r,s)&&(e.flags|=32),GE(t,e),Gt(t,e,o,n),e.child;case 6:return t===null&&Tp(e),null;case 13:return QE(t,e,n);case 4:return Zm(e,e.stateNode.containerInfo),r=e.pendingProps,t===null?e.child=Go(e,null,r,n):Gt(t,e,r,n),e.child;case 11:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Fn(r,i),T_(t,e,r,i,n);case 7:return Gt(t,e,e.pendingProps,n),e.child;case 8:return Gt(t,e,e.pendingProps.children,n),e.child;case 12:return Gt(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(r=e.type._context,i=e.pendingProps,s=e.memoizedProps,o=i.value,Le(oh,r._currentValue),r._currentValue=o,s!==null)if(Xn(s.value,o)){if(s.children===i.children&&!on.current){e=zr(t,e,n);break e}}else for(s=e.child,s!==null&&(s.return=e);s!==null;){var a=s.dependencies;if(a!==null){o=s.child;for(var l=a.firstContext;l!==null;){if(l.context===r){if(s.tag===1){l=Dr(-1,n&-n),l.tag=2;var c=s.updateQueue;if(c!==null){c=c.shared;var h=c.pending;h===null?l.next=l:(l.next=h.next,h.next=l),c.pending=l}}s.lanes|=n,l=s.alternate,l!==null&&(l.lanes|=n),Cp(s.return,n,e),a.lanes|=n;break}l=l.next}}else if(s.tag===10)o=s.type===e.type?null:s.child;else if(s.tag===18){if(o=s.return,o===null)throw Error(W(341));o.lanes|=n,a=o.alternate,a!==null&&(a.lanes|=n),Cp(o,n,e),o=s.sibling}else o=s.child;if(o!==null)o.return=s;else for(o=s;o!==null;){if(o===e){o=null;break}if(s=o.sibling,s!==null){s.return=o.return,o=s;break}o=o.return}s=o}Gt(t,e,i.children,n),e=e.child}return e;case 9:return i=e.type,r=e.pendingProps.children,Uo(e,n),i=On(i),r=r(i),e.flags|=1,Gt(t,e,r,n),e.child;case 14:return r=e.type,i=Fn(r,e.pendingProps),i=Fn(r.type,i),C_(t,e,r,i,n);case 15:return WE(t,e,e.type,e.pendingProps,n);case 17:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Fn(r,i),Oc(t,e),e.tag=1,an(r)?(t=!0,rh(e)):t=!1,Uo(e,n),zE(e,r,i),Sp(e,r,i,n),kp(null,e,r,!0,t,n);case 19:return XE(t,e,n);case 22:return qE(t,e,n)}throw Error(W(156,e.tag))};function db(t,e){return $1(t,e)}function gx(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function kn(t,e,n,r){return new gx(t,e,n,r)}function pg(t){return t=t.prototype,!(!t||!t.isReactComponent)}function yx(t){if(typeof t=="function")return pg(t)?1:0;if(t!=null){if(t=t.$$typeof,t===Nm)return 11;if(t===Lm)return 14}return 2}function Pi(t,e){var n=t.alternate;return n===null?(n=kn(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function Dc(t,e,n,r,i,s){var o=2;if(r=t,typeof t=="function")pg(t)&&(o=1);else if(typeof t=="string")o=5;else e:switch(t){case _o:return Ts(n.children,i,s,e);case Om:o=8,i|=8;break;case Xf:return t=kn(12,n,e,i|2),t.elementType=Xf,t.lanes=s,t;case Yf:return t=kn(13,n,e,i),t.elementType=Yf,t.lanes=s,t;case Jf:return t=kn(19,n,e,i),t.elementType=Jf,t.lanes=s,t;case b1:return Jh(n,i,s,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case w1:o=10;break e;case E1:o=9;break e;case Nm:o=11;break e;case Lm:o=14;break e;case di:o=16,r=null;break e}throw Error(W(130,t==null?t:typeof t,""))}return e=kn(o,n,e,i),e.elementType=t,e.type=r,e.lanes=s,e}function Ts(t,e,n,r){return t=kn(7,t,r,e),t.lanes=n,t}function Jh(t,e,n,r){return t=kn(22,t,r,e),t.elementType=b1,t.lanes=n,t.stateNode={isHidden:!1},t}function If(t,e,n){return t=kn(6,t,null,e),t.lanes=n,t}function Sf(t,e,n){return e=kn(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function vx(t,e,n,r,i){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=of(0),this.expirationTimes=of(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=of(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function mg(t,e,n,r,i,s,o,a,l){return t=new vx(t,e,n,a,l),e===1?(e=1,s===!0&&(e|=8)):e=0,s=kn(3,null,null,e),t.current=s,s.stateNode=t,s.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Jm(s),t}function _x(t,e,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:vo,key:r==null?null:""+r,children:t,containerInfo:e,implementation:n}}function fb(t){if(!t)return ji;t=t._reactInternals;e:{if(Bs(t)!==t||t.tag!==1)throw Error(W(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(an(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(W(171))}if(t.tag===1){var n=t.type;if(an(n))return fE(t,n,e)}return e}function pb(t,e,n,r,i,s,o,a,l){return t=mg(n,r,!0,t,i,s,o,a,l),t.context=fb(null),n=t.current,r=Xt(),i=ki(n),s=Dr(r,i),s.callback=e??null,Ai(n,s,i),t.current.lanes=i,du(t,i,r),ln(t,r),t}function Zh(t,e,n,r){var i=e.current,s=Xt(),o=ki(i);return n=fb(n),e.context===null?e.context=n:e.pendingContext=n,e=Dr(s,o),e.payload={element:t},r=r===void 0?null:r,r!==null&&(e.callback=r),t=Ai(i,e,o),t!==null&&(Gn(t,i,o,s),kc(t,i,o)),o}function gh(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function M_(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function gg(t,e){M_(t,e),(t=t.alternate)&&M_(t,e)}function wx(){return null}var mb=typeof reportError=="function"?reportError:function(t){console.error(t)};function yg(t){this._internalRoot=t}ed.prototype.render=yg.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(W(409));Zh(t,e,null,null)};ed.prototype.unmount=yg.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;Os(function(){Zh(null,t,null,null)}),e[Fr]=null}};function ed(t){this._internalRoot=t}ed.prototype.unstable_scheduleHydration=function(t){if(t){var e=q1();t={blockedOn:null,target:t,priority:e};for(var n=0;n<pi.length&&e!==0&&e<pi[n].priority;n++);pi.splice(n,0,t),n===0&&K1(t)}};function vg(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function td(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function V_(){}function Ex(t,e,n,r,i){if(i){if(typeof r=="function"){var s=r;r=function(){var c=gh(o);s.call(c)}}var o=pb(e,r,t,0,null,!1,!1,"",V_);return t._reactRootContainer=o,t[Fr]=o.current,zl(t.nodeType===8?t.parentNode:t),Os(),o}for(;i=t.lastChild;)t.removeChild(i);if(typeof r=="function"){var a=r;r=function(){var c=gh(l);a.call(c)}}var l=mg(t,0,!1,null,null,!1,!1,"",V_);return t._reactRootContainer=l,t[Fr]=l.current,zl(t.nodeType===8?t.parentNode:t),Os(function(){Zh(e,l,n,r)}),l}function nd(t,e,n,r,i){var s=n._reactRootContainer;if(s){var o=s;if(typeof i=="function"){var a=i;i=function(){var l=gh(o);a.call(l)}}Zh(e,o,t,i)}else o=Ex(n,e,t,i,r);return gh(o)}H1=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=ul(e.pendingLanes);n!==0&&(Vm(e,n|1),ln(e,rt()),!(Ce&6)&&(Xo=rt()+500,Qi()))}break;case 13:Os(function(){var r=jr(t,1);if(r!==null){var i=Xt();Gn(r,t,1,i)}}),gg(t,1)}};Um=function(t){if(t.tag===13){var e=jr(t,134217728);if(e!==null){var n=Xt();Gn(e,t,134217728,n)}gg(t,134217728)}};W1=function(t){if(t.tag===13){var e=ki(t),n=jr(t,e);if(n!==null){var r=Xt();Gn(n,t,e,r)}gg(t,e)}};q1=function(){return ke};G1=function(t,e){var n=ke;try{return ke=t,e()}finally{ke=n}};lp=function(t,e,n){switch(e){case"input":if(tp(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var i=qh(r);if(!i)throw Error(W(90));C1(r),tp(r,i)}}}break;case"textarea":S1(t,n);break;case"select":e=n.value,e!=null&&Lo(t,!!n.multiple,e,!1)}};N1=hg;L1=Os;var bx={usingClientEntryPoint:!1,Events:[pu,To,qh,R1,O1,hg]},Xa={findFiberByHostInstance:ps,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},Tx={bundleType:Xa.bundleType,version:Xa.version,rendererPackageName:Xa.rendererPackageName,rendererConfig:Xa.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Kr.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=V1(t),t===null?null:t.stateNode},findFiberByHostInstance:Xa.findFiberByHostInstance||wx,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var hc=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!hc.isDisabled&&hc.supportsFiber)try{zh=hc.inject(Tx),ar=hc}catch{}}yn.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=bx;yn.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!vg(e))throw Error(W(200));return _x(t,e,null,n)};yn.createRoot=function(t,e){if(!vg(t))throw Error(W(299));var n=!1,r="",i=mb;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(i=e.onRecoverableError)),e=mg(t,1,!1,null,null,n,!1,r,i),t[Fr]=e.current,zl(t.nodeType===8?t.parentNode:t),new yg(e)};yn.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(W(188)):(t=Object.keys(t).join(","),Error(W(268,t)));return t=V1(e),t=t===null?null:t.stateNode,t};yn.flushSync=function(t){return Os(t)};yn.hydrate=function(t,e,n){if(!td(e))throw Error(W(200));return nd(null,t,e,!0,n)};yn.hydrateRoot=function(t,e,n){if(!vg(t))throw Error(W(405));var r=n!=null&&n.hydratedSources||null,i=!1,s="",o=mb;if(n!=null&&(n.unstable_strictMode===!0&&(i=!0),n.identifierPrefix!==void 0&&(s=n.identifierPrefix),n.onRecoverableError!==void 0&&(o=n.onRecoverableError)),e=pb(e,null,t,1,n??null,i,!1,s,o),t[Fr]=e.current,zl(t),r)for(t=0;t<r.length;t++)n=r[t],i=n._getVersion,i=i(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,i]:e.mutableSourceEagerHydrationData.push(n,i);return new ed(e)};yn.render=function(t,e,n){if(!td(e))throw Error(W(200));return nd(null,t,e,!1,n)};yn.unmountComponentAtNode=function(t){if(!td(t))throw Error(W(40));return t._reactRootContainer?(Os(function(){nd(null,null,t,!1,function(){t._reactRootContainer=null,t[Fr]=null})}),!0):!1};yn.unstable_batchedUpdates=hg;yn.unstable_renderSubtreeIntoContainer=function(t,e,n,r){if(!td(n))throw Error(W(200));if(t==null||t._reactInternals===void 0)throw Error(W(38));return nd(t,e,n,!1,r)};yn.version="18.3.1-next-f1338f8080-20240426";function gb(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(gb)}catch(t){console.error(t)}}gb(),g1.exports=yn;var _g=g1.exports;const Cx=i1(_g),Ix=r1({__proto__:null,default:Cx},[_g]);var U_=_g;Kf.createRoot=U_.createRoot,Kf.hydrateRoot=U_.hydrateRoot;/**
 * @remix-run/router v1.16.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function qe(){return qe=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},qe.apply(this,arguments)}var at;(function(t){t.Pop="POP",t.Push="PUSH",t.Replace="REPLACE"})(at||(at={}));const $_="popstate";function Sx(t){t===void 0&&(t={});function e(r,i){let{pathname:s,search:o,hash:a}=r.location;return Yl("",{pathname:s,search:o,hash:a},i.state&&i.state.usr||null,i.state&&i.state.key||"default")}function n(r,i){return typeof i=="string"?i:Ns(i)}return xx(e,n,null,t)}function me(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function Yo(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function Ax(){return Math.random().toString(36).substr(2,8)}function F_(t,e){return{usr:t.state,key:t.key,idx:e}}function Yl(t,e,n,r){return n===void 0&&(n=null),qe({pathname:typeof t=="string"?t:t.pathname,search:"",hash:""},typeof e=="string"?Xi(e):e,{state:n,key:e&&e.key||r||Ax()})}function Ns(t){let{pathname:e="/",search:n="",hash:r=""}=t;return n&&n!=="?"&&(e+=n.charAt(0)==="?"?n:"?"+n),r&&r!=="#"&&(e+=r.charAt(0)==="#"?r:"#"+r),e}function Xi(t){let e={};if(t){let n=t.indexOf("#");n>=0&&(e.hash=t.substr(n),t=t.substr(0,n));let r=t.indexOf("?");r>=0&&(e.search=t.substr(r),t=t.substr(0,r)),t&&(e.pathname=t)}return e}function xx(t,e,n,r){r===void 0&&(r={});let{window:i=document.defaultView,v5Compat:s=!1}=r,o=i.history,a=at.Pop,l=null,c=h();c==null&&(c=0,o.replaceState(qe({},o.state,{idx:c}),""));function h(){return(o.state||{idx:null}).idx}function f(){a=at.Pop;let R=h(),T=R==null?null:R-c;c=R,l&&l({action:a,location:S.location,delta:T})}function p(R,T){a=at.Push;let _=Yl(S.location,R,T);c=h()+1;let C=F_(_,c),L=S.createHref(_);try{o.pushState(C,"",L)}catch(F){if(F instanceof DOMException&&F.name==="DataCloneError")throw F;i.location.assign(L)}s&&l&&l({action:a,location:S.location,delta:1})}function w(R,T){a=at.Replace;let _=Yl(S.location,R,T);c=h();let C=F_(_,c),L=S.createHref(_);o.replaceState(C,"",L),s&&l&&l({action:a,location:S.location,delta:0})}function E(R){let T=i.location.origin!=="null"?i.location.origin:i.location.href,_=typeof R=="string"?R:Ns(R);return _=_.replace(/ $/,"%20"),me(T,"No window.location.(origin|href) available to create URL for href: "+_),new URL(_,T)}let S={get action(){return a},get location(){return t(i,o)},listen(R){if(l)throw new Error("A history only accepts one active listener");return i.addEventListener($_,f),l=R,()=>{i.removeEventListener($_,f),l=null}},createHref(R){return e(i,R)},createURL:E,encodeLocation(R){let T=E(R);return{pathname:T.pathname,search:T.search,hash:T.hash}},push:p,replace:w,go(R){return o.go(R)}};return S}var Be;(function(t){t.data="data",t.deferred="deferred",t.redirect="redirect",t.error="error"})(Be||(Be={}));const kx=new Set(["lazy","caseSensitive","path","id","index","children"]);function Px(t){return t.index===!0}function jp(t,e,n,r){return n===void 0&&(n=[]),r===void 0&&(r={}),t.map((i,s)=>{let o=[...n,s],a=typeof i.id=="string"?i.id:o.join("-");if(me(i.index!==!0||!i.children,"Cannot specify children on an index route"),me(!r[a],'Found a route id collision on id "'+a+`".  Route id's must be globally unique within Data Router usages`),Px(i)){let l=qe({},i,e(i),{id:a});return r[a]=l,l}else{let l=qe({},i,e(i),{id:a,children:void 0});return r[a]=l,i.children&&(l.children=jp(i.children,e,o,r)),l}})}function Po(t,e,n){n===void 0&&(n="/");let r=typeof e=="string"?Xi(e):e,i=pa(r.pathname||"/",n);if(i==null)return null;let s=yb(t);Ox(s);let o=null;for(let a=0;o==null&&a<s.length;++a){let l=Hx(i);o=jx(s[a],l)}return o}function Rx(t,e){let{route:n,pathname:r,params:i}=t;return{id:n.id,pathname:r,params:i,data:e[n.id],handle:n.handle}}function yb(t,e,n,r){e===void 0&&(e=[]),n===void 0&&(n=[]),r===void 0&&(r="");let i=(s,o,a)=>{let l={relativePath:a===void 0?s.path||"":a,caseSensitive:s.caseSensitive===!0,childrenIndex:o,route:s};l.relativePath.startsWith("/")&&(me(l.relativePath.startsWith(r),'Absolute route path "'+l.relativePath+'" nested under path '+('"'+r+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),l.relativePath=l.relativePath.slice(r.length));let c=Mr([r,l.relativePath]),h=n.concat(l);s.children&&s.children.length>0&&(me(s.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+c+'".')),yb(s.children,e,h,c)),!(s.path==null&&!s.index)&&e.push({path:c,score:$x(c,s.index),routesMeta:h})};return t.forEach((s,o)=>{var a;if(s.path===""||!((a=s.path)!=null&&a.includes("?")))i(s,o);else for(let l of vb(s.path))i(s,o,l)}),e}function vb(t){let e=t.split("/");if(e.length===0)return[];let[n,...r]=e,i=n.endsWith("?"),s=n.replace(/\?$/,"");if(r.length===0)return i?[s,""]:[s];let o=vb(r.join("/")),a=[];return a.push(...o.map(l=>l===""?s:[s,l].join("/"))),i&&a.push(...o),a.map(l=>t.startsWith("/")&&l===""?"/":l)}function Ox(t){t.sort((e,n)=>e.score!==n.score?n.score-e.score:Fx(e.routesMeta.map(r=>r.childrenIndex),n.routesMeta.map(r=>r.childrenIndex)))}const Nx=/^:[\w-]+$/,Lx=3,Dx=2,Mx=1,Vx=10,Ux=-2,j_=t=>t==="*";function $x(t,e){let n=t.split("/"),r=n.length;return n.some(j_)&&(r+=Ux),e&&(r+=Dx),n.filter(i=>!j_(i)).reduce((i,s)=>i+(Nx.test(s)?Lx:s===""?Mx:Vx),r)}function Fx(t,e){return t.length===e.length&&t.slice(0,-1).every((r,i)=>r===e[i])?t[t.length-1]-e[e.length-1]:0}function jx(t,e){let{routesMeta:n}=t,r={},i="/",s=[];for(let o=0;o<n.length;++o){let a=n[o],l=o===n.length-1,c=i==="/"?e:e.slice(i.length)||"/",h=zx({path:a.relativePath,caseSensitive:a.caseSensitive,end:l},c);if(!h)return null;Object.assign(r,h.params);let f=a.route;s.push({params:r,pathname:Mr([i,h.pathname]),pathnameBase:Gx(Mr([i,h.pathnameBase])),route:f}),h.pathnameBase!=="/"&&(i=Mr([i,h.pathnameBase]))}return s}function zx(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[n,r]=Bx(t.path,t.caseSensitive,t.end),i=e.match(n);if(!i)return null;let s=i[0],o=s.replace(/(.)\/+$/,"$1"),a=i.slice(1);return{params:r.reduce((c,h,f)=>{let{paramName:p,isOptional:w}=h;if(p==="*"){let S=a[f]||"";o=s.slice(0,s.length-S.length).replace(/(.)\/+$/,"$1")}const E=a[f];return w&&!E?c[p]=void 0:c[p]=(E||"").replace(/%2F/g,"/"),c},{}),pathname:s,pathnameBase:o,pattern:t}}function Bx(t,e,n){e===void 0&&(e=!1),n===void 0&&(n=!0),Yo(t==="*"||!t.endsWith("*")||t.endsWith("/*"),'Route path "'+t+'" will be treated as if it were '+('"'+t.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+t.replace(/\*$/,"/*")+'".'));let r=[],i="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(o,a,l)=>(r.push({paramName:a,isOptional:l!=null}),l?"/?([^\\/]+)?":"/([^\\/]+)"));return t.endsWith("*")?(r.push({paramName:"*"}),i+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?i+="\\/*$":t!==""&&t!=="/"&&(i+="(?:(?=\\/|$))"),[new RegExp(i,e?void 0:"i"),r]}function Hx(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return Yo(!1,'The URL path "'+t+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),t}}function pa(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,r=t.charAt(n);return r&&r!=="/"?null:t.slice(n)||"/"}function Wx(t,e){e===void 0&&(e="/");let{pathname:n,search:r="",hash:i=""}=typeof t=="string"?Xi(t):t;return{pathname:n?n.startsWith("/")?n:qx(n,e):e,search:Kx(r),hash:Qx(i)}}function qx(t,e){let n=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(i=>{i===".."?n.length>1&&n.pop():i!=="."&&n.push(i)}),n.length>1?n.join("/"):"/"}function Af(t,e,n,r){return"Cannot include a '"+t+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(r)+"].  Please separate it out to the ")+("`to."+n+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function _b(t){return t.filter((e,n)=>n===0||e.route.path&&e.route.path.length>0)}function rd(t,e){let n=_b(t);return e?n.map((r,i)=>i===t.length-1?r.pathname:r.pathnameBase):n.map(r=>r.pathnameBase)}function id(t,e,n,r){r===void 0&&(r=!1);let i;typeof t=="string"?i=Xi(t):(i=qe({},t),me(!i.pathname||!i.pathname.includes("?"),Af("?","pathname","search",i)),me(!i.pathname||!i.pathname.includes("#"),Af("#","pathname","hash",i)),me(!i.search||!i.search.includes("#"),Af("#","search","hash",i)));let s=t===""||i.pathname==="",o=s?"/":i.pathname,a;if(o==null)a=n;else{let f=e.length-1;if(!r&&o.startsWith("..")){let p=o.split("/");for(;p[0]==="..";)p.shift(),f-=1;i.pathname=p.join("/")}a=f>=0?e[f]:"/"}let l=Wx(i,a),c=o&&o!=="/"&&o.endsWith("/"),h=(s||o===".")&&n.endsWith("/");return!l.pathname.endsWith("/")&&(c||h)&&(l.pathname+="/"),l}const Mr=t=>t.join("/").replace(/\/\/+/g,"/"),Gx=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),Kx=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,Qx=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;class wg{constructor(e,n,r,i){i===void 0&&(i=!1),this.status=e,this.statusText=n||"",this.internal=i,r instanceof Error?(this.data=r.toString(),this.error=r):this.data=r}}function Eg(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}const wb=["post","put","patch","delete"],Xx=new Set(wb),Yx=["get",...wb],Jx=new Set(Yx),Zx=new Set([301,302,303,307,308]),ek=new Set([307,308]),xf={state:"idle",location:void 0,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0},tk={state:"idle",data:void 0,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0},Ya={state:"unblocked",proceed:void 0,reset:void 0,location:void 0},bg=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,nk=t=>({hasErrorBoundary:!!t.hasErrorBoundary}),Eb="remix-router-transitions";function rk(t){const e=t.window?t.window:typeof window<"u"?window:void 0,n=typeof e<"u"&&typeof e.document<"u"&&typeof e.document.createElement<"u",r=!n;me(t.routes.length>0,"You must provide a non-empty routes array to createRouter");let i;if(t.mapRouteProperties)i=t.mapRouteProperties;else if(t.detectErrorBoundary){let O=t.detectErrorBoundary;i=M=>({hasErrorBoundary:O(M)})}else i=nk;let s={},o=jp(t.routes,i,void 0,s),a,l=t.basename||"/",c=t.unstable_dataStrategy||ak,h=qe({v7_fetcherPersist:!1,v7_normalizeFormMethod:!1,v7_partialHydration:!1,v7_prependBasename:!1,v7_relativeSplatPath:!1,unstable_skipActionErrorRevalidation:!1},t.future),f=null,p=new Set,w=null,E=null,S=null,R=t.hydrationData!=null,T=Po(o,t.history.location,l),_=null;if(T==null){let O=bn(404,{pathname:t.history.location.pathname}),{matches:M,route:$}=Y_(o);T=M,_={[$.id]:O}}let C,L=T.some(O=>O.route.lazy),F=T.some(O=>O.route.loader);if(L)C=!1;else if(!F)C=!0;else if(h.v7_partialHydration){let O=t.hydrationData?t.hydrationData.loaderData:null,M=t.hydrationData?t.hydrationData.errors:null,$=q=>q.route.loader?typeof q.route.loader=="function"&&q.route.loader.hydrate===!0?!1:O&&O[q.route.id]!==void 0||M&&M[q.route.id]!==void 0:!0;if(M){let q=T.findIndex(Q=>M[Q.route.id]!==void 0);C=T.slice(0,q+1).every($)}else C=T.every($)}else C=t.hydrationData!=null;let z,g={historyAction:t.history.action,location:t.history.location,matches:T,initialized:C,navigation:xf,restoreScrollPosition:t.hydrationData!=null?!1:null,preventScrollReset:!1,revalidation:"idle",loaderData:t.hydrationData&&t.hydrationData.loaderData||{},actionData:t.hydrationData&&t.hydrationData.actionData||null,errors:t.hydrationData&&t.hydrationData.errors||_,fetchers:new Map,blockers:new Map},y=at.Pop,b=!1,I,k=!1,P=new Map,A=null,Ie=!1,it=!1,Ht=[],_t=[],H=new Map,ee=0,re=-1,_e=new Map,he=new Set,Pe=new Map,Wt=new Map,ht=new Set,wt=new Map,Et=new Map,xa=!1;function Bd(){if(f=t.history.listen(O=>{let{action:M,location:$,delta:q}=O;if(xa){xa=!1;return}Yo(Et.size===0||q!=null,"You are trying to use a blocker on a POP navigation to a location that was not created by @remix-run/router. This will fail silently in production. This can happen if you are navigating outside the router via `window.history.pushState`/`window.location.hash` instead of using router navigation APIs.  This can also happen if you are using createHashRouter and the user manually changes the URL.");let Q=to({currentLocation:g.location,nextLocation:$,historyAction:M});if(Q&&q!=null){xa=!0,t.history.go(q*-1),eo(Q,{state:"blocked",location:$,proceed(){eo(Q,{state:"proceeding",proceed:void 0,reset:void 0,location:$}),t.history.go(q)},reset(){let Z=new Map(g.blockers);Z.set(Q,Ya),bt({blockers:Z})}});return}return Jn(M,$)}),n){_k(e,P);let O=()=>wk(e,P);e.addEventListener("pagehide",O),A=()=>e.removeEventListener("pagehide",O)}return g.initialized||Jn(at.Pop,g.location,{initialHydration:!0}),z}function Qs(){f&&f(),A&&A(),p.clear(),I&&I.abort(),g.fetchers.forEach((O,M)=>ss(M)),g.blockers.forEach((O,M)=>Vu(M))}function Xs(O){return p.add(O),()=>p.delete(O)}function bt(O,M){M===void 0&&(M={}),g=qe({},g,O);let $=[],q=[];h.v7_fetcherPersist&&g.fetchers.forEach((Q,Z)=>{Q.state==="idle"&&(ht.has(Z)?q.push(Z):$.push(Z))}),[...p].forEach(Q=>Q(g,{deletedFetchers:q,unstable_viewTransitionOpts:M.viewTransitionOpts,unstable_flushSync:M.flushSync===!0})),h.v7_fetcherPersist&&($.forEach(Q=>g.fetchers.delete(Q)),q.forEach(Q=>ss(Q)))}function pr(O,M,$){var q,Q;let{flushSync:Z}=$===void 0?{}:$,te=g.actionData!=null&&g.navigation.formMethod!=null&&zn(g.navigation.formMethod)&&g.navigation.state==="loading"&&((q=O.state)==null?void 0:q._isRedirect)!==!0,K;M.actionData?Object.keys(M.actionData).length>0?K=M.actionData:K=null:te?K=g.actionData:K=null;let oe=M.loaderData?Q_(g.loaderData,M.loaderData,M.matches||[],M.errors):g.loaderData,ae=g.blockers;ae.size>0&&(ae=new Map(ae),ae.forEach((ie,Ne)=>ae.set(Ne,Ya)));let dt=b===!0||g.navigation.formMethod!=null&&zn(g.navigation.formMethod)&&((Q=O.state)==null?void 0:Q._isRedirect)!==!0;a&&(o=a,a=void 0),Ie||y===at.Pop||(y===at.Push?t.history.push(O,O.state):y===at.Replace&&t.history.replace(O,O.state));let ze;if(y===at.Pop){let ie=P.get(g.location.pathname);ie&&ie.has(O.pathname)?ze={currentLocation:g.location,nextLocation:O}:P.has(O.pathname)&&(ze={currentLocation:O,nextLocation:g.location})}else if(k){let ie=P.get(g.location.pathname);ie?ie.add(O.pathname):(ie=new Set([O.pathname]),P.set(g.location.pathname,ie)),ze={currentLocation:g.location,nextLocation:O}}bt(qe({},M,{actionData:K,loaderData:oe,historyAction:y,location:O,initialized:!0,navigation:xf,revalidation:"idle",restoreScrollPosition:ro(O,M.matches||g.matches),preventScrollReset:dt,blockers:ae}),{viewTransitionOpts:ze,flushSync:Z===!0}),y=at.Pop,b=!1,k=!1,Ie=!1,it=!1,Ht=[],_t=[]}async function Ys(O,M){if(typeof O=="number"){t.history.go(O);return}let $=zp(g.location,g.matches,l,h.v7_prependBasename,O,h.v7_relativeSplatPath,M==null?void 0:M.fromRouteId,M==null?void 0:M.relative),{path:q,submission:Q,error:Z}=z_(h.v7_normalizeFormMethod,!1,$,M),te=g.location,K=Yl(g.location,q,M&&M.state);K=qe({},K,t.history.encodeLocation(K));let oe=M&&M.replace!=null?M.replace:void 0,ae=at.Push;oe===!0?ae=at.Replace:oe===!1||Q!=null&&zn(Q.formMethod)&&Q.formAction===g.location.pathname+g.location.search&&(ae=at.Replace);let dt=M&&"preventScrollReset"in M?M.preventScrollReset===!0:void 0,ze=(M&&M.unstable_flushSync)===!0,ie=to({currentLocation:te,nextLocation:K,historyAction:ae});if(ie){eo(ie,{state:"blocked",location:K,proceed(){eo(ie,{state:"proceeding",proceed:void 0,reset:void 0,location:K}),Ys(O,M)},reset(){let Ne=new Map(g.blockers);Ne.set(ie,Ya),bt({blockers:Ne})}});return}return await Jn(ae,K,{submission:Q,pendingError:Z,preventScrollReset:dt,replace:M&&M.replace,enableViewTransition:M&&M.unstable_viewTransition,flushSync:ze})}function ka(){if(Zs(),bt({revalidation:"loading"}),g.navigation.state!=="submitting"){if(g.navigation.state==="idle"){Jn(g.historyAction,g.location,{startUninterruptedRevalidation:!0});return}Jn(y||g.historyAction,g.navigation.location,{overrideNavigation:g.navigation})}}async function Jn(O,M,$){I&&I.abort(),I=null,y=O,Ie=($&&$.startUninterruptedRevalidation)===!0,La(g.location,g.matches),b=($&&$.preventScrollReset)===!0,k=($&&$.enableViewTransition)===!0;let q=a||o,Q=$&&$.overrideNavigation,Z=Po(q,M,l),te=($&&$.flushSync)===!0;if(!Z){let ie=bn(404,{pathname:M.pathname}),{matches:Ne,route:We}=Y_(q);no(),pr(M,{matches:Ne,loaderData:{},errors:{[We.id]:ie}},{flushSync:te});return}if(g.initialized&&!it&&fk(g.location,M)&&!($&&$.submission&&zn($.submission.formMethod))){pr(M,{matches:Z},{flushSync:te});return}I=new AbortController;let K=lo(t.history,M,I.signal,$&&$.submission),oe;if($&&$.pendingError)oe=[xl(Z).route.id,{type:Be.error,error:$.pendingError}];else if($&&$.submission&&zn($.submission.formMethod)){let ie=await Hd(K,M,$.submission,Z,{replace:$.replace,flushSync:te});if(ie.shortCircuited)return;oe=ie.pendingActionResult,Q=kf(M,$.submission),te=!1,K=lo(t.history,K.url,K.signal)}let{shortCircuited:ae,loaderData:dt,errors:ze}=await Wd(K,M,Z,Q,$&&$.submission,$&&$.fetcherSubmission,$&&$.replace,$&&$.initialHydration===!0,te,oe);ae||(I=null,pr(M,qe({matches:Z},X_(oe),{loaderData:dt,errors:ze})))}async function Hd(O,M,$,q,Q){Q===void 0&&(Q={}),Zs();let Z=yk(M,$);bt({navigation:Z},{flushSync:Q.flushSync===!0});let te,K=Hp(q,M);if(!K.route.action&&!K.route.lazy)te={type:Be.error,error:bn(405,{method:O.method,pathname:M.pathname,routeId:K.route.id})};else if(te=(await mr("action",O,[K],q))[0],O.signal.aborted)return{shortCircuited:!0};if(vs(te)){let oe;return Q&&Q.replace!=null?oe=Q.replace:oe=q_(te.response.headers.get("Location"),new URL(O.url),l)===g.location.pathname+g.location.search,await rs(O,te,{submission:$,replace:oe}),{shortCircuited:!0}}if(ys(te))throw bn(400,{type:"defer-action"});if(In(te)){let oe=xl(q,K.route.id);return(Q&&Q.replace)!==!0&&(y=at.Push),{pendingActionResult:[oe.route.id,te]}}return{pendingActionResult:[K.route.id,te]}}async function Wd(O,M,$,q,Q,Z,te,K,oe,ae){let dt=q||kf(M,Q),ze=Q||Z||e0(dt),ie=a||o,[Ne,We]=B_(t.history,g,$,ze,M,h.v7_partialHydration&&K===!0,h.unstable_skipActionErrorRevalidation,it,Ht,_t,ht,Pe,he,ie,l,ae);if(no(ye=>!($&&$.some(Tt=>Tt.route.id===ye))||Ne&&Ne.some(Tt=>Tt.route.id===ye)),re=++ee,Ne.length===0&&We.length===0){let ye=Ra();return pr(M,qe({matches:$,loaderData:{},errors:ae&&In(ae[1])?{[ae[0]]:ae[1].error}:null},X_(ae),ye?{fetchers:new Map(g.fetchers)}:{}),{flushSync:oe}),{shortCircuited:!0}}if(!Ie&&(!h.v7_partialHydration||!K)){We.forEach(Tt=>{let Ct=g.fetchers.get(Tt.key),st=Ja(void 0,Ct?Ct.data:void 0);g.fetchers.set(Tt.key,st)});let ye;ae&&!In(ae[1])?ye={[ae[0]]:ae[1].data}:g.actionData&&(Object.keys(g.actionData).length===0?ye=null:ye=g.actionData),bt(qe({navigation:dt},ye!==void 0?{actionData:ye}:{},We.length>0?{fetchers:new Map(g.fetchers)}:{}),{flushSync:oe})}We.forEach(ye=>{H.has(ye.key)&&Zn(ye.key),ye.controller&&H.set(ye.key,ye.controller)});let ei=()=>We.forEach(ye=>Zn(ye.key));I&&I.signal.addEventListener("abort",ei);let{loaderResults:_n,fetcherResults:Mn}=await Js(g.matches,$,Ne,We,O);if(O.signal.aborted)return{shortCircuited:!0};I&&I.signal.removeEventListener("abort",ei),We.forEach(ye=>H.delete(ye.key));let qt=J_([..._n,...Mn]);if(qt){if(qt.idx>=Ne.length){let ye=We[qt.idx-Ne.length].key;he.add(ye)}return await rs(O,qt.result,{replace:te}),{shortCircuited:!0}}let{loaderData:yr,errors:cn}=K_(g,$,Ne,_n,ae,We,Mn,wt);wt.forEach((ye,Tt)=>{ye.subscribe(Ct=>{(Ct||ye.done)&&wt.delete(Tt)})}),h.v7_partialHydration&&K&&g.errors&&Object.entries(g.errors).filter(ye=>{let[Tt]=ye;return!Ne.some(Ct=>Ct.route.id===Tt)}).forEach(ye=>{let[Tt,Ct]=ye;cn=Object.assign(cn||{},{[Tt]:Ct})});let ti=Ra(),ni=Oa(re),os=ti||ni||We.length>0;return qe({loaderData:yr,errors:cn},os?{fetchers:new Map(g.fetchers)}:{})}function Lu(O,M,$,q){if(r)throw new Error("router.fetch() was called during the server render, but it shouldn't be. You are likely calling a useFetcher() method in the body of your component. Try moving it to a useEffect or a callback.");H.has(O)&&Zn(O);let Q=(q&&q.unstable_flushSync)===!0,Z=a||o,te=zp(g.location,g.matches,l,h.v7_prependBasename,$,h.v7_relativeSplatPath,M,q==null?void 0:q.relative),K=Po(Z,te,l);if(!K){et(O,M,bn(404,{pathname:te}),{flushSync:Q});return}let{path:oe,submission:ae,error:dt}=z_(h.v7_normalizeFormMethod,!0,te,q);if(dt){et(O,M,dt,{flushSync:Q});return}let ze=Hp(K,oe);if(b=(q&&q.preventScrollReset)===!0,ae&&zn(ae.formMethod)){Pa(O,M,oe,ze,K,Q,ae);return}Pe.set(O,{routeId:M,path:oe}),Du(O,M,oe,ze,K,Q,ae)}async function Pa(O,M,$,q,Q,Z,te){if(Zs(),Pe.delete(O),!q.route.action&&!q.route.lazy){let st=bn(405,{method:te.formMethod,pathname:$,routeId:M});et(O,M,st,{flushSync:Z});return}let K=g.fetchers.get(O);Me(O,vk(te,K),{flushSync:Z});let oe=new AbortController,ae=lo(t.history,$,oe.signal,te);H.set(O,oe);let dt=ee,ie=(await mr("action",ae,[q],Q))[0];if(ae.signal.aborted){H.get(O)===oe&&H.delete(O);return}if(h.v7_fetcherPersist&&ht.has(O)){if(vs(ie)||In(ie)){Me(O,ci(void 0));return}}else{if(vs(ie))if(H.delete(O),re>dt){Me(O,ci(void 0));return}else return he.add(O),Me(O,Ja(te)),rs(ae,ie,{fetcherSubmission:te});if(In(ie)){et(O,M,ie.error);return}}if(ys(ie))throw bn(400,{type:"defer-action"});let Ne=g.navigation.location||g.location,We=lo(t.history,Ne,oe.signal),ei=a||o,_n=g.navigation.state!=="idle"?Po(ei,g.navigation.location,l):g.matches;me(_n,"Didn't find any matches after fetcher action");let Mn=++ee;_e.set(O,Mn);let qt=Ja(te,ie.data);g.fetchers.set(O,qt);let[yr,cn]=B_(t.history,g,_n,te,Ne,!1,h.unstable_skipActionErrorRevalidation,it,Ht,_t,ht,Pe,he,ei,l,[q.route.id,ie]);cn.filter(st=>st.key!==O).forEach(st=>{let vr=st.key,ri=g.fetchers.get(vr),_r=Ja(void 0,ri?ri.data:void 0);g.fetchers.set(vr,_r),H.has(vr)&&Zn(vr),st.controller&&H.set(vr,st.controller)}),bt({fetchers:new Map(g.fetchers)});let ti=()=>cn.forEach(st=>Zn(st.key));oe.signal.addEventListener("abort",ti);let{loaderResults:ni,fetcherResults:os}=await Js(g.matches,_n,yr,cn,We);if(oe.signal.aborted)return;oe.signal.removeEventListener("abort",ti),_e.delete(O),H.delete(O),cn.forEach(st=>H.delete(st.key));let ye=J_([...ni,...os]);if(ye){if(ye.idx>=yr.length){let st=cn[ye.idx-yr.length].key;he.add(st)}return rs(We,ye.result)}let{loaderData:Tt,errors:Ct}=K_(g,g.matches,yr,ni,void 0,cn,os,wt);if(g.fetchers.has(O)){let st=ci(ie.data);g.fetchers.set(O,st)}Oa(Mn),g.navigation.state==="loading"&&Mn>re?(me(y,"Expected pending action"),I&&I.abort(),pr(g.navigation.location,{matches:_n,loaderData:Tt,errors:Ct,fetchers:new Map(g.fetchers)})):(bt({errors:Ct,loaderData:Q_(g.loaderData,Tt,_n,Ct),fetchers:new Map(g.fetchers)}),it=!1)}async function Du(O,M,$,q,Q,Z,te){let K=g.fetchers.get(O);Me(O,Ja(te,K?K.data:void 0),{flushSync:Z});let oe=new AbortController,ae=lo(t.history,$,oe.signal);H.set(O,oe);let dt=ee,ie=(await mr("loader",ae,[q],Q))[0];if(ys(ie)&&(ie=await Ib(ie,ae.signal,!0)||ie),H.get(O)===oe&&H.delete(O),!ae.signal.aborted){if(ht.has(O)){Me(O,ci(void 0));return}if(vs(ie))if(re>dt){Me(O,ci(void 0));return}else{he.add(O),await rs(ae,ie);return}if(In(ie)){et(O,M,ie.error);return}me(!ys(ie),"Unhandled fetcher deferred data"),Me(O,ci(ie.data))}}async function rs(O,M,$){let{submission:q,fetcherSubmission:Q,replace:Z}=$===void 0?{}:$;M.response.headers.has("X-Remix-Revalidate")&&(it=!0);let te=M.response.headers.get("Location");me(te,"Expected a Location header on the redirect Response"),te=q_(te,new URL(O.url),l);let K=Yl(g.location,te,{_isRedirect:!0});if(n){let Ne=!1;if(M.response.headers.has("X-Remix-Reload-Document"))Ne=!0;else if(bg.test(te)){const We=t.history.createURL(te);Ne=We.origin!==e.location.origin||pa(We.pathname,l)==null}if(Ne){Z?e.location.replace(te):e.location.assign(te);return}}I=null;let oe=Z===!0?at.Replace:at.Push,{formMethod:ae,formAction:dt,formEncType:ze}=g.navigation;!q&&!Q&&ae&&dt&&ze&&(q=e0(g.navigation));let ie=q||Q;if(ek.has(M.response.status)&&ie&&zn(ie.formMethod))await Jn(oe,K,{submission:qe({},ie,{formAction:te}),preventScrollReset:b});else{let Ne=kf(K,q);await Jn(oe,K,{overrideNavigation:Ne,fetcherSubmission:Q,preventScrollReset:b})}}async function mr(O,M,$,q){try{let Q=await lk(c,O,M,$,q,s,i);return await Promise.all(Q.map((Z,te)=>{if(pk(Z)){let K=Z.result;return{type:Be.redirect,response:hk(K,M,$[te].route.id,q,l,h.v7_relativeSplatPath)}}return ck(Z)}))}catch(Q){return $.map(()=>({type:Be.error,error:Q}))}}async function Js(O,M,$,q,Q){let[Z,...te]=await Promise.all([$.length?mr("loader",Q,$,M):[],...q.map(K=>{if(K.matches&&K.match&&K.controller){let oe=lo(t.history,K.path,K.controller.signal);return mr("loader",oe,[K.match],K.matches).then(ae=>ae[0])}else return Promise.resolve({type:Be.error,error:bn(404,{pathname:K.path})})})]);return await Promise.all([Z_(O,$,Z,Z.map(()=>Q.signal),!1,g.loaderData),Z_(O,q.map(K=>K.match),te,q.map(K=>K.controller?K.controller.signal:null),!0)]),{loaderResults:Z,fetcherResults:te}}function Zs(){it=!0,Ht.push(...no()),Pe.forEach((O,M)=>{H.has(M)&&(_t.push(M),Zn(M))})}function Me(O,M,$){$===void 0&&($={}),g.fetchers.set(O,M),bt({fetchers:new Map(g.fetchers)},{flushSync:($&&$.flushSync)===!0})}function et(O,M,$,q){q===void 0&&(q={});let Q=xl(g.matches,M);ss(O),bt({errors:{[Q.route.id]:$},fetchers:new Map(g.fetchers)},{flushSync:(q&&q.flushSync)===!0})}function is(O){return h.v7_fetcherPersist&&(Wt.set(O,(Wt.get(O)||0)+1),ht.has(O)&&ht.delete(O)),g.fetchers.get(O)||tk}function ss(O){let M=g.fetchers.get(O);H.has(O)&&!(M&&M.state==="loading"&&_e.has(O))&&Zn(O),Pe.delete(O),_e.delete(O),he.delete(O),ht.delete(O),g.fetchers.delete(O)}function Mu(O){if(h.v7_fetcherPersist){let M=(Wt.get(O)||0)-1;M<=0?(Wt.delete(O),ht.add(O)):Wt.set(O,M)}else ss(O);bt({fetchers:new Map(g.fetchers)})}function Zn(O){let M=H.get(O);me(M,"Expected fetch controller: "+O),M.abort(),H.delete(O)}function Jr(O){for(let M of O){let $=is(M),q=ci($.data);g.fetchers.set(M,q)}}function Ra(){let O=[],M=!1;for(let $ of he){let q=g.fetchers.get($);me(q,"Expected fetcher: "+$),q.state==="loading"&&(he.delete($),O.push($),M=!0)}return Jr(O),M}function Oa(O){let M=[];for(let[$,q]of _e)if(q<O){let Q=g.fetchers.get($);me(Q,"Expected fetcher: "+$),Q.state==="loading"&&(Zn($),_e.delete($),M.push($))}return Jr(M),M.length>0}function Na(O,M){let $=g.blockers.get(O)||Ya;return Et.get(O)!==M&&Et.set(O,M),$}function Vu(O){g.blockers.delete(O),Et.delete(O)}function eo(O,M){let $=g.blockers.get(O)||Ya;me($.state==="unblocked"&&M.state==="blocked"||$.state==="blocked"&&M.state==="blocked"||$.state==="blocked"&&M.state==="proceeding"||$.state==="blocked"&&M.state==="unblocked"||$.state==="proceeding"&&M.state==="unblocked","Invalid blocker state transition: "+$.state+" -> "+M.state);let q=new Map(g.blockers);q.set(O,M),bt({blockers:q})}function to(O){let{currentLocation:M,nextLocation:$,historyAction:q}=O;if(Et.size===0)return;Et.size>1&&Yo(!1,"A router only supports one blocker at a time");let Q=Array.from(Et.entries()),[Z,te]=Q[Q.length-1],K=g.blockers.get(Z);if(!(K&&K.state==="proceeding")&&te({currentLocation:M,nextLocation:$,historyAction:q}))return Z}function no(O){let M=[];return wt.forEach(($,q)=>{(!O||O(q))&&($.cancel(),M.push(q),wt.delete(q))}),M}function Uu(O,M,$){if(w=O,S=M,E=$||null,!R&&g.navigation===xf){R=!0;let q=ro(g.location,g.matches);q!=null&&bt({restoreScrollPosition:q})}return()=>{w=null,S=null,E=null}}function Zr(O,M){return E&&E(O,M.map(q=>Rx(q,g.loaderData)))||O.key}function La(O,M){if(w&&S){let $=Zr(O,M);w[$]=S()}}function ro(O,M){if(w){let $=Zr(O,M),q=w[$];if(typeof q=="number")return q}return null}function gr(O){s={},a=jp(O,i,void 0,s)}return z={get basename(){return l},get future(){return h},get state(){return g},get routes(){return o},get window(){return e},initialize:Bd,subscribe:Xs,enableScrollRestoration:Uu,navigate:Ys,fetch:Lu,revalidate:ka,createHref:O=>t.history.createHref(O),encodeLocation:O=>t.history.encodeLocation(O),getFetcher:is,deleteFetcher:Mu,dispose:Qs,getBlocker:Na,deleteBlocker:Vu,_internalFetchControllers:H,_internalActiveDeferreds:wt,_internalSetRoutes:gr},z}function ik(t){return t!=null&&("formData"in t&&t.formData!=null||"body"in t&&t.body!==void 0)}function zp(t,e,n,r,i,s,o,a){let l,c;if(o){l=[];for(let f of e)if(l.push(f),f.route.id===o){c=f;break}}else l=e,c=e[e.length-1];let h=id(i||".",rd(l,s),pa(t.pathname,n)||t.pathname,a==="path");return i==null&&(h.search=t.search,h.hash=t.hash),(i==null||i===""||i===".")&&c&&c.route.index&&!Tg(h.search)&&(h.search=h.search?h.search.replace(/^\?/,"?index&"):"?index"),r&&n!=="/"&&(h.pathname=h.pathname==="/"?n:Mr([n,h.pathname])),Ns(h)}function z_(t,e,n,r){if(!r||!ik(r))return{path:n};if(r.formMethod&&!gk(r.formMethod))return{path:n,error:bn(405,{method:r.formMethod})};let i=()=>({path:n,error:bn(400,{type:"invalid-body"})}),s=r.formMethod||"get",o=t?s.toUpperCase():s.toLowerCase(),a=Tb(n);if(r.body!==void 0){if(r.formEncType==="text/plain"){if(!zn(o))return i();let p=typeof r.body=="string"?r.body:r.body instanceof FormData||r.body instanceof URLSearchParams?Array.from(r.body.entries()).reduce((w,E)=>{let[S,R]=E;return""+w+S+"="+R+`
`},""):String(r.body);return{path:n,submission:{formMethod:o,formAction:a,formEncType:r.formEncType,formData:void 0,json:void 0,text:p}}}else if(r.formEncType==="application/json"){if(!zn(o))return i();try{let p=typeof r.body=="string"?JSON.parse(r.body):r.body;return{path:n,submission:{formMethod:o,formAction:a,formEncType:r.formEncType,formData:void 0,json:p,text:void 0}}}catch{return i()}}}me(typeof FormData=="function","FormData is not available in this environment");let l,c;if(r.formData)l=Bp(r.formData),c=r.formData;else if(r.body instanceof FormData)l=Bp(r.body),c=r.body;else if(r.body instanceof URLSearchParams)l=r.body,c=G_(l);else if(r.body==null)l=new URLSearchParams,c=new FormData;else try{l=new URLSearchParams(r.body),c=G_(l)}catch{return i()}let h={formMethod:o,formAction:a,formEncType:r&&r.formEncType||"application/x-www-form-urlencoded",formData:c,json:void 0,text:void 0};if(zn(h.formMethod))return{path:n,submission:h};let f=Xi(n);return e&&f.search&&Tg(f.search)&&l.append("index",""),f.search="?"+l,{path:Ns(f),submission:h}}function sk(t,e){let n=t;if(e){let r=t.findIndex(i=>i.route.id===e);r>=0&&(n=t.slice(0,r))}return n}function B_(t,e,n,r,i,s,o,a,l,c,h,f,p,w,E,S){let R=S?In(S[1])?S[1].error:S[1].data:void 0,T=t.createURL(e.location),_=t.createURL(i),C=S&&In(S[1])?S[0]:void 0,L=C?sk(n,C):n,F=S?S[1].statusCode:void 0,z=o&&F&&F>=400,g=L.filter((b,I)=>{let{route:k}=b;if(k.lazy)return!0;if(k.loader==null)return!1;if(s)return typeof k.loader!="function"||k.loader.hydrate?!0:e.loaderData[k.id]===void 0&&(!e.errors||e.errors[k.id]===void 0);if(ok(e.loaderData,e.matches[I],b)||l.some(Ie=>Ie===b.route.id))return!0;let P=e.matches[I],A=b;return H_(b,qe({currentUrl:T,currentParams:P.params,nextUrl:_,nextParams:A.params},r,{actionResult:R,unstable_actionStatus:F,defaultShouldRevalidate:z?!1:a||T.pathname+T.search===_.pathname+_.search||T.search!==_.search||bb(P,A)}))}),y=[];return f.forEach((b,I)=>{if(s||!n.some(it=>it.route.id===b.routeId)||h.has(I))return;let k=Po(w,b.path,E);if(!k){y.push({key:I,routeId:b.routeId,path:b.path,matches:null,match:null,controller:null});return}let P=e.fetchers.get(I),A=Hp(k,b.path),Ie=!1;p.has(I)?Ie=!1:c.includes(I)?Ie=!0:P&&P.state!=="idle"&&P.data===void 0?Ie=a:Ie=H_(A,qe({currentUrl:T,currentParams:e.matches[e.matches.length-1].params,nextUrl:_,nextParams:n[n.length-1].params},r,{actionResult:R,unstable_actionStatus:F,defaultShouldRevalidate:z?!1:a})),Ie&&y.push({key:I,routeId:b.routeId,path:b.path,matches:k,match:A,controller:new AbortController})}),[g,y]}function ok(t,e,n){let r=!e||n.route.id!==e.route.id,i=t[n.route.id]===void 0;return r||i}function bb(t,e){let n=t.route.path;return t.pathname!==e.pathname||n!=null&&n.endsWith("*")&&t.params["*"]!==e.params["*"]}function H_(t,e){if(t.route.shouldRevalidate){let n=t.route.shouldRevalidate(e);if(typeof n=="boolean")return n}return e.defaultShouldRevalidate}async function W_(t,e,n){if(!t.lazy)return;let r=await t.lazy();if(!t.lazy)return;let i=n[t.id];me(i,"No route found in manifest");let s={};for(let o in r){let l=i[o]!==void 0&&o!=="hasErrorBoundary";Yo(!l,'Route "'+i.id+'" has a static property "'+o+'" defined but its lazy function is also returning a value for this property. '+('The lazy route property "'+o+'" will be ignored.')),!l&&!kx.has(o)&&(s[o]=r[o])}Object.assign(i,s),Object.assign(i,qe({},e(i),{lazy:void 0}))}function ak(t){return Promise.all(t.matches.map(e=>e.resolve()))}async function lk(t,e,n,r,i,s,o,a){let l=r.reduce((f,p)=>f.add(p.route.id),new Set),c=new Set,h=await t({matches:i.map(f=>{let p=l.has(f.route.id);return qe({},f,{shouldLoad:p,resolve:E=>(c.add(f.route.id),p?uk(e,n,f,s,o,E,a):Promise.resolve({type:Be.data,result:void 0}))})}),request:n,params:i[0].params,context:a});return i.forEach(f=>me(c.has(f.route.id),'`match.resolve()` was not called for route id "'+f.route.id+'". You must call `match.resolve()` on every match passed to `dataStrategy` to ensure all routes are properly loaded.')),h.filter((f,p)=>l.has(i[p].route.id))}async function uk(t,e,n,r,i,s,o){let a,l,c=h=>{let f,p=new Promise((S,R)=>f=R);l=()=>f(),e.signal.addEventListener("abort",l);let w=S=>typeof h!="function"?Promise.reject(new Error("You cannot call the handler for a route which defines a boolean "+('"'+t+'" [routeId: '+n.route.id+"]"))):h({request:e,params:n.params,context:o},...S!==void 0?[S]:[]),E;return s?E=s(S=>w(S)):E=(async()=>{try{return{type:"data",result:await w()}}catch(S){return{type:"error",result:S}}})(),Promise.race([E,p])};try{let h=n.route[t];if(n.route.lazy)if(h){let f,[p]=await Promise.all([c(h).catch(w=>{f=w}),W_(n.route,i,r)]);if(f!==void 0)throw f;a=p}else if(await W_(n.route,i,r),h=n.route[t],h)a=await c(h);else if(t==="action"){let f=new URL(e.url),p=f.pathname+f.search;throw bn(405,{method:e.method,pathname:p,routeId:n.route.id})}else return{type:Be.data,result:void 0};else if(h)a=await c(h);else{let f=new URL(e.url),p=f.pathname+f.search;throw bn(404,{pathname:p})}me(a.result!==void 0,"You defined "+(t==="action"?"an action":"a loader")+" for route "+('"'+n.route.id+"\" but didn't return anything from your `"+t+"` ")+"function. Please return a value or `null`.")}catch(h){return{type:Be.error,result:h}}finally{l&&e.signal.removeEventListener("abort",l)}return a}async function ck(t){let{result:e,type:n,status:r}=t;if(Cb(e)){let o;try{let a=e.headers.get("Content-Type");a&&/\bapplication\/json\b/.test(a)?e.body==null?o=null:o=await e.json():o=await e.text()}catch(a){return{type:Be.error,error:a}}return n===Be.error?{type:Be.error,error:new wg(e.status,e.statusText,o),statusCode:e.status,headers:e.headers}:{type:Be.data,data:o,statusCode:e.status,headers:e.headers}}if(n===Be.error)return{type:Be.error,error:e,statusCode:Eg(e)?e.status:r};if(mk(e)){var i,s;return{type:Be.deferred,deferredData:e,statusCode:(i=e.init)==null?void 0:i.status,headers:((s=e.init)==null?void 0:s.headers)&&new Headers(e.init.headers)}}return{type:Be.data,data:e,statusCode:r}}function hk(t,e,n,r,i,s){let o=t.headers.get("Location");if(me(o,"Redirects returned/thrown from loaders/actions must have a Location header"),!bg.test(o)){let a=r.slice(0,r.findIndex(l=>l.route.id===n)+1);o=zp(new URL(e.url),a,i,!0,o,s),t.headers.set("Location",o)}return t}function q_(t,e,n){if(bg.test(t)){let r=t,i=r.startsWith("//")?new URL(e.protocol+r):new URL(r),s=pa(i.pathname,n)!=null;if(i.origin===e.origin&&s)return i.pathname+i.search+i.hash}return t}function lo(t,e,n,r){let i=t.createURL(Tb(e)).toString(),s={signal:n};if(r&&zn(r.formMethod)){let{formMethod:o,formEncType:a}=r;s.method=o.toUpperCase(),a==="application/json"?(s.headers=new Headers({"Content-Type":a}),s.body=JSON.stringify(r.json)):a==="text/plain"?s.body=r.text:a==="application/x-www-form-urlencoded"&&r.formData?s.body=Bp(r.formData):s.body=r.formData}return new Request(i,s)}function Bp(t){let e=new URLSearchParams;for(let[n,r]of t.entries())e.append(n,typeof r=="string"?r:r.name);return e}function G_(t){let e=new FormData;for(let[n,r]of t.entries())e.append(n,r);return e}function dk(t,e,n,r,i,s){let o={},a=null,l,c=!1,h={},f=r&&In(r[1])?r[1].error:void 0;return n.forEach((p,w)=>{let E=e[w].route.id;if(me(!vs(p),"Cannot handle redirect results in processLoaderData"),In(p)){let S=p.error;f!==void 0&&(S=f,f=void 0),a=a||{};{let R=xl(t,E);a[R.route.id]==null&&(a[R.route.id]=S)}o[E]=void 0,c||(c=!0,l=Eg(p.error)?p.error.status:500),p.headers&&(h[E]=p.headers)}else ys(p)?(i.set(E,p.deferredData),o[E]=p.deferredData.data,p.statusCode!=null&&p.statusCode!==200&&!c&&(l=p.statusCode),p.headers&&(h[E]=p.headers)):(o[E]=p.data,p.statusCode&&p.statusCode!==200&&!c&&(l=p.statusCode),p.headers&&(h[E]=p.headers))}),f!==void 0&&r&&(a={[r[0]]:f},o[r[0]]=void 0),{loaderData:o,errors:a,statusCode:l||200,loaderHeaders:h}}function K_(t,e,n,r,i,s,o,a){let{loaderData:l,errors:c}=dk(e,n,r,i,a);for(let h=0;h<s.length;h++){let{key:f,match:p,controller:w}=s[h];me(o!==void 0&&o[h]!==void 0,"Did not find corresponding fetcher result");let E=o[h];if(!(w&&w.signal.aborted))if(In(E)){let S=xl(t.matches,p==null?void 0:p.route.id);c&&c[S.route.id]||(c=qe({},c,{[S.route.id]:E.error})),t.fetchers.delete(f)}else if(vs(E))me(!1,"Unhandled fetcher revalidation redirect");else if(ys(E))me(!1,"Unhandled fetcher deferred data");else{let S=ci(E.data);t.fetchers.set(f,S)}}return{loaderData:l,errors:c}}function Q_(t,e,n,r){let i=qe({},e);for(let s of n){let o=s.route.id;if(e.hasOwnProperty(o)?e[o]!==void 0&&(i[o]=e[o]):t[o]!==void 0&&s.route.loader&&(i[o]=t[o]),r&&r.hasOwnProperty(o))break}return i}function X_(t){return t?In(t[1])?{actionData:{}}:{actionData:{[t[0]]:t[1].data}}:{}}function xl(t,e){return(e?t.slice(0,t.findIndex(r=>r.route.id===e)+1):[...t]).reverse().find(r=>r.route.hasErrorBoundary===!0)||t[0]}function Y_(t){let e=t.length===1?t[0]:t.find(n=>n.index||!n.path||n.path==="/")||{id:"__shim-error-route__"};return{matches:[{params:{},pathname:"",pathnameBase:"",route:e}],route:e}}function bn(t,e){let{pathname:n,routeId:r,method:i,type:s}=e===void 0?{}:e,o="Unknown Server Error",a="Unknown @remix-run/router error";return t===400?(o="Bad Request",i&&n&&r?a="You made a "+i+' request to "'+n+'" but '+('did not provide a `loader` for route "'+r+'", ')+"so there is no way to handle the request.":s==="defer-action"?a="defer() is not supported in actions":s==="invalid-body"&&(a="Unable to encode submission body")):t===403?(o="Forbidden",a='Route "'+r+'" does not match URL "'+n+'"'):t===404?(o="Not Found",a='No route matches URL "'+n+'"'):t===405&&(o="Method Not Allowed",i&&n&&r?a="You made a "+i.toUpperCase()+' request to "'+n+'" but '+('did not provide an `action` for route "'+r+'", ')+"so there is no way to handle the request.":i&&(a='Invalid request method "'+i.toUpperCase()+'"')),new wg(t||500,o,new Error(a),!0)}function J_(t){for(let e=t.length-1;e>=0;e--){let n=t[e];if(vs(n))return{result:n,idx:e}}}function Tb(t){let e=typeof t=="string"?Xi(t):t;return Ns(qe({},e,{hash:""}))}function fk(t,e){return t.pathname!==e.pathname||t.search!==e.search?!1:t.hash===""?e.hash!=="":t.hash===e.hash?!0:e.hash!==""}function pk(t){return Cb(t.result)&&Zx.has(t.result.status)}function ys(t){return t.type===Be.deferred}function In(t){return t.type===Be.error}function vs(t){return(t&&t.type)===Be.redirect}function mk(t){let e=t;return e&&typeof e=="object"&&typeof e.data=="object"&&typeof e.subscribe=="function"&&typeof e.cancel=="function"&&typeof e.resolveData=="function"}function Cb(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.headers=="object"&&typeof t.body<"u"}function gk(t){return Jx.has(t.toLowerCase())}function zn(t){return Xx.has(t.toLowerCase())}async function Z_(t,e,n,r,i,s){for(let o=0;o<n.length;o++){let a=n[o],l=e[o];if(!l)continue;let c=t.find(f=>f.route.id===l.route.id),h=c!=null&&!bb(c,l)&&(s&&s[l.route.id])!==void 0;if(ys(a)&&(i||h)){let f=r[o];me(f,"Expected an AbortSignal for revalidating fetcher deferred result"),await Ib(a,f,i).then(p=>{p&&(n[o]=p||n[o])})}}}async function Ib(t,e,n){if(n===void 0&&(n=!1),!await t.deferredData.resolveData(e)){if(n)try{return{type:Be.data,data:t.deferredData.unwrappedData}}catch(i){return{type:Be.error,error:i}}return{type:Be.data,data:t.deferredData.data}}}function Tg(t){return new URLSearchParams(t).getAll("index").some(e=>e==="")}function Hp(t,e){let n=typeof e=="string"?Xi(e).search:e.search;if(t[t.length-1].route.index&&Tg(n||""))return t[t.length-1];let r=_b(t);return r[r.length-1]}function e0(t){let{formMethod:e,formAction:n,formEncType:r,text:i,formData:s,json:o}=t;if(!(!e||!n||!r)){if(i!=null)return{formMethod:e,formAction:n,formEncType:r,formData:void 0,json:void 0,text:i};if(s!=null)return{formMethod:e,formAction:n,formEncType:r,formData:s,json:void 0,text:void 0};if(o!==void 0)return{formMethod:e,formAction:n,formEncType:r,formData:void 0,json:o,text:void 0}}}function kf(t,e){return e?{state:"loading",location:t,formMethod:e.formMethod,formAction:e.formAction,formEncType:e.formEncType,formData:e.formData,json:e.json,text:e.text}:{state:"loading",location:t,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0}}function yk(t,e){return{state:"submitting",location:t,formMethod:e.formMethod,formAction:e.formAction,formEncType:e.formEncType,formData:e.formData,json:e.json,text:e.text}}function Ja(t,e){return t?{state:"loading",formMethod:t.formMethod,formAction:t.formAction,formEncType:t.formEncType,formData:t.formData,json:t.json,text:t.text,data:e}:{state:"loading",formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0,data:e}}function vk(t,e){return{state:"submitting",formMethod:t.formMethod,formAction:t.formAction,formEncType:t.formEncType,formData:t.formData,json:t.json,text:t.text,data:e?e.data:void 0}}function ci(t){return{state:"idle",formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0,data:t}}function _k(t,e){try{let n=t.sessionStorage.getItem(Eb);if(n){let r=JSON.parse(n);for(let[i,s]of Object.entries(r||{}))s&&Array.isArray(s)&&e.set(i,new Set(s||[]))}}catch{}}function wk(t,e){if(e.size>0){let n={};for(let[r,i]of e)n[r]=[...i];try{t.sessionStorage.setItem(Eb,JSON.stringify(n))}catch(r){Yo(!1,"Failed to save applied view transitions in sessionStorage ("+r+").")}}}/**
 * React Router v6.23.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function yh(){return yh=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},yh.apply(this,arguments)}const sd=D.createContext(null),Sb=D.createContext(null),Yi=D.createContext(null),Cg=D.createContext(null),Qr=D.createContext({outlet:null,matches:[],isDataRoute:!1}),Ab=D.createContext(null);function Ek(t,e){let{relative:n}=e===void 0?{}:e;ma()||me(!1);let{basename:r,navigator:i}=D.useContext(Yi),{hash:s,pathname:o,search:a}=kb(t,{relative:n}),l=o;return r!=="/"&&(l=o==="/"?r:Mr([r,o])),i.createHref({pathname:l,search:a,hash:s})}function ma(){return D.useContext(Cg)!=null}function Hs(){return ma()||me(!1),D.useContext(Cg).location}function xb(t){D.useContext(Yi).static||D.useLayoutEffect(t)}function gu(){let{isDataRoute:t}=D.useContext(Qr);return t?Dk():bk()}function bk(){ma()||me(!1);let t=D.useContext(sd),{basename:e,future:n,navigator:r}=D.useContext(Yi),{matches:i}=D.useContext(Qr),{pathname:s}=Hs(),o=JSON.stringify(rd(i,n.v7_relativeSplatPath)),a=D.useRef(!1);return xb(()=>{a.current=!0}),D.useCallback(function(c,h){if(h===void 0&&(h={}),!a.current)return;if(typeof c=="number"){r.go(c);return}let f=id(c,JSON.parse(o),s,h.relative==="path");t==null&&e!=="/"&&(f.pathname=f.pathname==="/"?e:Mr([e,f.pathname])),(h.replace?r.replace:r.push)(f,h.state,h)},[e,r,o,s,t])}const Tk=D.createContext(null);function Ck(t){let e=D.useContext(Qr).outlet;return e&&D.createElement(Tk.Provider,{value:t},e)}function kb(t,e){let{relative:n}=e===void 0?{}:e,{future:r}=D.useContext(Yi),{matches:i}=D.useContext(Qr),{pathname:s}=Hs(),o=JSON.stringify(rd(i,r.v7_relativeSplatPath));return D.useMemo(()=>id(t,JSON.parse(o),s,n==="path"),[t,o,s,n])}function Ik(t,e,n,r){ma()||me(!1);let{navigator:i}=D.useContext(Yi),{matches:s}=D.useContext(Qr),o=s[s.length-1],a=o?o.params:{};o&&o.pathname;let l=o?o.pathnameBase:"/";o&&o.route;let c=Hs(),h;h=c;let f=h.pathname||"/",p=f;if(l!=="/"){let S=l.replace(/^\//,"").split("/");p="/"+f.replace(/^\//,"").split("/").slice(S.length).join("/")}let w=Po(t,{pathname:p});return Pk(w&&w.map(S=>Object.assign({},S,{params:Object.assign({},a,S.params),pathname:Mr([l,i.encodeLocation?i.encodeLocation(S.pathname).pathname:S.pathname]),pathnameBase:S.pathnameBase==="/"?l:Mr([l,i.encodeLocation?i.encodeLocation(S.pathnameBase).pathname:S.pathnameBase])})),s,n,r)}function Sk(){let t=Lk(),e=Eg(t)?t.status+" "+t.statusText:t instanceof Error?t.message:JSON.stringify(t),n=t instanceof Error?t.stack:null,i={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return D.createElement(D.Fragment,null,D.createElement("h2",null,"Unexpected Application Error!"),D.createElement("h3",{style:{fontStyle:"italic"}},e),n?D.createElement("pre",{style:i},n):null,null)}const Ak=D.createElement(Sk,null);class xk extends D.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,n){return n.location!==e.location||n.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:n.error,location:n.location,revalidation:e.revalidation||n.revalidation}}componentDidCatch(e,n){console.error("React Router caught the following error during render",e,n)}render(){return this.state.error!==void 0?D.createElement(Qr.Provider,{value:this.props.routeContext},D.createElement(Ab.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function kk(t){let{routeContext:e,match:n,children:r}=t,i=D.useContext(sd);return i&&i.static&&i.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(i.staticContext._deepestRenderedBoundaryId=n.route.id),D.createElement(Qr.Provider,{value:e},r)}function Pk(t,e,n,r){var i;if(e===void 0&&(e=[]),n===void 0&&(n=null),r===void 0&&(r=null),t==null){var s;if((s=n)!=null&&s.errors)t=n.matches;else return null}let o=t,a=(i=n)==null?void 0:i.errors;if(a!=null){let h=o.findIndex(f=>f.route.id&&(a==null?void 0:a[f.route.id])!==void 0);h>=0||me(!1),o=o.slice(0,Math.min(o.length,h+1))}let l=!1,c=-1;if(n&&r&&r.v7_partialHydration)for(let h=0;h<o.length;h++){let f=o[h];if((f.route.HydrateFallback||f.route.hydrateFallbackElement)&&(c=h),f.route.id){let{loaderData:p,errors:w}=n,E=f.route.loader&&p[f.route.id]===void 0&&(!w||w[f.route.id]===void 0);if(f.route.lazy||E){l=!0,c>=0?o=o.slice(0,c+1):o=[o[0]];break}}}return o.reduceRight((h,f,p)=>{let w,E=!1,S=null,R=null;n&&(w=a&&f.route.id?a[f.route.id]:void 0,S=f.route.errorElement||Ak,l&&(c<0&&p===0?(E=!0,R=null):c===p&&(E=!0,R=f.route.hydrateFallbackElement||null)));let T=e.concat(o.slice(0,p+1)),_=()=>{let C;return w?C=S:E?C=R:f.route.Component?C=D.createElement(f.route.Component,null):f.route.element?C=f.route.element:C=h,D.createElement(kk,{match:f,routeContext:{outlet:h,matches:T,isDataRoute:n!=null},children:C})};return n&&(f.route.ErrorBoundary||f.route.errorElement||p===0)?D.createElement(xk,{location:n.location,revalidation:n.revalidation,component:S,error:w,children:_(),routeContext:{outlet:null,matches:T,isDataRoute:!0}}):_()},null)}var Pb=function(t){return t.UseBlocker="useBlocker",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t}(Pb||{}),vh=function(t){return t.UseBlocker="useBlocker",t.UseLoaderData="useLoaderData",t.UseActionData="useActionData",t.UseRouteError="useRouteError",t.UseNavigation="useNavigation",t.UseRouteLoaderData="useRouteLoaderData",t.UseMatches="useMatches",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t.UseRouteId="useRouteId",t}(vh||{});function Rk(t){let e=D.useContext(sd);return e||me(!1),e}function Ok(t){let e=D.useContext(Sb);return e||me(!1),e}function Nk(t){let e=D.useContext(Qr);return e||me(!1),e}function Rb(t){let e=Nk(),n=e.matches[e.matches.length-1];return n.route.id||me(!1),n.route.id}function Lk(){var t;let e=D.useContext(Ab),n=Ok(vh.UseRouteError),r=Rb(vh.UseRouteError);return e!==void 0?e:(t=n.errors)==null?void 0:t[r]}function Dk(){let{router:t}=Rk(Pb.UseNavigateStable),e=Rb(vh.UseNavigateStable),n=D.useRef(!1);return xb(()=>{n.current=!0}),D.useCallback(function(i,s){s===void 0&&(s={}),n.current&&(typeof i=="number"?t.navigate(i):t.navigate(i,yh({fromRouteId:e},s)))},[t,e])}function Mk(t){let{to:e,replace:n,state:r,relative:i}=t;ma()||me(!1);let{future:s,static:o}=D.useContext(Yi),{matches:a}=D.useContext(Qr),{pathname:l}=Hs(),c=gu(),h=id(e,rd(a,s.v7_relativeSplatPath),l,i==="path"),f=JSON.stringify(h);return D.useEffect(()=>c(JSON.parse(f),{replace:n,state:r,relative:i}),[c,f,i,n,r]),null}function Vk(t){return Ck(t.context)}function Uk(t){let{basename:e="/",children:n=null,location:r,navigationType:i=at.Pop,navigator:s,static:o=!1,future:a}=t;ma()&&me(!1);let l=e.replace(/^\/*/,"/"),c=D.useMemo(()=>({basename:l,navigator:s,static:o,future:yh({v7_relativeSplatPath:!1},a)}),[l,a,s,o]);typeof r=="string"&&(r=Xi(r));let{pathname:h="/",search:f="",hash:p="",state:w=null,key:E="default"}=r,S=D.useMemo(()=>{let R=pa(h,l);return R==null?null:{location:{pathname:R,search:f,hash:p,state:w,key:E},navigationType:i}},[l,h,f,p,w,E,i]);return S==null?null:D.createElement(Yi.Provider,{value:c},D.createElement(Cg.Provider,{children:n,value:S}))}new Promise(()=>{});function $k(t){let e={hasErrorBoundary:t.ErrorBoundary!=null||t.errorElement!=null};return t.Component&&Object.assign(e,{element:D.createElement(t.Component),Component:void 0}),t.HydrateFallback&&Object.assign(e,{hydrateFallbackElement:D.createElement(t.HydrateFallback),HydrateFallback:void 0}),t.ErrorBoundary&&Object.assign(e,{errorElement:D.createElement(t.ErrorBoundary),ErrorBoundary:void 0}),e}/**
 * React Router DOM v6.23.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Jl(){return Jl=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Jl.apply(this,arguments)}function Fk(t,e){if(t==null)return{};var n={},r=Object.keys(t),i,s;for(s=0;s<r.length;s++)i=r[s],!(e.indexOf(i)>=0)&&(n[i]=t[i]);return n}function jk(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function zk(t,e){return t.button===0&&(!e||e==="_self")&&!jk(t)}const Bk=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","unstable_viewTransition"],Hk="6";try{window.__reactRouterVersion=Hk}catch{}function Wk(t,e){return rk({basename:void 0,future:Jl({},void 0,{v7_prependBasename:!0}),history:Sx({window:void 0}),hydrationData:qk(),routes:t,mapRouteProperties:$k,unstable_dataStrategy:void 0,window:void 0}).initialize()}function qk(){var t;let e=(t=window)==null?void 0:t.__staticRouterHydrationData;return e&&e.errors&&(e=Jl({},e,{errors:Gk(e.errors)})),e}function Gk(t){if(!t)return null;let e=Object.entries(t),n={};for(let[r,i]of e)if(i&&i.__type==="RouteErrorResponse")n[r]=new wg(i.status,i.statusText,i.data,i.internal===!0);else if(i&&i.__type==="Error"){if(i.__subType){let s=window[i.__subType];if(typeof s=="function")try{let o=new s(i.message);o.stack="",n[r]=o}catch{}}if(n[r]==null){let s=new Error(i.message);s.stack="",n[r]=s}}else n[r]=i;return n}const Kk=D.createContext({isTransitioning:!1}),Qk=D.createContext(new Map),Xk="startTransition",t0=f2[Xk],Yk="flushSync",n0=Ix[Yk];function Jk(t){t0?t0(t):t()}function Za(t){n0?n0(t):t()}let Zk=class{constructor(){this.status="pending",this.promise=new Promise((e,n)=>{this.resolve=r=>{this.status==="pending"&&(this.status="resolved",e(r))},this.reject=r=>{this.status==="pending"&&(this.status="rejected",n(r))}})}};function eP(t){let{fallbackElement:e,router:n,future:r}=t,[i,s]=D.useState(n.state),[o,a]=D.useState(),[l,c]=D.useState({isTransitioning:!1}),[h,f]=D.useState(),[p,w]=D.useState(),[E,S]=D.useState(),R=D.useRef(new Map),{v7_startTransition:T}=r||{},_=D.useCallback(g=>{T?Jk(g):g()},[T]),C=D.useCallback((g,y)=>{let{deletedFetchers:b,unstable_flushSync:I,unstable_viewTransitionOpts:k}=y;b.forEach(A=>R.current.delete(A)),g.fetchers.forEach((A,Ie)=>{A.data!==void 0&&R.current.set(Ie,A.data)});let P=n.window==null||n.window.document==null||typeof n.window.document.startViewTransition!="function";if(!k||P){I?Za(()=>s(g)):_(()=>s(g));return}if(I){Za(()=>{p&&(h&&h.resolve(),p.skipTransition()),c({isTransitioning:!0,flushSync:!0,currentLocation:k.currentLocation,nextLocation:k.nextLocation})});let A=n.window.document.startViewTransition(()=>{Za(()=>s(g))});A.finished.finally(()=>{Za(()=>{f(void 0),w(void 0),a(void 0),c({isTransitioning:!1})})}),Za(()=>w(A));return}p?(h&&h.resolve(),p.skipTransition(),S({state:g,currentLocation:k.currentLocation,nextLocation:k.nextLocation})):(a(g),c({isTransitioning:!0,flushSync:!1,currentLocation:k.currentLocation,nextLocation:k.nextLocation}))},[n.window,p,h,R,_]);D.useLayoutEffect(()=>n.subscribe(C),[n,C]),D.useEffect(()=>{l.isTransitioning&&!l.flushSync&&f(new Zk)},[l]),D.useEffect(()=>{if(h&&o&&n.window){let g=o,y=h.promise,b=n.window.document.startViewTransition(async()=>{_(()=>s(g)),await y});b.finished.finally(()=>{f(void 0),w(void 0),a(void 0),c({isTransitioning:!1})}),w(b)}},[_,o,h,n.window]),D.useEffect(()=>{h&&o&&i.location.key===o.location.key&&h.resolve()},[h,p,i.location,o]),D.useEffect(()=>{!l.isTransitioning&&E&&(a(E.state),c({isTransitioning:!0,flushSync:!1,currentLocation:E.currentLocation,nextLocation:E.nextLocation}),S(void 0))},[l.isTransitioning,E]),D.useEffect(()=>{},[]);let L=D.useMemo(()=>({createHref:n.createHref,encodeLocation:n.encodeLocation,go:g=>n.navigate(g),push:(g,y,b)=>n.navigate(g,{state:y,preventScrollReset:b==null?void 0:b.preventScrollReset}),replace:(g,y,b)=>n.navigate(g,{replace:!0,state:y,preventScrollReset:b==null?void 0:b.preventScrollReset})}),[n]),F=n.basename||"/",z=D.useMemo(()=>({router:n,navigator:L,static:!1,basename:F}),[n,L,F]);return D.createElement(D.Fragment,null,D.createElement(sd.Provider,{value:z},D.createElement(Sb.Provider,{value:i},D.createElement(Qk.Provider,{value:R.current},D.createElement(Kk.Provider,{value:l},D.createElement(Uk,{basename:F,location:i.location,navigationType:i.historyAction,navigator:L,future:{v7_relativeSplatPath:n.future.v7_relativeSplatPath}},i.initialized||n.future.v7_partialHydration?D.createElement(tP,{routes:n.routes,future:n.future,state:i}):e))))),null)}function tP(t){let{routes:e,future:n,state:r}=t;return Ik(e,void 0,r,n)}const nP=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",rP=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,_h=D.forwardRef(function(e,n){let{onClick:r,relative:i,reloadDocument:s,replace:o,state:a,target:l,to:c,preventScrollReset:h,unstable_viewTransition:f}=e,p=Fk(e,Bk),{basename:w}=D.useContext(Yi),E,S=!1;if(typeof c=="string"&&rP.test(c)&&(E=c,nP))try{let C=new URL(window.location.href),L=c.startsWith("//")?new URL(C.protocol+c):new URL(c),F=pa(L.pathname,w);L.origin===C.origin&&F!=null?c=F+L.search+L.hash:S=!0}catch{}let R=Ek(c,{relative:i}),T=iP(c,{replace:o,state:a,target:l,preventScrollReset:h,relative:i,unstable_viewTransition:f});function _(C){r&&r(C),C.defaultPrevented||T(C)}return D.createElement("a",Jl({},p,{href:E||R,onClick:S||s?r:_,ref:n,target:l}))});var r0;(function(t){t.UseScrollRestoration="useScrollRestoration",t.UseSubmit="useSubmit",t.UseSubmitFetcher="useSubmitFetcher",t.UseFetcher="useFetcher",t.useViewTransitionState="useViewTransitionState"})(r0||(r0={}));var i0;(function(t){t.UseFetcher="useFetcher",t.UseFetchers="useFetchers",t.UseScrollRestoration="useScrollRestoration"})(i0||(i0={}));function iP(t,e){let{target:n,replace:r,state:i,preventScrollReset:s,relative:o,unstable_viewTransition:a}=e===void 0?{}:e,l=gu(),c=Hs(),h=kb(t,{relative:o});return D.useCallback(f=>{if(zk(f,n)){f.preventDefault();let p=r!==void 0?r:Ns(c)===Ns(h);l(t,{replace:p,state:i,preventScrollReset:s,relative:o,unstable_viewTransition:a})}},[c,l,h,r,i,n,t,s,o,a])}function Ob(t){var e,n,r="";if(typeof t=="string"||typeof t=="number")r+=t;else if(typeof t=="object")if(Array.isArray(t)){var i=t.length;for(e=0;e<i;e++)t[e]&&(n=Ob(t[e]))&&(r&&(r+=" "),r+=n)}else for(n in t)t[n]&&(r&&(r+=" "),r+=n);return r}function sP(){for(var t,e,n=0,r="",i=arguments.length;n<i;n++)(t=arguments[n])&&(e=Ob(t))&&(r&&(r+=" "),r+=e);return r}const Ig="-";function oP(t){const e=lP(t),{conflictingClassGroups:n,conflictingClassGroupModifiers:r}=t;function i(o){const a=o.split(Ig);return a[0]===""&&a.length!==1&&a.shift(),Nb(a,e)||aP(o)}function s(o,a){const l=n[o]||[];return a&&r[o]?[...l,...r[o]]:l}return{getClassGroupId:i,getConflictingClassGroupIds:s}}function Nb(t,e){var o;if(t.length===0)return e.classGroupId;const n=t[0],r=e.nextPart.get(n),i=r?Nb(t.slice(1),r):void 0;if(i)return i;if(e.validators.length===0)return;const s=t.join(Ig);return(o=e.validators.find(({validator:a})=>a(s)))==null?void 0:o.classGroupId}const s0=/^\[(.+)\]$/;function aP(t){if(s0.test(t)){const e=s0.exec(t)[1],n=e==null?void 0:e.substring(0,e.indexOf(":"));if(n)return"arbitrary.."+n}}function lP(t){const{theme:e,prefix:n}=t,r={nextPart:new Map,validators:[]};return cP(Object.entries(t.classGroups),n).forEach(([s,o])=>{Wp(o,r,s,e)}),r}function Wp(t,e,n,r){t.forEach(i=>{if(typeof i=="string"){const s=i===""?e:o0(e,i);s.classGroupId=n;return}if(typeof i=="function"){if(uP(i)){Wp(i(r),e,n,r);return}e.validators.push({validator:i,classGroupId:n});return}Object.entries(i).forEach(([s,o])=>{Wp(o,o0(e,s),n,r)})})}function o0(t,e){let n=t;return e.split(Ig).forEach(r=>{n.nextPart.has(r)||n.nextPart.set(r,{nextPart:new Map,validators:[]}),n=n.nextPart.get(r)}),n}function uP(t){return t.isThemeGetter}function cP(t,e){return e?t.map(([n,r])=>{const i=r.map(s=>typeof s=="string"?e+s:typeof s=="object"?Object.fromEntries(Object.entries(s).map(([o,a])=>[e+o,a])):s);return[n,i]}):t}function hP(t){if(t<1)return{get:()=>{},set:()=>{}};let e=0,n=new Map,r=new Map;function i(s,o){n.set(s,o),e++,e>t&&(e=0,r=n,n=new Map)}return{get(s){let o=n.get(s);if(o!==void 0)return o;if((o=r.get(s))!==void 0)return i(s,o),o},set(s,o){n.has(s)?n.set(s,o):i(s,o)}}}const Lb="!";function dP(t){const e=t.separator,n=e.length===1,r=e[0],i=e.length;return function(o){const a=[];let l=0,c=0,h;for(let S=0;S<o.length;S++){let R=o[S];if(l===0){if(R===r&&(n||o.slice(S,S+i)===e)){a.push(o.slice(c,S)),c=S+i;continue}if(R==="/"){h=S;continue}}R==="["?l++:R==="]"&&l--}const f=a.length===0?o:o.substring(c),p=f.startsWith(Lb),w=p?f.substring(1):f,E=h&&h>c?h-c:void 0;return{modifiers:a,hasImportantModifier:p,baseClassName:w,maybePostfixModifierPosition:E}}}function fP(t){if(t.length<=1)return t;const e=[];let n=[];return t.forEach(r=>{r[0]==="["?(e.push(...n.sort(),r),n=[]):n.push(r)}),e.push(...n.sort()),e}function pP(t){return{cache:hP(t.cacheSize),splitModifiers:dP(t),...oP(t)}}const mP=/\s+/;function gP(t,e){const{splitModifiers:n,getClassGroupId:r,getConflictingClassGroupIds:i}=e,s=new Set;return t.trim().split(mP).map(o=>{const{modifiers:a,hasImportantModifier:l,baseClassName:c,maybePostfixModifierPosition:h}=n(o);let f=r(h?c.substring(0,h):c),p=!!h;if(!f){if(!h)return{isTailwindClass:!1,originalClassName:o};if(f=r(c),!f)return{isTailwindClass:!1,originalClassName:o};p=!1}const w=fP(a).join(":");return{isTailwindClass:!0,modifierId:l?w+Lb:w,classGroupId:f,originalClassName:o,hasPostfixModifier:p}}).reverse().filter(o=>{if(!o.isTailwindClass)return!0;const{modifierId:a,classGroupId:l,hasPostfixModifier:c}=o,h=a+l;return s.has(h)?!1:(s.add(h),i(l,c).forEach(f=>s.add(a+f)),!0)}).reverse().map(o=>o.originalClassName).join(" ")}function yP(){let t=0,e,n,r="";for(;t<arguments.length;)(e=arguments[t++])&&(n=Db(e))&&(r&&(r+=" "),r+=n);return r}function Db(t){if(typeof t=="string")return t;let e,n="";for(let r=0;r<t.length;r++)t[r]&&(e=Db(t[r]))&&(n&&(n+=" "),n+=e);return n}function vP(t,...e){let n,r,i,s=o;function o(l){const c=e.reduce((h,f)=>f(h),t());return n=pP(c),r=n.cache.get,i=n.cache.set,s=a,a(l)}function a(l){const c=r(l);if(c)return c;const h=gP(l,n);return i(l,h),h}return function(){return s(yP.apply(null,arguments))}}function Ue(t){const e=n=>n[t]||[];return e.isThemeGetter=!0,e}const Mb=/^\[(?:([a-z-]+):)?(.+)\]$/i,_P=/^\d+\/\d+$/,wP=new Set(["px","full","screen"]),EP=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,bP=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,TP=/^(rgba?|hsla?|hwb|(ok)?(lab|lch))\(.+\)$/,CP=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,IP=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/;function br(t){return _s(t)||wP.has(t)||_P.test(t)}function ai(t){return ga(t,"length",NP)}function _s(t){return!!t&&!Number.isNaN(Number(t))}function dc(t){return ga(t,"number",_s)}function el(t){return!!t&&Number.isInteger(Number(t))}function SP(t){return t.endsWith("%")&&_s(t.slice(0,-1))}function de(t){return Mb.test(t)}function li(t){return EP.test(t)}const AP=new Set(["length","size","percentage"]);function xP(t){return ga(t,AP,Vb)}function kP(t){return ga(t,"position",Vb)}const PP=new Set(["image","url"]);function RP(t){return ga(t,PP,DP)}function OP(t){return ga(t,"",LP)}function tl(){return!0}function ga(t,e,n){const r=Mb.exec(t);return r?r[1]?typeof e=="string"?r[1]===e:e.has(r[1]):n(r[2]):!1}function NP(t){return bP.test(t)&&!TP.test(t)}function Vb(){return!1}function LP(t){return CP.test(t)}function DP(t){return IP.test(t)}function MP(){const t=Ue("colors"),e=Ue("spacing"),n=Ue("blur"),r=Ue("brightness"),i=Ue("borderColor"),s=Ue("borderRadius"),o=Ue("borderSpacing"),a=Ue("borderWidth"),l=Ue("contrast"),c=Ue("grayscale"),h=Ue("hueRotate"),f=Ue("invert"),p=Ue("gap"),w=Ue("gradientColorStops"),E=Ue("gradientColorStopPositions"),S=Ue("inset"),R=Ue("margin"),T=Ue("opacity"),_=Ue("padding"),C=Ue("saturate"),L=Ue("scale"),F=Ue("sepia"),z=Ue("skew"),g=Ue("space"),y=Ue("translate"),b=()=>["auto","contain","none"],I=()=>["auto","hidden","clip","visible","scroll"],k=()=>["auto",de,e],P=()=>[de,e],A=()=>["",br,ai],Ie=()=>["auto",_s,de],it=()=>["bottom","center","left","left-bottom","left-top","right","right-bottom","right-top","top"],Ht=()=>["solid","dashed","dotted","double","none"],_t=()=>["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],H=()=>["start","end","center","between","around","evenly","stretch"],ee=()=>["","0",de],re=()=>["auto","avoid","all","avoid-page","page","left","right","column"],_e=()=>[_s,dc],he=()=>[_s,de];return{cacheSize:500,separator:":",theme:{colors:[tl],spacing:[br,ai],blur:["none","",li,de],brightness:_e(),borderColor:[t],borderRadius:["none","","full",li,de],borderSpacing:P(),borderWidth:A(),contrast:_e(),grayscale:ee(),hueRotate:he(),invert:ee(),gap:P(),gradientColorStops:[t],gradientColorStopPositions:[SP,ai],inset:k(),margin:k(),opacity:_e(),padding:P(),saturate:_e(),scale:_e(),sepia:ee(),skew:he(),space:P(),translate:P()},classGroups:{aspect:[{aspect:["auto","square","video",de]}],container:["container"],columns:[{columns:[li]}],"break-after":[{"break-after":re()}],"break-before":[{"break-before":re()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:[...it(),de]}],overflow:[{overflow:I()}],"overflow-x":[{"overflow-x":I()}],"overflow-y":[{"overflow-y":I()}],overscroll:[{overscroll:b()}],"overscroll-x":[{"overscroll-x":b()}],"overscroll-y":[{"overscroll-y":b()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:[S]}],"inset-x":[{"inset-x":[S]}],"inset-y":[{"inset-y":[S]}],start:[{start:[S]}],end:[{end:[S]}],top:[{top:[S]}],right:[{right:[S]}],bottom:[{bottom:[S]}],left:[{left:[S]}],visibility:["visible","invisible","collapse"],z:[{z:["auto",el,de]}],basis:[{basis:k()}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["wrap","wrap-reverse","nowrap"]}],flex:[{flex:["1","auto","initial","none",de]}],grow:[{grow:ee()}],shrink:[{shrink:ee()}],order:[{order:["first","last","none",el,de]}],"grid-cols":[{"grid-cols":[tl]}],"col-start-end":[{col:["auto",{span:["full",el,de]},de]}],"col-start":[{"col-start":Ie()}],"col-end":[{"col-end":Ie()}],"grid-rows":[{"grid-rows":[tl]}],"row-start-end":[{row:["auto",{span:[el,de]},de]}],"row-start":[{"row-start":Ie()}],"row-end":[{"row-end":Ie()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":["auto","min","max","fr",de]}],"auto-rows":[{"auto-rows":["auto","min","max","fr",de]}],gap:[{gap:[p]}],"gap-x":[{"gap-x":[p]}],"gap-y":[{"gap-y":[p]}],"justify-content":[{justify:["normal",...H()]}],"justify-items":[{"justify-items":["start","end","center","stretch"]}],"justify-self":[{"justify-self":["auto","start","end","center","stretch"]}],"align-content":[{content:["normal",...H(),"baseline"]}],"align-items":[{items:["start","end","center","baseline","stretch"]}],"align-self":[{self:["auto","start","end","center","stretch","baseline"]}],"place-content":[{"place-content":[...H(),"baseline"]}],"place-items":[{"place-items":["start","end","center","baseline","stretch"]}],"place-self":[{"place-self":["auto","start","end","center","stretch"]}],p:[{p:[_]}],px:[{px:[_]}],py:[{py:[_]}],ps:[{ps:[_]}],pe:[{pe:[_]}],pt:[{pt:[_]}],pr:[{pr:[_]}],pb:[{pb:[_]}],pl:[{pl:[_]}],m:[{m:[R]}],mx:[{mx:[R]}],my:[{my:[R]}],ms:[{ms:[R]}],me:[{me:[R]}],mt:[{mt:[R]}],mr:[{mr:[R]}],mb:[{mb:[R]}],ml:[{ml:[R]}],"space-x":[{"space-x":[g]}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":[g]}],"space-y-reverse":["space-y-reverse"],w:[{w:["auto","min","max","fit","svw","lvw","dvw",de,e]}],"min-w":[{"min-w":[de,e,"min","max","fit"]}],"max-w":[{"max-w":[de,e,"none","full","min","max","fit","prose",{screen:[li]},li]}],h:[{h:[de,e,"auto","min","max","fit","svh","lvh","dvh"]}],"min-h":[{"min-h":[de,e,"min","max","fit","svh","lvh","dvh"]}],"max-h":[{"max-h":[de,e,"min","max","fit","svh","lvh","dvh"]}],size:[{size:[de,e,"auto","min","max","fit"]}],"font-size":[{text:["base",li,ai]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:["thin","extralight","light","normal","medium","semibold","bold","extrabold","black",dc]}],"font-family":[{font:[tl]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractons"],tracking:[{tracking:["tighter","tight","normal","wide","wider","widest",de]}],"line-clamp":[{"line-clamp":["none",_s,dc]}],leading:[{leading:["none","tight","snug","normal","relaxed","loose",br,de]}],"list-image":[{"list-image":["none",de]}],"list-style-type":[{list:["none","disc","decimal",de]}],"list-style-position":[{list:["inside","outside"]}],"placeholder-color":[{placeholder:[t]}],"placeholder-opacity":[{"placeholder-opacity":[T]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"text-color":[{text:[t]}],"text-opacity":[{"text-opacity":[T]}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[...Ht(),"wavy"]}],"text-decoration-thickness":[{decoration:["auto","from-font",br,ai]}],"underline-offset":[{"underline-offset":["auto",br,de]}],"text-decoration-color":[{decoration:[t]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:P()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",de]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",de]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-opacity":[{"bg-opacity":[T]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:[...it(),kP]}],"bg-repeat":[{bg:["no-repeat",{repeat:["","x","y","round","space"]}]}],"bg-size":[{bg:["auto","cover","contain",xP]}],"bg-image":[{bg:["none",{"gradient-to":["t","tr","r","br","b","bl","l","tl"]},RP]}],"bg-color":[{bg:[t]}],"gradient-from-pos":[{from:[E]}],"gradient-via-pos":[{via:[E]}],"gradient-to-pos":[{to:[E]}],"gradient-from":[{from:[w]}],"gradient-via":[{via:[w]}],"gradient-to":[{to:[w]}],rounded:[{rounded:[s]}],"rounded-s":[{"rounded-s":[s]}],"rounded-e":[{"rounded-e":[s]}],"rounded-t":[{"rounded-t":[s]}],"rounded-r":[{"rounded-r":[s]}],"rounded-b":[{"rounded-b":[s]}],"rounded-l":[{"rounded-l":[s]}],"rounded-ss":[{"rounded-ss":[s]}],"rounded-se":[{"rounded-se":[s]}],"rounded-ee":[{"rounded-ee":[s]}],"rounded-es":[{"rounded-es":[s]}],"rounded-tl":[{"rounded-tl":[s]}],"rounded-tr":[{"rounded-tr":[s]}],"rounded-br":[{"rounded-br":[s]}],"rounded-bl":[{"rounded-bl":[s]}],"border-w":[{border:[a]}],"border-w-x":[{"border-x":[a]}],"border-w-y":[{"border-y":[a]}],"border-w-s":[{"border-s":[a]}],"border-w-e":[{"border-e":[a]}],"border-w-t":[{"border-t":[a]}],"border-w-r":[{"border-r":[a]}],"border-w-b":[{"border-b":[a]}],"border-w-l":[{"border-l":[a]}],"border-opacity":[{"border-opacity":[T]}],"border-style":[{border:[...Ht(),"hidden"]}],"divide-x":[{"divide-x":[a]}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":[a]}],"divide-y-reverse":["divide-y-reverse"],"divide-opacity":[{"divide-opacity":[T]}],"divide-style":[{divide:Ht()}],"border-color":[{border:[i]}],"border-color-x":[{"border-x":[i]}],"border-color-y":[{"border-y":[i]}],"border-color-t":[{"border-t":[i]}],"border-color-r":[{"border-r":[i]}],"border-color-b":[{"border-b":[i]}],"border-color-l":[{"border-l":[i]}],"divide-color":[{divide:[i]}],"outline-style":[{outline:["",...Ht()]}],"outline-offset":[{"outline-offset":[br,de]}],"outline-w":[{outline:[br,ai]}],"outline-color":[{outline:[t]}],"ring-w":[{ring:A()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:[t]}],"ring-opacity":[{"ring-opacity":[T]}],"ring-offset-w":[{"ring-offset":[br,ai]}],"ring-offset-color":[{"ring-offset":[t]}],shadow:[{shadow:["","inner","none",li,OP]}],"shadow-color":[{shadow:[tl]}],opacity:[{opacity:[T]}],"mix-blend":[{"mix-blend":[..._t(),"plus-lighter","plus-darker"]}],"bg-blend":[{"bg-blend":_t()}],filter:[{filter:["","none"]}],blur:[{blur:[n]}],brightness:[{brightness:[r]}],contrast:[{contrast:[l]}],"drop-shadow":[{"drop-shadow":["","none",li,de]}],grayscale:[{grayscale:[c]}],"hue-rotate":[{"hue-rotate":[h]}],invert:[{invert:[f]}],saturate:[{saturate:[C]}],sepia:[{sepia:[F]}],"backdrop-filter":[{"backdrop-filter":["","none"]}],"backdrop-blur":[{"backdrop-blur":[n]}],"backdrop-brightness":[{"backdrop-brightness":[r]}],"backdrop-contrast":[{"backdrop-contrast":[l]}],"backdrop-grayscale":[{"backdrop-grayscale":[c]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[h]}],"backdrop-invert":[{"backdrop-invert":[f]}],"backdrop-opacity":[{"backdrop-opacity":[T]}],"backdrop-saturate":[{"backdrop-saturate":[C]}],"backdrop-sepia":[{"backdrop-sepia":[F]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":[o]}],"border-spacing-x":[{"border-spacing-x":[o]}],"border-spacing-y":[{"border-spacing-y":[o]}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["none","all","","colors","opacity","shadow","transform",de]}],duration:[{duration:he()}],ease:[{ease:["linear","in","out","in-out",de]}],delay:[{delay:he()}],animate:[{animate:["none","spin","ping","pulse","bounce",de]}],transform:[{transform:["","gpu","none"]}],scale:[{scale:[L]}],"scale-x":[{"scale-x":[L]}],"scale-y":[{"scale-y":[L]}],rotate:[{rotate:[el,de]}],"translate-x":[{"translate-x":[y]}],"translate-y":[{"translate-y":[y]}],"skew-x":[{"skew-x":[z]}],"skew-y":[{"skew-y":[z]}],"transform-origin":[{origin:["center","top","top-right","right","bottom-right","bottom","bottom-left","left","top-left",de]}],accent:[{accent:["auto",t]}],appearance:[{appearance:["none","auto"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",de]}],"caret-color":[{caret:[t]}],"pointer-events":[{"pointer-events":["none","auto"]}],resize:[{resize:["none","y","x",""]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":P()}],"scroll-mx":[{"scroll-mx":P()}],"scroll-my":[{"scroll-my":P()}],"scroll-ms":[{"scroll-ms":P()}],"scroll-me":[{"scroll-me":P()}],"scroll-mt":[{"scroll-mt":P()}],"scroll-mr":[{"scroll-mr":P()}],"scroll-mb":[{"scroll-mb":P()}],"scroll-ml":[{"scroll-ml":P()}],"scroll-p":[{"scroll-p":P()}],"scroll-px":[{"scroll-px":P()}],"scroll-py":[{"scroll-py":P()}],"scroll-ps":[{"scroll-ps":P()}],"scroll-pe":[{"scroll-pe":P()}],"scroll-pt":[{"scroll-pt":P()}],"scroll-pr":[{"scroll-pr":P()}],"scroll-pb":[{"scroll-pb":P()}],"scroll-pl":[{"scroll-pl":P()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",de]}],fill:[{fill:[t,"none"]}],"stroke-w":[{stroke:[br,ai,dc]}],stroke:[{stroke:[t,"none"]}],sr:["sr-only","not-sr-only"],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]}}}const VP=vP(MP);function gn(...t){return VP(sP(t))}function Jo(){return Jo=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Jo.apply(null,arguments)}function UP(t,e){typeof t=="function"?t(e):t!=null&&(t.current=e)}function $P(...t){return e=>t.forEach(n=>UP(n,e))}const Sg=D.forwardRef((t,e)=>{const{children:n,...r}=t,i=D.Children.toArray(n),s=i.find(jP);if(s){const o=s.props.children,a=i.map(l=>l===s?D.Children.count(o)>1?D.Children.only(null):D.isValidElement(o)?o.props.children:null:l);return D.createElement(qp,Jo({},r,{ref:e}),D.isValidElement(o)?D.cloneElement(o,void 0,a):null)}return D.createElement(qp,Jo({},r,{ref:e}),n)});Sg.displayName="Slot";const qp=D.forwardRef((t,e)=>{const{children:n,...r}=t;return D.isValidElement(n)?D.cloneElement(n,{...zP(r,n.props),ref:e?$P(e,n.ref):n.ref}):D.Children.count(n)>1?D.Children.only(null):null});qp.displayName="SlotClone";const FP=({children:t})=>D.createElement(D.Fragment,null,t);function jP(t){return D.isValidElement(t)&&t.type===FP}function zP(t,e){const n={...e};for(const r in e){const i=t[r],s=e[r];/^on[A-Z]/.test(r)?i&&s?n[r]=(...a)=>{s(...a),i(...a)}:i&&(n[r]=i):r==="style"?n[r]={...i,...s}:r==="className"&&(n[r]=[i,s].filter(Boolean).join(" "))}return{...t,...n}}function Ub(t){var e,n,r="";if(typeof t=="string"||typeof t=="number")r+=t;else if(typeof t=="object")if(Array.isArray(t))for(e=0;e<t.length;e++)t[e]&&(n=Ub(t[e]))&&(r&&(r+=" "),r+=n);else for(e in t)t[e]&&(r&&(r+=" "),r+=e);return r}function BP(){for(var t,e,n=0,r="";n<arguments.length;)(t=arguments[n++])&&(e=Ub(t))&&(r&&(r+=" "),r+=e);return r}const a0=t=>typeof t=="boolean"?"".concat(t):t===0?"0":t,l0=BP,$b=(t,e)=>n=>{var r;if((e==null?void 0:e.variants)==null)return l0(t,n==null?void 0:n.class,n==null?void 0:n.className);const{variants:i,defaultVariants:s}=e,o=Object.keys(i).map(c=>{const h=n==null?void 0:n[c],f=s==null?void 0:s[c];if(h===null)return null;const p=a0(h)||a0(f);return i[c][p]}),a=n&&Object.entries(n).reduce((c,h)=>{let[f,p]=h;return p===void 0||(c[f]=p),c},{}),l=e==null||(r=e.compoundVariants)===null||r===void 0?void 0:r.reduce((c,h)=>{let{class:f,className:p,...w}=h;return Object.entries(w).every(E=>{let[S,R]=E;return Array.isArray(R)?R.includes({...s,...a}[S]):{...s,...a}[S]===R})?[...c,f,p]:c},[]);return l0(t,o,l,n==null?void 0:n.class,n==null?void 0:n.className)},Gp=$b("inline-flex items-center justify-center whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),Zo=D.forwardRef(({className:t,variant:e,size:n,asChild:r=!1,...i},s)=>{const o=r?Sg:"button";return x.jsx(o,{className:gn(Gp({variant:e,size:n,className:t})),ref:s,...i})});Zo.displayName="Button";const HP="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20fill='none'%20viewBox='0%200%2024%2024'%20stroke-width='1.5'%20stroke='currentColor'%20class='size-6'%3e%3cpath%20stroke-linecap='round'%20stroke-linejoin='round'%20d='m2.25%2012%208.954-8.955c.44-.439%201.152-.439%201.591%200L21.75%2012M4.5%209.75v10.125c0%20.621.504%201.125%201.125%201.125H9.75v-4.875c0-.621.504-1.125%201.125-1.125h2.25c.621%200%201.125.504%201.125%201.125V21h4.125c.621%200%201.125-.504%201.125-1.125V9.75M8.25%2021h8.25'%20/%3e%3c/svg%3e",WP="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20fill='none'%20viewBox='0%200%2024%2024'%20stroke-width='1.5'%20stroke='currentColor'%20class='size-6'%3e%3cpath%20stroke-linecap='round'%20stroke-linejoin='round'%20d='M12%204.5v15m7.5-7.5h-15'%20/%3e%3c/svg%3e",qP="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20fill='none'%20viewBox='0%200%2024%2024'%20stroke-width='1.5'%20stroke='currentColor'%20class='size-6'%3e%3cpath%20stroke-linecap='round'%20stroke-linejoin='round'%20d='M6.827%206.175A2.31%202.31%200%200%201%205.186%207.23c-.38.054-.757.112-1.134.175C2.999%207.58%202.25%208.507%202.25%209.574V18a2.25%202.25%200%200%200%202.25%202.25h15A2.25%202.25%200%200%200%2021.75%2018V9.574c0-1.067-.75-1.994-1.802-2.169a47.865%2047.865%200%200%200-1.134-.175%202.31%202.31%200%200%201-1.64-1.055l-.822-1.316a2.192%202.192%200%200%200-1.736-1.039%2048.774%2048.774%200%200%200-5.232%200%202.192%202.192%200%200%200-1.736%201.039l-.821%201.316Z'%20/%3e%3cpath%20stroke-linecap='round'%20stroke-linejoin='round'%20d='M16.5%2012.75a4.5%204.5%200%201%201-9%200%204.5%204.5%200%200%201%209%200ZM18.75%2010.5h.008v.008h-.008V10.5Z'%20/%3e%3c/svg%3e",GP="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20fill='none'%20viewBox='0%200%2024%2024'%20stroke-width='1.5'%20stroke='currentColor'%20class='size-6'%3e%3cpath%20stroke-linecap='round'%20stroke-linejoin='round'%20d='M17.982%2018.725A7.488%207.488%200%200%200%2012%2015.75a7.488%207.488%200%200%200-5.982%202.975m11.963%200a9%209%200%201%200-11.963%200m11.963%200A8.966%208.966%200%200%201%2012%2021a8.966%208.966%200%200%201-5.982-2.275M15%209.75a3%203%200%201%201-6%200%203%203%200%200%201%206%200Z'%20/%3e%3c/svg%3e",KP="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20fill='none'%20viewBox='0%200%2024%2024'%20stroke-width='1.5'%20stroke='currentColor'%20class='size-6'%3e%3cpath%20stroke-linecap='round'%20stroke-linejoin='round'%20d='M14.857%2017.082a23.848%2023.848%200%200%200%205.454-1.31A8.967%208.967%200%200%201%2018%209.75V9A6%206%200%200%200%206%209v.75a8.967%208.967%200%200%201-2.312%206.022c1.733.64%203.56%201.085%205.455%201.31m5.714%200a24.255%2024.255%200%200%201-5.714%200m5.714%200a3%203%200%201%201-5.714%200'%20/%3e%3c/svg%3e",QP="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20fill='none'%20viewBox='0%200%2024%2024'%20stroke-width='1.5'%20stroke='currentColor'%20class='size-6'%3e%3cpath%20stroke-linecap='round'%20stroke-linejoin='round'%20d='M6%2012%203.269%203.125A59.769%2059.769%200%200%201%2021.485%2012%2059.768%2059.768%200%200%201%203.27%2020.875L5.999%2012Zm0%200h7.5'%20/%3e%3c/svg%3e",XP="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20fill='none'%20viewBox='0%200%2024%2024'%20stroke-width='1.5'%20stroke='currentColor'%20class='size-6'%3e%3cpath%20stroke-linecap='round'%20stroke-linejoin='round'%20d='M10.343%203.94c.09-.542.56-.94%201.11-.94h1.093c.55%200%201.02.398%201.11.94l.149.894c.07.424.384.764.78.93.398.164.855.142%201.205-.108l.737-.527a1.125%201.125%200%200%201%201.45.12l.773.774c.39.389.44%201.002.12%201.45l-.527.737c-.25.35-.272.806-.107%201.204.165.397.505.71.93.78l.893.15c.543.09.94.559.94%201.109v1.094c0%20.55-.397%201.02-.94%201.11l-.894.149c-.424.07-.764.383-.929.78-.165.398-.143.854.107%201.204l.527.738c.32.447.269%201.06-.12%201.45l-.774.773a1.125%201.125%200%200%201-1.449.12l-.738-.527c-.35-.25-.806-.272-1.203-.107-.398.165-.71.505-.781.929l-.149.894c-.09.542-.56.94-1.11.94h-1.094c-.55%200-1.019-.398-1.11-.94l-.148-.894c-.071-.424-.384-.764-.781-.93-.398-.164-.854-.142-1.204.108l-.738.527c-.447.32-1.06.269-1.45-.12l-.773-.774a1.125%201.125%200%200%201-.12-1.45l.527-.737c.25-.35.272-.806.108-1.204-.165-.397-.506-.71-.93-.78l-.894-.15c-.542-.09-.94-.56-.94-1.109v-1.094c0-.55.398-1.02.94-1.11l.894-.149c.424-.07.765-.383.93-.78.165-.398.143-.854-.108-1.204l-.526-.738a1.125%201.125%200%200%201%20.12-1.45l.773-.773a1.125%201.125%200%200%201%201.45-.12l.737.527c.35.25.807.272%201.204.107.397-.165.71-.505.78-.929l.15-.894Z'%20/%3e%3cpath%20stroke-linecap='round'%20stroke-linejoin='round'%20d='M15%2012a3%203%200%201%201-6%200%203%203%200%200%201%206%200Z'%20/%3e%3c/svg%3e",YP=[{name:"Home",link:"/edelgram/",icon:HP},{name:"Add photos",link:"/edelgram/createpost",icon:WP},{name:"My photos",link:"/edelgram/myphotos",icon:qP},{name:"Profile",link:"/edelgram/profile",icon:GP},{name:"Notifications",link:"#",icon:KP},{name:"Direct",link:"#",icon:QP},{name:"Settings",link:"#",icon:XP}];var u0={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Fb=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let i=t.charCodeAt(r);i<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=i&63|128):(i&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=i&63|128):(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=i&63|128)}return e},JP=function(t){const e=[];let n=0,r=0;for(;n<t.length;){const i=t[n++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){const s=t[n++];e[r++]=String.fromCharCode((i&31)<<6|s&63)}else if(i>239&&i<365){const s=t[n++],o=t[n++],a=t[n++],l=((i&7)<<18|(s&63)<<12|(o&63)<<6|a&63)-65536;e[r++]=String.fromCharCode(55296+(l>>10)),e[r++]=String.fromCharCode(56320+(l&1023))}else{const s=t[n++],o=t[n++];e[r++]=String.fromCharCode((i&15)<<12|(s&63)<<6|o&63)}}return e.join("")},jb={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<t.length;i+=3){const s=t[i],o=i+1<t.length,a=o?t[i+1]:0,l=i+2<t.length,c=l?t[i+2]:0,h=s>>2,f=(s&3)<<4|a>>4;let p=(a&15)<<2|c>>6,w=c&63;l||(w=64,o||(p=64)),r.push(n[h],n[f],n[p],n[w])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(Fb(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):JP(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<t.length;){const s=n[t.charAt(i++)],a=i<t.length?n[t.charAt(i)]:0;++i;const c=i<t.length?n[t.charAt(i)]:64;++i;const f=i<t.length?n[t.charAt(i)]:64;if(++i,s==null||a==null||c==null||f==null)throw new ZP;const p=s<<2|a>>4;if(r.push(p),c!==64){const w=a<<4&240|c>>2;if(r.push(w),f!==64){const E=c<<6&192|f;r.push(E)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class ZP extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const eR=function(t){const e=Fb(t);return jb.encodeByteArray(e,!0)},wh=function(t){return eR(t).replace(/\./g,"")},zb=function(t){try{return jb.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tR(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nR=()=>tR().__FIREBASE_DEFAULTS__,rR=()=>{if(typeof process>"u"||typeof u0>"u")return;const t=u0.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},iR=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&zb(t[1]);return e&&JSON.parse(e)},od=()=>{try{return nR()||rR()||iR()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},Bb=t=>{var e,n;return(n=(e=od())===null||e===void 0?void 0:e.emulatorHosts)===null||n===void 0?void 0:n[t]},sR=t=>{const e=Bb(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),r]:[e.substring(0,n),r]},Hb=()=>{var t;return(t=od())===null||t===void 0?void 0:t.config},Wb=t=>{var e;return(e=od())===null||e===void 0?void 0:e[`_${t}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oR{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function aR(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},r=e||"demo-project",i=t.iat||0,s=t.sub||t.user_id;if(!s)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:i,exp:i+3600,auth_time:i,sub:s,user_id:s,firebase:{sign_in_provider:"custom",identities:{}}},t);return[wh(JSON.stringify(n)),wh(JSON.stringify(o)),""].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Nt(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function lR(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Nt())}function uR(){var t;const e=(t=od())===null||t===void 0?void 0:t.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function cR(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function hR(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function dR(){const t=Nt();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function fR(){return!uR()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function pR(){try{return typeof indexedDB=="object"}catch{return!1}}function mR(){return new Promise((t,e)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},i.onupgradeneeded=()=>{n=!1},i.onerror=()=>{var s;e(((s=i.error)===null||s===void 0?void 0:s.message)||"")}}catch(n){e(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gR="FirebaseError";class Xr extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=gR,Object.setPrototypeOf(this,Xr.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,yu.prototype.create)}}class yu{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){const r=n[0]||{},i=`${this.service}/${e}`,s=this.errors[e],o=s?yR(s,r):"Error",a=`${this.serviceName}: ${o} (${i}).`;return new Xr(i,a,r)}}function yR(t,e){return t.replace(vR,(n,r)=>{const i=e[r];return i!=null?String(i):`<${r}?>`})}const vR=/\{\$([^}]+)}/g;function _R(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function Eh(t,e){if(t===e)return!0;const n=Object.keys(t),r=Object.keys(e);for(const i of n){if(!r.includes(i))return!1;const s=t[i],o=e[i];if(c0(s)&&c0(o)){if(!Eh(s,o))return!1}else if(s!==o)return!1}for(const i of r)if(!n.includes(i))return!1;return!0}function c0(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vu(t){const e=[];for(const[n,r]of Object.entries(t))Array.isArray(r)?r.forEach(i=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(i))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function hl(t){const e={};return t.replace(/^\?/,"").split("&").forEach(r=>{if(r){const[i,s]=r.split("=");e[decodeURIComponent(i)]=decodeURIComponent(s)}}),e}function dl(t){const e=t.indexOf("?");if(!e)return"";const n=t.indexOf("#",e);return t.substring(e,n>0?n:void 0)}function wR(t,e){const n=new ER(t,e);return n.subscribe.bind(n)}class ER{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,r){let i;if(e===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");bR(e,["next","error","complete"])?i=e:i={next:e,error:n,complete:r},i.next===void 0&&(i.next=Pf),i.error===void 0&&(i.error=Pf),i.complete===void 0&&(i.complete=Pf);const s=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),s}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function bR(t,e){if(typeof t!="object"||t===null)return!1;for(const n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function Pf(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Yt(t){return t&&t._delegate?t._delegate:t}class Ls{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fs="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TR{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const r=new oR;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const i=this.getOrInitializeService({instanceIdentifier:n});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){var n;const r=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),i=(n=e==null?void 0:e.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(s){if(i)return null;throw s}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(IR(e))try{this.getOrInitializeService({instanceIdentifier:fs})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const i=this.normalizeInstanceIdentifier(n);try{const s=this.getOrInitializeService({instanceIdentifier:i});r.resolve(s)}catch{}}}}clearInstance(e=fs){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=fs){return this.instances.has(e)}getOptions(e=fs){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const i=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[s,o]of this.instancesDeferred.entries()){const a=this.normalizeInstanceIdentifier(s);r===a&&o.resolve(i)}return i}onInit(e,n){var r;const i=this.normalizeInstanceIdentifier(n),s=(r=this.onInitCallbacks.get(i))!==null&&r!==void 0?r:new Set;s.add(e),this.onInitCallbacks.set(i,s);const o=this.instances.get(i);return o&&e(o,i),()=>{s.delete(e)}}invokeOnInitCallbacks(e,n){const r=this.onInitCallbacks.get(n);if(r)for(const i of r)try{i(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:CR(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=fs){return this.component?this.component.multipleInstances?e:fs:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function CR(t){return t===fs?void 0:t}function IR(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SR{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new TR(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Ee;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(Ee||(Ee={}));const AR={debug:Ee.DEBUG,verbose:Ee.VERBOSE,info:Ee.INFO,warn:Ee.WARN,error:Ee.ERROR,silent:Ee.SILENT},xR=Ee.INFO,kR={[Ee.DEBUG]:"log",[Ee.VERBOSE]:"log",[Ee.INFO]:"info",[Ee.WARN]:"warn",[Ee.ERROR]:"error"},PR=(t,e,...n)=>{if(e<t.logLevel)return;const r=new Date().toISOString(),i=kR[e];if(i)console[i](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class Ag{constructor(e){this.name=e,this._logLevel=xR,this._logHandler=PR,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Ee))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?AR[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Ee.DEBUG,...e),this._logHandler(this,Ee.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Ee.VERBOSE,...e),this._logHandler(this,Ee.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Ee.INFO,...e),this._logHandler(this,Ee.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Ee.WARN,...e),this._logHandler(this,Ee.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Ee.ERROR,...e),this._logHandler(this,Ee.ERROR,...e)}}const RR=(t,e)=>e.some(n=>t instanceof n);let h0,d0;function OR(){return h0||(h0=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function NR(){return d0||(d0=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const qb=new WeakMap,Kp=new WeakMap,Gb=new WeakMap,Rf=new WeakMap,xg=new WeakMap;function LR(t){const e=new Promise((n,r)=>{const i=()=>{t.removeEventListener("success",s),t.removeEventListener("error",o)},s=()=>{n(Ri(t.result)),i()},o=()=>{r(t.error),i()};t.addEventListener("success",s),t.addEventListener("error",o)});return e.then(n=>{n instanceof IDBCursor&&qb.set(n,t)}).catch(()=>{}),xg.set(e,t),e}function DR(t){if(Kp.has(t))return;const e=new Promise((n,r)=>{const i=()=>{t.removeEventListener("complete",s),t.removeEventListener("error",o),t.removeEventListener("abort",o)},s=()=>{n(),i()},o=()=>{r(t.error||new DOMException("AbortError","AbortError")),i()};t.addEventListener("complete",s),t.addEventListener("error",o),t.addEventListener("abort",o)});Kp.set(t,e)}let Qp={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return Kp.get(t);if(e==="objectStoreNames")return t.objectStoreNames||Gb.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Ri(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function MR(t){Qp=t(Qp)}function VR(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const r=t.call(Of(this),e,...n);return Gb.set(r,e.sort?e.sort():[e]),Ri(r)}:NR().includes(t)?function(...e){return t.apply(Of(this),e),Ri(qb.get(this))}:function(...e){return Ri(t.apply(Of(this),e))}}function UR(t){return typeof t=="function"?VR(t):(t instanceof IDBTransaction&&DR(t),RR(t,OR())?new Proxy(t,Qp):t)}function Ri(t){if(t instanceof IDBRequest)return LR(t);if(Rf.has(t))return Rf.get(t);const e=UR(t);return e!==t&&(Rf.set(t,e),xg.set(e,t)),e}const Of=t=>xg.get(t);function $R(t,e,{blocked:n,upgrade:r,blocking:i,terminated:s}={}){const o=indexedDB.open(t,e),a=Ri(o);return r&&o.addEventListener("upgradeneeded",l=>{r(Ri(o.result),l.oldVersion,l.newVersion,Ri(o.transaction),l)}),n&&o.addEventListener("blocked",l=>n(l.oldVersion,l.newVersion,l)),a.then(l=>{s&&l.addEventListener("close",()=>s()),i&&l.addEventListener("versionchange",c=>i(c.oldVersion,c.newVersion,c))}).catch(()=>{}),a}const FR=["get","getKey","getAll","getAllKeys","count"],jR=["put","add","delete","clear"],Nf=new Map;function f0(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(Nf.get(e))return Nf.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,i=jR.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(i||FR.includes(n)))return;const s=async function(o,...a){const l=this.transaction(o,i?"readwrite":"readonly");let c=l.store;return r&&(c=c.index(a.shift())),(await Promise.all([c[n](...a),i&&l.done]))[0]};return Nf.set(e,s),s}MR(t=>({...t,get:(e,n,r)=>f0(e,n)||t.get(e,n,r),has:(e,n)=>!!f0(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zR{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(BR(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function BR(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const Xp="@firebase/app",p0="0.10.5";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ds=new Ag("@firebase/app"),HR="@firebase/app-compat",WR="@firebase/analytics-compat",qR="@firebase/analytics",GR="@firebase/app-check-compat",KR="@firebase/app-check",QR="@firebase/auth",XR="@firebase/auth-compat",YR="@firebase/database",JR="@firebase/database-compat",ZR="@firebase/functions",eO="@firebase/functions-compat",tO="@firebase/installations",nO="@firebase/installations-compat",rO="@firebase/messaging",iO="@firebase/messaging-compat",sO="@firebase/performance",oO="@firebase/performance-compat",aO="@firebase/remote-config",lO="@firebase/remote-config-compat",uO="@firebase/storage",cO="@firebase/storage-compat",hO="@firebase/firestore",dO="@firebase/vertexai-preview",fO="@firebase/firestore-compat",pO="firebase",mO="10.12.2";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Yp="[DEFAULT]",gO={[Xp]:"fire-core",[HR]:"fire-core-compat",[qR]:"fire-analytics",[WR]:"fire-analytics-compat",[KR]:"fire-app-check",[GR]:"fire-app-check-compat",[QR]:"fire-auth",[XR]:"fire-auth-compat",[YR]:"fire-rtdb",[JR]:"fire-rtdb-compat",[ZR]:"fire-fn",[eO]:"fire-fn-compat",[tO]:"fire-iid",[nO]:"fire-iid-compat",[rO]:"fire-fcm",[iO]:"fire-fcm-compat",[sO]:"fire-perf",[oO]:"fire-perf-compat",[aO]:"fire-rc",[lO]:"fire-rc-compat",[uO]:"fire-gcs",[cO]:"fire-gcs-compat",[hO]:"fire-fst",[fO]:"fire-fst-compat",[dO]:"fire-vertex","fire-js":"fire-js",[pO]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bh=new Map,yO=new Map,Jp=new Map;function m0(t,e){try{t.container.addComponent(e)}catch(n){Ds.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function ea(t){const e=t.name;if(Jp.has(e))return Ds.debug(`There were multiple attempts to register component ${e}.`),!1;Jp.set(e,t);for(const n of bh.values())m0(n,t);for(const n of yO.values())m0(n,t);return!0}function kg(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function Hn(t){return t.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vO={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Oi=new yu("app","Firebase",vO);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _O{constructor(e,n,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new Ls("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Oi.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ya=mO;function Kb(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const r=Object.assign({name:Yp,automaticDataCollectionEnabled:!1},e),i=r.name;if(typeof i!="string"||!i)throw Oi.create("bad-app-name",{appName:String(i)});if(n||(n=Hb()),!n)throw Oi.create("no-options");const s=bh.get(i);if(s){if(Eh(n,s.options)&&Eh(r,s.config))return s;throw Oi.create("duplicate-app",{appName:i})}const o=new SR(i);for(const l of Jp.values())o.addComponent(l);const a=new _O(n,r,o);return bh.set(i,a),a}function Qb(t=Yp){const e=bh.get(t);if(!e&&t===Yp&&Hb())return Kb();if(!e)throw Oi.create("no-app",{appName:t});return e}function Ni(t,e,n){var r;let i=(r=gO[t])!==null&&r!==void 0?r:t;n&&(i+=`-${n}`);const s=i.match(/\s|\//),o=e.match(/\s|\//);if(s||o){const a=[`Unable to register library "${i}" with version "${e}":`];s&&a.push(`library name "${i}" contains illegal characters (whitespace or "/")`),s&&o&&a.push("and"),o&&a.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Ds.warn(a.join(" "));return}ea(new Ls(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wO="firebase-heartbeat-database",EO=1,Zl="firebase-heartbeat-store";let Lf=null;function Xb(){return Lf||(Lf=$R(wO,EO,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(Zl)}catch(n){console.warn(n)}}}}).catch(t=>{throw Oi.create("idb-open",{originalErrorMessage:t.message})})),Lf}async function bO(t){try{const n=(await Xb()).transaction(Zl),r=await n.objectStore(Zl).get(Yb(t));return await n.done,r}catch(e){if(e instanceof Xr)Ds.warn(e.message);else{const n=Oi.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});Ds.warn(n.message)}}}async function g0(t,e){try{const r=(await Xb()).transaction(Zl,"readwrite");await r.objectStore(Zl).put(e,Yb(t)),await r.done}catch(n){if(n instanceof Xr)Ds.warn(n.message);else{const r=Oi.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});Ds.warn(r.message)}}}function Yb(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const TO=1024,CO=30*24*60*60*1e3;class IO{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new AO(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,n;const i=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),s=y0();if(!(((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null))&&!(this._heartbeatsCache.lastSentHeartbeatDate===s||this._heartbeatsCache.heartbeats.some(o=>o.date===s)))return this._heartbeatsCache.heartbeats.push({date:s,agent:i}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(o=>{const a=new Date(o.date).valueOf();return Date.now()-a<=CO}),this._storage.overwrite(this._heartbeatsCache)}async getHeartbeatsHeader(){var e;if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=y0(),{heartbeatsToSend:r,unsentEntries:i}=SO(this._heartbeatsCache.heartbeats),s=wh(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=n,i.length>0?(this._heartbeatsCache.heartbeats=i,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),s}}function y0(){return new Date().toISOString().substring(0,10)}function SO(t,e=TO){const n=[];let r=t.slice();for(const i of t){const s=n.find(o=>o.agent===i.agent);if(s){if(s.dates.push(i.date),v0(n)>e){s.dates.pop();break}}else if(n.push({agent:i.agent,dates:[i.date]}),v0(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class AO{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return pR()?mR().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await bO(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var n;if(await this._canUseIndexedDBPromise){const i=await this.read();return g0(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var n;if(await this._canUseIndexedDBPromise){const i=await this.read();return g0(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...e.heartbeats]})}else return}}function v0(t){return wh(JSON.stringify({version:2,heartbeats:t})).length}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xO(t){ea(new Ls("platform-logger",e=>new zR(e),"PRIVATE")),ea(new Ls("heartbeat",e=>new IO(e),"PRIVATE")),Ni(Xp,p0,t),Ni(Xp,p0,"esm2017"),Ni("fire-js","")}xO("");var kO="firebase",PO="10.12.2";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Ni(kO,PO,"app");function Pg(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n}function Jb(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const RO=Jb,Zb=new yu("auth","Firebase",Jb());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Th=new Ag("@firebase/auth");function OO(t,...e){Th.logLevel<=Ee.WARN&&Th.warn(`Auth (${ya}): ${t}`,...e)}function Mc(t,...e){Th.logLevel<=Ee.ERROR&&Th.error(`Auth (${ya}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ln(t,...e){throw Og(t,...e)}function Kn(t,...e){return Og(t,...e)}function Rg(t,e,n){const r=Object.assign(Object.assign({},RO()),{[e]:n});return new yu("auth","Firebase",r).create(e,{appName:t.name})}function Vr(t){return Rg(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function NO(t,e,n){const r=n;if(!(e instanceof r))throw r.name!==e.constructor.name&&Ln(t,"argument-error"),Rg(t,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function Og(t,...e){if(typeof t!="string"){const n=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=t.name),t._errorFactory.create(n,...r)}return Zb.create(t,...e)}function se(t,e,...n){if(!t)throw Og(e,...n)}function Or(t){const e="INTERNAL ASSERTION FAILED: "+t;throw Mc(e),new Error(e)}function Br(t,e){t||Or(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Zp(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.href)||""}function LO(){return _0()==="http:"||_0()==="https:"}function _0(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function DO(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(LO()||cR()||"connection"in navigator)?navigator.onLine:!0}function MO(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _u{constructor(e,n){this.shortDelay=e,this.longDelay=n,Br(n>e,"Short delay should be less than long delay!"),this.isMobile=lR()||hR()}get(){return DO()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ng(t,e){Br(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eT{static initialize(e,n,r){this.fetchImpl=e,n&&(this.headersImpl=n),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Or("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Or("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Or("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const VO={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const UO=new _u(3e4,6e4);function Ji(t,e){return t.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:t.tenantId}):e}async function Zi(t,e,n,r,i={}){return tT(t,i,async()=>{let s={},o={};r&&(e==="GET"?o=r:s={body:JSON.stringify(r)});const a=vu(Object.assign({key:t.config.apiKey},o)).slice(1),l=await t._getAdditionalHeaders();return l["Content-Type"]="application/json",t.languageCode&&(l["X-Firebase-Locale"]=t.languageCode),eT.fetch()(nT(t,t.config.apiHost,n,a),Object.assign({method:e,headers:l,referrerPolicy:"no-referrer"},s))})}async function tT(t,e,n){t._canInitEmulator=!1;const r=Object.assign(Object.assign({},VO),e);try{const i=new FO(t),s=await Promise.race([n(),i.promise]);i.clearNetworkTimeout();const o=await s.json();if("needConfirmation"in o)throw fc(t,"account-exists-with-different-credential",o);if(s.ok&&!("errorMessage"in o))return o;{const a=s.ok?o.errorMessage:o.error.message,[l,c]=a.split(" : ");if(l==="FEDERATED_USER_ID_ALREADY_LINKED")throw fc(t,"credential-already-in-use",o);if(l==="EMAIL_EXISTS")throw fc(t,"email-already-in-use",o);if(l==="USER_DISABLED")throw fc(t,"user-disabled",o);const h=r[l]||l.toLowerCase().replace(/[_\s]+/g,"-");if(c)throw Rg(t,h,c);Ln(t,h)}}catch(i){if(i instanceof Xr)throw i;Ln(t,"network-request-failed",{message:String(i)})}}async function wu(t,e,n,r,i={}){const s=await Zi(t,e,n,r,i);return"mfaPendingCredential"in s&&Ln(t,"multi-factor-auth-required",{_serverResponse:s}),s}function nT(t,e,n,r){const i=`${e}${n}?${r}`;return t.config.emulator?Ng(t.config,i):`${t.config.apiScheme}://${i}`}function $O(t){switch(t){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class FO{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,r)=>{this.timer=setTimeout(()=>r(Kn(this.auth,"network-request-failed")),UO.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function fc(t,e,n){const r={appName:t.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const i=Kn(t,e,r);return i.customData._tokenResponse=n,i}function w0(t){return t!==void 0&&t.enterprise!==void 0}class jO{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const n of this.recaptchaEnforcementState)if(n.provider&&n.provider===e)return $O(n.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}}async function zO(t,e){return Zi(t,"GET","/v2/recaptchaConfig",Ji(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function BO(t,e){return Zi(t,"POST","/v1/accounts:delete",e)}async function rT(t,e){return Zi(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kl(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function HO(t,e=!1){const n=Yt(t),r=await n.getIdToken(e),i=Lg(r);se(i&&i.exp&&i.auth_time&&i.iat,n.auth,"internal-error");const s=typeof i.firebase=="object"?i.firebase:void 0,o=s==null?void 0:s.sign_in_provider;return{claims:i,token:r,authTime:kl(Df(i.auth_time)),issuedAtTime:kl(Df(i.iat)),expirationTime:kl(Df(i.exp)),signInProvider:o||null,signInSecondFactor:(s==null?void 0:s.sign_in_second_factor)||null}}function Df(t){return Number(t)*1e3}function Lg(t){const[e,n,r]=t.split(".");if(e===void 0||n===void 0||r===void 0)return Mc("JWT malformed, contained fewer than 3 sections"),null;try{const i=zb(n);return i?JSON.parse(i):(Mc("Failed to decode base64 JWT payload"),null)}catch(i){return Mc("Caught error parsing JWT payload as JSON",i==null?void 0:i.toString()),null}}function E0(t){const e=Lg(t);return se(e,"internal-error"),se(typeof e.exp<"u","internal-error"),se(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function eu(t,e,n=!1){if(n)return e;try{return await e}catch(r){throw r instanceof Xr&&WO(r)&&t.auth.currentUser===t&&await t.auth.signOut(),r}}function WO({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qO{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var n;if(e){const r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;const i=((n=this.user.stsTokenManager.expirationTime)!==null&&n!==void 0?n:0)-Date.now()-3e5;return Math.max(0,i)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class em{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=kl(this.lastLoginAt),this.creationTime=kl(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ch(t){var e;const n=t.auth,r=await t.getIdToken(),i=await eu(t,rT(n,{idToken:r}));se(i==null?void 0:i.users.length,n,"internal-error");const s=i.users[0];t._notifyReloadListener(s);const o=!((e=s.providerUserInfo)===null||e===void 0)&&e.length?iT(s.providerUserInfo):[],a=KO(t.providerData,o),l=t.isAnonymous,c=!(t.email&&s.passwordHash)&&!(a!=null&&a.length),h=l?c:!1,f={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:a,metadata:new em(s.createdAt,s.lastLoginAt),isAnonymous:h};Object.assign(t,f)}async function GO(t){const e=Yt(t);await Ch(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function KO(t,e){return[...t.filter(r=>!e.some(i=>i.providerId===r.providerId)),...e]}function iT(t){return t.map(e=>{var{providerId:n}=e,r=Pg(e,["providerId"]);return{providerId:n,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function QO(t,e){const n=await tT(t,{},async()=>{const r=vu({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:i,apiKey:s}=t.config,o=nT(t,i,"/v1/token",`key=${s}`),a=await t._getAdditionalHeaders();return a["Content-Type"]="application/x-www-form-urlencoded",eT.fetch()(o,{method:"POST",headers:a,body:r})});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function XO(t,e){return Zi(t,"POST","/v2/accounts:revokeToken",Ji(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fo{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){se(e.idToken,"internal-error"),se(typeof e.idToken<"u","internal-error"),se(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):E0(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){se(e.length!==0,"internal-error");const n=E0(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(se(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:r,refreshToken:i,expiresIn:s}=await QO(e,n);this.updateTokensAndExpiration(r,i,Number(s))}updateTokensAndExpiration(e,n,r){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,n){const{refreshToken:r,accessToken:i,expirationTime:s}=n,o=new Fo;return r&&(se(typeof r=="string","internal-error",{appName:e}),o.refreshToken=r),i&&(se(typeof i=="string","internal-error",{appName:e}),o.accessToken=i),s&&(se(typeof s=="number","internal-error",{appName:e}),o.expirationTime=s),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Fo,this.toJSON())}_performRefresh(){return Or("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ui(t,e){se(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class Nr{constructor(e){var{uid:n,auth:r,stsTokenManager:i}=e,s=Pg(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new qO(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=r,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=s.displayName||null,this.email=s.email||null,this.emailVerified=s.emailVerified||!1,this.phoneNumber=s.phoneNumber||null,this.photoURL=s.photoURL||null,this.isAnonymous=s.isAnonymous||!1,this.tenantId=s.tenantId||null,this.providerData=s.providerData?[...s.providerData]:[],this.metadata=new em(s.createdAt||void 0,s.lastLoginAt||void 0)}async getIdToken(e){const n=await eu(this,this.stsTokenManager.getToken(this.auth,e));return se(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return HO(this,e)}reload(){return GO(this)}_assign(e){this!==e&&(se(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>Object.assign({},n)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new Nr(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return n.metadata._copy(this.metadata),n}_onReload(e){se(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),n&&await Ch(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(Hn(this.auth.app))return Promise.reject(Vr(this.auth));const e=await this.getIdToken();return await eu(this,BO(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){var r,i,s,o,a,l,c,h;const f=(r=n.displayName)!==null&&r!==void 0?r:void 0,p=(i=n.email)!==null&&i!==void 0?i:void 0,w=(s=n.phoneNumber)!==null&&s!==void 0?s:void 0,E=(o=n.photoURL)!==null&&o!==void 0?o:void 0,S=(a=n.tenantId)!==null&&a!==void 0?a:void 0,R=(l=n._redirectEventId)!==null&&l!==void 0?l:void 0,T=(c=n.createdAt)!==null&&c!==void 0?c:void 0,_=(h=n.lastLoginAt)!==null&&h!==void 0?h:void 0,{uid:C,emailVerified:L,isAnonymous:F,providerData:z,stsTokenManager:g}=n;se(C&&g,e,"internal-error");const y=Fo.fromJSON(this.name,g);se(typeof C=="string",e,"internal-error"),ui(f,e.name),ui(p,e.name),se(typeof L=="boolean",e,"internal-error"),se(typeof F=="boolean",e,"internal-error"),ui(w,e.name),ui(E,e.name),ui(S,e.name),ui(R,e.name),ui(T,e.name),ui(_,e.name);const b=new Nr({uid:C,auth:e,email:p,emailVerified:L,displayName:f,isAnonymous:F,photoURL:E,phoneNumber:w,tenantId:S,stsTokenManager:y,createdAt:T,lastLoginAt:_});return z&&Array.isArray(z)&&(b.providerData=z.map(I=>Object.assign({},I))),R&&(b._redirectEventId=R),b}static async _fromIdTokenResponse(e,n,r=!1){const i=new Fo;i.updateFromServerResponse(n);const s=new Nr({uid:n.localId,auth:e,stsTokenManager:i,isAnonymous:r});return await Ch(s),s}static async _fromGetAccountInfoResponse(e,n,r){const i=n.users[0];se(i.localId!==void 0,"internal-error");const s=i.providerUserInfo!==void 0?iT(i.providerUserInfo):[],o=!(i.email&&i.passwordHash)&&!(s!=null&&s.length),a=new Fo;a.updateFromIdToken(r);const l=new Nr({uid:i.localId,auth:e,stsTokenManager:a,isAnonymous:o}),c={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:s,metadata:new em(i.createdAt,i.lastLoginAt),isAnonymous:!(i.email&&i.passwordHash)&&!(s!=null&&s.length)};return Object.assign(l,c),l}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const b0=new Map;function Lr(t){Br(t instanceof Function,"Expected a class definition");let e=b0.get(t);return e?(Br(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,b0.set(t,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sT{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}sT.type="NONE";const T0=sT;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Vc(t,e,n){return`firebase:${t}:${e}:${n}`}class jo{constructor(e,n,r){this.persistence=e,this.auth=n,this.userKey=r;const{config:i,name:s}=this.auth;this.fullUserKey=Vc(this.userKey,i.apiKey,s),this.fullPersistenceKey=Vc("persistence",i.apiKey,s),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);return e?Nr._fromJSON(this.auth,e):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,r="authUser"){if(!n.length)return new jo(Lr(T0),e,r);const i=(await Promise.all(n.map(async c=>{if(await c._isAvailable())return c}))).filter(c=>c);let s=i[0]||Lr(T0);const o=Vc(r,e.config.apiKey,e.name);let a=null;for(const c of n)try{const h=await c._get(o);if(h){const f=Nr._fromJSON(e,h);c!==s&&(a=f),s=c;break}}catch{}const l=i.filter(c=>c._shouldAllowMigration);return!s._shouldAllowMigration||!l.length?new jo(s,e,r):(s=l[0],a&&await s._set(o,a.toJSON()),await Promise.all(n.map(async c=>{if(c!==s)try{await c._remove(o)}catch{}})),new jo(s,e,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function C0(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(lT(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(oT(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(cT(e))return"Blackberry";if(hT(e))return"Webos";if(Dg(e))return"Safari";if((e.includes("chrome/")||aT(e))&&!e.includes("edge/"))return"Chrome";if(uT(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=t.match(n);if((r==null?void 0:r.length)===2)return r[1]}return"Other"}function oT(t=Nt()){return/firefox\//i.test(t)}function Dg(t=Nt()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function aT(t=Nt()){return/crios\//i.test(t)}function lT(t=Nt()){return/iemobile/i.test(t)}function uT(t=Nt()){return/android/i.test(t)}function cT(t=Nt()){return/blackberry/i.test(t)}function hT(t=Nt()){return/webos/i.test(t)}function ad(t=Nt()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function YO(t=Nt()){var e;return ad(t)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function JO(){return dR()&&document.documentMode===10}function dT(t=Nt()){return ad(t)||uT(t)||hT(t)||cT(t)||/windows phone/i.test(t)||lT(t)}function ZO(){try{return!!(window&&window!==window.top)}catch{return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fT(t,e=[]){let n;switch(t){case"Browser":n=C0(Nt());break;case"Worker":n=`${C0(Nt())}-${t}`;break;default:n=t}const r=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${ya}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eN{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const r=s=>new Promise((o,a)=>{try{const l=e(s);o(l)}catch(l){a(l)}});r.onAbort=n,this.queue.push(r);const i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const r of this.queue)await r(e),r.onAbort&&n.push(r.onAbort)}catch(r){n.reverse();for(const i of n)try{i()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r==null?void 0:r.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function tN(t,e={}){return Zi(t,"GET","/v2/passwordPolicy",Ji(t,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nN=6;class rN{constructor(e){var n,r,i,s;const o=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(n=o.minPasswordLength)!==null&&n!==void 0?n:nN,o.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=o.maxPasswordLength),o.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=o.containsLowercaseCharacter),o.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=o.containsUppercaseCharacter),o.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=o.containsNumericCharacter),o.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=o.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(i=(r=e.allowedNonAlphanumericCharacters)===null||r===void 0?void 0:r.join(""))!==null&&i!==void 0?i:"",this.forceUpgradeOnSignin=(s=e.forceUpgradeOnSignin)!==null&&s!==void 0?s:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var n,r,i,s,o,a;const l={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,l),this.validatePasswordCharacterOptions(e,l),l.isValid&&(l.isValid=(n=l.meetsMinPasswordLength)!==null&&n!==void 0?n:!0),l.isValid&&(l.isValid=(r=l.meetsMaxPasswordLength)!==null&&r!==void 0?r:!0),l.isValid&&(l.isValid=(i=l.containsLowercaseLetter)!==null&&i!==void 0?i:!0),l.isValid&&(l.isValid=(s=l.containsUppercaseLetter)!==null&&s!==void 0?s:!0),l.isValid&&(l.isValid=(o=l.containsNumericCharacter)!==null&&o!==void 0?o:!0),l.isValid&&(l.isValid=(a=l.containsNonAlphanumericCharacter)!==null&&a!==void 0?a:!0),l}validatePasswordLengthOptions(e,n){const r=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;r&&(n.meetsMinPasswordLength=e.length>=r),i&&(n.meetsMaxPasswordLength=e.length<=i)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let r;for(let i=0;i<e.length;i++)r=e.charAt(i),this.updatePasswordCharacterOptionsStatuses(n,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,n,r,i,s){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iN{constructor(e,n,r,i){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=r,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new I0(this),this.idTokenSubscription=new I0(this),this.beforeStateQueue=new eN(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=Zb,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=i.sdkClientVersion}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=Lr(n)),this._initializationPromise=this.queue(async()=>{var r,i;if(!this._deleted&&(this.persistenceManager=await jo.create(this,e),!this._deleted)){if(!((r=this._popupRedirectResolver)===null||r===void 0)&&r._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((i=this.currentUser)===null||i===void 0?void 0:i.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await rT(this,{idToken:e}),r=await Nr._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(r)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var n;if(Hn(this.app)){const o=this.app.settings.authIdToken;return o?new Promise(a=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(o).then(a,a))}):this.directlySetCurrentUser(null)}const r=await this.assertedPersistence.getCurrentUser();let i=r,s=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const o=(n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId,a=i==null?void 0:i._redirectEventId,l=await this.tryRedirectSignIn(e);(!o||o===a)&&(l!=null&&l.user)&&(i=l.user,s=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(s)try{await this.beforeStateQueue.runMiddleware(i)}catch(o){i=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return se(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await Ch(e)}catch(n){if((n==null?void 0:n.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=MO()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(Hn(this.app))return Promise.reject(Vr(this));const n=e?Yt(e):null;return n&&se(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&se(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return Hn(this.app)?Promise.reject(Vr(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return Hn(this.app)?Promise.reject(Vr(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Lr(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await tN(this),n=new rN(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new yu("auth","Firebase",e())}onAuthStateChanged(e,n,r){return this.registerStateListener(this.authStateSubscription,e,n,r)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,r){return this.registerStateListener(this.idTokenSubscription,e,n,r)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(r.tenantId=this.tenantId),await XO(this,r)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,n){const r=await this.getOrInitRedirectPersistenceManager(n);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&Lr(e)||this._popupRedirectResolver;se(n,this,"argument-error"),this.redirectPersistenceManager=await jo.create(this,[Lr(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var n,r;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)===null||n===void 0?void 0:n._redirectEventId)===e?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const r=(n=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&n!==void 0?n:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,r,i){if(this._deleted)return()=>{};const s=typeof n=="function"?n:n.next.bind(n);let o=!1;const a=this._isInitialized?Promise.resolve():this._initializationPromise;if(se(a,this,"internal-error"),a.then(()=>{o||s(this.currentUser)}),typeof n=="function"){const l=e.addObserver(n,r,i);return()=>{o=!0,l()}}else{const l=e.addObserver(n);return()=>{o=!0,l()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return se(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=fT(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const n={"X-Client-Version":this.clientVersion};this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId);const r=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());r&&(n["X-Firebase-Client"]=r);const i=await this._getAppCheckToken();return i&&(n["X-Firebase-AppCheck"]=i),n}async _getAppCheckToken(){var e;const n=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return n!=null&&n.error&&OO(`Error while retrieving App Check token: ${n.error}`),n==null?void 0:n.token}}function es(t){return Yt(t)}class I0{constructor(e){this.auth=e,this.observer=null,this.addObserver=wR(n=>this.observer=n)}get next(){return se(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let ld={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function sN(t){ld=t}function pT(t){return ld.loadJS(t)}function oN(){return ld.recaptchaEnterpriseScript}function aN(){return ld.gapiScript}function lN(t){return`__${t}${Math.floor(Math.random()*1e6)}`}const uN="recaptcha-enterprise",cN="NO_RECAPTCHA";class hN{constructor(e){this.type=uN,this.auth=es(e)}async verify(e="verify",n=!1){async function r(s){if(!n){if(s.tenantId==null&&s._agentRecaptchaConfig!=null)return s._agentRecaptchaConfig.siteKey;if(s.tenantId!=null&&s._tenantRecaptchaConfigs[s.tenantId]!==void 0)return s._tenantRecaptchaConfigs[s.tenantId].siteKey}return new Promise(async(o,a)=>{zO(s,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(l=>{if(l.recaptchaKey===void 0)a(new Error("recaptcha Enterprise site key undefined"));else{const c=new jO(l);return s.tenantId==null?s._agentRecaptchaConfig=c:s._tenantRecaptchaConfigs[s.tenantId]=c,o(c.siteKey)}}).catch(l=>{a(l)})})}function i(s,o,a){const l=window.grecaptcha;w0(l)?l.enterprise.ready(()=>{l.enterprise.execute(s,{action:e}).then(c=>{o(c)}).catch(()=>{o(cN)})}):a(Error("No reCAPTCHA enterprise script loaded."))}return new Promise((s,o)=>{r(this.auth).then(a=>{if(!n&&w0(window.grecaptcha))i(a,s,o);else{if(typeof window>"u"){o(new Error("RecaptchaVerifier is only supported in browser"));return}let l=oN();l.length!==0&&(l+=a),pT(l).then(()=>{i(a,s,o)}).catch(c=>{o(c)})}}).catch(a=>{o(a)})})}}async function S0(t,e,n,r=!1){const i=new hN(t);let s;try{s=await i.verify(n)}catch{s=await i.verify(n,!0)}const o=Object.assign({},e);return r?Object.assign(o,{captchaResp:s}):Object.assign(o,{captchaResponse:s}),Object.assign(o,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(o,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),o}async function tm(t,e,n,r){var i;if(!((i=t._getRecaptchaConfig())===null||i===void 0)&&i.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const s=await S0(t,e,n,n==="getOobCode");return r(t,s)}else return r(t,e).catch(async s=>{if(s.code==="auth/missing-recaptcha-token"){console.log(`${n} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const o=await S0(t,e,n,n==="getOobCode");return r(t,o)}else return Promise.reject(s)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dN(t,e){const n=kg(t,"auth");if(n.isInitialized()){const i=n.getImmediate(),s=n.getOptions();if(Eh(s,e??{}))return i;Ln(i,"already-initialized")}return n.initialize({options:e})}function fN(t,e){const n=(e==null?void 0:e.persistence)||[],r=(Array.isArray(n)?n:[n]).map(Lr);e!=null&&e.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(r,e==null?void 0:e.popupRedirectResolver)}function pN(t,e,n){const r=es(t);se(r._canInitEmulator,r,"emulator-config-failed"),se(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const i=!1,s=mT(e),{host:o,port:a}=mN(e),l=a===null?"":`:${a}`;r.config.emulator={url:`${s}//${o}${l}/`},r.settings.appVerificationDisabledForTesting=!0,r.emulatorConfig=Object.freeze({host:o,port:a,protocol:s.replace(":",""),options:Object.freeze({disableWarnings:i})}),gN()}function mT(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function mN(t){const e=mT(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){const s=i[1];return{host:s,port:A0(r.substr(s.length+1))}}else{const[s,o]=r.split(":");return{host:s,port:A0(o)}}}function A0(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function gN(){function t(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mg{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return Or("not implemented")}_getIdTokenResponse(e){return Or("not implemented")}_linkToIdToken(e,n){return Or("not implemented")}_getReauthenticationResolver(e){return Or("not implemented")}}async function yN(t,e){return Zi(t,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function vN(t,e){return wu(t,"POST","/v1/accounts:signInWithPassword",Ji(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function _N(t,e){return wu(t,"POST","/v1/accounts:signInWithEmailLink",Ji(t,e))}async function wN(t,e){return wu(t,"POST","/v1/accounts:signInWithEmailLink",Ji(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tu extends Mg{constructor(e,n,r,i=null){super("password",r),this._email=e,this._password=n,this._tenantId=i}static _fromEmailAndPassword(e,n){return new tu(e,n,"password")}static _fromEmailAndCode(e,n,r=null){return new tu(e,n,"emailLink",r)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e;if(n!=null&&n.email&&(n!=null&&n.password)){if(n.signInMethod==="password")return this._fromEmailAndPassword(n.email,n.password);if(n.signInMethod==="emailLink")return this._fromEmailAndCode(n.email,n.password,n.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const n={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return tm(e,n,"signInWithPassword",vN);case"emailLink":return _N(e,{email:this._email,oobCode:this._password});default:Ln(e,"internal-error")}}async _linkToIdToken(e,n){switch(this.signInMethod){case"password":const r={idToken:n,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return tm(e,r,"signUpPassword",yN);case"emailLink":return wN(e,{idToken:n,email:this._email,oobCode:this._password});default:Ln(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function zo(t,e){return wu(t,"POST","/v1/accounts:signInWithIdp",Ji(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const EN="http://localhost";class Ms extends Mg{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new Ms(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):Ln("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:i}=n,s=Pg(n,["providerId","signInMethod"]);if(!r||!i)return null;const o=new Ms(r,i);return o.idToken=s.idToken||void 0,o.accessToken=s.accessToken||void 0,o.secret=s.secret,o.nonce=s.nonce,o.pendingToken=s.pendingToken||null,o}_getIdTokenResponse(e){const n=this.buildRequest();return zo(e,n)}_linkToIdToken(e,n){const r=this.buildRequest();return r.idToken=n,zo(e,r)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,zo(e,n)}buildRequest(){const e={requestUri:EN,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=vu(n)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bN(t){switch(t){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function TN(t){const e=hl(dl(t)).link,n=e?hl(dl(e)).deep_link_id:null,r=hl(dl(t)).deep_link_id;return(r?hl(dl(r)).link:null)||r||n||e||t}class Vg{constructor(e){var n,r,i,s,o,a;const l=hl(dl(e)),c=(n=l.apiKey)!==null&&n!==void 0?n:null,h=(r=l.oobCode)!==null&&r!==void 0?r:null,f=bN((i=l.mode)!==null&&i!==void 0?i:null);se(c&&h&&f,"argument-error"),this.apiKey=c,this.operation=f,this.code=h,this.continueUrl=(s=l.continueUrl)!==null&&s!==void 0?s:null,this.languageCode=(o=l.languageCode)!==null&&o!==void 0?o:null,this.tenantId=(a=l.tenantId)!==null&&a!==void 0?a:null}static parseLink(e){const n=TN(e);try{return new Vg(n)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class va{constructor(){this.providerId=va.PROVIDER_ID}static credential(e,n){return tu._fromEmailAndPassword(e,n)}static credentialWithLink(e,n){const r=Vg.parseLink(n);return se(r,"argument-error"),tu._fromEmailAndCode(e,r.code,r.tenantId)}}va.PROVIDER_ID="password";va.EMAIL_PASSWORD_SIGN_IN_METHOD="password";va.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ug{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Eu extends Ug{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gi extends Eu{constructor(){super("facebook.com")}static credential(e){return Ms._fromParams({providerId:gi.PROVIDER_ID,signInMethod:gi.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return gi.credentialFromTaggedObject(e)}static credentialFromError(e){return gi.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return gi.credential(e.oauthAccessToken)}catch{return null}}}gi.FACEBOOK_SIGN_IN_METHOD="facebook.com";gi.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xr extends Eu{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return Ms._fromParams({providerId:xr.PROVIDER_ID,signInMethod:xr.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return xr.credentialFromTaggedObject(e)}static credentialFromError(e){return xr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:r}=e;if(!n&&!r)return null;try{return xr.credential(n,r)}catch{return null}}}xr.GOOGLE_SIGN_IN_METHOD="google.com";xr.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yi extends Eu{constructor(){super("github.com")}static credential(e){return Ms._fromParams({providerId:yi.PROVIDER_ID,signInMethod:yi.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return yi.credentialFromTaggedObject(e)}static credentialFromError(e){return yi.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return yi.credential(e.oauthAccessToken)}catch{return null}}}yi.GITHUB_SIGN_IN_METHOD="github.com";yi.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vi extends Eu{constructor(){super("twitter.com")}static credential(e,n){return Ms._fromParams({providerId:vi.PROVIDER_ID,signInMethod:vi.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return vi.credentialFromTaggedObject(e)}static credentialFromError(e){return vi.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:r}=e;if(!n||!r)return null;try{return vi.credential(n,r)}catch{return null}}}vi.TWITTER_SIGN_IN_METHOD="twitter.com";vi.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function CN(t,e){return wu(t,"POST","/v1/accounts:signUp",Ji(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vs{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,r,i=!1){const s=await Nr._fromIdTokenResponse(e,r,i),o=x0(r);return new Vs({user:s,providerId:o,_tokenResponse:r,operationType:n})}static async _forOperation(e,n,r){await e._updateTokensIfNecessary(r,!0);const i=x0(r);return new Vs({user:e,providerId:i,_tokenResponse:r,operationType:n})}}function x0(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ih extends Xr{constructor(e,n,r,i){var s;super(n.code,n.message),this.operationType=r,this.user=i,Object.setPrototypeOf(this,Ih.prototype),this.customData={appName:e.name,tenantId:(s=e.tenantId)!==null&&s!==void 0?s:void 0,_serverResponse:n.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,n,r,i){return new Ih(e,n,r,i)}}function gT(t,e,n,r){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(s=>{throw s.code==="auth/multi-factor-auth-required"?Ih._fromErrorAndOperation(t,s,e,r):s})}async function IN(t,e,n=!1){const r=await eu(t,e._linkToIdToken(t.auth,await t.getIdToken()),n);return Vs._forOperation(t,"link",r)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function SN(t,e,n=!1){const{auth:r}=t;if(Hn(r.app))return Promise.reject(Vr(r));const i="reauthenticate";try{const s=await eu(t,gT(r,i,e,t),n);se(s.idToken,r,"internal-error");const o=Lg(s.idToken);se(o,r,"internal-error");const{sub:a}=o;return se(t.uid===a,r,"user-mismatch"),Vs._forOperation(t,i,s)}catch(s){throw(s==null?void 0:s.code)==="auth/user-not-found"&&Ln(r,"user-mismatch"),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function yT(t,e,n=!1){if(Hn(t.app))return Promise.reject(Vr(t));const r="signIn",i=await gT(t,r,e),s=await Vs._fromIdTokenResponse(t,r,i);return n||await t._updateCurrentUser(s.user),s}async function AN(t,e){return yT(es(t),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function vT(t){const e=es(t);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function xN(t,e,n){if(Hn(t.app))return Promise.reject(Vr(t));const r=es(t),o=await tm(r,{returnSecureToken:!0,email:e,password:n,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",CN).catch(l=>{throw l.code==="auth/password-does-not-meet-requirements"&&vT(t),l}),a=await Vs._fromIdTokenResponse(r,"signIn",o);return await r._updateCurrentUser(a.user),a}function kN(t,e,n){return Hn(t.app)?Promise.reject(Vr(t)):AN(Yt(t),va.credential(e,n)).catch(async r=>{throw r.code==="auth/password-does-not-meet-requirements"&&vT(t),r})}function PN(t,e,n,r){return Yt(t).onIdTokenChanged(e,n,r)}function RN(t,e,n){return Yt(t).beforeAuthStateChanged(e,n)}function _T(t,e,n,r){return Yt(t).onAuthStateChanged(e,n,r)}function ON(t){return Yt(t).signOut()}const Sh="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wT{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(Sh,"1"),this.storage.removeItem(Sh),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function NN(){const t=Nt();return Dg(t)||ad(t)}const LN=1e3,DN=10;class ET extends wT{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=NN()&&ZO(),this.fallbackToPolling=dT(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const r=this.storage.getItem(n),i=this.localCache[n];r!==i&&e(n,i,r)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((o,a,l)=>{this.notifyListeners(o,l)});return}const r=e.key;if(n?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const o=this.storage.getItem(r);if(e.newValue!==o)e.newValue!==null?this.storage.setItem(r,e.newValue):this.storage.removeItem(r);else if(this.localCache[r]===e.newValue&&!n)return}const i=()=>{const o=this.storage.getItem(r);!n&&this.localCache[r]===o||this.notifyListeners(r,o)},s=this.storage.getItem(r);JO()&&s!==e.newValue&&e.newValue!==e.oldValue?setTimeout(i,DN):i()}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const i of Array.from(r))i(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:r}),!0)})},LN)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}ET.type="LOCAL";const MN=ET;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bT extends wT{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}bT.type="SESSION";const TT=bT;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function VN(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ud{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(i=>i.isListeningto(e));if(n)return n;const r=new ud(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:r,eventType:i,data:s}=n.data,o=this.handlersMap[i];if(!(o!=null&&o.size))return;n.ports[0].postMessage({status:"ack",eventId:r,eventType:i});const a=Array.from(o).map(async c=>c(n.origin,s)),l=await VN(a);n.ports[0].postMessage({status:"done",eventId:r,eventType:i,response:l})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}ud.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $g(t="",e=10){let n="";for(let r=0;r<e;r++)n+=Math.floor(Math.random()*10);return t+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UN{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,r=50){const i=typeof MessageChannel<"u"?new MessageChannel:null;if(!i)throw new Error("connection_unavailable");let s,o;return new Promise((a,l)=>{const c=$g("",20);i.port1.start();const h=setTimeout(()=>{l(new Error("unsupported_event"))},r);o={messageChannel:i,onMessage(f){const p=f;if(p.data.eventId===c)switch(p.data.status){case"ack":clearTimeout(h),s=setTimeout(()=>{l(new Error("timeout"))},3e3);break;case"done":clearTimeout(s),a(p.data.response);break;default:clearTimeout(h),clearTimeout(s),l(new Error("invalid_response"));break}}},this.handlers.add(o),i.port1.addEventListener("message",o.onMessage),this.target.postMessage({eventType:e,eventId:c,data:n},[i.port2])}).finally(()=>{o&&this.removeMessageHandler(o)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ur(){return window}function $N(t){ur().location.href=t}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function CT(){return typeof ur().WorkerGlobalScope<"u"&&typeof ur().importScripts=="function"}async function FN(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function jN(){var t;return((t=navigator==null?void 0:navigator.serviceWorker)===null||t===void 0?void 0:t.controller)||null}function zN(){return CT()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const IT="firebaseLocalStorageDb",BN=1,Ah="firebaseLocalStorage",ST="fbase_key";class bu{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function cd(t,e){return t.transaction([Ah],e?"readwrite":"readonly").objectStore(Ah)}function HN(){const t=indexedDB.deleteDatabase(IT);return new bu(t).toPromise()}function nm(){const t=indexedDB.open(IT,BN);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{const r=t.result;try{r.createObjectStore(Ah,{keyPath:ST})}catch(i){n(i)}}),t.addEventListener("success",async()=>{const r=t.result;r.objectStoreNames.contains(Ah)?e(r):(r.close(),await HN(),e(await nm()))})})}async function k0(t,e,n){const r=cd(t,!0).put({[ST]:e,value:n});return new bu(r).toPromise()}async function WN(t,e){const n=cd(t,!1).get(e),r=await new bu(n).toPromise();return r===void 0?null:r.value}function P0(t,e){const n=cd(t,!0).delete(e);return new bu(n).toPromise()}const qN=800,GN=3;class AT{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await nm(),this.db)}async _withRetries(e){let n=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(n++>GN)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return CT()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=ud._getInstance(zN()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){var e,n;if(this.activeServiceWorker=await FN(),!this.activeServiceWorker)return;this.sender=new UN(this.activeServiceWorker);const r=await this.sender._send("ping",{},800);r&&!((e=r[0])===null||e===void 0)&&e.fulfilled&&!((n=r[0])===null||n===void 0)&&n.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||jN()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await nm();return await k0(e,Sh,"1"),await P0(e,Sh),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(r=>k0(r,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(r=>WN(r,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>P0(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(i=>{const s=cd(i,!1).getAll();return new bu(s).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],r=new Set;if(e.length!==0)for(const{fbase_key:i,value:s}of e)r.add(i),JSON.stringify(this.localCache[i])!==JSON.stringify(s)&&(this.notifyListeners(i,s),n.push(i));for(const i of Object.keys(this.localCache))this.localCache[i]&&!r.has(i)&&(this.notifyListeners(i,null),n.push(i));return n}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const i of Array.from(r))i(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),qN)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}AT.type="LOCAL";const KN=AT;new _u(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xT(t,e){return e?Lr(e):(se(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fg extends Mg{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return zo(e,this._buildIdpRequest())}_linkToIdToken(e,n){return zo(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return zo(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function QN(t){return yT(t.auth,new Fg(t),t.bypassAuthState)}function XN(t){const{auth:e,user:n}=t;return se(n,e,"internal-error"),SN(n,new Fg(t),t.bypassAuthState)}async function YN(t){const{auth:e,user:n}=t;return se(n,e,"internal-error"),IN(n,new Fg(t),t.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kT{constructor(e,n,r,i,s=!1){this.auth=e,this.resolver=r,this.user=i,this.bypassAuthState=s,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:r,postBody:i,tenantId:s,error:o,type:a}=e;if(o){this.reject(o);return}const l={auth:this.auth,requestUri:n,sessionId:r,tenantId:s||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(a)(l))}catch(c){this.reject(c)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return QN;case"linkViaPopup":case"linkViaRedirect":return YN;case"reauthViaPopup":case"reauthViaRedirect":return XN;default:Ln(this.auth,"internal-error")}}resolve(e){Br(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Br(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const JN=new _u(2e3,1e4);async function ZN(t,e,n){if(Hn(t.app))return Promise.reject(Kn(t,"operation-not-supported-in-this-environment"));const r=es(t);NO(t,e,Ug);const i=xT(r,n);return new ws(r,"signInViaPopup",e,i).executeNotNull()}class ws extends kT{constructor(e,n,r,i,s){super(e,n,i,s),this.provider=r,this.authWindow=null,this.pollId=null,ws.currentPopupAction&&ws.currentPopupAction.cancel(),ws.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return se(e,this.auth,"internal-error"),e}async onExecution(){Br(this.filter.length===1,"Popup operations only handle one event");const e=$g();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(Kn(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(Kn(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,ws.currentPopupAction=null}pollUserCancellation(){const e=()=>{var n,r;if(!((r=(n=this.authWindow)===null||n===void 0?void 0:n.window)===null||r===void 0)&&r.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Kn(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,JN.get())};e()}}ws.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eL="pendingRedirect",Uc=new Map;class tL extends kT{constructor(e,n,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,r),this.eventId=null}async execute(){let e=Uc.get(this.auth._key());if(!e){try{const r=await nL(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(n){e=()=>Promise.reject(n)}Uc.set(this.auth._key(),e)}return this.bypassAuthState||Uc.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function nL(t,e){const n=sL(e),r=iL(t);if(!await r._isAvailable())return!1;const i=await r._get(n)==="true";return await r._remove(n),i}function rL(t,e){Uc.set(t._key(),e)}function iL(t){return Lr(t._redirectPersistence)}function sL(t){return Vc(eL,t.config.apiKey,t.name)}async function oL(t,e,n=!1){if(Hn(t.app))return Promise.reject(Vr(t));const r=es(t),i=xT(r,e),o=await new tL(r,i,n).execute();return o&&!n&&(delete o.user._redirectEventId,await r._persistUserIfCurrent(o.user),await r._setRedirectUser(null,e)),o}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aL=10*60*1e3;class lL{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(n=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!uL(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var r;if(e.error&&!PT(e)){const i=((r=e.error.code)===null||r===void 0?void 0:r.split("auth/")[1])||"internal-error";n.onError(Kn(this.auth,i))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const r=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=aL&&this.cachedEventUids.clear(),this.cachedEventUids.has(R0(e))}saveEventToCache(e){this.cachedEventUids.add(R0(e)),this.lastProcessedEventTime=Date.now()}}function R0(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function PT({type:t,error:e}){return t==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function uL(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return PT(t);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function cL(t,e={}){return Zi(t,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hL=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,dL=/^https?/;async function fL(t){if(t.config.emulator)return;const{authorizedDomains:e}=await cL(t);for(const n of e)try{if(pL(n))return}catch{}Ln(t,"unauthorized-domain")}function pL(t){const e=Zp(),{protocol:n,hostname:r}=new URL(e);if(t.startsWith("chrome-extension://")){const o=new URL(t);return o.hostname===""&&r===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&o.hostname===r}if(!dL.test(n))return!1;if(hL.test(t))return r===t;const i=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mL=new _u(3e4,6e4);function O0(){const t=ur().___jsl;if(t!=null&&t.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function gL(t){return new Promise((e,n)=>{var r,i,s;function o(){O0(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{O0(),n(Kn(t,"network-request-failed"))},timeout:mL.get()})}if(!((i=(r=ur().gapi)===null||r===void 0?void 0:r.iframes)===null||i===void 0)&&i.Iframe)e(gapi.iframes.getContext());else if(!((s=ur().gapi)===null||s===void 0)&&s.load)o();else{const a=lN("iframefcb");return ur()[a]=()=>{gapi.load?o():n(Kn(t,"network-request-failed"))},pT(`${aN()}?onload=${a}`).catch(l=>n(l))}}).catch(e=>{throw $c=null,e})}let $c=null;function yL(t){return $c=$c||gL(t),$c}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vL=new _u(5e3,15e3),_L="__/auth/iframe",wL="emulator/auth/iframe",EL={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},bL=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function TL(t){const e=t.config;se(e.authDomain,t,"auth-domain-config-required");const n=e.emulator?Ng(e,wL):`https://${t.config.authDomain}/${_L}`,r={apiKey:e.apiKey,appName:t.name,v:ya},i=bL.get(t.config.apiHost);i&&(r.eid=i);const s=t._getFrameworks();return s.length&&(r.fw=s.join(",")),`${n}?${vu(r).slice(1)}`}async function CL(t){const e=await yL(t),n=ur().gapi;return se(n,t,"internal-error"),e.open({where:document.body,url:TL(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:EL,dontclear:!0},r=>new Promise(async(i,s)=>{await r.restyle({setHideOnLeave:!1});const o=Kn(t,"network-request-failed"),a=ur().setTimeout(()=>{s(o)},vL.get());function l(){ur().clearTimeout(a),i(r)}r.ping(l).then(l,()=>{s(o)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const IL={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},SL=500,AL=600,xL="_blank",kL="http://localhost";class N0{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function PL(t,e,n,r=SL,i=AL){const s=Math.max((window.screen.availHeight-i)/2,0).toString(),o=Math.max((window.screen.availWidth-r)/2,0).toString();let a="";const l=Object.assign(Object.assign({},IL),{width:r.toString(),height:i.toString(),top:s,left:o}),c=Nt().toLowerCase();n&&(a=aT(c)?xL:n),oT(c)&&(e=e||kL,l.scrollbars="yes");const h=Object.entries(l).reduce((p,[w,E])=>`${p}${w}=${E},`,"");if(YO(c)&&a!=="_self")return RL(e||"",a),new N0(null);const f=window.open(e||"",a,h);se(f,t,"popup-blocked");try{f.focus()}catch{}return new N0(f)}function RL(t,e){const n=document.createElement("a");n.href=t,n.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const OL="__/auth/handler",NL="emulator/auth/handler",LL=encodeURIComponent("fac");async function L0(t,e,n,r,i,s){se(t.config.authDomain,t,"auth-domain-config-required"),se(t.config.apiKey,t,"invalid-api-key");const o={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:r,v:ya,eventId:i};if(e instanceof Ug){e.setDefaultLanguage(t.languageCode),o.providerId=e.providerId||"",_R(e.getCustomParameters())||(o.customParameters=JSON.stringify(e.getCustomParameters()));for(const[h,f]of Object.entries({}))o[h]=f}if(e instanceof Eu){const h=e.getScopes().filter(f=>f!=="");h.length>0&&(o.scopes=h.join(","))}t.tenantId&&(o.tid=t.tenantId);const a=o;for(const h of Object.keys(a))a[h]===void 0&&delete a[h];const l=await t._getAppCheckToken(),c=l?`#${LL}=${encodeURIComponent(l)}`:"";return`${DL(t)}?${vu(a).slice(1)}${c}`}function DL({config:t}){return t.emulator?Ng(t,NL):`https://${t.authDomain}/${OL}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Mf="webStorageSupport";class ML{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=TT,this._completeRedirectFn=oL,this._overrideRedirectResult=rL}async _openPopup(e,n,r,i){var s;Br((s=this.eventManagers[e._key()])===null||s===void 0?void 0:s.manager,"_initialize() not called before _openPopup()");const o=await L0(e,n,r,Zp(),i);return PL(e,o,$g())}async _openRedirect(e,n,r,i){await this._originValidation(e);const s=await L0(e,n,r,Zp(),i);return $N(s),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:i,promise:s}=this.eventManagers[n];return i?Promise.resolve(i):(Br(s,"If manager is not set, promise should be"),s)}const r=this.initAndGetManager(e);return this.eventManagers[n]={promise:r},r.catch(()=>{delete this.eventManagers[n]}),r}async initAndGetManager(e){const n=await CL(e),r=new lL(e);return n.register("authEvent",i=>(se(i==null?void 0:i.authEvent,e,"invalid-auth-event"),{status:r.onEvent(i.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=n,r}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(Mf,{type:Mf},i=>{var s;const o=(s=i==null?void 0:i[0])===null||s===void 0?void 0:s[Mf];o!==void 0&&n(!!o),Ln(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=fL(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return dT()||Dg()||ad()}}const VL=ML;var D0="@firebase/auth",M0="1.7.4";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UL{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(r=>{e((r==null?void 0:r.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){se(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $L(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function FL(t){ea(new Ls("auth",(e,{options:n})=>{const r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),s=e.getProvider("app-check-internal"),{apiKey:o,authDomain:a}=r.options;se(o&&!o.includes(":"),"invalid-api-key",{appName:r.name});const l={apiKey:o,authDomain:a,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:fT(t)},c=new iN(r,i,s,l);return fN(c,n),c},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,r)=>{e.getProvider("auth-internal").initialize()})),ea(new Ls("auth-internal",e=>{const n=es(e.getProvider("auth").getImmediate());return(r=>new UL(r))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),Ni(D0,M0,$L(t)),Ni(D0,M0,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jL=5*60,zL=Wb("authIdTokenMaxAge")||jL;let V0=null;const BL=t=>async e=>{const n=e&&await e.getIdTokenResult(),r=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(r&&r>zL)return;const i=n==null?void 0:n.token;V0!==i&&(V0=i,await fetch(t,{method:i?"POST":"DELETE",headers:i?{Authorization:`Bearer ${i}`}:{}}))};function RT(t=Qb()){const e=kg(t,"auth");if(e.isInitialized())return e.getImmediate();const n=dN(t,{popupRedirectResolver:VL,persistence:[KN,MN,TT]}),r=Wb("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){const s=new URL(r,location.origin);if(location.origin===s.origin){const o=BL(s.toString());RN(n,o,()=>o(n.currentUser)),PN(n,a=>o(a))}}const i=Bb("auth");return i&&pN(n,`http://${i}`),n}function HL(){var t,e;return(e=(t=document.getElementsByTagName("head"))===null||t===void 0?void 0:t[0])!==null&&e!==void 0?e:document}sN({loadJS(t){return new Promise((e,n)=>{const r=document.createElement("script");r.setAttribute("src",t),r.onload=e,r.onerror=i=>{const s=Kn("internal-error");s.customData=i,n(s)},r.type="text/javascript",r.charset="UTF-8",HL().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});FL("Browser");var U0=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Cs,OT;(function(){var t;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(g,y){function b(){}b.prototype=y.prototype,g.D=y.prototype,g.prototype=new b,g.prototype.constructor=g,g.C=function(I,k,P){for(var A=Array(arguments.length-2),Ie=2;Ie<arguments.length;Ie++)A[Ie-2]=arguments[Ie];return y.prototype[k].apply(I,A)}}function n(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(r,n),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(g,y,b){b||(b=0);var I=Array(16);if(typeof y=="string")for(var k=0;16>k;++k)I[k]=y.charCodeAt(b++)|y.charCodeAt(b++)<<8|y.charCodeAt(b++)<<16|y.charCodeAt(b++)<<24;else for(k=0;16>k;++k)I[k]=y[b++]|y[b++]<<8|y[b++]<<16|y[b++]<<24;y=g.g[0],b=g.g[1],k=g.g[2];var P=g.g[3],A=y+(P^b&(k^P))+I[0]+3614090360&4294967295;y=b+(A<<7&4294967295|A>>>25),A=P+(k^y&(b^k))+I[1]+3905402710&4294967295,P=y+(A<<12&4294967295|A>>>20),A=k+(b^P&(y^b))+I[2]+606105819&4294967295,k=P+(A<<17&4294967295|A>>>15),A=b+(y^k&(P^y))+I[3]+3250441966&4294967295,b=k+(A<<22&4294967295|A>>>10),A=y+(P^b&(k^P))+I[4]+4118548399&4294967295,y=b+(A<<7&4294967295|A>>>25),A=P+(k^y&(b^k))+I[5]+1200080426&4294967295,P=y+(A<<12&4294967295|A>>>20),A=k+(b^P&(y^b))+I[6]+2821735955&4294967295,k=P+(A<<17&4294967295|A>>>15),A=b+(y^k&(P^y))+I[7]+4249261313&4294967295,b=k+(A<<22&4294967295|A>>>10),A=y+(P^b&(k^P))+I[8]+1770035416&4294967295,y=b+(A<<7&4294967295|A>>>25),A=P+(k^y&(b^k))+I[9]+2336552879&4294967295,P=y+(A<<12&4294967295|A>>>20),A=k+(b^P&(y^b))+I[10]+4294925233&4294967295,k=P+(A<<17&4294967295|A>>>15),A=b+(y^k&(P^y))+I[11]+2304563134&4294967295,b=k+(A<<22&4294967295|A>>>10),A=y+(P^b&(k^P))+I[12]+1804603682&4294967295,y=b+(A<<7&4294967295|A>>>25),A=P+(k^y&(b^k))+I[13]+4254626195&4294967295,P=y+(A<<12&4294967295|A>>>20),A=k+(b^P&(y^b))+I[14]+2792965006&4294967295,k=P+(A<<17&4294967295|A>>>15),A=b+(y^k&(P^y))+I[15]+1236535329&4294967295,b=k+(A<<22&4294967295|A>>>10),A=y+(k^P&(b^k))+I[1]+4129170786&4294967295,y=b+(A<<5&4294967295|A>>>27),A=P+(b^k&(y^b))+I[6]+3225465664&4294967295,P=y+(A<<9&4294967295|A>>>23),A=k+(y^b&(P^y))+I[11]+643717713&4294967295,k=P+(A<<14&4294967295|A>>>18),A=b+(P^y&(k^P))+I[0]+3921069994&4294967295,b=k+(A<<20&4294967295|A>>>12),A=y+(k^P&(b^k))+I[5]+3593408605&4294967295,y=b+(A<<5&4294967295|A>>>27),A=P+(b^k&(y^b))+I[10]+38016083&4294967295,P=y+(A<<9&4294967295|A>>>23),A=k+(y^b&(P^y))+I[15]+3634488961&4294967295,k=P+(A<<14&4294967295|A>>>18),A=b+(P^y&(k^P))+I[4]+3889429448&4294967295,b=k+(A<<20&4294967295|A>>>12),A=y+(k^P&(b^k))+I[9]+568446438&4294967295,y=b+(A<<5&4294967295|A>>>27),A=P+(b^k&(y^b))+I[14]+3275163606&4294967295,P=y+(A<<9&4294967295|A>>>23),A=k+(y^b&(P^y))+I[3]+4107603335&4294967295,k=P+(A<<14&4294967295|A>>>18),A=b+(P^y&(k^P))+I[8]+1163531501&4294967295,b=k+(A<<20&4294967295|A>>>12),A=y+(k^P&(b^k))+I[13]+2850285829&4294967295,y=b+(A<<5&4294967295|A>>>27),A=P+(b^k&(y^b))+I[2]+4243563512&4294967295,P=y+(A<<9&4294967295|A>>>23),A=k+(y^b&(P^y))+I[7]+1735328473&4294967295,k=P+(A<<14&4294967295|A>>>18),A=b+(P^y&(k^P))+I[12]+2368359562&4294967295,b=k+(A<<20&4294967295|A>>>12),A=y+(b^k^P)+I[5]+4294588738&4294967295,y=b+(A<<4&4294967295|A>>>28),A=P+(y^b^k)+I[8]+2272392833&4294967295,P=y+(A<<11&4294967295|A>>>21),A=k+(P^y^b)+I[11]+1839030562&4294967295,k=P+(A<<16&4294967295|A>>>16),A=b+(k^P^y)+I[14]+4259657740&4294967295,b=k+(A<<23&4294967295|A>>>9),A=y+(b^k^P)+I[1]+2763975236&4294967295,y=b+(A<<4&4294967295|A>>>28),A=P+(y^b^k)+I[4]+1272893353&4294967295,P=y+(A<<11&4294967295|A>>>21),A=k+(P^y^b)+I[7]+4139469664&4294967295,k=P+(A<<16&4294967295|A>>>16),A=b+(k^P^y)+I[10]+3200236656&4294967295,b=k+(A<<23&4294967295|A>>>9),A=y+(b^k^P)+I[13]+681279174&4294967295,y=b+(A<<4&4294967295|A>>>28),A=P+(y^b^k)+I[0]+3936430074&4294967295,P=y+(A<<11&4294967295|A>>>21),A=k+(P^y^b)+I[3]+3572445317&4294967295,k=P+(A<<16&4294967295|A>>>16),A=b+(k^P^y)+I[6]+76029189&4294967295,b=k+(A<<23&4294967295|A>>>9),A=y+(b^k^P)+I[9]+3654602809&4294967295,y=b+(A<<4&4294967295|A>>>28),A=P+(y^b^k)+I[12]+3873151461&4294967295,P=y+(A<<11&4294967295|A>>>21),A=k+(P^y^b)+I[15]+530742520&4294967295,k=P+(A<<16&4294967295|A>>>16),A=b+(k^P^y)+I[2]+3299628645&4294967295,b=k+(A<<23&4294967295|A>>>9),A=y+(k^(b|~P))+I[0]+4096336452&4294967295,y=b+(A<<6&4294967295|A>>>26),A=P+(b^(y|~k))+I[7]+1126891415&4294967295,P=y+(A<<10&4294967295|A>>>22),A=k+(y^(P|~b))+I[14]+2878612391&4294967295,k=P+(A<<15&4294967295|A>>>17),A=b+(P^(k|~y))+I[5]+4237533241&4294967295,b=k+(A<<21&4294967295|A>>>11),A=y+(k^(b|~P))+I[12]+1700485571&4294967295,y=b+(A<<6&4294967295|A>>>26),A=P+(b^(y|~k))+I[3]+2399980690&4294967295,P=y+(A<<10&4294967295|A>>>22),A=k+(y^(P|~b))+I[10]+4293915773&4294967295,k=P+(A<<15&4294967295|A>>>17),A=b+(P^(k|~y))+I[1]+2240044497&4294967295,b=k+(A<<21&4294967295|A>>>11),A=y+(k^(b|~P))+I[8]+1873313359&4294967295,y=b+(A<<6&4294967295|A>>>26),A=P+(b^(y|~k))+I[15]+4264355552&4294967295,P=y+(A<<10&4294967295|A>>>22),A=k+(y^(P|~b))+I[6]+2734768916&4294967295,k=P+(A<<15&4294967295|A>>>17),A=b+(P^(k|~y))+I[13]+1309151649&4294967295,b=k+(A<<21&4294967295|A>>>11),A=y+(k^(b|~P))+I[4]+4149444226&4294967295,y=b+(A<<6&4294967295|A>>>26),A=P+(b^(y|~k))+I[11]+3174756917&4294967295,P=y+(A<<10&4294967295|A>>>22),A=k+(y^(P|~b))+I[2]+718787259&4294967295,k=P+(A<<15&4294967295|A>>>17),A=b+(P^(k|~y))+I[9]+3951481745&4294967295,g.g[0]=g.g[0]+y&4294967295,g.g[1]=g.g[1]+(k+(A<<21&4294967295|A>>>11))&4294967295,g.g[2]=g.g[2]+k&4294967295,g.g[3]=g.g[3]+P&4294967295}r.prototype.u=function(g,y){y===void 0&&(y=g.length);for(var b=y-this.blockSize,I=this.B,k=this.h,P=0;P<y;){if(k==0)for(;P<=b;)i(this,g,P),P+=this.blockSize;if(typeof g=="string"){for(;P<y;)if(I[k++]=g.charCodeAt(P++),k==this.blockSize){i(this,I),k=0;break}}else for(;P<y;)if(I[k++]=g[P++],k==this.blockSize){i(this,I),k=0;break}}this.h=k,this.o+=y},r.prototype.v=function(){var g=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);g[0]=128;for(var y=1;y<g.length-8;++y)g[y]=0;var b=8*this.o;for(y=g.length-8;y<g.length;++y)g[y]=b&255,b/=256;for(this.u(g),g=Array(16),y=b=0;4>y;++y)for(var I=0;32>I;I+=8)g[b++]=this.g[y]>>>I&255;return g};function s(g,y){var b=a;return Object.prototype.hasOwnProperty.call(b,g)?b[g]:b[g]=y(g)}function o(g,y){this.h=y;for(var b=[],I=!0,k=g.length-1;0<=k;k--){var P=g[k]|0;I&&P==y||(b[k]=P,I=!1)}this.g=b}var a={};function l(g){return-128<=g&&128>g?s(g,function(y){return new o([y|0],0>y?-1:0)}):new o([g|0],0>g?-1:0)}function c(g){if(isNaN(g)||!isFinite(g))return f;if(0>g)return R(c(-g));for(var y=[],b=1,I=0;g>=b;I++)y[I]=g/b|0,b*=4294967296;return new o(y,0)}function h(g,y){if(g.length==0)throw Error("number format error: empty string");if(y=y||10,2>y||36<y)throw Error("radix out of range: "+y);if(g.charAt(0)=="-")return R(h(g.substring(1),y));if(0<=g.indexOf("-"))throw Error('number format error: interior "-" character');for(var b=c(Math.pow(y,8)),I=f,k=0;k<g.length;k+=8){var P=Math.min(8,g.length-k),A=parseInt(g.substring(k,k+P),y);8>P?(P=c(Math.pow(y,P)),I=I.j(P).add(c(A))):(I=I.j(b),I=I.add(c(A)))}return I}var f=l(0),p=l(1),w=l(16777216);t=o.prototype,t.m=function(){if(S(this))return-R(this).m();for(var g=0,y=1,b=0;b<this.g.length;b++){var I=this.i(b);g+=(0<=I?I:4294967296+I)*y,y*=4294967296}return g},t.toString=function(g){if(g=g||10,2>g||36<g)throw Error("radix out of range: "+g);if(E(this))return"0";if(S(this))return"-"+R(this).toString(g);for(var y=c(Math.pow(g,6)),b=this,I="";;){var k=L(b,y).g;b=T(b,k.j(y));var P=((0<b.g.length?b.g[0]:b.h)>>>0).toString(g);if(b=k,E(b))return P+I;for(;6>P.length;)P="0"+P;I=P+I}},t.i=function(g){return 0>g?0:g<this.g.length?this.g[g]:this.h};function E(g){if(g.h!=0)return!1;for(var y=0;y<g.g.length;y++)if(g.g[y]!=0)return!1;return!0}function S(g){return g.h==-1}t.l=function(g){return g=T(this,g),S(g)?-1:E(g)?0:1};function R(g){for(var y=g.g.length,b=[],I=0;I<y;I++)b[I]=~g.g[I];return new o(b,~g.h).add(p)}t.abs=function(){return S(this)?R(this):this},t.add=function(g){for(var y=Math.max(this.g.length,g.g.length),b=[],I=0,k=0;k<=y;k++){var P=I+(this.i(k)&65535)+(g.i(k)&65535),A=(P>>>16)+(this.i(k)>>>16)+(g.i(k)>>>16);I=A>>>16,P&=65535,A&=65535,b[k]=A<<16|P}return new o(b,b[b.length-1]&-2147483648?-1:0)};function T(g,y){return g.add(R(y))}t.j=function(g){if(E(this)||E(g))return f;if(S(this))return S(g)?R(this).j(R(g)):R(R(this).j(g));if(S(g))return R(this.j(R(g)));if(0>this.l(w)&&0>g.l(w))return c(this.m()*g.m());for(var y=this.g.length+g.g.length,b=[],I=0;I<2*y;I++)b[I]=0;for(I=0;I<this.g.length;I++)for(var k=0;k<g.g.length;k++){var P=this.i(I)>>>16,A=this.i(I)&65535,Ie=g.i(k)>>>16,it=g.i(k)&65535;b[2*I+2*k]+=A*it,_(b,2*I+2*k),b[2*I+2*k+1]+=P*it,_(b,2*I+2*k+1),b[2*I+2*k+1]+=A*Ie,_(b,2*I+2*k+1),b[2*I+2*k+2]+=P*Ie,_(b,2*I+2*k+2)}for(I=0;I<y;I++)b[I]=b[2*I+1]<<16|b[2*I];for(I=y;I<2*y;I++)b[I]=0;return new o(b,0)};function _(g,y){for(;(g[y]&65535)!=g[y];)g[y+1]+=g[y]>>>16,g[y]&=65535,y++}function C(g,y){this.g=g,this.h=y}function L(g,y){if(E(y))throw Error("division by zero");if(E(g))return new C(f,f);if(S(g))return y=L(R(g),y),new C(R(y.g),R(y.h));if(S(y))return y=L(g,R(y)),new C(R(y.g),y.h);if(30<g.g.length){if(S(g)||S(y))throw Error("slowDivide_ only works with positive integers.");for(var b=p,I=y;0>=I.l(g);)b=F(b),I=F(I);var k=z(b,1),P=z(I,1);for(I=z(I,2),b=z(b,2);!E(I);){var A=P.add(I);0>=A.l(g)&&(k=k.add(b),P=A),I=z(I,1),b=z(b,1)}return y=T(g,k.j(y)),new C(k,y)}for(k=f;0<=g.l(y);){for(b=Math.max(1,Math.floor(g.m()/y.m())),I=Math.ceil(Math.log(b)/Math.LN2),I=48>=I?1:Math.pow(2,I-48),P=c(b),A=P.j(y);S(A)||0<A.l(g);)b-=I,P=c(b),A=P.j(y);E(P)&&(P=p),k=k.add(P),g=T(g,A)}return new C(k,g)}t.A=function(g){return L(this,g).h},t.and=function(g){for(var y=Math.max(this.g.length,g.g.length),b=[],I=0;I<y;I++)b[I]=this.i(I)&g.i(I);return new o(b,this.h&g.h)},t.or=function(g){for(var y=Math.max(this.g.length,g.g.length),b=[],I=0;I<y;I++)b[I]=this.i(I)|g.i(I);return new o(b,this.h|g.h)},t.xor=function(g){for(var y=Math.max(this.g.length,g.g.length),b=[],I=0;I<y;I++)b[I]=this.i(I)^g.i(I);return new o(b,this.h^g.h)};function F(g){for(var y=g.g.length+1,b=[],I=0;I<y;I++)b[I]=g.i(I)<<1|g.i(I-1)>>>31;return new o(b,g.h)}function z(g,y){var b=y>>5;y%=32;for(var I=g.g.length-b,k=[],P=0;P<I;P++)k[P]=0<y?g.i(P+b)>>>y|g.i(P+b+1)<<32-y:g.i(P+b);return new o(k,g.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,OT=r,o.prototype.add=o.prototype.add,o.prototype.multiply=o.prototype.j,o.prototype.modulo=o.prototype.A,o.prototype.compare=o.prototype.l,o.prototype.toNumber=o.prototype.m,o.prototype.toString=o.prototype.toString,o.prototype.getBits=o.prototype.i,o.fromNumber=c,o.fromString=h,Cs=o}).apply(typeof U0<"u"?U0:typeof self<"u"?self:typeof window<"u"?window:{});var pc=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var NT,LT,fl,DT,Fc,rm,MT,VT,UT;(function(){var t,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(u,d,m){return u==Array.prototype||u==Object.prototype||(u[d]=m.value),u};function n(u){u=[typeof globalThis=="object"&&globalThis,u,typeof window=="object"&&window,typeof self=="object"&&self,typeof pc=="object"&&pc];for(var d=0;d<u.length;++d){var m=u[d];if(m&&m.Math==Math)return m}throw Error("Cannot find global object")}var r=n(this);function i(u,d){if(d)e:{var m=r;u=u.split(".");for(var v=0;v<u.length-1;v++){var N=u[v];if(!(N in m))break e;m=m[N]}u=u[u.length-1],v=m[u],d=d(v),d!=v&&d!=null&&e(m,u,{configurable:!0,writable:!0,value:d})}}function s(u,d){u instanceof String&&(u+="");var m=0,v=!1,N={next:function(){if(!v&&m<u.length){var U=m++;return{value:d(U,u[U]),done:!1}}return v=!0,{done:!0,value:void 0}}};return N[Symbol.iterator]=function(){return N},N}i("Array.prototype.values",function(u){return u||function(){return s(this,function(d,m){return m})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var o=o||{},a=this||self;function l(u){var d=typeof u;return d=d!="object"?d:u?Array.isArray(u)?"array":d:"null",d=="array"||d=="object"&&typeof u.length=="number"}function c(u){var d=typeof u;return d=="object"&&u!=null||d=="function"}function h(u,d,m){return u.call.apply(u.bind,arguments)}function f(u,d,m){if(!u)throw Error();if(2<arguments.length){var v=Array.prototype.slice.call(arguments,2);return function(){var N=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(N,v),u.apply(d,N)}}return function(){return u.apply(d,arguments)}}function p(u,d,m){return p=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?h:f,p.apply(null,arguments)}function w(u,d){var m=Array.prototype.slice.call(arguments,1);return function(){var v=m.slice();return v.push.apply(v,arguments),u.apply(this,v)}}function E(u,d){function m(){}m.prototype=d.prototype,u.aa=d.prototype,u.prototype=new m,u.prototype.constructor=u,u.Qb=function(v,N,U){for(var G=Array(arguments.length-2),Re=2;Re<arguments.length;Re++)G[Re-2]=arguments[Re];return d.prototype[N].apply(v,G)}}function S(u){const d=u.length;if(0<d){const m=Array(d);for(let v=0;v<d;v++)m[v]=u[v];return m}return[]}function R(u,d){for(let m=1;m<arguments.length;m++){const v=arguments[m];if(l(v)){const N=u.length||0,U=v.length||0;u.length=N+U;for(let G=0;G<U;G++)u[N+G]=v[G]}else u.push(v)}}class T{constructor(d,m){this.i=d,this.j=m,this.h=0,this.g=null}get(){let d;return 0<this.h?(this.h--,d=this.g,this.g=d.next,d.next=null):d=this.i(),d}}function _(u){return/^[\s\xa0]*$/.test(u)}function C(){var u=a.navigator;return u&&(u=u.userAgent)?u:""}function L(u){return L[" "](u),u}L[" "]=function(){};var F=C().indexOf("Gecko")!=-1&&!(C().toLowerCase().indexOf("webkit")!=-1&&C().indexOf("Edge")==-1)&&!(C().indexOf("Trident")!=-1||C().indexOf("MSIE")!=-1)&&C().indexOf("Edge")==-1;function z(u,d,m){for(const v in u)d.call(m,u[v],v,u)}function g(u,d){for(const m in u)d.call(void 0,u[m],m,u)}function y(u){const d={};for(const m in u)d[m]=u[m];return d}const b="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function I(u,d){let m,v;for(let N=1;N<arguments.length;N++){v=arguments[N];for(m in v)u[m]=v[m];for(let U=0;U<b.length;U++)m=b[U],Object.prototype.hasOwnProperty.call(v,m)&&(u[m]=v[m])}}function k(u){var d=1;u=u.split(":");const m=[];for(;0<d&&u.length;)m.push(u.shift()),d--;return u.length&&m.push(u.join(":")),m}function P(u){a.setTimeout(()=>{throw u},0)}function A(){var u=ee;let d=null;return u.g&&(d=u.g,u.g=u.g.next,u.g||(u.h=null),d.next=null),d}class Ie{constructor(){this.h=this.g=null}add(d,m){const v=it.get();v.set(d,m),this.h?this.h.next=v:this.g=v,this.h=v}}var it=new T(()=>new Ht,u=>u.reset());class Ht{constructor(){this.next=this.g=this.h=null}set(d,m){this.h=d,this.g=m,this.next=null}reset(){this.next=this.g=this.h=null}}let _t,H=!1,ee=new Ie,re=()=>{const u=a.Promise.resolve(void 0);_t=()=>{u.then(_e)}};var _e=()=>{for(var u;u=A();){try{u.h.call(u.g)}catch(m){P(m)}var d=it;d.j(u),100>d.h&&(d.h++,u.next=d.g,d.g=u)}H=!1};function he(){this.s=this.s,this.C=this.C}he.prototype.s=!1,he.prototype.ma=function(){this.s||(this.s=!0,this.N())},he.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function Pe(u,d){this.type=u,this.g=this.target=d,this.defaultPrevented=!1}Pe.prototype.h=function(){this.defaultPrevented=!0};var Wt=function(){if(!a.addEventListener||!Object.defineProperty)return!1;var u=!1,d=Object.defineProperty({},"passive",{get:function(){u=!0}});try{const m=()=>{};a.addEventListener("test",m,d),a.removeEventListener("test",m,d)}catch{}return u}();function ht(u,d){if(Pe.call(this,u?u.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,u){var m=this.type=u.type,v=u.changedTouches&&u.changedTouches.length?u.changedTouches[0]:null;if(this.target=u.target||u.srcElement,this.g=d,d=u.relatedTarget){if(F){e:{try{L(d.nodeName);var N=!0;break e}catch{}N=!1}N||(d=null)}}else m=="mouseover"?d=u.fromElement:m=="mouseout"&&(d=u.toElement);this.relatedTarget=d,v?(this.clientX=v.clientX!==void 0?v.clientX:v.pageX,this.clientY=v.clientY!==void 0?v.clientY:v.pageY,this.screenX=v.screenX||0,this.screenY=v.screenY||0):(this.clientX=u.clientX!==void 0?u.clientX:u.pageX,this.clientY=u.clientY!==void 0?u.clientY:u.pageY,this.screenX=u.screenX||0,this.screenY=u.screenY||0),this.button=u.button,this.key=u.key||"",this.ctrlKey=u.ctrlKey,this.altKey=u.altKey,this.shiftKey=u.shiftKey,this.metaKey=u.metaKey,this.pointerId=u.pointerId||0,this.pointerType=typeof u.pointerType=="string"?u.pointerType:wt[u.pointerType]||"",this.state=u.state,this.i=u,u.defaultPrevented&&ht.aa.h.call(this)}}E(ht,Pe);var wt={2:"touch",3:"pen",4:"mouse"};ht.prototype.h=function(){ht.aa.h.call(this);var u=this.i;u.preventDefault?u.preventDefault():u.returnValue=!1};var Et="closure_listenable_"+(1e6*Math.random()|0),xa=0;function Bd(u,d,m,v,N){this.listener=u,this.proxy=null,this.src=d,this.type=m,this.capture=!!v,this.ha=N,this.key=++xa,this.da=this.fa=!1}function Qs(u){u.da=!0,u.listener=null,u.proxy=null,u.src=null,u.ha=null}function Xs(u){this.src=u,this.g={},this.h=0}Xs.prototype.add=function(u,d,m,v,N){var U=u.toString();u=this.g[U],u||(u=this.g[U]=[],this.h++);var G=pr(u,d,v,N);return-1<G?(d=u[G],m||(d.fa=!1)):(d=new Bd(d,this.src,U,!!v,N),d.fa=m,u.push(d)),d};function bt(u,d){var m=d.type;if(m in u.g){var v=u.g[m],N=Array.prototype.indexOf.call(v,d,void 0),U;(U=0<=N)&&Array.prototype.splice.call(v,N,1),U&&(Qs(d),u.g[m].length==0&&(delete u.g[m],u.h--))}}function pr(u,d,m,v){for(var N=0;N<u.length;++N){var U=u[N];if(!U.da&&U.listener==d&&U.capture==!!m&&U.ha==v)return N}return-1}var Ys="closure_lm_"+(1e6*Math.random()|0),ka={};function Jn(u,d,m,v,N){if(Array.isArray(d)){for(var U=0;U<d.length;U++)Jn(u,d[U],m,v,N);return null}return m=Zs(m),u&&u[Et]?u.K(d,m,c(v)?!!v.capture:!!v,N):Hd(u,d,m,!1,v,N)}function Hd(u,d,m,v,N,U){if(!d)throw Error("Invalid event type");var G=c(N)?!!N.capture:!!N,Re=mr(u);if(Re||(u[Ys]=Re=new Xs(u)),m=Re.add(d,m,v,G,U),m.proxy)return m;if(v=Wd(),m.proxy=v,v.src=u,v.listener=m,u.addEventListener)Wt||(N=G),N===void 0&&(N=!1),u.addEventListener(d.toString(),v,N);else if(u.attachEvent)u.attachEvent(Du(d.toString()),v);else if(u.addListener&&u.removeListener)u.addListener(v);else throw Error("addEventListener and attachEvent are unavailable.");return m}function Wd(){function u(m){return d.call(u.src,u.listener,m)}const d=rs;return u}function Lu(u,d,m,v,N){if(Array.isArray(d))for(var U=0;U<d.length;U++)Lu(u,d[U],m,v,N);else v=c(v)?!!v.capture:!!v,m=Zs(m),u&&u[Et]?(u=u.i,d=String(d).toString(),d in u.g&&(U=u.g[d],m=pr(U,m,v,N),-1<m&&(Qs(U[m]),Array.prototype.splice.call(U,m,1),U.length==0&&(delete u.g[d],u.h--)))):u&&(u=mr(u))&&(d=u.g[d.toString()],u=-1,d&&(u=pr(d,m,v,N)),(m=-1<u?d[u]:null)&&Pa(m))}function Pa(u){if(typeof u!="number"&&u&&!u.da){var d=u.src;if(d&&d[Et])bt(d.i,u);else{var m=u.type,v=u.proxy;d.removeEventListener?d.removeEventListener(m,v,u.capture):d.detachEvent?d.detachEvent(Du(m),v):d.addListener&&d.removeListener&&d.removeListener(v),(m=mr(d))?(bt(m,u),m.h==0&&(m.src=null,d[Ys]=null)):Qs(u)}}}function Du(u){return u in ka?ka[u]:ka[u]="on"+u}function rs(u,d){if(u.da)u=!0;else{d=new ht(d,this);var m=u.listener,v=u.ha||u.src;u.fa&&Pa(u),u=m.call(v,d)}return u}function mr(u){return u=u[Ys],u instanceof Xs?u:null}var Js="__closure_events_fn_"+(1e9*Math.random()>>>0);function Zs(u){return typeof u=="function"?u:(u[Js]||(u[Js]=function(d){return u.handleEvent(d)}),u[Js])}function Me(){he.call(this),this.i=new Xs(this),this.M=this,this.F=null}E(Me,he),Me.prototype[Et]=!0,Me.prototype.removeEventListener=function(u,d,m,v){Lu(this,u,d,m,v)};function et(u,d){var m,v=u.F;if(v)for(m=[];v;v=v.F)m.push(v);if(u=u.M,v=d.type||d,typeof d=="string")d=new Pe(d,u);else if(d instanceof Pe)d.target=d.target||u;else{var N=d;d=new Pe(v,u),I(d,N)}if(N=!0,m)for(var U=m.length-1;0<=U;U--){var G=d.g=m[U];N=is(G,v,!0,d)&&N}if(G=d.g=u,N=is(G,v,!0,d)&&N,N=is(G,v,!1,d)&&N,m)for(U=0;U<m.length;U++)G=d.g=m[U],N=is(G,v,!1,d)&&N}Me.prototype.N=function(){if(Me.aa.N.call(this),this.i){var u=this.i,d;for(d in u.g){for(var m=u.g[d],v=0;v<m.length;v++)Qs(m[v]);delete u.g[d],u.h--}}this.F=null},Me.prototype.K=function(u,d,m,v){return this.i.add(String(u),d,!1,m,v)},Me.prototype.L=function(u,d,m,v){return this.i.add(String(u),d,!0,m,v)};function is(u,d,m,v){if(d=u.i.g[String(d)],!d)return!0;d=d.concat();for(var N=!0,U=0;U<d.length;++U){var G=d[U];if(G&&!G.da&&G.capture==m){var Re=G.listener,It=G.ha||G.src;G.fa&&bt(u.i,G),N=Re.call(It,v)!==!1&&N}}return N&&!v.defaultPrevented}function ss(u,d,m){if(typeof u=="function")m&&(u=p(u,m));else if(u&&typeof u.handleEvent=="function")u=p(u.handleEvent,u);else throw Error("Invalid listener argument");return 2147483647<Number(d)?-1:a.setTimeout(u,d||0)}function Mu(u){u.g=ss(()=>{u.g=null,u.i&&(u.i=!1,Mu(u))},u.l);const d=u.h;u.h=null,u.m.apply(null,d)}class Zn extends he{constructor(d,m){super(),this.m=d,this.l=m,this.h=null,this.i=!1,this.g=null}j(d){this.h=arguments,this.g?this.i=!0:Mu(this)}N(){super.N(),this.g&&(a.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Jr(u){he.call(this),this.h=u,this.g={}}E(Jr,he);var Ra=[];function Oa(u){z(u.g,function(d,m){this.g.hasOwnProperty(m)&&Pa(d)},u),u.g={}}Jr.prototype.N=function(){Jr.aa.N.call(this),Oa(this)},Jr.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Na=a.JSON.stringify,Vu=a.JSON.parse,eo=class{stringify(u){return a.JSON.stringify(u,void 0)}parse(u){return a.JSON.parse(u,void 0)}};function to(){}to.prototype.h=null;function no(u){return u.h||(u.h=u.i())}function Uu(){}var Zr={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function La(){Pe.call(this,"d")}E(La,Pe);function ro(){Pe.call(this,"c")}E(ro,Pe);var gr={},O=null;function M(){return O=O||new Me}gr.La="serverreachability";function $(u){Pe.call(this,gr.La,u)}E($,Pe);function q(u){const d=M();et(d,new $(d))}gr.STAT_EVENT="statevent";function Q(u,d){Pe.call(this,gr.STAT_EVENT,u),this.stat=d}E(Q,Pe);function Z(u){const d=M();et(d,new Q(d,u))}gr.Ma="timingevent";function te(u,d){Pe.call(this,gr.Ma,u),this.size=d}E(te,Pe);function K(u,d){if(typeof u!="function")throw Error("Fn must not be null and must be a function");return a.setTimeout(function(){u()},d)}function oe(){this.g=!0}oe.prototype.xa=function(){this.g=!1};function ae(u,d,m,v,N,U){u.info(function(){if(u.g)if(U)for(var G="",Re=U.split("&"),It=0;It<Re.length;It++){var Se=Re[It].split("=");if(1<Se.length){var Lt=Se[0];Se=Se[1];var Dt=Lt.split("_");G=2<=Dt.length&&Dt[1]=="type"?G+(Lt+"="+Se+"&"):G+(Lt+"=redacted&")}}else G=null;else G=U;return"XMLHTTP REQ ("+v+") [attempt "+N+"]: "+d+`
`+m+`
`+G})}function dt(u,d,m,v,N,U,G){u.info(function(){return"XMLHTTP RESP ("+v+") [ attempt "+N+"]: "+d+`
`+m+`
`+U+" "+G})}function ze(u,d,m,v){u.info(function(){return"XMLHTTP TEXT ("+d+"): "+Ne(u,m)+(v?" "+v:"")})}function ie(u,d){u.info(function(){return"TIMEOUT: "+d})}oe.prototype.info=function(){};function Ne(u,d){if(!u.g)return d;if(!d)return null;try{var m=JSON.parse(d);if(m){for(u=0;u<m.length;u++)if(Array.isArray(m[u])){var v=m[u];if(!(2>v.length)){var N=v[1];if(Array.isArray(N)&&!(1>N.length)){var U=N[0];if(U!="noop"&&U!="stop"&&U!="close")for(var G=1;G<N.length;G++)N[G]=""}}}}return Na(m)}catch{return d}}var We={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},ei={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},_n;function Mn(){}E(Mn,to),Mn.prototype.g=function(){return new XMLHttpRequest},Mn.prototype.i=function(){return{}},_n=new Mn;function qt(u,d,m,v){this.j=u,this.i=d,this.l=m,this.R=v||1,this.U=new Jr(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new yr}function yr(){this.i=null,this.g="",this.h=!1}var cn={},ti={};function ni(u,d,m){u.L=1,u.v=ju(wr(d)),u.m=m,u.P=!0,os(u,null)}function os(u,d){u.F=Date.now(),Ct(u),u.A=wr(u.v);var m=u.A,v=u.R;Array.isArray(v)||(v=[String(v)]),lv(m.i,"t",v),u.C=0,m=u.j.J,u.h=new yr,u.g=Sv(u.j,m?d:null,!u.m),0<u.O&&(u.M=new Zn(p(u.Y,u,u.g),u.O)),d=u.U,m=u.g,v=u.ca;var N="readystatechange";Array.isArray(N)||(N&&(Ra[0]=N.toString()),N=Ra);for(var U=0;U<N.length;U++){var G=Jn(m,N[U],v||d.handleEvent,!1,d.h||d);if(!G)break;d.g[G.key]=G}d=u.H?y(u.H):{},u.m?(u.u||(u.u="POST"),d["Content-Type"]="application/x-www-form-urlencoded",u.g.ea(u.A,u.u,u.m,d)):(u.u="GET",u.g.ea(u.A,u.u,null,d)),q(),ae(u.i,u.u,u.A,u.l,u.R,u.m)}qt.prototype.ca=function(u){u=u.target;const d=this.M;d&&Er(u)==3?d.j():this.Y(u)},qt.prototype.Y=function(u){try{if(u==this.g)e:{const Dt=Er(this.g);var d=this.g.Ba();const oo=this.g.Z();if(!(3>Dt)&&(Dt!=3||this.g&&(this.h.h||this.g.oa()||mv(this.g)))){this.J||Dt!=4||d==7||(d==8||0>=oo?q(3):q(2)),vr(this);var m=this.g.Z();this.X=m;t:if(ye(this)){var v=mv(this.g);u="";var N=v.length,U=Er(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){_r(this),ri(this);var G="";break t}this.h.i=new a.TextDecoder}for(d=0;d<N;d++)this.h.h=!0,u+=this.h.i.decode(v[d],{stream:!(U&&d==N-1)});v.length=0,this.h.g+=u,this.C=0,G=this.h.g}else G=this.g.oa();if(this.o=m==200,dt(this.i,this.u,this.A,this.l,this.R,Dt,m),this.o){if(this.T&&!this.K){t:{if(this.g){var Re,It=this.g;if((Re=It.g?It.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!_(Re)){var Se=Re;break t}}Se=null}if(m=Se)ze(this.i,this.l,m,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,qd(this,m);else{this.o=!1,this.s=3,Z(12),_r(this),ri(this);break e}}if(this.P){m=!0;let Vn;for(;!this.J&&this.C<G.length;)if(Vn=Tt(this,G),Vn==ti){Dt==4&&(this.s=4,Z(14),m=!1),ze(this.i,this.l,null,"[Incomplete Response]");break}else if(Vn==cn){this.s=4,Z(15),ze(this.i,this.l,G,"[Invalid Chunk]"),m=!1;break}else ze(this.i,this.l,Vn,null),qd(this,Vn);if(ye(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Dt!=4||G.length!=0||this.h.h||(this.s=1,Z(16),m=!1),this.o=this.o&&m,!m)ze(this.i,this.l,G,"[Invalid Chunked Response]"),_r(this),ri(this);else if(0<G.length&&!this.W){this.W=!0;var Lt=this.j;Lt.g==this&&Lt.ba&&!Lt.M&&(Lt.j.info("Great, no buffering proxy detected. Bytes received: "+G.length),Jd(Lt),Lt.M=!0,Z(11))}}else ze(this.i,this.l,G,null),qd(this,G);Dt==4&&_r(this),this.o&&!this.J&&(Dt==4?bv(this.j,this):(this.o=!1,Ct(this)))}else KS(this.g),m==400&&0<G.indexOf("Unknown SID")?(this.s=3,Z(12)):(this.s=0,Z(13)),_r(this),ri(this)}}}catch{}finally{}};function ye(u){return u.g?u.u=="GET"&&u.L!=2&&u.j.Ca:!1}function Tt(u,d){var m=u.C,v=d.indexOf(`
`,m);return v==-1?ti:(m=Number(d.substring(m,v)),isNaN(m)?cn:(v+=1,v+m>d.length?ti:(d=d.slice(v,v+m),u.C=v+m,d)))}qt.prototype.cancel=function(){this.J=!0,_r(this)};function Ct(u){u.S=Date.now()+u.I,st(u,u.I)}function st(u,d){if(u.B!=null)throw Error("WatchDog timer not null");u.B=K(p(u.ba,u),d)}function vr(u){u.B&&(a.clearTimeout(u.B),u.B=null)}qt.prototype.ba=function(){this.B=null;const u=Date.now();0<=u-this.S?(ie(this.i,this.A),this.L!=2&&(q(),Z(17)),_r(this),this.s=2,ri(this)):st(this,this.S-u)};function ri(u){u.j.G==0||u.J||bv(u.j,u)}function _r(u){vr(u);var d=u.M;d&&typeof d.ma=="function"&&d.ma(),u.M=null,Oa(u.U),u.g&&(d=u.g,u.g=null,d.abort(),d.ma())}function qd(u,d){try{var m=u.j;if(m.G!=0&&(m.g==u||Gd(m.h,u))){if(!u.K&&Gd(m.h,u)&&m.G==3){try{var v=m.Da.g.parse(d)}catch{v=null}if(Array.isArray(v)&&v.length==3){var N=v;if(N[0]==0){e:if(!m.u){if(m.g)if(m.g.F+3e3<u.F)qu(m),Hu(m);else break e;Yd(m),Z(18)}}else m.za=N[1],0<m.za-m.T&&37500>N[2]&&m.F&&m.v==0&&!m.C&&(m.C=K(p(m.Za,m),6e3));if(1>=Zy(m.h)&&m.ca){try{m.ca()}catch{}m.ca=void 0}}else ls(m,11)}else if((u.K||m.g==u)&&qu(m),!_(d))for(N=m.Da.g.parse(d),d=0;d<N.length;d++){let Se=N[d];if(m.T=Se[0],Se=Se[1],m.G==2)if(Se[0]=="c"){m.K=Se[1],m.ia=Se[2];const Lt=Se[3];Lt!=null&&(m.la=Lt,m.j.info("VER="+m.la));const Dt=Se[4];Dt!=null&&(m.Aa=Dt,m.j.info("SVER="+m.Aa));const oo=Se[5];oo!=null&&typeof oo=="number"&&0<oo&&(v=1.5*oo,m.L=v,m.j.info("backChannelRequestTimeoutMs_="+v)),v=m;const Vn=u.g;if(Vn){const Ku=Vn.g?Vn.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Ku){var U=v.h;U.g||Ku.indexOf("spdy")==-1&&Ku.indexOf("quic")==-1&&Ku.indexOf("h2")==-1||(U.j=U.l,U.g=new Set,U.h&&(Kd(U,U.h),U.h=null))}if(v.D){const Zd=Vn.g?Vn.g.getResponseHeader("X-HTTP-Session-Id"):null;Zd&&(v.ya=Zd,Ve(v.I,v.D,Zd))}}m.G=3,m.l&&m.l.ua(),m.ba&&(m.R=Date.now()-u.F,m.j.info("Handshake RTT: "+m.R+"ms")),v=m;var G=u;if(v.qa=Iv(v,v.J?v.ia:null,v.W),G.K){ev(v.h,G);var Re=G,It=v.L;It&&(Re.I=It),Re.B&&(vr(Re),Ct(Re)),v.g=G}else wv(v);0<m.i.length&&Wu(m)}else Se[0]!="stop"&&Se[0]!="close"||ls(m,7);else m.G==3&&(Se[0]=="stop"||Se[0]=="close"?Se[0]=="stop"?ls(m,7):Xd(m):Se[0]!="noop"&&m.l&&m.l.ta(Se),m.v=0)}}q(4)}catch{}}var OS=class{constructor(u,d){this.g=u,this.map=d}};function Yy(u){this.l=u||10,a.PerformanceNavigationTiming?(u=a.performance.getEntriesByType("navigation"),u=0<u.length&&(u[0].nextHopProtocol=="hq"||u[0].nextHopProtocol=="h2")):u=!!(a.chrome&&a.chrome.loadTimes&&a.chrome.loadTimes()&&a.chrome.loadTimes().wasFetchedViaSpdy),this.j=u?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function Jy(u){return u.h?!0:u.g?u.g.size>=u.j:!1}function Zy(u){return u.h?1:u.g?u.g.size:0}function Gd(u,d){return u.h?u.h==d:u.g?u.g.has(d):!1}function Kd(u,d){u.g?u.g.add(d):u.h=d}function ev(u,d){u.h&&u.h==d?u.h=null:u.g&&u.g.has(d)&&u.g.delete(d)}Yy.prototype.cancel=function(){if(this.i=tv(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const u of this.g.values())u.cancel();this.g.clear()}};function tv(u){if(u.h!=null)return u.i.concat(u.h.D);if(u.g!=null&&u.g.size!==0){let d=u.i;for(const m of u.g.values())d=d.concat(m.D);return d}return S(u.i)}function NS(u){if(u.V&&typeof u.V=="function")return u.V();if(typeof Map<"u"&&u instanceof Map||typeof Set<"u"&&u instanceof Set)return Array.from(u.values());if(typeof u=="string")return u.split("");if(l(u)){for(var d=[],m=u.length,v=0;v<m;v++)d.push(u[v]);return d}d=[],m=0;for(v in u)d[m++]=u[v];return d}function LS(u){if(u.na&&typeof u.na=="function")return u.na();if(!u.V||typeof u.V!="function"){if(typeof Map<"u"&&u instanceof Map)return Array.from(u.keys());if(!(typeof Set<"u"&&u instanceof Set)){if(l(u)||typeof u=="string"){var d=[];u=u.length;for(var m=0;m<u;m++)d.push(m);return d}d=[],m=0;for(const v in u)d[m++]=v;return d}}}function nv(u,d){if(u.forEach&&typeof u.forEach=="function")u.forEach(d,void 0);else if(l(u)||typeof u=="string")Array.prototype.forEach.call(u,d,void 0);else for(var m=LS(u),v=NS(u),N=v.length,U=0;U<N;U++)d.call(void 0,v[U],m&&m[U],u)}var rv=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function DS(u,d){if(u){u=u.split("&");for(var m=0;m<u.length;m++){var v=u[m].indexOf("="),N=null;if(0<=v){var U=u[m].substring(0,v);N=u[m].substring(v+1)}else U=u[m];d(U,N?decodeURIComponent(N.replace(/\+/g," ")):"")}}}function as(u){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,u instanceof as){this.h=u.h,$u(this,u.j),this.o=u.o,this.g=u.g,Fu(this,u.s),this.l=u.l;var d=u.i,m=new Va;m.i=d.i,d.g&&(m.g=new Map(d.g),m.h=d.h),iv(this,m),this.m=u.m}else u&&(d=String(u).match(rv))?(this.h=!1,$u(this,d[1]||"",!0),this.o=Da(d[2]||""),this.g=Da(d[3]||"",!0),Fu(this,d[4]),this.l=Da(d[5]||"",!0),iv(this,d[6]||"",!0),this.m=Da(d[7]||"")):(this.h=!1,this.i=new Va(null,this.h))}as.prototype.toString=function(){var u=[],d=this.j;d&&u.push(Ma(d,sv,!0),":");var m=this.g;return(m||d=="file")&&(u.push("//"),(d=this.o)&&u.push(Ma(d,sv,!0),"@"),u.push(encodeURIComponent(String(m)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),m=this.s,m!=null&&u.push(":",String(m))),(m=this.l)&&(this.g&&m.charAt(0)!="/"&&u.push("/"),u.push(Ma(m,m.charAt(0)=="/"?US:VS,!0))),(m=this.i.toString())&&u.push("?",m),(m=this.m)&&u.push("#",Ma(m,FS)),u.join("")};function wr(u){return new as(u)}function $u(u,d,m){u.j=m?Da(d,!0):d,u.j&&(u.j=u.j.replace(/:$/,""))}function Fu(u,d){if(d){if(d=Number(d),isNaN(d)||0>d)throw Error("Bad port number "+d);u.s=d}else u.s=null}function iv(u,d,m){d instanceof Va?(u.i=d,jS(u.i,u.h)):(m||(d=Ma(d,$S)),u.i=new Va(d,u.h))}function Ve(u,d,m){u.i.set(d,m)}function ju(u){return Ve(u,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),u}function Da(u,d){return u?d?decodeURI(u.replace(/%25/g,"%2525")):decodeURIComponent(u):""}function Ma(u,d,m){return typeof u=="string"?(u=encodeURI(u).replace(d,MS),m&&(u=u.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),u):null}function MS(u){return u=u.charCodeAt(0),"%"+(u>>4&15).toString(16)+(u&15).toString(16)}var sv=/[#\/\?@]/g,VS=/[#\?:]/g,US=/[#\?]/g,$S=/[#\?@]/g,FS=/#/g;function Va(u,d){this.h=this.g=null,this.i=u||null,this.j=!!d}function ii(u){u.g||(u.g=new Map,u.h=0,u.i&&DS(u.i,function(d,m){u.add(decodeURIComponent(d.replace(/\+/g," ")),m)}))}t=Va.prototype,t.add=function(u,d){ii(this),this.i=null,u=io(this,u);var m=this.g.get(u);return m||this.g.set(u,m=[]),m.push(d),this.h+=1,this};function ov(u,d){ii(u),d=io(u,d),u.g.has(d)&&(u.i=null,u.h-=u.g.get(d).length,u.g.delete(d))}function av(u,d){return ii(u),d=io(u,d),u.g.has(d)}t.forEach=function(u,d){ii(this),this.g.forEach(function(m,v){m.forEach(function(N){u.call(d,N,v,this)},this)},this)},t.na=function(){ii(this);const u=Array.from(this.g.values()),d=Array.from(this.g.keys()),m=[];for(let v=0;v<d.length;v++){const N=u[v];for(let U=0;U<N.length;U++)m.push(d[v])}return m},t.V=function(u){ii(this);let d=[];if(typeof u=="string")av(this,u)&&(d=d.concat(this.g.get(io(this,u))));else{u=Array.from(this.g.values());for(let m=0;m<u.length;m++)d=d.concat(u[m])}return d},t.set=function(u,d){return ii(this),this.i=null,u=io(this,u),av(this,u)&&(this.h-=this.g.get(u).length),this.g.set(u,[d]),this.h+=1,this},t.get=function(u,d){return u?(u=this.V(u),0<u.length?String(u[0]):d):d};function lv(u,d,m){ov(u,d),0<m.length&&(u.i=null,u.g.set(io(u,d),S(m)),u.h+=m.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const u=[],d=Array.from(this.g.keys());for(var m=0;m<d.length;m++){var v=d[m];const U=encodeURIComponent(String(v)),G=this.V(v);for(v=0;v<G.length;v++){var N=U;G[v]!==""&&(N+="="+encodeURIComponent(String(G[v]))),u.push(N)}}return this.i=u.join("&")};function io(u,d){return d=String(d),u.j&&(d=d.toLowerCase()),d}function jS(u,d){d&&!u.j&&(ii(u),u.i=null,u.g.forEach(function(m,v){var N=v.toLowerCase();v!=N&&(ov(this,v),lv(this,N,m))},u)),u.j=d}function zS(u,d){const m=new oe;if(a.Image){const v=new Image;v.onload=w(si,m,"TestLoadImage: loaded",!0,d,v),v.onerror=w(si,m,"TestLoadImage: error",!1,d,v),v.onabort=w(si,m,"TestLoadImage: abort",!1,d,v),v.ontimeout=w(si,m,"TestLoadImage: timeout",!1,d,v),a.setTimeout(function(){v.ontimeout&&v.ontimeout()},1e4),v.src=u}else d(!1)}function BS(u,d){const m=new oe,v=new AbortController,N=setTimeout(()=>{v.abort(),si(m,"TestPingServer: timeout",!1,d)},1e4);fetch(u,{signal:v.signal}).then(U=>{clearTimeout(N),U.ok?si(m,"TestPingServer: ok",!0,d):si(m,"TestPingServer: server error",!1,d)}).catch(()=>{clearTimeout(N),si(m,"TestPingServer: error",!1,d)})}function si(u,d,m,v,N){try{N&&(N.onload=null,N.onerror=null,N.onabort=null,N.ontimeout=null),v(m)}catch{}}function HS(){this.g=new eo}function WS(u,d,m){const v=m||"";try{nv(u,function(N,U){let G=N;c(N)&&(G=Na(N)),d.push(v+U+"="+encodeURIComponent(G))})}catch(N){throw d.push(v+"type="+encodeURIComponent("_badmap")),N}}function Ua(u){this.l=u.Ub||null,this.j=u.eb||!1}E(Ua,to),Ua.prototype.g=function(){return new zu(this.l,this.j)},Ua.prototype.i=function(u){return function(){return u}}({});function zu(u,d){Me.call(this),this.D=u,this.o=d,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}E(zu,Me),t=zu.prototype,t.open=function(u,d){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=u,this.A=d,this.readyState=1,Fa(this)},t.send=function(u){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const d={headers:this.u,method:this.B,credentials:this.m,cache:void 0};u&&(d.body=u),(this.D||a).fetch(new Request(this.A,d)).then(this.Sa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,$a(this)),this.readyState=0},t.Sa=function(u){if(this.g&&(this.l=u,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=u.headers,this.readyState=2,Fa(this)),this.g&&(this.readyState=3,Fa(this),this.g)))if(this.responseType==="arraybuffer")u.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof a.ReadableStream<"u"&&"body"in u){if(this.j=u.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;uv(this)}else u.text().then(this.Ra.bind(this),this.ga.bind(this))};function uv(u){u.j.read().then(u.Pa.bind(u)).catch(u.ga.bind(u))}t.Pa=function(u){if(this.g){if(this.o&&u.value)this.response.push(u.value);else if(!this.o){var d=u.value?u.value:new Uint8Array(0);(d=this.v.decode(d,{stream:!u.done}))&&(this.response=this.responseText+=d)}u.done?$a(this):Fa(this),this.readyState==3&&uv(this)}},t.Ra=function(u){this.g&&(this.response=this.responseText=u,$a(this))},t.Qa=function(u){this.g&&(this.response=u,$a(this))},t.ga=function(){this.g&&$a(this)};function $a(u){u.readyState=4,u.l=null,u.j=null,u.v=null,Fa(u)}t.setRequestHeader=function(u,d){this.u.append(u,d)},t.getResponseHeader=function(u){return this.h&&this.h.get(u.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const u=[],d=this.h.entries();for(var m=d.next();!m.done;)m=m.value,u.push(m[0]+": "+m[1]),m=d.next();return u.join(`\r
`)};function Fa(u){u.onreadystatechange&&u.onreadystatechange.call(u)}Object.defineProperty(zu.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(u){this.m=u?"include":"same-origin"}});function cv(u){let d="";return z(u,function(m,v){d+=v,d+=":",d+=m,d+=`\r
`}),d}function Qd(u,d,m){e:{for(v in m){var v=!1;break e}v=!0}v||(m=cv(m),typeof u=="string"?m!=null&&encodeURIComponent(String(m)):Ve(u,d,m))}function Je(u){Me.call(this),this.headers=new Map,this.o=u||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}E(Je,Me);var qS=/^https?$/i,GS=["POST","PUT"];t=Je.prototype,t.Ha=function(u){this.J=u},t.ea=function(u,d,m,v){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+u);d=d?d.toUpperCase():"GET",this.D=u,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():_n.g(),this.v=this.o?no(this.o):no(_n),this.g.onreadystatechange=p(this.Ea,this);try{this.B=!0,this.g.open(d,String(u),!0),this.B=!1}catch(U){hv(this,U);return}if(u=m||"",m=new Map(this.headers),v)if(Object.getPrototypeOf(v)===Object.prototype)for(var N in v)m.set(N,v[N]);else if(typeof v.keys=="function"&&typeof v.get=="function")for(const U of v.keys())m.set(U,v.get(U));else throw Error("Unknown input type for opt_headers: "+String(v));v=Array.from(m.keys()).find(U=>U.toLowerCase()=="content-type"),N=a.FormData&&u instanceof a.FormData,!(0<=Array.prototype.indexOf.call(GS,d,void 0))||v||N||m.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[U,G]of m)this.g.setRequestHeader(U,G);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{pv(this),this.u=!0,this.g.send(u),this.u=!1}catch(U){hv(this,U)}};function hv(u,d){u.h=!1,u.g&&(u.j=!0,u.g.abort(),u.j=!1),u.l=d,u.m=5,dv(u),Bu(u)}function dv(u){u.A||(u.A=!0,et(u,"complete"),et(u,"error"))}t.abort=function(u){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=u||7,et(this,"complete"),et(this,"abort"),Bu(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Bu(this,!0)),Je.aa.N.call(this)},t.Ea=function(){this.s||(this.B||this.u||this.j?fv(this):this.bb())},t.bb=function(){fv(this)};function fv(u){if(u.h&&typeof o<"u"&&(!u.v[1]||Er(u)!=4||u.Z()!=2)){if(u.u&&Er(u)==4)ss(u.Ea,0,u);else if(et(u,"readystatechange"),Er(u)==4){u.h=!1;try{const G=u.Z();e:switch(G){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var d=!0;break e;default:d=!1}var m;if(!(m=d)){var v;if(v=G===0){var N=String(u.D).match(rv)[1]||null;!N&&a.self&&a.self.location&&(N=a.self.location.protocol.slice(0,-1)),v=!qS.test(N?N.toLowerCase():"")}m=v}if(m)et(u,"complete"),et(u,"success");else{u.m=6;try{var U=2<Er(u)?u.g.statusText:""}catch{U=""}u.l=U+" ["+u.Z()+"]",dv(u)}}finally{Bu(u)}}}}function Bu(u,d){if(u.g){pv(u);const m=u.g,v=u.v[0]?()=>{}:null;u.g=null,u.v=null,d||et(u,"ready");try{m.onreadystatechange=v}catch{}}}function pv(u){u.I&&(a.clearTimeout(u.I),u.I=null)}t.isActive=function(){return!!this.g};function Er(u){return u.g?u.g.readyState:0}t.Z=function(){try{return 2<Er(this)?this.g.status:-1}catch{return-1}},t.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.Oa=function(u){if(this.g){var d=this.g.responseText;return u&&d.indexOf(u)==0&&(d=d.substring(u.length)),Vu(d)}};function mv(u){try{if(!u.g)return null;if("response"in u.g)return u.g.response;switch(u.H){case"":case"text":return u.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in u.g)return u.g.mozResponseArrayBuffer}return null}catch{return null}}function KS(u){const d={};u=(u.g&&2<=Er(u)&&u.g.getAllResponseHeaders()||"").split(`\r
`);for(let v=0;v<u.length;v++){if(_(u[v]))continue;var m=k(u[v]);const N=m[0];if(m=m[1],typeof m!="string")continue;m=m.trim();const U=d[N]||[];d[N]=U,U.push(m)}g(d,function(v){return v.join(", ")})}t.Ba=function(){return this.m},t.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function ja(u,d,m){return m&&m.internalChannelParams&&m.internalChannelParams[u]||d}function gv(u){this.Aa=0,this.i=[],this.j=new oe,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=ja("failFast",!1,u),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=ja("baseRetryDelayMs",5e3,u),this.cb=ja("retryDelaySeedMs",1e4,u),this.Wa=ja("forwardChannelMaxRetries",2,u),this.wa=ja("forwardChannelRequestTimeoutMs",2e4,u),this.pa=u&&u.xmlHttpFactory||void 0,this.Xa=u&&u.Tb||void 0,this.Ca=u&&u.useFetchStreams||!1,this.L=void 0,this.J=u&&u.supportsCrossDomainXhr||!1,this.K="",this.h=new Yy(u&&u.concurrentRequestLimit),this.Da=new HS,this.P=u&&u.fastHandshake||!1,this.O=u&&u.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=u&&u.Rb||!1,u&&u.xa&&this.j.xa(),u&&u.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&u&&u.detectBufferingProxy||!1,this.ja=void 0,u&&u.longPollingTimeout&&0<u.longPollingTimeout&&(this.ja=u.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}t=gv.prototype,t.la=8,t.G=1,t.connect=function(u,d,m,v){Z(0),this.W=u,this.H=d||{},m&&v!==void 0&&(this.H.OSID=m,this.H.OAID=v),this.F=this.X,this.I=Iv(this,null,this.W),Wu(this)};function Xd(u){if(yv(u),u.G==3){var d=u.U++,m=wr(u.I);if(Ve(m,"SID",u.K),Ve(m,"RID",d),Ve(m,"TYPE","terminate"),za(u,m),d=new qt(u,u.j,d),d.L=2,d.v=ju(wr(m)),m=!1,a.navigator&&a.navigator.sendBeacon)try{m=a.navigator.sendBeacon(d.v.toString(),"")}catch{}!m&&a.Image&&(new Image().src=d.v,m=!0),m||(d.g=Sv(d.j,null),d.g.ea(d.v)),d.F=Date.now(),Ct(d)}Cv(u)}function Hu(u){u.g&&(Jd(u),u.g.cancel(),u.g=null)}function yv(u){Hu(u),u.u&&(a.clearTimeout(u.u),u.u=null),qu(u),u.h.cancel(),u.s&&(typeof u.s=="number"&&a.clearTimeout(u.s),u.s=null)}function Wu(u){if(!Jy(u.h)&&!u.s){u.s=!0;var d=u.Ga;_t||re(),H||(_t(),H=!0),ee.add(d,u),u.B=0}}function QS(u,d){return Zy(u.h)>=u.h.j-(u.s?1:0)?!1:u.s?(u.i=d.D.concat(u.i),!0):u.G==1||u.G==2||u.B>=(u.Va?0:u.Wa)?!1:(u.s=K(p(u.Ga,u,d),Tv(u,u.B)),u.B++,!0)}t.Ga=function(u){if(this.s)if(this.s=null,this.G==1){if(!u){this.U=Math.floor(1e5*Math.random()),u=this.U++;const N=new qt(this,this.j,u);let U=this.o;if(this.S&&(U?(U=y(U),I(U,this.S)):U=this.S),this.m!==null||this.O||(N.H=U,U=null),this.P)e:{for(var d=0,m=0;m<this.i.length;m++){t:{var v=this.i[m];if("__data__"in v.map&&(v=v.map.__data__,typeof v=="string")){v=v.length;break t}v=void 0}if(v===void 0)break;if(d+=v,4096<d){d=m;break e}if(d===4096||m===this.i.length-1){d=m+1;break e}}d=1e3}else d=1e3;d=_v(this,N,d),m=wr(this.I),Ve(m,"RID",u),Ve(m,"CVER",22),this.D&&Ve(m,"X-HTTP-Session-Id",this.D),za(this,m),U&&(this.O?d="headers="+encodeURIComponent(String(cv(U)))+"&"+d:this.m&&Qd(m,this.m,U)),Kd(this.h,N),this.Ua&&Ve(m,"TYPE","init"),this.P?(Ve(m,"$req",d),Ve(m,"SID","null"),N.T=!0,ni(N,m,null)):ni(N,m,d),this.G=2}}else this.G==3&&(u?vv(this,u):this.i.length==0||Jy(this.h)||vv(this))};function vv(u,d){var m;d?m=d.l:m=u.U++;const v=wr(u.I);Ve(v,"SID",u.K),Ve(v,"RID",m),Ve(v,"AID",u.T),za(u,v),u.m&&u.o&&Qd(v,u.m,u.o),m=new qt(u,u.j,m,u.B+1),u.m===null&&(m.H=u.o),d&&(u.i=d.D.concat(u.i)),d=_v(u,m,1e3),m.I=Math.round(.5*u.wa)+Math.round(.5*u.wa*Math.random()),Kd(u.h,m),ni(m,v,d)}function za(u,d){u.H&&z(u.H,function(m,v){Ve(d,v,m)}),u.l&&nv({},function(m,v){Ve(d,v,m)})}function _v(u,d,m){m=Math.min(u.i.length,m);var v=u.l?p(u.l.Na,u.l,u):null;e:{var N=u.i;let U=-1;for(;;){const G=["count="+m];U==-1?0<m?(U=N[0].g,G.push("ofs="+U)):U=0:G.push("ofs="+U);let Re=!0;for(let It=0;It<m;It++){let Se=N[It].g;const Lt=N[It].map;if(Se-=U,0>Se)U=Math.max(0,N[It].g-100),Re=!1;else try{WS(Lt,G,"req"+Se+"_")}catch{v&&v(Lt)}}if(Re){v=G.join("&");break e}}}return u=u.i.splice(0,m),d.D=u,v}function wv(u){if(!u.g&&!u.u){u.Y=1;var d=u.Fa;_t||re(),H||(_t(),H=!0),ee.add(d,u),u.v=0}}function Yd(u){return u.g||u.u||3<=u.v?!1:(u.Y++,u.u=K(p(u.Fa,u),Tv(u,u.v)),u.v++,!0)}t.Fa=function(){if(this.u=null,Ev(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var u=2*this.R;this.j.info("BP detection timer enabled: "+u),this.A=K(p(this.ab,this),u)}},t.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,Z(10),Hu(this),Ev(this))};function Jd(u){u.A!=null&&(a.clearTimeout(u.A),u.A=null)}function Ev(u){u.g=new qt(u,u.j,"rpc",u.Y),u.m===null&&(u.g.H=u.o),u.g.O=0;var d=wr(u.qa);Ve(d,"RID","rpc"),Ve(d,"SID",u.K),Ve(d,"AID",u.T),Ve(d,"CI",u.F?"0":"1"),!u.F&&u.ja&&Ve(d,"TO",u.ja),Ve(d,"TYPE","xmlhttp"),za(u,d),u.m&&u.o&&Qd(d,u.m,u.o),u.L&&(u.g.I=u.L);var m=u.g;u=u.ia,m.L=1,m.v=ju(wr(d)),m.m=null,m.P=!0,os(m,u)}t.Za=function(){this.C!=null&&(this.C=null,Hu(this),Yd(this),Z(19))};function qu(u){u.C!=null&&(a.clearTimeout(u.C),u.C=null)}function bv(u,d){var m=null;if(u.g==d){qu(u),Jd(u),u.g=null;var v=2}else if(Gd(u.h,d))m=d.D,ev(u.h,d),v=1;else return;if(u.G!=0){if(d.o)if(v==1){m=d.m?d.m.length:0,d=Date.now()-d.F;var N=u.B;v=M(),et(v,new te(v,m)),Wu(u)}else wv(u);else if(N=d.s,N==3||N==0&&0<d.X||!(v==1&&QS(u,d)||v==2&&Yd(u)))switch(m&&0<m.length&&(d=u.h,d.i=d.i.concat(m)),N){case 1:ls(u,5);break;case 4:ls(u,10);break;case 3:ls(u,6);break;default:ls(u,2)}}}function Tv(u,d){let m=u.Ta+Math.floor(Math.random()*u.cb);return u.isActive()||(m*=2),m*d}function ls(u,d){if(u.j.info("Error code "+d),d==2){var m=p(u.fb,u),v=u.Xa;const N=!v;v=new as(v||"//www.google.com/images/cleardot.gif"),a.location&&a.location.protocol=="http"||$u(v,"https"),ju(v),N?zS(v.toString(),m):BS(v.toString(),m)}else Z(2);u.G=0,u.l&&u.l.sa(d),Cv(u),yv(u)}t.fb=function(u){u?(this.j.info("Successfully pinged google.com"),Z(2)):(this.j.info("Failed to ping google.com"),Z(1))};function Cv(u){if(u.G=0,u.ka=[],u.l){const d=tv(u.h);(d.length!=0||u.i.length!=0)&&(R(u.ka,d),R(u.ka,u.i),u.h.i.length=0,S(u.i),u.i.length=0),u.l.ra()}}function Iv(u,d,m){var v=m instanceof as?wr(m):new as(m);if(v.g!="")d&&(v.g=d+"."+v.g),Fu(v,v.s);else{var N=a.location;v=N.protocol,d=d?d+"."+N.hostname:N.hostname,N=+N.port;var U=new as(null);v&&$u(U,v),d&&(U.g=d),N&&Fu(U,N),m&&(U.l=m),v=U}return m=u.D,d=u.ya,m&&d&&Ve(v,m,d),Ve(v,"VER",u.la),za(u,v),v}function Sv(u,d,m){if(d&&!u.J)throw Error("Can't create secondary domain capable XhrIo object.");return d=u.Ca&&!u.pa?new Je(new Ua({eb:m})):new Je(u.pa),d.Ha(u.J),d}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function Av(){}t=Av.prototype,t.ua=function(){},t.ta=function(){},t.sa=function(){},t.ra=function(){},t.isActive=function(){return!0},t.Na=function(){};function Gu(){}Gu.prototype.g=function(u,d){return new hn(u,d)};function hn(u,d){Me.call(this),this.g=new gv(d),this.l=u,this.h=d&&d.messageUrlParams||null,u=d&&d.messageHeaders||null,d&&d.clientProtocolHeaderRequired&&(u?u["X-Client-Protocol"]="webchannel":u={"X-Client-Protocol":"webchannel"}),this.g.o=u,u=d&&d.initMessageHeaders||null,d&&d.messageContentType&&(u?u["X-WebChannel-Content-Type"]=d.messageContentType:u={"X-WebChannel-Content-Type":d.messageContentType}),d&&d.va&&(u?u["X-WebChannel-Client-Profile"]=d.va:u={"X-WebChannel-Client-Profile":d.va}),this.g.S=u,(u=d&&d.Sb)&&!_(u)&&(this.g.m=u),this.v=d&&d.supportsCrossDomainXhr||!1,this.u=d&&d.sendRawJson||!1,(d=d&&d.httpSessionIdParam)&&!_(d)&&(this.g.D=d,u=this.h,u!==null&&d in u&&(u=this.h,d in u&&delete u[d])),this.j=new so(this)}E(hn,Me),hn.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},hn.prototype.close=function(){Xd(this.g)},hn.prototype.o=function(u){var d=this.g;if(typeof u=="string"){var m={};m.__data__=u,u=m}else this.u&&(m={},m.__data__=Na(u),u=m);d.i.push(new OS(d.Ya++,u)),d.G==3&&Wu(d)},hn.prototype.N=function(){this.g.l=null,delete this.j,Xd(this.g),delete this.g,hn.aa.N.call(this)};function xv(u){La.call(this),u.__headers__&&(this.headers=u.__headers__,this.statusCode=u.__status__,delete u.__headers__,delete u.__status__);var d=u.__sm__;if(d){e:{for(const m in d){u=m;break e}u=void 0}(this.i=u)&&(u=this.i,d=d!==null&&u in d?d[u]:void 0),this.data=d}else this.data=u}E(xv,La);function kv(){ro.call(this),this.status=1}E(kv,ro);function so(u){this.g=u}E(so,Av),so.prototype.ua=function(){et(this.g,"a")},so.prototype.ta=function(u){et(this.g,new xv(u))},so.prototype.sa=function(u){et(this.g,new kv)},so.prototype.ra=function(){et(this.g,"b")},Gu.prototype.createWebChannel=Gu.prototype.g,hn.prototype.send=hn.prototype.o,hn.prototype.open=hn.prototype.m,hn.prototype.close=hn.prototype.close,UT=function(){return new Gu},VT=function(){return M()},MT=gr,rm={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},We.NO_ERROR=0,We.TIMEOUT=8,We.HTTP_ERROR=6,Fc=We,ei.COMPLETE="complete",DT=ei,Uu.EventType=Zr,Zr.OPEN="a",Zr.CLOSE="b",Zr.ERROR="c",Zr.MESSAGE="d",Me.prototype.listen=Me.prototype.K,fl=Uu,LT=Ua,Je.prototype.listenOnce=Je.prototype.L,Je.prototype.getLastError=Je.prototype.Ka,Je.prototype.getLastErrorCode=Je.prototype.Ba,Je.prototype.getStatus=Je.prototype.Z,Je.prototype.getResponseJson=Je.prototype.Oa,Je.prototype.getResponseText=Je.prototype.oa,Je.prototype.send=Je.prototype.ea,Je.prototype.setWithCredentials=Je.prototype.Ha,NT=Je}).apply(typeof pc<"u"?pc:typeof self<"u"?self:typeof window<"u"?window:{});const $0="@firebase/firestore";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $t{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}$t.UNAUTHENTICATED=new $t(null),$t.GOOGLE_CREDENTIALS=new $t("google-credentials-uid"),$t.FIRST_PARTY=new $t("first-party-uid"),$t.MOCK_USER=new $t("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let _a="10.12.1";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Us=new Ag("@firebase/firestore");function nl(){return Us.logLevel}function J(t,...e){if(Us.logLevel<=Ee.DEBUG){const n=e.map(jg);Us.debug(`Firestore (${_a}): ${t}`,...n)}}function Hr(t,...e){if(Us.logLevel<=Ee.ERROR){const n=e.map(jg);Us.error(`Firestore (${_a}): ${t}`,...n)}}function ta(t,...e){if(Us.logLevel<=Ee.WARN){const n=e.map(jg);Us.warn(`Firestore (${_a}): ${t}`,...n)}}function jg(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(n){return JSON.stringify(n)}(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function le(t="Unexpected state"){const e=`FIRESTORE (${_a}) INTERNAL ASSERTION FAILED: `+t;throw Hr(e),new Error(e)}function De(t,e){t||le()}function ce(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const j={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Y extends Xr{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Li{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $T{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class WL{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n($t.UNAUTHENTICATED))}shutdown(){}}class qL{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class GL{constructor(e){this.t=e,this.currentUser=$t.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){let r=this.i;const i=l=>this.i!==r?(r=this.i,n(l)):Promise.resolve();let s=new Li;this.o=()=>{this.i++,this.currentUser=this.u(),s.resolve(),s=new Li,e.enqueueRetryable(()=>i(this.currentUser))};const o=()=>{const l=s;e.enqueueRetryable(async()=>{await l.promise,await i(this.currentUser)})},a=l=>{J("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=l,this.auth.addAuthTokenListener(this.o),o()};this.t.onInit(l=>a(l)),setTimeout(()=>{if(!this.auth){const l=this.t.getImmediate({optional:!0});l?a(l):(J("FirebaseAuthCredentialsProvider","Auth not yet detected"),s.resolve(),s=new Li)}},0),o()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==e?(J("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(De(typeof r.accessToken=="string"),new $T(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const e=this.auth&&this.auth.getUid();return De(e===null||typeof e=="string"),new $t(e)}}class KL{constructor(e,n,r){this.l=e,this.h=n,this.P=r,this.type="FirstParty",this.user=$t.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);const e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}}class QL{constructor(e,n,r){this.l=e,this.h=n,this.P=r}getToken(){return Promise.resolve(new KL(this.l,this.h,this.P))}start(e,n){e.enqueueRetryable(()=>n($t.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class XL{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class YL{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,n){const r=s=>{s.error!=null&&J("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${s.error.message}`);const o=s.token!==this.R;return this.R=s.token,J("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?n(s.token):Promise.resolve()};this.o=s=>{e.enqueueRetryable(()=>r(s))};const i=s=>{J("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=s,this.appCheck.addTokenListener(this.o)};this.A.onInit(s=>i(s)),setTimeout(()=>{if(!this.appCheck){const s=this.A.getImmediate({optional:!0});s?i(s):J("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(De(typeof n.token=="string"),this.R=n.token,new XL(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function JL(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FT{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=Math.floor(256/e.length)*e.length;let r="";for(;r.length<20;){const i=JL(40);for(let s=0;s<i.length;++s)r.length<20&&i[s]<n&&(r+=e.charAt(i[s]%e.length))}return r}}function Ae(t,e){return t<e?-1:t>e?1:0}function na(t,e,n){return t.length===e.length&&t.every((r,i)=>n(r,e[i]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mt{constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new Y(j.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new Y(j.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<-62135596800)throw new Y(j.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new Y(j.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return mt.fromMillis(Date.now())}static fromDate(e){return mt.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*n));return new mt(n,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?Ae(this.nanoseconds,e.nanoseconds):Ae(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ue{constructor(e){this.timestamp=e}static fromTimestamp(e){return new ue(e)}static min(){return new ue(new mt(0,0))}static max(){return new ue(new mt(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nu{constructor(e,n,r){n===void 0?n=0:n>e.length&&le(),r===void 0?r=e.length-n:r>e.length-n&&le(),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return nu.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof nu?e.forEach(r=>{n.push(r)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const r=Math.min(e.length,n.length);for(let i=0;i<r;i++){const s=e.get(i),o=n.get(i);if(s<o)return-1;if(s>o)return 1}return e.length<n.length?-1:e.length>n.length?1:0}}class Fe extends nu{construct(e,n,r){return new Fe(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const r of e){if(r.indexOf("//")>=0)throw new Y(j.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(i=>i.length>0))}return new Fe(n)}static emptyPath(){return new Fe([])}}const ZL=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class kt extends nu{construct(e,n,r){return new kt(e,n,r)}static isValidIdentifier(e){return ZL.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),kt.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new kt(["__name__"])}static fromServerFormat(e){const n=[];let r="",i=0;const s=()=>{if(r.length===0)throw new Y(j.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let o=!1;for(;i<e.length;){const a=e[i];if(a==="\\"){if(i+1===e.length)throw new Y(j.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const l=e[i+1];if(l!=="\\"&&l!=="."&&l!=="`")throw new Y(j.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=l,i+=2}else a==="`"?(o=!o,i++):a!=="."||o?(r+=a,i++):(s(),i++)}if(s(),o)throw new Y(j.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new kt(n)}static emptyPath(){return new kt([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ne{constructor(e){this.path=e}static fromPath(e){return new ne(Fe.fromString(e))}static fromName(e){return new ne(Fe.fromString(e).popFirst(5))}static empty(){return new ne(Fe.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Fe.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return Fe.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new ne(new Fe(e.slice()))}}function e4(t,e){const n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,i=ue.fromTimestamp(r===1e9?new mt(n+1,0):new mt(n,r));return new zi(i,ne.empty(),e)}function t4(t){return new zi(t.readTime,t.key,-1)}class zi{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new zi(ue.min(),ne.empty(),-1)}static max(){return new zi(ue.max(),ne.empty(),-1)}}function n4(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=ne.comparator(t.documentKey,e.documentKey),n!==0?n:Ae(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const r4="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class i4{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Tu(t){if(t.code!==j.FAILED_PRECONDITION||t.message!==r4)throw t;J("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class B{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&le(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new B((r,i)=>{this.nextCallback=s=>{this.wrapSuccess(e,s).next(r,i)},this.catchCallback=s=>{this.wrapFailure(n,s).next(r,i)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof B?n:B.resolve(n)}catch(n){return B.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):B.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):B.reject(n)}static resolve(e){return new B((n,r)=>{n(e)})}static reject(e){return new B((n,r)=>{r(e)})}static waitFor(e){return new B((n,r)=>{let i=0,s=0,o=!1;e.forEach(a=>{++i,a.next(()=>{++s,o&&s===i&&n()},l=>r(l))}),o=!0,s===i&&n()})}static or(e){let n=B.resolve(!1);for(const r of e)n=n.next(i=>i?B.resolve(i):r());return n}static forEach(e,n){const r=[];return e.forEach((i,s)=>{r.push(n.call(this,i,s))}),this.waitFor(r)}static mapArray(e,n){return new B((r,i)=>{const s=e.length,o=new Array(s);let a=0;for(let l=0;l<s;l++){const c=l;n(e[c]).next(h=>{o[c]=h,++a,a===s&&r(o)},h=>i(h))}})}static doWhile(e,n){return new B((r,i)=>{const s=()=>{e()===!0?n().next(()=>{s()},i):r()};s()})}}function s4(t){const e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function Cu(t){return t.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zg{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=r=>this.ie(r),this.se=r=>n.writeSequenceNumber(r))}ie(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.se&&this.se(e),e}}zg.oe=-1;function hd(t){return t==null}function xh(t){return t===0&&1/t==-1/0}function o4(t){return typeof t=="number"&&Number.isInteger(t)&&!xh(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function F0(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function wa(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function jT(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ye{constructor(e,n){this.comparator=e,this.root=n||xt.EMPTY}insert(e,n){return new Ye(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,xt.BLACK,null,null))}remove(e){return new Ye(this.comparator,this.root.remove(e,this.comparator).copy(null,null,xt.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){const i=this.comparator(e,r.key);if(i===0)return n+r.left.size;i<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,r)=>(e(n,r),!1))}toString(){const e=[];return this.inorderTraversal((n,r)=>(e.push(`${n}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new mc(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new mc(this.root,e,this.comparator,!1)}getReverseIterator(){return new mc(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new mc(this.root,e,this.comparator,!0)}}class mc{constructor(e,n,r,i){this.isReverse=i,this.nodeStack=[];let s=1;for(;!e.isEmpty();)if(s=n?r(e.key,n):1,n&&i&&(s*=-1),s<0)e=this.isReverse?e.left:e.right;else{if(s===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class xt{constructor(e,n,r,i,s){this.key=e,this.value=n,this.color=r??xt.RED,this.left=i??xt.EMPTY,this.right=s??xt.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,i,s){return new xt(e??this.key,n??this.value,r??this.color,i??this.left,s??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let i=this;const s=r(e,i.key);return i=s<0?i.copy(null,null,null,i.left.insert(e,n,r),null):s===0?i.copy(null,n,null,null,null):i.copy(null,null,null,null,i.right.insert(e,n,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return xt.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,i=this;if(n(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),n(e,i.key)===0){if(i.right.isEmpty())return xt.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,n))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,xt.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,xt.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw le();const e=this.left.check();if(e!==this.right.check())throw le();return e+(this.isRed()?0:1)}}xt.EMPTY=null,xt.RED=!0,xt.BLACK=!1;xt.EMPTY=new class{constructor(){this.size=0}get key(){throw le()}get value(){throw le()}get color(){throw le()}get left(){throw le()}get right(){throw le()}copy(e,n,r,i,s){return this}insert(e,n,r){return new xt(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rt{constructor(e){this.comparator=e,this.data=new Ye(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,r)=>(e(n),!1))}forEachInRange(e,n){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;n(i.key)}}forEachWhile(e,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new j0(this.data.getIterator())}getIteratorFrom(e){return new j0(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(r=>{n=n.add(r)}),n}isEqual(e){if(!(e instanceof Rt)||this.size!==e.size)return!1;const n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){const i=n.getNext().key,s=r.getNext().key;if(this.comparator(i,s)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new Rt(this.comparator);return n.data=e,n}}class j0{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wn{constructor(e){this.fields=e,e.sort(kt.comparator)}static empty(){return new Wn([])}unionWith(e){let n=new Rt(kt.comparator);for(const r of this.fields)n=n.add(r);for(const r of e)n=n.add(r);return new Wn(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return na(this.fields,e.fields,(n,r)=>n.isEqual(r))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zT extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bt{constructor(e){this.binaryString=e}static fromBase64String(e){const n=function(i){try{return atob(i)}catch(s){throw typeof DOMException<"u"&&s instanceof DOMException?new zT("Invalid base64 string: "+s):s}}(e);return new Bt(n)}static fromUint8Array(e){const n=function(i){let s="";for(let o=0;o<i.length;++o)s+=String.fromCharCode(i[o]);return s}(e);return new Bt(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const r=new Uint8Array(n.length);for(let i=0;i<n.length;i++)r[i]=n.charCodeAt(i);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Ae(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Bt.EMPTY_BYTE_STRING=new Bt("");const a4=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Bi(t){if(De(!!t),typeof t=="string"){let e=0;const n=a4.exec(t);if(De(!!n),n[1]){let i=n[1];i=(i+"000000000").substr(0,9),e=Number(i)}const r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:lt(t.seconds),nanos:lt(t.nanos)}}function lt(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function $s(t){return typeof t=="string"?Bt.fromBase64String(t):Bt.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Bg(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="server_timestamp"}function Hg(t){const e=t.mapValue.fields.__previous_value__;return Bg(e)?Hg(e):e}function ru(t){const e=Bi(t.mapValue.fields.__local_write_time__.timestampValue);return new mt(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class l4{constructor(e,n,r,i,s,o,a,l,c){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=i,this.ssl=s,this.forceLongPolling=o,this.autoDetectLongPolling=a,this.longPollingOptions=l,this.useFetchStreams=c}}class iu{constructor(e,n){this.projectId=e,this.database=n||"(default)"}static empty(){return new iu("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof iu&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gc={mapValue:{fields:{__type__:{stringValue:"__max__"}}}};function Fs(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?Bg(t)?4:u4(t)?9007199254740991:10:le()}function fr(t,e){if(t===e)return!0;const n=Fs(t);if(n!==Fs(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return ru(t).isEqual(ru(e));case 3:return function(i,s){if(typeof i.timestampValue=="string"&&typeof s.timestampValue=="string"&&i.timestampValue.length===s.timestampValue.length)return i.timestampValue===s.timestampValue;const o=Bi(i.timestampValue),a=Bi(s.timestampValue);return o.seconds===a.seconds&&o.nanos===a.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(i,s){return $s(i.bytesValue).isEqual($s(s.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(i,s){return lt(i.geoPointValue.latitude)===lt(s.geoPointValue.latitude)&&lt(i.geoPointValue.longitude)===lt(s.geoPointValue.longitude)}(t,e);case 2:return function(i,s){if("integerValue"in i&&"integerValue"in s)return lt(i.integerValue)===lt(s.integerValue);if("doubleValue"in i&&"doubleValue"in s){const o=lt(i.doubleValue),a=lt(s.doubleValue);return o===a?xh(o)===xh(a):isNaN(o)&&isNaN(a)}return!1}(t,e);case 9:return na(t.arrayValue.values||[],e.arrayValue.values||[],fr);case 10:return function(i,s){const o=i.mapValue.fields||{},a=s.mapValue.fields||{};if(F0(o)!==F0(a))return!1;for(const l in o)if(o.hasOwnProperty(l)&&(a[l]===void 0||!fr(o[l],a[l])))return!1;return!0}(t,e);default:return le()}}function su(t,e){return(t.values||[]).find(n=>fr(n,e))!==void 0}function ra(t,e){if(t===e)return 0;const n=Fs(t),r=Fs(e);if(n!==r)return Ae(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return Ae(t.booleanValue,e.booleanValue);case 2:return function(s,o){const a=lt(s.integerValue||s.doubleValue),l=lt(o.integerValue||o.doubleValue);return a<l?-1:a>l?1:a===l?0:isNaN(a)?isNaN(l)?0:-1:1}(t,e);case 3:return z0(t.timestampValue,e.timestampValue);case 4:return z0(ru(t),ru(e));case 5:return Ae(t.stringValue,e.stringValue);case 6:return function(s,o){const a=$s(s),l=$s(o);return a.compareTo(l)}(t.bytesValue,e.bytesValue);case 7:return function(s,o){const a=s.split("/"),l=o.split("/");for(let c=0;c<a.length&&c<l.length;c++){const h=Ae(a[c],l[c]);if(h!==0)return h}return Ae(a.length,l.length)}(t.referenceValue,e.referenceValue);case 8:return function(s,o){const a=Ae(lt(s.latitude),lt(o.latitude));return a!==0?a:Ae(lt(s.longitude),lt(o.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return function(s,o){const a=s.values||[],l=o.values||[];for(let c=0;c<a.length&&c<l.length;++c){const h=ra(a[c],l[c]);if(h)return h}return Ae(a.length,l.length)}(t.arrayValue,e.arrayValue);case 10:return function(s,o){if(s===gc.mapValue&&o===gc.mapValue)return 0;if(s===gc.mapValue)return 1;if(o===gc.mapValue)return-1;const a=s.fields||{},l=Object.keys(a),c=o.fields||{},h=Object.keys(c);l.sort(),h.sort();for(let f=0;f<l.length&&f<h.length;++f){const p=Ae(l[f],h[f]);if(p!==0)return p;const w=ra(a[l[f]],c[h[f]]);if(w!==0)return w}return Ae(l.length,h.length)}(t.mapValue,e.mapValue);default:throw le()}}function z0(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return Ae(t,e);const n=Bi(t),r=Bi(e),i=Ae(n.seconds,r.seconds);return i!==0?i:Ae(n.nanos,r.nanos)}function ia(t){return im(t)}function im(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(n){const r=Bi(n);return`time(${r.seconds},${r.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(n){return $s(n).toBase64()}(t.bytesValue):"referenceValue"in t?function(n){return ne.fromName(n).toString()}(t.referenceValue):"geoPointValue"in t?function(n){return`geo(${n.latitude},${n.longitude})`}(t.geoPointValue):"arrayValue"in t?function(n){let r="[",i=!0;for(const s of n.values||[])i?i=!1:r+=",",r+=im(s);return r+"]"}(t.arrayValue):"mapValue"in t?function(n){const r=Object.keys(n.fields||{}).sort();let i="{",s=!0;for(const o of r)s?s=!1:i+=",",i+=`${o}:${im(n.fields[o])}`;return i+"}"}(t.mapValue):le()}function B0(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function sm(t){return!!t&&"integerValue"in t}function Wg(t){return!!t&&"arrayValue"in t}function H0(t){return!!t&&"nullValue"in t}function W0(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function jc(t){return!!t&&"mapValue"in t}function Pl(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){const e={mapValue:{fields:{}}};return wa(t.mapValue.fields,(n,r)=>e.mapValue.fields[n]=Pl(r)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=Pl(t.arrayValue.values[n]);return e}return Object.assign({},t)}function u4(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class An{constructor(e){this.value=e}static empty(){return new An({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!jc(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=Pl(n)}setAll(e){let n=kt.emptyPath(),r={},i=[];e.forEach((o,a)=>{if(!n.isImmediateParentOf(a)){const l=this.getFieldsMap(n);this.applyChanges(l,r,i),r={},i=[],n=a.popLast()}o?r[a.lastSegment()]=Pl(o):i.push(a.lastSegment())});const s=this.getFieldsMap(n);this.applyChanges(s,r,i)}delete(e){const n=this.field(e.popLast());jc(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return fr(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=n.mapValue.fields[e.get(r)];jc(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=i),n=i}return n.mapValue.fields}applyChanges(e,n,r){wa(n,(i,s)=>e[i]=s);for(const i of r)delete e[i]}clone(){return new An(Pl(this.value))}}function BT(t){const e=[];return wa(t.fields,(n,r)=>{const i=new kt([n]);if(jc(r)){const s=BT(r.mapValue).fields;if(s.length===0)e.push(i);else for(const o of s)e.push(i.child(o))}else e.push(i)}),new Wn(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jt{constructor(e,n,r,i,s,o,a){this.key=e,this.documentType=n,this.version=r,this.readTime=i,this.createTime=s,this.data=o,this.documentState=a}static newInvalidDocument(e){return new jt(e,0,ue.min(),ue.min(),ue.min(),An.empty(),0)}static newFoundDocument(e,n,r,i){return new jt(e,1,n,ue.min(),r,i,0)}static newNoDocument(e,n){return new jt(e,2,n,ue.min(),ue.min(),An.empty(),0)}static newUnknownDocument(e,n){return new jt(e,3,n,ue.min(),ue.min(),An.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(ue.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=An.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=An.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=ue.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof jt&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new jt(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kh{constructor(e,n){this.position=e,this.inclusive=n}}function q0(t,e,n){let r=0;for(let i=0;i<t.position.length;i++){const s=e[i],o=t.position[i];if(s.field.isKeyField()?r=ne.comparator(ne.fromName(o.referenceValue),n.key):r=ra(o,n.data.field(s.field)),s.dir==="desc"&&(r*=-1),r!==0)break}return r}function G0(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!fr(t.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ou{constructor(e,n="asc"){this.field=e,this.dir=n}}function c4(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HT{}class ct extends HT{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,r):new d4(e,n,r):n==="array-contains"?new m4(e,r):n==="in"?new g4(e,r):n==="not-in"?new y4(e,r):n==="array-contains-any"?new v4(e,r):new ct(e,n,r)}static createKeyFieldInFilter(e,n,r){return n==="in"?new f4(e,r):new p4(e,r)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&this.matchesComparison(ra(n,this.value)):n!==null&&Fs(this.value)===Fs(n)&&this.matchesComparison(ra(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return le()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Yn extends HT{constructor(e,n){super(),this.filters=e,this.op=n,this.ae=null}static create(e,n){return new Yn(e,n)}matches(e){return WT(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.ae!==null||(this.ae=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.ae}getFilters(){return Object.assign([],this.filters)}}function WT(t){return t.op==="and"}function qT(t){return h4(t)&&WT(t)}function h4(t){for(const e of t.filters)if(e instanceof Yn)return!1;return!0}function om(t){if(t instanceof ct)return t.field.canonicalString()+t.op.toString()+ia(t.value);if(qT(t))return t.filters.map(e=>om(e)).join(",");{const e=t.filters.map(n=>om(n)).join(",");return`${t.op}(${e})`}}function GT(t,e){return t instanceof ct?function(r,i){return i instanceof ct&&r.op===i.op&&r.field.isEqual(i.field)&&fr(r.value,i.value)}(t,e):t instanceof Yn?function(r,i){return i instanceof Yn&&r.op===i.op&&r.filters.length===i.filters.length?r.filters.reduce((s,o,a)=>s&&GT(o,i.filters[a]),!0):!1}(t,e):void le()}function KT(t){return t instanceof ct?function(n){return`${n.field.canonicalString()} ${n.op} ${ia(n.value)}`}(t):t instanceof Yn?function(n){return n.op.toString()+" {"+n.getFilters().map(KT).join(" ,")+"}"}(t):"Filter"}class d4 extends ct{constructor(e,n,r){super(e,n,r),this.key=ne.fromName(r.referenceValue)}matches(e){const n=ne.comparator(e.key,this.key);return this.matchesComparison(n)}}class f4 extends ct{constructor(e,n){super(e,"in",n),this.keys=QT("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class p4 extends ct{constructor(e,n){super(e,"not-in",n),this.keys=QT("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function QT(t,e){var n;return(((n=e.arrayValue)===null||n===void 0?void 0:n.values)||[]).map(r=>ne.fromName(r.referenceValue))}class m4 extends ct{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return Wg(n)&&su(n.arrayValue,this.value)}}class g4 extends ct{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&su(this.value.arrayValue,n)}}class y4 extends ct{constructor(e,n){super(e,"not-in",n)}matches(e){if(su(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&!su(this.value.arrayValue,n)}}class v4 extends ct{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!Wg(n)||!n.arrayValue.values)&&n.arrayValue.values.some(r=>su(this.value.arrayValue,r))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _4{constructor(e,n=null,r=[],i=[],s=null,o=null,a=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=i,this.limit=s,this.startAt=o,this.endAt=a,this.ue=null}}function K0(t,e=null,n=[],r=[],i=null,s=null,o=null){return new _4(t,e,n,r,i,s,o)}function qg(t){const e=ce(t);if(e.ue===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(r=>om(r)).join(","),n+="|ob:",n+=e.orderBy.map(r=>function(s){return s.field.canonicalString()+s.dir}(r)).join(","),hd(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(r=>ia(r)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(r=>ia(r)).join(",")),e.ue=n}return e.ue}function Gg(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!c4(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!GT(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!G0(t.startAt,e.startAt)&&G0(t.endAt,e.endAt)}function am(t){return ne.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ea{constructor(e,n=null,r=[],i=[],s=null,o="F",a=null,l=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=i,this.limit=s,this.limitType=o,this.startAt=a,this.endAt=l,this.ce=null,this.le=null,this.he=null,this.startAt,this.endAt}}function w4(t,e,n,r,i,s,o,a){return new Ea(t,e,n,r,i,s,o,a)}function XT(t){return new Ea(t)}function Q0(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function YT(t){return t.collectionGroup!==null}function Rl(t){const e=ce(t);if(e.ce===null){e.ce=[];const n=new Set;for(const s of e.explicitOrderBy)e.ce.push(s),n.add(s.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(o){let a=new Rt(kt.comparator);return o.filters.forEach(l=>{l.getFlattenedFilters().forEach(c=>{c.isInequality()&&(a=a.add(c.field))})}),a})(e).forEach(s=>{n.has(s.canonicalString())||s.isKeyField()||e.ce.push(new ou(s,r))}),n.has(kt.keyField().canonicalString())||e.ce.push(new ou(kt.keyField(),r))}return e.ce}function cr(t){const e=ce(t);return e.le||(e.le=E4(e,Rl(t))),e.le}function E4(t,e){if(t.limitType==="F")return K0(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(i=>{const s=i.dir==="desc"?"asc":"desc";return new ou(i.field,s)});const n=t.endAt?new kh(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new kh(t.startAt.position,t.startAt.inclusive):null;return K0(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}}function lm(t,e){const n=t.filters.concat([e]);return new Ea(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}function um(t,e,n){return new Ea(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function dd(t,e){return Gg(cr(t),cr(e))&&t.limitType===e.limitType}function JT(t){return`${qg(cr(t))}|lt:${t.limitType}`}function po(t){return`Query(target=${function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map(i=>KT(i)).join(", ")}]`),hd(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map(i=>function(o){return`${o.field.canonicalString()} (${o.dir})`}(i)).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map(i=>ia(i)).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map(i=>ia(i)).join(",")),`Target(${r})`}(cr(t))}; limitType=${t.limitType})`}function fd(t,e){return e.isFoundDocument()&&function(r,i){const s=i.key.path;return r.collectionGroup!==null?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(s):ne.isDocumentKey(r.path)?r.path.isEqual(s):r.path.isImmediateParentOf(s)}(t,e)&&function(r,i){for(const s of Rl(r))if(!s.field.isKeyField()&&i.data.field(s.field)===null)return!1;return!0}(t,e)&&function(r,i){for(const s of r.filters)if(!s.matches(i))return!1;return!0}(t,e)&&function(r,i){return!(r.startAt&&!function(o,a,l){const c=q0(o,a,l);return o.inclusive?c<=0:c<0}(r.startAt,Rl(r),i)||r.endAt&&!function(o,a,l){const c=q0(o,a,l);return o.inclusive?c>=0:c>0}(r.endAt,Rl(r),i))}(t,e)}function b4(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function ZT(t){return(e,n)=>{let r=!1;for(const i of Rl(t)){const s=T4(i,e,n);if(s!==0)return s;r=r||i.field.isKeyField()}return 0}}function T4(t,e,n){const r=t.field.isKeyField()?ne.comparator(e.key,n.key):function(s,o,a){const l=o.data.field(s),c=a.data.field(s);return l!==null&&c!==null?ra(l,c):le()}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return le()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ba{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r!==void 0){for(const[i,s]of r)if(this.equalsFn(i,e))return s}}has(e){return this.get(e)!==void 0}set(e,n){const r=this.mapKeyFn(e),i=this.inner[r];if(i===void 0)return this.inner[r]=[[e,n]],void this.innerSize++;for(let s=0;s<i.length;s++)if(this.equalsFn(i[s][0],e))return void(i[s]=[e,n]);i.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return r.length===1?delete this.inner[n]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){wa(this.inner,(n,r)=>{for(const[i,s]of r)e(i,s)})}isEmpty(){return jT(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const C4=new Ye(ne.comparator);function Wr(){return C4}const eC=new Ye(ne.comparator);function pl(...t){let e=eC;for(const n of t)e=e.insert(n.key,n);return e}function tC(t){let e=eC;return t.forEach((n,r)=>e=e.insert(n,r.overlayedDocument)),e}function Es(){return Ol()}function nC(){return Ol()}function Ol(){return new ba(t=>t.toString(),(t,e)=>t.isEqual(e))}const I4=new Ye(ne.comparator),S4=new Rt(ne.comparator);function we(...t){let e=S4;for(const n of t)e=e.add(n);return e}const A4=new Rt(Ae);function x4(){return A4}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rC(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:xh(e)?"-0":e}}function iC(t){return{integerValue:""+t}}function k4(t,e){return o4(e)?iC(e):rC(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pd{constructor(){this._=void 0}}function P4(t,e,n){return t instanceof Ph?function(i,s){const o={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return s&&Bg(s)&&(s=Hg(s)),s&&(o.fields.__previous_value__=s),{mapValue:o}}(n,e):t instanceof au?oC(t,e):t instanceof lu?aC(t,e):function(i,s){const o=sC(i,s),a=X0(o)+X0(i.Pe);return sm(o)&&sm(i.Pe)?iC(a):rC(i.serializer,a)}(t,e)}function R4(t,e,n){return t instanceof au?oC(t,e):t instanceof lu?aC(t,e):n}function sC(t,e){return t instanceof Rh?function(r){return sm(r)||function(s){return!!s&&"doubleValue"in s}(r)}(e)?e:{integerValue:0}:null}class Ph extends pd{}class au extends pd{constructor(e){super(),this.elements=e}}function oC(t,e){const n=lC(e);for(const r of t.elements)n.some(i=>fr(i,r))||n.push(r);return{arrayValue:{values:n}}}class lu extends pd{constructor(e){super(),this.elements=e}}function aC(t,e){let n=lC(e);for(const r of t.elements)n=n.filter(i=>!fr(i,r));return{arrayValue:{values:n}}}class Rh extends pd{constructor(e,n){super(),this.serializer=e,this.Pe=n}}function X0(t){return lt(t.integerValue||t.doubleValue)}function lC(t){return Wg(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}function O4(t,e){return t.field.isEqual(e.field)&&function(r,i){return r instanceof au&&i instanceof au||r instanceof lu&&i instanceof lu?na(r.elements,i.elements,fr):r instanceof Rh&&i instanceof Rh?fr(r.Pe,i.Pe):r instanceof Ph&&i instanceof Ph}(t.transform,e.transform)}class N4{constructor(e,n){this.version=e,this.transformResults=n}}class Ur{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new Ur}static exists(e){return new Ur(void 0,e)}static updateTime(e){return new Ur(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function zc(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class md{}function uC(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new hC(t.key,Ur.none()):new Iu(t.key,t.data,Ur.none());{const n=t.data,r=An.empty();let i=new Rt(kt.comparator);for(let s of e.fields)if(!i.has(s)){let o=n.field(s);o===null&&s.length>1&&(s=s.popLast(),o=n.field(s)),o===null?r.delete(s):r.set(s,o),i=i.add(s)}return new Ws(t.key,r,new Wn(i.toArray()),Ur.none())}}function L4(t,e,n){t instanceof Iu?function(i,s,o){const a=i.value.clone(),l=J0(i.fieldTransforms,s,o.transformResults);a.setAll(l),s.convertToFoundDocument(o.version,a).setHasCommittedMutations()}(t,e,n):t instanceof Ws?function(i,s,o){if(!zc(i.precondition,s))return void s.convertToUnknownDocument(o.version);const a=J0(i.fieldTransforms,s,o.transformResults),l=s.data;l.setAll(cC(i)),l.setAll(a),s.convertToFoundDocument(o.version,l).setHasCommittedMutations()}(t,e,n):function(i,s,o){s.convertToNoDocument(o.version).setHasCommittedMutations()}(0,e,n)}function Nl(t,e,n,r){return t instanceof Iu?function(s,o,a,l){if(!zc(s.precondition,o))return a;const c=s.value.clone(),h=Z0(s.fieldTransforms,l,o);return c.setAll(h),o.convertToFoundDocument(o.version,c).setHasLocalMutations(),null}(t,e,n,r):t instanceof Ws?function(s,o,a,l){if(!zc(s.precondition,o))return a;const c=Z0(s.fieldTransforms,l,o),h=o.data;return h.setAll(cC(s)),h.setAll(c),o.convertToFoundDocument(o.version,h).setHasLocalMutations(),a===null?null:a.unionWith(s.fieldMask.fields).unionWith(s.fieldTransforms.map(f=>f.field))}(t,e,n,r):function(s,o,a){return zc(s.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):a}(t,e,n)}function D4(t,e){let n=null;for(const r of t.fieldTransforms){const i=e.data.field(r.field),s=sC(r.transform,i||null);s!=null&&(n===null&&(n=An.empty()),n.set(r.field,s))}return n||null}function Y0(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(r,i){return r===void 0&&i===void 0||!(!r||!i)&&na(r,i,(s,o)=>O4(s,o))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class Iu extends md{constructor(e,n,r,i=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}}class Ws extends md{constructor(e,n,r,i,s=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=i,this.fieldTransforms=s,this.type=1}getFieldMask(){return this.fieldMask}}function cC(t){const e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const r=t.data.field(n);e.set(n,r)}}),e}function J0(t,e,n){const r=new Map;De(t.length===n.length);for(let i=0;i<n.length;i++){const s=t[i],o=s.transform,a=e.data.field(s.field);r.set(s.field,R4(o,a,n[i]))}return r}function Z0(t,e,n){const r=new Map;for(const i of t){const s=i.transform,o=n.data.field(i.field);r.set(i.field,P4(s,o,e))}return r}class hC extends md{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class M4 extends md{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class V4{constructor(e,n,r,i){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,n){const r=n.mutationResults;for(let i=0;i<this.mutations.length;i++){const s=this.mutations[i];s.key.isEqual(e.key)&&L4(s,e,r[i])}}applyToLocalView(e,n){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(n=Nl(r,e,n,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(n=Nl(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const r=nC();return this.mutations.forEach(i=>{const s=e.get(i.key),o=s.overlayedDocument;let a=this.applyToLocalView(o,s.mutatedFields);a=n.has(i.key)?null:a;const l=uC(o,a);l!==null&&r.set(i.key,l),o.isValidDocument()||o.convertToNoDocument(ue.min())}),r}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),we())}isEqual(e){return this.batchId===e.batchId&&na(this.mutations,e.mutations,(n,r)=>Y0(n,r))&&na(this.baseMutations,e.baseMutations,(n,r)=>Y0(n,r))}}class Kg{constructor(e,n,r,i){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=i}static from(e,n,r){De(e.mutations.length===r.length);let i=function(){return I4}();const s=e.mutations;for(let o=0;o<s.length;o++)i=i.insert(s[o].key,r[o].version);return new Kg(e,n,r,i)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class U4{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $4{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var ot,be;function F4(t){switch(t){default:return le();case j.CANCELLED:case j.UNKNOWN:case j.DEADLINE_EXCEEDED:case j.RESOURCE_EXHAUSTED:case j.INTERNAL:case j.UNAVAILABLE:case j.UNAUTHENTICATED:return!1;case j.INVALID_ARGUMENT:case j.NOT_FOUND:case j.ALREADY_EXISTS:case j.PERMISSION_DENIED:case j.FAILED_PRECONDITION:case j.ABORTED:case j.OUT_OF_RANGE:case j.UNIMPLEMENTED:case j.DATA_LOSS:return!0}}function dC(t){if(t===void 0)return Hr("GRPC error has no .code"),j.UNKNOWN;switch(t){case ot.OK:return j.OK;case ot.CANCELLED:return j.CANCELLED;case ot.UNKNOWN:return j.UNKNOWN;case ot.DEADLINE_EXCEEDED:return j.DEADLINE_EXCEEDED;case ot.RESOURCE_EXHAUSTED:return j.RESOURCE_EXHAUSTED;case ot.INTERNAL:return j.INTERNAL;case ot.UNAVAILABLE:return j.UNAVAILABLE;case ot.UNAUTHENTICATED:return j.UNAUTHENTICATED;case ot.INVALID_ARGUMENT:return j.INVALID_ARGUMENT;case ot.NOT_FOUND:return j.NOT_FOUND;case ot.ALREADY_EXISTS:return j.ALREADY_EXISTS;case ot.PERMISSION_DENIED:return j.PERMISSION_DENIED;case ot.FAILED_PRECONDITION:return j.FAILED_PRECONDITION;case ot.ABORTED:return j.ABORTED;case ot.OUT_OF_RANGE:return j.OUT_OF_RANGE;case ot.UNIMPLEMENTED:return j.UNIMPLEMENTED;case ot.DATA_LOSS:return j.DATA_LOSS;default:return le()}}(be=ot||(ot={}))[be.OK=0]="OK",be[be.CANCELLED=1]="CANCELLED",be[be.UNKNOWN=2]="UNKNOWN",be[be.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",be[be.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",be[be.NOT_FOUND=5]="NOT_FOUND",be[be.ALREADY_EXISTS=6]="ALREADY_EXISTS",be[be.PERMISSION_DENIED=7]="PERMISSION_DENIED",be[be.UNAUTHENTICATED=16]="UNAUTHENTICATED",be[be.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",be[be.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",be[be.ABORTED=10]="ABORTED",be[be.OUT_OF_RANGE=11]="OUT_OF_RANGE",be[be.UNIMPLEMENTED=12]="UNIMPLEMENTED",be[be.INTERNAL=13]="INTERNAL",be[be.UNAVAILABLE=14]="UNAVAILABLE",be[be.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function j4(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const z4=new Cs([4294967295,4294967295],0);function ew(t){const e=j4().encode(t),n=new OT;return n.update(e),new Uint8Array(n.digest())}function tw(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),s=e.getUint32(12,!0);return[new Cs([n,r],0),new Cs([i,s],0)]}class Qg{constructor(e,n,r){if(this.bitmap=e,this.padding=n,this.hashCount=r,n<0||n>=8)throw new ml(`Invalid padding: ${n}`);if(r<0)throw new ml(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new ml(`Invalid hash count: ${r}`);if(e.length===0&&n!==0)throw new ml(`Invalid padding when bitmap length is 0: ${n}`);this.Ie=8*e.length-n,this.Te=Cs.fromNumber(this.Ie)}Ee(e,n,r){let i=e.add(n.multiply(Cs.fromNumber(r)));return i.compare(z4)===1&&(i=new Cs([i.getBits(0),i.getBits(1)],0)),i.modulo(this.Te).toNumber()}de(e){return(this.bitmap[Math.floor(e/8)]&1<<e%8)!=0}mightContain(e){if(this.Ie===0)return!1;const n=ew(e),[r,i]=tw(n);for(let s=0;s<this.hashCount;s++){const o=this.Ee(r,i,s);if(!this.de(o))return!1}return!0}static create(e,n,r){const i=e%8==0?0:8-e%8,s=new Uint8Array(Math.ceil(e/8)),o=new Qg(s,i,n);return r.forEach(a=>o.insert(a)),o}insert(e){if(this.Ie===0)return;const n=ew(e),[r,i]=tw(n);for(let s=0;s<this.hashCount;s++){const o=this.Ee(r,i,s);this.Ae(o)}}Ae(e){const n=Math.floor(e/8),r=e%8;this.bitmap[n]|=1<<r}}class ml extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gd{constructor(e,n,r,i,s){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=s}static createSynthesizedRemoteEventForCurrentChange(e,n,r){const i=new Map;return i.set(e,Su.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new gd(ue.min(),i,new Ye(Ae),Wr(),we())}}class Su{constructor(e,n,r,i,s){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=s}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new Su(r,n,we(),we(),we())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bc{constructor(e,n,r,i){this.Re=e,this.removedTargetIds=n,this.key=r,this.Ve=i}}class fC{constructor(e,n){this.targetId=e,this.me=n}}class pC{constructor(e,n,r=Bt.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=i}}class nw{constructor(){this.fe=0,this.ge=iw(),this.pe=Bt.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return this.fe!==0}get be(){return this.we}De(e){e.approximateByteSize()>0&&(this.we=!0,this.pe=e)}Ce(){let e=we(),n=we(),r=we();return this.ge.forEach((i,s)=>{switch(s){case 0:e=e.add(i);break;case 2:n=n.add(i);break;case 1:r=r.add(i);break;default:le()}}),new Su(this.pe,this.ye,e,n,r)}ve(){this.we=!1,this.ge=iw()}Fe(e,n){this.we=!0,this.ge=this.ge.insert(e,n)}Me(e){this.we=!0,this.ge=this.ge.remove(e)}xe(){this.fe+=1}Oe(){this.fe-=1,De(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}}class B4{constructor(e){this.Le=e,this.Be=new Map,this.ke=Wr(),this.qe=rw(),this.Qe=new Ye(Ae)}Ke(e){for(const n of e.Re)e.Ve&&e.Ve.isFoundDocument()?this.$e(n,e.Ve):this.Ue(n,e.key,e.Ve);for(const n of e.removedTargetIds)this.Ue(n,e.key,e.Ve)}We(e){this.forEachTarget(e,n=>{const r=this.Ge(n);switch(e.state){case 0:this.ze(n)&&r.De(e.resumeToken);break;case 1:r.Oe(),r.Se||r.ve(),r.De(e.resumeToken);break;case 2:r.Oe(),r.Se||this.removeTarget(n);break;case 3:this.ze(n)&&(r.Ne(),r.De(e.resumeToken));break;case 4:this.ze(n)&&(this.je(n),r.De(e.resumeToken));break;default:le()}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.Be.forEach((r,i)=>{this.ze(i)&&n(i)})}He(e){const n=e.targetId,r=e.me.count,i=this.Je(n);if(i){const s=i.target;if(am(s))if(r===0){const o=new ne(s.path);this.Ue(n,o,jt.newNoDocument(o,ue.min()))}else De(r===1);else{const o=this.Ye(n);if(o!==r){const a=this.Ze(e),l=a?this.Xe(a,e,o):1;if(l!==0){this.je(n);const c=l===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Qe=this.Qe.insert(n,c)}}}}}Ze(e){const n=e.me.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:r="",padding:i=0},hashCount:s=0}=n;let o,a;try{o=$s(r).toUint8Array()}catch(l){if(l instanceof zT)return ta("Decoding the base64 bloom filter in existence filter failed ("+l.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw l}try{a=new Qg(o,i,s)}catch(l){return ta(l instanceof ml?"BloomFilter error: ":"Applying bloom filter failed: ",l),null}return a.Ie===0?null:a}Xe(e,n,r){return n.me.count===r-this.nt(e,n.targetId)?0:2}nt(e,n){const r=this.Le.getRemoteKeysForTarget(n);let i=0;return r.forEach(s=>{const o=this.Le.tt(),a=`projects/${o.projectId}/databases/${o.database}/documents/${s.path.canonicalString()}`;e.mightContain(a)||(this.Ue(n,s,null),i++)}),i}rt(e){const n=new Map;this.Be.forEach((s,o)=>{const a=this.Je(o);if(a){if(s.current&&am(a.target)){const l=new ne(a.target.path);this.ke.get(l)!==null||this.it(o,l)||this.Ue(o,l,jt.newNoDocument(l,e))}s.be&&(n.set(o,s.Ce()),s.ve())}});let r=we();this.qe.forEach((s,o)=>{let a=!0;o.forEachWhile(l=>{const c=this.Je(l);return!c||c.purpose==="TargetPurposeLimboResolution"||(a=!1,!1)}),a&&(r=r.add(s))}),this.ke.forEach((s,o)=>o.setReadTime(e));const i=new gd(e,n,this.Qe,this.ke,r);return this.ke=Wr(),this.qe=rw(),this.Qe=new Ye(Ae),i}$e(e,n){if(!this.ze(e))return;const r=this.it(e,n.key)?2:0;this.Ge(e).Fe(n.key,r),this.ke=this.ke.insert(n.key,n),this.qe=this.qe.insert(n.key,this.st(n.key).add(e))}Ue(e,n,r){if(!this.ze(e))return;const i=this.Ge(e);this.it(e,n)?i.Fe(n,1):i.Me(n),this.qe=this.qe.insert(n,this.st(n).delete(e)),r&&(this.ke=this.ke.insert(n,r))}removeTarget(e){this.Be.delete(e)}Ye(e){const n=this.Ge(e).Ce();return this.Le.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}xe(e){this.Ge(e).xe()}Ge(e){let n=this.Be.get(e);return n||(n=new nw,this.Be.set(e,n)),n}st(e){let n=this.qe.get(e);return n||(n=new Rt(Ae),this.qe=this.qe.insert(e,n)),n}ze(e){const n=this.Je(e)!==null;return n||J("WatchChangeAggregator","Detected inactive target",e),n}Je(e){const n=this.Be.get(e);return n&&n.Se?null:this.Le.ot(e)}je(e){this.Be.set(e,new nw),this.Le.getRemoteKeysForTarget(e).forEach(n=>{this.Ue(e,n,null)})}it(e,n){return this.Le.getRemoteKeysForTarget(e).has(n)}}function rw(){return new Ye(ne.comparator)}function iw(){return new Ye(ne.comparator)}const H4={asc:"ASCENDING",desc:"DESCENDING"},W4={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},q4={and:"AND",or:"OR"};class G4{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function cm(t,e){return t.useProto3Json||hd(e)?e:{value:e}}function Oh(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function mC(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function K4(t,e){return Oh(t,e.toTimestamp())}function hr(t){return De(!!t),ue.fromTimestamp(function(n){const r=Bi(n);return new mt(r.seconds,r.nanos)}(t))}function Xg(t,e){return hm(t,e).canonicalString()}function hm(t,e){const n=function(i){return new Fe(["projects",i.projectId,"databases",i.database])}(t).child("documents");return e===void 0?n:n.child(e)}function gC(t){const e=Fe.fromString(t);return De(EC(e)),e}function dm(t,e){return Xg(t.databaseId,e.path)}function Vf(t,e){const n=gC(e);if(n.get(1)!==t.databaseId.projectId)throw new Y(j.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new Y(j.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new ne(vC(n))}function yC(t,e){return Xg(t.databaseId,e)}function Q4(t){const e=gC(t);return e.length===4?Fe.emptyPath():vC(e)}function fm(t){return new Fe(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function vC(t){return De(t.length>4&&t.get(4)==="documents"),t.popFirst(5)}function sw(t,e,n){return{name:dm(t,e),fields:n.value.mapValue.fields}}function X4(t,e){let n;if("targetChange"in e){e.targetChange;const r=function(c){return c==="NO_CHANGE"?0:c==="ADD"?1:c==="REMOVE"?2:c==="CURRENT"?3:c==="RESET"?4:le()}(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],s=function(c,h){return c.useProto3Json?(De(h===void 0||typeof h=="string"),Bt.fromBase64String(h||"")):(De(h===void 0||h instanceof Buffer||h instanceof Uint8Array),Bt.fromUint8Array(h||new Uint8Array))}(t,e.targetChange.resumeToken),o=e.targetChange.cause,a=o&&function(c){const h=c.code===void 0?j.UNKNOWN:dC(c.code);return new Y(h,c.message||"")}(o);n=new pC(r,i,s,a||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const i=Vf(t,r.document.name),s=hr(r.document.updateTime),o=r.document.createTime?hr(r.document.createTime):ue.min(),a=new An({mapValue:{fields:r.document.fields}}),l=jt.newFoundDocument(i,s,o,a),c=r.targetIds||[],h=r.removedTargetIds||[];n=new Bc(c,h,l.key,l)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const i=Vf(t,r.document),s=r.readTime?hr(r.readTime):ue.min(),o=jt.newNoDocument(i,s),a=r.removedTargetIds||[];n=new Bc([],a,o.key,o)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const i=Vf(t,r.document),s=r.removedTargetIds||[];n=new Bc([],s,i,null)}else{if(!("filter"in e))return le();{e.filter;const r=e.filter;r.targetId;const{count:i=0,unchangedNames:s}=r,o=new $4(i,s),a=r.targetId;n=new fC(a,o)}}return n}function Y4(t,e){let n;if(e instanceof Iu)n={update:sw(t,e.key,e.value)};else if(e instanceof hC)n={delete:dm(t,e.key)};else if(e instanceof Ws)n={update:sw(t,e.key,e.data),updateMask:oD(e.fieldMask)};else{if(!(e instanceof M4))return le();n={verify:dm(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(r=>function(s,o){const a=o.transform;if(a instanceof Ph)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(a instanceof au)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:a.elements}};if(a instanceof lu)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:a.elements}};if(a instanceof Rh)return{fieldPath:o.field.canonicalString(),increment:a.Pe};throw le()}(0,r))),e.precondition.isNone||(n.currentDocument=function(i,s){return s.updateTime!==void 0?{updateTime:K4(i,s.updateTime)}:s.exists!==void 0?{exists:s.exists}:le()}(t,e.precondition)),n}function J4(t,e){return t&&t.length>0?(De(e!==void 0),t.map(n=>function(i,s){let o=i.updateTime?hr(i.updateTime):hr(s);return o.isEqual(ue.min())&&(o=hr(s)),new N4(o,i.transformResults||[])}(n,e))):[]}function Z4(t,e){return{documents:[yC(t,e.path)]}}function eD(t,e){const n={structuredQuery:{}},r=e.path;let i;e.collectionGroup!==null?(i=r,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=yC(t,i);const s=function(c){if(c.length!==0)return wC(Yn.create(c,"and"))}(e.filters);s&&(n.structuredQuery.where=s);const o=function(c){if(c.length!==0)return c.map(h=>function(p){return{field:mo(p.field),direction:rD(p.dir)}}(h))}(e.orderBy);o&&(n.structuredQuery.orderBy=o);const a=cm(t,e.limit);return a!==null&&(n.structuredQuery.limit=a),e.startAt&&(n.structuredQuery.startAt=function(c){return{before:c.inclusive,values:c.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(c){return{before:!c.inclusive,values:c.position}}(e.endAt)),{_t:n,parent:i}}function tD(t){let e=Q4(t.parent);const n=t.structuredQuery,r=n.from?n.from.length:0;let i=null;if(r>0){De(r===1);const h=n.from[0];h.allDescendants?i=h.collectionId:e=e.child(h.collectionId)}let s=[];n.where&&(s=function(f){const p=_C(f);return p instanceof Yn&&qT(p)?p.getFilters():[p]}(n.where));let o=[];n.orderBy&&(o=function(f){return f.map(p=>function(E){return new ou(go(E.field),function(R){switch(R){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(E.direction))}(p))}(n.orderBy));let a=null;n.limit&&(a=function(f){let p;return p=typeof f=="object"?f.value:f,hd(p)?null:p}(n.limit));let l=null;n.startAt&&(l=function(f){const p=!!f.before,w=f.values||[];return new kh(w,p)}(n.startAt));let c=null;return n.endAt&&(c=function(f){const p=!f.before,w=f.values||[];return new kh(w,p)}(n.endAt)),w4(e,i,o,s,a,"F",l,c)}function nD(t,e){const n=function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return le()}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function _C(t){return t.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const r=go(n.unaryFilter.field);return ct.create(r,"==",{doubleValue:NaN});case"IS_NULL":const i=go(n.unaryFilter.field);return ct.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const s=go(n.unaryFilter.field);return ct.create(s,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const o=go(n.unaryFilter.field);return ct.create(o,"!=",{nullValue:"NULL_VALUE"});default:return le()}}(t):t.fieldFilter!==void 0?function(n){return ct.create(go(n.fieldFilter.field),function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return le()}}(n.fieldFilter.op),n.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(n){return Yn.create(n.compositeFilter.filters.map(r=>_C(r)),function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return le()}}(n.compositeFilter.op))}(t):le()}function rD(t){return H4[t]}function iD(t){return W4[t]}function sD(t){return q4[t]}function mo(t){return{fieldPath:t.canonicalString()}}function go(t){return kt.fromServerFormat(t.fieldPath)}function wC(t){return t instanceof ct?function(n){if(n.op==="=="){if(W0(n.value))return{unaryFilter:{field:mo(n.field),op:"IS_NAN"}};if(H0(n.value))return{unaryFilter:{field:mo(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(W0(n.value))return{unaryFilter:{field:mo(n.field),op:"IS_NOT_NAN"}};if(H0(n.value))return{unaryFilter:{field:mo(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:mo(n.field),op:iD(n.op),value:n.value}}}(t):t instanceof Yn?function(n){const r=n.getFilters().map(i=>wC(i));return r.length===1?r[0]:{compositeFilter:{op:sD(n.op),filters:r}}}(t):le()}function oD(t){const e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function EC(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ei{constructor(e,n,r,i,s=ue.min(),o=ue.min(),a=Bt.EMPTY_BYTE_STRING,l=null){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=s,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=a,this.expectedCount=l}withSequenceNumber(e){return new Ei(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new Ei(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Ei(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Ei(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aD{constructor(e){this.ct=e}}function lD(t){const e=tD({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?um(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uD{constructor(){this._n=new cD}addToCollectionParentIndex(e,n){return this._n.add(n),B.resolve()}getCollectionParents(e,n){return B.resolve(this._n.getEntries(n))}addFieldIndex(e,n){return B.resolve()}deleteFieldIndex(e,n){return B.resolve()}deleteAllFieldIndexes(e){return B.resolve()}createTargetIndexes(e,n){return B.resolve()}getDocumentsMatchingTarget(e,n){return B.resolve(null)}getIndexType(e,n){return B.resolve(0)}getFieldIndexes(e,n){return B.resolve([])}getNextCollectionGroupToUpdate(e){return B.resolve(null)}getMinOffset(e,n){return B.resolve(zi.min())}getMinOffsetFromCollectionGroup(e,n){return B.resolve(zi.min())}updateCollectionGroup(e,n,r){return B.resolve()}updateIndexEntries(e,n){return B.resolve()}}class cD{constructor(){this.index={}}add(e){const n=e.lastSegment(),r=e.popLast(),i=this.index[n]||new Rt(Fe.comparator),s=!i.has(r);return this.index[n]=i.add(r),s}has(e){const n=e.lastSegment(),r=e.popLast(),i=this.index[n];return i&&i.has(r)}getEntries(e){return(this.index[e]||new Rt(Fe.comparator)).toArray()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sa{constructor(e){this.On=e}next(){return this.On+=2,this.On}static Nn(){return new sa(0)}static Ln(){return new sa(-1)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hD{constructor(){this.changes=new ba(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,jt.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const r=this.changes.get(n);return r!==void 0?B.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dD{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fD{constructor(e,n,r,i){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next(i=>(r=i,this.remoteDocumentCache.getEntry(e,n))).next(i=>(r!==null&&Nl(r.mutation,i,Wn.empty(),mt.now()),i))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.getLocalViewOfDocuments(e,r,we()).next(()=>r))}getLocalViewOfDocuments(e,n,r=we()){const i=Es();return this.populateOverlays(e,i,n).next(()=>this.computeViews(e,n,i,r).next(s=>{let o=pl();return s.forEach((a,l)=>{o=o.insert(a,l.overlayedDocument)}),o}))}getOverlayedDocuments(e,n){const r=Es();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,we()))}populateOverlays(e,n,r){const i=[];return r.forEach(s=>{n.has(s)||i.push(s)}),this.documentOverlayCache.getOverlays(e,i).next(s=>{s.forEach((o,a)=>{n.set(o,a)})})}computeViews(e,n,r,i){let s=Wr();const o=Ol(),a=function(){return Ol()}();return n.forEach((l,c)=>{const h=r.get(c.key);i.has(c.key)&&(h===void 0||h.mutation instanceof Ws)?s=s.insert(c.key,c):h!==void 0?(o.set(c.key,h.mutation.getFieldMask()),Nl(h.mutation,c,h.mutation.getFieldMask(),mt.now())):o.set(c.key,Wn.empty())}),this.recalculateAndSaveOverlays(e,s).next(l=>(l.forEach((c,h)=>o.set(c,h)),n.forEach((c,h)=>{var f;return a.set(c,new dD(h,(f=o.get(c))!==null&&f!==void 0?f:null))}),a))}recalculateAndSaveOverlays(e,n){const r=Ol();let i=new Ye((o,a)=>o-a),s=we();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(o=>{for(const a of o)a.keys().forEach(l=>{const c=n.get(l);if(c===null)return;let h=r.get(l)||Wn.empty();h=a.applyToLocalView(c,h),r.set(l,h);const f=(i.get(a.batchId)||we()).add(l);i=i.insert(a.batchId,f)})}).next(()=>{const o=[],a=i.getReverseIterator();for(;a.hasNext();){const l=a.getNext(),c=l.key,h=l.value,f=nC();h.forEach(p=>{if(!s.has(p)){const w=uC(n.get(p),r.get(p));w!==null&&f.set(p,w),s=s.add(p)}}),o.push(this.documentOverlayCache.saveOverlays(e,c,f))}return B.waitFor(o)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,n,r,i){return function(o){return ne.isDocumentKey(o.path)&&o.collectionGroup===null&&o.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):YT(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r,i):this.getDocumentsMatchingCollectionQuery(e,n,r,i)}getNextDocuments(e,n,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,i).next(s=>{const o=i-s.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,i-s.size):B.resolve(Es());let a=-1,l=s;return o.next(c=>B.forEach(c,(h,f)=>(a<f.largestBatchId&&(a=f.largestBatchId),s.get(h)?B.resolve():this.remoteDocumentCache.getEntry(e,h).next(p=>{l=l.insert(h,p)}))).next(()=>this.populateOverlays(e,c,s)).next(()=>this.computeViews(e,l,c,we())).next(h=>({batchId:a,changes:tC(h)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new ne(n)).next(r=>{let i=pl();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,n,r,i){const s=n.collectionGroup;let o=pl();return this.indexManager.getCollectionParents(e,s).next(a=>B.forEach(a,l=>{const c=function(f,p){return new Ea(p,null,f.explicitOrderBy.slice(),f.filters.slice(),f.limit,f.limitType,f.startAt,f.endAt)}(n,l.child(s));return this.getDocumentsMatchingCollectionQuery(e,c,r,i).next(h=>{h.forEach((f,p)=>{o=o.insert(f,p)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(e,n,r,i){let s;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next(o=>(s=o,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,s,i))).next(o=>{s.forEach((l,c)=>{const h=c.getKey();o.get(h)===null&&(o=o.insert(h,jt.newInvalidDocument(h)))});let a=pl();return o.forEach((l,c)=>{const h=s.get(l);h!==void 0&&Nl(h.mutation,c,Wn.empty(),mt.now()),fd(n,c)&&(a=a.insert(l,c))}),a})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pD{constructor(e){this.serializer=e,this.cr=new Map,this.lr=new Map}getBundleMetadata(e,n){return B.resolve(this.cr.get(n))}saveBundleMetadata(e,n){return this.cr.set(n.id,function(i){return{id:i.id,version:i.version,createTime:hr(i.createTime)}}(n)),B.resolve()}getNamedQuery(e,n){return B.resolve(this.lr.get(n))}saveNamedQuery(e,n){return this.lr.set(n.name,function(i){return{name:i.name,query:lD(i.bundledQuery),readTime:hr(i.readTime)}}(n)),B.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mD{constructor(){this.overlays=new Ye(ne.comparator),this.hr=new Map}getOverlay(e,n){return B.resolve(this.overlays.get(n))}getOverlays(e,n){const r=Es();return B.forEach(n,i=>this.getOverlay(e,i).next(s=>{s!==null&&r.set(i,s)})).next(()=>r)}saveOverlays(e,n,r){return r.forEach((i,s)=>{this.ht(e,n,s)}),B.resolve()}removeOverlaysForBatchId(e,n,r){const i=this.hr.get(r);return i!==void 0&&(i.forEach(s=>this.overlays=this.overlays.remove(s)),this.hr.delete(r)),B.resolve()}getOverlaysForCollection(e,n,r){const i=Es(),s=n.length+1,o=new ne(n.child("")),a=this.overlays.getIteratorFrom(o);for(;a.hasNext();){const l=a.getNext().value,c=l.getKey();if(!n.isPrefixOf(c.path))break;c.path.length===s&&l.largestBatchId>r&&i.set(l.getKey(),l)}return B.resolve(i)}getOverlaysForCollectionGroup(e,n,r,i){let s=new Ye((c,h)=>c-h);const o=this.overlays.getIterator();for(;o.hasNext();){const c=o.getNext().value;if(c.getKey().getCollectionGroup()===n&&c.largestBatchId>r){let h=s.get(c.largestBatchId);h===null&&(h=Es(),s=s.insert(c.largestBatchId,h)),h.set(c.getKey(),c)}}const a=Es(),l=s.getIterator();for(;l.hasNext()&&(l.getNext().value.forEach((c,h)=>a.set(c,h)),!(a.size()>=i)););return B.resolve(a)}ht(e,n,r){const i=this.overlays.get(r.key);if(i!==null){const o=this.hr.get(i.largestBatchId).delete(r.key);this.hr.set(i.largestBatchId,o)}this.overlays=this.overlays.insert(r.key,new U4(n,r));let s=this.hr.get(n);s===void 0&&(s=we(),this.hr.set(n,s)),this.hr.set(n,s.add(r.key))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yg{constructor(){this.Pr=new Rt(gt.Ir),this.Tr=new Rt(gt.Er)}isEmpty(){return this.Pr.isEmpty()}addReference(e,n){const r=new gt(e,n);this.Pr=this.Pr.add(r),this.Tr=this.Tr.add(r)}dr(e,n){e.forEach(r=>this.addReference(r,n))}removeReference(e,n){this.Ar(new gt(e,n))}Rr(e,n){e.forEach(r=>this.removeReference(r,n))}Vr(e){const n=new ne(new Fe([])),r=new gt(n,e),i=new gt(n,e+1),s=[];return this.Tr.forEachInRange([r,i],o=>{this.Ar(o),s.push(o.key)}),s}mr(){this.Pr.forEach(e=>this.Ar(e))}Ar(e){this.Pr=this.Pr.delete(e),this.Tr=this.Tr.delete(e)}gr(e){const n=new ne(new Fe([])),r=new gt(n,e),i=new gt(n,e+1);let s=we();return this.Tr.forEachInRange([r,i],o=>{s=s.add(o.key)}),s}containsKey(e){const n=new gt(e,0),r=this.Pr.firstAfterOrEqual(n);return r!==null&&e.isEqual(r.key)}}class gt{constructor(e,n){this.key=e,this.pr=n}static Ir(e,n){return ne.comparator(e.key,n.key)||Ae(e.pr,n.pr)}static Er(e,n){return Ae(e.pr,n.pr)||ne.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gD{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.yr=1,this.wr=new Rt(gt.Ir)}checkEmpty(e){return B.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,r,i){const s=this.yr;this.yr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const o=new V4(s,n,r,i);this.mutationQueue.push(o);for(const a of i)this.wr=this.wr.add(new gt(a.key,s)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return B.resolve(o)}lookupMutationBatch(e,n){return B.resolve(this.Sr(n))}getNextMutationBatchAfterBatchId(e,n){const r=n+1,i=this.br(r),s=i<0?0:i;return B.resolve(this.mutationQueue.length>s?this.mutationQueue[s]:null)}getHighestUnacknowledgedBatchId(){return B.resolve(this.mutationQueue.length===0?-1:this.yr-1)}getAllMutationBatches(e){return B.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const r=new gt(n,0),i=new gt(n,Number.POSITIVE_INFINITY),s=[];return this.wr.forEachInRange([r,i],o=>{const a=this.Sr(o.pr);s.push(a)}),B.resolve(s)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new Rt(Ae);return n.forEach(i=>{const s=new gt(i,0),o=new gt(i,Number.POSITIVE_INFINITY);this.wr.forEachInRange([s,o],a=>{r=r.add(a.pr)})}),B.resolve(this.Dr(r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,i=r.length+1;let s=r;ne.isDocumentKey(s)||(s=s.child(""));const o=new gt(new ne(s),0);let a=new Rt(Ae);return this.wr.forEachWhile(l=>{const c=l.key.path;return!!r.isPrefixOf(c)&&(c.length===i&&(a=a.add(l.pr)),!0)},o),B.resolve(this.Dr(a))}Dr(e){const n=[];return e.forEach(r=>{const i=this.Sr(r);i!==null&&n.push(i)}),n}removeMutationBatch(e,n){De(this.Cr(n.batchId,"removed")===0),this.mutationQueue.shift();let r=this.wr;return B.forEach(n.mutations,i=>{const s=new gt(i.key,n.batchId);return r=r.delete(s),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.wr=r})}Mn(e){}containsKey(e,n){const r=new gt(n,0),i=this.wr.firstAfterOrEqual(r);return B.resolve(n.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,B.resolve()}Cr(e,n){return this.br(e)}br(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Sr(e){const n=this.br(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yD{constructor(e){this.vr=e,this.docs=function(){return new Ye(ne.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const r=n.key,i=this.docs.get(r),s=i?i.size:0,o=this.vr(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:o}),this.size+=o-s,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const r=this.docs.get(n);return B.resolve(r?r.document.mutableCopy():jt.newInvalidDocument(n))}getEntries(e,n){let r=Wr();return n.forEach(i=>{const s=this.docs.get(i);r=r.insert(i,s?s.document.mutableCopy():jt.newInvalidDocument(i))}),B.resolve(r)}getDocumentsMatchingQuery(e,n,r,i){let s=Wr();const o=n.path,a=new ne(o.child("")),l=this.docs.getIteratorFrom(a);for(;l.hasNext();){const{key:c,value:{document:h}}=l.getNext();if(!o.isPrefixOf(c.path))break;c.path.length>o.length+1||n4(t4(h),r)<=0||(i.has(h.key)||fd(n,h))&&(s=s.insert(h.key,h.mutableCopy()))}return B.resolve(s)}getAllFromCollectionGroup(e,n,r,i){le()}Fr(e,n){return B.forEach(this.docs,r=>n(r))}newChangeBuffer(e){return new vD(this)}getSize(e){return B.resolve(this.size)}}class vD extends hD{constructor(e){super(),this.ar=e}applyChanges(e){const n=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?n.push(this.ar.addEntry(e,i)):this.ar.removeEntry(r)}),B.waitFor(n)}getFromCache(e,n){return this.ar.getEntry(e,n)}getAllFromCache(e,n){return this.ar.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _D{constructor(e){this.persistence=e,this.Mr=new ba(n=>qg(n),Gg),this.lastRemoteSnapshotVersion=ue.min(),this.highestTargetId=0,this.Or=0,this.Nr=new Yg,this.targetCount=0,this.Lr=sa.Nn()}forEachTarget(e,n){return this.Mr.forEach((r,i)=>n(i)),B.resolve()}getLastRemoteSnapshotVersion(e){return B.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return B.resolve(this.Or)}allocateTargetId(e){return this.highestTargetId=this.Lr.next(),B.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.Or&&(this.Or=n),B.resolve()}qn(e){this.Mr.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.Lr=new sa(n),this.highestTargetId=n),e.sequenceNumber>this.Or&&(this.Or=e.sequenceNumber)}addTargetData(e,n){return this.qn(n),this.targetCount+=1,B.resolve()}updateTargetData(e,n){return this.qn(n),B.resolve()}removeTargetData(e,n){return this.Mr.delete(n.target),this.Nr.Vr(n.targetId),this.targetCount-=1,B.resolve()}removeTargets(e,n,r){let i=0;const s=[];return this.Mr.forEach((o,a)=>{a.sequenceNumber<=n&&r.get(a.targetId)===null&&(this.Mr.delete(o),s.push(this.removeMatchingKeysForTargetId(e,a.targetId)),i++)}),B.waitFor(s).next(()=>i)}getTargetCount(e){return B.resolve(this.targetCount)}getTargetData(e,n){const r=this.Mr.get(n)||null;return B.resolve(r)}addMatchingKeys(e,n,r){return this.Nr.dr(n,r),B.resolve()}removeMatchingKeys(e,n,r){this.Nr.Rr(n,r);const i=this.persistence.referenceDelegate,s=[];return i&&n.forEach(o=>{s.push(i.markPotentiallyOrphaned(e,o))}),B.waitFor(s)}removeMatchingKeysForTargetId(e,n){return this.Nr.Vr(n),B.resolve()}getMatchingKeysForTargetId(e,n){const r=this.Nr.gr(n);return B.resolve(r)}containsKey(e,n){return B.resolve(this.Nr.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wD{constructor(e,n){this.Br={},this.overlays={},this.kr=new zg(0),this.qr=!1,this.qr=!0,this.referenceDelegate=e(this),this.Qr=new _D(this),this.indexManager=new uD,this.remoteDocumentCache=function(i){return new yD(i)}(r=>this.referenceDelegate.Kr(r)),this.serializer=new aD(n),this.$r=new pD(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.qr=!1,Promise.resolve()}get started(){return this.qr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new mD,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this.Br[e.toKey()];return r||(r=new gD(n,this.referenceDelegate),this.Br[e.toKey()]=r),r}getTargetCache(){return this.Qr}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.$r}runTransaction(e,n,r){J("MemoryPersistence","Starting transaction:",e);const i=new ED(this.kr.next());return this.referenceDelegate.Ur(),r(i).next(s=>this.referenceDelegate.Wr(i).next(()=>s)).toPromise().then(s=>(i.raiseOnCommittedEvent(),s))}Gr(e,n){return B.or(Object.values(this.Br).map(r=>()=>r.containsKey(e,n)))}}class ED extends i4{constructor(e){super(),this.currentSequenceNumber=e}}class Jg{constructor(e){this.persistence=e,this.zr=new Yg,this.jr=null}static Hr(e){return new Jg(e)}get Jr(){if(this.jr)return this.jr;throw le()}addReference(e,n,r){return this.zr.addReference(r,n),this.Jr.delete(r.toString()),B.resolve()}removeReference(e,n,r){return this.zr.removeReference(r,n),this.Jr.add(r.toString()),B.resolve()}markPotentiallyOrphaned(e,n){return this.Jr.add(n.toString()),B.resolve()}removeTarget(e,n){this.zr.Vr(n.targetId).forEach(i=>this.Jr.add(i.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next(i=>{i.forEach(s=>this.Jr.add(s.toString()))}).next(()=>r.removeTargetData(e,n))}Ur(){this.jr=new Set}Wr(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return B.forEach(this.Jr,r=>{const i=ne.fromPath(r);return this.Yr(e,i).next(s=>{s||n.removeEntry(i,ue.min())})}).next(()=>(this.jr=null,n.apply(e)))}updateLimboDocument(e,n){return this.Yr(e,n).next(r=>{r?this.Jr.delete(n.toString()):this.Jr.add(n.toString())})}Kr(e){return 0}Yr(e,n){return B.or([()=>B.resolve(this.zr.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Gr(e,n)])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zg{constructor(e,n,r,i){this.targetId=e,this.fromCache=n,this.qi=r,this.Qi=i}static Ki(e,n){let r=we(),i=we();for(const s of n.docChanges)switch(s.type){case 0:r=r.add(s.doc.key);break;case 1:i=i.add(s.doc.key)}return new Zg(e,n.fromCache,r,i)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bD{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TD{constructor(){this.$i=!1,this.Ui=!1,this.Wi=100,this.Gi=function(){return fR()?8:s4(Nt())>0?6:4}()}initialize(e,n){this.zi=e,this.indexManager=n,this.$i=!0}getDocumentsMatchingQuery(e,n,r,i){const s={result:null};return this.ji(e,n).next(o=>{s.result=o}).next(()=>{if(!s.result)return this.Hi(e,n,i,r).next(o=>{s.result=o})}).next(()=>{if(s.result)return;const o=new bD;return this.Ji(e,n,o).next(a=>{if(s.result=a,this.Ui)return this.Yi(e,n,o,a.size)})}).next(()=>s.result)}Yi(e,n,r,i){return r.documentReadCount<this.Wi?(nl()<=Ee.DEBUG&&J("QueryEngine","SDK will not create cache indexes for query:",po(n),"since it only creates cache indexes for collection contains","more than or equal to",this.Wi,"documents"),B.resolve()):(nl()<=Ee.DEBUG&&J("QueryEngine","Query:",po(n),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.Gi*i?(nl()<=Ee.DEBUG&&J("QueryEngine","The SDK decides to create cache indexes for query:",po(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,cr(n))):B.resolve())}ji(e,n){if(Q0(n))return B.resolve(null);let r=cr(n);return this.indexManager.getIndexType(e,r).next(i=>i===0?null:(n.limit!==null&&i===1&&(n=um(n,null,"F"),r=cr(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next(s=>{const o=we(...s);return this.zi.getDocuments(e,o).next(a=>this.indexManager.getMinOffset(e,r).next(l=>{const c=this.Zi(n,a);return this.Xi(n,c,o,l.readTime)?this.ji(e,um(n,null,"F")):this.es(e,c,n,l)}))})))}Hi(e,n,r,i){return Q0(n)||i.isEqual(ue.min())?B.resolve(null):this.zi.getDocuments(e,r).next(s=>{const o=this.Zi(n,s);return this.Xi(n,o,r,i)?B.resolve(null):(nl()<=Ee.DEBUG&&J("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),po(n)),this.es(e,o,n,e4(i,-1)).next(a=>a))})}Zi(e,n){let r=new Rt(ZT(e));return n.forEach((i,s)=>{fd(e,s)&&(r=r.add(s))}),r}Xi(e,n,r,i){if(e.limit===null)return!1;if(r.size!==n.size)return!0;const s=e.limitType==="F"?n.last():n.first();return!!s&&(s.hasPendingWrites||s.version.compareTo(i)>0)}Ji(e,n,r){return nl()<=Ee.DEBUG&&J("QueryEngine","Using full collection scan to execute query:",po(n)),this.zi.getDocumentsMatchingQuery(e,n,zi.min(),r)}es(e,n,r,i){return this.zi.getDocumentsMatchingQuery(e,r,i).next(s=>(n.forEach(o=>{s=s.insert(o.key,o)}),s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CD{constructor(e,n,r,i){this.persistence=e,this.ts=n,this.serializer=i,this.ns=new Ye(Ae),this.rs=new ba(s=>qg(s),Gg),this.ss=new Map,this.os=e.getRemoteDocumentCache(),this.Qr=e.getTargetCache(),this.$r=e.getBundleCache(),this._s(r)}_s(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new fD(this.os,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.os.setIndexManager(this.indexManager),this.ts.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.ns))}}function ID(t,e,n,r){return new CD(t,e,n,r)}async function bC(t,e){const n=ce(t);return await n.persistence.runTransaction("Handle user change","readonly",r=>{let i;return n.mutationQueue.getAllMutationBatches(r).next(s=>(i=s,n._s(e),n.mutationQueue.getAllMutationBatches(r))).next(s=>{const o=[],a=[];let l=we();for(const c of i){o.push(c.batchId);for(const h of c.mutations)l=l.add(h.key)}for(const c of s){a.push(c.batchId);for(const h of c.mutations)l=l.add(h.key)}return n.localDocuments.getDocuments(r,l).next(c=>({us:c,removedBatchIds:o,addedBatchIds:a}))})})}function SD(t,e){const n=ce(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const i=e.batch.keys(),s=n.os.newChangeBuffer({trackRemovals:!0});return function(a,l,c,h){const f=c.batch,p=f.keys();let w=B.resolve();return p.forEach(E=>{w=w.next(()=>h.getEntry(l,E)).next(S=>{const R=c.docVersions.get(E);De(R!==null),S.version.compareTo(R)<0&&(f.applyToRemoteDocument(S,c),S.isValidDocument()&&(S.setReadTime(c.commitVersion),h.addEntry(S)))})}),w.next(()=>a.mutationQueue.removeMutationBatch(l,f))}(n,r,e,s).next(()=>s.apply(r)).next(()=>n.mutationQueue.performConsistencyCheck(r)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(a){let l=we();for(let c=0;c<a.mutationResults.length;++c)a.mutationResults[c].transformResults.length>0&&(l=l.add(a.batch.mutations[c].key));return l}(e))).next(()=>n.localDocuments.getDocuments(r,i))})}function TC(t){const e=ce(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.Qr.getLastRemoteSnapshotVersion(n))}function AD(t,e){const n=ce(t),r=e.snapshotVersion;let i=n.ns;return n.persistence.runTransaction("Apply remote event","readwrite-primary",s=>{const o=n.os.newChangeBuffer({trackRemovals:!0});i=n.ns;const a=[];e.targetChanges.forEach((h,f)=>{const p=i.get(f);if(!p)return;a.push(n.Qr.removeMatchingKeys(s,h.removedDocuments,f).next(()=>n.Qr.addMatchingKeys(s,h.addedDocuments,f)));let w=p.withSequenceNumber(s.currentSequenceNumber);e.targetMismatches.get(f)!==null?w=w.withResumeToken(Bt.EMPTY_BYTE_STRING,ue.min()).withLastLimboFreeSnapshotVersion(ue.min()):h.resumeToken.approximateByteSize()>0&&(w=w.withResumeToken(h.resumeToken,r)),i=i.insert(f,w),function(S,R,T){return S.resumeToken.approximateByteSize()===0||R.snapshotVersion.toMicroseconds()-S.snapshotVersion.toMicroseconds()>=3e8?!0:T.addedDocuments.size+T.modifiedDocuments.size+T.removedDocuments.size>0}(p,w,h)&&a.push(n.Qr.updateTargetData(s,w))});let l=Wr(),c=we();if(e.documentUpdates.forEach(h=>{e.resolvedLimboDocuments.has(h)&&a.push(n.persistence.referenceDelegate.updateLimboDocument(s,h))}),a.push(xD(s,o,e.documentUpdates).next(h=>{l=h.cs,c=h.ls})),!r.isEqual(ue.min())){const h=n.Qr.getLastRemoteSnapshotVersion(s).next(f=>n.Qr.setTargetsMetadata(s,s.currentSequenceNumber,r));a.push(h)}return B.waitFor(a).next(()=>o.apply(s)).next(()=>n.localDocuments.getLocalViewOfDocuments(s,l,c)).next(()=>l)}).then(s=>(n.ns=i,s))}function xD(t,e,n){let r=we(),i=we();return n.forEach(s=>r=r.add(s)),e.getEntries(t,r).next(s=>{let o=Wr();return n.forEach((a,l)=>{const c=s.get(a);l.isFoundDocument()!==c.isFoundDocument()&&(i=i.add(a)),l.isNoDocument()&&l.version.isEqual(ue.min())?(e.removeEntry(a,l.readTime),o=o.insert(a,l)):!c.isValidDocument()||l.version.compareTo(c.version)>0||l.version.compareTo(c.version)===0&&c.hasPendingWrites?(e.addEntry(l),o=o.insert(a,l)):J("LocalStore","Ignoring outdated watch update for ",a,". Current version:",c.version," Watch version:",l.version)}),{cs:o,ls:i}})}function kD(t,e){const n=ce(t);return n.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function PD(t,e){const n=ce(t);return n.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return n.Qr.getTargetData(r,e).next(s=>s?(i=s,B.resolve(i)):n.Qr.allocateTargetId(r).next(o=>(i=new Ei(e,o,"TargetPurposeListen",r.currentSequenceNumber),n.Qr.addTargetData(r,i).next(()=>i))))}).then(r=>{const i=n.ns.get(r.targetId);return(i===null||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(n.ns=n.ns.insert(r.targetId,r),n.rs.set(e,r.targetId)),r})}async function pm(t,e,n){const r=ce(t),i=r.ns.get(e),s=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",s,o=>r.persistence.referenceDelegate.removeTarget(o,i))}catch(o){if(!Cu(o))throw o;J("LocalStore",`Failed to update sequence numbers for target ${e}: ${o}`)}r.ns=r.ns.remove(e),r.rs.delete(i.target)}function ow(t,e,n){const r=ce(t);let i=ue.min(),s=we();return r.persistence.runTransaction("Execute query","readwrite",o=>function(l,c,h){const f=ce(l),p=f.rs.get(h);return p!==void 0?B.resolve(f.ns.get(p)):f.Qr.getTargetData(c,h)}(r,o,cr(e)).next(a=>{if(a)return i=a.lastLimboFreeSnapshotVersion,r.Qr.getMatchingKeysForTargetId(o,a.targetId).next(l=>{s=l})}).next(()=>r.ts.getDocumentsMatchingQuery(o,e,n?i:ue.min(),n?s:we())).next(a=>(RD(r,b4(e),a),{documents:a,hs:s})))}function RD(t,e,n){let r=t.ss.get(e)||ue.min();n.forEach((i,s)=>{s.readTime.compareTo(r)>0&&(r=s.readTime)}),t.ss.set(e,r)}class aw{constructor(){this.activeTargetIds=x4()}As(e){this.activeTargetIds=this.activeTargetIds.add(e)}Rs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}ds(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class OD{constructor(){this.no=new aw,this.ro={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e){return this.no.As(e),this.ro[e]||"not-current"}updateQueryState(e,n,r){this.ro[e]=n}removeLocalQueryTarget(e){this.no.Rs(e)}isLocalQueryTarget(e){return this.no.activeTargetIds.has(e)}clearQueryState(e){delete this.ro[e]}getAllActiveQueryTargets(){return this.no.activeTargetIds}isActiveQueryTarget(e){return this.no.activeTargetIds.has(e)}start(){return this.no=new aw,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ND{io(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lw{constructor(){this.so=()=>this.oo(),this._o=()=>this.ao(),this.uo=[],this.co()}io(e){this.uo.push(e)}shutdown(){window.removeEventListener("online",this.so),window.removeEventListener("offline",this._o)}co(){window.addEventListener("online",this.so),window.addEventListener("offline",this._o)}oo(){J("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.uo)e(0)}ao(){J("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.uo)e(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let yc=null;function Uf(){return yc===null?yc=function(){return 268435456+Math.round(2147483648*Math.random())}():yc++,"0x"+yc.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const LD={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DD{constructor(e){this.lo=e.lo,this.ho=e.ho}Po(e){this.Io=e}To(e){this.Eo=e}Ao(e){this.Ro=e}onMessage(e){this.Vo=e}close(){this.ho()}send(e){this.lo(e)}mo(){this.Io()}fo(){this.Eo()}po(e){this.Ro(e)}yo(e){this.Vo(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ut="WebChannelConnection";class MD extends class{constructor(n){this.databaseInfo=n,this.databaseId=n.databaseId;const r=n.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),s=encodeURIComponent(this.databaseId.database);this.wo=r+"://"+n.host,this.So=`projects/${i}/databases/${s}`,this.bo=this.databaseId.database==="(default)"?`project_id=${i}`:`project_id=${i}&database_id=${s}`}get Do(){return!1}Co(n,r,i,s,o){const a=Uf(),l=this.vo(n,r.toUriEncodedString());J("RestConnection",`Sending RPC '${n}' ${a}:`,l,i);const c={"google-cloud-resource-prefix":this.So,"x-goog-request-params":this.bo};return this.Fo(c,s,o),this.Mo(n,l,c,i).then(h=>(J("RestConnection",`Received RPC '${n}' ${a}: `,h),h),h=>{throw ta("RestConnection",`RPC '${n}' ${a} failed with error: `,h,"url: ",l,"request:",i),h})}xo(n,r,i,s,o,a){return this.Co(n,r,i,s,o)}Fo(n,r,i){n["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+_a}(),n["Content-Type"]="text/plain",this.databaseInfo.appId&&(n["X-Firebase-GMPID"]=this.databaseInfo.appId),r&&r.headers.forEach((s,o)=>n[o]=s),i&&i.headers.forEach((s,o)=>n[o]=s)}vo(n,r){const i=LD[n];return`${this.wo}/v1/${r}:${i}`}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Mo(e,n,r,i){const s=Uf();return new Promise((o,a)=>{const l=new NT;l.setWithCredentials(!0),l.listenOnce(DT.COMPLETE,()=>{try{switch(l.getLastErrorCode()){case Fc.NO_ERROR:const h=l.getResponseJson();J(Ut,`XHR for RPC '${e}' ${s} received:`,JSON.stringify(h)),o(h);break;case Fc.TIMEOUT:J(Ut,`RPC '${e}' ${s} timed out`),a(new Y(j.DEADLINE_EXCEEDED,"Request time out"));break;case Fc.HTTP_ERROR:const f=l.getStatus();if(J(Ut,`RPC '${e}' ${s} failed with status:`,f,"response text:",l.getResponseText()),f>0){let p=l.getResponseJson();Array.isArray(p)&&(p=p[0]);const w=p==null?void 0:p.error;if(w&&w.status&&w.message){const E=function(R){const T=R.toLowerCase().replace(/_/g,"-");return Object.values(j).indexOf(T)>=0?T:j.UNKNOWN}(w.status);a(new Y(E,w.message))}else a(new Y(j.UNKNOWN,"Server responded with status "+l.getStatus()))}else a(new Y(j.UNAVAILABLE,"Connection failed."));break;default:le()}}finally{J(Ut,`RPC '${e}' ${s} completed.`)}});const c=JSON.stringify(i);J(Ut,`RPC '${e}' ${s} sending request:`,i),l.send(n,"POST",c,r,15)})}Oo(e,n,r){const i=Uf(),s=[this.wo,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=UT(),a=VT(),l={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},c=this.longPollingOptions.timeoutSeconds;c!==void 0&&(l.longPollingTimeout=Math.round(1e3*c)),this.useFetchStreams&&(l.xmlHttpFactory=new LT({})),this.Fo(l.initMessageHeaders,n,r),l.encodeInitMessageHeaders=!0;const h=s.join("");J(Ut,`Creating RPC '${e}' stream ${i}: ${h}`,l);const f=o.createWebChannel(h,l);let p=!1,w=!1;const E=new DD({lo:R=>{w?J(Ut,`Not sending because RPC '${e}' stream ${i} is closed:`,R):(p||(J(Ut,`Opening RPC '${e}' stream ${i} transport.`),f.open(),p=!0),J(Ut,`RPC '${e}' stream ${i} sending:`,R),f.send(R))},ho:()=>f.close()}),S=(R,T,_)=>{R.listen(T,C=>{try{_(C)}catch(L){setTimeout(()=>{throw L},0)}})};return S(f,fl.EventType.OPEN,()=>{w||(J(Ut,`RPC '${e}' stream ${i} transport opened.`),E.mo())}),S(f,fl.EventType.CLOSE,()=>{w||(w=!0,J(Ut,`RPC '${e}' stream ${i} transport closed`),E.po())}),S(f,fl.EventType.ERROR,R=>{w||(w=!0,ta(Ut,`RPC '${e}' stream ${i} transport errored:`,R),E.po(new Y(j.UNAVAILABLE,"The operation could not be completed")))}),S(f,fl.EventType.MESSAGE,R=>{var T;if(!w){const _=R.data[0];De(!!_);const C=_,L=C.error||((T=C[0])===null||T===void 0?void 0:T.error);if(L){J(Ut,`RPC '${e}' stream ${i} received error:`,L);const F=L.status;let z=function(b){const I=ot[b];if(I!==void 0)return dC(I)}(F),g=L.message;z===void 0&&(z=j.INTERNAL,g="Unknown error status: "+F+" with message "+L.message),w=!0,E.po(new Y(z,g)),f.close()}else J(Ut,`RPC '${e}' stream ${i} received:`,_),E.yo(_)}}),S(a,MT.STAT_EVENT,R=>{R.stat===rm.PROXY?J(Ut,`RPC '${e}' stream ${i} detected buffering proxy`):R.stat===rm.NOPROXY&&J(Ut,`RPC '${e}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{E.fo()},0),E}}function $f(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yd(t){return new G4(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CC{constructor(e,n,r=1e3,i=1.5,s=6e4){this.oi=e,this.timerId=n,this.No=r,this.Lo=i,this.Bo=s,this.ko=0,this.qo=null,this.Qo=Date.now(),this.reset()}reset(){this.ko=0}Ko(){this.ko=this.Bo}$o(e){this.cancel();const n=Math.floor(this.ko+this.Uo()),r=Math.max(0,Date.now()-this.Qo),i=Math.max(0,n-r);i>0&&J("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.ko} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.qo=this.oi.enqueueAfterDelay(this.timerId,i,()=>(this.Qo=Date.now(),e())),this.ko*=this.Lo,this.ko<this.No&&(this.ko=this.No),this.ko>this.Bo&&(this.ko=this.Bo)}Wo(){this.qo!==null&&(this.qo.skipDelay(),this.qo=null)}cancel(){this.qo!==null&&(this.qo.cancel(),this.qo=null)}Uo(){return(Math.random()-.5)*this.ko}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IC{constructor(e,n,r,i,s,o,a,l){this.oi=e,this.Go=r,this.zo=i,this.connection=s,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=a,this.listener=l,this.state=0,this.jo=0,this.Ho=null,this.Jo=null,this.stream=null,this.Yo=new CC(e,n)}Zo(){return this.state===1||this.state===5||this.Xo()}Xo(){return this.state===2||this.state===3}start(){this.state!==4?this.auth():this.e_()}async stop(){this.Zo()&&await this.close(0)}t_(){this.state=0,this.Yo.reset()}n_(){this.Xo()&&this.Ho===null&&(this.Ho=this.oi.enqueueAfterDelay(this.Go,6e4,()=>this.r_()))}i_(e){this.s_(),this.stream.send(e)}async r_(){if(this.Xo())return this.close(0)}s_(){this.Ho&&(this.Ho.cancel(),this.Ho=null)}o_(){this.Jo&&(this.Jo.cancel(),this.Jo=null)}async close(e,n){this.s_(),this.o_(),this.Yo.cancel(),this.jo++,e!==4?this.Yo.reset():n&&n.code===j.RESOURCE_EXHAUSTED?(Hr(n.toString()),Hr("Using maximum backoff delay to prevent overloading the backend."),this.Yo.Ko()):n&&n.code===j.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.__(),this.stream.close(),this.stream=null),this.state=e,await this.listener.Ao(n)}__(){}auth(){this.state=1;const e=this.a_(this.jo),n=this.jo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.jo===n&&this.u_(r,i)},r=>{e(()=>{const i=new Y(j.UNKNOWN,"Fetching auth token failed: "+r.message);return this.c_(i)})})}u_(e,n){const r=this.a_(this.jo);this.stream=this.l_(e,n),this.stream.Po(()=>{r(()=>this.listener.Po())}),this.stream.To(()=>{r(()=>(this.state=2,this.Jo=this.oi.enqueueAfterDelay(this.zo,1e4,()=>(this.Xo()&&(this.state=3),Promise.resolve())),this.listener.To()))}),this.stream.Ao(i=>{r(()=>this.c_(i))}),this.stream.onMessage(i=>{r(()=>this.onMessage(i))})}e_(){this.state=5,this.Yo.$o(async()=>{this.state=0,this.start()})}c_(e){return J("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}a_(e){return n=>{this.oi.enqueueAndForget(()=>this.jo===e?n():(J("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class VD extends IC{constructor(e,n,r,i,s,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,i,o),this.serializer=s}l_(e,n){return this.connection.Oo("Listen",e,n)}onMessage(e){this.Yo.reset();const n=X4(this.serializer,e),r=function(s){if(!("targetChange"in s))return ue.min();const o=s.targetChange;return o.targetIds&&o.targetIds.length?ue.min():o.readTime?hr(o.readTime):ue.min()}(e);return this.listener.h_(n,r)}P_(e){const n={};n.database=fm(this.serializer),n.addTarget=function(s,o){let a;const l=o.target;if(a=am(l)?{documents:Z4(s,l)}:{query:eD(s,l)._t},a.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){a.resumeToken=mC(s,o.resumeToken);const c=cm(s,o.expectedCount);c!==null&&(a.expectedCount=c)}else if(o.snapshotVersion.compareTo(ue.min())>0){a.readTime=Oh(s,o.snapshotVersion.toTimestamp());const c=cm(s,o.expectedCount);c!==null&&(a.expectedCount=c)}return a}(this.serializer,e);const r=nD(this.serializer,e);r&&(n.labels=r),this.i_(n)}I_(e){const n={};n.database=fm(this.serializer),n.removeTarget=e,this.i_(n)}}class UD extends IC{constructor(e,n,r,i,s,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,i,o),this.serializer=s,this.T_=!1}get E_(){return this.T_}start(){this.T_=!1,this.lastStreamToken=void 0,super.start()}__(){this.T_&&this.d_([])}l_(e,n){return this.connection.Oo("Write",e,n)}onMessage(e){if(De(!!e.streamToken),this.lastStreamToken=e.streamToken,this.T_){this.Yo.reset();const n=J4(e.writeResults,e.commitTime),r=hr(e.commitTime);return this.listener.A_(r,n)}return De(!e.writeResults||e.writeResults.length===0),this.T_=!0,this.listener.R_()}V_(){const e={};e.database=fm(this.serializer),this.i_(e)}d_(e){const n={streamToken:this.lastStreamToken,writes:e.map(r=>Y4(this.serializer,r))};this.i_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $D extends class{}{constructor(e,n,r,i){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=i,this.m_=!1}f_(){if(this.m_)throw new Y(j.FAILED_PRECONDITION,"The client has already been terminated.")}Co(e,n,r,i){return this.f_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,o])=>this.connection.Co(e,hm(n,r),i,s,o)).catch(s=>{throw s.name==="FirebaseError"?(s.code===j.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new Y(j.UNKNOWN,s.toString())})}xo(e,n,r,i,s){return this.f_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,a])=>this.connection.xo(e,hm(n,r),i,o,a,s)).catch(o=>{throw o.name==="FirebaseError"?(o.code===j.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new Y(j.UNKNOWN,o.toString())})}terminate(){this.m_=!0,this.connection.terminate()}}class FD{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.g_=0,this.p_=null,this.y_=!0}w_(){this.g_===0&&(this.S_("Unknown"),this.p_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.p_=null,this.b_("Backend didn't respond within 10 seconds."),this.S_("Offline"),Promise.resolve())))}D_(e){this.state==="Online"?this.S_("Unknown"):(this.g_++,this.g_>=1&&(this.C_(),this.b_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.S_("Offline")))}set(e){this.C_(),this.g_=0,e==="Online"&&(this.y_=!1),this.S_(e)}S_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}b_(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.y_?(Hr(n),this.y_=!1):J("OnlineStateTracker",n)}C_(){this.p_!==null&&(this.p_.cancel(),this.p_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jD{constructor(e,n,r,i,s){this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.v_=[],this.F_=new Map,this.M_=new Set,this.x_=[],this.O_=s,this.O_.io(o=>{r.enqueueAndForget(async()=>{qs(this)&&(J("RemoteStore","Restarting streams for network reachability change."),await async function(l){const c=ce(l);c.M_.add(4),await Au(c),c.N_.set("Unknown"),c.M_.delete(4),await vd(c)}(this))})}),this.N_=new FD(r,i)}}async function vd(t){if(qs(t))for(const e of t.x_)await e(!0)}async function Au(t){for(const e of t.x_)await e(!1)}function SC(t,e){const n=ce(t);n.F_.has(e.targetId)||(n.F_.set(e.targetId,e),ry(n)?ny(n):Ta(n).Xo()&&ty(n,e))}function ey(t,e){const n=ce(t),r=Ta(n);n.F_.delete(e),r.Xo()&&AC(n,e),n.F_.size===0&&(r.Xo()?r.n_():qs(n)&&n.N_.set("Unknown"))}function ty(t,e){if(t.L_.xe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(ue.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}Ta(t).P_(e)}function AC(t,e){t.L_.xe(e),Ta(t).I_(e)}function ny(t){t.L_=new B4({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),ot:e=>t.F_.get(e)||null,tt:()=>t.datastore.serializer.databaseId}),Ta(t).start(),t.N_.w_()}function ry(t){return qs(t)&&!Ta(t).Zo()&&t.F_.size>0}function qs(t){return ce(t).M_.size===0}function xC(t){t.L_=void 0}async function zD(t){t.N_.set("Online")}async function BD(t){t.F_.forEach((e,n)=>{ty(t,e)})}async function HD(t,e){xC(t),ry(t)?(t.N_.D_(e),ny(t)):t.N_.set("Unknown")}async function WD(t,e,n){if(t.N_.set("Online"),e instanceof pC&&e.state===2&&e.cause)try{await async function(i,s){const o=s.cause;for(const a of s.targetIds)i.F_.has(a)&&(await i.remoteSyncer.rejectListen(a,o),i.F_.delete(a),i.L_.removeTarget(a))}(t,e)}catch(r){J("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),await Nh(t,r)}else if(e instanceof Bc?t.L_.Ke(e):e instanceof fC?t.L_.He(e):t.L_.We(e),!n.isEqual(ue.min()))try{const r=await TC(t.localStore);n.compareTo(r)>=0&&await function(s,o){const a=s.L_.rt(o);return a.targetChanges.forEach((l,c)=>{if(l.resumeToken.approximateByteSize()>0){const h=s.F_.get(c);h&&s.F_.set(c,h.withResumeToken(l.resumeToken,o))}}),a.targetMismatches.forEach((l,c)=>{const h=s.F_.get(l);if(!h)return;s.F_.set(l,h.withResumeToken(Bt.EMPTY_BYTE_STRING,h.snapshotVersion)),AC(s,l);const f=new Ei(h.target,l,c,h.sequenceNumber);ty(s,f)}),s.remoteSyncer.applyRemoteEvent(a)}(t,n)}catch(r){J("RemoteStore","Failed to raise snapshot:",r),await Nh(t,r)}}async function Nh(t,e,n){if(!Cu(e))throw e;t.M_.add(1),await Au(t),t.N_.set("Offline"),n||(n=()=>TC(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{J("RemoteStore","Retrying IndexedDB access"),await n(),t.M_.delete(1),await vd(t)})}function kC(t,e){return e().catch(n=>Nh(t,n,e))}async function _d(t){const e=ce(t),n=Hi(e);let r=e.v_.length>0?e.v_[e.v_.length-1].batchId:-1;for(;qD(e);)try{const i=await kD(e.localStore,r);if(i===null){e.v_.length===0&&n.n_();break}r=i.batchId,GD(e,i)}catch(i){await Nh(e,i)}PC(e)&&RC(e)}function qD(t){return qs(t)&&t.v_.length<10}function GD(t,e){t.v_.push(e);const n=Hi(t);n.Xo()&&n.E_&&n.d_(e.mutations)}function PC(t){return qs(t)&&!Hi(t).Zo()&&t.v_.length>0}function RC(t){Hi(t).start()}async function KD(t){Hi(t).V_()}async function QD(t){const e=Hi(t);for(const n of t.v_)e.d_(n.mutations)}async function XD(t,e,n){const r=t.v_.shift(),i=Kg.from(r,e,n);await kC(t,()=>t.remoteSyncer.applySuccessfulWrite(i)),await _d(t)}async function YD(t,e){e&&Hi(t).E_&&await async function(r,i){if(function(o){return F4(o)&&o!==j.ABORTED}(i.code)){const s=r.v_.shift();Hi(r).t_(),await kC(r,()=>r.remoteSyncer.rejectFailedWrite(s.batchId,i)),await _d(r)}}(t,e),PC(t)&&RC(t)}async function uw(t,e){const n=ce(t);n.asyncQueue.verifyOperationInProgress(),J("RemoteStore","RemoteStore received new credentials");const r=qs(n);n.M_.add(3),await Au(n),r&&n.N_.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.M_.delete(3),await vd(n)}async function JD(t,e){const n=ce(t);e?(n.M_.delete(2),await vd(n)):e||(n.M_.add(2),await Au(n),n.N_.set("Unknown"))}function Ta(t){return t.B_||(t.B_=function(n,r,i){const s=ce(n);return s.f_(),new VD(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(t.datastore,t.asyncQueue,{Po:zD.bind(null,t),To:BD.bind(null,t),Ao:HD.bind(null,t),h_:WD.bind(null,t)}),t.x_.push(async e=>{e?(t.B_.t_(),ry(t)?ny(t):t.N_.set("Unknown")):(await t.B_.stop(),xC(t))})),t.B_}function Hi(t){return t.k_||(t.k_=function(n,r,i){const s=ce(n);return s.f_(),new UD(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(t.datastore,t.asyncQueue,{Po:()=>Promise.resolve(),To:KD.bind(null,t),Ao:YD.bind(null,t),R_:QD.bind(null,t),A_:XD.bind(null,t)}),t.x_.push(async e=>{e?(t.k_.t_(),await _d(t)):(await t.k_.stop(),t.v_.length>0&&(J("RemoteStore",`Stopping write stream with ${t.v_.length} pending writes`),t.v_=[]))})),t.k_}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iy{constructor(e,n,r,i,s){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=i,this.removalCallback=s,this.deferred=new Li,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,r,i,s){const o=Date.now()+r,a=new iy(e,n,o,i,s);return a.start(r),a}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new Y(j.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function sy(t,e){if(Hr("AsyncQueue",`${e}: ${t}`),Cu(t))return new Y(j.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bo{constructor(e){this.comparator=e?(n,r)=>e(n,r)||ne.comparator(n.key,r.key):(n,r)=>ne.comparator(n.key,r.key),this.keyedMap=pl(),this.sortedSet=new Ye(this.comparator)}static emptySet(e){return new Bo(e.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,r)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof Bo)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){const i=n.getNext().key,s=r.getNext().key;if(!i.isEqual(s))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const r=new Bo;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cw{constructor(){this.q_=new Ye(ne.comparator)}track(e){const n=e.doc.key,r=this.q_.get(n);r?e.type!==0&&r.type===3?this.q_=this.q_.insert(n,e):e.type===3&&r.type!==1?this.q_=this.q_.insert(n,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.q_=this.q_.insert(n,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.q_=this.q_.insert(n,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.q_=this.q_.remove(n):e.type===1&&r.type===2?this.q_=this.q_.insert(n,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.q_=this.q_.insert(n,{type:2,doc:e.doc}):le():this.q_=this.q_.insert(n,e)}Q_(){const e=[];return this.q_.inorderTraversal((n,r)=>{e.push(r)}),e}}class oa{constructor(e,n,r,i,s,o,a,l,c){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=s,this.fromCache=o,this.syncStateChanged=a,this.excludesMetadataChanges=l,this.hasCachedResults=c}static fromInitialDocuments(e,n,r,i,s){const o=[];return n.forEach(a=>{o.push({type:0,doc:a})}),new oa(e,n,Bo.emptySet(n),o,r,i,!0,!1,s)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&dd(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let i=0;i<n.length;i++)if(n[i].type!==r[i].type||!n[i].doc.isEqual(r[i].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZD{constructor(){this.K_=void 0,this.U_=[]}W_(){return this.U_.some(e=>e.G_())}}class eM{constructor(){this.queries=new ba(e=>JT(e),dd),this.onlineState="Unknown",this.z_=new Set}}async function tM(t,e){const n=ce(t);let r=3;const i=e.query;let s=n.queries.get(i);s?!s.W_()&&e.G_()&&(r=2):(s=new ZD,r=e.G_()?0:1);try{switch(r){case 0:s.K_=await n.onListen(i,!0);break;case 1:s.K_=await n.onListen(i,!1);break;case 2:await n.onFirstRemoteStoreListen(i)}}catch(o){const a=sy(o,`Initialization of query '${po(e.query)}' failed`);return void e.onError(a)}n.queries.set(i,s),s.U_.push(e),e.j_(n.onlineState),s.K_&&e.H_(s.K_)&&oy(n)}async function nM(t,e){const n=ce(t),r=e.query;let i=3;const s=n.queries.get(r);if(s){const o=s.U_.indexOf(e);o>=0&&(s.U_.splice(o,1),s.U_.length===0?i=e.G_()?0:1:!s.W_()&&e.G_()&&(i=2))}switch(i){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function rM(t,e){const n=ce(t);let r=!1;for(const i of e){const s=i.query,o=n.queries.get(s);if(o){for(const a of o.U_)a.H_(i)&&(r=!0);o.K_=i}}r&&oy(n)}function iM(t,e,n){const r=ce(t),i=r.queries.get(e);if(i)for(const s of i.U_)s.onError(n);r.queries.delete(e)}function oy(t){t.z_.forEach(e=>{e.next()})}var mm,hw;(hw=mm||(mm={})).J_="default",hw.Cache="cache";class sM{constructor(e,n,r){this.query=e,this.Y_=n,this.Z_=!1,this.X_=null,this.onlineState="Unknown",this.options=r||{}}H_(e){if(!this.options.includeMetadataChanges){const r=[];for(const i of e.docChanges)i.type!==3&&r.push(i);e=new oa(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.Z_?this.ea(e)&&(this.Y_.next(e),n=!0):this.ta(e,this.onlineState)&&(this.na(e),n=!0),this.X_=e,n}onError(e){this.Y_.error(e)}j_(e){this.onlineState=e;let n=!1;return this.X_&&!this.Z_&&this.ta(this.X_,e)&&(this.na(this.X_),n=!0),n}ta(e,n){if(!e.fromCache||!this.G_())return!0;const r=n!=="Offline";return(!this.options.ra||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}ea(e){if(e.docChanges.length>0)return!0;const n=this.X_&&this.X_.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}na(e){e=oa.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Z_=!0,this.Y_.next(e)}G_(){return this.options.source!==mm.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OC{constructor(e){this.key=e}}class NC{constructor(e){this.key=e}}class oM{constructor(e,n){this.query=e,this.la=n,this.ha=null,this.hasCachedResults=!1,this.current=!1,this.Pa=we(),this.mutatedKeys=we(),this.Ia=ZT(e),this.Ta=new Bo(this.Ia)}get Ea(){return this.la}da(e,n){const r=n?n.Aa:new cw,i=n?n.Ta:this.Ta;let s=n?n.mutatedKeys:this.mutatedKeys,o=i,a=!1;const l=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,c=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((h,f)=>{const p=i.get(h),w=fd(this.query,f)?f:null,E=!!p&&this.mutatedKeys.has(p.key),S=!!w&&(w.hasLocalMutations||this.mutatedKeys.has(w.key)&&w.hasCommittedMutations);let R=!1;p&&w?p.data.isEqual(w.data)?E!==S&&(r.track({type:3,doc:w}),R=!0):this.Ra(p,w)||(r.track({type:2,doc:w}),R=!0,(l&&this.Ia(w,l)>0||c&&this.Ia(w,c)<0)&&(a=!0)):!p&&w?(r.track({type:0,doc:w}),R=!0):p&&!w&&(r.track({type:1,doc:p}),R=!0,(l||c)&&(a=!0)),R&&(w?(o=o.add(w),s=S?s.add(h):s.delete(h)):(o=o.delete(h),s=s.delete(h)))}),this.query.limit!==null)for(;o.size>this.query.limit;){const h=this.query.limitType==="F"?o.last():o.first();o=o.delete(h.key),s=s.delete(h.key),r.track({type:1,doc:h})}return{Ta:o,Aa:r,Xi:a,mutatedKeys:s}}Ra(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r,i){const s=this.Ta;this.Ta=e.Ta,this.mutatedKeys=e.mutatedKeys;const o=e.Aa.Q_();o.sort((h,f)=>function(w,E){const S=R=>{switch(R){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return le()}};return S(w)-S(E)}(h.type,f.type)||this.Ia(h.doc,f.doc)),this.Va(r),i=i!=null&&i;const a=n&&!i?this.ma():[],l=this.Pa.size===0&&this.current&&!i?1:0,c=l!==this.ha;return this.ha=l,o.length!==0||c?{snapshot:new oa(this.query,e.Ta,s,o,e.mutatedKeys,l===0,c,!1,!!r&&r.resumeToken.approximateByteSize()>0),fa:a}:{fa:a}}j_(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({Ta:this.Ta,Aa:new cw,mutatedKeys:this.mutatedKeys,Xi:!1},!1)):{fa:[]}}ga(e){return!this.la.has(e)&&!!this.Ta.has(e)&&!this.Ta.get(e).hasLocalMutations}Va(e){e&&(e.addedDocuments.forEach(n=>this.la=this.la.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.la=this.la.delete(n)),this.current=e.current)}ma(){if(!this.current)return[];const e=this.Pa;this.Pa=we(),this.Ta.forEach(r=>{this.ga(r.key)&&(this.Pa=this.Pa.add(r.key))});const n=[];return e.forEach(r=>{this.Pa.has(r)||n.push(new NC(r))}),this.Pa.forEach(r=>{e.has(r)||n.push(new OC(r))}),n}pa(e){this.la=e.hs,this.Pa=we();const n=this.da(e.documents);return this.applyChanges(n,!0)}ya(){return oa.fromInitialDocuments(this.query,this.Ta,this.mutatedKeys,this.ha===0,this.hasCachedResults)}}class aM{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}}class lM{constructor(e){this.key=e,this.wa=!1}}class uM{constructor(e,n,r,i,s,o){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=i,this.currentUser=s,this.maxConcurrentLimboResolutions=o,this.Sa={},this.ba=new ba(a=>JT(a),dd),this.Da=new Map,this.Ca=new Set,this.va=new Ye(ne.comparator),this.Fa=new Map,this.Ma=new Yg,this.xa={},this.Oa=new Map,this.Na=sa.Ln(),this.onlineState="Unknown",this.La=void 0}get isPrimaryClient(){return this.La===!0}}async function cM(t,e,n=!0){const r=$C(t);let i;const s=r.ba.get(e);return s?(r.sharedClientState.addLocalQueryTarget(s.targetId),i=s.view.ya()):i=await LC(r,e,n,!0),i}async function hM(t,e){const n=$C(t);await LC(n,e,!0,!1)}async function LC(t,e,n,r){const i=await PD(t.localStore,cr(e)),s=i.targetId,o=n?t.sharedClientState.addLocalQueryTarget(s):"not-current";let a;return r&&(a=await dM(t,e,s,o==="current",i.resumeToken)),t.isPrimaryClient&&n&&SC(t.remoteStore,i),a}async function dM(t,e,n,r,i){t.Ba=(f,p,w)=>async function(S,R,T,_){let C=R.view.da(T);C.Xi&&(C=await ow(S.localStore,R.query,!1).then(({documents:g})=>R.view.da(g,C)));const L=_&&_.targetChanges.get(R.targetId),F=_&&_.targetMismatches.get(R.targetId)!=null,z=R.view.applyChanges(C,S.isPrimaryClient,L,F);return fw(S,R.targetId,z.fa),z.snapshot}(t,f,p,w);const s=await ow(t.localStore,e,!0),o=new oM(e,s.hs),a=o.da(s.documents),l=Su.createSynthesizedTargetChangeForCurrentChange(n,r&&t.onlineState!=="Offline",i),c=o.applyChanges(a,t.isPrimaryClient,l);fw(t,n,c.fa);const h=new aM(e,n,o);return t.ba.set(e,h),t.Da.has(n)?t.Da.get(n).push(e):t.Da.set(n,[e]),c.snapshot}async function fM(t,e,n){const r=ce(t),i=r.ba.get(e),s=r.Da.get(i.targetId);if(s.length>1)return r.Da.set(i.targetId,s.filter(o=>!dd(o,e))),void r.ba.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||await pm(r.localStore,i.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(i.targetId),n&&ey(r.remoteStore,i.targetId),gm(r,i.targetId)}).catch(Tu)):(gm(r,i.targetId),await pm(r.localStore,i.targetId,!0))}async function pM(t,e){const n=ce(t),r=n.ba.get(e),i=n.Da.get(r.targetId);n.isPrimaryClient&&i.length===1&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),ey(n.remoteStore,r.targetId))}async function mM(t,e,n){const r=bM(t);try{const i=await function(o,a){const l=ce(o),c=mt.now(),h=a.reduce((w,E)=>w.add(E.key),we());let f,p;return l.persistence.runTransaction("Locally write mutations","readwrite",w=>{let E=Wr(),S=we();return l.os.getEntries(w,h).next(R=>{E=R,E.forEach((T,_)=>{_.isValidDocument()||(S=S.add(T))})}).next(()=>l.localDocuments.getOverlayedDocuments(w,E)).next(R=>{f=R;const T=[];for(const _ of a){const C=D4(_,f.get(_.key).overlayedDocument);C!=null&&T.push(new Ws(_.key,C,BT(C.value.mapValue),Ur.exists(!0)))}return l.mutationQueue.addMutationBatch(w,c,T,a)}).next(R=>{p=R;const T=R.applyToLocalDocumentSet(f,S);return l.documentOverlayCache.saveOverlays(w,R.batchId,T)})}).then(()=>({batchId:p.batchId,changes:tC(f)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),function(o,a,l){let c=o.xa[o.currentUser.toKey()];c||(c=new Ye(Ae)),c=c.insert(a,l),o.xa[o.currentUser.toKey()]=c}(r,i.batchId,n),await xu(r,i.changes),await _d(r.remoteStore)}catch(i){const s=sy(i,"Failed to persist write");n.reject(s)}}async function DC(t,e){const n=ce(t);try{const r=await AD(n.localStore,e);e.targetChanges.forEach((i,s)=>{const o=n.Fa.get(s);o&&(De(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1),i.addedDocuments.size>0?o.wa=!0:i.modifiedDocuments.size>0?De(o.wa):i.removedDocuments.size>0&&(De(o.wa),o.wa=!1))}),await xu(n,r,e)}catch(r){await Tu(r)}}function dw(t,e,n){const r=ce(t);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){const i=[];r.ba.forEach((s,o)=>{const a=o.view.j_(e);a.snapshot&&i.push(a.snapshot)}),function(o,a){const l=ce(o);l.onlineState=a;let c=!1;l.queries.forEach((h,f)=>{for(const p of f.U_)p.j_(a)&&(c=!0)}),c&&oy(l)}(r.eventManager,e),i.length&&r.Sa.h_(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function gM(t,e,n){const r=ce(t);r.sharedClientState.updateQueryState(e,"rejected",n);const i=r.Fa.get(e),s=i&&i.key;if(s){let o=new Ye(ne.comparator);o=o.insert(s,jt.newNoDocument(s,ue.min()));const a=we().add(s),l=new gd(ue.min(),new Map,new Ye(Ae),o,a);await DC(r,l),r.va=r.va.remove(s),r.Fa.delete(e),ay(r)}else await pm(r.localStore,e,!1).then(()=>gm(r,e,n)).catch(Tu)}async function yM(t,e){const n=ce(t),r=e.batch.batchId;try{const i=await SD(n.localStore,e);VC(n,r,null),MC(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await xu(n,i)}catch(i){await Tu(i)}}async function vM(t,e,n){const r=ce(t);try{const i=await function(o,a){const l=ce(o);return l.persistence.runTransaction("Reject batch","readwrite-primary",c=>{let h;return l.mutationQueue.lookupMutationBatch(c,a).next(f=>(De(f!==null),h=f.keys(),l.mutationQueue.removeMutationBatch(c,f))).next(()=>l.mutationQueue.performConsistencyCheck(c)).next(()=>l.documentOverlayCache.removeOverlaysForBatchId(c,h,a)).next(()=>l.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(c,h)).next(()=>l.localDocuments.getDocuments(c,h))})}(r.localStore,e);VC(r,e,n),MC(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),await xu(r,i)}catch(i){await Tu(i)}}function MC(t,e){(t.Oa.get(e)||[]).forEach(n=>{n.resolve()}),t.Oa.delete(e)}function VC(t,e,n){const r=ce(t);let i=r.xa[r.currentUser.toKey()];if(i){const s=i.get(e);s&&(n?s.reject(n):s.resolve(),i=i.remove(e)),r.xa[r.currentUser.toKey()]=i}}function gm(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const r of t.Da.get(e))t.ba.delete(r),n&&t.Sa.ka(r,n);t.Da.delete(e),t.isPrimaryClient&&t.Ma.Vr(e).forEach(r=>{t.Ma.containsKey(r)||UC(t,r)})}function UC(t,e){t.Ca.delete(e.path.canonicalString());const n=t.va.get(e);n!==null&&(ey(t.remoteStore,n),t.va=t.va.remove(e),t.Fa.delete(n),ay(t))}function fw(t,e,n){for(const r of n)r instanceof OC?(t.Ma.addReference(r.key,e),_M(t,r)):r instanceof NC?(J("SyncEngine","Document no longer in limbo: "+r.key),t.Ma.removeReference(r.key,e),t.Ma.containsKey(r.key)||UC(t,r.key)):le()}function _M(t,e){const n=e.key,r=n.path.canonicalString();t.va.get(n)||t.Ca.has(r)||(J("SyncEngine","New document in limbo: "+n),t.Ca.add(r),ay(t))}function ay(t){for(;t.Ca.size>0&&t.va.size<t.maxConcurrentLimboResolutions;){const e=t.Ca.values().next().value;t.Ca.delete(e);const n=new ne(Fe.fromString(e)),r=t.Na.next();t.Fa.set(r,new lM(n)),t.va=t.va.insert(n,r),SC(t.remoteStore,new Ei(cr(XT(n.path)),r,"TargetPurposeLimboResolution",zg.oe))}}async function xu(t,e,n){const r=ce(t),i=[],s=[],o=[];r.ba.isEmpty()||(r.ba.forEach((a,l)=>{o.push(r.Ba(l,e,n).then(c=>{if((c||n)&&r.isPrimaryClient){const h=c&&!c.fromCache;r.sharedClientState.updateQueryState(l.targetId,h?"current":"not-current")}if(c){i.push(c);const h=Zg.Ki(l.targetId,c);s.push(h)}}))}),await Promise.all(o),r.Sa.h_(i),await async function(l,c){const h=ce(l);try{await h.persistence.runTransaction("notifyLocalViewChanges","readwrite",f=>B.forEach(c,p=>B.forEach(p.qi,w=>h.persistence.referenceDelegate.addReference(f,p.targetId,w)).next(()=>B.forEach(p.Qi,w=>h.persistence.referenceDelegate.removeReference(f,p.targetId,w)))))}catch(f){if(!Cu(f))throw f;J("LocalStore","Failed to update sequence numbers: "+f)}for(const f of c){const p=f.targetId;if(!f.fromCache){const w=h.ns.get(p),E=w.snapshotVersion,S=w.withLastLimboFreeSnapshotVersion(E);h.ns=h.ns.insert(p,S)}}}(r.localStore,s))}async function wM(t,e){const n=ce(t);if(!n.currentUser.isEqual(e)){J("SyncEngine","User change. New user:",e.toKey());const r=await bC(n.localStore,e);n.currentUser=e,function(s,o){s.Oa.forEach(a=>{a.forEach(l=>{l.reject(new Y(j.CANCELLED,o))})}),s.Oa.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await xu(n,r.us)}}function EM(t,e){const n=ce(t),r=n.Fa.get(e);if(r&&r.wa)return we().add(r.key);{let i=we();const s=n.Da.get(e);if(!s)return i;for(const o of s){const a=n.ba.get(o);i=i.unionWith(a.view.Ea)}return i}}function $C(t){const e=ce(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=DC.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=EM.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=gM.bind(null,e),e.Sa.h_=rM.bind(null,e.eventManager),e.Sa.ka=iM.bind(null,e.eventManager),e}function bM(t){const e=ce(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=yM.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=vM.bind(null,e),e}class pw{constructor(){this.synchronizeTabs=!1}async initialize(e){this.serializer=yd(e.databaseInfo.databaseId),this.sharedClientState=this.createSharedClientState(e),this.persistence=this.createPersistence(e),await this.persistence.start(),this.localStore=this.createLocalStore(e),this.gcScheduler=this.createGarbageCollectionScheduler(e,this.localStore),this.indexBackfillerScheduler=this.createIndexBackfillerScheduler(e,this.localStore)}createGarbageCollectionScheduler(e,n){return null}createIndexBackfillerScheduler(e,n){return null}createLocalStore(e){return ID(this.persistence,new TD,e.initialUser,this.serializer)}createPersistence(e){return new wD(Jg.Hr,this.serializer)}createSharedClientState(e){return new OD}async terminate(){var e,n;(e=this.gcScheduler)===null||e===void 0||e.stop(),(n=this.indexBackfillerScheduler)===null||n===void 0||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}class TM{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>dw(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=wM.bind(null,this.syncEngine),await JD(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new eM}()}createDatastore(e){const n=yd(e.databaseInfo.databaseId),r=function(s){return new MD(s)}(e.databaseInfo);return function(s,o,a,l){return new $D(s,o,a,l)}(e.authCredentials,e.appCheckCredentials,r,n)}createRemoteStore(e){return function(r,i,s,o,a){return new jD(r,i,s,o,a)}(this.localStore,this.datastore,e.asyncQueue,n=>dw(this.syncEngine,n,0),function(){return lw.D()?new lw:new ND}())}createSyncEngine(e,n){return function(i,s,o,a,l,c,h){const f=new uM(i,s,o,a,l,c);return h&&(f.La=!0),f}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){var e;await async function(r){const i=ce(r);J("RemoteStore","RemoteStore shutting down."),i.M_.add(5),await Au(i),i.O_.shutdown(),i.N_.set("Unknown")}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CM{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.Ka(this.observer.next,e)}error(e){this.observer.error?this.Ka(this.observer.error,e):Hr("Uncaught Error in snapshot listener:",e.toString())}$a(){this.muted=!0}Ka(e,n){this.muted||setTimeout(()=>{this.muted||e(n)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IM{constructor(e,n,r,i){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=i,this.user=$t.UNAUTHENTICATED,this.clientId=FT.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(r,async s=>{J("FirestoreClient","Received user=",s.uid),await this.authCredentialListener(s),this.user=s}),this.appCheckCredentials.start(r,s=>(J("FirestoreClient","Received new app check token=",s),this.appCheckCredentialListener(s,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new Y(j.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Li;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const r=sy(n,"Failed to shutdown persistence");e.reject(r)}}),e.promise}}async function Ff(t,e){t.asyncQueue.verifyOperationInProgress(),J("FirestoreClient","Initializing OfflineComponentProvider");const n=t.configuration;await e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener(async i=>{r.isEqual(i)||(await bC(e.localStore,i),r=i)}),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e}async function mw(t,e){t.asyncQueue.verifyOperationInProgress();const n=await AM(t);J("FirestoreClient","Initializing OnlineComponentProvider"),await e.initialize(n,t.configuration),t.setCredentialChangeListener(r=>uw(e.remoteStore,r)),t.setAppCheckTokenChangeListener((r,i)=>uw(e.remoteStore,i)),t._onlineComponents=e}function SM(t){return t.name==="FirebaseError"?t.code===j.FAILED_PRECONDITION||t.code===j.UNIMPLEMENTED:!(typeof DOMException<"u"&&t instanceof DOMException)||t.code===22||t.code===20||t.code===11}async function AM(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){J("FirestoreClient","Using user provided OfflineComponentProvider");try{await Ff(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!SM(n))throw n;ta("Error using user provided cache. Falling back to memory cache: "+n),await Ff(t,new pw)}}else J("FirestoreClient","Using default OfflineComponentProvider"),await Ff(t,new pw);return t._offlineComponents}async function FC(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(J("FirestoreClient","Using user provided OnlineComponentProvider"),await mw(t,t._uninitializedComponentsProvider._online)):(J("FirestoreClient","Using default OnlineComponentProvider"),await mw(t,new TM))),t._onlineComponents}function xM(t){return FC(t).then(e=>e.syncEngine)}async function kM(t){const e=await FC(t),n=e.eventManager;return n.onListen=cM.bind(null,e.syncEngine),n.onUnlisten=fM.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=hM.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=pM.bind(null,e.syncEngine),n}function PM(t,e,n={}){const r=new Li;return t.asyncQueue.enqueueAndForget(async()=>function(s,o,a,l,c){const h=new CM({next:p=>{o.enqueueAndForget(()=>nM(s,f)),p.fromCache&&l.source==="server"?c.reject(new Y(j.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):c.resolve(p)},error:p=>c.reject(p)}),f=new sM(a,h,{includeMetadataChanges:!0,ra:!0});return tM(s,f)}(await kM(t),t.asyncQueue,e,n,r)),r.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jC(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gw=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zC(t,e,n){if(!n)throw new Y(j.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function RM(t,e,n,r){if(e===!0&&r===!0)throw new Y(j.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function yw(t){if(!ne.isDocumentKey(t))throw new Y(j.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function vw(t){if(ne.isDocumentKey(t))throw new Y(j.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function wd(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(r){return r.constructor?r.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":le()}function Lh(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new Y(j.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=wd(t);throw new Y(j.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _w{constructor(e){var n,r;if(e.host===void 0){if(e.ssl!==void 0)throw new Y(j.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(n=e.ssl)===null||n===void 0||n;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new Y(j.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}RM("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=jC((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(s){if(s.timeoutSeconds!==void 0){if(isNaN(s.timeoutSeconds))throw new Y(j.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (must not be NaN)`);if(s.timeoutSeconds<5)throw new Y(j.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (minimum allowed value is 5)`);if(s.timeoutSeconds>30)throw new Y(j.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,i){return r.timeoutSeconds===i.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Ed{constructor(e,n,r,i){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new _w({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new Y(j.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!==void 0}_setSettings(e){if(this._settingsFrozen)throw new Y(j.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new _w(e),e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new WL;switch(r.type){case"firstParty":return new QL(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new Y(j.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const r=gw.get(n);r&&(J("ComponentProvider","Removing Datastore"),gw.delete(n),r.terminate())}(this),Promise.resolve()}}function OM(t,e,n,r={}){var i;const s=(t=Lh(t,Ed))._getSettings(),o=`${e}:${n}`;if(s.host!=="firestore.googleapis.com"&&s.host!==o&&ta("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),t._setSettings(Object.assign(Object.assign({},s),{host:o,ssl:!1})),r.mockUserToken){let a,l;if(typeof r.mockUserToken=="string")a=r.mockUserToken,l=$t.MOCK_USER;else{a=aR(r.mockUserToken,(i=t._app)===null||i===void 0?void 0:i.options.projectId);const c=r.mockUserToken.sub||r.mockUserToken.user_id;if(!c)throw new Y(j.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");l=new $t(c)}t._authCredentials=new qL(new $T(a,l))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gs{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new Gs(this.firestore,e,this._query)}}class Rn{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Di(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Rn(this.firestore,e,this._key)}}class Di extends Gs{constructor(e,n,r){super(e,n,XT(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Rn(this.firestore,null,new ne(e))}withConverter(e){return new Di(this.firestore,e,this._path)}}function ly(t,e,...n){if(t=Yt(t),zC("collection","path",e),t instanceof Ed){const r=Fe.fromString(e,...n);return vw(r),new Di(t,null,r)}{if(!(t instanceof Rn||t instanceof Di))throw new Y(j.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(Fe.fromString(e,...n));return vw(r),new Di(t.firestore,null,r)}}function NM(t,e,...n){if(t=Yt(t),arguments.length===1&&(e=FT.newId()),zC("doc","path",e),t instanceof Ed){const r=Fe.fromString(e,...n);return yw(r),new Rn(t,null,new ne(r))}{if(!(t instanceof Rn||t instanceof Di))throw new Y(j.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(Fe.fromString(e,...n));return yw(r),new Rn(t.firestore,t instanceof Di?t.converter:null,new ne(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LM{constructor(){this.iu=Promise.resolve(),this.su=[],this.ou=!1,this._u=[],this.au=null,this.uu=!1,this.cu=!1,this.lu=[],this.Yo=new CC(this,"async_queue_retry"),this.hu=()=>{const n=$f();n&&J("AsyncQueue","Visibility state changed to "+n.visibilityState),this.Yo.Wo()};const e=$f();e&&typeof e.addEventListener=="function"&&e.addEventListener("visibilitychange",this.hu)}get isShuttingDown(){return this.ou}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.Pu(),this.Iu(e)}enterRestrictedMode(e){if(!this.ou){this.ou=!0,this.cu=e||!1;const n=$f();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.hu)}}enqueue(e){if(this.Pu(),this.ou)return new Promise(()=>{});const n=new Li;return this.Iu(()=>this.ou&&this.cu?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.su.push(e),this.Tu()))}async Tu(){if(this.su.length!==0){try{await this.su[0](),this.su.shift(),this.Yo.reset()}catch(e){if(!Cu(e))throw e;J("AsyncQueue","Operation failed with retryable error: "+e)}this.su.length>0&&this.Yo.$o(()=>this.Tu())}}Iu(e){const n=this.iu.then(()=>(this.uu=!0,e().catch(r=>{this.au=r,this.uu=!1;const i=function(o){let a=o.message||"";return o.stack&&(a=o.stack.includes(o.message)?o.stack:o.message+`
`+o.stack),a}(r);throw Hr("INTERNAL UNHANDLED ERROR: ",i),r}).then(r=>(this.uu=!1,r))));return this.iu=n,n}enqueueAfterDelay(e,n,r){this.Pu(),this.lu.indexOf(e)>-1&&(n=0);const i=iy.createAndSchedule(this,e,n,r,s=>this.Eu(s));return this._u.push(i),i}Pu(){this.au&&le()}verifyOperationInProgress(){}async du(){let e;do e=this.iu,await e;while(e!==this.iu)}Au(e){for(const n of this._u)if(n.timerId===e)return!0;return!1}Ru(e){return this.du().then(()=>{this._u.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(const n of this._u)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.du()})}Vu(e){this.lu.push(e)}Eu(e){const n=this._u.indexOf(e);this._u.splice(n,1)}}class uy extends Ed{constructor(e,n,r,i){super(e,n,r,i),this.type="firestore",this._queue=function(){return new LM}(),this._persistenceKey=(i==null?void 0:i.name)||"[DEFAULT]"}_terminate(){return this._firestoreClient||HC(this),this._firestoreClient.terminate()}}function DM(t,e){const n=typeof t=="object"?t:Qb(),r=typeof t=="string"?t:"(default)",i=kg(n,"firestore").getImmediate({identifier:r});if(!i._initialized){const s=sR("firestore");s&&OM(i,...s)}return i}function BC(t){return t._firestoreClient||HC(t),t._firestoreClient.verifyNotTerminated(),t._firestoreClient}function HC(t){var e,n,r;const i=t._freezeSettings(),s=function(a,l,c,h){return new l4(a,l,c,h.host,h.ssl,h.experimentalForceLongPolling,h.experimentalAutoDetectLongPolling,jC(h.experimentalLongPollingOptions),h.useFetchStreams)}(t._databaseId,((e=t._app)===null||e===void 0?void 0:e.options.appId)||"",t._persistenceKey,i);t._firestoreClient=new IM(t._authCredentials,t._appCheckCredentials,t._queue,s),!((n=i.localCache)===null||n===void 0)&&n._offlineComponentProvider&&(!((r=i.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(t._firestoreClient._uninitializedComponentsProvider={_offlineKind:i.localCache.kind,_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aa{constructor(e){this._byteString=e}static fromBase64String(e){try{return new aa(Bt.fromBase64String(e))}catch(n){throw new Y(j.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new aa(Bt.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cy{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new Y(j.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new kt(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WC{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hy{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new Y(j.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new Y(j.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return Ae(this._lat,e._lat)||Ae(this._long,e._long)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const MM=/^__.*__$/;class VM{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return this.fieldMask!==null?new Ws(e,this.data,this.fieldMask,n,this.fieldTransforms):new Iu(e,this.data,n,this.fieldTransforms)}}function qC(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw le()}}class dy{constructor(e,n,r,i,s,o){this.settings=e,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=i,s===void 0&&this.mu(),this.fieldTransforms=s||[],this.fieldMask=o||[]}get path(){return this.settings.path}get fu(){return this.settings.fu}gu(e){return new dy(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}pu(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),i=this.gu({path:r,yu:!1});return i.wu(e),i}Su(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),i=this.gu({path:r,yu:!1});return i.mu(),i}bu(e){return this.gu({path:void 0,yu:!0})}Du(e){return Dh(e,this.settings.methodName,this.settings.Cu||!1,this.path,this.settings.vu)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}mu(){if(this.path)for(let e=0;e<this.path.length;e++)this.wu(this.path.get(e))}wu(e){if(e.length===0)throw this.Du("Document fields must not be empty");if(qC(this.fu)&&MM.test(e))throw this.Du('Document fields cannot begin and end with "__"')}}class UM{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=r||yd(e)}Fu(e,n,r,i=!1){return new dy({fu:e,methodName:n,vu:r,path:kt.emptyPath(),yu:!1,Cu:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function GC(t){const e=t._freezeSettings(),n=yd(t._databaseId);return new UM(t._databaseId,!!e.ignoreUndefinedProperties,n)}function $M(t,e,n,r,i,s={}){const o=t.Fu(s.merge||s.mergeFields?2:0,e,n,i);XC("Data must be an object, but it was:",o,r);const a=KC(r,o);let l,c;if(s.merge)l=new Wn(o.fieldMask),c=o.fieldTransforms;else if(s.mergeFields){const h=[];for(const f of s.mergeFields){const p=jM(e,f,n);if(!o.contains(p))throw new Y(j.INVALID_ARGUMENT,`Field '${p}' is specified in your field mask but missing from your input data.`);BM(h,p)||h.push(p)}l=new Wn(h),c=o.fieldTransforms.filter(f=>l.covers(f.field))}else l=null,c=o.fieldTransforms;return new VM(new An(a),l,c)}function FM(t,e,n,r=!1){return fy(n,t.Fu(r?4:3,e))}function fy(t,e){if(QC(t=Yt(t)))return XC("Unsupported field value:",e,t),KC(t,e);if(t instanceof WC)return function(r,i){if(!qC(i.fu))throw i.Du(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.Du(`${r._methodName}() is not currently supported inside arrays`);const s=r._toFieldTransform(i);s&&i.fieldTransforms.push(s)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.yu&&e.fu!==4)throw e.Du("Nested arrays are not supported");return function(r,i){const s=[];let o=0;for(const a of r){let l=fy(a,i.bu(o));l==null&&(l={nullValue:"NULL_VALUE"}),s.push(l),o++}return{arrayValue:{values:s}}}(t,e)}return function(r,i){if((r=Yt(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return k4(i.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const s=mt.fromDate(r);return{timestampValue:Oh(i.serializer,s)}}if(r instanceof mt){const s=new mt(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:Oh(i.serializer,s)}}if(r instanceof hy)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof aa)return{bytesValue:mC(i.serializer,r._byteString)};if(r instanceof Rn){const s=i.databaseId,o=r.firestore._databaseId;if(!o.isEqual(s))throw i.Du(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${s.projectId}/${s.database}`);return{referenceValue:Xg(r.firestore._databaseId||i.databaseId,r._key.path)}}throw i.Du(`Unsupported field value: ${wd(r)}`)}(t,e)}function KC(t,e){const n={};return jT(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):wa(t,(r,i)=>{const s=fy(i,e.pu(r));s!=null&&(n[r]=s)}),{mapValue:{fields:n}}}function QC(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof mt||t instanceof hy||t instanceof aa||t instanceof Rn||t instanceof WC)}function XC(t,e,n){if(!QC(n)||!function(i){return typeof i=="object"&&i!==null&&(Object.getPrototypeOf(i)===Object.prototype||Object.getPrototypeOf(i)===null)}(n)){const r=wd(n);throw r==="an object"?e.Du(t+" a custom object"):e.Du(t+" "+r)}}function jM(t,e,n){if((e=Yt(e))instanceof cy)return e._internalPath;if(typeof e=="string")return YC(t,e);throw Dh("Field path arguments must be of type string or ",t,!1,void 0,n)}const zM=new RegExp("[~\\*/\\[\\]]");function YC(t,e,n){if(e.search(zM)>=0)throw Dh(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new cy(...e.split("."))._internalPath}catch{throw Dh(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function Dh(t,e,n,r,i){const s=r&&!r.isEmpty(),o=i!==void 0;let a=`Function ${e}() called with invalid data`;n&&(a+=" (via `toFirestore()`)"),a+=". ";let l="";return(s||o)&&(l+=" (found",s&&(l+=` in field ${r}`),o&&(l+=` in document ${i}`),l+=")"),new Y(j.INVALID_ARGUMENT,a+t+l)}function BM(t,e){return t.some(n=>n.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JC{constructor(e,n,r,i,s){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=i,this._converter=s}get id(){return this._key.path.lastSegment()}get ref(){return new Rn(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new HM(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(bd("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class HM extends JC{data(){return super.data()}}function bd(t,e){return typeof e=="string"?YC(t,e):e instanceof cy?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function WM(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new Y(j.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class py{}class ZC extends py{}function eI(t,e,...n){let r=[];e instanceof py&&r.push(e),r=r.concat(n),function(s){const o=s.filter(l=>l instanceof my).length,a=s.filter(l=>l instanceof Td).length;if(o>1||o>0&&a>0)throw new Y(j.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(const i of r)t=i._apply(t);return t}class Td extends ZC{constructor(e,n,r){super(),this._field=e,this._op=n,this._value=r,this.type="where"}static _create(e,n,r){return new Td(e,n,r)}_apply(e){const n=this._parse(e);return tI(e._query,n),new Gs(e.firestore,e.converter,lm(e._query,n))}_parse(e){const n=GC(e.firestore);return function(s,o,a,l,c,h,f){let p;if(c.isKeyField()){if(h==="array-contains"||h==="array-contains-any")throw new Y(j.INVALID_ARGUMENT,`Invalid Query. You can't perform '${h}' queries on documentId().`);if(h==="in"||h==="not-in"){Ew(f,h);const w=[];for(const E of f)w.push(ww(l,s,E));p={arrayValue:{values:w}}}else p=ww(l,s,f)}else h!=="in"&&h!=="not-in"&&h!=="array-contains-any"||Ew(f,h),p=FM(a,o,f,h==="in"||h==="not-in");return ct.create(c,h,p)}(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}}function qM(t,e,n){const r=e,i=bd("where",t);return Td._create(i,r,n)}class my extends py{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new my(e,n)}_parse(e){const n=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return n.length===1?n[0]:Yn.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return n.getFilters().length===0?e:(function(i,s){let o=i;const a=s.getFlattenedFilters();for(const l of a)tI(o,l),o=lm(o,l)}(e._query,n),new Gs(e.firestore,e.converter,lm(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class gy extends ZC{constructor(e,n){super(),this._field=e,this._direction=n,this.type="orderBy"}static _create(e,n){return new gy(e,n)}_apply(e){const n=function(i,s,o){if(i.startAt!==null)throw new Y(j.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(i.endAt!==null)throw new Y(j.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new ou(s,o)}(e._query,this._field,this._direction);return new Gs(e.firestore,e.converter,function(i,s){const o=i.explicitOrderBy.concat([s]);return new Ea(i.path,i.collectionGroup,o,i.filters.slice(),i.limit,i.limitType,i.startAt,i.endAt)}(e._query,n))}}function GM(t,e="asc"){const n=e,r=bd("orderBy",t);return gy._create(r,n)}function ww(t,e,n){if(typeof(n=Yt(n))=="string"){if(n==="")throw new Y(j.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!YT(e)&&n.indexOf("/")!==-1)throw new Y(j.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const r=e.path.child(Fe.fromString(n));if(!ne.isDocumentKey(r))throw new Y(j.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return B0(t,new ne(r))}if(n instanceof Rn)return B0(t,n._key);throw new Y(j.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${wd(n)}.`)}function Ew(t,e){if(!Array.isArray(t)||t.length===0)throw new Y(j.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function tI(t,e){const n=function(i,s){for(const o of i)for(const a of o.getFlattenedFilters())if(s.indexOf(a.op)>=0)return a.op;return null}(t.filters,function(i){switch(i){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(n!==null)throw n===e.op?new Y(j.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new Y(j.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}class KM{convertValue(e,n="none"){switch(Fs(e)){case 0:return null;case 1:return e.booleanValue;case 2:return lt(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes($s(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 10:return this.convertObject(e.mapValue,n);default:throw le()}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const r={};return wa(e,(i,s)=>{r[i]=this.convertValue(s,n)}),r}convertGeoPoint(e){return new hy(lt(e.latitude),lt(e.longitude))}convertArray(e,n){return(e.values||[]).map(r=>this.convertValue(r,n))}convertServerTimestamp(e,n){switch(n){case"previous":const r=Hg(e);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(ru(e));default:return null}}convertTimestamp(e){const n=Bi(e);return new mt(n.seconds,n.nanos)}convertDocumentKey(e,n){const r=Fe.fromString(e);De(EC(r));const i=new iu(r.get(1),r.get(3)),s=new ne(r.popFirst(5));return i.isEqual(n)||Hr(`Document ${s} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function QM(t,e,n){let r;return r=t?t.toFirestore(e):e,r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vc{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class XM extends JC{constructor(e,n,r,i,s,o){super(e,n,r,i,o),this._firestore=e,this._firestoreImpl=e,this.metadata=s}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new Hc(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const r=this._document.data.field(bd("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}}class Hc extends XM{data(e={}){return super.data(e)}}class YM{constructor(e,n,r,i){this._firestore=e,this._userDataWriter=n,this._snapshot=i,this.metadata=new vc(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){const e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(r=>{e.call(n,new Hc(this._firestore,this._userDataWriter,r.key,r,new vc(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new Y(j.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(i,s){if(i._snapshot.oldDocs.isEmpty()){let o=0;return i._snapshot.docChanges.map(a=>{const l=new Hc(i._firestore,i._userDataWriter,a.doc.key,a.doc,new vc(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter);return a.doc,{type:"added",doc:l,oldIndex:-1,newIndex:o++}})}{let o=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(a=>s||a.type!==3).map(a=>{const l=new Hc(i._firestore,i._userDataWriter,a.doc.key,a.doc,new vc(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter);let c=-1,h=-1;return a.type!==0&&(c=o.indexOf(a.doc.key),o=o.delete(a.doc.key)),a.type!==1&&(o=o.add(a.doc),h=o.indexOf(a.doc.key)),{type:JM(a.type),doc:l,oldIndex:c,newIndex:h}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}}function JM(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return le()}}class ZM extends KM{constructor(e){super(),this.firestore=e}convertBytes(e){return new aa(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new Rn(this.firestore,null,n)}}function nI(t){t=Lh(t,Gs);const e=Lh(t.firestore,uy),n=BC(e),r=new ZM(e);return WM(t._query),PM(n,t._query).then(i=>new YM(e,r,t,i))}function e3(t,e){const n=Lh(t.firestore,uy),r=NM(t),i=QM(t.converter,e);return t3(n,[$M(GC(t.firestore),"addDoc",r._key,i,t.converter!==null,{}).toMutation(r._key,Ur.exists(!1))]).then(()=>r)}function t3(t,e){return function(r,i){const s=new Li;return r.asyncQueue.enqueueAndForget(async()=>mM(await xM(r),i,s)),s.promise}(BC(t),e)}(function(e,n=!0){(function(i){_a=i})(ya),ea(new Ls("firestore",(r,{instanceIdentifier:i,options:s})=>{const o=r.getProvider("app").getImmediate(),a=new uy(new GL(r.getProvider("auth-internal")),new YL(r.getProvider("app-check-internal")),function(c,h){if(!Object.prototype.hasOwnProperty.apply(c.options,["projectId"]))throw new Y(j.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new iu(c.options.projectId,h)}(o,i),o);return s=Object.assign({useFetchStreams:n},s),a._setSettings(s),a},"PUBLIC").setMultipleInstances(!0)),Ni($0,"4.6.3",e),Ni($0,"4.6.3","esm2017")})();const n3={apiKey:"AIzaSyDKuvPzNmeXlqxNRyciKVdLetWxjNVjDnQ",authDomain:"edelgram-e14a7.firebaseapp.com",projectId:"edelgram-e14a7",storageBucket:"edelgram-e14a7.appspot.com",messagingSenderId:"524024204359",appId:"1:524024204359:web:23b7b1b859d1cc81e13562"},rI=Kb(n3),ku=RT(rI),yy=DM(rI),iI=(t,e)=>kN(ku,t,e),sI=(t,e)=>xN(ku,t,e),oI=()=>{ON(ku)},aI=()=>{const t=new xr;return ZN(ku,t)},lI=D.createContext({user:null,logIn:iI,signUp:sI,logOut:oI,googleSignIn:aI}),r3=({children:t})=>{const[e,n]=D.useState(null);D.useEffect(()=>{const i=_T(ku,s=>(s&&(console.log("The logged in user state is:",s),n(s)),()=>{i()}))},[]);const r={user:e,logIn:iI,signUp:sI,logOut:oI,googleSignIn:aI};return x.jsx(lI.Provider,{value:r,children:t})},Ca=()=>D.useContext(lI),i3="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20fill='none'%20viewBox='0%200%2024%2024'%20stroke-width='1.5'%20stroke='currentColor'%20class='size-6'%3e%3cpath%20stroke-linecap='round'%20stroke-linejoin='round'%20d='M8.25%209V5.25A2.25%202.25%200%200%201%2010.5%203h6a2.25%202.25%200%200%201%202.25%202.25v13.5A2.25%202.25%200%200%201%2016.5%2021h-6a2.25%202.25%200%200%201-2.25-2.25V15m-3%200-3-3m0%200%203-3m-3%203H15'%20/%3e%3c/svg%3e",s3=()=>{const{pathname:t}=Hs(),{logOut:e}=Ca();return x.jsxs("nav",{className:"flex flex-col relative h-screen max-w-sm w-full",children:[x.jsx("div",{className:"flex justify-center m-5",children:x.jsx("div",{className:"text-white text-lg",children:"Edelgram"})}),YP.map(n=>x.jsx("div",{className:gn(Gp({variant:"default"}),t===n.link?"bg-white text-white-800 hover:bg-white rounded-none":"hover:bg-slate-950 hover:text-white bg-transparent rounded-none","justify-start"),children:x.jsxs(_h,{to:n.link,className:"flex",children:[x.jsx("span",{children:x.jsx("img",{src:n.icon,alt:n.name,className:"w-5 h-5 mr-2",style:{filter:`${t===n.link?"invert(0)":"invert(1)"}`}})}),x.jsx("span",{children:n.name})]})},n.name)),x.jsx("div",{className:gn(Gp({variant:"default"}),t==="/edelgram/login"?"bg-white text-white-800 hover:bg-white rounded-none":"hover:bg-slate-950 hover:text-white bg-transparent rounded-none","justify-start"),children:x.jsxs(_h,{to:"/edelgram/login",className:"flex",onClick:e,children:[x.jsx("span",{children:x.jsx("img",{src:i3,className:"w-5 h-5 mr-2",alt:"Logout",style:{filter:`${t==="/edelgram/login"?"invert(0)":"invert(1)"}`}})}),x.jsx("span",{children:"Logout"})]})})]})},o3=()=>x.jsx("div",{children:"UserList"}),Cd=({children:t})=>x.jsxs("div",{className:"flex bg-white",children:[x.jsx("aside",{className:"flex gap-x-4 bg-gray-800 fixed top-0 left-0 z-40 lg:w-60 h-screen",children:x.jsx(s3,{})}),x.jsx("div",{className:"lg:ml-60 lg:mr-60 p-8 flex-1 ml-36",children:t}),x.jsx("aside",{className:"hidden lg:block bg-gray-800 fixed top-0 right-0 z-40 lg:w-60 h-screen",children:x.jsx(o3,{})})]}),Id=D.forwardRef(({className:t,...e},n)=>x.jsx("div",{ref:n,className:gn("rounded-lg border bg-card text-card-foreground shadow-sm",t),...e}));Id.displayName="Card";const Sd=D.forwardRef(({className:t,...e},n)=>x.jsx("div",{ref:n,className:gn("flex flex-col space-y-1.5 p-6",t),...e}));Sd.displayName="CardHeader";const Ad=D.forwardRef(({className:t,...e},n)=>x.jsx("h3",{ref:n,className:gn("text-2xl font-semibold leading-none tracking-tight",t),...e}));Ad.displayName="CardTitle";const vy=D.forwardRef(({className:t,...e},n)=>x.jsx("p",{ref:n,className:gn("text-sm text-muted-foreground",t),...e}));vy.displayName="CardDescription";const xd=D.forwardRef(({className:t,...e},n)=>x.jsx("div",{ref:n,className:gn("p-6 pt-0",t),...e}));xd.displayName="CardContent";const kd=D.forwardRef(({className:t,...e},n)=>x.jsx("div",{ref:n,className:gn("flex items-center p-6 pt-0",t),...e}));kd.displayName="CardFooter";const Pd="/edelgram/assets/image2-n_CPjltO.jpg";/**
 * @license lucide-react v0.390.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const a3=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),uI=(...t)=>t.filter((e,n,r)=>!!e&&r.indexOf(e)===n).join(" ");/**
 * @license lucide-react v0.390.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var l3={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.390.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const u3=D.forwardRef(({color:t="currentColor",size:e=24,strokeWidth:n=2,absoluteStrokeWidth:r,className:i="",children:s,iconNode:o,...a},l)=>D.createElement("svg",{ref:l,...l3,width:e,height:e,stroke:t,strokeWidth:r?Number(n)*24/Number(e):n,className:uI("lucide",i),...a},[...o.map(([c,h])=>D.createElement(c,h)),...Array.isArray(s)?s:[s]]));/**
 * @license lucide-react v0.390.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _y=(t,e)=>{const n=D.forwardRef(({className:r,...i},s)=>D.createElement(u3,{ref:s,iconNode:e,className:uI(`lucide-${a3(t)}`,r),...i}));return n.displayName=`${t}`,n};/**
 * @license lucide-react v0.390.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cI=_y("Heart",[["path",{d:"M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.3 1.5 4.05 3 5.5l7 7Z",key:"c3ymky"}]]);/**
 * @license lucide-react v0.390.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const c3=_y("MessageCircle",[["path",{d:"M7.9 20A9 9 0 1 0 4 16.1L2 22Z",key:"vv11sd"}]]);/**
 * @license lucide-react v0.390.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const h3=_y("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]),d3=({data:t})=>(console.log("PostCard data:",t),x.jsx(x.Fragment,{children:t.map(e=>x.jsxs(Id,{className:"mb-6",children:[x.jsx(Sd,{className:"flex flex-col p-3",children:x.jsxs(Ad,{className:"text-sm text-center flex justify-start items-center",children:[x.jsx("span",{className:"mr-2",children:x.jsx("img",{src:Pd,className:"w-10 h-10 rounded-full border-2 border-slate-800 object-cover",alt:"image"})}),x.jsx("span",{children:"user"})]})}),x.jsx(xd,{className:"p-0",children:x.jsx("img",{src:e.photos?e.photos[0].cdnUrl??void 0:"",alt:""})}),x.jsxs(kd,{className:"flex flex-col p-3",children:[x.jsxs("div",{className:"flex justify-start w-full mb-3",children:[x.jsx(cI,{className:gn("mr-3","cursor-pointer")}),x.jsx(c3,{className:"mr-3 cursor-pointer"})]}),x.jsxs("div",{className:"w-full text-sm",children:[0," likes"]}),x.jsxs("div",{className:"w-full text-sm",children:[" ",x.jsx("span",{children:"user"}),": ",e.caption]})]})]},e.id))})),wy="/edelgram/assets/image1-CoqYZn9M.jpg",Ey="/edelgram/assets/image3-DgA0XuPA.jpg",Ro="/edelgram/assets/image4-C82QDRdx.jpg",bw="/edelgram/assets/image5-DZOQ_6Ay.jpg",Tw="/edelgram/assets/image6-D7ViGmDS.jpg",Cw="/edelgram/assets/image7-Bo2YHah9.jpg",f3=()=>x.jsxs("div",{className:"flex gap-x-6",children:[x.jsx("img",{className:"w-20 h-20 rounded-full border-4 border-slate-800 object-cover",src:wy,alt:"image"}),x.jsx("img",{className:"w-20 h-20 rounded-full border-4 border-slate-800 object-cover",src:Pd,alt:"image"}),x.jsx("img",{className:"w-20 h-20 rounded-full border-4 border-slate-800 object-cover",src:Ey,alt:"image"}),x.jsx("img",{className:"w-20 h-20 rounded-full border-4 border-slate-800 object-cover",src:Ro,alt:"image"}),x.jsx("img",{className:"w-20 h-20 rounded-full border-4 border-slate-800 object-cover",src:bw,alt:"image"}),x.jsx("img",{className:"w-20 h-20 rounded-full border-4 border-slate-800 object-cover",src:Tw,alt:"image"}),x.jsx("img",{className:"w-20 h-20 rounded-full border-4 border-slate-800 object-cover",src:Cw,alt:"image"}),x.jsx("img",{className:"w-20 h-20 rounded-full border-4 border-slate-800 object-cover",src:Ro,alt:"image"}),x.jsx("img",{className:"w-20 h-20 rounded-full border-4 border-slate-800 object-cover",src:bw,alt:"image"}),x.jsx("img",{className:"w-20 h-20 rounded-full border-4 border-slate-800 object-cover",src:Tw,alt:"image"}),x.jsx("img",{className:"w-20 h-20 rounded-full border-4 border-slate-800 object-cover",src:Cw,alt:"image"}),x.jsx("img",{className:"w-20 h-20 rounded-full border-4 border-slate-800 object-cover",src:Ro,alt:"image"}),x.jsx("img",{className:"w-20 h-20 rounded-full border-4 border-slate-800 object-cover",src:Ro,alt:"image"})]}),Is=D.forwardRef(({className:t,type:e,...n},r)=>x.jsx("input",{type:e,className:gn("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",t),ref:r,...n}));Is.displayName="Input";const by="posts",p3=t=>e3(ly(yy,by),t),m3=async()=>{try{const t=eI(ly(yy,by),GM("date","desc")),e=await nI(t),n=[];return e.forEach(r=>{const i=r.data(),s={id:r.id,...i};n.push(s)}),n}catch(t){console.error(t)}},g3=t=>{const e=eI(ly(yy,by),qM("userId","==",t));return nI(e)},y3=()=>{const{user:t}=Ca(),[e,n]=D.useState([]),r=async()=>{const i=await m3()||[];n(i)};return D.useEffect(()=>{t!==null&&r()},[t]),x.jsx(Cd,{children:x.jsxs("div",{className:"flex flex-col",children:[x.jsxs("div",{className:"relative mb-6 w-full text-gray-600",children:[x.jsx(Is,{className:"border-2 border-gray-300 bg-white h-10 px-5 pr-16 rounded-sm text-base focus:outline-none",placeholder:"Search...",type:"search",name:"search"}),x.jsx("button",{className:"absolute right-2.5 top-2.5",type:"submit",children:x.jsx(h3,{className:"w-5 h-5 text-gray-400"})})]}),x.jsxs("div",{className:"mb-6",children:[x.jsx("h2",{className:"mb-5",children:"Stories"}),x.jsx(f3,{})]}),x.jsxs("div",{className:"mb-5",children:[x.jsx("h2",{className:"mb-5",children:"Feed"}),x.jsx("div",{className:"w-full flex justify-center",children:x.jsx("div",{className:"flex flex-col max-w-sm rounded-sm overflow-hidden",children:e?x.jsx(d3,{data:e}):x.jsx("p",{children:"Loading..."})})})]})]})})},uo=()=>x.jsx("div",{children:"Error"}),v3=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","span","svg","ul"],_3=v3.reduce((t,e)=>{const n=D.forwardRef((r,i)=>{const{asChild:s,...o}=r,a=s?Sg:e;return D.useEffect(()=>{window[Symbol.for("radix-ui")]=!0},[]),D.createElement(a,Jo({},o,{ref:i}))});return n.displayName=`Primitive.${e}`,{...t,[e]:n}},{}),w3=D.forwardRef((t,e)=>D.createElement(_3.label,Jo({},t,{ref:e,onMouseDown:n=>{var r;(r=t.onMouseDown)===null||r===void 0||r.call(t,n),!n.defaultPrevented&&n.detail>1&&n.preventDefault()}}))),hI=w3,E3=$b("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),Mi=D.forwardRef(({className:t,...e},n)=>x.jsx(hI,{ref:n,className:gn(E3(),t),...e}));Mi.displayName=hI.displayName;const dI={logo:t=>x.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 256 256",...t,children:[x.jsx("rect",{width:"256",height:"256",fill:"none"}),x.jsx("line",{x1:"208",y1:"128",x2:"128",y2:"208",fill:"none",stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"16"}),x.jsx("line",{x1:"192",y1:"40",x2:"40",y2:"192",fill:"none",stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"16"})]}),twitter:t=>x.jsx("svg",{...t,height:"23",viewBox:"0 0 1200 1227",width:"23",xmlns:"http://www.w3.org/2000/svg",children:x.jsx("path",{d:"M714.163 519.284L1160.89 0H1055.03L667.137 450.887L357.328 0H0L468.492 681.821L0 1226.37H105.866L515.491 750.218L842.672 1226.37H1200L714.137 519.284H714.163ZM569.165 687.828L521.697 619.934L144.011 79.6944H306.615L611.412 515.685L658.88 583.579L1055.08 1150.3H892.476L569.165 687.854V687.828Z"})}),gitHub:t=>x.jsx("svg",{viewBox:"0 0 438.549 438.549",...t,children:x.jsx("path",{fill:"currentColor",d:"M409.132 114.573c-19.608-33.596-46.205-60.194-79.798-79.8-33.598-19.607-70.277-29.408-110.063-29.408-39.781 0-76.472 9.804-110.063 29.408-33.596 19.605-60.192 46.204-79.8 79.8C9.803 148.168 0 184.854 0 224.63c0 47.78 13.94 90.745 41.827 128.906 27.884 38.164 63.906 64.572 108.063 79.227 5.14.954 8.945.283 11.419-1.996 2.475-2.282 3.711-5.14 3.711-8.562 0-.571-.049-5.708-.144-15.417a2549.81 2549.81 0 01-.144-25.406l-6.567 1.136c-4.187.767-9.469 1.092-15.846 1-6.374-.089-12.991-.757-19.842-1.999-6.854-1.231-13.229-4.086-19.13-8.559-5.898-4.473-10.085-10.328-12.56-17.556l-2.855-6.57c-1.903-4.374-4.899-9.233-8.992-14.559-4.093-5.331-8.232-8.945-12.419-10.848l-1.999-1.431c-1.332-.951-2.568-2.098-3.711-3.429-1.142-1.331-1.997-2.663-2.568-3.997-.572-1.335-.098-2.43 1.427-3.289 1.525-.859 4.281-1.276 8.28-1.276l5.708.853c3.807.763 8.516 3.042 14.133 6.851 5.614 3.806 10.229 8.754 13.846 14.842 4.38 7.806 9.657 13.754 15.846 17.847 6.184 4.093 12.419 6.136 18.699 6.136 6.28 0 11.704-.476 16.274-1.423 4.565-.952 8.848-2.383 12.847-4.285 1.713-12.758 6.377-22.559 13.988-29.41-10.848-1.14-20.601-2.857-29.264-5.14-8.658-2.286-17.605-5.996-26.835-11.14-9.235-5.137-16.896-11.516-22.985-19.126-6.09-7.614-11.088-17.61-14.987-29.979-3.901-12.374-5.852-26.648-5.852-42.826 0-23.035 7.52-42.637 22.557-58.817-7.044-17.318-6.379-36.732 1.997-58.24 5.52-1.715 13.706-.428 24.554 3.853 10.85 4.283 18.794 7.952 23.84 10.994 5.046 3.041 9.089 5.618 12.135 7.708 17.705-4.947 35.976-7.421 54.818-7.421s37.117 2.474 54.823 7.421l10.849-6.849c7.419-4.57 16.18-8.758 26.262-12.565 10.088-3.805 17.802-4.853 23.134-3.138 8.562 21.509 9.325 40.922 2.279 58.24 15.036 16.18 22.559 35.787 22.559 58.817 0 16.178-1.958 30.497-5.853 42.966-3.9 12.471-8.941 22.457-15.125 29.979-6.191 7.521-13.901 13.85-23.131 18.986-9.232 5.14-18.182 8.85-26.84 11.136-8.662 2.286-18.415 4.004-29.263 5.146 9.894 8.562 14.842 22.077 14.842 40.539v60.237c0 3.422 1.19 6.279 3.572 8.562 2.379 2.279 6.136 2.95 11.276 1.995 44.163-14.653 80.185-41.062 108.068-79.226 27.88-38.161 41.825-81.126 41.825-128.906-.01-39.771-9.818-76.454-29.414-110.049z"})}),radix:t=>x.jsxs("svg",{viewBox:"0 0 25 25",fill:"none",...t,children:[x.jsx("path",{d:"M12 25C7.58173 25 4 21.4183 4 17C4 12.5817 7.58173 9 12 9V25Z",fill:"currentcolor"}),x.jsx("path",{d:"M12 0H4V8H12V0Z",fill:"currentcolor"}),x.jsx("path",{d:"M17 8C19.2091 8 21 6.20914 21 4C21 1.79086 19.2091 0 17 0C14.7909 0 13 1.79086 13 4C13 6.20914 14.7909 8 17 8Z",fill:"currentcolor"})]}),aria:t=>x.jsx("svg",{role:"img",viewBox:"0 0 24 24",fill:"currentColor",...t,children:x.jsx("path",{d:"M13.966 22.624l-1.69-4.281H8.122l3.892-9.144 5.662 13.425zM8.884 1.376H0v21.248zm15.116 0h-8.884L24 22.624Z"})}),npm:t=>x.jsx("svg",{viewBox:"0 0 24 24",...t,children:x.jsx("path",{d:"M1.763 0C.786 0 0 .786 0 1.763v20.474C0 23.214.786 24 1.763 24h20.474c.977 0 1.763-.786 1.763-1.763V1.763C24 .786 23.214 0 22.237 0zM5.13 5.323l13.837.019-.009 13.836h-3.464l.01-10.382h-3.456L12.04 19.17H5.113z",fill:"currentColor"})}),yarn:t=>x.jsx("svg",{viewBox:"0 0 24 24",...t,children:x.jsx("path",{d:"M12 0C5.375 0 0 5.375 0 12s5.375 12 12 12 12-5.375 12-12S18.625 0 12 0zm.768 4.105c.183 0 .363.053.525.157.125.083.287.185.755 1.154.31-.088.468-.042.551-.019.204.056.366.19.463.375.477.917.542 2.553.334 3.605-.241 1.232-.755 2.029-1.131 2.576.324.329.778.899 1.117 1.825.278.774.31 1.478.273 2.015a5.51 5.51 0 0 0 .602-.329c.593-.366 1.487-.917 2.553-.931.714-.009 1.269.445 1.353 1.103a1.23 1.23 0 0 1-.945 1.362c-.649.158-.95.278-1.821.843-1.232.797-2.539 1.242-3.012 1.39a1.686 1.686 0 0 1-.704.343c-.737.181-3.266.315-3.466.315h-.046c-.783 0-1.214-.241-1.45-.491-.658.329-1.51.19-2.122-.134a1.078 1.078 0 0 1-.58-1.153 1.243 1.243 0 0 1-.153-.195c-.162-.25-.528-.936-.454-1.946.056-.723.556-1.367.88-1.71a5.522 5.522 0 0 1 .408-2.256c.306-.727.885-1.348 1.32-1.737-.32-.537-.644-1.367-.329-2.21.227-.602.412-.936.82-1.08h-.005c.199-.074.389-.153.486-.259a3.418 3.418 0 0 1 2.298-1.103c.037-.093.079-.185.125-.283.31-.658.639-1.029 1.024-1.168a.94.94 0 0 1 .328-.06zm.006.7c-.507.016-1.001 1.519-1.001 1.519s-1.27-.204-2.266.871c-.199.218-.468.334-.746.44-.079.028-.176.023-.417.672-.371.991.625 2.094.625 2.094s-1.186.839-1.626 1.881c-.486 1.144-.338 2.261-.338 2.261s-.843.732-.899 1.487c-.051.663.139 1.2.343 1.515.227.343.51.176.51.176s-.561.653-.037.931c.477.25 1.283.394 1.71-.037.31-.31.371-1.001.486-1.283.028-.065.12.111.209.199.097.093.264.195.264.195s-.755.324-.445 1.066c.102.246.468.403 1.066.398.222-.005 2.664-.139 3.313-.296.375-.088.505-.283.505-.283s1.566-.431 2.998-1.357c.917-.598 1.293-.76 2.034-.936.612-.148.57-1.098-.241-1.084-.839.009-1.575.44-2.196.825-1.163.718-1.742.672-1.742.672l-.018-.032c-.079-.13.371-1.293-.134-2.678-.547-1.515-1.413-1.881-1.344-1.997.297-.5 1.038-1.297 1.334-2.78.176-.899.13-2.377-.269-3.151-.074-.144-.732.241-.732.241s-.616-1.371-.788-1.483a.271.271 0 0 0-.157-.046z",fill:"currentColor"})}),pnpm:t=>x.jsx("svg",{viewBox:"0 0 24 24",...t,children:x.jsx("path",{d:"M0 0v7.5h7.5V0zm8.25 0v7.5h7.498V0zm8.25 0v7.5H24V0zM8.25 8.25v7.5h7.498v-7.5zm8.25 0v7.5H24v-7.5zM0 16.5V24h7.5v-7.5zm8.25 0V24h7.498v-7.5zm8.25 0V24H24v-7.5z",fill:"currentColor"})}),react:t=>x.jsx("svg",{viewBox:"0 0 24 24",...t,children:x.jsx("path",{d:"M14.23 12.004a2.236 2.236 0 0 1-2.235 2.236 2.236 2.236 0 0 1-2.236-2.236 2.236 2.236 0 0 1 2.235-2.236 2.236 2.236 0 0 1 2.236 2.236zm2.648-10.69c-1.346 0-3.107.96-4.888 2.622-1.78-1.653-3.542-2.602-4.887-2.602-.41 0-.783.093-1.106.278-1.375.793-1.683 3.264-.973 6.365C1.98 8.917 0 10.42 0 12.004c0 1.59 1.99 3.097 5.043 4.03-.704 3.113-.39 5.588.988 6.38.32.187.69.275 1.102.275 1.345 0 3.107-.96 4.888-2.624 1.78 1.654 3.542 2.603 4.887 2.603.41 0 .783-.09 1.106-.275 1.374-.792 1.683-3.263.973-6.365C22.02 15.096 24 13.59 24 12.004c0-1.59-1.99-3.097-5.043-4.032.704-3.11.39-5.587-.988-6.38-.318-.184-.688-.277-1.092-.278zm-.005 1.09v.006c.225 0 .406.044.558.127.666.382.955 1.835.73 3.704-.054.46-.142.945-.25 1.44-.96-.236-2.006-.417-3.107-.534-.66-.905-1.345-1.727-2.035-2.447 1.592-1.48 3.087-2.292 4.105-2.295zm-9.77.02c1.012 0 2.514.808 4.11 2.28-.686.72-1.37 1.537-2.02 2.442-1.107.117-2.154.298-3.113.538-.112-.49-.195-.964-.254-1.42-.23-1.868.054-3.32.714-3.707.19-.09.4-.127.563-.132zm4.882 3.05c.455.468.91.992 1.36 1.564-.44-.02-.89-.034-1.345-.034-.46 0-.915.01-1.36.034.44-.572.895-1.096 1.345-1.565zM12 8.1c.74 0 1.477.034 2.202.093.406.582.802 1.203 1.183 1.86.372.64.71 1.29 1.018 1.946-.308.655-.646 1.31-1.013 1.95-.38.66-.773 1.288-1.18 1.87-.728.063-1.466.098-2.21.098-.74 0-1.477-.035-2.202-.093-.406-.582-.802-1.204-1.183-1.86-.372-.64-.71-1.29-1.018-1.946.303-.657.646-1.313 1.013-1.954.38-.66.773-1.286 1.18-1.868.728-.064 1.466-.098 2.21-.098zm-3.635.254c-.24.377-.48.763-.704 1.16-.225.39-.435.782-.635 1.174-.265-.656-.49-1.31-.676-1.947.64-.15 1.315-.283 2.015-.386zm7.26 0c.695.103 1.365.23 2.006.387-.18.632-.405 1.282-.66 1.933-.2-.39-.41-.783-.64-1.174-.225-.392-.465-.774-.705-1.146zm3.063.675c.484.15.944.317 1.375.498 1.732.74 2.852 1.708 2.852 2.476-.005.768-1.125 1.74-2.857 2.475-.42.18-.88.342-1.355.493-.28-.958-.646-1.956-1.1-2.98.45-1.017.81-2.01 1.085-2.964zm-13.395.004c.278.96.645 1.957 1.1 2.98-.45 1.017-.812 2.01-1.086 2.964-.484-.15-.944-.318-1.37-.5-1.732-.737-2.852-1.706-2.852-2.474 0-.768 1.12-1.742 2.852-2.476.42-.18.88-.342 1.356-.494zm11.678 4.28c.265.657.49 1.312.676 1.948-.64.157-1.316.29-2.016.39.24-.375.48-.762.705-1.158.225-.39.435-.788.636-1.18zm-9.945.02c.2.392.41.783.64 1.175.23.39.465.772.705 1.143-.695-.102-1.365-.23-2.006-.386.18-.63.406-1.282.66-1.933zM17.92 16.32c.112.493.2.968.254 1.423.23 1.868-.054 3.32-.714 3.708-.147.09-.338.128-.563.128-1.012 0-2.514-.807-4.11-2.28.686-.72 1.37-1.536 2.02-2.44 1.107-.118 2.154-.3 3.113-.54zm-11.83.01c.96.234 2.006.415 3.107.532.66.905 1.345 1.727 2.035 2.446-1.595 1.483-3.092 2.295-4.11 2.295-.22-.005-.406-.05-.553-.132-.666-.38-.955-1.834-.73-3.703.054-.46.142-.944.25-1.438zm4.56.64c.44.02.89.034 1.345.034.46 0 .915-.01 1.36-.034-.44.572-.895 1.095-1.345 1.565-.455-.47-.91-.993-1.36-1.565z",fill:"currentColor"})}),tailwind:t=>x.jsx("svg",{viewBox:"0 0 24 24",...t,children:x.jsx("path",{d:"M12.001,4.8c-3.2,0-5.2,1.6-6,4.8c1.2-1.6,2.6-2.2,4.2-1.8c0.913,0.228,1.565,0.89,2.288,1.624 C13.666,10.618,15.027,12,18.001,12c3.2,0,5.2-1.6,6-4.8c-1.2,1.6-2.6,2.2-4.2,1.8c-0.913-0.228-1.565-0.89-2.288-1.624 C16.337,6.182,14.976,4.8,12.001,4.8z M6.001,12c-3.2,0-5.2,1.6-6,4.8c1.2-1.6,2.6-2.2,4.2-1.8c0.913,0.228,1.565,0.89,2.288,1.624 c1.177,1.194,2.538,2.576,5.512,2.576c3.2,0,5.2-1.6,6-4.8c-1.2,1.6-2.6,2.2-4.2,1.8c-0.913-0.228-1.565-0.89-2.288-1.624 C10.337,13.382,8.976,12,6.001,12z",fill:"currentColor"})}),google:t=>x.jsx("svg",{role:"img",viewBox:"0 0 24 24",...t,children:x.jsx("path",{fill:"currentColor",d:"M12.48 10.92v3.28h7.84c-.24 1.84-.853 3.187-1.787 4.133-1.147 1.147-2.933 2.4-6.053 2.4-4.827 0-8.6-3.893-8.6-8.72s3.773-8.72 8.6-8.72c2.6 0 4.507 1.027 5.907 2.347l2.307-2.307C18.747 1.44 16.133 0 12.48 0 5.867 0 .307 5.387.307 12s5.56 12 12.173 12c3.573 0 6.267-1.173 8.373-3.36 2.16-2.16 2.84-5.213 2.84-7.667 0-.76-.053-1.467-.173-2.053H12.48z"})}),apple:t=>x.jsx("svg",{role:"img",viewBox:"0 0 24 24",...t,children:x.jsx("path",{d:"M12.152 6.896c-.948 0-2.415-1.078-3.96-1.04-2.04.027-3.91 1.183-4.961 3.014-2.117 3.675-.546 9.103 1.519 12.09 1.013 1.454 2.208 3.09 3.792 3.039 1.52-.065 2.09-.987 3.935-.987 1.831 0 2.35.987 3.96.948 1.637-.026 2.676-1.48 3.676-2.948 1.156-1.688 1.636-3.325 1.662-3.415-.039-.013-3.182-1.221-3.22-4.857-.026-3.04 2.48-4.494 2.597-4.559-1.429-2.09-3.623-2.324-4.39-2.376-2-.156-3.675 1.09-4.61 1.09zM15.53 3.83c.843-1.012 1.4-2.427 1.245-3.83-1.207.052-2.662.805-3.532 1.818-.78.896-1.454 2.338-1.273 3.714 1.338.104 2.715-.688 3.559-1.701",fill:"currentColor"})}),paypal:t=>x.jsx("svg",{role:"img",viewBox:"0 0 24 24",...t,children:x.jsx("path",{d:"M7.076 21.337H2.47a.641.641 0 0 1-.633-.74L4.944.901C5.026.382 5.474 0 5.998 0h7.46c2.57 0 4.578.543 5.69 1.81 1.01 1.15 1.304 2.42 1.012 4.287-.023.143-.047.288-.077.437-.983 5.05-4.349 6.797-8.647 6.797h-2.19c-.524 0-.968.382-1.05.9l-1.12 7.106zm14.146-14.42a3.35 3.35 0 0 0-.607-.541c-.013.076-.026.175-.041.254-.93 4.778-4.005 7.201-9.138 7.201h-2.19a.563.563 0 0 0-.556.479l-1.187 7.527h-.506l-.24 1.516a.56.56 0 0 0 .554.647h3.882c.46 0 .85-.334.922-.788.06-.26.76-4.852.816-5.09a.932.932 0 0 1 .923-.788h.58c3.76 0 6.705-1.528 7.565-5.946.36-1.847.174-3.388-.777-4.471z",fill:"currentColor"})}),spinner:t=>x.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",...t,children:x.jsx("path",{d:"M21 12a9 9 0 1 1-6.219-8.56"})})},b3={email:"",password:""},T3=()=>{const{logIn:t,googleSignIn:e}=Ca(),[n,r]=D.useState(b3),i=gu(),s=async a=>{a.preventDefault();try{console.log("The user info is : ",n),await t(n.email,n.password),i("/edelgram/")}catch(l){console.log("Error: ",l)}},o=async a=>{a.preventDefault();try{await e(),i("/edelgram/")}catch(l){console.log("Error: ",l)}};return x.jsx("div",{className:"bg-slate-800 w-full h-screen",children:x.jsx("div",{className:"container mx-auto p-6 flex h-full",children:x.jsxs("div",{className:"flex justify-center items-center w-full",children:[x.jsx("div",{className:"p-6 w-2/3 hidden lg:block",children:x.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[x.jsx("img",{className:"w-2/3 h-auto aspect-video rounded-3xl place-self-end",src:Pd}),x.jsx("img",{className:"w-2/4 h-auto aspect-auto rounded-3xl",src:wy}),x.jsx("img",{className:"w-2/4 h-auto aspect-auto rounded-3xl place-self-end",src:Ro}),x.jsx("img",{className:"w-2/3 h-auto aspect-video rounded-3xl",src:Ey})]})}),x.jsx("div",{className:"max-w-sm rounded-xl border bg-card text-card-foreground shadow-sm",children:x.jsx(Id,{children:x.jsxs("form",{onSubmit:s,children:[x.jsxs(Sd,{className:"space-y-1",children:[x.jsx(Ad,{className:"text-2xl",children:"Edelgram"}),x.jsx(vy,{children:"Enter your email below to create your account"})]}),x.jsxs(xd,{className:"grid gap-4",children:[x.jsx("div",{className:"grid",children:x.jsxs(Zo,{variant:"outline",onClick:o,children:[x.jsx(dI.google,{className:"mr-2 h-4 w-4"}),"Google"]})}),x.jsxs("div",{className:"relative",children:[x.jsx("div",{className:"absolute inset-0 flex items-center",children:x.jsx("span",{className:"w-full border-t"})}),x.jsx("div",{className:"relative flex justify-center text-xs uppercase",children:x.jsx("span",{className:"bg-background px-2 text-muted-foreground",children:"Or continue with"})})]}),x.jsxs("div",{className:"grid gap-2",children:[x.jsx(Mi,{htmlFor:"email",children:"Email"}),x.jsx(Is,{id:"email",type:"email",placeholder:"edelweisss21@example.com",value:n.email,onChange:a=>r({...n,email:a.target.value})})]}),x.jsxs("div",{className:"grid gap-2",children:[x.jsx(Mi,{htmlFor:"password",children:"Password"}),x.jsx(Is,{id:"password",type:"password",value:n.password,onChange:a=>r({...n,password:a.target.value})})]})]}),x.jsxs(kd,{className:"flex flex-col",children:[x.jsx(Zo,{className:"w-full",type:"submit",children:"Login"}),x.jsxs("p",{className:"mt-3 text-sm text-center",children:["Don't have an account?",x.jsx(_h,{to:"/edelgram/signup",children:" Sign up"})]})]})]})})})]})})})},C3=({data:t})=>x.jsx(x.Fragment,{children:t.map(e=>x.jsxs("div",{className:"relative",children:[x.jsx("div",{className:"absolute group transition-all duration-200 bg-transparent hover:bg-slate-950 hover:bg-opacity-75 top-0 bottom-0 left-0 right-0 w-full h-full",children:x.jsxs("div",{className:"flex flex-col justify-center items-center w-full h-full",children:[x.jsx(cI,{className:"hidden group-hover:block fill-white"}),x.jsxs("div",{className:"hidden group-hover:block text-white",children:[e.likes," likes"]})]})}),x.jsx("img",{src:`${e.photos[0].cdnUrl}/-/progressive/yes/-/scale_crop/300x300/center/`})]},e.photos[0].uuid))}),I3=()=>{const{user:t}=Ca(),[e,n]=D.useState([]),r=async i=>{try{const s=await g3(i),o=[];s.forEach(a=>{const l=a.data(),c={id:a.id,...l};o.push(c)}),n(o)}catch(s){console.error(s)}};return D.useEffect(()=>{t!==null&&r(t.uid)},[t]),x.jsx(Cd,{children:x.jsx("div",{className:"flex justify-center",children:x.jsxs("div",{className:"border max-w-3xl w-full",children:[x.jsx("h3",{className:"bg-slate-800 text-white text-center text-lg p-2",children:"My Photos"}),x.jsx("div",{className:"p-8",children:x.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-4",children:e?x.jsx(C3,{data:e}):x.jsx("div",{children:"...Loading"})})})]})})})},S3=()=>x.jsx(Cd,{children:"Profile"}),A3={email:"",password:"",confirmPassword:""},x3=()=>{const{signUp:t,googleSignIn:e}=Ca(),[n,r]=D.useState(A3),i=gu(),s=async a=>{a.preventDefault();try{console.log("The user info is : ",n),await t(n.email,n.password),i("/edelgram/")}catch(l){console.log("Error: ",l)}},o=async a=>{a.preventDefault();try{await e(),i("/edelgram/")}catch(l){console.log("Error: ",l)}};return x.jsx("div",{className:"bg-slate-800 w-full h-screen",children:x.jsx("div",{className:"container mx-auto p-6 flex h-full",children:x.jsxs("div",{className:"flex justify-center items-center w-full",children:[x.jsx("div",{className:"p-6 w-2/3 hidden lg:block",children:x.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[x.jsx("img",{className:"w-2/3 h-auto aspect-video rounded-3xl place-self-end",src:Pd}),x.jsx("img",{className:"w-2/4 h-auto aspect-auto rounded-3xl",src:wy}),x.jsx("img",{className:"w-2/4 h-auto aspect-auto rounded-3xl place-self-end",src:Ro}),x.jsx("img",{className:"w-2/3 h-auto aspect-video rounded-3xl",src:Ey})]})}),x.jsx("div",{className:"max-w-sm rounded-xl border bg-card text-card-foreground shadow-sm",children:x.jsx(Id,{children:x.jsxs("form",{onSubmit:s,children:[x.jsxs(Sd,{className:"space-y-1",children:[x.jsx(Ad,{className:"text-2xl",children:"Edelgram"}),x.jsx(vy,{children:"Enter your email below to create your account"})]}),x.jsxs(xd,{className:"grid gap-4",children:[x.jsx("div",{className:"grid",children:x.jsxs(Zo,{variant:"outline",onClick:o,children:[x.jsx(dI.google,{className:"mr-2 h-4 w-4"}),"Google"]})}),x.jsxs("div",{className:"relative",children:[x.jsx("div",{className:"absolute inset-0 flex items-center",children:x.jsx("span",{className:"w-full border-t"})}),x.jsx("div",{className:"relative flex justify-center text-xs uppercase",children:x.jsx("span",{className:"bg-background px-2 text-muted-foreground",children:"Or continue with"})})]}),x.jsxs("div",{className:"grid gap-2",children:[x.jsx(Mi,{htmlFor:"email",children:"Email"}),x.jsx(Is,{id:"email",type:"email",placeholder:"edelweisss21@example.com",value:n.email,onChange:a=>r({...n,email:a.target.value})})]}),x.jsxs("div",{className:"grid gap-2",children:[x.jsx(Mi,{htmlFor:"password",children:"Password"}),x.jsx(Is,{id:"password",type:"password",value:n.password,onChange:a=>r({...n,password:a.target.value})})]}),x.jsxs("div",{className:"grid gap-2",children:[x.jsx(Mi,{htmlFor:"confirmpassword",children:"Confirm password"}),x.jsx(Is,{id:"confirmpassword",type:"password",value:n.confirmPassword,onChange:a=>r({...n,confirmPassword:a.target.value})})]})]}),x.jsxs(kd,{className:"flex flex-col",children:[x.jsx(Zo,{className:"w-full",type:"submit",children:"Sign Up"}),x.jsxs("p",{className:"mt-3 text-sm text-center",children:["Already have an account?",x.jsx(_h,{to:"/edelgram/login",children:" Login"})]})]})]})})})]})})})};var k3=Object.defineProperty,P3=(t,e,n)=>e in t?k3(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,Ty=(t,e,n)=>(P3(t,typeof e!="symbol"?e+"":e,n),n);function R3(t){let e=n=>{var r;for(let i in n)((r=n[i])==null?void 0:r.constructor)===Object&&(n[i]=e(n[i]));return{...n}};return e(t)}var xe=class{constructor(t){t.constructor===Object?this.store=R3(t):(this._storeIsProxy=!0,this.store=t),this.callbackMap=Object.create(null)}static warn(t,e){console.warn(`Symbiote Data: cannot ${t}. Prop name: `+e)}read(t){return!this._storeIsProxy&&!this.store.hasOwnProperty(t)?(xe.warn("read",t),null):this.store[t]}has(t){return this._storeIsProxy?this.store[t]!==void 0:this.store.hasOwnProperty(t)}add(t,e,n=!1){!n&&Object.keys(this.store).includes(t)||(this.store[t]=e,this.notify(t))}pub(t,e){if(!this._storeIsProxy&&!this.store.hasOwnProperty(t)){xe.warn("publish",t);return}this.store[t]=e,this.notify(t)}multiPub(t){for(let e in t)this.pub(e,t[e])}notify(t){this.callbackMap[t]&&this.callbackMap[t].forEach(e=>{e(this.store[t])})}sub(t,e,n=!0){return!this._storeIsProxy&&!this.store.hasOwnProperty(t)?(xe.warn("subscribe",t),null):(this.callbackMap[t]||(this.callbackMap[t]=new Set),this.callbackMap[t].add(e),n&&e(this.store[t]),{remove:()=>{this.callbackMap[t].delete(e),this.callbackMap[t].size||delete this.callbackMap[t]},callback:e})}static registerCtx(t,e=Symbol()){let n=xe.globalStore.get(e);return n?console.warn('State: context UID "'+e+'" already in use'):(n=new xe(t),xe.globalStore.set(e,n)),n}static deleteCtx(t){xe.globalStore.delete(t)}static getCtx(t,e=!0){return xe.globalStore.get(t)||(e&&console.warn('State: wrong context UID - "'+t+'"'),null)}};xe.globalStore=new Map;var pe=Object.freeze({BIND_ATTR:"set",ATTR_BIND_PRFX:"@",EXT_DATA_CTX_PRFX:"*",NAMED_DATA_CTX_SPLTR:"/",CTX_NAME_ATTR:"ctx-name",CTX_OWNER_ATTR:"ctx-owner",CSS_CTX_PROP:"--ctx-name",EL_REF_ATTR:"ref",AUTO_TAG_PRFX:"sym",REPEAT_ATTR:"repeat",REPEAT_ITEM_TAG_ATTR:"repeat-item-tag",SET_LATER_KEY:"__toSetLater__",USE_TPL:"use-template",ROOT_STYLE_ATTR_NAME:"sym-component"}),fI="1234567890QWERTYUIOPASDFGHJKLZXCVBNMqwertyuiopasdfghjklzxcvbnm",O3=fI.length-1,Pu=class{static generate(t="XXXXXXXXX-XXX"){let e="";for(let n=0;n<t.length;n++)e+=t[n]==="-"?t[n]:fI.charAt(Math.random()*O3);return e}};function pI(t,e,n){let r=!0,i,s=e.split(".");return s.forEach((o,a)=>{a<s.length-1?t=t[o]:i=o}),t?t[i]=n:r=!1,r}function N3(t){return t.split("-").map((e,n)=>e&&n?e[0].toUpperCase()+e.slice(1):e).join("").split("_").map((e,n)=>e&&n?e.toUpperCase():e).join("")}function L3(t,e){[...t.querySelectorAll(`[${pe.REPEAT_ATTR}]`)].forEach(n=>{let r=n.getAttribute(pe.REPEAT_ITEM_TAG_ATTR),i;if(r&&(i=window.customElements.get(r)),!i){i=class extends e.BaseComponent{constructor(){super(),r||(this.style.display="contents")}};let o=n.innerHTML;i.template=o,i.reg(r)}for(;n.firstChild;)n.firstChild.remove();let s=n.getAttribute(pe.REPEAT_ATTR);e.sub(s,o=>{if(!o){for(;n.firstChild;)n.firstChild.remove();return}let a=[...n.children],l,c=h=>{h.forEach((p,w)=>{if(a[w])if(a[w].set$)setTimeout(()=>{a[w].set$(p)});else for(let E in p)a[w][E]=p[E];else{l||(l=new DocumentFragment);let E=new i;Object.assign(E.init$,p),l.appendChild(E)}}),l&&n.appendChild(l);let f=a.slice(h.length,a.length);for(let p of f)p.remove()};if(o.constructor===Array)c(o);else if(o.constructor===Object){let h=[];for(let f in o){let p=o[f];Object.defineProperty(p,"_KEY_",{value:f,enumerable:!0}),h.push(p)}c(h)}else console.warn("Symbiote repeat data type error:"),console.log(o)}),n.removeAttribute(pe.REPEAT_ATTR),n.removeAttribute(pe.REPEAT_ITEM_TAG_ATTR)})}var Iw="__default__";function D3(t,e){if(e.shadowRoot)return;let n=[...t.querySelectorAll("slot")];if(!n.length)return;let r={};n.forEach(i=>{let s=i.getAttribute("name")||Iw;r[s]={slot:i,fr:document.createDocumentFragment()}}),e.initChildren.forEach(i=>{var s;let o=Iw;i instanceof Element&&i.hasAttribute("slot")&&(o=i.getAttribute("slot"),i.removeAttribute("slot")),(s=r[o])==null||s.fr.appendChild(i)}),Object.values(r).forEach(i=>{if(i.fr.childNodes.length)i.slot.parentNode.replaceChild(i.fr,i.slot);else if(i.slot.childNodes.length){let s=document.createDocumentFragment();s.append(...i.slot.childNodes),i.slot.parentNode.replaceChild(s,i.slot)}else i.slot.remove()})}function M3(t,e){[...t.querySelectorAll(`[${pe.EL_REF_ATTR}]`)].forEach(n=>{let r=n.getAttribute(pe.EL_REF_ATTR);e.ref[r]=n,n.removeAttribute(pe.EL_REF_ATTR)})}function V3(t,e){[...t.querySelectorAll(`[${pe.BIND_ATTR}]`)].forEach(n=>{let i=n.getAttribute(pe.BIND_ATTR).split(";");[...n.attributes].forEach(s=>{if(s.name.startsWith("-")&&s.value){let o=N3(s.name.replace("-",""));i.push(o+":"+s.value),n.removeAttribute(s.name)}}),i.forEach(s=>{if(!s)return;let o=s.split(":").map(h=>h.trim()),a=o[0],l;a.indexOf(pe.ATTR_BIND_PRFX)===0&&(l=!0,a=a.replace(pe.ATTR_BIND_PRFX,""));let c=o[1].split(",").map(h=>h.trim());for(let h of c){let f;h.startsWith("!!")?(f="double",h=h.replace("!!","")):h.startsWith("!")&&(f="single",h=h.replace("!","")),e.sub(h,p=>{f==="double"?p=!!p:f==="single"&&(p=!p),l?(p==null?void 0:p.constructor)===Boolean?p?n.setAttribute(a,""):n.removeAttribute(a):n.setAttribute(a,p):pI(n,a,p)||(n[pe.SET_LATER_KEY]||(n[pe.SET_LATER_KEY]=Object.create(null)),n[pe.SET_LATER_KEY][a]=p)})}}),n.removeAttribute(pe.BIND_ATTR)})}var Wc="{{",gl="}}",U3="skip-text";function $3(t){let e,n=[],r=document.createTreeWalker(t,NodeFilter.SHOW_TEXT,{acceptNode:i=>{var s;return!((s=i.parentElement)!=null&&s.hasAttribute(U3))&&i.textContent.includes(Wc)&&i.textContent.includes(gl)&&1}});for(;e=r.nextNode();)n.push(e);return n}var F3=function(t,e){$3(t).forEach(r=>{let i=[],s;for(;r.textContent.includes(gl);)r.textContent.startsWith(Wc)?(s=r.textContent.indexOf(gl)+gl.length,r.splitText(s),i.push(r)):(s=r.textContent.indexOf(Wc),r.splitText(s)),r=r.nextSibling;i.forEach(o=>{let a=o.textContent.replace(Wc,"").replace(gl,"");o.textContent="",e.sub(a,l=>{o.textContent=l})})})},j3=[L3,D3,M3,V3,F3],Mh="'",la='"',z3=/\\([0-9a-fA-F]{1,6} ?)/g;function B3(t){return(t[0]===la||t[0]===Mh)&&(t[t.length-1]===la||t[t.length-1]===Mh)}function H3(t){return(t[0]===la||t[0]===Mh)&&(t=t.slice(1)),(t[t.length-1]===la||t[t.length-1]===Mh)&&(t=t.slice(0,-1)),t}function W3(t){let e="",n="";for(var r=0;r<t.length;r++){const i=t[r+1];t[r]==="\\"&&i==='"'?(e+='\\"',r++):t[r]==='"'&&n!=="\\"?e+='\\"':e+=t[r],n=t[r]}return e}function q3(t){let e=t;B3(t)&&(e=H3(e),e=e.replace(z3,(n,r)=>String.fromCodePoint(parseInt(r.trim(),16))),e=e.replaceAll(`\\
`,"\\n"),e=W3(e),e=la+e+la);try{return JSON.parse(e)}catch{throw new Error(`Failed to parse CSS property value: ${e}. Original input: ${t}`)}}var Sw=0,co=null,Tr=null,hi=class extends HTMLElement{constructor(){super(),Ty(this,"updateCssData",()=>{var t;this.dropCssDataCache(),(t=this.__boundCssProps)==null||t.forEach(e=>{let n=this.getCssData(this.__extractCssName(e),!0);n!==null&&this.$[e]!==n&&(this.$[e]=n)})}),this.init$=Object.create(null),this.cssInit$=Object.create(null),this.tplProcessors=new Set,this.ref=Object.create(null),this.allSubs=new Set,this.pauseRender=!1,this.renderShadow=!1,this.readyToDestroy=!0,this.processInnerHtml=!1,this.allowCustomTemplate=!1,this.ctxOwner=!1}get BaseComponent(){return hi}initCallback(){}__initCallback(){var t;this.__initialized||(this.__initialized=!0,(t=this.initCallback)==null||t.call(this))}render(t,e=this.renderShadow){let n;if((e||this.constructor.__shadowStylesUrl)&&!this.shadowRoot&&this.attachShadow({mode:"open"}),this.allowCustomTemplate){let i=this.getAttribute(pe.USE_TPL);if(i){let s=this.getRootNode(),o=(s==null?void 0:s.querySelector(i))||document.querySelector(i);o?t=o.content.cloneNode(!0):console.warn(`Symbiote template "${i}" is not found...`)}}if(this.processInnerHtml)for(let i of this.tplProcessors)i(this,this);if(t||this.constructor.template){if(this.constructor.template&&!this.constructor.__tpl&&(this.constructor.__tpl=document.createElement("template"),this.constructor.__tpl.innerHTML=this.constructor.template),(t==null?void 0:t.constructor)===DocumentFragment)n=t;else if((t==null?void 0:t.constructor)===String){let i=document.createElement("template");i.innerHTML=t,n=i.content.cloneNode(!0)}else this.constructor.__tpl&&(n=this.constructor.__tpl.content.cloneNode(!0));for(let i of this.tplProcessors)i(n,this)}let r=()=>{n&&(e&&this.shadowRoot.appendChild(n)||this.appendChild(n)),this.__initCallback()};if(this.constructor.__shadowStylesUrl){e=!0;let i=document.createElement("link");i.rel="stylesheet",i.href=this.constructor.__shadowStylesUrl,i.onload=r,this.shadowRoot.prepend(i)}else r()}addTemplateProcessor(t){this.tplProcessors.add(t)}get autoCtxName(){return this.__autoCtxName||(this.__autoCtxName=Pu.generate(),this.style.setProperty(pe.CSS_CTX_PROP,`'${this.__autoCtxName}'`)),this.__autoCtxName}get cssCtxName(){return this.getCssData(pe.CSS_CTX_PROP,!0)}get ctxName(){var t;let e=((t=this.getAttribute(pe.CTX_NAME_ATTR))==null?void 0:t.trim())||this.cssCtxName||this.__cachedCtxName||this.autoCtxName;return this.__cachedCtxName=e,e}get localCtx(){return this.__localCtx||(this.__localCtx=xe.registerCtx({},this)),this.__localCtx}get nodeCtx(){return xe.getCtx(this.ctxName,!1)||xe.registerCtx({},this.ctxName)}static __parseProp(t,e){let n,r;if(t.startsWith(pe.EXT_DATA_CTX_PRFX))n=e.nodeCtx,r=t.replace(pe.EXT_DATA_CTX_PRFX,"");else if(t.includes(pe.NAMED_DATA_CTX_SPLTR)){let i=t.split(pe.NAMED_DATA_CTX_SPLTR);n=xe.getCtx(i[0]),r=i[1]}else n=e.localCtx,r=t;return{ctx:n,name:r}}sub(t,e,n=!0){let r=s=>{this.isConnected&&e(s)},i=hi.__parseProp(t,this);i.ctx.has(i.name)?this.allSubs.add(i.ctx.sub(i.name,r,n)):window.setTimeout(()=>{this.allSubs.add(i.ctx.sub(i.name,r,n))})}notify(t){let e=hi.__parseProp(t,this);e.ctx.notify(e.name)}has(t){let e=hi.__parseProp(t,this);return e.ctx.has(e.name)}add(t,e,n=!1){let r=hi.__parseProp(t,this);r.ctx.add(r.name,e,n)}add$(t,e=!1){for(let n in t)this.add(n,t[n],e)}get $(){if(!this.__stateProxy){let t=Object.create(null);this.__stateProxy=new Proxy(t,{set:(e,n,r)=>{let i=hi.__parseProp(n,this);return i.ctx.pub(i.name,r),!0},get:(e,n)=>{let r=hi.__parseProp(n,this);return r.ctx.read(r.name)}})}return this.__stateProxy}set$(t,e=!1){for(let n in t){let r=t[n];e||![String,Number,Boolean].includes(r==null?void 0:r.constructor)?this.$[n]=r:this.$[n]!==r&&(this.$[n]=r)}}get __ctxOwner(){return this.ctxOwner||this.hasAttribute(pe.CTX_OWNER_ATTR)&&this.getAttribute(pe.CTX_OWNER_ATTR)!=="false"}__initDataCtx(){let t=this.constructor.__attrDesc;if(t)for(let e of Object.values(t))Object.keys(this.init$).includes(e)||(this.init$[e]="");for(let e in this.init$)if(e.startsWith(pe.EXT_DATA_CTX_PRFX))this.nodeCtx.add(e.replace(pe.EXT_DATA_CTX_PRFX,""),this.init$[e],this.__ctxOwner);else if(e.includes(pe.NAMED_DATA_CTX_SPLTR)){let n=e.split(pe.NAMED_DATA_CTX_SPLTR),r=n[0].trim(),i=n[1].trim();if(r&&i){let s=xe.getCtx(r,!1);s||(s=xe.registerCtx({},r)),s.add(i,this.init$[e])}}else this.localCtx.add(e,this.init$[e]);for(let e in this.cssInit$)this.bindCssData(e,this.cssInit$[e]);this.__dataCtxInitialized=!0}connectedCallback(){var t;if(this.isConnected){if(this.__disconnectTimeout&&window.clearTimeout(this.__disconnectTimeout),!this.connectedOnce){let e=(t=this.getAttribute(pe.CTX_NAME_ATTR))==null?void 0:t.trim();if(e&&this.style.setProperty(pe.CSS_CTX_PROP,`'${e}'`),this.__initDataCtx(),this[pe.SET_LATER_KEY]){for(let n in this[pe.SET_LATER_KEY])pI(this,n,this[pe.SET_LATER_KEY][n]);delete this[pe.SET_LATER_KEY]}this.initChildren=[...this.childNodes];for(let n of j3)this.addTemplateProcessor(n);if(this.pauseRender)this.__initCallback();else if(this.constructor.__rootStylesLink){let n=this.getRootNode();if(!n)return;if(n==null?void 0:n.querySelector(`link[${pe.ROOT_STYLE_ATTR_NAME}="${this.constructor.is}"]`)){this.render();return}let i=this.constructor.__rootStylesLink.cloneNode(!0);i.setAttribute(pe.ROOT_STYLE_ATTR_NAME,this.constructor.is),i.onload=()=>{this.render()},n.nodeType===Node.DOCUMENT_NODE?n.head.appendChild(i):n.prepend(i)}else this.render()}this.connectedOnce=!0}}destroyCallback(){}disconnectedCallback(){this.connectedOnce&&(this.dropCssDataCache(),this.readyToDestroy&&(this.__disconnectTimeout&&window.clearTimeout(this.__disconnectTimeout),this.__disconnectTimeout=window.setTimeout(()=>{this.destroyCallback();for(let t of this.allSubs)t.remove(),this.allSubs.delete(t);for(let t of this.tplProcessors)this.tplProcessors.delete(t);Tr==null||Tr.delete(this.updateCssData),Tr!=null&&Tr.size||(co==null||co.disconnect(),co=null,Tr=null)},100)))}static reg(t,e=!1){t||(Sw++,t=`${pe.AUTO_TAG_PRFX}-${Sw}`),this.__tag=t;let n=window.customElements.get(t);if(n){!e&&n!==this&&console.warn([`Element with tag name "${t}" already registered.`,`You're trying to override it with another class "${this.name}".`,"This is most likely a mistake.","New element will not be registered."].join(`
`));return}window.customElements.define(t,e?class extends this{}:this)}static get is(){return this.__tag||this.reg(),this.__tag}static bindAttributes(t){this.observedAttributes=Object.keys(t),this.__attrDesc=t}attributeChangedCallback(t,e,n){var r;if(e===n)return;let i=(r=this.constructor.__attrDesc)==null?void 0:r[t];i?this.__dataCtxInitialized?this.$[i]=n:this.init$[i]=n:this[t]=n}getCssData(t,e=!1){if(this.__cssDataCache||(this.__cssDataCache=Object.create(null)),!Object.keys(this.__cssDataCache).includes(t)){this.__computedStyle||(this.__computedStyle=window.getComputedStyle(this));let n=this.__computedStyle.getPropertyValue(t).trim();try{this.__cssDataCache[t]=q3(n)}catch{!e&&console.warn(`CSS Data error: ${t}`),this.__cssDataCache[t]=null}}return this.__cssDataCache[t]}__extractCssName(t){return t.split("--").map((e,n)=>n===0?"":e).join("--")}__initStyleAttrObserver(){Tr||(Tr=new Set),Tr.add(this.updateCssData),co||(co=new MutationObserver(t=>{t[0].type==="attributes"&&Tr.forEach(e=>{e()})}),co.observe(document,{childList:!0,subtree:!0,attributes:!0,attributeFilter:["style"]}))}bindCssData(t,e=""){this.__boundCssProps||(this.__boundCssProps=new Set),this.__boundCssProps.add(t);let n=this.getCssData(this.__extractCssName(t),!0);n===null&&(n=e),this.add(t,n),this.__initStyleAttrObserver()}dropCssDataCache(){this.__cssDataCache=null,this.__computedStyle=null}defineAccessor(t,e,n){let r="__"+t;this[r]=this[t],Object.defineProperty(this,t,{set:i=>{this[r]=i,n?window.setTimeout(()=>{e==null||e(i)}):e==null||e(i)},get:()=>this[r]}),this[t]=this[r]}static set shadowStyles(t){let e=new Blob([t],{type:"text/css"});this.__shadowStylesUrl=URL.createObjectURL(e)}static set rootStyles(t){if(!this.__rootStylesLink){let e=new Blob([t],{type:"text/css"}),n=URL.createObjectURL(e),r=document.createElement("link");r.href=n,r.rel="stylesheet",this.__rootStylesLink=r}}},Rd=hi;Ty(Rd,"template");function mI(t,e){for(let n in e)n.includes("-")?t.style.setProperty(n,e[n]):t.style[n]=e[n]}function G3(t,e){for(let n in e)e[n].constructor===Boolean?e[n]?t.setAttribute(n,""):t.removeAttribute(n):t.setAttribute(n,e[n])}function Cy(t={tag:"div"}){let e=document.createElement(t.tag);if(t.attributes&&G3(e,t.attributes),t.styles&&mI(e,t.styles),t.properties)for(let n in t.properties)e[n]=t.properties[n];return t.processors&&t.processors.forEach(n=>{n(e)}),t.children&&t.children.forEach(n=>{let r=Cy(n);e.appendChild(r)}),e}var gI="idb-store-ready",K3="symbiote-db",Q3="symbiote-idb-update_",X3=class{_notifyWhenReady(t=null){window.dispatchEvent(new CustomEvent(gI,{detail:{dbName:this.name,storeName:this.storeName,event:t}}))}get _updEventName(){return Q3+this.name}_getUpdateEvent(t){return new CustomEvent(this._updEventName,{detail:{key:this.name,newValue:t}})}_notifySubscribers(t){window.localStorage.removeItem(this.name),window.localStorage.setItem(this.name,t),window.dispatchEvent(this._getUpdateEvent(t))}constructor(t,e){this.name=t,this.storeName=e,this.version=1,this.request=window.indexedDB.open(this.name,this.version),this.request.onupgradeneeded=n=>{this.db=n.target.result,this.objStore=this.db.createObjectStore(e,{keyPath:"_key"}),this.objStore.transaction.oncomplete=r=>{this._notifyWhenReady(r)}},this.request.onsuccess=n=>{this.db=n.target.result,this._notifyWhenReady(n)},this.request.onerror=n=>{console.error(n)},this._subscriptionsMap={},this._updateHandler=n=>{n.key===this.name&&this._subscriptionsMap[n.newValue]&&this._subscriptionsMap[n.newValue].forEach(async i=>{i(await this.read(n.newValue))})},this._localUpdateHandler=n=>{this._updateHandler(n.detail)},window.addEventListener("storage",this._updateHandler),window.addEventListener(this._updEventName,this._localUpdateHandler)}read(t){let n=this.db.transaction(this.storeName,"readwrite").objectStore(this.storeName).get(t);return new Promise((r,i)=>{n.onsuccess=s=>{var o;(o=s.target.result)!=null&&o._value?r(s.target.result._value):(r(null),console.warn(`IDB: cannot read "${t}"`))},n.onerror=s=>{i(s)}})}write(t,e,n=!1){let r={_key:t,_value:e},s=this.db.transaction(this.storeName,"readwrite").objectStore(this.storeName).put(r);return new Promise((o,a)=>{s.onsuccess=l=>{n||this._notifySubscribers(t),o(l.target.result)},s.onerror=l=>{a(l)}})}delete(t,e=!1){let r=this.db.transaction(this.storeName,"readwrite").objectStore(this.storeName).delete(t);return new Promise((i,s)=>{r.onsuccess=o=>{e||this._notifySubscribers(t),i(o)},r.onerror=o=>{s(o)}})}getAll(){let e=this.db.transaction(this.storeName,"readwrite").objectStore(this.storeName).getAll();return new Promise((n,r)=>{e.onsuccess=i=>{let s=i.target.result;n(s.map(o=>o._value))},e.onerror=i=>{r(i)}})}subscribe(t,e){this._subscriptionsMap[t]||(this._subscriptionsMap[t]=new Set);let n=this._subscriptionsMap[t];return n.add(e),{remove:()=>{n.delete(e),n.size||delete this._subscriptionsMap[t]}}}stop(){window.removeEventListener("storage",this._updateHandler),this._subscriptionsMap=null,yI.clear(this.name)}},yI=class{static get readyEventName(){return gI}static open(t=K3,e="store"){let n=t+"/"+e;return this._reg[n]||(this._reg[n]=new X3(t,e)),this._reg[n]}static clear(t){window.indexedDB.deleteDatabase(t);for(let e in this._reg)e.split("/")[0]===t&&delete this._reg[e]}};Ty(yI,"_reg",Object.create(null));const Y3=20,tt=Object.freeze({FILE_ADDED:"file-added",FILE_REMOVED:"file-removed",FILE_UPLOAD_START:"file-upload-start",FILE_UPLOAD_PROGRESS:"file-upload-progress",FILE_UPLOAD_SUCCESS:"file-upload-success",FILE_UPLOAD_FAILED:"file-upload-failed",FILE_URL_CHANGED:"file-url-changed",MODAL_OPEN:"modal-open",MODAL_CLOSE:"modal-close",DONE_CLICK:"done-click",UPLOAD_CLICK:"upload-click",ACTIVITY_CHANGE:"activity-change",COMMON_UPLOAD_START:"common-upload-start",COMMON_UPLOAD_PROGRESS:"common-upload-progress",COMMON_UPLOAD_SUCCESS:"common-upload-success",COMMON_UPLOAD_FAILED:"common-upload-failed",CHANGE:"change",GROUP_CREATED:"group-created"});class J3{constructor(e){V(this,"_timeoutStore",new Map);V(this,"_targets",new Set);V(this,"_debugPrint",null);this._debugPrint=e}bindTarget(e){this._targets.add(e)}unbindTarget(e){this._targets.delete(e)}_dispatch(e,n){var r;for(const i of this._targets)i.dispatchEvent(new CustomEvent(e,{detail:n}));(r=this._debugPrint)==null||r.call(this,()=>{const i=n&&typeof n=="object"?{...n}:n;return[`event "${e}"`,i]})}emit(e,n,{debounce:r}={}){if(typeof r!="number"&&!r){this._dispatch(e,typeof n=="function"?n():n);return}this._timeoutStore.has(e)&&window.clearTimeout(this._timeoutStore.get(e));const i=typeof r=="number"?r:Y3,s=window.setTimeout(()=>{this._dispatch(e,typeof n=="function"?n():n),this._timeoutStore.delete(e)},i);this._timeoutStore.set(e,s)}}function Dn(t,e){let n;const r=(...i)=>{clearTimeout(n),n=setTimeout(()=>t(...i),e)};return r.cancel=()=>{clearTimeout(n)},r}const Aw="--uploadcare-blocks-window-height";class Vh{static registerClient(e){this.clientsRegistry.size===0&&this.attachTracker(),this.clientsRegistry.add(e)}static unregisterClient(e){this.clientsRegistry.delete(e),this.clientsRegistry.size===0&&this.detachTracker()}static attachTracker(){window.addEventListener("resize",this.flush,{passive:!0,capture:!0}),this.flush()}static detachTracker(){window.removeEventListener("resize",this.flush,{capture:!0}),document.documentElement.style.removeProperty(Aw)}}V(Vh,"clientsRegistry",new Set),V(Vh,"flush",Dn(()=>{document.documentElement.style.setProperty(Aw,`${window.innerHeight}px`)},100));const Z3=t=>{var r;const e=new Intl.Locale(t);let n="ltr";return typeof e.getTextInfo=="function"&&e.getTextInfo().direction?n=e.getTextInfo().direction:"textInfo"in e&&((r=e.textInfo)!=null&&r.direction)&&(n=e.textInfo.direction),n},vI=(t,e)=>new Intl.PluralRules(t).select(e),e5=t=>t,ym="{{",_I="}}",xw="plural:";function vm(t,e,n={}){var o;let{openToken:r=ym,closeToken:i=_I,transform:s=e5}=n;for(let a in e){let l=(o=e[a])==null?void 0:o.toString();t=t.replaceAll(r+a+i,typeof l=="string"?s(l):l)}return t}function t5(t){const e=[];let n=t.indexOf(ym);for(;n!==-1;){const r=t.indexOf(_I,n),i=t.substring(n+2,r);if(i.startsWith(xw)){const s=t.substring(n+2,r).replace(xw,""),o=s.substring(0,s.indexOf("(")),a=s.substring(s.indexOf("(")+1,s.indexOf(")"));e.push({variable:i,pluralKey:o,countVariable:a})}n=t.indexOf(ym,r)}return e}const n5=({element:t,attribute:e,onSuccess:n,onTimeout:r,timeout:i=300})=>{const s=t.getAttribute(e);if(s!==null){n(s);return}const o=new MutationObserver(c=>{const h=c[c.length-1];l(h)});o.observe(t,{attributes:!0,attributeFilter:[e]});const a=setTimeout(()=>{o.disconnect(),r()},i),l=c=>{const h=t.getAttribute(e);c.type==="attributes"&&c.attributeName===e&&h!==null&&(clearTimeout(a),o.disconnect(),n(h))}};function kw(t){return Object.prototype.toString.call(t)==="[object Object]"}const r5=/\W|_/g;function i5(t){return t.split(r5).map((e,n)=>e.charAt(0)[n>0?"toUpperCase":"toLowerCase"]()+e.slice(1)).join("")}function Pw(t,{ignoreKeys:e}={ignoreKeys:[]}){return Array.isArray(t)?t.map(n=>Yr(n,{ignoreKeys:e})):t}function Yr(t,{ignoreKeys:e}={ignoreKeys:[]}){if(Array.isArray(t))return Pw(t,{ignoreKeys:e});if(!kw(t))return t;const n={};for(const r of Object.keys(t)){let i=t[r];if(e.includes(r)){n[r]=i;continue}kw(i)?i=Yr(i,{ignoreKeys:e}):Array.isArray(i)&&(i=Pw(i,{ignoreKeys:e})),n[i5(r)]=i}return n}const s5=t=>new Promise(e=>setTimeout(e,t));function wI({libraryName:t,libraryVersion:e,userAgent:n,publicKey:r="",integration:i=""}){const s="JavaScript";if(typeof n=="string")return n;if(typeof n=="function")return n({publicKey:r,libraryName:t,libraryVersion:e,languageName:s,integration:i});const o=[t,e,r].filter(Boolean).join("/"),a=[s,i].filter(Boolean).join("; ");return`${o} (${a})`}const o5={factor:2,time:100};function a5(t,e=o5){let n=0;function r(i){const s=Math.round(e.time*e.factor**n);return i({attempt:n,retry:a=>s5(a??s).then(()=>(n+=1,r(i)))})}return r(t)}class Iy extends Error{}class Ru extends Iy{constructor(n){super();V(this,"originalProgressEvent");this.name="NetworkError",this.message="Network error",Object.setPrototypeOf(this,Ru.prototype),this.originalProgressEvent=n}}const Od=(t,e)=>{t&&(t.aborted?Promise.resolve().then(e):t.addEventListener("abort",()=>e(),{once:!0}))};class js extends Iy{constructor(n="Request canceled"){super(n);V(this,"isCancel",!0);this.name="CancelError",Object.setPrototypeOf(this,js.prototype)}}const l5=500,EI=({check:t,interval:e=l5,timeout:n,signal:r})=>new Promise((i,s)=>{let o,a;Od(r,()=>{o&&clearTimeout(o),s(new js("Poll cancelled"))}),n&&(a=setTimeout(()=>{o&&clearTimeout(o),s(new js("Timed out"))},n));const l=()=>{try{Promise.resolve(t(r)).then(c=>{c?(a&&clearTimeout(a),i(c)):o=setTimeout(l,e)}).catch(c=>{a&&clearTimeout(a),s(c)})}catch(c){a&&clearTimeout(a),s(c)}};o=setTimeout(l,0)}),Te={baseCDN:"https://ucarecdn.com",baseURL:"https://upload.uploadcare.com",maxContentLength:50*1024*1024,retryThrottledRequestMaxTimes:1,retryNetworkErrorMaxTimes:3,multipartMinFileSize:25*1024*1024,multipartChunkSize:5*1024*1024,multipartMinLastPartSize:1024*1024,maxConcurrentRequests:4,pollingTimeoutMilliseconds:1e4,pusherKey:"79ae88bd931ea68464d9"},Nd="application/octet-stream",bI="original",ts=({method:t,url:e,data:n,headers:r={},signal:i,onProgress:s})=>new Promise((o,a)=>{const l=new XMLHttpRequest,c=(t==null?void 0:t.toUpperCase())||"GET";let h=!1;l.open(c,e,!0),r&&Object.entries(r).forEach(f=>{const[p,w]=f;typeof w<"u"&&!Array.isArray(w)&&l.setRequestHeader(p,w)}),l.responseType="text",Od(i,()=>{h=!0,l.abort(),a(new js)}),l.onload=()=>{if(l.status!=200)a(new Error(`Error ${l.status}: ${l.statusText}`));else{const f={method:c,url:e,data:n,headers:r||void 0,signal:i,onProgress:s},p=l.getAllResponseHeaders().trim().split(/[\r\n]+/),w={};p.forEach(function(R){const T=R.split(": "),_=T.shift(),C=T.join(": ");_&&typeof _<"u"&&(w[_]=C)});const E=l.response,S=l.status;o({request:f,data:E,headers:w,status:S})}},l.onerror=f=>{h||a(new Ru(f))},s&&typeof s=="function"&&(l.upload.onprogress=f=>{f.lengthComputable?s({isComputable:!0,value:f.loaded/f.total}):s({isComputable:!1})}),n?l.send(n):l.send()});function u5(t,...e){return t}const c5=({name:t})=>t?[t]:[],h5=u5;var d5=()=>new FormData;const TI=t=>!1,Ld=t=>typeof Blob<"u"&&t instanceof Blob,Dd=t=>typeof File<"u"&&t instanceof File,Md=t=>!!t&&typeof t=="object"&&!Array.isArray(t)&&"uri"in t&&typeof t.uri=="string",Ia=t=>Ld(t)||Dd(t)||TI()||Md(t),f5=t=>typeof t=="string"||typeof t=="number"||typeof t>"u",p5=t=>!!t&&typeof t=="object"&&!Array.isArray(t),m5=t=>!!t&&typeof t=="object"&&"data"in t&&Ia(t.data);function CI(t,e,n){if(Array.isArray(n))for(const r of n)CI(t,`${e}[]`,r);else if(m5(n)){const{name:r,contentType:i}=n,s=h5(n.data,r,i??Nd),o=c5({name:r,contentType:i});t.push([e,s,...o])}else if(p5(n))for(const[r,i]of Object.entries(n))typeof i<"u"&&t.push([`${e}[${r}]`,String(i)]);else f5(n)&&n&&t.push([e,n.toString()])}function g5(t){const e=[];for(const[n,r]of Object.entries(t))CI(e,n,r);return e}function Vd(t){const e=d5(),n=g5(t);for(const r of n){const[i,s,...o]=r;e.append(i,s,...o)}return e}class un extends Iy{constructor(n,r,i,s,o){super();V(this,"code");V(this,"request");V(this,"response");V(this,"headers");this.name="UploadError",this.message=n,this.code=r,this.request=i,this.response=s,this.headers=o,Object.setPrototypeOf(this,un.prototype)}}const y5=t=>{const e=new URLSearchParams;for(const[n,r]of Object.entries(t))r&&typeof r=="object"&&!Array.isArray(r)?Object.entries(r).filter(i=>i[1]??!1).forEach(i=>e.set(`${n}[${i[0]}]`,String(i[1]))):Array.isArray(r)?r.forEach(i=>{e.append(`${n}[]`,i)}):typeof r=="string"&&r?e.set(n,r):typeof r=="number"&&e.set(n,r.toString());return e.toString()},qr=(t,e,n)=>{const r=new URL(t);return r.pathname=(r.pathname+e).replace("//","/"),n&&(r.search=y5(n)),r.toString()};var v5="6.14.1";const _5="UploadcareUploadClient",w5=v5;function Ks(t){return wI({libraryName:_5,libraryVersion:w5,...t})}const E5="RequestThrottledError",Rw=15e3,b5=1e3;function T5(t){const{headers:e}=t||{};if(!e||typeof e["retry-after"]!="string")return Rw;const n=parseInt(e["retry-after"],10);return Number.isFinite(n)?n*1e3:Rw}function ns(t,e){const{retryThrottledRequestMaxTimes:n,retryNetworkErrorMaxTimes:r}=e;return a5(({attempt:i,retry:s})=>t().catch(o=>{if("response"in o&&(o==null?void 0:o.code)===E5&&i<n)return s(T5(o));if(o instanceof Ru&&i<r)return s((i+1)*b5);throw o}))}const II=t=>{let e="";return(Ld(t)||Dd(t)||Md(t))&&(e=t.type),e||Nd},SI=t=>{let e="";return Dd(t)&&t.name?e=t.name:Ld(t)||TI()?e="":Md(t)&&t.name&&(e=t.name),e||bI};function Sy(t){return typeof t>"u"||t==="auto"?"auto":t?"1":"0"}function C5(t,{publicKey:e,fileName:n,contentType:r,baseURL:i=Te.baseURL,secureSignature:s,secureExpire:o,store:a,signal:l,onProgress:c,source:h="local",integration:f,userAgent:p,retryThrottledRequestMaxTimes:w=Te.retryThrottledRequestMaxTimes,retryNetworkErrorMaxTimes:E=Te.retryNetworkErrorMaxTimes,metadata:S}){return ns(()=>ts({method:"POST",url:qr(i,"/base/",{jsonerrors:1}),headers:{"X-UC-User-Agent":Ks({publicKey:e,integration:f,userAgent:p})},data:Vd({file:{data:t,name:n||SI(t),contentType:r||II(t)},UPLOADCARE_PUB_KEY:e,UPLOADCARE_STORE:Sy(a),signature:s,expire:o,source:h,metadata:S}),signal:l,onProgress:c}).then(({data:R,headers:T,request:_})=>{const C=Yr(JSON.parse(R));if("error"in C)throw new un(C.error.content,C.error.errorCode,_,C,T);return C}),{retryNetworkErrorMaxTimes:E,retryThrottledRequestMaxTimes:w})}var _m;(function(t){t.Token="token",t.FileInfo="file_info"})(_m||(_m={}));function I5(t,{publicKey:e,baseURL:n=Te.baseURL,store:r,fileName:i,checkForUrlDuplicates:s,saveUrlForRecurrentUploads:o,secureSignature:a,secureExpire:l,source:c="url",signal:h,integration:f,userAgent:p,retryThrottledRequestMaxTimes:w=Te.retryThrottledRequestMaxTimes,retryNetworkErrorMaxTimes:E=Te.retryNetworkErrorMaxTimes,metadata:S}){return ns(()=>ts({method:"POST",headers:{"X-UC-User-Agent":Ks({publicKey:e,integration:f,userAgent:p})},url:qr(n,"/from_url/",{jsonerrors:1,pub_key:e,source_url:t,store:Sy(r),filename:i,check_URL_duplicates:s?1:void 0,save_URL_duplicates:o?1:void 0,signature:a,expire:l,source:c,metadata:S}),signal:h}).then(({data:R,headers:T,request:_})=>{const C=Yr(JSON.parse(R));if("error"in C)throw new un(C.error.content,C.error.errorCode,_,C,T);return C}),{retryNetworkErrorMaxTimes:E,retryThrottledRequestMaxTimes:w})}var rn;(function(t){t.Unknown="unknown",t.Waiting="waiting",t.Progress="progress",t.Error="error",t.Success="success"})(rn||(rn={}));const S5=t=>"status"in t&&t.status===rn.Error;function A5(t,{publicKey:e,baseURL:n=Te.baseURL,signal:r,integration:i,userAgent:s,retryThrottledRequestMaxTimes:o=Te.retryThrottledRequestMaxTimes,retryNetworkErrorMaxTimes:a=Te.retryNetworkErrorMaxTimes}={}){return ns(()=>ts({method:"GET",headers:e?{"X-UC-User-Agent":Ks({publicKey:e,integration:i,userAgent:s})}:void 0,url:qr(n,"/from_url/status/",{jsonerrors:1,token:t}),signal:r}).then(({data:l,headers:c,request:h})=>{const f=Yr(JSON.parse(l));if("error"in f&&!S5(f))throw new un(f.error.content,f.error.errorCode,h,f,c);return f}),{retryNetworkErrorMaxTimes:a,retryThrottledRequestMaxTimes:o})}function x5(t,{publicKey:e,baseURL:n=Te.baseURL,jsonpCallback:r,secureSignature:i,secureExpire:s,signal:o,source:a,integration:l,userAgent:c,retryThrottledRequestMaxTimes:h=Te.retryThrottledRequestMaxTimes,retryNetworkErrorMaxTimes:f=Te.retryNetworkErrorMaxTimes}){return ns(()=>ts({method:"POST",headers:{"X-UC-User-Agent":Ks({publicKey:e,integration:l,userAgent:c})},url:qr(n,"/group/",{jsonerrors:1}),data:Vd({files:t,callback:r,pub_key:e,signature:i,expire:s,source:a}),signal:o}).then(({data:p,headers:w,request:E})=>{const S=Yr(JSON.parse(p));if("error"in S)throw new un(S.error.content,S.error.errorCode,E,S,w);return S}),{retryNetworkErrorMaxTimes:f,retryThrottledRequestMaxTimes:h})}function AI(t,{publicKey:e,baseURL:n=Te.baseURL,signal:r,source:i,integration:s,userAgent:o,retryThrottledRequestMaxTimes:a=Te.retryThrottledRequestMaxTimes,retryNetworkErrorMaxTimes:l=Te.retryNetworkErrorMaxTimes}){return ns(()=>ts({method:"GET",headers:{"X-UC-User-Agent":Ks({publicKey:e,integration:s,userAgent:o})},url:qr(n,"/info/",{jsonerrors:1,pub_key:e,file_id:t,source:i}),signal:r}).then(({data:c,headers:h,request:f})=>{const p=Yr(JSON.parse(c));if("error"in p)throw new un(p.error.content,p.error.errorCode,f,p,h);return p}),{retryThrottledRequestMaxTimes:a,retryNetworkErrorMaxTimes:l})}function k5(t,{publicKey:e,contentType:n,fileName:r,multipartChunkSize:i=Te.multipartChunkSize,baseURL:s="",secureSignature:o,secureExpire:a,store:l,signal:c,source:h="local",integration:f,userAgent:p,retryThrottledRequestMaxTimes:w=Te.retryThrottledRequestMaxTimes,retryNetworkErrorMaxTimes:E=Te.retryNetworkErrorMaxTimes,metadata:S}){return ns(()=>ts({method:"POST",url:qr(s,"/multipart/start/",{jsonerrors:1}),headers:{"X-UC-User-Agent":Ks({publicKey:e,integration:f,userAgent:p})},data:Vd({filename:r||bI,size:t,content_type:n||Nd,part_size:i,UPLOADCARE_STORE:Sy(l),UPLOADCARE_PUB_KEY:e,signature:o,expire:a,source:h,metadata:S}),signal:c}).then(({data:R,headers:T,request:_})=>{const C=Yr(JSON.parse(R));if("error"in C)throw new un(C.error.content,C.error.errorCode,_,C,T);return C.parts=Object.keys(C.parts).map(L=>C.parts[Number(L)]),C}),{retryThrottledRequestMaxTimes:w,retryNetworkErrorMaxTimes:E})}function P5(t,e,{contentType:n,signal:r,onProgress:i,retryThrottledRequestMaxTimes:s=Te.retryThrottledRequestMaxTimes,retryNetworkErrorMaxTimes:o=Te.retryNetworkErrorMaxTimes}){return ns(()=>ts({method:"PUT",url:e,data:t,onProgress:i,signal:r,headers:{"Content-Type":n||Nd}}).then(a=>(i&&i({isComputable:!0,value:1}),a)).then(({status:a})=>({code:a})),{retryThrottledRequestMaxTimes:s,retryNetworkErrorMaxTimes:o})}function R5(t,{publicKey:e,baseURL:n=Te.baseURL,source:r="local",signal:i,integration:s,userAgent:o,retryThrottledRequestMaxTimes:a=Te.retryThrottledRequestMaxTimes,retryNetworkErrorMaxTimes:l=Te.retryNetworkErrorMaxTimes}){return ns(()=>ts({method:"POST",url:qr(n,"/multipart/complete/",{jsonerrors:1}),headers:{"X-UC-User-Agent":Ks({publicKey:e,integration:s,userAgent:o})},data:Vd({uuid:t,UPLOADCARE_PUB_KEY:e,source:r}),signal:i}).then(({data:c,headers:h,request:f})=>{const p=Yr(JSON.parse(c));if("error"in p)throw new un(p.error.content,p.error.errorCode,f,p,h);return p}),{retryThrottledRequestMaxTimes:a,retryNetworkErrorMaxTimes:l})}function Ay(t,{publicKey:e,baseURL:n,source:r,integration:i,userAgent:s,retryThrottledRequestMaxTimes:o,retryNetworkErrorMaxTimes:a,signal:l,onProgress:c}){return EI({check:h=>AI(t,{publicKey:e,baseURL:n,signal:h,source:r,integration:i,userAgent:s,retryThrottledRequestMaxTimes:o,retryNetworkErrorMaxTimes:a}).then(f=>f.isReady?f:(c&&c({isComputable:!0,value:1}),!1)),signal:l})}function O5(t){return"defaultEffects"in t}class Sa{constructor(e,{baseCDN:n=Te.baseCDN,fileName:r}={}){V(this,"uuid");V(this,"name",null);V(this,"size",null);V(this,"isStored",null);V(this,"isImage",null);V(this,"mimeType",null);V(this,"cdnUrl",null);V(this,"s3Url",null);V(this,"originalFilename",null);V(this,"imageInfo",null);V(this,"videoInfo",null);V(this,"contentInfo",null);V(this,"metadata",null);V(this,"s3Bucket",null);V(this,"defaultEffects",null);const{uuid:i,s3Bucket:s}=e,o=qr(n,`${i}/`),a=s?qr(`https://${s}.s3.amazonaws.com/`,`${i}/${e.filename}`):null;this.uuid=i,this.name=r||e.filename,this.size=e.size,this.isStored=e.isStored,this.isImage=e.isImage,this.mimeType=e.mimeType,this.cdnUrl=o,this.originalFilename=e.originalFilename,this.imageInfo=e.imageInfo,this.videoInfo=e.videoInfo,this.contentInfo=e.contentInfo,this.metadata=e.metadata||null,this.s3Bucket=s||null,this.s3Url=a,O5(e)&&(this.defaultEffects=e.defaultEffects)}}const N5=(t,{publicKey:e,fileName:n,baseURL:r,secureSignature:i,secureExpire:s,store:o,contentType:a,signal:l,onProgress:c,source:h,integration:f,userAgent:p,retryThrottledRequestMaxTimes:w,retryNetworkErrorMaxTimes:E,baseCDN:S,metadata:R})=>C5(t,{publicKey:e,fileName:n,contentType:a,baseURL:r,secureSignature:i,secureExpire:s,store:o,signal:l,onProgress:c,source:h,integration:f,userAgent:p,retryThrottledRequestMaxTimes:w,retryNetworkErrorMaxTimes:E,metadata:R}).then(({file:T})=>Ay(T,{publicKey:e,baseURL:r,source:h,integration:f,userAgent:p,retryThrottledRequestMaxTimes:w,retryNetworkErrorMaxTimes:E,onProgress:c,signal:l})).then(T=>new Sa(T,{baseCDN:S})),L5=(t,{publicKey:e,fileName:n,baseURL:r,signal:i,onProgress:s,source:o,integration:a,userAgent:l,retryThrottledRequestMaxTimes:c,retryNetworkErrorMaxTimes:h,baseCDN:f})=>AI(t,{publicKey:e,baseURL:r,signal:i,source:o,integration:a,userAgent:l,retryThrottledRequestMaxTimes:c,retryNetworkErrorMaxTimes:h}).then(p=>new Sa(p,{baseCDN:f,fileName:n})).then(p=>(s&&s({isComputable:!0,value:1}),p)),D5=(t,{signal:e}={})=>{let n=null,r=null;const i=t.map(()=>new AbortController),s=o=>()=>{r=o,i.forEach((a,l)=>l!==o&&a.abort())};return Od(e,()=>{i.forEach(o=>o.abort())}),Promise.all(t.map((o,a)=>{const l=s(a);return Promise.resolve().then(()=>o({stopRace:l,signal:i[a].signal})).then(c=>(l(),c)).catch(c=>(n=c,null))})).then(o=>{if(r===null)throw n;return o[r]})};var M5=window.WebSocket;class V5{constructor(){V(this,"events",Object.create({}))}emit(e,n){var r;(r=this.events[e])==null||r.forEach(i=>i(n))}on(e,n){this.events[e]=this.events[e]||[],this.events[e].push(n)}off(e,n){n?this.events[e]=this.events[e].filter(r=>r!==n):this.events[e]=[]}}const U5=(t,e)=>t==="success"?{status:rn.Success,...e}:t==="progress"?{status:rn.Progress,...e}:{status:rn.Error,...e};class $5{constructor(e,n=3e4){V(this,"key");V(this,"disconnectTime");V(this,"ws");V(this,"queue",[]);V(this,"isConnected",!1);V(this,"subscribers",0);V(this,"emmitter",new V5);V(this,"disconnectTimeoutId",null);this.key=e,this.disconnectTime=n}connect(){if(this.disconnectTimeoutId&&clearTimeout(this.disconnectTimeoutId),!this.isConnected&&!this.ws){const e=`wss://ws.pusherapp.com/app/${this.key}?protocol=5&client=js&version=1.12.2`;this.ws=new M5(e),this.ws.addEventListener("error",n=>{this.emmitter.emit("error",new Error(n.message))}),this.emmitter.on("connected",()=>{this.isConnected=!0,this.queue.forEach(n=>this.send(n.event,n.data)),this.queue=[]}),this.ws.addEventListener("message",n=>{const r=JSON.parse(n.data.toString());switch(r.event){case"pusher:connection_established":{this.emmitter.emit("connected",void 0);break}case"pusher:ping":{this.send("pusher:pong",{});break}case"progress":case"success":case"fail":this.emmitter.emit(r.channel,U5(r.event,JSON.parse(r.data)))}})}}disconnect(){const e=()=>{var n;(n=this.ws)==null||n.close(),this.ws=void 0,this.isConnected=!1};this.disconnectTime?this.disconnectTimeoutId=setTimeout(()=>{e()},this.disconnectTime):e()}send(e,n){var i;const r=JSON.stringify({event:e,data:n});(i=this.ws)==null||i.send(r)}subscribe(e,n){this.subscribers+=1,this.connect();const r=`task-status-${e}`,i={event:"pusher:subscribe",data:{channel:r}};this.emmitter.on(r,n),this.isConnected?this.send(i.event,i.data):this.queue.push(i)}unsubscribe(e){this.subscribers-=1;const n=`task-status-${e}`,r={event:"pusher:unsubscribe",data:{channel:n}};this.emmitter.off(n),this.isConnected?this.send(r.event,r.data):this.queue=this.queue.filter(i=>i.data.channel!==n),this.subscribers===0&&this.disconnect()}onError(e){return this.emmitter.on("error",e),()=>this.emmitter.off("error",e)}}let jf=null;const xy=t=>{if(!jf){const e=typeof window>"u"?0:3e4;jf=new $5(t,e)}return jf},F5=t=>{xy(t).connect()};function j5({token:t,publicKey:e,baseURL:n,integration:r,userAgent:i,retryThrottledRequestMaxTimes:s,retryNetworkErrorMaxTimes:o,onProgress:a,signal:l}){return EI({check:c=>A5(t,{publicKey:e,baseURL:n,integration:r,userAgent:i,retryThrottledRequestMaxTimes:s,retryNetworkErrorMaxTimes:o,signal:c}).then(h=>{switch(h.status){case rn.Error:return new un(h.error,h.errorCode);case rn.Waiting:return!1;case rn.Unknown:return new un(`Token "${t}" was not found.`);case rn.Progress:return a&&(h.total==="unknown"?a({isComputable:!1}):a({isComputable:!0,value:h.done/h.total})),!1;case rn.Success:return a&&a({isComputable:!0,value:h.done/h.total}),h;default:throw new Error("Unknown status")}}),signal:l})}const z5=({token:t,pusherKey:e,signal:n,onProgress:r})=>new Promise((i,s)=>{const o=xy(e),a=o.onError(s),l=()=>{a(),o.unsubscribe(t)};Od(n,()=>{l(),s(new js("pusher cancelled"))}),o.subscribe(t,c=>{switch(c.status){case rn.Progress:{r&&(c.total==="unknown"?r({isComputable:!1}):r({isComputable:!0,value:c.done/c.total}));break}case rn.Success:{l(),r&&r({isComputable:!0,value:c.done/c.total}),i(c);break}case rn.Error:l(),s(new un(c.msg,c.error_code))}})}),B5=(t,{publicKey:e,fileName:n,baseURL:r,baseCDN:i,checkForUrlDuplicates:s,saveUrlForRecurrentUploads:o,secureSignature:a,secureExpire:l,store:c,signal:h,onProgress:f,source:p,integration:w,userAgent:E,retryThrottledRequestMaxTimes:S,pusherKey:R=Te.pusherKey,metadata:T})=>Promise.resolve(F5(R)).then(()=>I5(t,{publicKey:e,fileName:n,baseURL:r,checkForUrlDuplicates:s,saveUrlForRecurrentUploads:o,secureSignature:a,secureExpire:l,store:c,signal:h,source:p,integration:w,userAgent:E,retryThrottledRequestMaxTimes:S,metadata:T})).catch(_=>{const C=xy(R);return C==null||C.disconnect(),Promise.reject(_)}).then(_=>_.type===_m.FileInfo?_:D5([({signal:C})=>j5({token:_.token,publicKey:e,baseURL:r,integration:w,userAgent:E,retryThrottledRequestMaxTimes:S,onProgress:f,signal:C}),({signal:C})=>z5({token:_.token,pusherKey:R,signal:C,onProgress:f})],{signal:h})).then(_=>{if(_ instanceof un)throw _;return _}).then(_=>Ay(_.uuid,{publicKey:e,baseURL:r,integration:w,userAgent:E,retryThrottledRequestMaxTimes:S,onProgress:f,signal:h})).then(_=>new Sa(_,{baseCDN:i})),zf=new WeakMap,H5=async t=>{if(zf.has(t))return zf.get(t);const e=await fetch(t.uri).then(n=>n.blob());return zf.set(t,e),e},xI=async t=>{if(Dd(t)||Ld(t))return t.size;if(Md(t))return(await H5(t)).size;throw new Error("Unknown file type. Cannot determine file size.")},W5=(t,e=Te.multipartMinFileSize)=>t>=e,kI=t=>{const e="[a-f0-9]{8}-[a-f0-9]{4}-[a-f0-9]{4}-[a-f0-9]{4}-[a-f0-9]{12}",n=new RegExp(e);return!Ia(t)&&n.test(t)},ky=t=>{const e="^(?:\\w+:)?\\/\\/([^\\s\\.]+\\.\\S{2}|localhost[\\:?\\d]*)\\S*$",n=new RegExp(e);return!Ia(t)&&n.test(t)},q5=(t,e)=>new Promise((n,r)=>{const i=[];let s=!1,o=e.length;const a=[...e],l=()=>{const c=e.length-a.length,h=a.shift();h&&h().then(f=>{s||(i[c]=f,o-=1,o?l():n(i))}).catch(f=>{s=!0,r(f)})};for(let c=0;c<t;c++)l()}),G5=(t,e,n,r)=>{const i=r*e,s=Math.min(i+r,n);return t.slice(i,s)},K5=async(t,e,n)=>r=>G5(t,r,e,n),Q5=(t,e,{publicKey:n,contentType:r,onProgress:i,signal:s,integration:o,retryThrottledRequestMaxTimes:a,retryNetworkErrorMaxTimes:l})=>P5(t,e,{publicKey:n,contentType:r,onProgress:i,signal:s,integration:o,retryThrottledRequestMaxTimes:a,retryNetworkErrorMaxTimes:l}),X5=async(t,{publicKey:e,fileName:n,fileSize:r,baseURL:i,secureSignature:s,secureExpire:o,store:a,signal:l,onProgress:c,source:h,integration:f,userAgent:p,retryThrottledRequestMaxTimes:w,retryNetworkErrorMaxTimes:E,contentType:S,multipartChunkSize:R=Te.multipartChunkSize,maxConcurrentRequests:T=Te.maxConcurrentRequests,baseCDN:_,metadata:C})=>{const L=r??await xI(t);let F;const z=(g,y)=>{if(!c)return;F||(F=Array(g).fill(0));const b=I=>I.reduce((k,P)=>k+P,0);return I=>{I.isComputable&&(F[y]=I.value,c({isComputable:!0,value:b(F)/g}))}};return S||(S=II(t)),k5(L,{publicKey:e,contentType:S,fileName:n||SI(t),baseURL:i,secureSignature:s,secureExpire:o,store:a,signal:l,source:h,integration:f,userAgent:p,retryThrottledRequestMaxTimes:w,retryNetworkErrorMaxTimes:E,metadata:C}).then(async({uuid:g,parts:y})=>{const b=await K5(t,L,R);return Promise.all([g,q5(T,y.map((I,k)=>()=>Q5(b(k),I,{publicKey:e,contentType:S,onProgress:z(y.length,k),signal:l,integration:f,retryThrottledRequestMaxTimes:w,retryNetworkErrorMaxTimes:E})))])}).then(([g])=>R5(g,{publicKey:e,baseURL:i,source:h,integration:f,userAgent:p,retryThrottledRequestMaxTimes:w,retryNetworkErrorMaxTimes:E})).then(g=>g.isReady?g:Ay(g.uuid,{publicKey:e,baseURL:i,source:h,integration:f,userAgent:p,retryThrottledRequestMaxTimes:w,retryNetworkErrorMaxTimes:E,onProgress:c,signal:l})).then(g=>new Sa(g,{baseCDN:_}))};async function PI(t,{publicKey:e,fileName:n,baseURL:r=Te.baseURL,secureSignature:i,secureExpire:s,store:o,signal:a,onProgress:l,source:c,integration:h,userAgent:f,retryThrottledRequestMaxTimes:p,retryNetworkErrorMaxTimes:w,contentType:E,multipartMinFileSize:S,multipartChunkSize:R,maxConcurrentRequests:T,baseCDN:_=Te.baseCDN,checkForUrlDuplicates:C,saveUrlForRecurrentUploads:L,pusherKey:F,metadata:z}){if(Ia(t)){const g=await xI(t);return W5(g,S)?X5(t,{publicKey:e,contentType:E,multipartChunkSize:R,fileSize:g,fileName:n,baseURL:r,secureSignature:i,secureExpire:s,store:o,signal:a,onProgress:l,source:c,integration:h,userAgent:f,maxConcurrentRequests:T,retryThrottledRequestMaxTimes:p,retryNetworkErrorMaxTimes:w,baseCDN:_,metadata:z}):N5(t,{publicKey:e,fileName:n,contentType:E,baseURL:r,secureSignature:i,secureExpire:s,store:o,signal:a,onProgress:l,source:c,integration:h,userAgent:f,retryThrottledRequestMaxTimes:p,retryNetworkErrorMaxTimes:w,baseCDN:_,metadata:z})}if(ky(t))return B5(t,{publicKey:e,fileName:n,baseURL:r,baseCDN:_,checkForUrlDuplicates:C,saveUrlForRecurrentUploads:L,secureSignature:i,secureExpire:s,store:o,signal:a,onProgress:l,source:c,integration:h,userAgent:f,retryThrottledRequestMaxTimes:p,retryNetworkErrorMaxTimes:w,pusherKey:F,metadata:z});if(kI(t))return L5(t,{publicKey:e,fileName:n,baseURL:r,signal:a,onProgress:l,source:c,integration:h,userAgent:f,retryThrottledRequestMaxTimes:p,retryNetworkErrorMaxTimes:w,baseCDN:_});throw new TypeError(`File uploading from "${t}" is not supported`)}class Y5{constructor(e,{baseCDN:n=Te.baseCDN}={}){V(this,"uuid");V(this,"filesCount");V(this,"totalSize");V(this,"isStored");V(this,"isImage");V(this,"cdnUrl");V(this,"files");V(this,"createdAt");V(this,"storedAt",null);this.uuid=e.id,this.filesCount=e.filesCount;const r=e.files.filter(Boolean);this.totalSize=Object.values(r).reduce((i,s)=>i+s.size,0),this.isStored=!!e.datetimeStored,this.isImage=!!Object.values(r).filter(i=>i.isImage).length,this.cdnUrl=e.cdnUrl,this.files=r.map(i=>new Sa(i,{baseCDN:n})),this.createdAt=e.datetimeCreated,this.storedAt=e.datetimeStored}}const J5=t=>{for(const e of t)if(!Ia(e))return!1;return!0},Z5=t=>{for(const e of t)if(!kI(e))return!1;return!0},eV=t=>{for(const e of t)if(!ky(e))return!1;return!0};function tV(t,{publicKey:e,fileName:n,baseURL:r=Te.baseURL,secureSignature:i,secureExpire:s,store:o,signal:a,onProgress:l,source:c,integration:h,userAgent:f,retryThrottledRequestMaxTimes:p,retryNetworkErrorMaxTimes:w,contentType:E,multipartChunkSize:S=Te.multipartChunkSize,baseCDN:R=Te.baseCDN,checkForUrlDuplicates:T,saveUrlForRecurrentUploads:_,jsonpCallback:C}){if(!J5(t)&&!eV(t)&&!Z5(t))throw new TypeError(`Group uploading from "${t}" is not supported`);let L,F=!0;const z=t.length,g=(y,b)=>{if(!l)return;L||(L=Array(y).fill(0));const I=k=>k.reduce((P,A)=>P+A)/y;return k=>{if(!k.isComputable||!F){F=!1,l({isComputable:!1});return}L[b]=k.value,l({isComputable:!0,value:I(L)})}};return Promise.all(t.map((y,b)=>Ia(y)||ky(y)?PI(y,{publicKey:e,fileName:n,baseURL:r,secureSignature:i,secureExpire:s,store:o,signal:a,onProgress:g(z,b),source:c,integration:h,userAgent:f,retryThrottledRequestMaxTimes:p,retryNetworkErrorMaxTimes:w,contentType:E,multipartChunkSize:S,baseCDN:R,checkForUrlDuplicates:T,saveUrlForRecurrentUploads:_}).then(I=>I.uuid):y)).then(y=>x5(y,{publicKey:e,baseURL:r,jsonpCallback:C,secureSignature:i,secureExpire:s,signal:a,source:c,integration:h,userAgent:f,retryThrottledRequestMaxTimes:p,retryNetworkErrorMaxTimes:w}).then(b=>new Y5(b,{baseCDN:R})).then(b=>(l&&l({isComputable:!0,value:1}),b)))}class nV{constructor(e){V(this,"_concurrency",1);V(this,"_pending",[]);V(this,"_running",0);V(this,"_resolvers",new Map);V(this,"_rejectors",new Map);this._concurrency=e}_run(){const e=this._concurrency-this._running;for(let n=0;n<e;n++){const r=this._pending.shift();if(!r)return;const i=this._resolvers.get(r),s=this._rejectors.get(r);if(!i||!s)throw new Error("Unexpected behavior: resolver or rejector is undefined");this._running+=1,r().finally(()=>{this._resolvers.delete(r),this._rejectors.delete(r),this._running-=1,this._run()}).then(o=>i(o)).catch(o=>s(o))}}add(e){return new Promise((n,r)=>{this._resolvers.set(e,n),this._rejectors.set(e,r),this._pending.push(e),this._run()})}get pending(){return this._pending.length}get running(){return this._running}set concurrency(e){this._concurrency=e,this._run()}get concurrency(){return this._concurrency}}const RI=()=>({}),OI=t=>({...RI(),"*currentActivity":"","*currentActivityParams":{},"*history":[],"*historyBack":null,"*closeModal":()=>{t.set$({"*modalActive":!1,"*currentActivity":""})}}),NI=t=>({...OI(t),"*commonProgress":0,"*uploadList":[],"*focusedEntry":null,"*uploadMetadata":null,"*uploadQueue":new nV(1),"*uploadCollection":null,"*collectionErrors":[],"*collectionState":null,"*groupInfo":null,"*uploadTrigger":new Set}),Py={"locale-id":"en","social-source-lang":"en","upload-file":"Upload file","upload-files":"Upload files","choose-file":"Choose file","choose-files":"Choose files","drop-files-here":"Drop files here","select-file-source":"Select file source",selected:"Selected",upload:"Upload","add-more":"Add more",cancel:"Cancel","start-from-cancel":"Cancel",clear:"Clear","camera-shot":"Shot","upload-url":"Import","upload-url-placeholder":"Paste link here","edit-image":"Edit image","edit-detail":"Details",back:"Back",done:"Done",ok:"Ok","remove-from-list":"Remove",no:"No",yes:"Yes","confirm-your-action":"Confirm your action","are-you-sure":"Are you sure?","selected-count":"Selected:","upload-error":"Upload error","validation-error":"Validation error","no-files":"No files selected",browse:"Browse","not-uploaded-yet":"Not uploaded yet...",file__one:"file",file__other:"files",error__one:"error",error__other:"errors","header-uploading":"Uploading {{count}} {{plural:file(count)}}","header-failed":"{{count}} {{plural:error(count)}}","header-succeed":"{{count}} {{plural:file(count)}} uploaded","header-total":"{{count}} {{plural:file(count)}} selected","src-type-local":"From device","src-type-from-url":"From link","src-type-camera":"Camera","src-type-draw":"Draw","src-type-facebook":"Facebook","src-type-dropbox":"Dropbox","src-type-gdrive":"Google Drive","src-type-gphotos":"Google Photos","src-type-instagram":"Instagram","src-type-flickr":"Flickr","src-type-vk":"VK","src-type-evernote":"Evernote","src-type-box":"Box","src-type-onedrive":"Onedrive","src-type-huddle":"Huddle","src-type-other":"Other","caption-from-url":"Import from link","caption-camera":"Camera","caption-draw":"Draw","caption-edit-file":"Edit file","file-no-name":"No name...","toggle-fullscreen":"Toggle fullscreen","toggle-guides":"Toggle guides",rotate:"Rotate","flip-vertical":"Flip vertical","flip-horizontal":"Flip horizontal",apply:"Apply",brightness:"Brightness",contrast:"Contrast",saturation:"Saturation",exposure:"Exposure",gamma:"Gamma",vibrance:"Vibrance",warmth:"Warmth",enhance:"Enhance",original:"Original",resize:"Resize image",crop:"Crop","select-color":"Select color",text:"Text",draw:"Draw","cancel-edit":"Cancel edit","tab-view":"Preview","tab-details":"Details","file-name":"Name","file-size":"Size","cdn-url":"CDN URL","file-size-unknown":"Unknown","camera-permissions-denied":"Camera access denied","camera-permissions-prompt":"Please allow access to the camera","camera-permissions-request":"Request access","files-count-limit-error-title":"Files count limit overflow","files-count-limit-error-too-few":"Youve chosen {{total}} {{plural:file(total)}}. At least {{min}} {{plural:file(min)}} required.","files-count-limit-error-too-many":"Youve chosen too many files. {{max}} {{plural:file(max)}} is maximum.","files-max-size-limit-error":"File is too big. Max file size is {{maxFileSize}}.","has-validation-errors":"File validation error ocurred. Please, check your files before upload.","images-only-accepted":"Only image files are accepted.","file-type-not-allowed":"Uploading of these file types is not allowed.","some-files-were-not-uploaded":"Some files were not uploaded."},Uh=new Map,wm=new Map,LI=(t,e)=>{Uh.has(t)&&console.log(`Locale ${t} is already defined. Overwriting...`),Uh.set(t,{...Py,...e})},rV=(t,e)=>{wm.set(t,e)},DI=(t,e)=>{typeof e=="function"?rV(t,e):LI(t,e)},iV=async t=>{if(!Uh.has(t)){if(!wm.has(t))throw new Error(`Locale ${t} is not defined`);const n=await wm.get(t)();LI(t,n)}return Uh.get(t)};DI("en",Py);const Ss=t=>`*l10n/${t}`,sV="en";class oV{constructor(e){V(this,"_blockInstance",null);V(this,"_localeName","");V(this,"_callbacks",new Set);V(this,"_boundBlocks",new Map);this._blockInstance=e;for(let[n,r]of Object.entries(Py))this._blockInstance.add(Ss(n),r,!1);setTimeout(()=>{e.subConfigValue("localeName",async n=>{var s;if(!this._blockInstance||!n)return;this._localeName=n;const r=await iV(n);if(n!==sV&&this._localeName!==n)return;const i=(s=this._blockInstance.cfg.localeDefinitionOverride)==null?void 0:s[n];for(const[o,a]of Object.entries(r)){const l=i==null?void 0:i[o];this._blockInstance.add(Ss(o),l??a,!0);for(const c of this._callbacks)c()}}),e.subConfigValue("localeDefinitionOverride",n=>{var i;if(!n)return;const r=n[this._localeName];if(r)for(const[s,o]of Object.entries(r)){(i=this._blockInstance)==null||i.add(Ss(s),o,!0);for(const a of this._callbacks)a()}})})}onLocaleChange(e){const n=Dn(e,0);return this._callbacks.add(n),()=>{this._callbacks.delete(n)}}bindL10n(e,n,r){var s,o,a;e.$[n]=r(),this._boundBlocks.has(e)||this._boundBlocks.set(e,new Map),(o=(s=this._boundBlocks.get(e))==null?void 0:s.get(n))==null||o();const i=this.onLocaleChange(()=>{e.$[n]=r()});(a=this._boundBlocks.get(e))==null||a.set(n,i)}destroyL10nBindings(e){const n=this._boundBlocks.get(e);if(n){for(const r of n.values())r();this._boundBlocks.delete(e)}}destroy(){this._callbacks.clear()}}function aV(t,e){[...t.querySelectorAll("[l10n]")].forEach(n=>{let r=n.getAttribute("l10n");if(!r)return;let i="textContent",s=!1;if(r.includes(":")){const l=r.split(":");i=l[0],r=l[1],i.startsWith("@")&&(i=i.slice(1),s=!0)}const o=r;e.has(o)&&e.sub(o,l=>{if(!l)return;e.l10nProcessorSubs.has(o)||e.l10nProcessorSubs.set(o,new Set);const c=e.l10nProcessorSubs.get(o);c==null||c.forEach(p=>{p.remove(),c.delete(p),e.allSubs.delete(p)});const h=Ss(l).replace("*","");e.nodeCtx.has(h)||e.nodeCtx.add(h,l);const f=e.nodeCtx.sub(h,()=>{n[i]=e.l10n(l)});c==null||c.add(f),e.allSubs.add(f),n.removeAttribute("l10n")});const a=Ss(r);e.has(a)||e.add(a,""),e.sub(a,()=>{r=r,s?n.setAttribute(i,e.l10n(r)):n[i]=e.l10n(r)}),n.removeAttribute("l10n")})}const Sn=t=>`*cfg/${t}`,Ry="blocks",Oy="0.39.1",MI=t=>{if(typeof t!="string"||!t)return"";let e=t.trim();return e.startsWith("-/")?e=e.slice(2):e.startsWith("/")&&(e=e.slice(1)),e.endsWith("/")&&(e=e.slice(0,e.length-1)),e},Ny=(...t)=>t.filter(e=>typeof e=="string"&&e).map(e=>MI(e)).join("/-/"),Wi=(...t)=>{let e=Ny(...t);return e?`-/${e}/`:""};function VI(t){let e=new URL(t),n=e.pathname+e.search+e.hash,r=n.lastIndexOf("http"),i=n.lastIndexOf("/"),s="";return r>=0?s=n.slice(r):i>=0&&(s=n.slice(i+1)),s}function lV(t){let e=new URL(t),{pathname:n}=e;const r=n.indexOf("/"),i=n.indexOf("/",r+1);return n.substring(r+1,i)}function uV(t){let e=UI(t),n=new URL(e),r=n.pathname.indexOf("/-/");return r===-1?[]:n.pathname.substring(r).split("/-/").filter(Boolean).map(s=>MI(s))}function UI(t){let e=new URL(t),n=VI(t),r=$I(n)?FI(n).pathname:n;return e.pathname=e.pathname.replace(r,""),e.search="",e.hash="",e.toString()}function $I(t){return t.startsWith("http")}function FI(t){let e=new URL(t);return{pathname:e.origin+e.pathname||"",search:e.search||"",hash:e.hash||""}}const xn=(t,e,n)=>{let r=new URL(UI(t));if(n=n||VI(t),r.pathname.startsWith("//")&&(r.pathname=r.pathname.replace("//","/")),$I(n)){let i=FI(n);r.pathname=r.pathname+(e||"")+(i.pathname||""),r.search=i.search,r.hash=i.hash}else r.pathname=r.pathname+(e||"")+(n||"");return r.toString()},uu=(t,e)=>{let n=new URL(t);return n.pathname=e+"/",n.toString()},Gr=(t,e=",")=>t.trim().split(e).map(n=>n.trim()).filter(n=>n.length>0),En=Object.freeze({brightness:0,exposure:0,gamma:100,contrast:0,saturation:0,vibrance:0,warmth:0,enhance:0,filter:0,rotate:0,mirror:!1,flip:!1,crop:void 0}),jI=["enhance","brightness","exposure","gamma","contrast","saturation","vibrance","warmth","filter","mirror","flip","rotate","crop"];function cV(t,e){if(typeof e=="number"){const n=e;return En[t]!==n?`${t}/${n}`:""}if(typeof e=="boolean"){const n=e;return En[t]!==n?`${t}`:""}if(t==="filter"&&e){const{name:n,amount:r}=e;return En.filter===r?"":`${t}/${n}/${r}`}if(t==="crop"&&e){let{dimensions:n,coords:r}=e;return`${t}/${n.join("x")}/${r.join(",")}`}return""}function Ud(t){return Ny(...jI.filter(e=>typeof t[e]<"u"&&t[e]!==null).map(e=>{let n=t[e];return cV(e,n)}).filter(e=>!!e))}const zI=Ny("format/auto","progressive/yes"),Cr=([t])=>typeof t<"u"?Number(t):void 0,Ow=()=>!0,hV=([t,e])=>({name:t,amount:typeof e<"u"?Number(e):100}),dV=([t,e])=>{if(!/\d+x\d+/.test(t)||!/\d+,\d+/.test(e))throw new Error("Crop by aspect ratio, percentage or alignment shortcuts is not supported.");return{dimensions:Gr(t,"x").map(Number),coords:Gr(e).map(Number)}},fV=Object.freeze({enhance:Cr,brightness:Cr,exposure:Cr,gamma:Cr,contrast:Cr,saturation:Cr,vibrance:Cr,warmth:Cr,filter:hV,mirror:Ow,flip:Ow,rotate:Cr,crop:dV});function pV(t){const e={};for(const n of t){const[r,...i]=n.split("/");if(!jI.includes(r))continue;const s=r,o=fV[s];try{const a=o(i);e[s]=a}catch(a){console.warn([`Failed to parse URL operation "${n}". It will be ignored.`,a instanceof Error?`Error message: "${a.message}"`:a,"If you need this functionality, please feel free to open an issue at https://github.com/uploadcare/blocks/issues/new"].join(`
`))}}return e}const Kt=Object.freeze({CROP:"crop",TUNING:"tuning",FILTERS:"filters"}),dr=[Kt.CROP,Kt.TUNING,Kt.FILTERS],mV=["brightness","exposure","gamma","contrast","saturation","vibrance","warmth","enhance"],gV=["adaris","briaril","calarel","carris","cynarel","cyren","elmet","elonni","enzana","erydark","fenralan","ferand","galen","gavin","gethriel","iorill","iothari","iselva","jadis","lavra","misiara","namala","nerion","nethari","pamaya","sarnar","sedis","sewen","sorahel","sorlen","tarian","thellassan","varriel","varven","vevera","virkas","yedis","yllara","zatvel","zevcen"],yV=["rotate","mirror","flip"],ua=Object.freeze({brightness:{zero:En.brightness,range:[-100,100],keypointsNumber:2},exposure:{zero:En.exposure,range:[-500,500],keypointsNumber:2},gamma:{zero:En.gamma,range:[0,1e3],keypointsNumber:2},contrast:{zero:En.contrast,range:[-100,500],keypointsNumber:2},saturation:{zero:En.saturation,range:[-100,500],keypointsNumber:1},vibrance:{zero:En.vibrance,range:[-100,500],keypointsNumber:1},warmth:{zero:En.warmth,range:[-100,100],keypointsNumber:1},enhance:{zero:En.enhance,range:[0,100],keypointsNumber:1},filter:{zero:En.filter,range:[0,100],keypointsNumber:1}}),vV=t=>t?t.split(",").map(e=>e.trim()):[],Ly=t=>t?t.join(","):"",_V="https://ucarecdn.com",wV="https://upload.uploadcare.com",EV="https://social.uploadcare.com",Vi={pubkey:"",multiple:!0,multipleMin:0,multipleMax:Number.MAX_SAFE_INTEGER,confirmUpload:!1,imgOnly:!1,accept:"",externalSourcesPreferredTypes:"",store:"auto",cameraMirror:!1,cameraCapture:"",sourceList:"local, url, camera, dropbox, gdrive",cloudImageEditorTabs:Ly(dr),maxLocalFileSizeBytes:0,thumbSize:76,showEmptyList:!1,useLocalImageEditor:!1,useCloudImageEditor:!0,removeCopyright:!1,cropPreset:"",imageShrink:"",modalScrollLock:!0,modalBackdropStrokes:!1,sourceListWrap:!0,remoteTabSessionKey:"",cdnCname:_V,baseUrl:wV,socialBaseUrl:EV,secureSignature:"",secureExpire:"",secureDeliveryProxy:"",retryThrottledRequestMaxTimes:1,multipartMinFileSize:26214400,multipartChunkSize:5242880,maxConcurrentRequests:10,multipartMaxConcurrentRequests:4,multipartMaxAttempts:3,checkForUrlDuplicates:!1,saveUrlForRecurrentUploads:!1,groupOutput:!1,userAgentIntegration:"",debug:!1,metadata:null,localeName:"en",localeDefinitionOverride:null},Bf="lr-";class Oe extends Rd{constructor(){super();V(this,"requireCtxName",!1);V(this,"allowCustomTemplate",!0);V(this,"activityType",null);V(this,"init$",RI());this.l10nProcessorSubs=new Map,this.addTemplateProcessor(aV)}l10n(n,r={}){if(!n)return"";let i=this.$[Ss(n)]||n,s=t5(i);for(let a of s)r[a.variable]=this.pluralize(a.pluralKey,Number(r[a.countVariable]));return vm(i,r)}pluralize(n,r){const i=this.l10n("locale-id")||"en",s=vI(i,r);return this.l10n(`${n}__${s}`)}bindL10n(n,r){var i;(i=this.localeManager)==null||i.bindL10n(this,n,r)}emit(n,r,i){const s=this.has("*eventEmitter")&&this.$["*eventEmitter"];s&&s.emit(n,r,i)}hasBlockInCtx(n){let r=this.$["*blocksRegistry"];for(let i of r)if(n(i))return!0;return!1}setOrAddState(n,r){this.add$({[n]:r},!0)}setActivity(n){if(this.hasBlockInCtx(r=>r.activityType===n)){this.$["*currentActivity"]=n;return}console.warn(`Activity type "${n}" not found in the context`)}connectedCallback(){const n=this.constructor.className;n&&this.classList.toggle(`${Bf}${n}`,!0),this.hasAttribute("retpl")&&(this.constructor.template=null,this.processInnerHtml=!0),this.requireCtxName?n5({element:this,attribute:"ctx-name",onSuccess:()=>{super.connectedCallback()},onTimeout:()=>{console.error("Attribute `ctx-name` is required and it is not set.")}}):super.connectedCallback(),Vh.registerClient(this)}disconnectedCallback(){super.disconnectedCallback(),Vh.unregisterClient(this)}initCallback(){this.has("*blocksRegistry")||this.add("*blocksRegistry",new Set),this.$["*blocksRegistry"].add(this),this.has("*eventEmitter")||this.add("*eventEmitter",new J3(this.debugPrint.bind(this))),this.has("*localeManager")||this.add("*localeManager",new oV(this)),this.sub(Ss("locale-id"),r=>{this.style.direction=Z3(r)})}get localeManager(){return this.has("*localeManager")?this.$["*localeManager"]:null}destroyCallback(){var r;let n=this.$["*blocksRegistry"];n.delete(this),(r=this.localeManager)==null||r.destroyL10nBindings(this),this.l10nProcessorSubs=new Map,xe.deleteCtx(this),n.size===0&&setTimeout(()=>{this.destroyCtxCallback()},0)}destroyCtxCallback(){var n;xe.deleteCtx(this.ctxName),(n=this.localeManager)==null||n.destroy()}fileSizeFmt(n,r=2){let i=["B","KB","MB","GB","TB"];if(n===0)return`0 ${i[0]}`;let s=1024,o=r<0?0:r,a=Math.floor(Math.log(n)/Math.log(s));return parseFloat((n/s**a).toFixed(o))+" "+i[a]}proxyUrl(n){let r=this.cfg.secureDeliveryProxy;return r?vm(r,{previewUrl:n},{transform:i=>window.encodeURIComponent(i)}):n}get cfg(){if(!this.__cfgProxy){let n=Object.create(null);this.__cfgProxy=new Proxy(n,{set:(r,i,s)=>{if(typeof i!="string")return!1;const o=Sn(i);return this.has(o)||this.add(o,Vi[i]),this.$[o]=s,!0},get:(r,i)=>{const s=Sn(i);return this.has(s)||this.add(s,Vi[i]),this.$[Sn(i)]}})}return this.__cfgProxy}subConfigValue(n,r){const i=Sn(n);this.has(i)||this.add(i,Vi[n]),this.sub(i,r)}debugPrint(...n){if(!this.cfg.debug)return;let r=n;if(typeof(n==null?void 0:n[0])=="function"){const i=n[0];r=i()}console.log(`[${this.ctxName}]`,...r)}static reg(n){if(!n){super.reg();return}super.reg(n.startsWith(Bf)?n:Bf+n)}}V(Oe,"StateConsumerScope",null),V(Oe,"className","");const Nw="active",rl="___ACTIVITY_IS_ACTIVE___",Sr=class Sr extends Oe{constructor(){super(...arguments);V(this,"historyTracked",!1);V(this,"init$",OI(this));V(this,"_debouncedHistoryFlush",Dn(this._historyFlush.bind(this),10))}_deactivate(){var r;let n=Sr._activityCallbacks.get(this);this[rl]=!1,this.removeAttribute(Nw),(r=n==null?void 0:n.deactivateCallback)==null||r.call(n)}_activate(){var r;let n=Sr._activityCallbacks.get(this);this.$["*historyBack"]=this.historyBack.bind(this),this[rl]=!0,this.setAttribute(Nw,""),(r=n==null?void 0:n.activateCallback)==null||r.call(n),this._debouncedHistoryFlush(),this.emit(tt.ACTIVITY_CHANGE,{activity:this.activityType})}initCallback(){super.initCallback(),this.hasAttribute("current-activity")&&this.sub("*currentActivity",n=>{this.setAttribute("current-activity",n)}),this.activityType&&(this.hasAttribute("activity")||this.setAttribute("activity",this.activityType),this.sub("*currentActivity",n=>{this.activityType!==n&&this[rl]?this._deactivate():this.activityType===n&&!this[rl]&&this._activate(),n||(this.$["*history"]=[])}),this.has("*modalActive")&&this.sub("*modalActive",n=>{!n&&this.activityType===this.$["*currentActivity"]&&(this.$["*currentActivity"]=null)}))}_historyFlush(){let n=this.$["*history"];n&&(n.length>10&&(n=n.slice(n.length-11,n.length-1)),this.historyTracked&&n[n.length-1]!==this.activityType&&n.push(this.activityType),this.$["*history"]=n)}_isActivityRegistered(){return this.activityType&&Sr._activityCallbacks.has(this)}get isActivityActive(){return this[rl]}get couldOpenActivity(){return!0}registerActivity(n,r={}){const{onActivate:i,onDeactivate:s}=r;Sr._activityCallbacks.set(this,{activateCallback:i,deactivateCallback:s})}unregisterActivity(){this.isActivityActive&&this._deactivate(),Sr._activityCallbacks.delete(this)}destroyCallback(){super.destroyCallback(),this._isActivityRegistered()&&this.unregisterActivity();const n=this.$["*currentActivity"];!![...this.$["*blocksRegistry"]].find(s=>s instanceof Sr&&s.activityType===n)||(this.$["*currentActivity"]=null)}get activityKey(){return this.ctxName+this.activityType}get activityParams(){return this.$["*currentActivityParams"]}get initActivity(){return this.getCssData("--cfg-init-activity")}get doneActivity(){return this.getCssData("--cfg-done-activity")}historyBack(){let n=this.$["*history"];if(n){let r=n.pop();for(;r===this.activityType;)r=n.pop();let i=!!r;if(r){const o=[...this.$["*blocksRegistry"]].find(a=>a.activityType===r);i=(o==null?void 0:o.couldOpenActivity)??!1}r=i?r:void 0,this.$["*currentActivity"]=r,this.$["*history"]=n,r||this.setOrAddState("*modalActive",!1)}}};V(Sr,"_activityCallbacks",new Map);let fe=Sr;fe.activities=Object.freeze({START_FROM:"start-from",CAMERA:"camera",DRAW:"draw",UPLOAD_LIST:"upload-list",URL:"url",CONFIRMATION:"confirmation",CLOUD_IMG_EDIT:"cloud-image-edit",EXTERNAL:"external",DETAILS:"details"});const bV=20,Em=24,yl=34,BI=3,ir=BI/2,us=1,_c=100/3,ge=1,Lw=24,TV=6;function yo(t,e){for(let n in e)t.setAttributeNS(null,n,e[n].toString())}function $n(t,e={}){let n=document.createElementNS("http://www.w3.org/2000/svg",t);return yo(n,e),n}function CV(t,e,n){let{x:r,y:i,width:s,height:o}=t,a=e.includes("w")?0:1,l=e.includes("n")?0:1,c=[-1,1][a],h=[-1,1][l],f=[r+a*s+ir*c,i+l*o+ir*h-Em*n*h],p=[r+a*s+ir*c,i+l*o+ir*h],w=[r+a*s-Em*n*c+ir*c,i+l*o+ir*h];return{d:`M ${f[0]} ${f[1]} L ${p[0]} ${p[1]} L ${w[0]} ${w[1]}`,center:p}}function IV(t,e,n){let{x:r,y:i,width:s,height:o}=t,a=["n","s"].includes(e)?.5:{w:0,e:1}[e],l=["w","e"].includes(e)?.5:{n:0,s:1}[e],c=[-1,1][a],h=[-1,1][l],f,p;["n","s"].includes(e)?(f=[r+a*s-yl*n/2,i+l*o+ir*h],p=[r+a*s+yl*n/2,i+l*o+ir*h]):(f=[r+a*s+ir*c,i+l*o-yl*n/2],p=[r+a*s+ir*c,i+l*o+yl*n/2]);let w=`M ${f[0]} ${f[1]} L ${p[0]} ${p[1]}`,E=[p[0]-(p[0]-f[0])/2,p[1]-(p[1]-f[1])/2];return{d:w,center:E}}function SV(t){return t===""?"move":["e","w"].includes(t)?"ew-resize":["n","s"].includes(t)?"ns-resize":["nw","se"].includes(t)?"nwse-resize":"nesw-resize"}function AV({rect:t,delta:[e,n],imageBox:r}){return $h({...t,x:t.x+e,y:t.y+n},r)}function $h(t,e){let{x:n}=t,{y:r}=t;return t.x<e.x?n=e.x:t.x+t.width>e.x+e.width&&(n=e.x+e.width-t.width),t.y<e.y?r=e.y:t.y+t.height>e.y+e.height&&(r=e.y+e.height-t.height),{...t,x:n,y:r}}function xV({rect:t,delta:e,aspectRatio:n,imageBox:r}){const[,i]=e;let{y:s,width:o,height:a}=t;s+=i,a-=i,n&&(o=a*n);let l=t.x+t.width/2-o/2;return s<=r.y&&(s=r.y,a=t.y+t.height-s,n&&(o=a*n,l=t.x+t.width/2-o/2)),l<=r.x&&(l=r.x,s=t.y+t.height-a),l+o>=r.x+r.width&&(l=Math.max(r.x,r.x+r.width-o),o=r.x+r.width-l,n&&(a=o/n),s=t.y+t.height-a),a<ge&&(a=ge,n&&(o=a*n,l=t.x+t.width/2-o/2),s=t.y+t.height-a),o<ge&&(o=ge,n&&(a=o/n,l=t.x+t.width/2-o/2),s=t.y+t.height-a),{x:l,y:s,width:o,height:a}}function kV({rect:t,delta:e,aspectRatio:n,imageBox:r}){const[i]=e;let{x:s,width:o,height:a}=t;s+=i,o-=i,n&&(a=o/n);let l=t.y+t.height/2-a/2;return s<=r.x&&(s=r.x,o=t.x+t.width-s,n&&(a=o/n,l=t.y+t.height/2-a/2)),l<=r.y&&(l=r.y,s=t.x+t.width-o),l+a>=r.y+r.height&&(l=Math.max(r.y,r.y+r.height-a),a=r.y+r.height-l,n&&(o=a*n),s=t.x+t.width-o),a<ge&&(a=ge,n&&(o=a*n),l=t.y+t.height/2-a/2,s=t.x+t.width-o),o<ge&&(o=ge,n&&(a=o/n),l=t.y+t.height/2-a/2,s=t.x+t.width-o),{x:s,y:l,width:o,height:a}}function PV({rect:t,delta:e,aspectRatio:n,imageBox:r}){const[,i]=e;let{y:s,width:o,height:a}=t;a+=i,n&&(o=a*n);let l=t.x+t.width/2-o/2;return s+a>=r.y+r.height&&(a=r.y+r.height-s,n&&(o=a*n),l=t.x+t.width/2-o/2),l<=r.x&&(l=r.x,s=t.y),l+o>=r.x+r.width&&(l=Math.max(r.x,r.x+r.width-o),o=r.x+r.width-l,n&&(a=o/n),s=t.y),a<ge&&(a=ge,n&&(o=a*n),l=t.x+t.width/2-o/2),o<ge&&(o=ge,n&&(a=o/n),l=t.x+t.width/2-o/2),{x:l,y:s,width:o,height:a}}function RV({rect:t,delta:e,aspectRatio:n,imageBox:r}){const[i]=e;let{x:s,width:o,height:a}=t;o+=i,n&&(a=o/n);let l=t.y+t.height/2-a/2;return s+o>=r.x+r.width&&(o=r.x+r.width-s,n&&(a=o/n),l=t.y+t.height/2-a/2),l<=r.y&&(l=r.y,s=t.x),l+a>=r.y+r.height&&(l=Math.max(r.y,r.y+r.height-a),a=r.y+r.height-l,n&&(o=a*n),s=t.x),a<ge&&(a=ge,n&&(o=a*n),l=t.y+t.height/2-a/2),o<ge&&(o=ge,n&&(a=o/n),l=t.y+t.height/2-a/2),{x:s,y:l,width:o,height:a}}function OV({rect:t,delta:e,aspectRatio:n,imageBox:r}){let[i,s]=e,{x:o,y:a,width:l,height:c}=t;return o+i<r.x&&(i=r.x-o),a+s<r.y&&(s=r.y-a),o+=i,l-=i,a+=s,c-=s,n&&Math.abs(l/c)>n?(s=l/n-c,c+=s,a-=s,a<=r.y&&(c=c-(r.y-a),l=c*n,o=t.x+t.width-l,a=r.y)):n&&(i=c*n-l,l=l+i,o-=i,o<=r.x&&(l=l-(r.x-o),c=l/n,o=r.x,a=t.y+t.height-c)),c<ge&&(c=ge,n&&(l=c*n),o=t.x+t.width-l,a=t.y+t.height-c),l<ge&&(l=ge,n&&(c=l/n),o=t.x+t.width-l,a=t.y+t.height-c),{x:o,y:a,width:l,height:c}}function NV({rect:t,delta:e,aspectRatio:n,imageBox:r}){let[i,s]=e,{x:o,y:a,width:l,height:c}=t;return o+l+i>r.x+r.width&&(i=r.x+r.width-o-l),a+s<r.y&&(s=r.y-a),l+=i,a+=s,c-=s,n&&Math.abs(l/c)>n?(s=l/n-c,c+=s,a-=s,a<=r.y&&(c=c-(r.y-a),l=c*n,o=t.x,a=r.y)):n&&(i=c*n-l,l+=i,o+l>=r.x+r.width&&(l=r.x+r.width-o,c=l/n,o=r.x+r.width-l,a=t.y+t.height-c)),c<ge&&(c=ge,n&&(l=c*n),a=t.y+t.height-c),l<ge&&(l=ge,n&&(c=l/n),a=t.y+t.height-c),{x:o,y:a,width:l,height:c}}function LV({rect:t,delta:e,aspectRatio:n,imageBox:r}){let[i,s]=e,{x:o,y:a,width:l,height:c}=t;return o+i<r.x&&(i=r.x-o),a+c+s>r.y+r.height&&(s=r.y+r.height-a-c),o+=i,l-=i,c+=s,n&&Math.abs(l/c)>n?(s=l/n-c,c+=s,a+c>=r.y+r.height&&(c=r.y+r.height-a,l=c*n,o=t.x+t.width-l,a=r.y+r.height-c)):n&&(i=c*n-l,l+=i,o-=i,o<=r.x&&(l=l-(r.x-o),c=l/n,o=r.x,a=t.y)),c<ge&&(c=ge,n&&(l=c*n),o=t.x+t.width-l),l<ge&&(l=ge,n&&(c=l/n),o=t.x+t.width-l),{x:o,y:a,width:l,height:c}}function DV({rect:t,delta:e,aspectRatio:n,imageBox:r}){let[i,s]=e,{x:o,y:a,width:l,height:c}=t;return o+l+i>r.x+r.width&&(i=r.x+r.width-o-l),a+c+s>r.y+r.height&&(s=r.y+r.height-a-c),l+=i,c+=s,n&&Math.abs(l/c)>n?(s=l/n-c,c+=s,a+c>=r.y+r.height&&(c=r.y+r.height-a,l=c*n,o=t.x,a=r.y+r.height-c)):n&&(i=c*n-l,l+=i,o+l>=r.x+r.width&&(l=r.x+r.width-o,c=l/n,o=r.x+r.width-l,a=t.y)),c<ge&&(c=ge,n&&(l=c*n)),l<ge&&(l=ge,n&&(c=l/n)),{x:o,y:a,width:l,height:c}}function MV({direction:t,...e}){switch(t){case"n":return xV(e);case"w":return kV(e);case"s":return PV(e);case"e":return RV(e);case"nw":return OV(e);case"ne":return NV(e);case"sw":return LV(e);case"se":return DV(e);default:return e.rect}}function VV(t,[e,n]){return t.x<=e&&e<=t.x+t.width&&t.y<=n&&n<=t.y+t.height}function UV(t,e){return t.x>=e.x&&t.y>=e.y&&t.x+t.width<=e.x+e.width&&t.y+t.height<=e.y+e.height}function $V(t,e){return Math.abs(t.width/t.height-e)<.1}function il({width:t,height:e},n){let r=n/90%2!==0;return{width:r?e:t,height:r?t:e}}function FV(t,e,n){const r=t/e;let i,s;r>n?(i=Math.round(e*n),s=e):(i=t,s=Math.round(t/n));const o=Math.round((t-i)/2),a=Math.round((e-s)/2);return o+i>t&&(i=t-o),a+s>e&&(s=e-a),{x:o,y:a,width:i,height:s}}function qc(t){return{x:Math.round(t.x),y:Math.round(t.y),width:Math.round(t.width),height:Math.round(t.height)}}function Oo(t,e,n){return Math.min(Math.max(t,e),n)}const HI=t=>{if(!t)return[];const[e,n]=t.split(":").map(Number);if(!Number.isFinite(e)||!Number.isFinite(n)){console.error(`Invalid crop preset: ${t}`);return}return[{type:"aspect-ratio",width:e,height:n}]},sr=Object.freeze({LOCAL:"local",DROP_AREA:"drop-area",URL_TAB:"url-tab",CAMERA:"camera",EXTERNAL:"external",API:"js-api"});function jV(t){return wI({...t,libraryName:Ry,libraryVersion:Oy})}const WI=({type:t,message:e,...n})=>({type:t,message:e,...n}),ho=WI,Hf=WI,bm=["image/*","image/heif","image/heif-sequence","image/heic","image/heic-sequence","image/avif","image/avif-sequence",".heif",".heifs",".heic",".heics",".avif",".avifs"],Dw=t=>t?t.filter(e=>typeof e=="string").map(e=>Gr(e)).flat():[],qI=(t,e)=>e.some(n=>n.endsWith("*")?(n=n.replace("*",""),t.startsWith(n)):t===n),zV=(t,e)=>e.some(n=>n.startsWith(".")?t.toLowerCase().endsWith(n.toLowerCase()):!1),Mw=t=>{let e=t==null?void 0:t.type;return e?qI(e,bm):!1},tr=1e3,cs=Object.freeze({AUTO:"auto",BYTE:"byte",KB:"kb",MB:"mb",GB:"gb",TB:"tb",PB:"pb"}),sl=t=>Math.ceil(t*100)/100,BV=(t,e=cs.AUTO)=>{const n=e===cs.AUTO;if(e===cs.BYTE||n&&t<tr**1){const r=vI("en-US",t),i={one:"byte",other:"bytes"}[r];return`${t} ${i}`}return e===cs.KB||n&&t<tr**2?`${sl(t/tr**1)} KB`:e===cs.MB||n&&t<tr**3?`${sl(t/tr**2)} MB`:e===cs.GB||n&&t<tr**4?`${sl(t/tr**3)} GB`:e===cs.TB||n&&t<tr**5?`${sl(t/tr**4)} TB`:`${sl(t/tr**5)} PB`},Vw=new Set;function GI(t){Vw.has(t)||(Vw.add(t),console.warn(t))}const Uw="[Typed State] Wrong property name: ",HV="[Typed State] Wrong property type: ";class WV{constructor(e,n){this.__typedSchema=e,this.__ctxId=n||Pu.generate(),this.__schema=Object.keys(e).reduce((r,i)=>(r[i]=e[i].value,r),{}),this.__data=xe.registerCtx(this.__schema,this.__ctxId)}get uid(){return this.__ctxId}setValue(e,n){if(!this.__typedSchema.hasOwnProperty(e)){console.warn(Uw+e);return}let r=this.__typedSchema[e];if((n==null?void 0:n.constructor)===r.type||n instanceof r.type||r.nullable&&n===null){this.__data.pub(e,n);return}console.warn(HV+e)}setMultipleValues(e){for(let n in e)this.setValue(n,e[n])}getValue(e){if(!this.__typedSchema.hasOwnProperty(e)){console.warn(Uw+e);return}return this.__data.read(e)}subscribe(e,n){return this.__data.sub(e,n)}remove(){xe.deleteCtx(this.__ctxId)}}class qV{constructor(e){this.__typedSchema=e.typedSchema,this.__ctxId=e.ctxName||Pu.generate(),this.__data=xe.registerCtx({},this.__ctxId),this.__watchList=e.watchList||[],this.__subsMap=Object.create(null),this.__propertyObservers=new Set,this.__collectionObservers=new Set,this.__items=new Set,this.__removed=new Set,this.__added=new Set;let n=Object.create(null);this.__notifyObservers=(r,i)=>{this.__observeTimeout&&window.clearTimeout(this.__observeTimeout),n[r]||(n[r]=new Set),n[r].add(i),this.__observeTimeout=window.setTimeout(()=>{Object.keys(n).length!==0&&(this.__propertyObservers.forEach(s=>{s({...n})}),n=Object.create(null))})}}notify(){this.__notifyTimeout&&window.clearTimeout(this.__notifyTimeout),this.__notifyTimeout=window.setTimeout(()=>{let e=new Set(this.__added),n=new Set(this.__removed);this.__added.clear(),this.__removed.clear();for(const r of this.__collectionObservers)r==null||r([...this.__items],e,n)})}observeCollection(e){return this.__collectionObservers.add(e),this.__items.size>0&&this.notify(),()=>{this.unobserveCollection(e)}}unobserveCollection(e){var n;(n=this.__collectionObservers)==null||n.delete(e)}add(e){let n=new WV(this.__typedSchema);for(let r in e)n.setValue(r,e[r]);return this.__items.add(n.uid),this.notify(),this.__data.add(n.uid,n),this.__added.add(n),this.__watchList.forEach(r=>{this.__subsMap[n.uid]||(this.__subsMap[n.uid]=[]),this.__subsMap[n.uid].push(n.subscribe(r,()=>{this.__notifyObservers(r,n.uid)}))}),n.uid}read(e){return this.__data.read(e)}readProp(e,n){return this.read(e).getValue(n)}publishProp(e,n,r){this.read(e).setValue(n,r)}remove(e){this.__removed.add(this.__data.read(e)),this.__items.delete(e),this.notify(),this.__data.pub(e,null),delete this.__subsMap[e]}clearAll(){this.__items.forEach(e=>{this.remove(e)})}observeProperties(e){return this.__propertyObservers.add(e),()=>{this.unobserveProperties(e)}}unobserveProperties(e){var n;(n=this.__propertyObservers)==null||n.delete(e)}findItems(e){let n=[];return this.__items.forEach(r=>{let i=this.read(r);e(i)&&n.push(r)}),n}items(){return[...this.__items]}get size(){return this.__items.size}destroy(){xe.deleteCtx(this.__ctxId),this.__propertyObservers=null,this.__collectionObservers=null;for(let e in this.__subsMap)this.__subsMap[e].forEach(n=>{n.remove()}),delete this.__subsMap[e]}}const GV=t=>{const e=new Map;return(...n)=>{const r=JSON.stringify(n);if(e.has(r))return e.get(r);const i=t(...n);return e.set(r,i),i}};function KV(t){let e=!1;return setTimeout(()=>{e=!0},0),r=>(...i)=>(e&&GI(t),r(...i))}function QV(t){const e={progress:()=>t.$["*commonProgress"],errors:()=>t.$["*collectionErrors"],group:()=>t.$["*groupInfo"],totalCount:()=>t.uploadCollection.size,failedCount:()=>n.failedEntries.length,successCount:()=>n.successEntries.length,uploadingCount:()=>n.uploadingEntries.length,status:()=>n.isFailed?"failed":n.isUploading?"uploading":n.isSuccess?"success":"idle",isSuccess:()=>n.errors.length===0&&n.successEntries.length===n.allEntries.length,isUploading:()=>n.allEntries.some(i=>i.status==="uploading"),isFailed:()=>n.errors.length>0||n.failedEntries.length>0,allEntries:()=>t.getOutputData(),successEntries:()=>n.allEntries.filter(i=>i.status==="success"),failedEntries:()=>n.allEntries.filter(i=>i.status==="failed"),uploadingEntries:()=>n.allEntries.filter(i=>i.status==="uploading"),idleEntries:()=>n.allEntries.filter(i=>i.status==="idle")},n={},r=KV("You're trying to access the OutputCollectionState asynchronously. In this case, the data you retrieve will be newer than it was when the OutputCollectionState was created or when the event was dispatched. If you want to retain the state at a specific moment in time, you should use the spread operator like this: `{...outputCollectionState}` or `{...e.detail}`");for(const[i,s]of Object.entries(e)){const o=i,l=GV(r(s));Object.defineProperty(n,o,{get:l,enumerable:!0})}return n}const XV=Object.freeze({file:{type:File,value:null},externalUrl:{type:String,value:null},fileName:{type:String,value:null,nullable:!0},fileSize:{type:Number,value:null,nullable:!0},lastModified:{type:Number,value:Date.now()},uploadProgress:{type:Number,value:0},uuid:{type:String,value:null},isImage:{type:Boolean,value:!1},mimeType:{type:String,value:null,nullable:!0},ctxName:{type:String,value:null},cdnUrl:{type:String,value:null},cdnUrlModifiers:{type:String,value:null},fileInfo:{type:Sa,value:null},isUploading:{type:Boolean,value:!1},abortController:{type:AbortController,value:null,nullable:!0},thumbUrl:{type:String,value:null,nullable:!0},silent:{type:Boolean,value:!1},source:{type:String,value:!1,nullable:!0},fullPath:{type:String,value:null,nullable:!0},metadata:{type:Object,value:null,nullable:!0},errors:{type:Array,value:[]},uploadError:{type:Error,value:null,nullable:!0},isRemoved:{type:Boolean,value:!1}}),YV=/[a-f0-9]{8}-[a-f0-9]{4}-[a-f0-9]{4}-[a-f0-9]{4}-[a-f0-9]{12}/i,JV=new RegExp(`^/?(${YV.source})(?:/(-/(?:[^/]+/)+)?([^/]*))?$`,"i"),ZV=({url:t,cdnBase:e})=>{const n=new URL(e),r=new URL(t);if(n.host!==r.host)return null;const[,i,s,o]=JV.exec(r.pathname);return{uuid:i,cdnUrlModifiers:s||"",filename:o||null}};class Ke extends fe{constructor(){super(...arguments);V(this,"couldBeCtxOwner",!1);V(this,"isCtxOwner",!1);V(this,"init$",NI(this));V(this,"__initialUploadMetadata",null);V(this,"_fileValidators",[this._validateIsImage.bind(this),this._validateFileType.bind(this),this._validateMaxSizeLimit.bind(this),this._validateUploadError.bind(this)]);V(this,"_collectionValidators",[n=>{const r=n.size,i=this.cfg.multiple?this.cfg.multipleMin:0,s=this.cfg.multiple?this.cfg.multipleMax:1;if(i&&r<i){const o=this.l10n("files-count-limit-error-too-few",{min:i,max:s,total:r});return Hf({type:"TOO_FEW_FILES",message:o,total:r,min:i,max:s})}if(s&&r>s){const o=this.l10n("files-count-limit-error-too-many",{min:i,max:s,total:r});return Hf({type:"TOO_MANY_FILES",message:o,total:r,min:i,max:s})}},n=>{if(n.items().some(r=>n.readProp(r,"errors").length>0))return Hf({type:"SOME_FILES_HAS_ERRORS",message:this.l10n("some-files-were-not-uploaded")})}]);V(this,"uploadAll",()=>{const n=this.uploadCollection.items().filter(r=>{const i=this.uploadCollection.read(r);return!i.getValue("isRemoved")&&!i.getValue("isUploading")&&!i.getValue("fileInfo")});n.length!==0&&(this.$["*uploadTrigger"]=new Set(n),this.emit(tt.COMMON_UPLOAD_START,this.getOutputCollectionState()))});V(this,"_flushOutputItems",Dn(async()=>{if(this.getOutputData().length!==this.uploadCollection.size)return;const r=this.getOutputCollectionState();this.$["*collectionState"]=r,this.emit(tt.CHANGE,()=>this.getOutputCollectionState(),{debounce:!0}),this.cfg.groupOutput&&r.totalCount>0&&r.status==="success"&&this._createGroup(r)},300));V(this,"_handleCollectionUpdate",(n,r,i)=>{var s;(r.size||i.size)&&(this.$["*groupInfo"]=null),this._runFileValidators(),this._runCollectionValidators();for(const o of r)o.getValue("silent")||this.emit(tt.FILE_ADDED,this.getOutputItem(o.uid));for(const o of i)this.$["*uploadTrigger"].delete(o.uid),(s=o.getValue("abortController"))==null||s.abort(),o.setMultipleValues({isRemoved:!0,abortController:null,isUploading:!1,uploadProgress:0}),URL.revokeObjectURL(o==null?void 0:o.getValue("thumbUrl")),this.emit(tt.FILE_REMOVED,this.getOutputItem(o.uid));this.$["*uploadList"]=n.map(o=>({uid:o})),this._flushCommonUploadProgress(),this._flushOutputItems()});V(this,"_handleCollectionPropertiesUpdate",n=>{this._flushOutputItems();const r=this.uploadCollection,i=[...new Set(Object.entries(n).filter(([s])=>["uploadError","fileInfo"].includes(s)).map(([,s])=>[...s]).flat())];if(i.length>0&&setTimeout(()=>{this._runFileValidators(i)}),n.uploadProgress){for(const s of n.uploadProgress){const{isUploading:o,silent:a}=xe.getCtx(s).store;o&&!a&&this.emit(tt.FILE_UPLOAD_PROGRESS,this.getOutputItem(s))}this._flushCommonUploadProgress()}if(n.isUploading)for(const s of n.isUploading){const{isUploading:o,silent:a}=xe.getCtx(s).store;o&&!a&&this.emit(tt.FILE_UPLOAD_START,this.getOutputItem(s))}if(n.fileInfo){for(const a of n.fileInfo){const{fileInfo:l,silent:c}=xe.getCtx(a).store;l&&!c&&this.emit(tt.FILE_UPLOAD_SUCCESS,this.getOutputItem(a))}this.cfg.cropPreset&&this.setInitialCrop();let s=r.findItems(a=>!!a.getValue("fileInfo"));r.findItems(a=>a.getValue("errors").length>0).length===0&&r.size===s.length&&this.emit(tt.COMMON_UPLOAD_SUCCESS,this.getOutputCollectionState())}if(n.errors)for(const s of n.errors){const{errors:o}=xe.getCtx(s).store;o.length>0&&(this.emit(tt.FILE_UPLOAD_FAILED,this.getOutputItem(s)),this.emit(tt.COMMON_UPLOAD_FAILED,()=>this.getOutputCollectionState(),{debounce:!0}))}n.cdnUrl&&([...n.cdnUrl].filter(o=>{var a;return!!((a=this.uploadCollection.read(o))!=null&&a.getValue("cdnUrl"))}).forEach(o=>{this.emit(tt.FILE_URL_CHANGED,this.getOutputItem(o))}),this.$["*groupInfo"]=null)});V(this,"_flushCommonUploadProgress",()=>{let n=0;const i=[...this.$["*uploadTrigger"]].filter(o=>!!this.uploadCollection.read(o));i.forEach(o=>{const a=this.uploadCollection.readProp(o,"uploadProgress");n+=a});const s=i.length?Math.round(n/i.length):0;this.$["*commonProgress"]!==s&&(this.$["*commonProgress"]=s,this.emit(tt.COMMON_UPLOAD_PROGRESS,this.getOutputCollectionState()))})}setUploadMetadata(n){GI("setUploadMetadata is deprecated. Use `metadata` instance property on `lr-config` block instead. See migration guide: https://uploadcare.com/docs/file-uploader/migration-to-0.25.0/"),this.connectedOnce?this.$["*uploadMetadata"]=n:this.__initialUploadMetadata=n}get hasCtxOwner(){return this.hasBlockInCtx(n=>n instanceof Ke?n.isCtxOwner&&n.isConnected&&n!==this:!1)}initCallback(){if(super.initCallback(),!this.$["*uploadCollection"]){let n=new qV({typedSchema:XV,watchList:["uploadProgress","uploadError","fileInfo","errors","cdnUrl","isUploading"]});this.$["*uploadCollection"]=n}!this.hasCtxOwner&&this.couldBeCtxOwner&&this.initCtxOwner()}destroyCtxCallback(){var n,r;(n=this._unobserveCollectionProperties)==null||n.call(this),(r=this._unobserveCollection)==null||r.call(this),this.uploadCollection.destroy(),this.$["*uploadCollection"]=null,super.destroyCtxCallback()}initCtxOwner(){this.isCtxOwner=!0,this._unobserveCollection=this.uploadCollection.observeCollection(this._handleCollectionUpdate),this._unobserveCollectionProperties=this.uploadCollection.observeProperties(this._handleCollectionPropertiesUpdate);const n=()=>{this._runFileValidators(),this._runCollectionValidators()};this.subConfigValue("maxLocalFileSizeBytes",n),this.subConfigValue("multipleMin",n),this.subConfigValue("multipleMax",n),this.subConfigValue("multiple",n),this.subConfigValue("imgOnly",n),this.subConfigValue("accept",n),this.subConfigValue("maxConcurrentRequests",r=>{this.$["*uploadQueue"].concurrency=Number(r)||1}),this.__initialUploadMetadata&&(this.$["*uploadMetadata"]=this.__initialUploadMetadata)}addFileFromUrl(n,{silent:r,fileName:i,source:s}={}){const o=this.uploadCollection.add({externalUrl:n,fileName:i??null,silent:r??!1,source:s??sr.API});return this.getOutputItem(o)}addFileFromUuid(n,{silent:r,fileName:i,source:s}={}){const o=this.uploadCollection.add({uuid:n,fileName:i??null,silent:r??!1,source:s??sr.API});return this.getOutputItem(o)}addFileFromCdnUrl(n,{silent:r,fileName:i,source:s}={}){const o=ZV({url:n,cdnBase:this.cfg.cdnCname});if(!o)throw new Error("Invalid CDN URL");const a=this.uploadCollection.add({uuid:o.uuid,cdnUrl:n,cdnUrlModifiers:o.cdnUrlModifiers,fileName:i??o.filename??null,silent:r??!1,source:s??sr.API});return this.getOutputItem(a)}addFileFromObject(n,{silent:r,fileName:i,source:s,fullPath:o}={}){const a=this.uploadCollection.add({file:n,isImage:Mw(n),mimeType:n.type,fileName:i??n.name,fileSize:n.size,silent:r??!1,source:s??sr.API,fullPath:o??null});return this.getOutputItem(a)}addFiles(n){return console.warn("`addFiles` method is deprecated. Please use `addFileFromObject`, `addFileFromUrl` or `addFileFromUuid` instead."),n.map(r=>{const i=this.uploadCollection.add({file:r,isImage:Mw(r),mimeType:r.type,fileName:r.name,fileSize:r.size});return this.getOutputItem(i)})}removeFileByInternalId(n){if(!this.uploadCollection.read(n))throw new Error(`File with internalId ${n} not found`);this.uploadCollection.remove(n)}removeAllFiles(){this.uploadCollection.clearAll()}openSystemDialog(n={}){let r=Ly(Dw([this.cfg.accept??"",...this.cfg.imgOnly?bm:[]]));this.cfg.accept&&this.cfg.imgOnly&&console.warn("There could be a mistake.\nBoth `accept` and `imgOnly` parameters are set.\nThe value of `accept` will be concatenated with the internal image mime types list."),this.fileInput=document.createElement("input"),this.fileInput.type="file",this.fileInput.multiple=this.cfg.multiple,n.captureCamera?(this.fileInput.capture=this.cfg.cameraCapture,this.fileInput.accept="image/*"):this.fileInput.accept=r,this.fileInput.dispatchEvent(new MouseEvent("click")),this.fileInput.onchange=()=>{[...this.fileInput.files].forEach(i=>this.addFileFromObject(i,{source:n.captureCamera?sr.CAMERA:sr.LOCAL})),this.$["*currentActivity"]=fe.activities.UPLOAD_LIST,this.setOrAddState("*modalActive",!0),this.fileInput.value="",this.fileInput=null}}get sourceList(){let n=[];return this.cfg.sourceList&&(n=Gr(this.cfg.sourceList)),n}initFlow(n=!1){var r;if(this.uploadCollection.size>0&&!n)this.set$({"*currentActivity":fe.activities.UPLOAD_LIST}),this.setOrAddState("*modalActive",!0);else if(((r=this.sourceList)==null?void 0:r.length)===1){const i=this.sourceList[0];if(i==="local"){this.$["*currentActivity"]=fe.activities.UPLOAD_LIST,this==null||this.openSystemDialog();return}const s=this.$["*blocksRegistry"],o=l=>"type"in l&&l.type===i,a=[...s].find(o);a==null||a.activate(),this.$["*currentActivity"]&&this.setOrAddState("*modalActive",!0)}else this.set$({"*currentActivity":fe.activities.START_FROM}),this.setOrAddState("*modalActive",!0)}doneFlow(){this.set$({"*currentActivity":this.doneActivity,"*history":this.doneActivity?[this.doneActivity]:[]}),this.$["*currentActivity"]||this.setOrAddState("*modalActive",!1)}get uploadCollection(){return this.$["*uploadCollection"]}_validateFileType(n){const r=this.cfg.imgOnly,i=this.cfg.accept,s=Dw([...r?bm:[],i]);if(!s.length)return;const o=n.mimeType,a=n.name;if(!o||!a)return;const l=qI(o,s),c=zV(a,s);if(!l&&!c)return ho({type:"FORBIDDEN_FILE_TYPE",message:this.l10n("file-type-not-allowed"),entry:n})}_validateMaxSizeLimit(n){const r=this.cfg.maxLocalFileSizeBytes,i=n.size;if(r&&i&&i>r)return ho({type:"FILE_SIZE_EXCEEDED",message:this.l10n("files-max-size-limit-error",{maxFileSize:BV(r)}),entry:n})}_validateUploadError(n,r){const i=r==null?void 0:r.getValue("uploadError");if(i){if(i instanceof un)return ho({type:"UPLOAD_ERROR",message:i.message,entry:n,error:i});if(i instanceof Ru)return ho({type:"NETWORK_ERROR",message:i.message,entry:n,error:i});{const s=i instanceof Error?i:new Error("Unknown error",{cause:i});return ho({type:"UNKNOWN_ERROR",message:s.message,entry:n,error:s})}}}_validateIsImage(n){const r=this.cfg.imgOnly,i=n.isImage;if(!(!r||i)&&!(!n.fileInfo&&n.externalUrl)&&!(!n.fileInfo&&!n.mimeType))return ho({type:"NOT_AN_IMAGE",message:this.l10n("images-only-accepted"),entry:n})}_runFileValidatorsForEntry(n){const r=this.getOutputItem(n.uid),i=[];for(const s of this._fileValidators){const o=s(r,n);o&&i.push(o)}n.setValue("errors",i)}_runFileValidators(n){const r=n??this.uploadCollection.items();for(const i of r){const s=this.uploadCollection.read(i);s&&this._runFileValidatorsForEntry(s)}}_runCollectionValidators(){const n=this.uploadCollection,r=[];for(const i of this._collectionValidators){const s=i(n);s&&(Array.isArray(s)?r.push(...s):r.push(s))}this.$["*collectionErrors"]=r,r.length>0&&this.emit(tt.COMMON_UPLOAD_FAILED,()=>this.getOutputCollectionState(),{debounce:!0})}async _createGroup(n){const r=this.getUploadClientOptions(),i=n.allEntries.map(l=>l.uuid+(l.cdnUrlModifiers?`/${l.cdnUrlModifiers}`:"")),s=new AbortController,o=await tV(i,{...r,signal:s.signal});if(this.$["*collectionState"]!==n){s.abort();return}this.$["*groupInfo"]=o;const a=this.getOutputCollectionState();this.emit(tt.GROUP_CREATED,a),this.emit(tt.CHANGE,()=>this.getOutputCollectionState(),{debounce:!0}),this.$["*collectionState"]=a}setInitialCrop(){const n=HI(this.cfg.cropPreset);if(n){const[r]=n,i=this.uploadCollection.findItems(s=>{var o;return s.getValue("fileInfo")&&s.getValue("isImage")&&!((o=s.getValue("cdnUrlModifiers"))!=null&&o.includes("/crop/"))}).map(s=>this.uploadCollection.read(s));for(const s of i){const o=s.getValue("fileInfo"),{width:a,height:l}=o.imageInfo,c=r.width/r.height,h=FV(a,l,c),f=Wi(`crop/${h.width}x${h.height}/${h.x},${h.y}`,"preview");s.setMultipleValues({cdnUrlModifiers:f,cdnUrl:xn(s.getValue("cdnUrl"),f)}),this.uploadCollection.size===1&&this.cfg.useCloudImageEditor&&this.hasBlockInCtx(p=>p.activityType===fe.activities.CLOUD_IMG_EDIT)&&(this.$["*focusedEntry"]=s,this.$["*currentActivity"]=fe.activities.CLOUD_IMG_EDIT)}}}async getMetadataFor(n){const r=this.cfg.metadata??this.$["*uploadMetadata"];if(typeof r=="function"){const i=this.getOutputItem(n);return await r(i)}return r}getUploadClientOptions(){return{store:this.cfg.store,publicKey:this.cfg.pubkey,baseCDN:this.cfg.cdnCname,baseURL:this.cfg.baseUrl,userAgent:jV,integration:this.cfg.userAgentIntegration,secureSignature:this.cfg.secureSignature,secureExpire:this.cfg.secureExpire,retryThrottledRequestMaxTimes:this.cfg.retryThrottledRequestMaxTimes,multipartMinFileSize:this.cfg.multipartMinFileSize,multipartChunkSize:this.cfg.multipartChunkSize,maxConcurrentRequests:this.cfg.multipartMaxConcurrentRequests,multipartMaxAttempts:this.cfg.multipartMaxAttempts,checkForUrlDuplicates:!!this.cfg.checkForUrlDuplicates,saveUrlForRecurrentUploads:!!this.cfg.saveUrlForRecurrentUploads}}getOutputItem(n){const r=xe.getCtx(n).store,i=r.fileInfo;let s=r.isRemoved?"removed":r.errors.length>0?"failed":r.fileInfo?"success":r.isUploading?"uploading":"idle";return{uuid:(i==null?void 0:i.uuid)??r.uuid??null,internalId:n,name:(i==null?void 0:i.originalFilename)??r.fileName,size:(i==null?void 0:i.size)??r.fileSize,isImage:(i==null?void 0:i.isImage)??r.isImage,mimeType:(i==null?void 0:i.mimeType)??r.mimeType,file:r.file,externalUrl:r.externalUrl,cdnUrlModifiers:r.cdnUrlModifiers,cdnUrl:r.cdnUrl??(i==null?void 0:i.cdnUrl)??null,fullPath:r.fullPath,uploadProgress:r.uploadProgress,fileInfo:i??null,metadata:r.metadata??(i==null?void 0:i.metadata)??null,isSuccess:s==="success",isUploading:s==="uploading",isFailed:s==="failed",isRemoved:s==="removed",errors:r.errors,status:s}}getOutputData(n){return(n?this.uploadCollection.findItems(n):this.uploadCollection.items()).map(s=>this.getOutputItem(s))}getOutputCollectionState(){return QV(this)}}Ke.extSrcList=Object.freeze({FACEBOOK:"facebook",DROPBOX:"dropbox",GDRIVE:"gdrive",GPHOTOS:"gphotos",INSTAGRAM:"instagram",FLICKR:"flickr",VK:"vk",EVERNOTE:"evernote",BOX:"box",ONEDRIVE:"onedrive",HUDDLE:"huddle"});Ke.sourceTypes=Object.freeze({LOCAL:"local",URL:"url",CAMERA:"camera",DRAW:"draw",...Ke.extSrcList});const $d=t=>{var e;return(e=t.match(/[A-Z]{2,}(?=[A-Z][a-z]+[0-9]*|\b)|[A-Z]?[a-z]+[0-9]*|[A-Z]|[0-9]+/g))==null?void 0:e.map(n=>n.toLowerCase()).join("-")},St=t=>String(t),nr=t=>{const e=Number(t);if(Number.isNaN(e))throw new Error(`Invalid number: "${t}"`);return e},nt=t=>{if(typeof t>"u"||t===null)return!1;if(typeof t=="boolean")return t;if(t==="true"||t==="")return!0;if(t==="false")return!1;throw new Error(`Invalid boolean: "${t}"`)},eU=t=>t==="auto"?t:nt(t),tU=t=>{const e=St(t);if(e!=="user"&&e!=="environment"&&e!=="")throw new Error(`Invalid "cameraCapture" value: "${e}"`);return e},nU=t=>{if(typeof t=="object"&&!Array.isArray(t)||typeof t=="function")return t;throw new Error("Invalid metadata value. Must be an object or function.")},rU=t=>{if(typeof t=="object")return t;throw new Error("Invalid localeDefinitionOverride value. Must be an object.")},iU={pubkey:St,multiple:nt,multipleMin:nr,multipleMax:nr,confirmUpload:nt,imgOnly:nt,accept:St,externalSourcesPreferredTypes:St,store:eU,cameraMirror:nt,cameraCapture:tU,sourceList:St,maxLocalFileSizeBytes:nr,thumbSize:nr,showEmptyList:nt,useLocalImageEditor:nt,useCloudImageEditor:nt,cloudImageEditorTabs:St,removeCopyright:nt,cropPreset:St,imageShrink:St,modalScrollLock:nt,modalBackdropStrokes:nt,sourceListWrap:nt,remoteTabSessionKey:St,cdnCname:St,baseUrl:St,socialBaseUrl:St,secureSignature:St,secureExpire:St,secureDeliveryProxy:St,retryThrottledRequestMaxTimes:nr,multipartMinFileSize:nr,multipartChunkSize:nr,maxConcurrentRequests:nr,multipartMaxConcurrentRequests:nr,multipartMaxAttempts:nr,checkForUrlDuplicates:nt,saveUrlForRecurrentUploads:nt,groupOutput:nt,userAgentIntegration:St,debug:nt,localeName:St,metadata:nU,localeDefinitionOverride:rU},sU=(t,e)=>{if(!(typeof e>"u"||e===null))try{return iU[t](e)}catch(n){return console.error(`Invalid value for config key "${t}".`,n),Vi[t]}},Dy=[...new Set(["debug",...Object.keys(Vi)])],oU=["metadata","localeDefinitionOverride"],aU=t=>oU.includes(t),ca=Dy.filter(t=>!aU(t)),lU={...Object.fromEntries(ca.map(t=>[$d(t),t])),...Object.fromEntries(ca.map(t=>[t.toLowerCase(),t]))},uU={...Object.fromEntries(ca.map(t=>[$d(t),Sn(t)])),...Object.fromEntries(ca.map(t=>[t.toLowerCase(),Sn(t)]))},$w=t=>"__"+t;class My extends Oe{constructor(){super();V(this,"requireCtxName",!0);this.init$={...this.init$,...Object.fromEntries(Object.entries(Vi).map(([n,r])=>[Sn(n),r]))}}_flushValueToAttribute(n,r){if(ca.includes(n)){const i=[...new Set([$d(n),n.toLowerCase()])];for(const s of i)typeof r>"u"||r===null?this.removeAttribute(s):this.getAttribute(s)!==r.toString()&&this.setAttribute(s,r.toString())}}_flushValueToState(n,r){this.$[Sn(n)]!==r&&(typeof r>"u"||r===null?this.$[Sn(n)]=Vi[n]:this.$[Sn(n)]=r)}_setValue(n,r){const i=this,s=sU(n,r),o=$w(n);i[o]!==s&&(this._assertSameValueDifferentReference(n,i[o],s),i[o]=s,this._flushValueToAttribute(n,s),this._flushValueToState(n,s),this.debugPrint(`[lr-config] "${n}"`,s))}_getValue(n){const r=this,i=$w(n);return r[i]}_assertSameValueDifferentReference(n,r,i){this.cfg.debug&&JSON.stringify(i)===JSON.stringify(r)&&(console.warn(`[lr-config] Option "${n}" value is the same as the previous one but the reference is different`),console.warn("[lr-config] You should avoid changing the reference of the object to prevent unnecessary calculations"),console.warn(`[lr-config] "${n}" previous value:`,r),console.warn(`[lr-config] "${n}" new value:`,i))}initCallback(){super.initCallback();const n=this;for(const r of ca)this.sub(Sn(r),i=>{this._setValue(r,i)},!1);for(const r of Dy){const i=n[r]??this.$[Sn(r)];i!==Vi[r]&&this._setValue(r,i),Object.defineProperty(this,r,{set:s=>{this._setValue(r,s)},get:()=>this._getValue(r)})}}attributeChangedCallback(n,r,i){if(r===i)return;const s=this,o=lU[n];s[o]=i}}My.bindAttributes(uU);for(const t of Dy)My.prototype[t]=void 0;const KI=My;class Vy extends Oe{constructor(){super(...arguments);V(this,"init$",{...this.init$,name:"",path:"",size:"24",viewBox:""})}initCallback(){super.initCallback(),this.sub("name",n=>{if(!n)return;let r=this.getCssData(`--icon-${n}`);r&&(this.$.path=r)}),this.sub("path",n=>{if(!n)return;n.trimStart().startsWith("<")?(this.setAttribute("raw",""),this.ref.svg.innerHTML=n):(this.removeAttribute("raw"),this.ref.svg.innerHTML=`<path fill-rule="evenodd" d="${n}"></path>`)}),this.sub("size",n=>{this.$.viewBox=`0 0 ${n} ${n}`})}}Vy.template=`
  <svg ref="svg" xmlns="http://www.w3.org/2000/svg" set="@viewBox: viewBox; @height: size; @width: size"></svg>
`;Vy.bindAttributes({name:"name",size:"size"});const cU=t=>[...new Set(t)],hU=t=>Object.entries(t).filter(([e,n])=>n!==void 0&&n!=="").map(([e,n])=>e==="cdn-operations"||e==="analytics"?n:`${e}/${n}`),dU="https://ucarecdn.com",Fh=Object.freeze({"dev-mode":{},pubkey:{},uuid:{},src:{},lazy:{default:1},intersection:{},breakpoints:{},"cdn-cname":{default:dU},"proxy-cname":{},"secure-delivery-proxy":{},"hi-res-support":{default:1},"ultra-res-support":{},format:{},"cdn-operations":{},progressive:{},quality:{},"is-background-for":{},"is-preview-blur":{default:1}}),vl="--lr-img-",Fw="unresolved",wc=2,Ec=3,jw=!window.location.host.trim()||window.location.host.includes(":")||window.location.hostname.includes("localhost"),zw=3e3,Bw=5e3,Hw=Object.freeze({PREVIEW:"PREVIEW",MAIN:"MAIN"}),QI=Object.create(null);var n1;for(let t in Fh)QI[vl+t]=((n1=Fh[t])==null?void 0:n1.default)||"";class fU extends Rd{constructor(){super(...arguments);V(this,"cssInit$",QI)}$$(n){return this.$[vl+n]}set$$(n){for(let r in n)this.$[vl+r]=n[r]}sub$$(n,r){this.sub(vl+n,i=>{i===null||i===""||r(i)})}analyticsParams(){return`-/@clib/${Ry}/${Oy}/lr-img/`}initAttributes(n){[...this.attributes].forEach(r=>{Fh[r.name]||n.setAttribute(r.name,r.value)})}initIntersection(n,r){let i={root:null,rootMargin:"0px"};this._isnObserver=new IntersectionObserver(s=>{s.forEach(o=>{o.isIntersecting&&(r(),this._isnObserver.unobserve(n))})},i),this._isnObserver.observe(n),this._observed||(this._observed=new Set),this._observed.add(n)}destroyCallback(){super.destroyCallback(),this._isnObserver&&(this._observed.forEach(n=>{this._isnObserver.unobserve(n)}),this._isnObserver=null),xe.deleteCtx(this)}static get observedAttributes(){return Object.keys(Fh)}attributeChangedCallback(n,r,i){window.setTimeout(()=>{this.$[vl+n]=i})}}class pU extends fU{constructor(){super(...arguments);V(this,"_img",new Image);V(this,"_imgPreview",new Image)}_fmtAbs(n){return!n.includes("//")&&!jw&&(n=new URL(n,document.baseURI).href),n}_validateSize(n){if((n==null?void 0:n.trim())!==""){let r=n.match(/\d+/)[0],i=n.match(/[a-zA-Z]+/)[0];const s=parseInt(r,10);if(Number(s)>Bw&&this.hasFormatJPG)return Bw+i;if(Number(s)>zw&&!this.hasFormatJPG)return zw+i}return n}_getCdnModifiers(n,r){const i={format:this.$$("format"),quality:this.$$("quality"),resize:this._validateSize(n),blur:r,"cdn-operations":this.$$("cdn-operations"),analytics:this.analyticsParams()};return Wi(...hU(i))}_getUrlBase(n="",r=""){if(this.$$("src").startsWith("data:")||this.$$("src").startsWith("blob:"))return this.$$("src");if(jw&&this.$$("src")&&!this.$$("src").includes("//"))return this._proxyUrl(this.$$("src"));let i=this._getCdnModifiers(n,r);if(this.$$("src").startsWith(this.$$("cdn-cname")))return xn(this.$$("src"),i);if(this.$$("cdn-cname")&&this.$$("uuid"))return this._proxyUrl(xn(uu(this.$$("cdn-cname"),this.$$("uuid")),i));if(this.$$("uuid"))return this._proxyUrl(xn(uu(this.$$("cdn-cname"),this.$$("uuid")),i));if(this.$$("proxy-cname"))return this._proxyUrl(xn(this.$$("proxy-cname"),i,this._fmtAbs(this.$$("src"))));if(this.$$("pubkey"))return this._proxyUrl(xn(`https://${this.$$("pubkey")}.ucr.io/`,i,this._fmtAbs(this.$$("src"))))}_proxyUrl(n){return this.$$("secure-delivery-proxy")?vm(this.$$("secure-delivery-proxy"),{previewUrl:n},{transform:i=>window.encodeURIComponent(i)}):n}_getElSize(n,r=1,i=!0){let s=n.getBoundingClientRect(),o=r*Math.round(s.width),a=i?"":r*Math.round(s.height);return o||a?`${o||""}x${a||""}`:null}_setupEventProxy(n){let r=s=>{s.stopPropagation();let o=new Event(s.type,s);this.dispatchEvent(o)},i=["load","error"];for(let s of i)n.addEventListener(s,r)}get img(){return this.hasPreviewImage||(this._setupConfigForImage({elNode:this._img}),this.appendChild(this._img)),this._img}get currentImg(){return this.hasPreviewImage?{type:Hw.PREVIEW,img:this._imgPreview}:{type:Hw.MAIN,img:this.img}}get hasPreviewImage(){return this.$$("is-preview-blur")}get bgSelector(){return this.$$("is-background-for")}get breakpoints(){if(this.$$("breakpoints")){const n=Gr(this.$$("breakpoints"));return cU(n.map(r=>parseInt(r,10)))}else return null}get hasFormatJPG(){return this.$$("format").toLowerCase()==="jpeg"}renderBg(n){let r=new Set;r.add(`url("${this._getUrlBase(this._getElSize(n))}") 1x`),this.$$("hi-res-support")&&r.add(`url("${this._getUrlBase(this._getElSize(n,wc))}") ${wc}x`),this.$$("ultra-res-support")&&r.add(`url("${this._getUrlBase(this._getElSize(n,Ec))}") ${Ec}x`);let i=`image-set(${[...r].join(", ")})`;n.style.setProperty("background-image",i),n.style.setProperty("background-image","-webkit-"+i)}getSrcset(){let n=new Set;return this.breakpoints?this.breakpoints.forEach(r=>{n.add(this._getUrlBase(r+"x")+` ${this._validateSize(r+"w")}`),this.$$("hi-res-support")&&n.add(this._getUrlBase(r*wc+"x")+` ${this._validateSize(r*wc+"w")}`),this.$$("ultra-res-support")&&n.add(this._getUrlBase(r*Ec+"x")+` ${this._validateSize(r*Ec+"w")}`)}):(n.add(this._getUrlBase(this._getElSize(this.currentImg.img))+" 1x"),this.$$("hi-res-support")&&n.add(this._getUrlBase(this._getElSize(this.currentImg.img,2))+" 2x"),this.$$("ultra-res-support")&&n.add(this._getUrlBase(this._getElSize(this.currentImg.img,3))+" 3x")),[...n].join()}getSrc(){return this._getUrlBase()}get srcUrlPreview(){return this._getUrlBase("100x","100")}renderBackground(){[...document.querySelectorAll(this.bgSelector)].forEach(n=>{this.$$("intersection")?this.initIntersection(n,()=>{this.renderBg(n)}):this.renderBg(n)})}_appendURL({elNode:n,src:r,srcset:i}){r&&(n.src=r),i&&(n.srcset=i)}_setupConfigForImage({elNode:n}){this._setupEventProxy(n),this.initAttributes(n)}loaderImage({src:n,srcset:r,elNode:i}){return new Promise((s,o)=>{this._setupConfigForImage({elNode:i}),i.setAttribute(Fw,""),i.addEventListener("load",()=>{i.removeAttribute(Fw),s(i)}),i.addEventListener("error",()=>{o(!1)}),this._appendURL({elNode:i,src:n,srcset:r})})}async renderImage(){var n,r;if(this.$$("intersection")){this.hasPreviewImage&&(this._setupConfigForImage({elNode:this._imgPreview}),this.appendChild(this._imgPreview)),this.initIntersection(this.currentImg.img,async()=>{var i;this.hasPreviewImage&&(this._imgPreview.src=this.srcUrlPreview);try{await this.loaderImage({src:this.getSrc(),srcset:this.getSrcset(),elNode:this._img}),this.hasPreviewImage&&await this._imgPreview.remove(),this.appendChild(this._img)}catch{this.hasPreviewImage&&await((i=this._imgPreview)==null?void 0:i.remove()),this.appendChild(this._img)}});return}try{this.hasPreviewImage&&(await this.loaderImage({src:this.srcUrlPreview,elNode:this._imgPreview}),this.appendChild(this._imgPreview)),await this.loaderImage({src:this.getSrc(),srcset:this.getSrcset(),elNode:this._img}),this.hasPreviewImage&&await((n=this._imgPreview)==null?void 0:n.remove()),this.appendChild(this._img)}catch{this.hasPreviewImage&&await((r=this._imgPreview)==null?void 0:r.remove()),this.appendChild(this._img)}}init(){this.bgSelector?this.renderBackground():this.renderImage()}}class mU extends pU{initCallback(){super.initCallback(),this.sub$$("src",()=>{this.init()}),this.sub$$("uuid",()=>{this.init()}),this.sub$$("lazy",e=>{!this.$$("is-background-for")&&!this.$$("is-preview-blur")&&(this.img.loading=e?"lazy":"eager")})}}class Uy extends Ke{constructor(){super();V(this,"couldBeCtxOwner",!0);this.init$={...this.init$,withDropZone:!0,onClick:()=>{this.initFlow()},"button-text":""}}initCallback(){super.initCallback(),this.defineAccessor("dropzone",n=>{typeof n>"u"||(this.$.withDropZone=nt(n))}),this.subConfigValue("multiple",n=>{this.$["button-text"]=n?"upload-files":"upload-file"})}}Uy.template=`
  <lr-drop-area set="@disabled: !withDropZone">
    <button type="button" set="onclick: onClick">
      <lr-icon name="upload"></lr-icon>
      <span l10n="button-text"></span>
      <slot></slot>
      <div class="visual-drop-area" l10n="drop-files-here"></div>
    </button>
  </lr-drop-area>
`;Uy.bindAttributes({dropzone:null});class XI extends fe{constructor(){super(...arguments);V(this,"historyTracked",!0);V(this,"activityType","start-from")}initCallback(){super.initCallback(),this.registerActivity(this.activityType)}}XI.template=' <div class="content"><slot></slot></div> ';function gU(t){return new Promise(e=>{typeof window.FileReader!="function"&&e(!1);try{let n=new FileReader;n.onerror=()=>{e(!0)};let r=i=>{i.type!=="loadend"&&n.abort(),e(!1)};n.onloadend=r,n.onprogress=r,n.readAsDataURL(t)}catch{e(!1)}})}function yU(t,e){return new Promise(n=>{let r=0;const i=[],s=a=>{a||(console.warn("Unexpectedly received empty content entry",{scope:"drag-and-drop"}),n(null)),a.isFile?(r++,a.file(l=>{r--;const c=new File([l],l.name,{type:l.type||e});i.push({type:"file",file:c,fullPath:a.fullPath}),r===0&&n(i)})):a.isDirectory&&o(a.createReader())};let o=a=>{r++,a.readEntries(l=>{r--;for(let c of l)s(c);r===0&&n(i)})};s(t)})}function vU(t){const e=[],n=[];for(let r=0;r<t.items.length;r++){let i=t.items[r];if(i)if(i.kind==="file"){const s=i.type;if(typeof i.webkitGetAsEntry=="function"||typeof i.getAsEntry=="function"){let a=typeof i.webkitGetAsEntry=="function"?i.webkitGetAsEntry():i.getAsEntry();n.push(yU(a,s).then(l=>{l&&e.push(...l)}));continue}const o=i.getAsFile();o&&n.push(gU(o).then(a=>{a||e.push({type:"file",file:o})}))}else i.kind==="string"&&i.type.match("^text/uri-list")&&n.push(new Promise(s=>{i.getAsString(o=>{e.push({type:"url",url:o}),s(void 0)})}))}return Promise.all(n).then(()=>e)}const tn={ACTIVE:0,INACTIVE:1,NEAR:2,OVER:3};let Ww=["focus"],_U=100,Wf=new Map;function wU(t,e){let n=Math.max(Math.min(t[0],e.x+e.width),e.x),r=Math.max(Math.min(t[1],e.y+e.height),e.y);return Math.sqrt((t[0]-n)*(t[0]-n)+(t[1]-r)*(t[1]-r))}function qw(t){let e=0,n=document.body,r=new Set,i=E=>r.add(E),s=tn.INACTIVE,o=E=>{t.shouldIgnore()&&E!==tn.INACTIVE||(s!==E&&r.forEach(S=>S(E)),s=E)},a=()=>e>0;i(E=>t.onChange(E));let l=()=>{e=0,o(tn.INACTIVE)},c=()=>{e+=1,s===tn.INACTIVE&&o(tn.ACTIVE)},h=()=>{e-=1,a()||o(tn.INACTIVE)},f=E=>{E.preventDefault(),e=0,o(tn.INACTIVE)},p=E=>{if(t.shouldIgnore())return;a()||(e+=1);let S=[E.x,E.y],R=t.element.getBoundingClientRect(),T=Math.floor(wU(S,R)),_=T<_U,C=E.composedPath().includes(t.element);Wf.set(t.element,T);let L=Math.min(...Wf.values())===T;C&&L?(E.preventDefault(),o(tn.OVER)):o(_&&L?tn.NEAR:tn.ACTIVE)},w=async E=>{if(t.shouldIgnore())return;E.preventDefault();let S=await vU(E.dataTransfer);t.onItems(S),o(tn.INACTIVE)};return n.addEventListener("drop",f),n.addEventListener("dragleave",h),n.addEventListener("dragenter",c),n.addEventListener("dragover",p),t.element.addEventListener("drop",w),Ww.forEach(E=>{window.addEventListener(E,l)}),()=>{Wf.delete(t.element),n.removeEventListener("drop",f),n.removeEventListener("dragleave",h),n.removeEventListener("dragenter",c),n.removeEventListener("dragover",p),t.element.removeEventListener("drop",w),Ww.forEach(E=>{window.removeEventListener(E,l)})}}const YI="lr-drop-area",fo=`${YI}/registry`;class $y extends Ke{constructor(){super(),this.init$={...this.init$,state:tn.INACTIVE,withIcon:!1,isClickable:!1,isFullscreen:!1,isEnabled:!0,isVisible:!0,text:"",[fo]:null}}isActive(){if(!this.$.isEnabled)return!1;const e=this.getBoundingClientRect(),n=e.width>0&&e.height>0,r=e.top>=0&&e.left>=0&&e.bottom<=(window.innerHeight||document.documentElement.clientHeight)&&e.right<=(window.innerWidth||document.documentElement.clientWidth),i=window.getComputedStyle(this),s=i.visibility!=="hidden"&&i.display!=="none";return n&&s&&r}initCallback(){super.initCallback(),this.bindL10n("text",()=>this.l10n("drop-files-here")),this.$[fo]||(this.$[fo]=new Set),this.$[fo].add(this),this.defineAccessor("disabled",n=>{this.set$({isEnabled:!nt(n)})}),this.defineAccessor("clickable",n=>{this.set$({isClickable:nt(n)})}),this.defineAccessor("with-icon",n=>{this.set$({withIcon:nt(n)})}),this.defineAccessor("fullscreen",n=>{this.set$({isFullscreen:nt(n)})}),this.defineAccessor("text",n=>{typeof n=="string"?this.bindL10n("text",()=>this.l10n(n)||n):this.bindL10n("text",()=>this.l10n("drop-files-here"))}),this._destroyDropzone=qw({element:this,shouldIgnore:()=>this._shouldIgnore(),onChange:n=>{this.$.state=n},onItems:n=>{n.length&&(n.forEach(r=>{r.type==="url"?this.addFileFromUrl(r.url,{source:sr.DROP_AREA}):r.type==="file"&&this.addFileFromObject(r.file,{source:sr.DROP_AREA,fullPath:r.fullPath})}),this.uploadCollection.size&&(this.set$({"*currentActivity":fe.activities.UPLOAD_LIST}),this.setOrAddState("*modalActive",!0)))}});let e=this.ref["content-wrapper"];e&&(this._destroyContentWrapperDropzone=qw({element:e,onChange:n=>{var i;const r=(i=Object.entries(tn).find(([,s])=>s===n))==null?void 0:i[0].toLowerCase();r&&e.setAttribute("drag-state",r)},onItems:()=>{},shouldIgnore:()=>this._shouldIgnore()})),this.sub("state",n=>{var i;const r=(i=Object.entries(tn).find(([,s])=>s===n))==null?void 0:i[0].toLowerCase();r&&this.setAttribute("drag-state",r)}),this.subConfigValue("sourceList",n=>{const r=Gr(n);this.$.isEnabled=r.includes(Ke.sourceTypes.LOCAL),this.$.isVisible=this.$.isEnabled||!this.querySelector("[data-default-slot]")}),this.sub("isVisible",n=>{this.toggleAttribute("hidden",!n)}),this.sub("isClickable",n=>{this.toggleAttribute("clickable",n)}),this.$.isClickable&&(this._onAreaClicked=()=>{this.openSystemDialog()},this.addEventListener("click",this._onAreaClicked))}_shouldIgnore(){return!this.$.isEnabled||!this._couldHandleFiles()?!0:this.$.isFullscreen?[...this.$[fo]].filter(r=>r!==this).filter(r=>r.isActive()).length>0:!1}_couldHandleFiles(){let e=this.cfg.multiple,n=this.cfg.multipleMax,r=this.uploadCollection.size;return!(e&&n&&r>=n||!e&&r>0)}destroyCallback(){var n,r;super.destroyCallback();const e=this.$[fo];e&&(e.delete(this),e.size===0&&xe.deleteCtx(YI)),(n=this._destroyDropzone)==null||n.call(this),(r=this._destroyContentWrapperDropzone)==null||r.call(this),this._onAreaClicked&&this.removeEventListener("click",this._onAreaClicked)}}$y.template=`
  <slot>
    <div data-default-slot hidden></div>
    <div ref="content-wrapper" class="content-wrapper" set="@hidden: !isVisible">
      <div class="icon-container" set="@hidden: !withIcon">
        <lr-icon name="default"></lr-icon>
        <lr-icon name="arrow-down"></lr-icon>
      </div>
      <span class="text">{{text}}</span>
    </div>
  </slot>
`;$y.bindAttributes({"with-icon":null,clickable:null,text:null,fullscreen:null,disabled:null});const EU="src-type-";class Fy extends Ke{constructor(){super();V(this,"couldBeCtxOwner",!0);V(this,"type");V(this,"_registeredTypes",{});this.init$={...this.init$,iconName:"default","src-type":""}}initTypes(){this.registerType({type:Ke.sourceTypes.LOCAL,activate:()=>(this.openSystemDialog(),!1)}),this.registerType({type:Ke.sourceTypes.URL,activity:fe.activities.URL,textKey:"from-url"}),this.registerType({type:Ke.sourceTypes.CAMERA,activity:fe.activities.CAMERA,activate:()=>{const n="capture"in document.createElement("input");return n&&this.openSystemDialog({captureCamera:!0}),!n}}),this.registerType({type:"draw",activity:fe.activities.DRAW,icon:"edit-draw"});for(let n of Object.values(Ke.extSrcList))this.registerType({type:n,activity:fe.activities.EXTERNAL,activityParams:{externalSourceType:n}})}initCallback(){super.initCallback(),this.initTypes(),this.setAttribute("role","button"),this.defineAccessor("type",n=>{n&&this.applyType(n)})}registerType(n){this._registeredTypes[n.type]=n}getType(n){return this._registeredTypes[n]}activate(){if(!this.type)return;const n=this._registeredTypes[this.type],{activity:r,activate:i,activityParams:s={}}=n;(i?i():!!r)&&this.set$({"*currentActivityParams":s,"*currentActivity":r})}applyType(n){const r=this._registeredTypes[n];if(!r){console.warn("Unsupported source type: "+n);return}const{textKey:i=n,icon:s=n}=r;this.$["src-type"]=`${EU}${i}`,this.$.iconName=s,this.onclick=()=>{this.activate()}}}Fy.template=`
  <lr-icon set="@name: iconName"></lr-icon>
  <div class="txt" l10n="src-type"></div>
`;Fy.bindAttributes({type:null});class bU extends Oe{initCallback(){super.initCallback(),this.subConfigValue("sourceList",e=>{let n=Gr(e),r="";n.forEach(i=>{r+=`<lr-source-btn type="${i}"></lr-source-btn>`}),this.cfg.sourceListWrap?this.innerHTML=r:this.outerHTML=r})}}const Fd=()=>{const t=[];return{stack:t,promiseReadJpegChunks:n=>new Promise((r,i)=>{let s=2;const o=(c,h)=>{const f=new FileReader;f.addEventListener("load",()=>{h(new DataView(f.result))}),f.addEventListener("error",p=>{i(`Reader error: ${p}`)}),f.readAsArrayBuffer(c)},a=()=>o(n.slice(s,s+128),c=>{let h,f,p;for(h=f=0,p=c.byteLength;p>=0?f<p:f>p;h=p>=0?++f:--f)if(c.getUint8(h)===255){s+=h;break}l()}),l=()=>{const c=s;return o(n.slice(s,s+=4),h=>{if(h.byteLength!==4||h.getUint8(0)!==255){i("Corrupted");return}const f=h.getUint8(1);if(f===218){r(!0);return}const p=h.getUint16(2)-2;return o(n.slice(s,s+=p),w=>{if(w.byteLength!==p){i("Corrupted");return}t.push({startPos:c,length:p,marker:f,view:w}),a()})})};FileReader&&DataView||i("Not Support"),o(n.slice(0,2),c=>{c.getUint16(0)!==65496&&i("Not jpeg"),a()})})}},TU=async t=>{const e=[],{promiseReadJpegChunks:n,stack:r}=Fd();return await n(t),r.forEach(({marker:i,view:s})=>{i===226&&s.getUint32(0)===1229144927&&s.getUint32(4)===1347571526&&s.getUint32(8)===1229735168&&e.push(s)}),e},JI=async(t,e,n)=>{{const r=[],i=[],{promiseReadJpegChunks:s,stack:o}=Fd();await s(t),o.forEach(c=>{if(c.marker===e)return r.push(c.startPos),i.push(c.length)});const a=[t.slice(0,2)];for(const c of n){const h=new DataView(new ArrayBuffer(4));h.setUint16(0,65280+e),h.setUint16(2,c.byteLength+2),a.push(h.buffer),a.push(c)}let l=2;for(let c=0;c<r.length;c++)r[c]>l&&a.push(t.slice(l,r[c])),l=r[c]+i[c]+4;return a.push(t.slice(l,t.size)),new Blob(a,{type:t.type})}},CU=226,ZI=(t,e)=>JI(t,CU,e.map(n=>n.buffer)),IU=async t=>{try{return await ZI(t,[])}catch(e){throw new Error(`Failed to strip ICC profile: ${e}`)}},SU=(t,e,n)=>new Promise((r,i)=>{const s=o=>{if(!o){i("Failed to convert canvas to blob");return}r(o)};t.toBlob(s,e,n),t.width=t.height=1}),cu=()=>{const t=document.createElement("canvas"),e=t.getContext("2d");return{canvas:t,ctx:e}},AU=t=>{const{ctx:n,canvas:r}=cu();r.width=r.height=50,n.drawImage(t,0,0,50,50);const i=n.getImageData(0,0,50,50).data;r.width=r.height=1;for(let s=3;s<i.length;s+=4)if(i[s]<254)return!0;return!1},xU=async t=>{let e=null;const{promiseReadJpegChunks:n,stack:r}=Fd();return await n(t),r.forEach(({marker:i,view:s})=>{if(!e&&i===225&&s.byteLength>=14&&s.getUint32(0)===1165519206&&s.getUint16(4)===0){e=s;return}}),e},kU="data:image/jpg;base64,/9j/4AAQSkZJRgABAQEASABIAAD/4QA6RXhpZgAATU0AKgAAAAgAAwESAAMAAAABAAYAAAEoAAMAAAABAAIAAAITAAMAAAABAAEAAAAAAAD/2wBDAP//////////////////////////////////////////////////////////////////////////////////////wAALCAABAAIBASIA/8QAJgABAAAAAAAAAAAAAAAAAAAAAxABAAAAAAAAAAAAAAAAAAAAAP/aAAgBAQAAPwBH/9k=";let bc;const PU=()=>new Promise(t=>{if(bc!==void 0)t(bc);else{const e=new Image;e.addEventListener("load",()=>{bc=e.naturalWidth<e.naturalHeight,e.src="//:0",t(bc)}),e.src=kU}}),RU=(t,e)=>{let n,r,i,s;if(!t||t.byteLength<14||t.getUint32(0)!==1165519206||t.getUint16(4)!==0)return;if(t.getUint16(6)===18761)r=!0;else if(t.getUint16(6)===19789)r=!1;else return;if(t.getUint16(8,r)!==42)return;i=8+t.getUint32(10,r);const o=t.getUint16(i-2,r);for(n=0,s=o;s>=0?n<s:n>s;s>=0?++n:--n){if(t.byteLength<i+10)return;t.getUint16(i,r)===274&&e(i+8,r),i+=12}},OU=(t,e)=>{RU(t,(n,r)=>t.setUint16(n,e,r))},NU=async(t,e,n)=>(n&&OU(e,1),JI(t,225,[e.buffer])),LU=(t,e)=>new Promise((n,r)=>{e&&(t.src=e),t.complete?n(t):(t.addEventListener("load",()=>{n(t)}),t.addEventListener("error",()=>{r(new Error("Failed to load image. Probably not an image."))}))}),DU=t=>LU(new Image,t),MU=[1,3],VU=[192,193,194,195,197,198,199,201,202,203,205,206,207],Gw={squareSide:[Math.floor(Math.sqrt(5*1e3*1e3)),4096,8192,11180,10836,11402,14188,16384],dimension:[4096,8192,16384,32767,65535]},UU=async t=>{let e=!1;const{promiseReadJpegChunks:n,stack:r}=Fd();return await n(t).then(()=>(r.forEach(({marker:i,view:s})=>{if(!e&&VU.indexOf(i)>=0){const o=s.getUint8(5);MU.indexOf(o)<0&&(e=!0)}}),e)).catch(()=>e)},eS=(t,e)=>{const n={};return(...r)=>{const i=e(r,n);return i in n?n[i]:n[i]=t(...r)}},tS=(t,e)=>{const[n]=t,r=Object.keys(e).map(i=>parseInt(i,10)).sort((i,s)=>i-s);for(let i=0;i<r.length;i++){const s=r[i],o=!!e[s];if(s>n&&o||s<n&&!o)return s}return n},bi={R:55,G:110,B:165,A:255},$U=`rgba(${bi.R}, ${bi.G}, ${bi.B}, ${bi.A/255})`,nS=(t,e)=>{try{const n=[t-1,e-1,1,1],{canvas:r,ctx:i}=cu();r.width=1,r.height=1;const{canvas:s,ctx:o}=cu();s.width=t,s.height=e,o&&(o.fillStyle=$U,o.fillRect(...n),i.drawImage(s,t-1,e-1,1,1,0,0,1,1));const a=i&&i.getImageData(0,0,1,1).data;let l=!1;return a&&(l=a[0]===bi.R&&a[1]===bi.G&&a[2]===bi.B&&a[3]===bi.A),s.width=s.height=1,l}catch{return console.error(`Failed to test for max canvas size of ${t}x${e}.`),!1}};function rS(t){return(...e)=>new Promise(n=>{setTimeout(()=>{const r=t(...e);n(r)},0)})}const FU=rS(eS(nS,tS)),jU=rS(eS(nS,tS)),iS=async(t,e)=>{const n=Gw.squareSide.find(o=>o*o>=t*e),r=Gw.dimension.find(o=>o>=t&&o>=e);if(!n||!r)throw new Error("Not supported");const[i,s]=await Promise.all([FU(n,n),jU(r,1)]);if(i&&s)return!0;throw new Error("Not supported")},sS=async(t,e,n)=>{try{const{ctx:r,canvas:i}=cu();return i.width=e,i.height=n,r.imageSmoothingQuality="high",r.drawImage(t,0,0,e,n),t instanceof HTMLImageElement&&(t.src="//:0"),t instanceof HTMLCanvasElement&&(t.width=t.height=1),i}catch(r){throw new Error("Canvas resize error",{cause:r})}},zU=({img:t,targetW:e,targetH:n})=>sS(t,e,n),BU=function({sourceW:t,targetW:e,targetH:n,step:r}){const i=[];let s=e,o=n;do i.push([s,o]),s=Math.round(s/r),o=Math.round(o/r);while(s<t*r);return i.reverse()},HU=({img:t,sourceW:e,targetW:n,targetH:r,step:i})=>BU({sourceW:e,targetW:n,targetH:r,step:i}).reduce((o,[a,l])=>o.then(c=>iS(a,l).then(()=>sS(c,a,l)).catch(()=>c)),Promise.resolve(t)),WU=()=>/iPad|iPhone|iPod/.test(navigator.platform)?!0:navigator.maxTouchPoints&&navigator.maxTouchPoints>2&&/MacIntel/.test(navigator.platform),qU=navigator.maxTouchPoints&&navigator.maxTouchPoints>2&&/MacIntel/.test(navigator.platform),qf=.71,GU=(t,e)=>{if(t.width*qf*t.height*qf<e.size)throw new Error("Not required");const n=t.width,r=t.height,i=n/r,s=Math.floor(Math.sqrt(e.size*i)),o=Math.floor(e.size/Math.sqrt(e.size*i));return iS(s,o).then(()=>{const{ctx:a}=cu();return"imageSmoothingQuality"in a&&!WU()&&!qU?zU({img:t,targetW:s,targetH:o}):HU({img:t,sourceW:n,targetW:s,targetH:o,step:qf})}).catch(()=>Promise.reject("Not supported"))},KU=async(t,e)=>{try{if(await UU(t))throw new Error("Should skipped");const r=await Promise.allSettled([xU(t),PU(),TU(t)]),s=!r.some(S=>S.status==="rejected"),[o,a,l]=r,c=await IU(t).catch(()=>t),h=await DU(URL.createObjectURL(c));URL.revokeObjectURL(h.src);const f=await GU(h,e);let p="image/jpeg",w=(e==null?void 0:e.quality)||.8;!s&&AU(f)&&(p="image/png",w=void 0);let E=await SU(f,p,w);if(s&&o.status==="fulfilled"&&o.value){const S=o.value,R=a.status==="fulfilled"?a.value:!1;E=await NU(E,S,R)}return s&&l.status==="fulfilled"&&l.value.length>0&&(E=await ZI(E,l.value)),E}catch(n){let r;throw n instanceof Error&&(r=n.message),typeof n=="string"&&(r=n),new Error(`Failed to shrink image. ${r?`Message: "${r}".`:""}`,{cause:n})}};function oS(t){let e=new Blob([t],{type:"image/svg+xml"});return URL.createObjectURL(e)}function QU(t="#fff",e="rgba(0, 0, 0, .1)"){return oS(`<svg height="20" width="20" viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg">
    <rect x="0" y="0" width="20" height="20" fill="${t}" />
    <rect x="0" y="0" width="10" height="10" fill="${e}" />
    <rect x="10" y="10" width="10" height="10" fill="${e}" />
  </svg>`)}function Kw(t="hsl(209, 21%, 65%)",e=32,n=32){return oS(`
  <svg width="${e}" height="${n}" viewBox="0 0 30 30" fill="none" xmlns="http://www.w3.org/2000/svg">
    <path fill-rule="evenodd" fill="${t}" d="M9.68848 8.70068C9.68848 8.42454 9.91233 8.20068 10.1885 8.20068H15.0885C15.2211 8.20068 15.3483 8.25336 15.442 8.34713L20.342 13.2471C20.4358 13.3409 20.4885 13.4681 20.4885 13.6007V21.3007C20.4885 21.5768 20.2646 21.8007 19.9885 21.8007H10.1885C9.91233 21.8007 9.68848 21.5768 9.68848 21.3007V8.70068ZM10.6885 9.20068V20.8007H19.4885V14.1007L15.0885 14.1007C14.8123 14.1007 14.5885 13.8768 14.5885 13.6007L14.5885 9.20068H10.6885ZM15.5885 9.90779L18.7814 13.1007L15.5885 13.1007L15.5885 9.90779Z"/>
  </svg>
  `)}function XU(t,e=40){if(t.type==="image/svg+xml")return URL.createObjectURL(t);let n=document.createElement("canvas"),r=n.getContext("2d"),i=new Image,s=new Promise((o,a)=>{i.onload=()=>{let l=i.height/i.width;l>1?(n.width=e,n.height=e*l):(n.height=e,n.width=e/l),r.fillStyle="rgb(240, 240, 240)",r.fillRect(0,0,n.width,n.height),r.drawImage(i,0,0,n.width,n.height),n.toBlob(c=>{if(!c){a();return}let h=URL.createObjectURL(c);o(h)})},i.onerror=l=>{a(l)}});return i.src=URL.createObjectURL(t),s}const Qw=16384,YU=/^([0-9]+)x([0-9]+)(?:\s+(\d{1,2}|100)%)?$/i,JU=t=>{const e=YU.exec(t==null?void 0:t.toLocaleLowerCase())||[];if(!e.length)return!1;const n=e[1]*e[2],r=Qw*Qw;return n>r?(console.warn(`Shrinked size can not be larger than ${Math.floor(r/1e3/1e3)}MP. You have set ${e[1]}x${e[2]} (${Math.ceil(n/1e3/100)/10}MP).`),!1):{quality:e[3]?e[3]/100:void 0,size:n}},wn=Object.freeze({FINISHED:Symbol(0),FAILED:Symbol(1),UPLOADING:Symbol(2),IDLE:Symbol(3)});class As extends Ke{constructor(){super();V(this,"couldBeCtxOwner",!0);V(this,"pauseRender",!0);V(this,"_entrySubs",new Set);V(this,"_entry",null);V(this,"_isIntersecting",!1);V(this,"_debouncedGenerateThumb",Dn(this._generateThumbnail.bind(this),100));V(this,"_debouncedCalculateState",Dn(this._calculateState.bind(this),100));V(this,"_renderedOnce",!1);this.init$={...this.init$,uid:"",itemName:"",errorText:"",thumbUrl:"",progressValue:0,progressVisible:!1,badgeIcon:"",isFinished:!1,isFailed:!1,isUploading:!1,isFocused:!1,isEditable:!1,state:wn.IDLE,onEdit:()=>{this.set$({"*focusedEntry":this._entry}),this.hasBlockInCtx(n=>n.activityType===fe.activities.DETAILS)?this.$["*currentActivity"]=fe.activities.DETAILS:this.$["*currentActivity"]=fe.activities.CLOUD_IMG_EDIT},onRemove:()=>{this.uploadCollection.remove(this.$.uid)},onUpload:()=>{this.upload()}}}_reset(){for(let n of this._entrySubs)n.remove();this._debouncedGenerateThumb.cancel(),this._debouncedCalculateState.cancel(),this._entrySubs=new Set,this._entry=null}_observerCallback(n){let[r]=n;this._isIntersecting=r.isIntersecting,r.isIntersecting&&!this._renderedOnce&&(this.render(),this._renderedOnce=!0),r.intersectionRatio===0?this._debouncedGenerateThumb.cancel():this._debouncedGenerateThumb()}_calculateState(){if(!this._entry)return;let n=this._entry,r=wn.IDLE;n.getValue("errors").length>0?r=wn.FAILED:n.getValue("isUploading")?r=wn.UPLOADING:n.getValue("fileInfo")&&(r=wn.FINISHED),this.$.state=r}async _generateThumbnail(){var r;if(!this._entry)return;let n=this._entry;if(n.getValue("fileInfo")&&n.getValue("isImage")){let i=this.cfg.thumbSize,s=this.proxyUrl(xn(uu(this.cfg.cdnCname,this._entry.getValue("uuid")),Wi(n.getValue("cdnUrlModifiers"),`scale_crop/${i}x${i}/center`))),o=n.getValue("thumbUrl");o!==s&&(n.setValue("thumbUrl",s),o!=null&&o.startsWith("blob:")&&URL.revokeObjectURL(o));return}if(!n.getValue("thumbUrl"))if((r=n.getValue("file"))!=null&&r.type.includes("image"))try{let i=await XU(n.getValue("file"),this.cfg.thumbSize);n.setValue("thumbUrl",i)}catch{let s=window.getComputedStyle(this).getPropertyValue("--clr-generic-file-icon");n.setValue("thumbUrl",Kw(s))}else{let i=window.getComputedStyle(this).getPropertyValue("--clr-generic-file-icon");n.setValue("thumbUrl",Kw(i))}}_subEntry(n,r){let i=this._entry.subscribe(n,s=>{this.isConnected&&r(s)});this._entrySubs.add(i)}_handleEntryId(n){var i;this._reset();let r=(i=this.uploadCollection)==null?void 0:i.read(n);this._entry=r,r&&(this._subEntry("uploadProgress",s=>{this.$.progressValue=s}),this._subEntry("fileName",s=>{this.$.itemName=s||r.getValue("externalUrl")||this.l10n("file-no-name"),this._debouncedCalculateState()}),this._subEntry("externalUrl",s=>{this.$.itemName=r.getValue("fileName")||s||this.l10n("file-no-name")}),this._subEntry("fileInfo",s=>{this._debouncedCalculateState(),s&&this._isIntersecting&&this._debouncedGenerateThumb()}),this._subEntry("cdnUrlModifiers",()=>{this._isIntersecting&&this._debouncedGenerateThumb()}),this._subEntry("thumbUrl",s=>{this.$.thumbUrl=s?`url(${s})`:""}),this._subEntry("errors",()=>this._debouncedCalculateState()),this._subEntry("isUploading",()=>this._debouncedCalculateState()),this._subEntry("fileSize",()=>this._debouncedCalculateState()),this._subEntry("mimeType",()=>this._debouncedCalculateState()),this._subEntry("isImage",()=>this._debouncedCalculateState()),this._isIntersecting&&this._debouncedGenerateThumb())}initCallback(){super.initCallback(),this.sub("uid",n=>{this._handleEntryId(n)}),this.sub("state",n=>{this._handleState(n)}),this.subConfigValue("useCloudImageEditor",()=>this._debouncedCalculateState()),this.onclick=()=>{As.activeInstances.forEach(n=>{n===this?n.setAttribute("focused",""):n.removeAttribute("focused")})},this.sub("*uploadTrigger",n=>{n.has(this._entry.uid)&&setTimeout(()=>this.isConnected&&this.upload())}),As.activeInstances.add(this)}_handleState(n){var r,i,s,o;n===wn.FAILED?this.$.badgeIcon="badge-error":n===wn.FINISHED&&(this.$.badgeIcon="badge-success"),n===wn.UPLOADING?this.$.isFocused=!1:this.$.progressValue=0,this.set$({isFailed:n===wn.FAILED,isUploading:n===wn.UPLOADING,isFinished:n===wn.FINISHED,progressVisible:n===wn.UPLOADING,isEditable:this.cfg.useCloudImageEditor&&((r=this._entry)==null?void 0:r.getValue("isImage"))&&((i=this._entry)==null?void 0:i.getValue("cdnUrl")),errorText:(o=(s=this._entry.getValue("errors"))==null?void 0:s[0])==null?void 0:o.message})}destroyCallback(){super.destroyCallback(),As.activeInstances.delete(this),this._reset()}connectedCallback(){super.connectedCallback(),this._observer=new window.IntersectionObserver(this._observerCallback.bind(this),{root:this.parentElement,rootMargin:"50% 0px 50% 0px",threshold:[0,1]}),this._observer.observe(this)}disconnectedCallback(){var n;super.disconnectedCallback(),this._debouncedGenerateThumb.cancel(),(n=this._observer)==null||n.disconnect()}_settingsOfShrink(){return JU(this.cfg.imageShrink)}_processShrink(n){return KU(n,this._settingsOfShrink())}async upload(){var i,s;let n=this._entry;if(!this.uploadCollection.read(n.uid)||n.getValue("fileInfo")||n.getValue("isUploading")||n.getValue("errors").length>0)return;const r=this.cfg.multiple?this.cfg.multipleMax:1;if(!(r&&this.uploadCollection.size>r)){this._debouncedCalculateState(),n.setValue("isUploading",!0),n.setValue("errors",[]);try{let o=new AbortController;n.setValue("abortController",o);const a=async()=>{let c=n.getValue("file");c&&this.cfg.imageShrink&&(c=await this._processShrink(c).catch(()=>c));const h=c||n.getValue("externalUrl")||n.getValue("uuid"),p={...this.getUploadClientOptions(),fileName:n.getValue("fileName"),source:n.getValue("source"),onProgress:w=>{if(w.isComputable){let E=w.value*100;n.setValue("uploadProgress",E)}},signal:o.signal,metadata:await this.getMetadataFor(n.uid)};return this.debugPrint("upload options",h,p),PI(h,p)};let l=await this.$["*uploadQueue"].add(a);n.setMultipleValues({fileInfo:l,isUploading:!1,fileName:l.originalFilename,fileSize:l.size,isImage:l.isImage,mimeType:((s=(i=l.contentInfo)==null?void 0:i.mime)==null?void 0:s.mime)??l.mimeType,uuid:l.uuid,cdnUrl:n.getValue("cdnUrl")??l.cdnUrl,cdnUrlModifiers:n.getValue("cdnUrlModifiers")??"",uploadProgress:100}),n===this._entry&&this._debouncedCalculateState()}catch(o){o instanceof js&&o.isCancel?n.setMultipleValues({isUploading:!1,uploadProgress:0}):n.setMultipleValues({isUploading:!1,uploadProgress:0,uploadError:o}),n===this._entry&&this._debouncedCalculateState()}}}}As.template=`
  <div class="inner" set="@finished: isFinished; @uploading: isUploading; @failed: isFailed; @focused: isFocused">
    <div class="thumb" set="style.backgroundImage: thumbUrl">
      <div class="badge">
        <lr-icon set="@name: badgeIcon"></lr-icon>
      </div>
    </div>
    <div class="file-name-wrapper">
      <span class="file-name" set="@title: itemName">{{itemName}}</span>
      <span class="file-error" set="@hidden: !errorText">{{errorText}}</span>
    </div>
    <div class="file-actions">
      <button type="button" class="edit-btn mini-btn" set="onclick: onEdit; @hidden: !isEditable">
        <lr-icon name="edit-file"></lr-icon>
      </button>
      <button type="button" class="remove-btn mini-btn" set="onclick: onRemove;">
        <lr-icon name="remove-file"></lr-icon>
      </button>
      <button type="button" class="upload-btn mini-btn" set="onclick: onUpload;">
        <lr-icon name="upload"></lr-icon>
      </button>
    </div>
    <lr-progress-bar class="progress-bar" set="value: progressValue; visible: progressVisible;"> </lr-progress-bar>
  </div>
`;As.activeInstances=new Set;class jy extends Oe{constructor(){super();V(this,"_handleBackdropClick",()=>{this._closeDialog()});V(this,"_closeDialog",()=>{this.setOrAddState("*modalActive",!1)});V(this,"_handleDialogClose",()=>{this._closeDialog()});V(this,"_handleDialogMouseDown",n=>{this._mouseDownTarget=n.target});V(this,"_handleDialogMouseUp",n=>{n.target===this.ref.dialog&&n.target===this._mouseDownTarget&&this._closeDialog()});this.init$={...this.init$,"*modalActive":!1,isOpen:!1,closeClicked:this._handleDialogClose}}show(){this.ref.dialog.showModal?this.ref.dialog.showModal():this.ref.dialog.setAttribute("open","")}hide(){this.ref.dialog.close?this.ref.dialog.close():this.ref.dialog.removeAttribute("open")}initCallback(){if(super.initCallback(),typeof HTMLDialogElement=="function")this.ref.dialog.addEventListener("close",this._handleDialogClose),this.ref.dialog.addEventListener("mousedown",this._handleDialogMouseDown),this.ref.dialog.addEventListener("mouseup",this._handleDialogMouseUp);else{this.setAttribute("dialog-fallback","");let n=document.createElement("div");n.className="backdrop",this.appendChild(n),n.addEventListener("click",this._handleBackdropClick)}this.sub("*modalActive",n=>{this.$.isOpen!==n&&(this.$.isOpen=n),n&&this.cfg.modalScrollLock?document.body.style.overflow="hidden":document.body.style.overflow=""}),this.subConfigValue("modalBackdropStrokes",n=>{n?this.setAttribute("strokes",""):this.removeAttribute("strokes")}),this.sub("isOpen",n=>{n?this.show():this.hide()})}destroyCallback(){super.destroyCallback(),document.body.style.overflow="",this._mouseDownTarget=void 0,this.ref.dialog.removeEventListener("close",this._handleDialogClose),this.ref.dialog.removeEventListener("mousedown",this._handleDialogMouseDown),this.ref.dialog.removeEventListener("mouseup",this._handleDialogMouseUp)}}V(jy,"StateConsumerScope","modal");jy.template=`
  <dialog ref="dialog">
    <slot></slot>
  </dialog>
`;const aS=(t,e)=>{let n,r,i;const s=(...o)=>{n?(clearTimeout(r),r=setTimeout(()=>{Date.now()-i>=e&&(t(...o),i=Date.now())},Math.max(e-(Date.now()-i),0))):(t(...o),i=Date.now(),n=!0)};return Object.defineProperty(s,"cancel",{configurable:!1,writable:!1,enumerable:!1,value:()=>{clearTimeout(r)}}),s};class lS extends Ke{constructor(){super();V(this,"couldBeCtxOwner",!0);V(this,"historyTracked",!0);V(this,"activityType",fe.activities.UPLOAD_LIST);V(this,"_throttledHandleCollectionUpdate",aS(()=>{this.isConnected&&(this._updateUploadsState(),!this.couldOpenActivity&&this.$["*currentActivity"]===this.activityType&&this.historyBack())},300));this.init$={...this.init$,doneBtnVisible:!1,doneBtnEnabled:!1,uploadBtnVisible:!1,addMoreBtnVisible:!1,addMoreBtnEnabled:!1,headerText:"",commonErrorMessage:"",hasFiles:!1,onAdd:()=>{this.initFlow(!0)},onUpload:()=>{this.emit(tt.UPLOAD_CLICK),this.uploadAll(),this._throttledHandleCollectionUpdate()},onDone:()=>{this.emit(tt.DONE_CLICK,this.getOutputCollectionState()),this.doneFlow()},onCancel:()=>{this.uploadCollection.clearAll()}}}_updateUploadsState(){const n=this.getOutputCollectionState(),r={total:n.totalCount,succeed:n.successCount,uploading:n.uploadingCount,failed:n.failedCount},i=!n.errors.some(p=>p.type==="TOO_MANY_FILES"||p.type==="TOO_FEW_FILES"),s=n.errors.some(p=>p.type==="TOO_MANY_FILES"),o=n.totalCount===(this.cfg.multiple?this.cfg.multipleMax:1),a=r.failed===0;let l=!1,c=!1,h=!1;r.total-r.succeed-r.uploading-r.failed>0&&i?l=!0:(c=!0,h=r.total===r.succeed&&i&&a),this.set$({doneBtnVisible:c,doneBtnEnabled:h,uploadBtnVisible:l,addMoreBtnEnabled:r.total===0||!s&&!o,addMoreBtnVisible:!o||this.cfg.multiple}),this.bindL10n("headerText",()=>this._getHeaderText(r))}_getHeaderText(n){const r=i=>{const s=n[i];return this.l10n(`header-${i}`,{count:s})};return n.uploading>0?r("uploading"):n.failed>0?r("failed"):n.succeed>0?r("succeed"):r("total")}get couldOpenActivity(){return this.cfg.showEmptyList||this.uploadCollection.size>0}initCallback(){super.initCallback(),this.registerActivity(this.activityType),this.subConfigValue("multiple",this._throttledHandleCollectionUpdate),this.subConfigValue("multipleMin",this._throttledHandleCollectionUpdate),this.subConfigValue("multipleMax",this._throttledHandleCollectionUpdate),this.sub("*currentActivity",n=>{!this.couldOpenActivity&&n===this.activityType&&(this.$["*currentActivity"]=this.initActivity)}),this.uploadCollection.observeProperties(this._throttledHandleCollectionUpdate),this.sub("*uploadList",n=>{this._throttledHandleCollectionUpdate(),this.set$({hasFiles:n.length>0}),this.cfg.confirmUpload||this.uploadAll()},!1),this.sub("*collectionErrors",n=>{const r=n.filter(i=>i.type!=="SOME_FILES_HAS_ERRORS")[0];if(!r){this.set$({commonErrorMessage:null});return}this.set$({commonErrorMessage:r.message})})}destroyCallback(){super.destroyCallback(),this.uploadCollection.unobserveProperties(this._throttledHandleCollectionUpdate)}}lS.template=`
  <lr-activity-header>
    <span class="header-text">{{headerText}}</span>
    <button type="button" class="mini-btn close-btn" set="onclick: *closeModal">
      <lr-icon name="close"></lr-icon>
    </button>
  </lr-activity-header>

  <div class="no-files" set="@hidden: hasFiles">
    <slot name="empty"><span l10n="no-files"></span></slot>
  </div>

  <div class="files" repeat="*uploadList" repeat-item-tag="lr-file-item"></div>

  <div class="common-error" set="@hidden: !commonErrorMessage; textContent: commonErrorMessage;"></div>

  <div class="toolbar">
    <button type="button" class="cancel-btn secondary-btn" set="onclick: onCancel;" l10n="clear"></button>
    <div class="toolbar-spacer"></div>
    <button
      type="button"
      class="add-more-btn secondary-btn"
      set="onclick: onAdd; @disabled: !addMoreBtnEnabled; @hidden: !addMoreBtnVisible"
    >
      <lr-icon name="add"></lr-icon><span l10n="add-more"></span>
    </button>
    <button
      type="button"
      class="upload-btn primary-btn"
      set="@hidden: !uploadBtnVisible; onclick: onUpload;"
      l10n="upload"
    ></button>
    <button
      type="button"
      class="done-btn primary-btn"
      set="@hidden: !doneBtnVisible; onclick: onDone;  @disabled: !doneBtnEnabled"
      l10n="done"
    ></button>
  </div>

  <lr-drop-area ghost></lr-drop-area>
`;class uS extends Ke{constructor(){super(...arguments);V(this,"couldBeCtxOwner",!0);V(this,"activityType",fe.activities.URL);V(this,"init$",{...this.init$,importDisabled:!0,onUpload:n=>{n.preventDefault();let r=this.ref.input.value;this.addFileFromUrl(r,{source:sr.URL_TAB}),this.$["*currentActivity"]=fe.activities.UPLOAD_LIST},onCancel:()=>{this.historyBack()},onInput:n=>{let r=n.target.value;this.set$({importDisabled:!r})}})}initCallback(){super.initCallback(),this.registerActivity(this.activityType,{onActivate:()=>{this.ref.input.value="",this.ref.input.focus()}})}}uS.template=`
  <lr-activity-header>
    <button type="button" class="mini-btn" set="onclick: *historyBack">
      <lr-icon name="back"></lr-icon>
    </button>
    <div>
      <lr-icon name="url"></lr-icon>
      <span l10n="caption-from-url"></span>
    </div>
    <button type="button" class="mini-btn close-btn" set="onclick: *closeModal">
      <lr-icon name="close"></lr-icon>
    </button>
  </lr-activity-header>
  <form class="content">
    <input placeholder="https://" class="url-input" type="text" ref="input" set="oninput: onInput" />
    <button
      type="submit"
      class="url-upload-btn primary-btn"
      set="onclick: onUpload; @disabled: importDisabled"
      l10n="upload-url"
    ></button>
  </form>
`;const Xw=()=>typeof navigator.permissions<"u";class cS extends Ke{constructor(){super(...arguments);V(this,"couldBeCtxOwner",!0);V(this,"activityType",fe.activities.CAMERA);V(this,"_unsubPermissions",null);V(this,"init$",{...this.init$,video:null,videoTransformCss:null,shotBtnDisabled:!0,videoHidden:!0,messageHidden:!0,requestBtnHidden:Xw(),cameraSelectOptions:null,cameraSelectHidden:!0,l10nMessage:"",onCameraSelectChange:n=>{this._selectedCameraId=n.target.value,this._capture()},onCancel:()=>{this.historyBack()},onShot:()=>{this._shot()},onRequestPermissions:()=>{this._capture()}});V(this,"_onActivate",()=>{Xw()&&this._subscribePermissions(),this._capture()});V(this,"_onDeactivate",()=>{this._unsubPermissions&&this._unsubPermissions(),this._stopCapture()});V(this,"_handlePermissionsChange",()=>{this._capture()});V(this,"_setPermissionsState",Dn(n=>{this.classList.toggle("initialized",n==="granted"),n==="granted"?this.set$({videoHidden:!1,shotBtnDisabled:!1,messageHidden:!0}):n==="prompt"?(this.$.l10nMessage="camera-permissions-prompt",this.set$({videoHidden:!0,shotBtnDisabled:!0,messageHidden:!1}),this._stopCapture()):(this.$.l10nMessage="camera-permissions-denied",this.set$({videoHidden:!0,shotBtnDisabled:!0,messageHidden:!1}),this._stopCapture())},300))}async _subscribePermissions(){try{(await navigator.permissions.query({name:"camera"})).addEventListener("change",this._handlePermissionsChange)}catch(n){console.log("Failed to use permissions API. Fallback to manual request mode.",n),this._capture()}}async _capture(){let n={video:{width:{ideal:1920},height:{ideal:1080},frameRate:{ideal:30}},audio:!1};this._selectedCameraId&&(n.video.deviceId={exact:this._selectedCameraId}),this._canvas=document.createElement("canvas"),this._ctx=this._canvas.getContext("2d");try{this._setPermissionsState("prompt");let r=await navigator.mediaDevices.getUserMedia(n);r.addEventListener("inactive",()=>{this._setPermissionsState("denied")}),this.$.video=r,this._capturing=!0,this._setPermissionsState("granted")}catch(r){this._setPermissionsState("denied"),console.error("Failed to capture camera",r)}}_stopCapture(){var n;this._capturing&&((n=this.$.video)==null||n.getTracks()[0].stop(),this.$.video=null,this._capturing=!1)}_shot(){this._canvas.height=this.ref.video.videoHeight,this._canvas.width=this.ref.video.videoWidth,this._ctx.drawImage(this.ref.video,0,0);const n=Date.now(),r=`camera-${n}.jpeg`,i="image/jpeg";this._canvas.toBlob(s=>{let o=new File([s],r,{lastModified:n,type:i});this.addFileFromObject(o,{source:sr.CAMERA}),this.set$({"*currentActivity":fe.activities.UPLOAD_LIST})},i)}async initCallback(){var n;super.initCallback(),this.registerActivity(this.activityType,{onActivate:this._onActivate,onDeactivate:this._onDeactivate}),this.subConfigValue("cameraMirror",r=>{this.$.videoTransformCss=r?"scaleX(-1)":null});try{let i=(await navigator.mediaDevices.enumerateDevices()).filter(s=>s.kind==="videoinput").map((s,o)=>({text:s.label.trim()||`${this.l10n("caption-camera")} ${o+1}`,value:s.deviceId}));i.length>1&&(this.$.cameraSelectOptions=i,this.$.cameraSelectHidden=!1),this._selectedCameraId=(n=i[0])==null?void 0:n.value}catch{}}}cS.template=`
  <lr-activity-header>
    <button type="button" class="mini-btn" set="onclick: *historyBack">
      <lr-icon name="back"></lr-icon>
    </button>
    <div set="@hidden: !cameraSelectHidden">
      <lr-icon name="camera"></lr-icon>
      <span l10n="caption-camera"></span>
    </div>
    <lr-select
      class="camera-select"
      set="$.options: cameraSelectOptions; @hidden: cameraSelectHidden; onchange: onCameraSelectChange"
    >
    </lr-select>
    <button type="button" class="mini-btn close-btn" set="onclick: *closeModal">
      <lr-icon name="close"></lr-icon>
    </button>
  </lr-activity-header>
  <div class="content">
    <video
      autoplay
      playsinline
      set="srcObject: video; style.transform: videoTransformCss; @hidden: videoHidden"
      ref="video"
    ></video>
    <div class="message-box" set="@hidden: messageHidden">
      <span l10n="l10nMessage"></span>
      <button
        type="button"
        set="onclick: onRequestPermissions; @hidden: requestBtnHidden"
        l10n="camera-permissions-request"
      ></button>
    </div>
    <button type="button" class="shot-btn" set="onclick: onShot; @disabled: shotBtnDisabled">
      <lr-icon name="camera"></lr-icon>
    </button>
  </div>
`;class hS extends Ke{constructor(){super(...arguments);V(this,"requireCtxName",!0)}initCallback(){super.initCallback(),this.$["*eventEmitter"].bindTarget(this)}destroyCallback(){super.destroyCallback(),this.$["*eventEmitter"].unbindTarget(this)}}hS.EventType=tt;const Tm=hS;class ZU{constructor(){V(this,"captionL10nStr","confirm-your-action");V(this,"messageL10Str","are-you-sure");V(this,"confirmL10nStr","yes");V(this,"denyL10nStr","no")}confirmAction(){console.log("Confirmed")}denyAction(){this.historyBack()}}class dS extends fe{constructor(){super(...arguments);V(this,"activityType",fe.activities.CONFIRMATION);V(this,"_defaults",new ZU);V(this,"init$",{...this.init$,activityCaption:"",messageTxt:"",confirmBtnTxt:"",denyBtnTxt:"","*confirmation":null,onConfirm:this._defaults.confirmAction,onDeny:this._defaults.denyAction.bind(this)})}initCallback(){super.initCallback(),this.set$({messageTxt:this.l10n(this._defaults.messageL10Str),confirmBtnTxt:this.l10n(this._defaults.confirmL10nStr),denyBtnTxt:this.l10n(this._defaults.denyL10nStr)}),this.sub("*confirmation",n=>{n&&this.set$({"*currentActivity":fe.activities.CONFIRMATION,activityCaption:this.l10n(n.captionL10nStr),messageTxt:this.l10n(n.messageL10Str),confirmBtnTxt:this.l10n(n.confirmL10nStr),denyBtnTxt:this.l10n(n.denyL10nStr),onDeny:()=>{n.denyAction()},onConfirm:()=>{n.confirmAction()}})})}}dS.template=`
  <lr-activity-header>
    <button type="button" class="mini-btn" set="onclick: *historyBack">
      <lr-icon name="back"></lr-icon>
    </button>
    <span>{{activityCaption}}</span>
    <button type="button" class="mini-btn close-btn" set="onclick: *closeModal">
      <lr-icon name="close"></lr-icon>
    </button>
  </lr-activity-header>

  <div class="message">{{messageTxt}}</div>
  <div class="toolbar">
    <button type="button" class="deny-btn secondary-btn" set="onclick: onDeny">{{denyBtnTxt}}</button>
    <button type="button" class="confirm-btn primary-btn" set="onclick: onConfirm">{{confirmBtnTxt}}</button>
  </div>
`;class fS extends Ke{constructor(){super(...arguments);V(this,"init$",{...this.init$,visible:!1,value:0,"*commonProgress":0})}initCallback(){super.initCallback(),this._unobserveCollection=this.uploadCollection.observeProperties(()=>{let n=this.uploadCollection.items().some(r=>this.uploadCollection.read(r).getValue("isUploading"));this.$.visible=n}),this.sub("visible",n=>{n?this.setAttribute("active",""):this.removeAttribute("active")}),this.sub("*commonProgress",n=>{this.$.value=n})}destroyCallback(){var n;super.destroyCallback(),(n=this._unobserveCollection)==null||n.call(this)}}fS.template=' <lr-progress-bar set="visible: visible; value: value"></lr-progress-bar> ';class pS extends Oe{constructor(){super(...arguments);V(this,"_value",0);V(this,"init$",{...this.init$,width:0,opacity:0})}initCallback(){super.initCallback(),this.defineAccessor("value",n=>{if(n===void 0)return;const r=this._value;if(this._value=n,n===0&&r>0){this.ref.line.addEventListener("transitionend",()=>{this.style.setProperty("--l-width",this._value.toString())});return}this.style.setProperty("--l-width",this._value.toString())}),this.defineAccessor("visible",n=>{this.ref.line.classList.toggle("progress--hidden",!n)})}}pS.template=' <div ref="line" class="progress"></div> ';const qi="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAQAAAC1HAwCAAAAC0lEQVR42mNkYAAAAAYAAjCB0C8AAAAASUVORK5CYII=";class zy extends Oe{constructor(){super();V(this,"init$",{...this.init$,checkerboard:!1,src:qi})}initCallback(){super.initCallback(),this.sub("checkerboard",()=>{this.style.backgroundImage=this.hasAttribute("checkerboard")?`url(${QU()})`:"unset"})}destroyCallback(){super.destroyCallback(),URL.revokeObjectURL(this._lastObjectUrl)}setImage(n){this.$.src=n.src}setImageFile(n){let r=URL.createObjectURL(n);this.$.src=r,this._lastObjectUrl=r}setImageUrl(n){this.$.src=n}clear(){URL.revokeObjectURL(this._lastObjectUrl),this.$.src=qi}}zy.template=' <lr-img class="img-view" ref="img" set="@src: src; style.aa: src;" /> ';zy.bindAttributes({checkerboard:"checkerboard"});function mS(...t){return t.reduce((e,n)=>{if(typeof n=="string")return e[n]=!0,e;for(let r of Object.keys(n))e[r]=n[r];return e},{})}function Qn(...t){let e=mS(...t);return Object.keys(e).reduce((n,r)=>(e[r]&&n.push(r),n),[]).join(" ")}function e$(t,...e){let n=mS(...e);for(let r of Object.keys(n))t.classList.toggle(r,n[r])}const t$=t=>{if(!t)return dr;const e=vV(t).filter(n=>dr.includes(n));return e.length===0?dr:e};function n$(t){return{"*originalUrl":null,"*faderEl":null,"*cropperEl":null,"*imgEl":null,"*imgContainerEl":null,"*networkProblems":!1,"*imageSize":null,"*editorTransformations":{},"*cropPresetList":[],"*tabList":dr,"*tabId":Kt.CROP,entry:null,extension:null,editorMode:!1,modalCaption:"",isImage:!1,msg:"",src:qi,fileType:"",showLoader:!1,uuid:null,cdnUrl:null,cropPreset:"",tabs:Ly(dr),"presence.networkProblems":!1,"presence.modalCaption":!0,"presence.editorToolbar":!1,"presence.viewerToolbar":!0,"*on.retryNetwork":()=>{let e=t.querySelectorAll("img");for(let n of e){let r=n.src;n.src=qi,n.src=r}t.$["*networkProblems"]=!1},"*on.apply":e=>{if(!e)return;let n=t.$["*originalUrl"],r=Wi(Ud(e),"preview"),i=xn(n,r),s={originalUrl:n,cdnUrlModifiers:r,cdnUrl:i,transformations:e};t.dispatchEvent(new CustomEvent("apply",{detail:s,bubbles:!0,composed:!0})),t.remove()},"*on.cancel":()=>{t.remove(),t.dispatchEvent(new CustomEvent("cancel",{bubbles:!0,composed:!0}))}}}const r$=`
  <div class="wrapper wrapper_desktop">
    <lr-presence-toggle class="network_problems_splash" set="visible: presence.networkProblems;">
      <div class="network_problems_content">
        <div class="network_problems_icon">
          <lr-icon size="20" name="sad"></lr-icon>
        </div>
        <div class="network_problems_text">Network error</div>
      </div>
      <div class="network_problems_footer">
        <lr-btn-ui theme="primary" text="Retry" set="onclick: *on.retryNetwork"></lr-btn-ui>
      </div>
    </lr-presence-toggle>
    <div class="viewport">
      <div class="file_type_outer">
        <div class="file_type">{{fileType}}</div>
      </div>
      <div class="image_container" ref="img-container-el">
        <img src="${qi}" class="image image_visible_from_editor" ref="img-el" />
        <lr-editor-image-cropper ref="cropper-el"></lr-editor-image-cropper>
        <lr-editor-image-fader ref="fader-el"></lr-editor-image-fader>
      </div>
      <div class="info_pan">{{msg}}</div>
    </div>
    <div class="toolbar">
      <lr-line-loader-ui set="active: showLoader"></lr-line-loader-ui>
      <div class="toolbar_content toolbar_content__editor">
        <lr-editor-toolbar></lr-editor-toolbar>
      </div>
    </div>
  </div>
`;class Aa extends Oe{constructor(){super();V(this,"ctxOwner",!0);V(this,"_debouncedShowLoader",Dn(this._showLoader.bind(this),300));this.init$={...this.init$,...n$(this)}}_showLoader(n){this.$.showLoader=n}_waitForSize(){return new Promise((r,i)=>{const s=setTimeout(()=>{i(new Error("[cloud-image-editor] timeout waiting for non-zero container size"))},3e3),o=new ResizeObserver(([a])=>{a.contentRect.width>0&&a.contentRect.height>0&&(r(),clearTimeout(s),o.disconnect())});o.observe(this)})}initCallback(){super.initCallback(),this.$["*faderEl"]=this.ref["fader-el"],this.$["*cropperEl"]=this.ref["cropper-el"],this.$["*imgContainerEl"]=this.ref["img-container-el"],this.initEditor()}async updateImage(){if(this.isConnected){if(await this._waitForSize(),this.$.cdnUrl){const n=lV(this.$.cdnUrl),r=uu(this.$.cdnUrl,n);if(r===this.$["*originalUrl"])return;this.$["*originalUrl"]=r;const i=uV(this.$.cdnUrl),s=pV(i);this.$["*editorTransformations"]=s}else if(this.$.uuid){const n=uu(this.cfg.cdnCname,this.$.uuid);if(n===this.$["*originalUrl"])return;this.$["*originalUrl"]=n,this.$["*editorTransformations"]={}}else throw new Error("No UUID nor CDN URL provided");this.$["*tabId"]===Kt.CROP?this.$["*cropperEl"].deactivate({reset:!0}):this.$["*faderEl"].deactivate();try{const n=xn(this.$["*originalUrl"],Wi("json")),r=await fetch(n).then(o=>o.json()),{width:i,height:s}=r;this.$["*imageSize"]={width:i,height:s},this.$["*tabId"]===Kt.CROP?this.$["*cropperEl"].activate(this.$["*imageSize"]):this.$["*faderEl"].activate({url:this.$["*originalUrl"]})}catch(n){n&&console.error("Failed to load image info",n)}}}async initEditor(){try{await this._waitForSize()}catch(n){this.isConnected&&console.error(n.message);return}this.ref["img-el"].addEventListener("load",()=>{this._imgLoading=!1,this._debouncedShowLoader(!1),this.$.src!==qi&&(this.$["*networkProblems"]=!1)}),this.ref["img-el"].addEventListener("error",()=>{this._imgLoading=!1,this._debouncedShowLoader(!1),this.$["*networkProblems"]=!0}),this.sub("src",n=>{let r=this.ref["img-el"];r.src!==n&&(this._imgLoading=!0,r.src=n||qi)}),this.sub("cropPreset",n=>{this.$["*cropPresetList"]=HI(n)}),this.sub("tabs",n=>{this.$["*tabList"]=t$(n)}),this.sub("*tabId",n=>{this.ref["img-el"].className=Qn("image",{image_hidden_to_cropper:n===Kt.CROP,image_hidden_effects:n!==Kt.CROP})}),this.classList.add("editor_ON"),this.sub("*networkProblems",n=>{this.$["presence.networkProblems"]=n,this.$["presence.modalCaption"]=!n}),this.sub("*editorTransformations",n=>{if(Object.keys(n).length===0)return;let r=this.$["*originalUrl"],i=Wi(Ud(n),"preview"),s=xn(r,i),o={originalUrl:r,cdnUrlModifiers:i,cdnUrl:s,transformations:n};this.dispatchEvent(new CustomEvent("change",{detail:o,bubbles:!0,composed:!0}))},!1),this.sub("uuid",n=>n&&this.updateImage()),this.sub("cdnUrl",n=>n&&this.updateImage())}}V(Aa,"className","cloud-image-editor");Aa.template=r$;Aa.bindAttributes({uuid:"uuid","cdn-url":"cdnUrl","crop-preset":"cropPreset",tabs:"tabs"});class gS extends Oe{constructor(){super(),this.init$={...this.init$,dragging:!1},this._handlePointerUp=this._handlePointerUp_.bind(this),this._handlePointerMove=this._handlePointerMove_.bind(this),this._handleSvgPointerMove=this._handleSvgPointerMove_.bind(this)}_shouldThumbBeDisabled(e){let n=this.$["*imageBox"];if(!n)return;if(e===""&&n.height<=ge&&n.width<=ge)return!0;let r=n.height<=ge&&(e.includes("n")||e.includes("s")),i=n.width<=ge&&(e.includes("e")||e.includes("w"));return r||i}_createBackdrop(){let e=this.$["*cropBox"];if(!e)return;let{x:n,y:r,width:i,height:s}=e,o=this.ref["svg-el"],a=$n("mask",{id:"backdrop-mask"}),l=$n("rect",{x:0,y:0,width:"100%",height:"100%",fill:"white"}),c=$n("rect",{x:n,y:r,width:i,height:s,fill:"black"});a.appendChild(l),a.appendChild(c);let h=$n("rect",{x:0,y:0,width:"100%",height:"100%",fill:"var(--color-image-background)","fill-opacity":.85,mask:"url(#backdrop-mask)"});o.appendChild(h),o.appendChild(a),this._backdropMask=a,this._backdropMaskInner=c}_resizeBackdrop(){this._backdropMask&&(this._backdropMask.style.display="none",window.requestAnimationFrame(()=>{this._backdropMask&&(this._backdropMask.style.display="block")}))}_updateBackdrop(){let e=this.$["*cropBox"];if(!e)return;let{x:n,y:r,width:i,height:s}=e;this._backdropMaskInner&&yo(this._backdropMaskInner,{x:n,y:r,width:i,height:s})}_updateFrame(){let e=this.$["*cropBox"];if(!(!e||!this._frameGuides||!this._frameThumbs)){for(let n of Object.values(this._frameThumbs)){let{direction:r,pathNode:i,interactionNode:s,groupNode:o}=n,a=r==="",l=r.length===2,{x:c,y:h,width:f,height:p}=e;if(a){const E={x:c+f/3,y:h+p/3,width:f/3,height:p/3};yo(s,E)}else{const E=Oo(Math.min(f,p)/(Em*2+yl)/2,0,1);let{d:S,center:R}=l?CV(e,r,E):IV(e,r,E);const T=Math.max(Lw*Oo(Math.min(f,p)/Lw/3,0,1),TV);yo(s,{x:R[0]-T,y:R[1]-T,width:T*2,height:T*2}),yo(i,{d:S})}let w=this._shouldThumbBeDisabled(r);o.setAttribute("class",Qn("thumb",{"thumb--hidden":w,"thumb--visible":!w}))}yo(this._frameGuides,{x:e.x-us*.5,y:e.y-us*.5,width:e.width+us,height:e.height+us})}}_createThumbs(){const e={};for(let n=0;n<3;n++)for(let r=0;r<3;r++){let i=`${["n","","s"][n]}${["w","","e"][r]}`,s=$n("g");s.classList.add("thumb"),s.setAttribute("with-effects","");let o=$n("rect",{fill:"transparent"}),a=$n("path",{stroke:"currentColor",fill:"none","stroke-width":BI});s.appendChild(a),s.appendChild(o),e[i]={direction:i,pathNode:a,interactionNode:o,groupNode:s},o.addEventListener("pointerdown",this._handlePointerDown.bind(this,i))}return e}_createGuides(){let e=$n("svg"),n=$n("rect",{x:0,y:0,width:"100%",height:"100%",fill:"none",stroke:"#000000","stroke-width":us,"stroke-opacity":.5});e.appendChild(n);for(let r=1;r<=2;r++){let i=$n("line",{x1:`${_c*r}%`,y1:"0%",x2:`${_c*r}%`,y2:"100%",stroke:"#000000","stroke-width":us,"stroke-opacity":.3});e.appendChild(i)}for(let r=1;r<=2;r++){let i=$n("line",{x1:"0%",y1:`${_c*r}%`,x2:"100%",y2:`${_c*r}%`,stroke:"#000000","stroke-width":us,"stroke-opacity":.3});e.appendChild(i)}return e.classList.add("guides","guides--semi-hidden"),e}_createFrame(){let e=this.ref["svg-el"],n=document.createDocumentFragment(),r=this._createGuides();n.appendChild(r);let i=this._createThumbs();for(let{groupNode:s}of Object.values(i))n.appendChild(s);e.appendChild(n),this._frameThumbs=i,this._frameGuides=r}_handlePointerDown(e,n){if(!this._frameThumbs)return;let r=this._frameThumbs[e];if(this._shouldThumbBeDisabled(e))return;let i=this.$["*cropBox"],{x:s,y:o}=this.ref["svg-el"].getBoundingClientRect(),a=n.x-s,l=n.y-o;this.$.dragging=!0,this._draggingThumb=r,this._dragStartPoint=[a,l],this._dragStartCrop={...i}}_handlePointerUp_(e){this._updateCursor(),this.$.dragging&&(e.stopPropagation(),e.preventDefault(),this.$.dragging=!1)}_handlePointerMove_(e){if(!this.$.dragging||!this._dragStartPoint||!this._draggingThumb)return;e.stopPropagation(),e.preventDefault();let n=this.ref["svg-el"],{x:r,y:i}=n.getBoundingClientRect(),s=e.x-r,o=e.y-i,a=s-this._dragStartPoint[0],l=o-this._dragStartPoint[1],{direction:c}=this._draggingThumb;const h=this._calcCropBox(c,[a,l]);h&&(this.$["*cropBox"]=h)}_calcCropBox(e,n){var c;const[r,i]=n;let s=this.$["*imageBox"],o=this._dragStartCrop??this.$["*cropBox"];const a=(c=this.$["*cropPresetList"])==null?void 0:c[0],l=a?a.width/a.height:void 0;if(e===""?o=AV({rect:o,delta:[r,i],imageBox:s}):o=MV({rect:o,delta:[r,i],direction:e,aspectRatio:l,imageBox:s}),!Object.values(o).every(h=>Number.isFinite(h)&&h>=0)){console.error("CropFrame is trying to create invalid rectangle",{payload:o});return}return $h(qc(o),this.$["*imageBox"])}_handleSvgPointerMove_(e){if(!this._frameThumbs)return;let n=Object.values(this._frameThumbs).find(r=>{if(this._shouldThumbBeDisabled(r.direction))return!1;let s=r.interactionNode.getBoundingClientRect(),o={x:s.x,y:s.y,width:s.width,height:s.height};return VV(o,[e.x,e.y])});this._hoverThumb=n,this._updateCursor()}_updateCursor(){let e=this._hoverThumb;this.ref["svg-el"].style.cursor=e?SV(e.direction):"initial"}_render(){this._updateBackdrop(),this._updateFrame()}toggleThumbs(e){this._frameThumbs&&Object.values(this._frameThumbs).map(({groupNode:n})=>n).forEach(n=>{n.setAttribute("class",Qn("thumb",{"thumb--hidden":!e,"thumb--visible":e}))})}initCallback(){super.initCallback(),this._createBackdrop(),this._createFrame(),this.sub("*imageBox",()=>{this._resizeBackdrop(),window.requestAnimationFrame(()=>{this._render()})}),this.sub("*cropBox",e=>{e&&(this._guidesHidden=e.height<=ge||e.width<=ge,window.requestAnimationFrame(()=>{this._render()}))}),this.sub("dragging",e=>{this._frameGuides&&this._frameGuides.setAttribute("class",Qn({"guides--hidden":this._guidesHidden,"guides--visible":!this._guidesHidden&&e,"guides--semi-hidden":!this._guidesHidden&&!e}))}),this.ref["svg-el"].addEventListener("pointermove",this._handleSvgPointerMove,!0),document.addEventListener("pointermove",this._handlePointerMove,!0),document.addEventListener("pointerup",this._handlePointerUp,!0)}destroyCallback(){super.destroyCallback(),document.removeEventListener("pointermove",this._handlePointerMove),document.removeEventListener("pointerup",this._handlePointerUp)}}gS.template=' <svg class="svg" ref="svg-el" xmlns="http://www.w3.org/2000/svg"></svg> ';class jd extends Oe{constructor(){super(...arguments);V(this,"init$",{...this.init$,active:!1,title:"",icon:"","on.click":null})}initCallback(){super.initCallback(),this._titleEl=this.ref["title-el"],this._iconEl=this.ref["icon-el"],this.setAttribute("role","button"),this.tabIndex===-1&&(this.tabIndex=0),this.sub("title",n=>{this._titleEl&&(this._titleEl.style.display=n?"block":"none")}),this.sub("active",n=>{this.className=Qn({active:n,not_active:!n})}),this.sub("on.click",n=>{this.onclick=n})}}jd.template=`
  <div class="before"></div>
  <lr-icon size="20" set="@name: icon;"></lr-icon>
  <div class="title" ref="title-el">{{title}}</div>
`;function i$(t){let e=t+90;return e=e>=360?0:e,e}function s$(t,e){return t==="rotate"?i$(e):["mirror","flip"].includes(t)?!e:null}class yS extends jd{initCallback(){super.initCallback(),this.defineAccessor("operation",e=>{e&&(this._operation=e,this.$.icon=e)}),this.$["on.click"]=e=>{let n=this.$["*cropperEl"].getValue(this._operation),r=s$(this._operation,n);this.$["*cropperEl"].setValue(this._operation,r)}}}const ol={FILTER:"filter",COLOR_OPERATION:"color_operation"},Ui="original";class vS extends Oe{constructor(){super(...arguments);V(this,"init$",{...this.init$,disabled:!1,min:0,max:100,value:0,defaultValue:0,zero:0,"on.input":n=>{this.$["*faderEl"].set(n),this.$.value=n}})}setOperation(n,r){this._controlType=n==="filter"?ol.FILTER:ol.COLOR_OPERATION,this._operation=n,this._iconName=n,this._title=n.toUpperCase(),this._filter=r,this._initializeValues(),this.$["*faderEl"].activate({url:this.$["*originalUrl"],operation:this._operation,value:this._filter===Ui?void 0:this.$.value,filter:this._filter===Ui?void 0:this._filter,fromViewer:!1})}_initializeValues(){let{range:n,zero:r}=ua[this._operation],[i,s]=n;this.$.min=i,this.$.max=s,this.$.zero=r;let o=this.$["*editorTransformations"][this._operation];if(this._controlType===ol.FILTER){let a=s;if(o){let{name:l,amount:c}=o;a=l===this._filter?c:s}this.$.value=a,this.$.defaultValue=a}if(this._controlType===ol.COLOR_OPERATION){let a=typeof o<"u"?o:r;this.$.value=a,this.$.defaultValue=a}}apply(){let n;this._controlType===ol.FILTER?this._filter===Ui?n=null:n={name:this._filter,amount:this.$.value}:n=this.$.value;let r={...this.$["*editorTransformations"],[this._operation]:n};this.$["*editorTransformations"]=r}cancel(){this.$["*faderEl"].deactivate({hide:!1})}initCallback(){super.initCallback(),this.sub("*originalUrl",n=>{this._originalUrl=n}),this.sub("value",n=>{let r=`${this._filter||this._operation} ${n}`;this.$["*operationTooltip"]=r})}}vS.template=`
  <lr-slider-ui
    ref="slider-el"
    set="disabled: disabled; min: min; max: max; defaultValue: defaultValue; zero: zero; onInput: on.input;"
  ></lr-slider-ui>
`;function By(t){let e=new Image;return{promise:new Promise((i,s)=>{e.src=t,e.onload=i,e.onerror=s}),image:e,cancel:()=>{e.naturalWidth===0&&(e.src=qi)}}}function Cm(t){let e=[];for(let s of t){let o=By(s);e.push(o)}let n=e.map(s=>s.image);return{promise:Promise.allSettled(e.map(s=>s.promise)),images:n,cancel:()=>{e.forEach(s=>{s.cancel()})}}}class Hy extends jd{constructor(){super(...arguments);V(this,"init$",{...this.init$,active:!1,title:"",icon:"",isOriginal:!1,iconSize:"20","on.click":null})}_previewSrc(){let n=parseInt(window.getComputedStyle(this).getPropertyValue("--l-base-min-width"),10),r=window.devicePixelRatio,i=Math.ceil(r*n),s=r>=2?"lightest":"normal",o=100,a={...this.$["*editorTransformations"]};return a[this._operation]=this._filter!==Ui?{name:this._filter,amount:o}:void 0,xn(this._originalUrl,Wi(zI,Ud(a),`quality/${s}`,`scale_crop/${i}x${i}/center`))}_observerCallback(n,r){if(n[0].isIntersecting){let s=this.proxyUrl(this._previewSrc()),o=this.ref["preview-el"],{promise:a,cancel:l}=By(s);this._cancelPreload=l,a.catch(c=>{this.$["*networkProblems"]=!0,console.error("Failed to load image",{error:c})}).finally(()=>{o.style.backgroundImage=`url(${s})`,o.setAttribute("loaded",""),r.unobserve(this)})}else this._cancelPreload&&this._cancelPreload()}initCallback(){super.initCallback(),this.$["on.click"]=r=>{this.$.active?this.$.isOriginal||(this.$["*sliderEl"].setOperation(this._operation,this._filter),this.$["*showSlider"]=!0):(this.$["*sliderEl"].setOperation(this._operation,this._filter),this.$["*sliderEl"].apply()),this.$["*currentFilter"]=this._filter},this.defineAccessor("filter",r=>{this._operation="filter",this._filter=r,this.$.isOriginal=r===Ui,this.$.icon=this.$.isOriginal?"original":"slider"}),this._observer=new window.IntersectionObserver(this._observerCallback.bind(this),{threshold:[0,1]});let n=this.$["*originalUrl"];this._originalUrl=n,this.$.isOriginal?this.ref["icon-el"].classList.add("original-icon"):this._observer.observe(this),this.sub("*currentFilter",r=>{this.$.active=r&&r===this._filter}),this.sub("isOriginal",r=>{this.$.iconSize=r?40:20}),this.sub("active",r=>{if(this.$.isOriginal)return;let i=this.ref["icon-el"];i.style.opacity=r?"1":"0";let s=this.ref["preview-el"];r?s.style.opacity="0":s.style.backgroundImage&&(s.style.opacity="1")}),this.sub("*networkProblems",r=>{if(!r){let i=this.proxyUrl(this._previewSrc()),s=this.ref["preview-el"];s.style.backgroundImage&&(s.style.backgroundImage="none",s.style.backgroundImage=`url(${i})`)}})}destroyCallback(){var n;super.destroyCallback(),(n=this._observer)==null||n.disconnect(),this._cancelPreload&&this._cancelPreload()}}Hy.template=`
  <div class="before"></div>
  <div class="preview" ref="preview-el"></div>
  <lr-icon size="40" ref="icon-el" set="@name: icon; @size: iconSize;"></lr-icon>
`;class _S extends jd{constructor(){super(...arguments);V(this,"_operation","")}initCallback(){super.initCallback(),this.$["on.click"]=n=>{this.$["*sliderEl"].setOperation(this._operation),this.$["*showSlider"]=!0,this.$["*currentOperation"]=this._operation},this.defineAccessor("operation",n=>{n&&(this._operation=n,this.$.icon=n,this.bindL10n("title",()=>this.l10n(n)))}),this.sub("*editorTransformations",n=>{if(!this._operation)return;let{zero:r}=ua[this._operation],i=n[this._operation],s=typeof i<"u"?i!==r:!1;this.$.active=s})}}function o$(t,e){let n={};for(let r of e){let i=t[r];(t.hasOwnProperty(r)||i!==void 0)&&(n[r]=i)}return n}function Wy(t,e,n){let i=window.devicePixelRatio,s=Math.min(Math.ceil(e*i),3e3),o=i>=2?"lightest":"normal";return xn(t,Wi(zI,Ud(n),`quality/${o}`,`stretch/off/-/resize/${s}x`))}function a$(t){return t?[({dimensions:n,coords:r})=>[...n,...r].every(i=>Number.isInteger(i)&&Number.isFinite(i)),({dimensions:n,coords:r})=>n.every(i=>i>0)&&r.every(i=>i>=0)].every(n=>n(t)):!0}class wS extends Oe{constructor(){super();V(this,"ctxOwner",!0);this.init$={...this.init$,image:null,"*padding":bV,"*operations":{rotate:0,mirror:!1,flip:!1},"*imageBox":{x:0,y:0,width:0,height:0},"*cropBox":{x:0,y:0,width:0,height:0}},this._commitDebounced=Dn(this._commit.bind(this),300),this._handleResizeThrottled=aS(this._handleResize.bind(this),100),this._imageSize={width:0,height:0}}_handleResize(){!this.isConnected||!this._isActive||(this._initCanvas(),this._syncTransformations(),this._alignImage(),this._alignCrop(),this._draw())}_syncTransformations(){let n=this.$["*editorTransformations"],r=o$(n,Object.keys(this.$["*operations"])),i={...this.$["*operations"],...r};this.$["*operations"]=i}_initCanvas(){let n=this.ref["canvas-el"],r=n.getContext("2d"),i=this.offsetWidth,s=this.offsetHeight,o=window.devicePixelRatio;n.style.width=`${i}px`,n.style.height=`${s}px`,n.width=i*o,n.height=s*o,r==null||r.scale(o,o),this._canvas=n,this._ctx=r}_alignImage(){if(!this._isActive||!this.$.image)return;let n=this.$.image,r=this.$["*padding"],i=this.$["*operations"],{rotate:s}=i,o={width:this.offsetWidth,height:this.offsetHeight},a=il({width:n.naturalWidth,height:n.naturalHeight},s),l;if(a.width>o.width-r*2||a.height>o.height-r*2){let c=a.width/a.height,h=o.width/o.height;if(c>h){let f=o.width-r*2,p=f/c,w=0+r,E=r+(o.height-r*2)/2-p/2;l={x:w,y:E,width:f,height:p}}else{let f=o.height-r*2,p=f*c,w=r+(o.width-r*2)/2-p/2,E=0+r;l={x:w,y:E,width:p,height:f}}}else{let{width:c,height:h}=a,f=r+(o.width-r*2)/2-c/2,p=r+(o.height-r*2)/2-h/2;l={x:f,y:p,width:c,height:h}}this.$["*imageBox"]=qc(l)}_alignCrop(){var p;let n=this.$["*cropBox"],r=this.$["*imageBox"],i=this.$["*operations"],{rotate:s}=i,o=this.$["*editorTransformations"].crop,{width:a,x:l,y:c}=this.$["*imageBox"];if(o){let{dimensions:[w,E],coords:[S,R]}=o,{width:T}=il(this._imageSize,s),_=a/T;n=$h(qc({x:l+S*_,y:c+R*_,width:w*_,height:E*_}),this.$["*imageBox"])}const h=(p=this.$["*cropPresetList"])==null?void 0:p[0],f=h?h.width/h.height:void 0;if(!UV(n,r)||f&&!$V(n,f)){const w=r.width/r.height;let E=r.width,S=r.height;f&&(w>f?E=Math.min(r.height*f,r.width):S=Math.min(r.width/f,r.height)),n={x:r.x+r.width/2-E/2,y:r.y+r.height/2-S/2,width:E,height:S}}this.$["*cropBox"]=$h(qc(n),this.$["*imageBox"])}_drawImage(){let n=this._ctx;if(!n)return;let r=this.$.image,i=this.$["*imageBox"],s=this.$["*operations"],{mirror:o,flip:a,rotate:l}=s,c=il({width:i.width,height:i.height},l);n.save(),n.translate(i.x+i.width/2,i.y+i.height/2),n.rotate(l*Math.PI*-1/180),n.scale(o?-1:1,a?-1:1),n.drawImage(r,-c.width/2,-c.height/2,c.width,c.height),n.restore()}_draw(){if(!this._isActive||!this.$.image||!this._canvas||!this._ctx)return;let n=this._canvas;this._ctx.clearRect(0,0,n.width,n.height),this._drawImage()}_animateIn({fromViewer:n}){this.$.image&&(this.ref["frame-el"].toggleThumbs(!0),this._transitionToImage(),setTimeout(()=>{this.className=Qn({active_from_viewer:n,active_from_editor:!n,inactive_to_editor:!1})}))}_getCropDimensions(){let n=this.$["*cropBox"],r=this.$["*imageBox"],i=this.$["*operations"],{rotate:s}=i,{width:o,height:a}=r,{width:l,height:c}=il(this._imageSize,s),{width:h,height:f}=n,p=o/l,w=a/c;return[Oo(Math.round(h/p),1,l),Oo(Math.round(f/w),1,c)]}_getCropTransformation(){let n=this.$["*cropBox"],r=this.$["*imageBox"],i=this.$["*operations"],{rotate:s}=i,{width:o,height:a,x:l,y:c}=r,{width:h,height:f}=il(this._imageSize,s),{x:p,y:w}=n,E=o/h,S=a/f,R=this._getCropDimensions(),T={dimensions:R,coords:[Oo(Math.round((p-l)/E),0,h-R[0]),Oo(Math.round((w-c)/S),0,f-R[1])]};if(!a$(T)){console.error("Cropper is trying to create invalid crop object",{payload:T});return}if(!(R[0]===h&&R[1]===f))return T}_commit(){if(!this.isConnected)return;let n=this.$["*operations"],{rotate:r,mirror:i,flip:s}=n,o=this._getCropTransformation(),l={...this.$["*editorTransformations"],crop:o,rotate:r,mirror:i,flip:s};this.$["*editorTransformations"]=l}setValue(n,r){this.$["*operations"]={...this.$["*operations"],[n]:r},this._isActive&&(this._alignImage(),this._alignCrop(),this._draw())}getValue(n){return this.$["*operations"][n]}async activate(n,{fromViewer:r}={}){if(!this._isActive){this._isActive=!0,this._imageSize=n,this.removeEventListener("transitionend",this._reset);try{this.$.image=await this._waitForImage(this.$["*originalUrl"],this.$["*editorTransformations"]),this._syncTransformations(),this._animateIn({fromViewer:r})}catch(i){console.error("Failed to activate cropper",{error:i})}this._observer=new ResizeObserver(([i])=>{i.contentRect.width>0&&i.contentRect.height>0&&this._isActive&&this.$.image&&this._handleResizeThrottled()}),this._observer.observe(this)}}deactivate({reset:n=!1}={}){var r;this._isActive&&(!n&&this._commit(),this._isActive=!1,this._transitionToCrop(),this.className=Qn({active_from_viewer:!1,active_from_editor:!1,inactive_to_editor:!0}),this.ref["frame-el"].toggleThumbs(!1),this.addEventListener("transitionend",this._reset,{once:!0}),(r=this._observer)==null||r.disconnect())}_transitionToCrop(){let n=this._getCropDimensions(),r=Math.min(this.offsetWidth,n[0])/this.$["*cropBox"].width,i=Math.min(this.offsetHeight,n[1])/this.$["*cropBox"].height,s=Math.min(r,i),o=this.$["*cropBox"].x+this.$["*cropBox"].width/2,a=this.$["*cropBox"].y+this.$["*cropBox"].height/2;this.style.transform=`scale(${s}) translate(${(this.offsetWidth/2-o)/s}px, ${(this.offsetHeight/2-a)/s}px)`,this.style.transformOrigin=`${o}px ${a}px`}_transitionToImage(){let n=this.$["*cropBox"].x+this.$["*cropBox"].width/2,r=this.$["*cropBox"].y+this.$["*cropBox"].height/2;this.style.transform="scale(1)",this.style.transformOrigin=`${n}px ${r}px`}_reset(){this._isActive||(this.$.image=null)}_waitForImage(n,r){let i=this.offsetWidth;r={...r,crop:void 0,rotate:void 0,flip:void 0,mirror:void 0};let s=this.proxyUrl(Wy(n,i,r)),{promise:o,cancel:a,image:l}=By(s),c=this._handleImageLoading(s);return l.addEventListener("load",c,{once:!0}),l.addEventListener("error",c,{once:!0}),this._cancelPreload&&this._cancelPreload(),this._cancelPreload=a,o.then(()=>l).catch(h=>(console.error("Failed to load image",{error:h}),this.$["*networkProblems"]=!0,Promise.resolve(l)))}_handleImageLoading(n){let r="crop",i=this.$["*loadingOperations"];return i.get(r)||i.set(r,new Map),i.get(r).get(n)||(i.set(r,i.get(r).set(n,!0)),this.$["*loadingOperations"]=i),()=>{var s;(s=i==null?void 0:i.get(r))!=null&&s.has(n)&&(i.get(r).delete(n),this.$["*loadingOperations"]=i)}}initCallback(){super.initCallback(),this.sub("*imageBox",()=>{this._draw()}),this.sub("*cropBox",()=>{this.$.image&&this._commitDebounced()}),this.sub("*cropPresetList",()=>{this._alignCrop()}),setTimeout(()=>{this.sub("*networkProblems",n=>{n||this._isActive&&this.activate(this._imageSize,{fromViewer:!1})})},0)}destroyCallback(){var n;super.destroyCallback(),(n=this._observer)==null||n.disconnect()}}wS.template=`
  <canvas class="canvas" ref="canvas-el"></canvas>
  <lr-crop-frame ref="frame-el"></lr-crop-frame>
`;function Yw(t,e,n){let r=Array(n);n--;for(let i=n;i>=0;i--)r[i]=Math.ceil((i*e+(n-i)*t)/n);return r}function l$(t){return t.reduce((e,n,r)=>r<t.length-1?[...e,[n,t[r+1]]]:e,[])}function u$(t,e,n){let r=l$(t).find(([i,s])=>i<=e&&e<=s);return t.map(i=>{let s=Math.abs(r[0]-r[1]),o=Math.abs(e-r[0])/s;return r[0]===i?e>n?1:1-o:r[1]===i?e>=n?o:1:0})}function c$(t,e){return t.map((n,r)=>n<e?t.length-r:r)}function Jw(t,e){let n=ua[t].keypointsNumber,{range:r,zero:i}=ua[t];return[...new Set([...Yw(r[0],i,n+1),...Yw(i,r[1],n+1),i,e])].sort((s,o)=>s-o)}class h$ extends Oe{constructor(){super(),this._isActive=!1,this._hidden=!0,this._addKeypointDebounced=Dn(this._addKeypoint.bind(this),600),this.classList.add("inactive_to_cropper")}_handleImageLoading(e){let n=this._operation,r=this.$["*loadingOperations"];return r.get(n)||r.set(n,new Map),r.get(n).get(e)||(r.set(n,r.get(n).set(e,!0)),this.$["*loadingOperations"]=r),()=>{var i;(i=r==null?void 0:r.get(n))!=null&&i.has(e)&&(r.get(n).delete(e),this.$["*loadingOperations"]=r)}}_flush(){window.cancelAnimationFrame(this._raf),this._raf=window.requestAnimationFrame(()=>{for(let e of this._keypoints){let{image:n}=e;n&&(n.style.opacity=e.opacity.toString(),n.style.zIndex=e.zIndex.toString())}})}_imageSrc({url:e=this._url,filter:n=this._filter,operation:r,value:i}={}){let s={...this._transformations};r&&(s[r]=n?{name:n,amount:i}:i);let o=this.offsetWidth;return this.proxyUrl(Wy(e,o,s))}_constructKeypoint(e,n){return{src:this._imageSrc({operation:e,value:n}),image:null,opacity:0,zIndex:0,value:n}}_isSame(e,n){return this._operation===e&&this._filter===n}_addKeypoint(e,n,r){let i=()=>!this._isSame(e,n)||this._value!==r||!!this._keypoints.find(l=>l.value===r);if(i())return;let s=this._constructKeypoint(e,r),o=new Image;o.src=s.src;let a=this._handleImageLoading(s.src);o.addEventListener("load",a,{once:!0}),o.addEventListener("error",a,{once:!0}),s.image=o,o.classList.add("fader-image"),o.addEventListener("load",()=>{if(i())return;let l=this._keypoints,c=l.findIndex(f=>f.value>r),h=c<l.length?l[c].image:null;!this._container||h&&!this._container.contains(h)||(l.splice(c,0,s),this._container.insertBefore(o,h),this._update(e,r))},{once:!0}),o.addEventListener("error",()=>{this.$["*networkProblems"]=!0},{once:!0})}set(e){e=typeof e=="string"?parseInt(e,10):e,this._update(this._operation,e),this._addKeypointDebounced(this._operation,this._filter,e)}_update(e,n){this._operation=e,this._value=n;let{zero:r}=ua[e],i=this._keypoints.map(a=>a.value),s=u$(i,n,r),o=c$(i,r);for(let[a,l]of Object.entries(this._keypoints))l.opacity=s[a],l.zIndex=o[a];this._flush()}_createPreviewImage(){let e=new Image;return e.classList.add("fader-image","fader-image--preview"),e.style.opacity="0",e}async _initNodes(){let e=document.createDocumentFragment();this._previewImage=this._previewImage||this._createPreviewImage(),!this.contains(this._previewImage)&&e.appendChild(this._previewImage);let n=document.createElement("div");e.appendChild(n);let r=this._keypoints.map(c=>c.src),{images:i,promise:s,cancel:o}=Cm(r);i.forEach(c=>{let h=this._handleImageLoading(c.src);c.addEventListener("load",h),c.addEventListener("error",h)}),this._cancelLastImages=()=>{o(),this._cancelLastImages=void 0};let a=this._operation,l=this._filter;await s,this._isActive&&this._isSame(a,l)&&(this._container&&this._container.remove(),this._container=n,this._keypoints.forEach((c,h)=>{let f=i[h];f.classList.add("fader-image"),c.image=f,this._container.appendChild(f)}),this.appendChild(e),this._flush())}setTransformations(e){if(this._transformations=e,this._previewImage){let n=this._imageSrc(),r=this._handleImageLoading(n);this._previewImage.src=n,this._previewImage.addEventListener("load",r,{once:!0}),this._previewImage.addEventListener("error",r,{once:!0}),this._previewImage.style.opacity="1",this._previewImage.addEventListener("error",()=>{this.$["*networkProblems"]=!0},{once:!0})}}preload({url:e,filter:n,operation:r,value:i}){this._cancelBatchPreload&&this._cancelBatchPreload();let o=Jw(r,i).map(l=>this._imageSrc({url:e,filter:n,operation:r,value:l})),{cancel:a}=Cm(o);this._cancelBatchPreload=a}_setOriginalSrc(e){let n=this._previewImage||this._createPreviewImage();if(!this.contains(n)&&this.appendChild(n),this._previewImage=n,n.src===e){n.style.opacity="1",n.style.transform="scale(1)",this.className=Qn({active_from_viewer:this._fromViewer,active_from_cropper:!this._fromViewer,inactive_to_cropper:!1});return}n.style.opacity="0";let r=this._handleImageLoading(e);n.addEventListener("error",r,{once:!0}),n.src=e,n.addEventListener("load",()=>{r(),n&&(n.style.opacity="1",n.style.transform="scale(1)",this.className=Qn({active_from_viewer:this._fromViewer,active_from_cropper:!this._fromViewer,inactive_to_cropper:!1}))},{once:!0}),n.addEventListener("error",()=>{this.$["*networkProblems"]=!0},{once:!0})}activate({url:e,operation:n,value:r,filter:i,fromViewer:s}){if(this._isActive=!0,this._hidden=!1,this._url=e,this._operation=n||"initial",this._value=r,this._filter=i,this._fromViewer=s,typeof r!="number"&&!i){let a=this._imageSrc({operation:n,value:r});this._setOriginalSrc(a),this._container&&this._container.remove();return}this._keypoints=Jw(n,r).map(a=>this._constructKeypoint(n,a)),this._update(n,r),this._initNodes()}deactivate({hide:e=!0}={}){this._isActive=!1,this._cancelLastImages&&this._cancelLastImages(),this._cancelBatchPreload&&this._cancelBatchPreload(),e&&!this._hidden?(this._hidden=!0,this._previewImage&&(this._previewImage.style.transform="scale(1)"),this.className=Qn({active_from_viewer:!1,active_from_cropper:!1,inactive_to_cropper:!0}),this.addEventListener("transitionend",()=>{this._container&&this._container.remove()},{once:!0})):this._container&&this._container.remove()}}const d$=1;class ES extends Oe{initCallback(){super.initCallback(),this.addEventListener("wheel",e=>{e.preventDefault();let{deltaY:n,deltaX:r}=e;Math.abs(r)>d$?this.scrollLeft+=r:this.scrollLeft+=n})}}ES.template=" <slot></slot> ";function f$(t){return`
    <lr-presence-toggle class="tab-toggle" set="visible: presence.tabToggle.${t}; styles: presence.tabToggleStyles;">
      <lr-btn-ui
        theme="boring"
        ref="tab-toggle-${t}"
        data-id="${t}"
        icon="${t}"
        tabindex="0"
        set="onclick: on.clickTab;"
      >
      </lr-btn-ui>
    </lr-presence-toggle>
  `}function p$(t){return`
    <lr-presence-toggle class="tab-content" set="visible: presence.tabContent.${t}; styles: presence.tabContentStyles">
      <lr-editor-scroller hidden-scrollbar>
        <div class="controls-list_align">
          <div class="controls-list_inner" ref="controls-list-${t}"></div>
        </div>
      </lr-editor-scroller>
    </lr-presence-toggle>
  `}class bS extends Oe{constructor(){super();V(this,"_updateInfoTooltip",Dn(()=>{var o,a;const n=this.$["*editorTransformations"],r=this.$["*currentOperation"];let i="",s=!1;if(this.$["*tabId"]===Kt.FILTERS)if(s=!0,this.$["*currentFilter"]&&((o=n==null?void 0:n.filter)==null?void 0:o.name)===this.$["*currentFilter"]){let l=((a=n==null?void 0:n.filter)==null?void 0:a.amount)||100;i=this.$["*currentFilter"]+" "+l}else i=this.l10n(Ui);else if(this.$["*tabId"]===Kt.TUNING&&r){s=!0;let l=(n==null?void 0:n[r])||ua[r].zero;i=this.l10n(r)+" "+l}s&&(this.$["*operationTooltip"]=i),this.ref["tooltip-el"].classList.toggle("info-tooltip_visible",s)},0));this.init$={...this.init$,"*sliderEl":null,"*loadingOperations":new Map,"*showSlider":!1,"*currentFilter":Ui,"*currentOperation":null,showLoader:!1,filters:gV,colorOperations:mV,cropOperations:yV,"*operationTooltip":null,"presence.mainToolbar":!0,"presence.subToolbar":!1,"presence.tabToggles":!0,"presence.tabContent.crop":!1,"presence.tabContent.tuning":!1,"presence.tabContent.filters":!1,"presence.tabToggle.crop":!0,"presence.tabToggle.tuning":!0,"presence.tabToggle.filters":!0,"presence.subTopToolbarStyles":{hidden:"sub-toolbar--top-hidden",visible:"sub-toolbar--visible"},"presence.subBottomToolbarStyles":{hidden:"sub-toolbar--bottom-hidden",visible:"sub-toolbar--visible"},"presence.tabContentStyles":{hidden:"tab-content--hidden",visible:"tab-content--visible"},"presence.tabToggleStyles":{hidden:"tab-toggle--hidden",visible:"tab-toggle--visible"},"presence.tabTogglesStyles":{hidden:"tab-toggles--hidden",visible:"tab-toggles--visible"},"on.cancel":()=>{this._cancelPreload&&this._cancelPreload(),this.$["*on.cancel"]()},"on.apply":()=>{this.$["*on.apply"](this.$["*editorTransformations"])},"on.applySlider":()=>{this.ref["slider-el"].apply(),this._onSliderClose()},"on.cancelSlider":()=>{this.ref["slider-el"].cancel(),this._onSliderClose()},"on.clickTab":n=>{const r=n.currentTarget.getAttribute("data-id");r&&this._activateTab(r,{fromViewer:!1})}},this._debouncedShowLoader=Dn(this._showLoader.bind(this),500)}_onSliderClose(){this.$["*showSlider"]=!1,this.$["*tabId"]===Kt.TUNING&&this.ref["tooltip-el"].classList.toggle("info-tooltip_visible",!1)}_createOperationControl(n){let r=new _S;return r.operation=n,r}_createFilterControl(n){let r=new Hy;return r.filter=n,r}_createToggleControl(n){let r=new yS;return r.operation=n,r}_renderControlsList(n){let r=this.ref[`controls-list-${n}`],i=document.createDocumentFragment();n===Kt.CROP?this.$.cropOperations.forEach(s=>{let o=this._createToggleControl(s);i.appendChild(o)}):n===Kt.FILTERS?[Ui,...this.$.filters].forEach(s=>{let o=this._createFilterControl(s);i.appendChild(o)}):n===Kt.TUNING&&this.$.colorOperations.forEach(s=>{let o=this._createOperationControl(s);i.appendChild(o)}),[...i.children].forEach((s,o)=>{o===i.childNodes.length-1&&s.classList.add("controls-list_last-item")}),r.innerHTML="",r.appendChild(i)}_activateTab(n,{fromViewer:r}){this.$["*tabId"]=n,n===Kt.CROP?(this.$["*faderEl"].deactivate(),this.$["*cropperEl"].activate(this.$["*imageSize"],{fromViewer:r})):(this.$["*faderEl"].activate({url:this.$["*originalUrl"],fromViewer:r}),this.$["*cropperEl"].deactivate());for(let i of dr){let s=i===n,o=this.ref[`tab-toggle-${i}`];o.active=s,s?(this._renderControlsList(n),this._syncTabIndicator()):this._unmountTabControls(i),this.$[`presence.tabContent.${i}`]=s}}_unmountTabControls(n){let r=this.ref[`controls-list-${n}`];r&&(r.innerHTML="")}_syncTabIndicator(){let n=this.ref[`tab-toggle-${this.$["*tabId"]}`],r=this.ref["tabs-indicator"];r.style.transform=`translateX(${n.offsetLeft}px)`}_preloadEditedImage(){if(this.$["*imgContainerEl"]&&this.$["*originalUrl"]){let n=this.$["*imgContainerEl"].offsetWidth,r=this.proxyUrl(Wy(this.$["*originalUrl"],n,this.$["*editorTransformations"]));this._cancelPreload&&this._cancelPreload();let{cancel:i}=Cm([r]);this._cancelPreload=()=>{i(),this._cancelPreload=void 0}}}_showLoader(n){this.$.showLoader=n}initCallback(){super.initCallback(),this.$["*sliderEl"]=this.ref["slider-el"],this.sub("*imageSize",n=>{n&&setTimeout(()=>{this._activateTab(this.$["*tabId"],{fromViewer:!0})},0)}),this.sub("*editorTransformations",n=>{var i;let r=(i=n==null?void 0:n.filter)==null?void 0:i.name;this.$["*currentFilter"]!==r&&(this.$["*currentFilter"]=r)}),this.sub("*currentFilter",()=>{this._updateInfoTooltip()}),this.sub("*currentOperation",()=>{this._updateInfoTooltip()}),this.sub("*tabId",()=>{this._updateInfoTooltip()}),this.sub("*originalUrl",()=>{this.$["*faderEl"]&&this.$["*faderEl"].deactivate()}),this.sub("*editorTransformations",n=>{this._preloadEditedImage(),this.$["*faderEl"]&&this.$["*faderEl"].setTransformations(n)}),this.sub("*loadingOperations",n=>{let r=!1;for(let[,i]of n.entries()){if(r)break;for(let[,s]of i.entries())if(s){r=!0;break}}this._debouncedShowLoader(r)}),this.sub("*showSlider",n=>{this.$["presence.subToolbar"]=n,this.$["presence.mainToolbar"]=!n}),this.sub("*tabList",n=>{this.$["presence.tabToggles"]=n.length>1;for(const r of dr){this.$[`presence.tabToggle.${r}`]=n.includes(r);const i=this.ref[`tab-toggle-${r}`];i.style.gridColumn=n.indexOf(r)+1}n.includes(this.$["*tabId"])||this._activateTab(n[0],{fromViewer:!1})}),this._updateInfoTooltip()}}bS.template=`
  <lr-line-loader-ui set="active: showLoader"></lr-line-loader-ui>
  <div class="info-tooltip_container">
    <div class="info-tooltip_wrapper">
      <div ref="tooltip-el" class="info-tooltip info-tooltip_hidden">{{*operationTooltip}}</div>
    </div>
  </div>
  <div class="toolbar-container">
    <lr-presence-toggle class="sub-toolbar" set="visible: presence.mainToolbar; styles: presence.subTopToolbarStyles">
      <div class="tab-content-row">${dr.map(p$).join("")}</div>
      <div class="controls-row">
        <lr-btn-ui theme="boring" icon="closeMax" set="onclick: on.cancel"> </lr-btn-ui>
        <lr-presence-toggle class="tab-toggles" set="visible: presence.tabToggles; styles: presence.tabTogglesStyles">
          <div ref="tabs-indicator" class="tab-toggles_indicator"></div>
          ${dr.map(f$).join("")}
        </lr-presence-toggle>
        <lr-btn-ui theme="primary" icon="done" set="onclick: on.apply"> </lr-btn-ui>
      </div>
    </lr-presence-toggle>
    <lr-presence-toggle class="sub-toolbar" set="visible: presence.subToolbar; styles: presence.subBottomToolbarStyles">
      <div class="slider">
        <lr-editor-slider ref="slider-el"></lr-editor-slider>
      </div>
      <div class="controls-row">
        <lr-btn-ui theme="boring" set="onclick: on.cancelSlider;" l10n="@text:cancel"> </lr-btn-ui>
        <lr-btn-ui theme="primary" set="onclick: on.applySlider;" l10n="@text:apply"> </lr-btn-ui>
      </div>
    </lr-presence-toggle>
  </div>
`;class qy extends Oe{constructor(){super(),this._iconReversed=!1,this._iconSingle=!1,this._iconHidden=!1,this.init$={...this.init$,text:"",icon:"",iconCss:this._iconCss(),theme:null},this.defineAccessor("active",e=>{e?this.setAttribute("active",""):this.removeAttribute("active")})}_iconCss(){return Qn("icon",{icon_left:!this._iconReversed,icon_right:this._iconReversed,icon_hidden:this._iconHidden,icon_single:this._iconSingle})}initCallback(){super.initCallback(),this.sub("icon",e=>{this._iconSingle=!this.$.text,this._iconHidden=!e,this.$.iconCss=this._iconCss()}),this.sub("theme",e=>{e!=="custom"&&(this.className=e)}),this.sub("text",e=>{this._iconSingle=!1}),this.setAttribute("role","button"),this.tabIndex===-1&&(this.tabIndex=0),this.hasAttribute("theme")||this.setAttribute("theme","default")}set reverse(e){this.hasAttribute("reverse")?(this.style.flexDirection="row-reverse",this._iconReversed=!0):(this._iconReversed=!1,this.style.flexDirection=null)}}qy.bindAttributes({text:"text",icon:"icon",reverse:"reverse",theme:"theme"});qy.template=`
  <lr-icon size="20" set="className: iconCss; @name: icon;"></lr-icon>
  <div class="text">{{text}}</div>
`;class TS extends Oe{constructor(){super(),this._active=!1,this._handleTransitionEndRight=()=>{let e=this.ref["line-el"];e.style.transition="initial",e.style.opacity="0",e.style.transform="translateX(-101%)",this._active&&this._start()}}initCallback(){super.initCallback(),this.defineAccessor("active",e=>{typeof e=="boolean"&&(e?this._start():this._stop())})}_start(){this._active=!0;let{width:e}=this.getBoundingClientRect(),n=this.ref["line-el"];n.style.transition="transform 1s",n.style.opacity="1",n.style.transform=`translateX(${e}px)`,n.addEventListener("transitionend",this._handleTransitionEndRight,{once:!0})}_stop(){this._active=!1}}TS.template=`
  <div class="inner">
    <div class="line" ref="line-el"></div>
  </div>
`;const Tc={transition:"transition",visible:"visible",hidden:"hidden"};class CS extends Oe{constructor(){super(),this._visible=!1,this._visibleStyle=Tc.visible,this._hiddenStyle=Tc.hidden,this._externalTransitions=!1,this.defineAccessor("styles",e=>{e&&(this._externalTransitions=!0,this._visibleStyle=e.visible,this._hiddenStyle=e.hidden)}),this.defineAccessor("visible",e=>{typeof e=="boolean"&&(this._visible=e,this._handleVisible())})}_handleVisible(){this.style.visibility=this._visible?"inherit":"hidden",e$(this,{[Tc.transition]:!this._externalTransitions,[this._visibleStyle]:this._visible,[this._hiddenStyle]:!this._visible}),this.setAttribute("aria-hidden",this._visible?"false":"true")}initCallback(){super.initCallback(),this.setAttribute("hidden",""),this._externalTransitions||this.classList.add(Tc.transition),this._handleVisible(),setTimeout(()=>this.removeAttribute("hidden"),0)}}CS.template=" <slot></slot> ";class IS extends Oe{constructor(){super();V(this,"init$",{...this.init$,disabled:!1,min:0,max:100,onInput:null,onChange:null,defaultValue:null,"on.sliderInput":()=>{let n=parseInt(this.ref["input-el"].value,10);this._updateValue(n),this.$.onInput&&this.$.onInput(n)},"on.sliderChange":()=>{let n=parseInt(this.ref["input-el"].value,10);this.$.onChange&&this.$.onChange(n)}});this.setAttribute("with-effects","")}initCallback(){super.initCallback(),this.defineAccessor("disabled",r=>{this.$.disabled=r}),this.defineAccessor("min",r=>{this.$.min=r}),this.defineAccessor("max",r=>{this.$.max=r}),this.defineAccessor("defaultValue",r=>{this.$.defaultValue=r,this.ref["input-el"].value=r,this._updateValue(r)}),this.defineAccessor("zero",r=>{this._zero=r}),this.defineAccessor("onInput",r=>{r&&(this.$.onInput=r)}),this.defineAccessor("onChange",r=>{r&&(this.$.onChange=r)}),this._updateSteps(),this._observer=new ResizeObserver(()=>{this._updateSteps();let r=parseInt(this.ref["input-el"].value,10);this._updateValue(r)}),this._observer.observe(this),this._thumbSize=parseInt(window.getComputedStyle(this).getPropertyValue("--l-thumb-size"),10),setTimeout(()=>{let r=parseInt(this.ref["input-el"].value,10);this._updateValue(r)},0),this.sub("disabled",r=>{let i=this.ref["input-el"];r?i.setAttribute("disabled","disabled"):i.removeAttribute("disabled")});let n=this.ref["input-el"];n.addEventListener("focus",()=>{this.style.setProperty("--color-effect","var(--hover-color-rgb)")}),n.addEventListener("blur",()=>{this.style.setProperty("--color-effect","var(--idle-color-rgb)")})}_updateValue(n){this._updateZeroDot(n);let{width:r}=this.getBoundingClientRect(),o=100/(this.$.max-this.$.min)*(n-this.$.min)*(r-this._thumbSize)/100;window.requestAnimationFrame(()=>{this.ref["thumb-el"].style.transform=`translateX(${o}px)`})}_updateZeroDot(n){if(!this._zeroDotEl)return;n===this._zero?this._zeroDotEl.style.opacity="0":this._zeroDotEl.style.opacity="0.2";let{width:r}=this.getBoundingClientRect(),o=100/(this.$.max-this.$.min)*(this._zero-this.$.min)*(r-this._thumbSize)/100;window.requestAnimationFrame(()=>{this._zeroDotEl.style.transform=`translateX(${o}px)`})}_updateSteps(){let r=this.ref["steps-el"],{width:i}=r.getBoundingClientRect(),s=Math.ceil(i/2),o=Math.ceil(s/15)-2;if(this._stepsCount===o)return;let a=document.createDocumentFragment(),l=document.createElement("div"),c=document.createElement("div");l.className="minor-step",c.className="border-step",a.appendChild(c);for(let f=0;f<o;f++)a.appendChild(l.cloneNode());a.appendChild(c.cloneNode());for(let f=0;f<o;f++)a.appendChild(l.cloneNode());a.appendChild(c.cloneNode());let h=document.createElement("div");h.className="zero-dot",a.appendChild(h),this._zeroDotEl=h,r.innerHTML="",r.appendChild(a),this._stepsCount=o}destroyCallback(){var n;(n=this._observer)==null||n.disconnect()}}IS.template=`
  <div class="steps" ref="steps-el"></div>
  <div ref="thumb-el" class="thumb"></div>
  <input
    class="input"
    type="range"
    ref="input-el"
    tabindex="0"
    set="oninput: on.sliderInput; onchange: on.sliderChange; @min: min; @max: max; @value: defaultValue;"
  />
`;class m$ extends Ke{constructor(){super();V(this,"couldBeCtxOwner",!0);V(this,"activityType",fe.activities.CLOUD_IMG_EDIT);this.init$={...this.init$,cdnUrl:null}}initCallback(){super.initCallback(),this.registerActivity(this.activityType,{onActivate:()=>this.mountEditor(),onDeactivate:()=>this.unmountEditor()}),this.sub("*focusedEntry",n=>{n&&(this.entry=n,this.entry.subscribe("cdnUrl",r=>{r&&(this.$.cdnUrl=r)}))}),this.subConfigValue("cropPreset",n=>{this._instance&&this._instance.getAttribute("crop-preset")!==n&&this._instance.setAttribute("crop-preset",n)}),this.subConfigValue("cloudImageEditorTabs",n=>{this._instance&&this._instance.getAttribute("tabs")!==n&&this._instance.setAttribute("tabs",n)})}handleApply(n){if(!this.entry)return;let r=n.detail;this.entry.setMultipleValues({cdnUrl:r.cdnUrl,cdnUrlModifiers:r.cdnUrlModifiers}),this.historyBack()}handleCancel(){this.historyBack()}mountEditor(){const n=new Aa,r=this.$.cdnUrl,i=this.cfg.cropPreset,s=this.cfg.cloudImageEditorTabs;n.setAttribute("ctx-name",this.ctxName),n.setAttribute("cdn-url",r),i&&n.setAttribute("crop-preset",i),s&&n.setAttribute("tabs",s),n.addEventListener("apply",o=>{const a=o;this.handleApply(a),this.debugPrint('editor event "apply"',a.detail)}),n.addEventListener("cancel",o=>{const a=o;this.handleCancel(),this.debugPrint('editor event "cancel"',a.detail)}),n.addEventListener("change",o=>{const a=o;this.debugPrint('editor event "change"',a.detail)}),this.innerHTML="",this.appendChild(n),this._mounted=!0,this._instance=n}unmountEditor(){this._instance=void 0,this.innerHTML=""}}const g$=function(t){return t.replace(/[\\-\\[]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&")},y$=function(t,e="i"){const n=t.split("*").map(g$);return new RegExp("^"+n.join(".+")+"$",e)};let v$=t=>Object.keys(t).reduce((n,r)=>{let i=t[r],s=Object.keys(i).reduce((o,a)=>{let l=i[a];return o+`${a}: ${l};`},"");return n+`${r}{${s}}`},"");function _$({textColor:t,backgroundColor:e,linkColor:n,linkColorHover:r,shadeColor:i}){let s=`solid 1px ${i}`;return v$({body:{color:t,"background-color":e},".side-bar":{background:"inherit","border-right":s},".main-content":{background:"inherit"},".main-content-header":{background:"inherit"},".main-content-footer":{background:"inherit"},".list-table-row":{color:"inherit"},".list-table-row:hover":{background:i},".list-table-row .list-table-cell-a, .list-table-row .list-table-cell-b":{"border-top":s},".list-table-body .list-items":{"border-bottom":s},".bread-crumbs a":{color:n},".bread-crumbs a:hover":{color:r},".main-content.loading":{background:`${e} url(/static/images/loading_spinner.gif) center no-repeat`,"background-size":"25px 25px"},".list-icons-item":{"background-color":i},".source-gdrive .side-bar-menu a, .source-gphotos .side-bar-menu a":{color:n},".source-gdrive .side-bar-menu a, .source-gphotos .side-bar-menu a:hover":{color:r},".side-bar-menu a":{color:n},".side-bar-menu a:hover":{color:r},".source-gdrive .side-bar-menu .current, .source-gdrive .side-bar-menu a:hover, .source-gphotos .side-bar-menu .current, .source-gphotos .side-bar-menu a:hover":{color:r},".source-vk .side-bar-menu a":{color:n},".source-vk .side-bar-menu a:hover":{color:r,background:"none"}})}let $i={};window.addEventListener("message",t=>{let e;try{e=JSON.parse(t.data)}catch{return}if((e==null?void 0:e.type)in $i){let n=$i[e.type];for(let[r,i]of n)t.source===r&&i(e)}});const w$=function(t,e,n){t in $i||($i[t]=[]),$i[t].push([e,n])},E$=function(t,e){t in $i&&($i[t]=$i[t].filter(n=>n[0]!==e))};function b$(t){let e=[];for(let[n,r]of Object.entries(t))r==null||typeof r=="string"&&r.length===0||e.push(`${n}=${encodeURIComponent(r)}`);return e.join("&")}class SS extends Ke{constructor(){super();V(this,"couldBeCtxOwner",!0);V(this,"activityType",fe.activities.EXTERNAL);V(this,"_iframe",null);this.init$={...this.init$,activityIcon:"",activityCaption:"",selectedList:[],counter:0,multiple:!1,onDone:()=>{for(const n of this.$.selectedList){const r=this.extractUrlFromMessage(n),{filename:i}=n,{externalSourceType:s}=this.activityParams;this.addFileFromUrl(r,{fileName:i,source:s})}this.$["*currentActivity"]=fe.activities.UPLOAD_LIST},onCancel:()=>{this.historyBack()}}}initCallback(){super.initCallback(),this.registerActivity(this.activityType,{onActivate:()=>{let{externalSourceType:n}=this.activityParams;this.set$({activityCaption:`${n==null?void 0:n[0].toUpperCase()}${n==null?void 0:n.slice(1)}`,activityIcon:n}),this.mountIframe()}}),this.sub("*currentActivity",n=>{n!==this.activityType&&this.unmountIframe()}),this.sub("selectedList",n=>{this.$.counter=n.length}),this.subConfigValue("multiple",n=>{this.$.multiple=n})}extractUrlFromMessage(n){if(n.alternatives){const r=Gr(this.cfg.externalSourcesPreferredTypes);for(const i of r){const s=y$(i);for(const[o,a]of Object.entries(n.alternatives))if(s.test(o))return a}}return n.url}sendMessage(n){var r,i;(i=(r=this._iframe)==null?void 0:r.contentWindow)==null||i.postMessage(JSON.stringify(n),"*")}async handleFileSelected(n){!this.$.multiple&&this.$.selectedList.length||(this.$.selectedList=[...this.$.selectedList,n],this.$.multiple||this.$.onDone())}handleIframeLoad(){this.applyStyles()}getCssValue(n){return window.getComputedStyle(this).getPropertyValue(n).trim()}applyStyles(){let n={backgroundColor:this.getCssValue("--clr-background-light"),textColor:this.getCssValue("--clr-txt"),shadeColor:this.getCssValue("--clr-shade-lv1"),linkColor:"#157cfc",linkColorHover:"#3891ff"};this.sendMessage({type:"embed-css",style:_$(n)})}remoteUrl(){var c,h;const{pubkey:n,remoteTabSessionKey:r,socialBaseUrl:i}=this.cfg,{externalSourceType:s}=this.activityParams,a={lang:((h=(c=this.l10n("social-source-lang"))==null?void 0:c.split("-"))==null?void 0:h[0])||"en",public_key:n,images_only:"false",pass_window_open:!1,session_key:r},l=new URL(`/window3/${s}`,i);return l.search=b$(a),l.toString()}mountIframe(){let n=Cy({tag:"iframe",attributes:{src:this.remoteUrl(),marginheight:0,marginwidth:0,frameborder:0,allowTransparency:!0}});n.addEventListener("load",this.handleIframeLoad.bind(this)),this.ref.iframeWrapper.innerHTML="",this.ref.iframeWrapper.appendChild(n),w$("file-selected",n.contentWindow,this.handleFileSelected.bind(this)),this._iframe=n,this.$.selectedList=[]}unmountIframe(){this._iframe&&E$("file-selected",this._iframe.contentWindow),this.ref.iframeWrapper.innerHTML="",this._iframe=null,this.$.selectedList=[],this.$.counter=0}}SS.template=`
  <lr-activity-header>
    <button type="button" class="mini-btn" set="onclick: *historyBack">
      <lr-icon name="back"></lr-icon>
    </button>
    <div>
      <lr-icon set="@name: activityIcon"></lr-icon>
      <span>{{activityCaption}}</span>
    </div>
    <button type="button" class="mini-btn close-btn" set="onclick: *historyBack">
      <lr-icon name="close"></lr-icon>
    </button>
  </lr-activity-header>
  <div class="content">
    <div ref="iframeWrapper" class="iframe-wrapper"></div>
    <div class="toolbar">
      <button type="button" class="cancel-btn secondary-btn" set="onclick: onCancel" l10n="cancel"></button>
      <div></div>
      <div set="@hidden: !multiple" class="selected-counter"><span l10n="selected-count"></span>{{counter}}</div>
      <button type="button" class="done-btn primary-btn" set="onclick: onDone; @disabled: !counter">
        <lr-icon name="check"></lr-icon>
      </button>
    </div>
  </div>
`;class Gy extends Oe{setCurrentTab(e){if(!e)return;[...this.ref.context.querySelectorAll("[tab-ctx]")].forEach(r=>{r.getAttribute("tab-ctx")===e?r.removeAttribute("hidden"):r.setAttribute("hidden","")});for(let r in this._tabMap)r===e?this._tabMap[r].setAttribute("current",""):this._tabMap[r].removeAttribute("current")}initCallback(){super.initCallback(),this._tabMap={},this.defineAccessor("tab-list",e=>{if(!e)return;Gr(e).forEach(r=>{let i=Cy({tag:"div",attributes:{class:"tab"},properties:{onclick:()=>{this.setCurrentTab(r)}}});i.textContent=this.l10n(r),this.ref.row.appendChild(i),this._tabMap[r]=i})}),this.defineAccessor("default",e=>{this.setCurrentTab(e)}),this.hasAttribute("default")||this.setCurrentTab(Object.keys(this._tabMap)[0])}}Gy.bindAttributes({"tab-list":null,default:null});Gy.template=`
  <div ref="row" class="tabs-row"></div>
  <div ref="context" class="tabs-context">
    <slot></slot>
  </div>
`;class T$ extends Ke{constructor(){super(...arguments);V(this,"requireCtxName",!0)}_createValidationInput(){const n=document.createElement("input");return n.type="text",n.name=this.ctxName,n.required=this.cfg.multipleMin>0,n.tabIndex=-1,mI(n,{opacity:0,height:0,width:0}),n}initCallback(){super.initCallback(),this._validationInputElement=this._createValidationInput(),this.appendChild(this._validationInputElement),this.sub("*collectionState",n=>{var r;{if(this._dynamicInputsContainer||(this._dynamicInputsContainer=document.createElement("div"),this.appendChild(this._dynamicInputsContainer)),!this._validationInputElement){const a=this._createValidationInput();this.appendChild(a),this._validationInputElement=a}if(this._dynamicInputsContainer.innerHTML="",n.status==="uploading"||n.status==="idle"){this._validationInputElement.value="",this._validationInputElement.setCustomValidity("");return}if(n.status==="failed"){const a=(r=n.errors[0])==null?void 0:r.message;this._validationInputElement.value="",this._validationInputElement.setCustomValidity(a);return}const i=n.group?n.group:null;if(i){this._validationInputElement.value=i.cdnUrl,this._validationInputElement.setCustomValidity("");return}const s=n.allEntries.map(a=>a.cdnUrl);if(!this.cfg.multiple&&s.length===1){this._validationInputElement.value=s[0],this._validationInputElement.setCustomValidity("");return}this._validationInputElement.remove(),this._validationInputElement=null;const o=new DocumentFragment;for(let a of s){const l=document.createElement("input");l.type="hidden",l.name=`${this.ctxName}[]`,l.value=a,o.appendChild(l)}this._dynamicInputsContainer.replaceChildren(o)}},!1)}}class C$ extends fe{}class AS extends Oe{constructor(){super(...arguments);V(this,"init$",{...this.init$,currentText:"",options:[],selectHtml:"",onSelect:n=>{var r;n.preventDefault(),n.stopPropagation(),this.value=this.ref.select.value,this.$.currentText=((r=this.$.options.find(i=>i.value==this.value))==null?void 0:r.text)||"",this.dispatchEvent(new Event("change"))}})}initCallback(){super.initCallback(),this.sub("options",n=>{var i;this.$.currentText=((i=n==null?void 0:n[0])==null?void 0:i.text)||"";let r="";n==null||n.forEach(s=>{r+=`<option value="${s.value}">${s.text}</option>`}),this.$.selectHtml=r})}}AS.template=`
  <button>
    {{currentText}}
    <lr-icon name="select"></lr-icon>
    <select ref="select" set="innerHTML: selectHtml; onchange: onSelect"></select>
  </button>
`;const en={PLAY:"play",PAUSE:"pause",FS_ON:"fullscreen-on",FS_OFF:"fullscreen-off",VOL_ON:"unmute",VOL_OFF:"mute",CAP_ON:"captions",CAP_OFF:"captions-off"},Zw={requestFullscreen:t=>{t.requestFullscreen?t.requestFullscreen():t.webkitRequestFullscreen&&t.webkitRequestFullscreen()},exitFullscreen:()=>{document.exitFullscreen?document.exitFullscreen():document.webkitExitFullscreen&&document.webkitExitFullscreen()}};class kr extends Oe{constructor(){super(...arguments);V(this,"init$",{...this.init$,src:"",ppIcon:en.PLAY,fsIcon:en.FS_ON,volIcon:en.VOL_ON,capIcon:en.CAP_OFF,totalTime:"00:00",currentTime:"00:00",progressCssWidth:"0",hasSubtitles:!1,volumeDisabled:!1,volumeValue:0,onPP:()=>{this.togglePlay()},onFs:()=>{this.toggleFullscreen()},onCap:()=>{this.toggleCaptions()},onMute:()=>{this.toggleSound()},onVolChange:n=>{let r=parseFloat(n.currentTarget.$.value);this.setVolume(r)},progressClicked:n=>{let r=this.progress.getBoundingClientRect();this._video.currentTime=this._video.duration*(n.offsetX/r.width)}})}togglePlay(){this._video.paused||this._video.ended?this._video.play():this._video.pause()}toggleFullscreen(){(document.fullscreenElement||document.webkitFullscreenElement)===this?Zw.exitFullscreen():Zw.requestFullscreen(this)}toggleCaptions(){this.$.capIcon===en.CAP_OFF?(this.$.capIcon=en.CAP_ON,this._video.textTracks[0].mode="showing",window.localStorage.setItem(kr.is+":captions","1")):(this.$.capIcon=en.CAP_OFF,this._video.textTracks[0].mode="hidden",window.localStorage.removeItem(kr.is+":captions"))}toggleSound(){this.$.volIcon===en.VOL_ON?(this.$.volIcon=en.VOL_OFF,this.$.volumeDisabled=!0,this._video.muted=!0):(this.$.volIcon=en.VOL_ON,this.$.volumeDisabled=!1,this._video.muted=!1)}setVolume(n){window.localStorage.setItem(kr.is+":volume",n);let r=n?n/100:0;this._video.volume=r}get progress(){return this.ref.progress}_getUrl(n){return n.includes("/")?n:`https://ucarecdn.com/${n}/`}_desc2attrs(n){let r=[];for(let i in n){let s=i==="src"?this._getUrl(n[i]):n[i];r.push(`${i}="${s}"`)}return r.join(" ")}_timeFmt(n){let r=new Date(Math.round(n)*1e3);return[r.getMinutes(),r.getSeconds()].map(i=>i<10?"0"+i:i).join(":")}_initTracks(){[...this._video.textTracks].forEach(n=>{n.mode="hidden"}),window.localStorage.getItem(kr.is+":captions")&&this.toggleCaptions()}_castAttributes(){let n=["autoplay","loop","muted"];[...this.attributes].forEach(r=>{n.includes(r.name)&&this._video.setAttribute(r.name,r.value)})}initCallback(){super.initCallback(),this._video=this.ref.video,this._castAttributes(),this._video.addEventListener("play",()=>{this.$.ppIcon=en.PAUSE,this.setAttribute("playback","")}),this._video.addEventListener("pause",()=>{this.$.ppIcon=en.PLAY,this.removeAttribute("playback")}),this.addEventListener("fullscreenchange",r=>{console.log(r),document.fullscreenElement===this?this.$.fsIcon=en.FS_OFF:this.$.fsIcon=en.FS_ON}),this.sub("src",r=>{if(!r)return;let i=this._getUrl(r);this._video.src=i}),this.sub("video",async r=>{if(!r)return;let i=await(await window.fetch(this._getUrl(r))).json();i.poster&&(this._video.poster=this._getUrl(i.poster));let s="";i==null||i.sources.forEach(o=>{s+=`<source ${this._desc2attrs(o)} />`}),i.tracks&&(i.tracks.forEach(o=>{s+=`<track ${this._desc2attrs(o)} />`}),this.$.hasSubtitles=!0),this._video.innerHTML+=s,this._initTracks(),console.log(i)}),this._video.addEventListener("loadedmetadata",r=>{this.$.currentTime=this._timeFmt(this._video.currentTime),this.$.totalTime=this._timeFmt(this._video.duration)}),this._video.addEventListener("timeupdate",r=>{let i=Math.round(100*(this._video.currentTime/this._video.duration));this.$.progressCssWidth=i+"%",this.$.currentTime=this._timeFmt(this._video.currentTime)});let n=window.localStorage.getItem(kr.is+":volume");if(n){let r=parseFloat(n);this.setVolume(r),this.$.volumeValue=r}}}kr.template=`
  <div class="video-wrapper">
    <video ref="video" preload="metadata" crossorigin="anonymous"></video>
  </div>

  <div class="toolbar">
    <div class="progress" ref="progress" set -onclick="progressClicked">
      <div class="bar" set -style.width="progressCssWidth"></div>
    </div>

    <div class="tb-block">
      <button set -onclick="onPP">
        <lr-icon set -@name="ppIcon"></lr-icon>
      </button>
      <div class="timer">{{currentTime}} / {{totalTime}}</div>
    </div>

    <div class="tb-block">
      <button set -onclick="onCap" -@hidden="!hasSubtitles">
        <lr-icon set -@name="capIcon"></lr-icon>
      </button>

      <button set -onclick="onMute">
        <lr-icon set -@name="volIcon"></lr-icon>
      </button>

      <lr-range type="range" set -onchange="onVolChange" -@disabled="volumeDisabled" -value="volumeValue"> </lr-range>

      <button set -onclick="onFs">
        <lr-icon set -@name="fsIcon"></lr-icon>
      </button>
    </div>
  </div>
`;kr.bindAttributes({video:"video",src:"src"});class xS extends Oe{initCallback(){super.initCallback(),this.subConfigValue("removeCopyright",e=>{this.toggleAttribute("hidden",!!e)})}}V(xS,"template",`
    <a
      href="https://uploadcare.com/?utm_source=copyright&utm_medium=referral&utm_campaign=v4"
      target="_blank noopener"
      class="credits"
      >Powered by Uploadcare</a
    >
  `);class Ky extends Oe{constructor(){super(...arguments);V(this,"requireCtxName",!0);V(this,"init$",NI(this));V(this,"_template",null)}static set template(n){this._template=n+"<slot></slot>"}static get template(){return this._template}}class Qy extends Ky{initCallback(){super.initCallback(),this.sub("*modalActive",e=>{this._lastModalActive!==e&&this.emit(e?tt.MODAL_OPEN:tt.MODAL_CLOSE,void 0,{debounce:!0}),this._lastModalActive=e},!1)}}Qy.template=`
  <lr-simple-btn></lr-simple-btn>

  <lr-modal strokes block-body-scrolling>
    <lr-start-from>
      <lr-drop-area with-icon clickable></lr-drop-area>
      <lr-source-list wrap></lr-source-list>
      <button type="button" l10n="start-from-cancel" class="secondary-btn" set="onclick: *historyBack"></button>
      <lr-copyright></lr-copyright>
    </lr-start-from>
    <lr-upload-list></lr-upload-list>
    <lr-camera-source></lr-camera-source>
    <lr-url-source></lr-url-source>
    <lr-external-source></lr-external-source>
    <lr-cloud-image-editor-activity></lr-cloud-image-editor-activity>
  </lr-modal>

  <lr-progress-bar-common></lr-progress-bar-common>
`;class zd extends Ky{initCallback(){super.initCallback();const e=this.ref.uBlock;this.sub("*currentActivity",n=>{n||(this.$["*currentActivity"]=e.initActivity||fe.activities.START_FROM)}),this.sub("*uploadList",n=>{(n==null?void 0:n.length)>0?this.$["*currentActivity"]=fe.activities.UPLOAD_LIST:this.$["*currentActivity"]=e.initActivity||fe.activities.START_FROM}),this.subConfigValue("sourceList",n=>{n!=="local"&&(this.cfg.sourceList="local")}),this.subConfigValue("confirmUpload",n=>{n!==!1&&(this.cfg.confirmUpload=!1)})}}zd.template=`
  <lr-start-from>
    <lr-drop-area clickable l10n="choose-file"></lr-drop-area>
    <lr-copyright></lr-copyright>
  </lr-start-from>
  <lr-upload-list ref="uBlock"></lr-upload-list>
`;class kS extends Ky{constructor(){super(),this.init$={...this.init$,couldCancel:!1,cancel:()=>{this.couldHistoryBack?this.$["*historyBack"]():this.couldShowList&&(this.$["*currentActivity"]=fe.activities.UPLOAD_LIST)}}}get couldHistoryBack(){const e=this.$["*history"];return e.length>1&&e[e.length-1]!==fe.activities.START_FROM}get couldShowList(){return this.cfg.showEmptyList||this.$["*uploadList"].length>0}initCallback(){super.initCallback();const e=this.ref.uBlock;this.sub("*currentActivity",n=>{n||(this.$["*currentActivity"]=e.initActivity||fe.activities.START_FROM)}),this.sub("*uploadList",n=>{(n==null?void 0:n.length)>0&&this.$["*currentActivity"]===(e.initActivity||fe.activities.START_FROM)&&(this.$["*currentActivity"]=fe.activities.UPLOAD_LIST)}),this.sub("*history",()=>{this.$.couldCancel=this.couldHistoryBack||this.couldShowList})}}kS.template=` <lr-start-from>
    <lr-drop-area with-icon clickable></lr-drop-area>
    <lr-source-list wrap></lr-source-list>
    <button
      type="button"
      l10n="start-from-cancel"
      class="cancel-btn secondary-btn"
      set="onclick: cancel; @hidden: !couldCancel"
    ></button>
    <lr-copyright></lr-copyright>
  </lr-start-from>
  <lr-upload-list ref="uBlock"></lr-upload-list>
  <lr-camera-source></lr-camera-source>
  <lr-url-source></lr-url-source>
  <lr-external-source></lr-external-source>
  <lr-progress-bar></lr-progress-bar>
  <lr-cloud-image-editor-activity></lr-cloud-image-editor-activity>`;class I$ extends Aa{initCallback(){super.initCallback(),this.__shadowReady=!0,this.$["*faderEl"]=this.ref["fader-el"],this.$["*cropperEl"]=this.ref["cropper-el"],this.$["*imgContainerEl"]=this.ref["img-container-el"],this.initEditor()}async initEditor(){this.__shadowReady&&await super.initEditor()}}function Ou(t){for(let e in t){let n=[...e].reduce((r,i)=>(i.toUpperCase()===i&&(i="-"+i.toLowerCase()),r+=i),"");n.startsWith("-")&&(n=n.replace("-","")),n.startsWith("lr-")||(n="lr-"+n),t[e].reg&&t[e].reg(n)}}const Gf="LR";async function S$(t,e=!1){return new Promise((n,r)=>{if(typeof document!="object"){n(null);return}if(typeof window=="object"&&window[Gf]){n(window[Gf]);return}let i=document.createElement("script");i.async=!0,i.src=t,i.onerror=()=>{r()},i.onload=()=>{let s=window[Gf];e&&Ou(s),n(s)},document.head.appendChild(i)})}const Xy=Object.freeze(Object.defineProperty({__proto__:null,ActivityBlock:fe,ActivityHeader:C$,BaseComponent:Rd,Block:Oe,CameraSource:cS,CloudImageEditor:I$,CloudImageEditorActivity:m$,CloudImageEditorBlock:Aa,Config:KI,ConfirmationDialog:dS,Copyright:xS,CropFrame:gS,Data:xe,DropArea:$y,EditorCropButtonControl:yS,EditorFilterControl:Hy,EditorImageCropper:wS,EditorImageFader:h$,EditorOperationControl:_S,EditorScroller:ES,EditorSlider:vS,EditorToolbar:bS,ExternalSource:SS,FileItem:As,FilePreview:zy,FileUploaderInline:kS,FileUploaderMinimal:zd,FileUploaderRegular:Qy,FormInput:T$,Icon:Vy,Img:mU,LineLoaderUi:TS,LrBtnUi:qy,Modal:jy,PACKAGE_NAME:Ry,PACKAGE_VERSION:Oy,PresenceToggle:CS,ProgressBar:pS,ProgressBarCommon:fS,Select:AS,SimpleBtn:Uy,SliderUi:IS,SourceBtn:Fy,SourceList:bU,StartFrom:XI,Tabs:Gy,UID:Pu,UploadCtxProvider:Tm,UploadList:lS,UploaderBlock:Ke,UrlSource:uS,Video:kr,connectBlocksFrom:S$,defineLocale:DI,registerBlocks:Ou,toKebabCase:$d},Symbol.toStringTag,{value:"Module"})),A$=new Set(["children","ref","style","className"]),x$=(t={})=>Object==null?void 0:Object.keys(t).reduce((e,n)=>{var r,i;const s=t==null?void 0:t[n],o=`on${(i=(r=s==null?void 0:s.split("-"))==null?void 0:r.map(a=>a.charAt(0).toUpperCase()+a.slice(1)))==null?void 0:i.join("")}`;return e[o]=s,e},{}),e1=new WeakMap,k$=t=>{let e=e1.get(t);return e===void 0&&(e=new Map,e1.set(t,e)),e},t1=({node:t,nameProp:e,valueProp:n,prevValueProp:r,event:i})=>{if(i!==void 0){if(n!==r){const s=k$(t),o=s.has(i);let a=s.get(i);n!==void 0?o?a.handleEvent=n:(a={handleEvent:n},s.set(i,a),t.addEventListener(i,l=>a.handleEvent(l.detail))):o&&(s.delete(i),t.removeEventListener(i,a))}return}t[e]=n,n==null&&e in HTMLElement.prototype&&t.removeAttribute(e)},P$=(t,e,n)=>{const r={},i={};return Object.entries(t).forEach(([s,o])=>{A$.has(s)?r[s==="className"?"class":s]=o:e.has(s)||s in n.prototype?i[s]=o:r[s]=o}),{reactProps:r,customElProps:i}},Nu=({react:t,tag:e,elClass:n,schemaEvents:r})=>{const i=x$(r),s=new Set(Object.keys(i??{})),o=t.forwardRef((a,l)=>{const c=t.useRef(new Map),h=t.useRef(null),{reactProps:f,customElProps:p}=P$(a,s,n);return t.useLayoutEffect(()=>{if(h.current===null)return;const w=new Map;for(const E in p)t1({node:h.current,nameProp:E,valueProp:p[E],prevValueProp:c.current.get(E),event:i[E]}),c.current.delete(E),w.set(E,a[E]);for(const[E,S]of c.current)t1({node:h.current,nameProp:E,valueProp:void 0,prevValueProp:S,event:i[E]});c.current=w}),t.createElement(e??n.__tag,{...f,ref:t.useCallback(w=>{h.current=w,typeof l=="function"?l(w):l!==null&&(l.current=w)},[l])})});return o.displayName=n.name,o},R$=Nu({react:Qt,tag:"lr-config",elClass:KI}),O$=Nu({react:Qt,tag:"lr-upload-ctx-provider",elClass:Tm,schemaEvents:Tm.EventType}),N$=t=>{const e={},n={};return Object.entries(t).forEach(([r,i])=>{r.startsWith("on")?e[r]=i:n[r]=i}),{eventHandlers:e,config:n}},L$="0.5.2",D$="React-Uploader",M$=()=>`${D$}/${L$}`,V$=({condition:t,fallback:e,children:n,...r})=>t?Qt.createElement(D.Suspense,{fallback:e,...r},n):Qt.createElement(Qt.Fragment,null,e),U$=()=>{const[t,e]=D.useState(!1);return D.useEffect(()=>{typeof window<"u"&&e(!0)},[]),t};Ou(Xy);const $$=Nu({react:Qt,tag:"lr-file-uploader-regular",elClass:Qy}),F$=({ctxName:t,className:e,classNameUploader:n,apiRef:r,fallback:i,...s})=>{const o=D.useMemo(()=>t??Pu.generate(),[t]),{eventHandlers:a,config:l}=D.useMemo(()=>N$(s),[s]),c=U$();return Qt.createElement(V$,{condition:c,fallback:i},Qt.createElement("div",{className:e},Qt.createElement(R$,{userAgentIntegration:M$(),"ctx-name":o,...l}),Qt.createElement(O$,{ref:r,"ctx-name":o,...a}),Qt.createElement($$,{class:n,"ctx-name":o})))};Ou(Xy);Nu({react:Qt,tag:"lr-file-uploader-minimal",elClass:zd});Ou(Xy);Nu({react:Qt,tag:"lr-file-uploader-inline",elClass:zd});const j$=({fileEntry:t,onChange:e})=>{const n=D.useRef(null),r=o=>{const a=o.successEntries.map(l=>({cdnUrl:l.cdnUrl||null,uuid:l.uuid||null}));e({files:a}),console.log("The uploaded file event is: ",a)},i=D.useCallback(o=>e({files:t.files.filter(a=>a.uuid!==o)}),[t.files,e]),s=()=>{var o;(o=n.current)==null||o.uploadCollection.clearAll(),e({files:[]})};return x.jsxs("div",{children:[x.jsx(F$,{maxLocalFileSizeBytes:1e7,multipleMax:50,imgOnly:!0,sourceList:"local, url, camera, dropbox, instagram",removeCopyright:!0,confirmUpload:!1,onChange:r,pubkey:"e70c89d72eb677ec70b2"}),x.jsx("div",{className:"grid grid-cols-2 gap-4 mt-8",children:t.files.map(o=>x.jsxs("div",{className:"relative",children:[x.jsx("img",{src:`${o.cdnUrl}/-/format/webp/-/quality/smart/-/stretch/fill/
              `,alt:o.uuid??""}),x.jsx("div",{className:"cursor-pointer flex justify-center absolute -right-2 -top-2 bg-white border-2 border-slate-800  rounded-full w-7 h-7",children:x.jsx("button",{className:"text-slate-800 text-center",type:"button",onClick:()=>i(o.uuid),children:""})}),x.jsx("button",{onClick:s,children:"test"})]},o.uuid))})]})},PS=D.forwardRef(({className:t,...e},n)=>x.jsx("textarea",{className:gn("flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",t),ref:n,...e}));PS.displayName="Textarea";const z$=()=>{const{user:t}=Ca(),e=gu(),[n,r]=D.useState({files:[]}),[i,s]=D.useState({caption:"",photos:[],likes:0,userLikes:[],userId:"",date:new Date}),o=async a=>{a.preventDefault(),console.log("Uploaded File Entry: ",n.files),console.log("The create post is: ",i);const l=n.files.map(c=>({cdnUrl:c.cdnUrl,uuid:c.uuid}));if(t!==null){const c={...i,photos:l,userId:(t==null?void 0:t.uid)||null};console.log("The final post:",c),await p3(c),e("/edelgram/")}else e("/edelgram/login")};return x.jsx(Cd,{children:x.jsx("div",{className:"flex justify-center",children:x.jsxs("div",{className:"border max-w-3xl w-full",children:[x.jsx("h3",{className:"bg-slate-800 text-white text-center text-lg p-2",children:"Create post"}),x.jsx("div",{className:"p-8",children:x.jsx("form",{onSubmit:o,children:x.jsxs("div",{className:"flex flex-col",children:[x.jsx(Mi,{className:"mb-4",htmlFor:"caption",children:"Photo caption"}),x.jsx(PS,{className:"mb-8",id:"caption",placeholder:"Write something....",value:i.caption,onChange:a=>s({...i,caption:a.target.value})}),x.jsxs("div",{className:"flex flex-col",children:[x.jsx(Mi,{className:"mb-4",htmlFor:"photo",children:"Photos"}),x.jsx(j$,{fileEntry:n,onChange:r})]}),x.jsx(Zo,{className:"mt-8 w-32",type:"submit",children:"Post"})]})})})]})})})};/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */function B$(t,e,n,r){function i(s){return s instanceof n?s:new n(function(o){o(s)})}return new(n||(n=Promise))(function(s,o){function a(h){try{c(r.next(h))}catch(f){o(f)}}function l(h){try{c(r.throw(h))}catch(f){o(f)}}function c(h){h.done?s(h.value):i(h.value).then(a,l)}c((r=r.apply(t,[])).next())})}function H$(t,e){var n={label:0,sent:function(){if(s[0]&1)throw s[1];return s[1]},trys:[],ops:[]},r,i,s,o;return o={next:a(0),throw:a(1),return:a(2)},typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function a(c){return function(h){return l([c,h])}}function l(c){if(r)throw new TypeError("Generator is already executing.");for(;n;)try{if(r=1,i&&(s=c[0]&2?i.return:c[0]?i.throw||((s=i.return)&&s.call(i),0):i.next)&&!(s=s.call(i,c[1])).done)return s;switch(i=0,s&&(c=[c[0]&2,s.value]),c[0]){case 0:case 1:s=c;break;case 4:return n.label++,{value:c[1],done:!1};case 5:n.label++,i=c[1],c=[0];continue;case 7:c=n.ops.pop(),n.trys.pop();continue;default:if(s=n.trys,!(s=s.length>0&&s[s.length-1])&&(c[0]===6||c[0]===2)){n=0;continue}if(c[0]===3&&(!s||c[1]>s[0]&&c[1]<s[3])){n.label=c[1];break}if(c[0]===6&&n.label<s[1]){n.label=s[1],s=c;break}if(s&&n.label<s[2]){n.label=s[2],n.ops.push(c);break}s[2]&&n.ops.pop(),n.trys.pop();continue}c=e.call(t,n)}catch(h){c=[6,h],i=0}finally{r=s=0}if(c[0]&5)throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}}/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var No=function(){return No=Object.assign||function(e){for(var n,r=1,i=arguments.length;r<i;r++){n=arguments[r];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},No.apply(this,arguments)},RS=function(t){return{loading:t==null,value:t}},W$=function(){return function(t,e){switch(e.type){case"error":return No(No({},t),{error:e.error,loading:!1,value:void 0});case"reset":return RS(e.defaultValue);case"value":return No(No({},t),{error:void 0,loading:!1,value:e.value});default:return t}}},q$=function(t){var e=t?t():void 0,n=D.useReducer(W$(),RS(e)),r=n[0],i=n[1],s=D.useCallback(function(){var l=t?t():void 0;i({type:"reset",defaultValue:l})},[t]),o=D.useCallback(function(l){i({type:"error",error:l})},[]),a=D.useCallback(function(l){i({type:"value",value:l})},[]);return D.useMemo(function(){return{error:r.error,loading:r.loading,reset:s,setError:o,setValue:a,value:r.value}},[r.error,r.loading,s,o,a,r.value])},G$=function(t,e){var n=q$(function(){return t.currentUser}),r=n.error,i=n.loading,s=n.setError,o=n.setValue,a=n.value;return D.useEffect(function(){var l=_T(t,function(c){return B$(void 0,void 0,void 0,function(){var h;return H$(this,function(f){switch(f.label){case 0:return[3,4];case 1:return f.trys.push([1,3,,4]),[4,e.onUserChanged(c)];case 2:return f.sent(),[3,4];case 3:return h=f.sent(),s(h),[3,4];case 4:return o(c),[2]}})})},s);return function(){l()}},[t]),[a,i,r]};const K$=()=>{const t=RT(),[e,n]=G$(t),r=Hs();return n?x.jsx("div",{children:"Loading..."}):e?x.jsx(Vk,{}):x.jsx(Mk,{to:"edelgram/login",state:{from:r}})},Q$=Wk([{element:x.jsx(K$,{}),children:[{path:"/edelgram/",element:x.jsx(y3,{}),errorElement:x.jsx(uo,{})},{path:"/edelgram/myphotos",element:x.jsx(I3,{}),errorElement:x.jsx(uo,{})},{path:"/edelgram/createpost",element:x.jsx(z$,{}),errorElement:x.jsx(uo,{})},{path:"/edelgram/profile",element:x.jsx(S3,{}),errorElement:x.jsx(uo,{})}]},{path:"/edelgram/login",element:x.jsx(T3,{}),errorElement:x.jsx(uo,{})},{path:"/edelgram/signup",element:x.jsx(x3,{}),errorElement:x.jsx(uo,{})}]),X$=()=>x.jsx(r3,{children:x.jsx(eP,{router:Q$})});Kf.createRoot(document.getElementById("root")).render(x.jsx(Qt.StrictMode,{children:x.jsx(X$,{})}));
