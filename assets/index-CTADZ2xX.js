var jS=Object.defineProperty;var zS=(t,e,n)=>e in t?jS(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n;var V=(t,e,n)=>(zS(t,typeof e!="symbol"?e+"":e,n),n);function Ww(t,e){for(var n=0;n<e.length;n++){const r=e[n];if(typeof r!="string"&&!Array.isArray(r)){for(const i in r)if(i!=="default"&&!(i in t)){const s=Object.getOwnPropertyDescriptor(r,i);s&&Object.defineProperty(t,i,s.get?s:{enumerable:!0,get:()=>r[i]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerPolicy&&(s.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?s.credentials="include":i.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(i){if(i.ep)return;i.ep=!0;const s=n(i);fetch(i.href,s)}})();function qw(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var Gw={exports:{}},Fh={},Kw={exports:{}},ve={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var au=Symbol.for("react.element"),BS=Symbol.for("react.portal"),HS=Symbol.for("react.fragment"),WS=Symbol.for("react.strict_mode"),qS=Symbol.for("react.profiler"),GS=Symbol.for("react.provider"),KS=Symbol.for("react.context"),QS=Symbol.for("react.forward_ref"),XS=Symbol.for("react.suspense"),YS=Symbol.for("react.memo"),JS=Symbol.for("react.lazy"),Ev=Symbol.iterator;function ZS(t){return t===null||typeof t!="object"?null:(t=Ev&&t[Ev]||t["@@iterator"],typeof t=="function"?t:null)}var Qw={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},Xw=Object.assign,Yw={};function ua(t,e,n){this.props=t,this.context=e,this.refs=Yw,this.updater=n||Qw}ua.prototype.isReactComponent={};ua.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};ua.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function Jw(){}Jw.prototype=ua.prototype;function ym(t,e,n){this.props=t,this.context=e,this.refs=Yw,this.updater=n||Qw}var vm=ym.prototype=new Jw;vm.constructor=ym;Xw(vm,ua.prototype);vm.isPureReactComponent=!0;var bv=Array.isArray,Zw=Object.prototype.hasOwnProperty,_m={current:null},e1={key:!0,ref:!0,__self:!0,__source:!0};function t1(t,e,n){var r,i={},s=null,o=null;if(e!=null)for(r in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(s=""+e.key),e)Zw.call(e,r)&&!e1.hasOwnProperty(r)&&(i[r]=e[r]);var a=arguments.length-2;if(a===1)i.children=n;else if(1<a){for(var l=Array(a),c=0;c<a;c++)l[c]=arguments[c+2];i.children=l}if(t&&t.defaultProps)for(r in a=t.defaultProps,a)i[r]===void 0&&(i[r]=a[r]);return{$$typeof:au,type:t,key:s,ref:o,props:i,_owner:_m.current}}function e2(t,e){return{$$typeof:au,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function wm(t){return typeof t=="object"&&t!==null&&t.$$typeof===au}function t2(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var Tv=/\/+/g;function qd(t,e){return typeof t=="object"&&t!==null&&t.key!=null?t2(""+t.key):e.toString(36)}function bc(t,e,n,r,i){var s=typeof t;(s==="undefined"||s==="boolean")&&(t=null);var o=!1;if(t===null)o=!0;else switch(s){case"string":case"number":o=!0;break;case"object":switch(t.$$typeof){case au:case BS:o=!0}}if(o)return o=t,i=i(o),t=r===""?"."+qd(o,0):r,bv(i)?(n="",t!=null&&(n=t.replace(Tv,"$&/")+"/"),bc(i,e,n,"",function(c){return c})):i!=null&&(wm(i)&&(i=e2(i,n+(!i.key||o&&o.key===i.key?"":(""+i.key).replace(Tv,"$&/")+"/")+t)),e.push(i)),1;if(o=0,r=r===""?".":r+":",bv(t))for(var a=0;a<t.length;a++){s=t[a];var l=r+qd(s,a);o+=bc(s,e,n,l,i)}else if(l=ZS(t),typeof l=="function")for(t=l.call(t),a=0;!(s=t.next()).done;)s=s.value,l=r+qd(s,a++),o+=bc(s,e,n,l,i);else if(s==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return o}function Gu(t,e,n){if(t==null)return t;var r=[],i=0;return bc(t,r,"","",function(s){return e.call(n,s,i++)}),r}function n2(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var Jt={current:null},Tc={transition:null},r2={ReactCurrentDispatcher:Jt,ReactCurrentBatchConfig:Tc,ReactCurrentOwner:_m};function n1(){throw Error("act(...) is not supported in production builds of React.")}ve.Children={map:Gu,forEach:function(t,e,n){Gu(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return Gu(t,function(){e++}),e},toArray:function(t){return Gu(t,function(e){return e})||[]},only:function(t){if(!wm(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};ve.Component=ua;ve.Fragment=HS;ve.Profiler=qS;ve.PureComponent=ym;ve.StrictMode=WS;ve.Suspense=XS;ve.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=r2;ve.act=n1;ve.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var r=Xw({},t.props),i=t.key,s=t.ref,o=t._owner;if(e!=null){if(e.ref!==void 0&&(s=e.ref,o=_m.current),e.key!==void 0&&(i=""+e.key),t.type&&t.type.defaultProps)var a=t.type.defaultProps;for(l in e)Zw.call(e,l)&&!e1.hasOwnProperty(l)&&(r[l]=e[l]===void 0&&a!==void 0?a[l]:e[l])}var l=arguments.length-2;if(l===1)r.children=n;else if(1<l){a=Array(l);for(var c=0;c<l;c++)a[c]=arguments[c+2];r.children=a}return{$$typeof:au,type:t.type,key:i,ref:s,props:r,_owner:o}};ve.createContext=function(t){return t={$$typeof:KS,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:GS,_context:t},t.Consumer=t};ve.createElement=t1;ve.createFactory=function(t){var e=t1.bind(null,t);return e.type=t,e};ve.createRef=function(){return{current:null}};ve.forwardRef=function(t){return{$$typeof:QS,render:t}};ve.isValidElement=wm;ve.lazy=function(t){return{$$typeof:JS,_payload:{_status:-1,_result:t},_init:n2}};ve.memo=function(t,e){return{$$typeof:YS,type:t,compare:e===void 0?null:e}};ve.startTransition=function(t){var e=Tc.transition;Tc.transition={};try{t()}finally{Tc.transition=e}};ve.unstable_act=n1;ve.useCallback=function(t,e){return Jt.current.useCallback(t,e)};ve.useContext=function(t){return Jt.current.useContext(t)};ve.useDebugValue=function(){};ve.useDeferredValue=function(t){return Jt.current.useDeferredValue(t)};ve.useEffect=function(t,e){return Jt.current.useEffect(t,e)};ve.useId=function(){return Jt.current.useId()};ve.useImperativeHandle=function(t,e,n){return Jt.current.useImperativeHandle(t,e,n)};ve.useInsertionEffect=function(t,e){return Jt.current.useInsertionEffect(t,e)};ve.useLayoutEffect=function(t,e){return Jt.current.useLayoutEffect(t,e)};ve.useMemo=function(t,e){return Jt.current.useMemo(t,e)};ve.useReducer=function(t,e,n){return Jt.current.useReducer(t,e,n)};ve.useRef=function(t){return Jt.current.useRef(t)};ve.useState=function(t){return Jt.current.useState(t)};ve.useSyncExternalStore=function(t,e,n){return Jt.current.useSyncExternalStore(t,e,n)};ve.useTransition=function(){return Jt.current.useTransition()};ve.version="18.3.1";Kw.exports=ve;var D=Kw.exports;const Qt=qw(D),i2=Ww({__proto__:null,default:Qt},[D]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var s2=D,o2=Symbol.for("react.element"),a2=Symbol.for("react.fragment"),l2=Object.prototype.hasOwnProperty,u2=s2.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,c2={key:!0,ref:!0,__self:!0,__source:!0};function r1(t,e,n){var r,i={},s=null,o=null;n!==void 0&&(s=""+n),e.key!==void 0&&(s=""+e.key),e.ref!==void 0&&(o=e.ref);for(r in e)l2.call(e,r)&&!c2.hasOwnProperty(r)&&(i[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps,e)i[r]===void 0&&(i[r]=e[r]);return{$$typeof:o2,type:t,key:s,ref:o,props:i,_owner:u2.current}}Fh.Fragment=a2;Fh.jsx=r1;Fh.jsxs=r1;Gw.exports=Fh;var R=Gw.exports,Ff={},i1={exports:{}},gn={},s1={exports:{}},o1={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(H,ee){var re=H.length;H.push(ee);e:for(;0<re;){var _e=re-1>>>1,he=H[_e];if(0<i(he,ee))H[_e]=ee,H[re]=he,re=_e;else break e}}function n(H){return H.length===0?null:H[0]}function r(H){if(H.length===0)return null;var ee=H[0],re=H.pop();if(re!==ee){H[0]=re;e:for(var _e=0,he=H.length,Pe=he>>>1;_e<Pe;){var Wt=2*(_e+1)-1,ht=H[Wt],wt=Wt+1,Et=H[wt];if(0>i(ht,re))wt<he&&0>i(Et,ht)?(H[_e]=Et,H[wt]=re,_e=wt):(H[_e]=ht,H[Wt]=re,_e=Wt);else if(wt<he&&0>i(Et,re))H[_e]=Et,H[wt]=re,_e=wt;else break e}}return ee}function i(H,ee){var re=H.sortIndex-ee.sortIndex;return re!==0?re:H.id-ee.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;t.unstable_now=function(){return s.now()}}else{var o=Date,a=o.now();t.unstable_now=function(){return o.now()-a}}var l=[],c=[],h=1,f=null,p=3,w=!1,E=!1,S=!1,P=typeof setTimeout=="function"?setTimeout:null,T=typeof clearTimeout=="function"?clearTimeout:null,_=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function C(H){for(var ee=n(c);ee!==null;){if(ee.callback===null)r(c);else if(ee.startTime<=H)r(c),ee.sortIndex=ee.expirationTime,e(l,ee);else break;ee=n(c)}}function N(H){if(S=!1,C(H),!E)if(n(l)!==null)E=!0,Ht(F);else{var ee=n(c);ee!==null&&_t(N,ee.startTime-H)}}function F(H,ee){E=!1,S&&(S=!1,T(y),y=-1),w=!0;var re=p;try{for(C(ee),f=n(l);f!==null&&(!(f.expirationTime>ee)||H&&!x());){var _e=f.callback;if(typeof _e=="function"){f.callback=null,p=f.priorityLevel;var he=_e(f.expirationTime<=ee);ee=t.unstable_now(),typeof he=="function"?f.callback=he:f===n(l)&&r(l),C(ee)}else r(l);f=n(l)}if(f!==null)var Pe=!0;else{var Wt=n(c);Wt!==null&&_t(N,Wt.startTime-ee),Pe=!1}return Pe}finally{f=null,p=re,w=!1}}var z=!1,g=null,y=-1,b=5,I=-1;function x(){return!(t.unstable_now()-I<b)}function k(){if(g!==null){var H=t.unstable_now();I=H;var ee=!0;try{ee=g(!0,H)}finally{ee?A():(z=!1,g=null)}}else z=!1}var A;if(typeof _=="function")A=function(){_(k)};else if(typeof MessageChannel<"u"){var Ie=new MessageChannel,it=Ie.port2;Ie.port1.onmessage=k,A=function(){it.postMessage(null)}}else A=function(){P(k,0)};function Ht(H){g=H,z||(z=!0,A())}function _t(H,ee){y=P(function(){H(t.unstable_now())},ee)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(H){H.callback=null},t.unstable_continueExecution=function(){E||w||(E=!0,Ht(F))},t.unstable_forceFrameRate=function(H){0>H||125<H?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):b=0<H?Math.floor(1e3/H):5},t.unstable_getCurrentPriorityLevel=function(){return p},t.unstable_getFirstCallbackNode=function(){return n(l)},t.unstable_next=function(H){switch(p){case 1:case 2:case 3:var ee=3;break;default:ee=p}var re=p;p=ee;try{return H()}finally{p=re}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(H,ee){switch(H){case 1:case 2:case 3:case 4:case 5:break;default:H=3}var re=p;p=H;try{return ee()}finally{p=re}},t.unstable_scheduleCallback=function(H,ee,re){var _e=t.unstable_now();switch(typeof re=="object"&&re!==null?(re=re.delay,re=typeof re=="number"&&0<re?_e+re:_e):re=_e,H){case 1:var he=-1;break;case 2:he=250;break;case 5:he=1073741823;break;case 4:he=1e4;break;default:he=5e3}return he=re+he,H={id:h++,callback:ee,priorityLevel:H,startTime:re,expirationTime:he,sortIndex:-1},re>_e?(H.sortIndex=re,e(c,H),n(l)===null&&H===n(c)&&(S?(T(y),y=-1):S=!0,_t(N,re-_e))):(H.sortIndex=he,e(l,H),E||w||(E=!0,Ht(F))),H},t.unstable_shouldYield=x,t.unstable_wrapCallback=function(H){var ee=p;return function(){var re=p;p=ee;try{return H.apply(this,arguments)}finally{p=re}}}})(o1);s1.exports=o1;var h2=s1.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var d2=D,mn=h2;function W(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var a1=new Set,Rl={};function js(t,e){zo(t,e),zo(t+"Capture",e)}function zo(t,e){for(Rl[t]=e,t=0;t<e.length;t++)a1.add(e[t])}var $r=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),jf=Object.prototype.hasOwnProperty,f2=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,Cv={},Iv={};function p2(t){return jf.call(Iv,t)?!0:jf.call(Cv,t)?!1:f2.test(t)?Iv[t]=!0:(Cv[t]=!0,!1)}function m2(t,e,n,r){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function g2(t,e,n,r){if(e===null||typeof e>"u"||m2(t,e,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function Zt(t,e,n,r,i,s,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=s,this.removeEmptyString=o}var Ot={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){Ot[t]=new Zt(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];Ot[e]=new Zt(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){Ot[t]=new Zt(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){Ot[t]=new Zt(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){Ot[t]=new Zt(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){Ot[t]=new Zt(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){Ot[t]=new Zt(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){Ot[t]=new Zt(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){Ot[t]=new Zt(t,5,!1,t.toLowerCase(),null,!1,!1)});var Em=/[\-:]([a-z])/g;function bm(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(Em,bm);Ot[e]=new Zt(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(Em,bm);Ot[e]=new Zt(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(Em,bm);Ot[e]=new Zt(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){Ot[t]=new Zt(t,1,!1,t.toLowerCase(),null,!1,!1)});Ot.xlinkHref=new Zt("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){Ot[t]=new Zt(t,1,!1,t.toLowerCase(),null,!0,!0)});function Tm(t,e,n,r){var i=Ot.hasOwnProperty(e)?Ot[e]:null;(i!==null?i.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(g2(e,n,i,r)&&(n=null),r||i===null?p2(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):i.mustUseProperty?t[i.propertyName]=n===null?i.type===3?!1:"":n:(e=i.attributeName,r=i.attributeNamespace,n===null?t.removeAttribute(e):(i=i.type,n=i===3||i===4&&n===!0?"":""+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}var Kr=d2.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Ku=Symbol.for("react.element"),go=Symbol.for("react.portal"),yo=Symbol.for("react.fragment"),Cm=Symbol.for("react.strict_mode"),zf=Symbol.for("react.profiler"),l1=Symbol.for("react.provider"),u1=Symbol.for("react.context"),Im=Symbol.for("react.forward_ref"),Bf=Symbol.for("react.suspense"),Hf=Symbol.for("react.suspense_list"),Sm=Symbol.for("react.memo"),di=Symbol.for("react.lazy"),c1=Symbol.for("react.offscreen"),Sv=Symbol.iterator;function Fa(t){return t===null||typeof t!="object"?null:(t=Sv&&t[Sv]||t["@@iterator"],typeof t=="function"?t:null)}var Xe=Object.assign,Gd;function il(t){if(Gd===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);Gd=e&&e[1]||""}return`
`+Gd+t}var Kd=!1;function Qd(t,e){if(!t||Kd)return"";Kd=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(c){var r=c}Reflect.construct(t,[],e)}else{try{e.call()}catch(c){r=c}t.call(e.prototype)}else{try{throw Error()}catch(c){r=c}t()}}catch(c){if(c&&r&&typeof c.stack=="string"){for(var i=c.stack.split(`
`),s=r.stack.split(`
`),o=i.length-1,a=s.length-1;1<=o&&0<=a&&i[o]!==s[a];)a--;for(;1<=o&&0<=a;o--,a--)if(i[o]!==s[a]){if(o!==1||a!==1)do if(o--,a--,0>a||i[o]!==s[a]){var l=`
`+i[o].replace(" at new "," at ");return t.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",t.displayName)),l}while(1<=o&&0<=a);break}}}finally{Kd=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?il(t):""}function y2(t){switch(t.tag){case 5:return il(t.type);case 16:return il("Lazy");case 13:return il("Suspense");case 19:return il("SuspenseList");case 0:case 2:case 15:return t=Qd(t.type,!1),t;case 11:return t=Qd(t.type.render,!1),t;case 1:return t=Qd(t.type,!0),t;default:return""}}function Wf(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case yo:return"Fragment";case go:return"Portal";case zf:return"Profiler";case Cm:return"StrictMode";case Bf:return"Suspense";case Hf:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case u1:return(t.displayName||"Context")+".Consumer";case l1:return(t._context.displayName||"Context")+".Provider";case Im:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case Sm:return e=t.displayName||null,e!==null?e:Wf(t.type)||"Memo";case di:e=t._payload,t=t._init;try{return Wf(t(e))}catch{}}return null}function v2(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Wf(e);case 8:return e===Cm?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function Fi(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function h1(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function _2(t){var e=h1(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var i=n.get,s=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return i.call(this)},set:function(o){r=""+o,s.call(this,o)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(o){r=""+o},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function Qu(t){t._valueTracker||(t._valueTracker=_2(t))}function d1(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=h1(t)?t.checked?"true":"false":t.value),t=r,t!==n?(e.setValue(t),!0):!1}function Wc(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function qf(t,e){var n=e.checked;return Xe({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function Av(t,e){var n=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;n=Fi(e.value!=null?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function f1(t,e){e=e.checked,e!=null&&Tm(t,"checked",e,!1)}function Gf(t,e){f1(t,e);var n=Fi(e.value),r=e.type;if(n!=null)r==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(r==="submit"||r==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?Kf(t,e.type,n):e.hasOwnProperty("defaultValue")&&Kf(t,e.type,Fi(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function xv(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function Kf(t,e,n){(e!=="number"||Wc(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var sl=Array.isArray;function Ro(t,e,n,r){if(t=t.options,e){e={};for(var i=0;i<n.length;i++)e["$"+n[i]]=!0;for(n=0;n<t.length;n++)i=e.hasOwnProperty("$"+t[n].value),t[n].selected!==i&&(t[n].selected=i),i&&r&&(t[n].defaultSelected=!0)}else{for(n=""+Fi(n),e=null,i=0;i<t.length;i++){if(t[i].value===n){t[i].selected=!0,r&&(t[i].defaultSelected=!0);return}e!==null||t[i].disabled||(e=t[i])}e!==null&&(e.selected=!0)}}function Qf(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(W(91));return Xe({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function kv(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(W(92));if(sl(n)){if(1<n.length)throw Error(W(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:Fi(n)}}function p1(t,e){var n=Fi(e.value),r=Fi(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),r!=null&&(t.defaultValue=""+r)}function Pv(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function m1(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Xf(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?m1(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var Xu,g1=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,r,i){MSApp.execUnsafeLocalFunction(function(){return t(e,n,r,i)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(Xu=Xu||document.createElement("div"),Xu.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=Xu.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function Ol(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var gl={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},w2=["Webkit","ms","Moz","O"];Object.keys(gl).forEach(function(t){w2.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),gl[e]=gl[t]})});function y1(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||gl.hasOwnProperty(t)&&gl[t]?(""+e).trim():e+"px"}function v1(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var r=n.indexOf("--")===0,i=y1(n,e[n],r);n==="float"&&(n="cssFloat"),r?t.setProperty(n,i):t[n]=i}}var E2=Xe({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Yf(t,e){if(e){if(E2[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(W(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(W(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(W(61))}if(e.style!=null&&typeof e.style!="object")throw Error(W(62))}}function Jf(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Zf=null;function Am(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var ep=null,Oo=null,Lo=null;function Rv(t){if(t=cu(t)){if(typeof ep!="function")throw Error(W(280));var e=t.stateNode;e&&(e=Wh(e),ep(t.stateNode,t.type,e))}}function _1(t){Oo?Lo?Lo.push(t):Lo=[t]:Oo=t}function w1(){if(Oo){var t=Oo,e=Lo;if(Lo=Oo=null,Rv(t),e)for(t=0;t<e.length;t++)Rv(e[t])}}function E1(t,e){return t(e)}function b1(){}var Xd=!1;function T1(t,e,n){if(Xd)return t(e,n);Xd=!0;try{return E1(t,e,n)}finally{Xd=!1,(Oo!==null||Lo!==null)&&(b1(),w1())}}function Ll(t,e){var n=t.stateNode;if(n===null)return null;var r=Wh(n);if(r===null)return null;n=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(t=t.type,r=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!r;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(W(231,e,typeof n));return n}var tp=!1;if($r)try{var ja={};Object.defineProperty(ja,"passive",{get:function(){tp=!0}}),window.addEventListener("test",ja,ja),window.removeEventListener("test",ja,ja)}catch{tp=!1}function b2(t,e,n,r,i,s,o,a,l){var c=Array.prototype.slice.call(arguments,3);try{e.apply(n,c)}catch(h){this.onError(h)}}var yl=!1,qc=null,Gc=!1,np=null,T2={onError:function(t){yl=!0,qc=t}};function C2(t,e,n,r,i,s,o,a,l){yl=!1,qc=null,b2.apply(T2,arguments)}function I2(t,e,n,r,i,s,o,a,l){if(C2.apply(this,arguments),yl){if(yl){var c=qc;yl=!1,qc=null}else throw Error(W(198));Gc||(Gc=!0,np=c)}}function zs(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function C1(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function Ov(t){if(zs(t)!==t)throw Error(W(188))}function S2(t){var e=t.alternate;if(!e){if(e=zs(t),e===null)throw Error(W(188));return e!==t?null:t}for(var n=t,r=e;;){var i=n.return;if(i===null)break;var s=i.alternate;if(s===null){if(r=i.return,r!==null){n=r;continue}break}if(i.child===s.child){for(s=i.child;s;){if(s===n)return Ov(i),t;if(s===r)return Ov(i),e;s=s.sibling}throw Error(W(188))}if(n.return!==r.return)n=i,r=s;else{for(var o=!1,a=i.child;a;){if(a===n){o=!0,n=i,r=s;break}if(a===r){o=!0,r=i,n=s;break}a=a.sibling}if(!o){for(a=s.child;a;){if(a===n){o=!0,n=s,r=i;break}if(a===r){o=!0,r=s,n=i;break}a=a.sibling}if(!o)throw Error(W(189))}}if(n.alternate!==r)throw Error(W(190))}if(n.tag!==3)throw Error(W(188));return n.stateNode.current===n?t:e}function I1(t){return t=S2(t),t!==null?S1(t):null}function S1(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=S1(t);if(e!==null)return e;t=t.sibling}return null}var A1=mn.unstable_scheduleCallback,Lv=mn.unstable_cancelCallback,A2=mn.unstable_shouldYield,x2=mn.unstable_requestPaint,rt=mn.unstable_now,k2=mn.unstable_getCurrentPriorityLevel,xm=mn.unstable_ImmediatePriority,x1=mn.unstable_UserBlockingPriority,Kc=mn.unstable_NormalPriority,P2=mn.unstable_LowPriority,k1=mn.unstable_IdlePriority,jh=null,ar=null;function R2(t){if(ar&&typeof ar.onCommitFiberRoot=="function")try{ar.onCommitFiberRoot(jh,t,void 0,(t.current.flags&128)===128)}catch{}}var qn=Math.clz32?Math.clz32:N2,O2=Math.log,L2=Math.LN2;function N2(t){return t>>>=0,t===0?32:31-(O2(t)/L2|0)|0}var Yu=64,Ju=4194304;function ol(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function Qc(t,e){var n=t.pendingLanes;if(n===0)return 0;var r=0,i=t.suspendedLanes,s=t.pingedLanes,o=n&268435455;if(o!==0){var a=o&~i;a!==0?r=ol(a):(s&=o,s!==0&&(r=ol(s)))}else o=n&~i,o!==0?r=ol(o):s!==0&&(r=ol(s));if(r===0)return 0;if(e!==0&&e!==r&&!(e&i)&&(i=r&-r,s=e&-e,i>=s||i===16&&(s&4194240)!==0))return e;if(r&4&&(r|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=r;0<e;)n=31-qn(e),i=1<<n,r|=t[n],e&=~i;return r}function D2(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function M2(t,e){for(var n=t.suspendedLanes,r=t.pingedLanes,i=t.expirationTimes,s=t.pendingLanes;0<s;){var o=31-qn(s),a=1<<o,l=i[o];l===-1?(!(a&n)||a&r)&&(i[o]=D2(a,e)):l<=e&&(t.expiredLanes|=a),s&=~a}}function rp(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function P1(){var t=Yu;return Yu<<=1,!(Yu&4194240)&&(Yu=64),t}function Yd(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function lu(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-qn(e),t[e]=n}function V2(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var r=t.eventTimes;for(t=t.expirationTimes;0<n;){var i=31-qn(n),s=1<<i;e[i]=0,r[i]=-1,t[i]=-1,n&=~s}}function km(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var r=31-qn(n),i=1<<r;i&e|t[r]&e&&(t[r]|=e),n&=~i}}var ke=0;function R1(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var O1,Pm,L1,N1,D1,ip=!1,Zu=[],Ti=null,Ci=null,Ii=null,Nl=new Map,Dl=new Map,pi=[],U2="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Nv(t,e){switch(t){case"focusin":case"focusout":Ti=null;break;case"dragenter":case"dragleave":Ci=null;break;case"mouseover":case"mouseout":Ii=null;break;case"pointerover":case"pointerout":Nl.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":Dl.delete(e.pointerId)}}function za(t,e,n,r,i,s){return t===null||t.nativeEvent!==s?(t={blockedOn:e,domEventName:n,eventSystemFlags:r,nativeEvent:s,targetContainers:[i]},e!==null&&(e=cu(e),e!==null&&Pm(e)),t):(t.eventSystemFlags|=r,e=t.targetContainers,i!==null&&e.indexOf(i)===-1&&e.push(i),t)}function $2(t,e,n,r,i){switch(e){case"focusin":return Ti=za(Ti,t,e,n,r,i),!0;case"dragenter":return Ci=za(Ci,t,e,n,r,i),!0;case"mouseover":return Ii=za(Ii,t,e,n,r,i),!0;case"pointerover":var s=i.pointerId;return Nl.set(s,za(Nl.get(s)||null,t,e,n,r,i)),!0;case"gotpointercapture":return s=i.pointerId,Dl.set(s,za(Dl.get(s)||null,t,e,n,r,i)),!0}return!1}function M1(t){var e=ps(t.target);if(e!==null){var n=zs(e);if(n!==null){if(e=n.tag,e===13){if(e=C1(n),e!==null){t.blockedOn=e,D1(t.priority,function(){L1(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function Cc(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=sp(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var r=new n.constructor(n.type,n);Zf=r,n.target.dispatchEvent(r),Zf=null}else return e=cu(n),e!==null&&Pm(e),t.blockedOn=n,!1;e.shift()}return!0}function Dv(t,e,n){Cc(t)&&n.delete(e)}function F2(){ip=!1,Ti!==null&&Cc(Ti)&&(Ti=null),Ci!==null&&Cc(Ci)&&(Ci=null),Ii!==null&&Cc(Ii)&&(Ii=null),Nl.forEach(Dv),Dl.forEach(Dv)}function Ba(t,e){t.blockedOn===e&&(t.blockedOn=null,ip||(ip=!0,mn.unstable_scheduleCallback(mn.unstable_NormalPriority,F2)))}function Ml(t){function e(i){return Ba(i,t)}if(0<Zu.length){Ba(Zu[0],t);for(var n=1;n<Zu.length;n++){var r=Zu[n];r.blockedOn===t&&(r.blockedOn=null)}}for(Ti!==null&&Ba(Ti,t),Ci!==null&&Ba(Ci,t),Ii!==null&&Ba(Ii,t),Nl.forEach(e),Dl.forEach(e),n=0;n<pi.length;n++)r=pi[n],r.blockedOn===t&&(r.blockedOn=null);for(;0<pi.length&&(n=pi[0],n.blockedOn===null);)M1(n),n.blockedOn===null&&pi.shift()}var No=Kr.ReactCurrentBatchConfig,Xc=!0;function j2(t,e,n,r){var i=ke,s=No.transition;No.transition=null;try{ke=1,Rm(t,e,n,r)}finally{ke=i,No.transition=s}}function z2(t,e,n,r){var i=ke,s=No.transition;No.transition=null;try{ke=4,Rm(t,e,n,r)}finally{ke=i,No.transition=s}}function Rm(t,e,n,r){if(Xc){var i=sp(t,e,n,r);if(i===null)lf(t,e,r,Yc,n),Nv(t,r);else if($2(i,t,e,n,r))r.stopPropagation();else if(Nv(t,r),e&4&&-1<U2.indexOf(t)){for(;i!==null;){var s=cu(i);if(s!==null&&O1(s),s=sp(t,e,n,r),s===null&&lf(t,e,r,Yc,n),s===i)break;i=s}i!==null&&r.stopPropagation()}else lf(t,e,r,null,n)}}var Yc=null;function sp(t,e,n,r){if(Yc=null,t=Am(r),t=ps(t),t!==null)if(e=zs(t),e===null)t=null;else if(n=e.tag,n===13){if(t=C1(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return Yc=t,null}function V1(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(k2()){case xm:return 1;case x1:return 4;case Kc:case P2:return 16;case k1:return 536870912;default:return 16}default:return 16}}var _i=null,Om=null,Ic=null;function U1(){if(Ic)return Ic;var t,e=Om,n=e.length,r,i="value"in _i?_i.value:_i.textContent,s=i.length;for(t=0;t<n&&e[t]===i[t];t++);var o=n-t;for(r=1;r<=o&&e[n-r]===i[s-r];r++);return Ic=i.slice(t,1<r?1-r:void 0)}function Sc(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function ec(){return!0}function Mv(){return!1}function yn(t){function e(n,r,i,s,o){this._reactName=n,this._targetInst=i,this.type=r,this.nativeEvent=s,this.target=o,this.currentTarget=null;for(var a in t)t.hasOwnProperty(a)&&(n=t[a],this[a]=n?n(s):s[a]);return this.isDefaultPrevented=(s.defaultPrevented!=null?s.defaultPrevented:s.returnValue===!1)?ec:Mv,this.isPropagationStopped=Mv,this}return Xe(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=ec)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=ec)},persist:function(){},isPersistent:ec}),e}var ca={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Lm=yn(ca),uu=Xe({},ca,{view:0,detail:0}),B2=yn(uu),Jd,Zd,Ha,zh=Xe({},uu,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Nm,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==Ha&&(Ha&&t.type==="mousemove"?(Jd=t.screenX-Ha.screenX,Zd=t.screenY-Ha.screenY):Zd=Jd=0,Ha=t),Jd)},movementY:function(t){return"movementY"in t?t.movementY:Zd}}),Vv=yn(zh),H2=Xe({},zh,{dataTransfer:0}),W2=yn(H2),q2=Xe({},uu,{relatedTarget:0}),ef=yn(q2),G2=Xe({},ca,{animationName:0,elapsedTime:0,pseudoElement:0}),K2=yn(G2),Q2=Xe({},ca,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),X2=yn(Q2),Y2=Xe({},ca,{data:0}),Uv=yn(Y2),J2={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Z2={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},eA={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function tA(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=eA[t])?!!e[t]:!1}function Nm(){return tA}var nA=Xe({},uu,{key:function(t){if(t.key){var e=J2[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=Sc(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?Z2[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Nm,charCode:function(t){return t.type==="keypress"?Sc(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?Sc(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),rA=yn(nA),iA=Xe({},zh,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),$v=yn(iA),sA=Xe({},uu,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Nm}),oA=yn(sA),aA=Xe({},ca,{propertyName:0,elapsedTime:0,pseudoElement:0}),lA=yn(aA),uA=Xe({},zh,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),cA=yn(uA),hA=[9,13,27,32],Dm=$r&&"CompositionEvent"in window,vl=null;$r&&"documentMode"in document&&(vl=document.documentMode);var dA=$r&&"TextEvent"in window&&!vl,$1=$r&&(!Dm||vl&&8<vl&&11>=vl),Fv=" ",jv=!1;function F1(t,e){switch(t){case"keyup":return hA.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function j1(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var vo=!1;function fA(t,e){switch(t){case"compositionend":return j1(e);case"keypress":return e.which!==32?null:(jv=!0,Fv);case"textInput":return t=e.data,t===Fv&&jv?null:t;default:return null}}function pA(t,e){if(vo)return t==="compositionend"||!Dm&&F1(t,e)?(t=U1(),Ic=Om=_i=null,vo=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return $1&&e.locale!=="ko"?null:e.data;default:return null}}var mA={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function zv(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!mA[t.type]:e==="textarea"}function z1(t,e,n,r){_1(r),e=Jc(e,"onChange"),0<e.length&&(n=new Lm("onChange","change",null,n,r),t.push({event:n,listeners:e}))}var _l=null,Vl=null;function gA(t){Z1(t,0)}function Bh(t){var e=Eo(t);if(d1(e))return t}function yA(t,e){if(t==="change")return e}var B1=!1;if($r){var tf;if($r){var nf="oninput"in document;if(!nf){var Bv=document.createElement("div");Bv.setAttribute("oninput","return;"),nf=typeof Bv.oninput=="function"}tf=nf}else tf=!1;B1=tf&&(!document.documentMode||9<document.documentMode)}function Hv(){_l&&(_l.detachEvent("onpropertychange",H1),Vl=_l=null)}function H1(t){if(t.propertyName==="value"&&Bh(Vl)){var e=[];z1(e,Vl,t,Am(t)),T1(gA,e)}}function vA(t,e,n){t==="focusin"?(Hv(),_l=e,Vl=n,_l.attachEvent("onpropertychange",H1)):t==="focusout"&&Hv()}function _A(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return Bh(Vl)}function wA(t,e){if(t==="click")return Bh(e)}function EA(t,e){if(t==="input"||t==="change")return Bh(e)}function bA(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var Xn=typeof Object.is=="function"?Object.is:bA;function Ul(t,e){if(Xn(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!jf.call(e,i)||!Xn(t[i],e[i]))return!1}return!0}function Wv(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function qv(t,e){var n=Wv(t);t=0;for(var r;n;){if(n.nodeType===3){if(r=t+n.textContent.length,t<=e&&r>=e)return{node:n,offset:e-t};t=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=Wv(n)}}function W1(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?W1(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function q1(){for(var t=window,e=Wc();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=Wc(t.document)}return e}function Mm(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function TA(t){var e=q1(),n=t.focusedElem,r=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&W1(n.ownerDocument.documentElement,n)){if(r!==null&&Mm(n)){if(e=r.start,t=r.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var i=n.textContent.length,s=Math.min(r.start,i);r=r.end===void 0?s:Math.min(r.end,i),!t.extend&&s>r&&(i=r,r=s,s=i),i=qv(n,s);var o=qv(n,r);i&&o&&(t.rangeCount!==1||t.anchorNode!==i.node||t.anchorOffset!==i.offset||t.focusNode!==o.node||t.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(i.node,i.offset),t.removeAllRanges(),s>r?(t.addRange(e),t.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var CA=$r&&"documentMode"in document&&11>=document.documentMode,_o=null,op=null,wl=null,ap=!1;function Gv(t,e,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;ap||_o==null||_o!==Wc(r)||(r=_o,"selectionStart"in r&&Mm(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),wl&&Ul(wl,r)||(wl=r,r=Jc(op,"onSelect"),0<r.length&&(e=new Lm("onSelect","select",null,e,n),t.push({event:e,listeners:r}),e.target=_o)))}function tc(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var wo={animationend:tc("Animation","AnimationEnd"),animationiteration:tc("Animation","AnimationIteration"),animationstart:tc("Animation","AnimationStart"),transitionend:tc("Transition","TransitionEnd")},rf={},G1={};$r&&(G1=document.createElement("div").style,"AnimationEvent"in window||(delete wo.animationend.animation,delete wo.animationiteration.animation,delete wo.animationstart.animation),"TransitionEvent"in window||delete wo.transitionend.transition);function Hh(t){if(rf[t])return rf[t];if(!wo[t])return t;var e=wo[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in G1)return rf[t]=e[n];return t}var K1=Hh("animationend"),Q1=Hh("animationiteration"),X1=Hh("animationstart"),Y1=Hh("transitionend"),J1=new Map,Kv="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Gi(t,e){J1.set(t,e),js(e,[t])}for(var sf=0;sf<Kv.length;sf++){var of=Kv[sf],IA=of.toLowerCase(),SA=of[0].toUpperCase()+of.slice(1);Gi(IA,"on"+SA)}Gi(K1,"onAnimationEnd");Gi(Q1,"onAnimationIteration");Gi(X1,"onAnimationStart");Gi("dblclick","onDoubleClick");Gi("focusin","onFocus");Gi("focusout","onBlur");Gi(Y1,"onTransitionEnd");zo("onMouseEnter",["mouseout","mouseover"]);zo("onMouseLeave",["mouseout","mouseover"]);zo("onPointerEnter",["pointerout","pointerover"]);zo("onPointerLeave",["pointerout","pointerover"]);js("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));js("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));js("onBeforeInput",["compositionend","keypress","textInput","paste"]);js("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));js("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));js("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var al="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),AA=new Set("cancel close invalid load scroll toggle".split(" ").concat(al));function Qv(t,e,n){var r=t.type||"unknown-event";t.currentTarget=n,I2(r,e,void 0,t),t.currentTarget=null}function Z1(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var r=t[n],i=r.event;r=r.listeners;e:{var s=void 0;if(e)for(var o=r.length-1;0<=o;o--){var a=r[o],l=a.instance,c=a.currentTarget;if(a=a.listener,l!==s&&i.isPropagationStopped())break e;Qv(i,a,c),s=l}else for(o=0;o<r.length;o++){if(a=r[o],l=a.instance,c=a.currentTarget,a=a.listener,l!==s&&i.isPropagationStopped())break e;Qv(i,a,c),s=l}}}if(Gc)throw t=np,Gc=!1,np=null,t}function $e(t,e){var n=e[dp];n===void 0&&(n=e[dp]=new Set);var r=t+"__bubble";n.has(r)||(eE(e,t,2,!1),n.add(r))}function af(t,e,n){var r=0;e&&(r|=4),eE(n,t,r,e)}var nc="_reactListening"+Math.random().toString(36).slice(2);function $l(t){if(!t[nc]){t[nc]=!0,a1.forEach(function(n){n!=="selectionchange"&&(AA.has(n)||af(n,!1,t),af(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[nc]||(e[nc]=!0,af("selectionchange",!1,e))}}function eE(t,e,n,r){switch(V1(e)){case 1:var i=j2;break;case 4:i=z2;break;default:i=Rm}n=i.bind(null,e,n,t),i=void 0,!tp||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(i=!0),r?i!==void 0?t.addEventListener(e,n,{capture:!0,passive:i}):t.addEventListener(e,n,!0):i!==void 0?t.addEventListener(e,n,{passive:i}):t.addEventListener(e,n,!1)}function lf(t,e,n,r,i){var s=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var o=r.tag;if(o===3||o===4){var a=r.stateNode.containerInfo;if(a===i||a.nodeType===8&&a.parentNode===i)break;if(o===4)for(o=r.return;o!==null;){var l=o.tag;if((l===3||l===4)&&(l=o.stateNode.containerInfo,l===i||l.nodeType===8&&l.parentNode===i))return;o=o.return}for(;a!==null;){if(o=ps(a),o===null)return;if(l=o.tag,l===5||l===6){r=s=o;continue e}a=a.parentNode}}r=r.return}T1(function(){var c=s,h=Am(n),f=[];e:{var p=J1.get(t);if(p!==void 0){var w=Lm,E=t;switch(t){case"keypress":if(Sc(n)===0)break e;case"keydown":case"keyup":w=rA;break;case"focusin":E="focus",w=ef;break;case"focusout":E="blur",w=ef;break;case"beforeblur":case"afterblur":w=ef;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":w=Vv;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":w=W2;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":w=oA;break;case K1:case Q1:case X1:w=K2;break;case Y1:w=lA;break;case"scroll":w=B2;break;case"wheel":w=cA;break;case"copy":case"cut":case"paste":w=X2;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":w=$v}var S=(e&4)!==0,P=!S&&t==="scroll",T=S?p!==null?p+"Capture":null:p;S=[];for(var _=c,C;_!==null;){C=_;var N=C.stateNode;if(C.tag===5&&N!==null&&(C=N,T!==null&&(N=Ll(_,T),N!=null&&S.push(Fl(_,N,C)))),P)break;_=_.return}0<S.length&&(p=new w(p,E,null,n,h),f.push({event:p,listeners:S}))}}if(!(e&7)){e:{if(p=t==="mouseover"||t==="pointerover",w=t==="mouseout"||t==="pointerout",p&&n!==Zf&&(E=n.relatedTarget||n.fromElement)&&(ps(E)||E[Fr]))break e;if((w||p)&&(p=h.window===h?h:(p=h.ownerDocument)?p.defaultView||p.parentWindow:window,w?(E=n.relatedTarget||n.toElement,w=c,E=E?ps(E):null,E!==null&&(P=zs(E),E!==P||E.tag!==5&&E.tag!==6)&&(E=null)):(w=null,E=c),w!==E)){if(S=Vv,N="onMouseLeave",T="onMouseEnter",_="mouse",(t==="pointerout"||t==="pointerover")&&(S=$v,N="onPointerLeave",T="onPointerEnter",_="pointer"),P=w==null?p:Eo(w),C=E==null?p:Eo(E),p=new S(N,_+"leave",w,n,h),p.target=P,p.relatedTarget=C,N=null,ps(h)===c&&(S=new S(T,_+"enter",E,n,h),S.target=C,S.relatedTarget=P,N=S),P=N,w&&E)t:{for(S=w,T=E,_=0,C=S;C;C=so(C))_++;for(C=0,N=T;N;N=so(N))C++;for(;0<_-C;)S=so(S),_--;for(;0<C-_;)T=so(T),C--;for(;_--;){if(S===T||T!==null&&S===T.alternate)break t;S=so(S),T=so(T)}S=null}else S=null;w!==null&&Xv(f,p,w,S,!1),E!==null&&P!==null&&Xv(f,P,E,S,!0)}}e:{if(p=c?Eo(c):window,w=p.nodeName&&p.nodeName.toLowerCase(),w==="select"||w==="input"&&p.type==="file")var F=yA;else if(zv(p))if(B1)F=EA;else{F=_A;var z=vA}else(w=p.nodeName)&&w.toLowerCase()==="input"&&(p.type==="checkbox"||p.type==="radio")&&(F=wA);if(F&&(F=F(t,c))){z1(f,F,n,h);break e}z&&z(t,p,c),t==="focusout"&&(z=p._wrapperState)&&z.controlled&&p.type==="number"&&Kf(p,"number",p.value)}switch(z=c?Eo(c):window,t){case"focusin":(zv(z)||z.contentEditable==="true")&&(_o=z,op=c,wl=null);break;case"focusout":wl=op=_o=null;break;case"mousedown":ap=!0;break;case"contextmenu":case"mouseup":case"dragend":ap=!1,Gv(f,n,h);break;case"selectionchange":if(CA)break;case"keydown":case"keyup":Gv(f,n,h)}var g;if(Dm)e:{switch(t){case"compositionstart":var y="onCompositionStart";break e;case"compositionend":y="onCompositionEnd";break e;case"compositionupdate":y="onCompositionUpdate";break e}y=void 0}else vo?F1(t,n)&&(y="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(y="onCompositionStart");y&&($1&&n.locale!=="ko"&&(vo||y!=="onCompositionStart"?y==="onCompositionEnd"&&vo&&(g=U1()):(_i=h,Om="value"in _i?_i.value:_i.textContent,vo=!0)),z=Jc(c,y),0<z.length&&(y=new Uv(y,t,null,n,h),f.push({event:y,listeners:z}),g?y.data=g:(g=j1(n),g!==null&&(y.data=g)))),(g=dA?fA(t,n):pA(t,n))&&(c=Jc(c,"onBeforeInput"),0<c.length&&(h=new Uv("onBeforeInput","beforeinput",null,n,h),f.push({event:h,listeners:c}),h.data=g))}Z1(f,e)})}function Fl(t,e,n){return{instance:t,listener:e,currentTarget:n}}function Jc(t,e){for(var n=e+"Capture",r=[];t!==null;){var i=t,s=i.stateNode;i.tag===5&&s!==null&&(i=s,s=Ll(t,n),s!=null&&r.unshift(Fl(t,s,i)),s=Ll(t,e),s!=null&&r.push(Fl(t,s,i))),t=t.return}return r}function so(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function Xv(t,e,n,r,i){for(var s=e._reactName,o=[];n!==null&&n!==r;){var a=n,l=a.alternate,c=a.stateNode;if(l!==null&&l===r)break;a.tag===5&&c!==null&&(a=c,i?(l=Ll(n,s),l!=null&&o.unshift(Fl(n,l,a))):i||(l=Ll(n,s),l!=null&&o.push(Fl(n,l,a)))),n=n.return}o.length!==0&&t.push({event:e,listeners:o})}var xA=/\r\n?/g,kA=/\u0000|\uFFFD/g;function Yv(t){return(typeof t=="string"?t:""+t).replace(xA,`
`).replace(kA,"")}function rc(t,e,n){if(e=Yv(e),Yv(t)!==e&&n)throw Error(W(425))}function Zc(){}var lp=null,up=null;function cp(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var hp=typeof setTimeout=="function"?setTimeout:void 0,PA=typeof clearTimeout=="function"?clearTimeout:void 0,Jv=typeof Promise=="function"?Promise:void 0,RA=typeof queueMicrotask=="function"?queueMicrotask:typeof Jv<"u"?function(t){return Jv.resolve(null).then(t).catch(OA)}:hp;function OA(t){setTimeout(function(){throw t})}function uf(t,e){var n=e,r=0;do{var i=n.nextSibling;if(t.removeChild(n),i&&i.nodeType===8)if(n=i.data,n==="/$"){if(r===0){t.removeChild(i),Ml(e);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=i}while(n);Ml(e)}function Si(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function Zv(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var ha=Math.random().toString(36).slice(2),or="__reactFiber$"+ha,jl="__reactProps$"+ha,Fr="__reactContainer$"+ha,dp="__reactEvents$"+ha,LA="__reactListeners$"+ha,NA="__reactHandles$"+ha;function ps(t){var e=t[or];if(e)return e;for(var n=t.parentNode;n;){if(e=n[Fr]||n[or]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=Zv(t);t!==null;){if(n=t[or])return n;t=Zv(t)}return e}t=n,n=t.parentNode}return null}function cu(t){return t=t[or]||t[Fr],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function Eo(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(W(33))}function Wh(t){return t[jl]||null}var fp=[],bo=-1;function Ki(t){return{current:t}}function je(t){0>bo||(t.current=fp[bo],fp[bo]=null,bo--)}function Ne(t,e){bo++,fp[bo]=t.current,t.current=e}var ji={},zt=Ki(ji),on=Ki(!1),As=ji;function Bo(t,e){var n=t.type.contextTypes;if(!n)return ji;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var i={},s;for(s in n)i[s]=e[s];return r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=i),i}function an(t){return t=t.childContextTypes,t!=null}function eh(){je(on),je(zt)}function e_(t,e,n){if(zt.current!==ji)throw Error(W(168));Ne(zt,e),Ne(on,n)}function tE(t,e,n){var r=t.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var i in r)if(!(i in e))throw Error(W(108,v2(t)||"Unknown",i));return Xe({},n,r)}function th(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||ji,As=zt.current,Ne(zt,t),Ne(on,on.current),!0}function t_(t,e,n){var r=t.stateNode;if(!r)throw Error(W(169));n?(t=tE(t,e,As),r.__reactInternalMemoizedMergedChildContext=t,je(on),je(zt),Ne(zt,t)):je(on),Ne(on,n)}var Ar=null,qh=!1,cf=!1;function nE(t){Ar===null?Ar=[t]:Ar.push(t)}function DA(t){qh=!0,nE(t)}function Qi(){if(!cf&&Ar!==null){cf=!0;var t=0,e=ke;try{var n=Ar;for(ke=1;t<n.length;t++){var r=n[t];do r=r(!0);while(r!==null)}Ar=null,qh=!1}catch(i){throw Ar!==null&&(Ar=Ar.slice(t+1)),A1(xm,Qi),i}finally{ke=e,cf=!1}}return null}var To=[],Co=0,nh=null,rh=0,bn=[],Tn=0,xs=null,Pr=1,Rr="";function hs(t,e){To[Co++]=rh,To[Co++]=nh,nh=t,rh=e}function rE(t,e,n){bn[Tn++]=Pr,bn[Tn++]=Rr,bn[Tn++]=xs,xs=t;var r=Pr;t=Rr;var i=32-qn(r)-1;r&=~(1<<i),n+=1;var s=32-qn(e)+i;if(30<s){var o=i-i%5;s=(r&(1<<o)-1).toString(32),r>>=o,i-=o,Pr=1<<32-qn(e)+i|n<<i|r,Rr=s+t}else Pr=1<<s|n<<i|r,Rr=t}function Vm(t){t.return!==null&&(hs(t,1),rE(t,1,0))}function Um(t){for(;t===nh;)nh=To[--Co],To[Co]=null,rh=To[--Co],To[Co]=null;for(;t===xs;)xs=bn[--Tn],bn[Tn]=null,Rr=bn[--Tn],bn[Tn]=null,Pr=bn[--Tn],bn[Tn]=null}var pn=null,fn=null,He=!1,Bn=null;function iE(t,e){var n=xn(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function n_(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,pn=t,fn=Si(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,pn=t,fn=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=xs!==null?{id:Pr,overflow:Rr}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=xn(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,pn=t,fn=null,!0):!1;default:return!1}}function pp(t){return(t.mode&1)!==0&&(t.flags&128)===0}function mp(t){if(He){var e=fn;if(e){var n=e;if(!n_(t,e)){if(pp(t))throw Error(W(418));e=Si(n.nextSibling);var r=pn;e&&n_(t,e)?iE(r,n):(t.flags=t.flags&-4097|2,He=!1,pn=t)}}else{if(pp(t))throw Error(W(418));t.flags=t.flags&-4097|2,He=!1,pn=t}}}function r_(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;pn=t}function ic(t){if(t!==pn)return!1;if(!He)return r_(t),He=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!cp(t.type,t.memoizedProps)),e&&(e=fn)){if(pp(t))throw sE(),Error(W(418));for(;e;)iE(t,e),e=Si(e.nextSibling)}if(r_(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(W(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){fn=Si(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}fn=null}}else fn=pn?Si(t.stateNode.nextSibling):null;return!0}function sE(){for(var t=fn;t;)t=Si(t.nextSibling)}function Ho(){fn=pn=null,He=!1}function $m(t){Bn===null?Bn=[t]:Bn.push(t)}var MA=Kr.ReactCurrentBatchConfig;function Wa(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(W(309));var r=n.stateNode}if(!r)throw Error(W(147,t));var i=r,s=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===s?e.ref:(e=function(o){var a=i.refs;o===null?delete a[s]:a[s]=o},e._stringRef=s,e)}if(typeof t!="string")throw Error(W(284));if(!n._owner)throw Error(W(290,t))}return t}function sc(t,e){throw t=Object.prototype.toString.call(e),Error(W(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function i_(t){var e=t._init;return e(t._payload)}function oE(t){function e(T,_){if(t){var C=T.deletions;C===null?(T.deletions=[_],T.flags|=16):C.push(_)}}function n(T,_){if(!t)return null;for(;_!==null;)e(T,_),_=_.sibling;return null}function r(T,_){for(T=new Map;_!==null;)_.key!==null?T.set(_.key,_):T.set(_.index,_),_=_.sibling;return T}function i(T,_){return T=Pi(T,_),T.index=0,T.sibling=null,T}function s(T,_,C){return T.index=C,t?(C=T.alternate,C!==null?(C=C.index,C<_?(T.flags|=2,_):C):(T.flags|=2,_)):(T.flags|=1048576,_)}function o(T){return t&&T.alternate===null&&(T.flags|=2),T}function a(T,_,C,N){return _===null||_.tag!==6?(_=yf(C,T.mode,N),_.return=T,_):(_=i(_,C),_.return=T,_)}function l(T,_,C,N){var F=C.type;return F===yo?h(T,_,C.props.children,N,C.key):_!==null&&(_.elementType===F||typeof F=="object"&&F!==null&&F.$$typeof===di&&i_(F)===_.type)?(N=i(_,C.props),N.ref=Wa(T,_,C),N.return=T,N):(N=Lc(C.type,C.key,C.props,null,T.mode,N),N.ref=Wa(T,_,C),N.return=T,N)}function c(T,_,C,N){return _===null||_.tag!==4||_.stateNode.containerInfo!==C.containerInfo||_.stateNode.implementation!==C.implementation?(_=vf(C,T.mode,N),_.return=T,_):(_=i(_,C.children||[]),_.return=T,_)}function h(T,_,C,N,F){return _===null||_.tag!==7?(_=Ts(C,T.mode,N,F),_.return=T,_):(_=i(_,C),_.return=T,_)}function f(T,_,C){if(typeof _=="string"&&_!==""||typeof _=="number")return _=yf(""+_,T.mode,C),_.return=T,_;if(typeof _=="object"&&_!==null){switch(_.$$typeof){case Ku:return C=Lc(_.type,_.key,_.props,null,T.mode,C),C.ref=Wa(T,null,_),C.return=T,C;case go:return _=vf(_,T.mode,C),_.return=T,_;case di:var N=_._init;return f(T,N(_._payload),C)}if(sl(_)||Fa(_))return _=Ts(_,T.mode,C,null),_.return=T,_;sc(T,_)}return null}function p(T,_,C,N){var F=_!==null?_.key:null;if(typeof C=="string"&&C!==""||typeof C=="number")return F!==null?null:a(T,_,""+C,N);if(typeof C=="object"&&C!==null){switch(C.$$typeof){case Ku:return C.key===F?l(T,_,C,N):null;case go:return C.key===F?c(T,_,C,N):null;case di:return F=C._init,p(T,_,F(C._payload),N)}if(sl(C)||Fa(C))return F!==null?null:h(T,_,C,N,null);sc(T,C)}return null}function w(T,_,C,N,F){if(typeof N=="string"&&N!==""||typeof N=="number")return T=T.get(C)||null,a(_,T,""+N,F);if(typeof N=="object"&&N!==null){switch(N.$$typeof){case Ku:return T=T.get(N.key===null?C:N.key)||null,l(_,T,N,F);case go:return T=T.get(N.key===null?C:N.key)||null,c(_,T,N,F);case di:var z=N._init;return w(T,_,C,z(N._payload),F)}if(sl(N)||Fa(N))return T=T.get(C)||null,h(_,T,N,F,null);sc(_,N)}return null}function E(T,_,C,N){for(var F=null,z=null,g=_,y=_=0,b=null;g!==null&&y<C.length;y++){g.index>y?(b=g,g=null):b=g.sibling;var I=p(T,g,C[y],N);if(I===null){g===null&&(g=b);break}t&&g&&I.alternate===null&&e(T,g),_=s(I,_,y),z===null?F=I:z.sibling=I,z=I,g=b}if(y===C.length)return n(T,g),He&&hs(T,y),F;if(g===null){for(;y<C.length;y++)g=f(T,C[y],N),g!==null&&(_=s(g,_,y),z===null?F=g:z.sibling=g,z=g);return He&&hs(T,y),F}for(g=r(T,g);y<C.length;y++)b=w(g,T,y,C[y],N),b!==null&&(t&&b.alternate!==null&&g.delete(b.key===null?y:b.key),_=s(b,_,y),z===null?F=b:z.sibling=b,z=b);return t&&g.forEach(function(x){return e(T,x)}),He&&hs(T,y),F}function S(T,_,C,N){var F=Fa(C);if(typeof F!="function")throw Error(W(150));if(C=F.call(C),C==null)throw Error(W(151));for(var z=F=null,g=_,y=_=0,b=null,I=C.next();g!==null&&!I.done;y++,I=C.next()){g.index>y?(b=g,g=null):b=g.sibling;var x=p(T,g,I.value,N);if(x===null){g===null&&(g=b);break}t&&g&&x.alternate===null&&e(T,g),_=s(x,_,y),z===null?F=x:z.sibling=x,z=x,g=b}if(I.done)return n(T,g),He&&hs(T,y),F;if(g===null){for(;!I.done;y++,I=C.next())I=f(T,I.value,N),I!==null&&(_=s(I,_,y),z===null?F=I:z.sibling=I,z=I);return He&&hs(T,y),F}for(g=r(T,g);!I.done;y++,I=C.next())I=w(g,T,y,I.value,N),I!==null&&(t&&I.alternate!==null&&g.delete(I.key===null?y:I.key),_=s(I,_,y),z===null?F=I:z.sibling=I,z=I);return t&&g.forEach(function(k){return e(T,k)}),He&&hs(T,y),F}function P(T,_,C,N){if(typeof C=="object"&&C!==null&&C.type===yo&&C.key===null&&(C=C.props.children),typeof C=="object"&&C!==null){switch(C.$$typeof){case Ku:e:{for(var F=C.key,z=_;z!==null;){if(z.key===F){if(F=C.type,F===yo){if(z.tag===7){n(T,z.sibling),_=i(z,C.props.children),_.return=T,T=_;break e}}else if(z.elementType===F||typeof F=="object"&&F!==null&&F.$$typeof===di&&i_(F)===z.type){n(T,z.sibling),_=i(z,C.props),_.ref=Wa(T,z,C),_.return=T,T=_;break e}n(T,z);break}else e(T,z);z=z.sibling}C.type===yo?(_=Ts(C.props.children,T.mode,N,C.key),_.return=T,T=_):(N=Lc(C.type,C.key,C.props,null,T.mode,N),N.ref=Wa(T,_,C),N.return=T,T=N)}return o(T);case go:e:{for(z=C.key;_!==null;){if(_.key===z)if(_.tag===4&&_.stateNode.containerInfo===C.containerInfo&&_.stateNode.implementation===C.implementation){n(T,_.sibling),_=i(_,C.children||[]),_.return=T,T=_;break e}else{n(T,_);break}else e(T,_);_=_.sibling}_=vf(C,T.mode,N),_.return=T,T=_}return o(T);case di:return z=C._init,P(T,_,z(C._payload),N)}if(sl(C))return E(T,_,C,N);if(Fa(C))return S(T,_,C,N);sc(T,C)}return typeof C=="string"&&C!==""||typeof C=="number"?(C=""+C,_!==null&&_.tag===6?(n(T,_.sibling),_=i(_,C),_.return=T,T=_):(n(T,_),_=yf(C,T.mode,N),_.return=T,T=_),o(T)):n(T,_)}return P}var Wo=oE(!0),aE=oE(!1),ih=Ki(null),sh=null,Io=null,Fm=null;function jm(){Fm=Io=sh=null}function zm(t){var e=ih.current;je(ih),t._currentValue=e}function gp(t,e,n){for(;t!==null;){var r=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),t===n)break;t=t.return}}function Do(t,e){sh=t,Fm=Io=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(sn=!0),t.firstContext=null)}function Rn(t){var e=t._currentValue;if(Fm!==t)if(t={context:t,memoizedValue:e,next:null},Io===null){if(sh===null)throw Error(W(308));Io=t,sh.dependencies={lanes:0,firstContext:t}}else Io=Io.next=t;return e}var ms=null;function Bm(t){ms===null?ms=[t]:ms.push(t)}function lE(t,e,n,r){var i=e.interleaved;return i===null?(n.next=n,Bm(e)):(n.next=i.next,i.next=n),e.interleaved=n,jr(t,r)}function jr(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var fi=!1;function Hm(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function uE(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function Dr(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function Ai(t,e,n){var r=t.updateQueue;if(r===null)return null;if(r=r.shared,Ce&2){var i=r.pending;return i===null?e.next=e:(e.next=i.next,i.next=e),r.pending=e,jr(t,n)}return i=r.interleaved,i===null?(e.next=e,Bm(r)):(e.next=i.next,i.next=e),r.interleaved=e,jr(t,n)}function Ac(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,km(t,n)}}function s_(t,e){var n=t.updateQueue,r=t.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var i=null,s=null;if(n=n.firstBaseUpdate,n!==null){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};s===null?i=s=o:s=s.next=o,n=n.next}while(n!==null);s===null?i=s=e:s=s.next=e}else i=s=e;n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:s,shared:r.shared,effects:r.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function oh(t,e,n,r){var i=t.updateQueue;fi=!1;var s=i.firstBaseUpdate,o=i.lastBaseUpdate,a=i.shared.pending;if(a!==null){i.shared.pending=null;var l=a,c=l.next;l.next=null,o===null?s=c:o.next=c,o=l;var h=t.alternate;h!==null&&(h=h.updateQueue,a=h.lastBaseUpdate,a!==o&&(a===null?h.firstBaseUpdate=c:a.next=c,h.lastBaseUpdate=l))}if(s!==null){var f=i.baseState;o=0,h=c=l=null,a=s;do{var p=a.lane,w=a.eventTime;if((r&p)===p){h!==null&&(h=h.next={eventTime:w,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var E=t,S=a;switch(p=e,w=n,S.tag){case 1:if(E=S.payload,typeof E=="function"){f=E.call(w,f,p);break e}f=E;break e;case 3:E.flags=E.flags&-65537|128;case 0:if(E=S.payload,p=typeof E=="function"?E.call(w,f,p):E,p==null)break e;f=Xe({},f,p);break e;case 2:fi=!0}}a.callback!==null&&a.lane!==0&&(t.flags|=64,p=i.effects,p===null?i.effects=[a]:p.push(a))}else w={eventTime:w,lane:p,tag:a.tag,payload:a.payload,callback:a.callback,next:null},h===null?(c=h=w,l=f):h=h.next=w,o|=p;if(a=a.next,a===null){if(a=i.shared.pending,a===null)break;p=a,a=p.next,p.next=null,i.lastBaseUpdate=p,i.shared.pending=null}}while(!0);if(h===null&&(l=f),i.baseState=l,i.firstBaseUpdate=c,i.lastBaseUpdate=h,e=i.shared.interleaved,e!==null){i=e;do o|=i.lane,i=i.next;while(i!==e)}else s===null&&(i.shared.lanes=0);Ps|=o,t.lanes=o,t.memoizedState=f}}function o_(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var r=t[e],i=r.callback;if(i!==null){if(r.callback=null,r=n,typeof i!="function")throw Error(W(191,i));i.call(r)}}}var hu={},lr=Ki(hu),zl=Ki(hu),Bl=Ki(hu);function gs(t){if(t===hu)throw Error(W(174));return t}function Wm(t,e){switch(Ne(Bl,e),Ne(zl,t),Ne(lr,hu),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:Xf(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=Xf(e,t)}je(lr),Ne(lr,e)}function qo(){je(lr),je(zl),je(Bl)}function cE(t){gs(Bl.current);var e=gs(lr.current),n=Xf(e,t.type);e!==n&&(Ne(zl,t),Ne(lr,n))}function qm(t){zl.current===t&&(je(lr),je(zl))}var Ge=Ki(0);function ah(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var hf=[];function Gm(){for(var t=0;t<hf.length;t++)hf[t]._workInProgressVersionPrimary=null;hf.length=0}var xc=Kr.ReactCurrentDispatcher,df=Kr.ReactCurrentBatchConfig,ks=0,Qe=null,ft=null,yt=null,lh=!1,El=!1,Hl=0,VA=0;function Mt(){throw Error(W(321))}function Km(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!Xn(t[n],e[n]))return!1;return!0}function Qm(t,e,n,r,i,s){if(ks=s,Qe=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,xc.current=t===null||t.memoizedState===null?jA:zA,t=n(r,i),El){s=0;do{if(El=!1,Hl=0,25<=s)throw Error(W(301));s+=1,yt=ft=null,e.updateQueue=null,xc.current=BA,t=n(r,i)}while(El)}if(xc.current=uh,e=ft!==null&&ft.next!==null,ks=0,yt=ft=Qe=null,lh=!1,e)throw Error(W(300));return t}function Xm(){var t=Hl!==0;return Hl=0,t}function rr(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return yt===null?Qe.memoizedState=yt=t:yt=yt.next=t,yt}function On(){if(ft===null){var t=Qe.alternate;t=t!==null?t.memoizedState:null}else t=ft.next;var e=yt===null?Qe.memoizedState:yt.next;if(e!==null)yt=e,ft=t;else{if(t===null)throw Error(W(310));ft=t,t={memoizedState:ft.memoizedState,baseState:ft.baseState,baseQueue:ft.baseQueue,queue:ft.queue,next:null},yt===null?Qe.memoizedState=yt=t:yt=yt.next=t}return yt}function Wl(t,e){return typeof e=="function"?e(t):e}function ff(t){var e=On(),n=e.queue;if(n===null)throw Error(W(311));n.lastRenderedReducer=t;var r=ft,i=r.baseQueue,s=n.pending;if(s!==null){if(i!==null){var o=i.next;i.next=s.next,s.next=o}r.baseQueue=i=s,n.pending=null}if(i!==null){s=i.next,r=r.baseState;var a=o=null,l=null,c=s;do{var h=c.lane;if((ks&h)===h)l!==null&&(l=l.next={lane:0,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null}),r=c.hasEagerState?c.eagerState:t(r,c.action);else{var f={lane:h,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null};l===null?(a=l=f,o=r):l=l.next=f,Qe.lanes|=h,Ps|=h}c=c.next}while(c!==null&&c!==s);l===null?o=r:l.next=a,Xn(r,e.memoizedState)||(sn=!0),e.memoizedState=r,e.baseState=o,e.baseQueue=l,n.lastRenderedState=r}if(t=n.interleaved,t!==null){i=t;do s=i.lane,Qe.lanes|=s,Ps|=s,i=i.next;while(i!==t)}else i===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function pf(t){var e=On(),n=e.queue;if(n===null)throw Error(W(311));n.lastRenderedReducer=t;var r=n.dispatch,i=n.pending,s=e.memoizedState;if(i!==null){n.pending=null;var o=i=i.next;do s=t(s,o.action),o=o.next;while(o!==i);Xn(s,e.memoizedState)||(sn=!0),e.memoizedState=s,e.baseQueue===null&&(e.baseState=s),n.lastRenderedState=s}return[s,r]}function hE(){}function dE(t,e){var n=Qe,r=On(),i=e(),s=!Xn(r.memoizedState,i);if(s&&(r.memoizedState=i,sn=!0),r=r.queue,Ym(mE.bind(null,n,r,t),[t]),r.getSnapshot!==e||s||yt!==null&&yt.memoizedState.tag&1){if(n.flags|=2048,ql(9,pE.bind(null,n,r,i,e),void 0,null),vt===null)throw Error(W(349));ks&30||fE(n,e,i)}return i}function fE(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=Qe.updateQueue,e===null?(e={lastEffect:null,stores:null},Qe.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function pE(t,e,n,r){e.value=n,e.getSnapshot=r,gE(e)&&yE(t)}function mE(t,e,n){return n(function(){gE(e)&&yE(t)})}function gE(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!Xn(t,n)}catch{return!0}}function yE(t){var e=jr(t,1);e!==null&&Gn(e,t,1,-1)}function a_(t){var e=rr();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Wl,lastRenderedState:t},e.queue=t,t=t.dispatch=FA.bind(null,Qe,t),[e.memoizedState,t]}function ql(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},e=Qe.updateQueue,e===null?(e={lastEffect:null,stores:null},Qe.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t)),t}function vE(){return On().memoizedState}function kc(t,e,n,r){var i=rr();Qe.flags|=t,i.memoizedState=ql(1|e,n,void 0,r===void 0?null:r)}function Gh(t,e,n,r){var i=On();r=r===void 0?null:r;var s=void 0;if(ft!==null){var o=ft.memoizedState;if(s=o.destroy,r!==null&&Km(r,o.deps)){i.memoizedState=ql(e,n,s,r);return}}Qe.flags|=t,i.memoizedState=ql(1|e,n,s,r)}function l_(t,e){return kc(8390656,8,t,e)}function Ym(t,e){return Gh(2048,8,t,e)}function _E(t,e){return Gh(4,2,t,e)}function wE(t,e){return Gh(4,4,t,e)}function EE(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function bE(t,e,n){return n=n!=null?n.concat([t]):null,Gh(4,4,EE.bind(null,e,t),n)}function Jm(){}function TE(t,e){var n=On();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&Km(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function CE(t,e){var n=On();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&Km(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)}function IE(t,e,n){return ks&21?(Xn(n,e)||(n=P1(),Qe.lanes|=n,Ps|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,sn=!0),t.memoizedState=n)}function UA(t,e){var n=ke;ke=n!==0&&4>n?n:4,t(!0);var r=df.transition;df.transition={};try{t(!1),e()}finally{ke=n,df.transition=r}}function SE(){return On().memoizedState}function $A(t,e,n){var r=ki(t);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},AE(t))xE(e,n);else if(n=lE(t,e,n,r),n!==null){var i=Xt();Gn(n,t,r,i),kE(n,e,r)}}function FA(t,e,n){var r=ki(t),i={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(AE(t))xE(e,i);else{var s=t.alternate;if(t.lanes===0&&(s===null||s.lanes===0)&&(s=e.lastRenderedReducer,s!==null))try{var o=e.lastRenderedState,a=s(o,n);if(i.hasEagerState=!0,i.eagerState=a,Xn(a,o)){var l=e.interleaved;l===null?(i.next=i,Bm(e)):(i.next=l.next,l.next=i),e.interleaved=i;return}}catch{}finally{}n=lE(t,e,i,r),n!==null&&(i=Xt(),Gn(n,t,r,i),kE(n,e,r))}}function AE(t){var e=t.alternate;return t===Qe||e!==null&&e===Qe}function xE(t,e){El=lh=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function kE(t,e,n){if(n&4194240){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,km(t,n)}}var uh={readContext:Rn,useCallback:Mt,useContext:Mt,useEffect:Mt,useImperativeHandle:Mt,useInsertionEffect:Mt,useLayoutEffect:Mt,useMemo:Mt,useReducer:Mt,useRef:Mt,useState:Mt,useDebugValue:Mt,useDeferredValue:Mt,useTransition:Mt,useMutableSource:Mt,useSyncExternalStore:Mt,useId:Mt,unstable_isNewReconciler:!1},jA={readContext:Rn,useCallback:function(t,e){return rr().memoizedState=[t,e===void 0?null:e],t},useContext:Rn,useEffect:l_,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,kc(4194308,4,EE.bind(null,e,t),n)},useLayoutEffect:function(t,e){return kc(4194308,4,t,e)},useInsertionEffect:function(t,e){return kc(4,2,t,e)},useMemo:function(t,e){var n=rr();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=rr();return e=n!==void 0?n(e):e,r.memoizedState=r.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},r.queue=t,t=t.dispatch=$A.bind(null,Qe,t),[r.memoizedState,t]},useRef:function(t){var e=rr();return t={current:t},e.memoizedState=t},useState:a_,useDebugValue:Jm,useDeferredValue:function(t){return rr().memoizedState=t},useTransition:function(){var t=a_(!1),e=t[0];return t=UA.bind(null,t[1]),rr().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var r=Qe,i=rr();if(He){if(n===void 0)throw Error(W(407));n=n()}else{if(n=e(),vt===null)throw Error(W(349));ks&30||fE(r,e,n)}i.memoizedState=n;var s={value:n,getSnapshot:e};return i.queue=s,l_(mE.bind(null,r,s,t),[t]),r.flags|=2048,ql(9,pE.bind(null,r,s,n,e),void 0,null),n},useId:function(){var t=rr(),e=vt.identifierPrefix;if(He){var n=Rr,r=Pr;n=(r&~(1<<32-qn(r)-1)).toString(32)+n,e=":"+e+"R"+n,n=Hl++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=VA++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},zA={readContext:Rn,useCallback:TE,useContext:Rn,useEffect:Ym,useImperativeHandle:bE,useInsertionEffect:_E,useLayoutEffect:wE,useMemo:CE,useReducer:ff,useRef:vE,useState:function(){return ff(Wl)},useDebugValue:Jm,useDeferredValue:function(t){var e=On();return IE(e,ft.memoizedState,t)},useTransition:function(){var t=ff(Wl)[0],e=On().memoizedState;return[t,e]},useMutableSource:hE,useSyncExternalStore:dE,useId:SE,unstable_isNewReconciler:!1},BA={readContext:Rn,useCallback:TE,useContext:Rn,useEffect:Ym,useImperativeHandle:bE,useInsertionEffect:_E,useLayoutEffect:wE,useMemo:CE,useReducer:pf,useRef:vE,useState:function(){return pf(Wl)},useDebugValue:Jm,useDeferredValue:function(t){var e=On();return ft===null?e.memoizedState=t:IE(e,ft.memoizedState,t)},useTransition:function(){var t=pf(Wl)[0],e=On().memoizedState;return[t,e]},useMutableSource:hE,useSyncExternalStore:dE,useId:SE,unstable_isNewReconciler:!1};function Fn(t,e){if(t&&t.defaultProps){e=Xe({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function yp(t,e,n,r){e=t.memoizedState,n=n(r,e),n=n==null?e:Xe({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var Kh={isMounted:function(t){return(t=t._reactInternals)?zs(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var r=Xt(),i=ki(t),s=Dr(r,i);s.payload=e,n!=null&&(s.callback=n),e=Ai(t,s,i),e!==null&&(Gn(e,t,i,r),Ac(e,t,i))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var r=Xt(),i=ki(t),s=Dr(r,i);s.tag=1,s.payload=e,n!=null&&(s.callback=n),e=Ai(t,s,i),e!==null&&(Gn(e,t,i,r),Ac(e,t,i))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=Xt(),r=ki(t),i=Dr(n,r);i.tag=2,e!=null&&(i.callback=e),e=Ai(t,i,r),e!==null&&(Gn(e,t,r,n),Ac(e,t,r))}};function u_(t,e,n,r,i,s,o){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(r,s,o):e.prototype&&e.prototype.isPureReactComponent?!Ul(n,r)||!Ul(i,s):!0}function PE(t,e,n){var r=!1,i=ji,s=e.contextType;return typeof s=="object"&&s!==null?s=Rn(s):(i=an(e)?As:zt.current,r=e.contextTypes,s=(r=r!=null)?Bo(t,i):ji),e=new e(n,s),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=Kh,t.stateNode=e,e._reactInternals=t,r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=i,t.__reactInternalMemoizedMaskedChildContext=s),e}function c_(t,e,n,r){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&Kh.enqueueReplaceState(e,e.state,null)}function vp(t,e,n,r){var i=t.stateNode;i.props=n,i.state=t.memoizedState,i.refs={},Hm(t);var s=e.contextType;typeof s=="object"&&s!==null?i.context=Rn(s):(s=an(e)?As:zt.current,i.context=Bo(t,s)),i.state=t.memoizedState,s=e.getDerivedStateFromProps,typeof s=="function"&&(yp(t,e,s,n),i.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof i.getSnapshotBeforeUpdate=="function"||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(e=i.state,typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount(),e!==i.state&&Kh.enqueueReplaceState(i,i.state,null),oh(t,n,i,r),i.state=t.memoizedState),typeof i.componentDidMount=="function"&&(t.flags|=4194308)}function Go(t,e){try{var n="",r=e;do n+=y2(r),r=r.return;while(r);var i=n}catch(s){i=`
Error generating stack: `+s.message+`
`+s.stack}return{value:t,source:e,stack:i,digest:null}}function mf(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function _p(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var HA=typeof WeakMap=="function"?WeakMap:Map;function RE(t,e,n){n=Dr(-1,n),n.tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){hh||(hh=!0,kp=r),_p(t,e)},n}function OE(t,e,n){n=Dr(-1,n),n.tag=3;var r=t.type.getDerivedStateFromError;if(typeof r=="function"){var i=e.value;n.payload=function(){return r(i)},n.callback=function(){_p(t,e)}}var s=t.stateNode;return s!==null&&typeof s.componentDidCatch=="function"&&(n.callback=function(){_p(t,e),typeof r!="function"&&(xi===null?xi=new Set([this]):xi.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),n}function h_(t,e,n){var r=t.pingCache;if(r===null){r=t.pingCache=new HA;var i=new Set;r.set(e,i)}else i=r.get(e),i===void 0&&(i=new Set,r.set(e,i));i.has(n)||(i.add(n),t=ix.bind(null,t,e,n),e.then(t,t))}function d_(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function f_(t,e,n,r,i){return t.mode&1?(t.flags|=65536,t.lanes=i,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=Dr(-1,1),e.tag=2,Ai(n,e,1))),n.lanes|=1),t)}var WA=Kr.ReactCurrentOwner,sn=!1;function Gt(t,e,n,r){e.child=t===null?aE(e,null,n,r):Wo(e,t.child,n,r)}function p_(t,e,n,r,i){n=n.render;var s=e.ref;return Do(e,i),r=Qm(t,e,n,r,s,i),n=Xm(),t!==null&&!sn?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,zr(t,e,i)):(He&&n&&Vm(e),e.flags|=1,Gt(t,e,r,i),e.child)}function m_(t,e,n,r,i){if(t===null){var s=n.type;return typeof s=="function"&&!og(s)&&s.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=s,LE(t,e,s,r,i)):(t=Lc(n.type,null,r,e,e.mode,i),t.ref=e.ref,t.return=e,e.child=t)}if(s=t.child,!(t.lanes&i)){var o=s.memoizedProps;if(n=n.compare,n=n!==null?n:Ul,n(o,r)&&t.ref===e.ref)return zr(t,e,i)}return e.flags|=1,t=Pi(s,r),t.ref=e.ref,t.return=e,e.child=t}function LE(t,e,n,r,i){if(t!==null){var s=t.memoizedProps;if(Ul(s,r)&&t.ref===e.ref)if(sn=!1,e.pendingProps=r=s,(t.lanes&i)!==0)t.flags&131072&&(sn=!0);else return e.lanes=t.lanes,zr(t,e,i)}return wp(t,e,n,r,i)}function NE(t,e,n){var r=e.pendingProps,i=r.children,s=t!==null?t.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},Ne(Ao,dn),dn|=n;else{if(!(n&1073741824))return t=s!==null?s.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,Ne(Ao,dn),dn|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=s!==null?s.baseLanes:n,Ne(Ao,dn),dn|=r}else s!==null?(r=s.baseLanes|n,e.memoizedState=null):r=n,Ne(Ao,dn),dn|=r;return Gt(t,e,i,n),e.child}function DE(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function wp(t,e,n,r,i){var s=an(n)?As:zt.current;return s=Bo(e,s),Do(e,i),n=Qm(t,e,n,r,s,i),r=Xm(),t!==null&&!sn?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,zr(t,e,i)):(He&&r&&Vm(e),e.flags|=1,Gt(t,e,n,i),e.child)}function g_(t,e,n,r,i){if(an(n)){var s=!0;th(e)}else s=!1;if(Do(e,i),e.stateNode===null)Pc(t,e),PE(e,n,r),vp(e,n,r,i),r=!0;else if(t===null){var o=e.stateNode,a=e.memoizedProps;o.props=a;var l=o.context,c=n.contextType;typeof c=="object"&&c!==null?c=Rn(c):(c=an(n)?As:zt.current,c=Bo(e,c));var h=n.getDerivedStateFromProps,f=typeof h=="function"||typeof o.getSnapshotBeforeUpdate=="function";f||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==r||l!==c)&&c_(e,o,r,c),fi=!1;var p=e.memoizedState;o.state=p,oh(e,r,o,i),l=e.memoizedState,a!==r||p!==l||on.current||fi?(typeof h=="function"&&(yp(e,n,h,r),l=e.memoizedState),(a=fi||u_(e,n,a,r,p,l,c))?(f||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=l),o.props=r,o.state=l,o.context=c,r=a):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{o=e.stateNode,uE(t,e),a=e.memoizedProps,c=e.type===e.elementType?a:Fn(e.type,a),o.props=c,f=e.pendingProps,p=o.context,l=n.contextType,typeof l=="object"&&l!==null?l=Rn(l):(l=an(n)?As:zt.current,l=Bo(e,l));var w=n.getDerivedStateFromProps;(h=typeof w=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==f||p!==l)&&c_(e,o,r,l),fi=!1,p=e.memoizedState,o.state=p,oh(e,r,o,i);var E=e.memoizedState;a!==f||p!==E||on.current||fi?(typeof w=="function"&&(yp(e,n,w,r),E=e.memoizedState),(c=fi||u_(e,n,c,r,p,E,l)||!1)?(h||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(r,E,l),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(r,E,l)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&p===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&p===t.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=E),o.props=r,o.state=E,o.context=l,r=c):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&p===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&p===t.memoizedState||(e.flags|=1024),r=!1)}return Ep(t,e,n,r,s,i)}function Ep(t,e,n,r,i,s){DE(t,e);var o=(e.flags&128)!==0;if(!r&&!o)return i&&t_(e,n,!1),zr(t,e,s);r=e.stateNode,WA.current=e;var a=o&&typeof n.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,t!==null&&o?(e.child=Wo(e,t.child,null,s),e.child=Wo(e,null,a,s)):Gt(t,e,a,s),e.memoizedState=r.state,i&&t_(e,n,!0),e.child}function ME(t){var e=t.stateNode;e.pendingContext?e_(t,e.pendingContext,e.pendingContext!==e.context):e.context&&e_(t,e.context,!1),Wm(t,e.containerInfo)}function y_(t,e,n,r,i){return Ho(),$m(i),e.flags|=256,Gt(t,e,n,r),e.child}var bp={dehydrated:null,treeContext:null,retryLane:0};function Tp(t){return{baseLanes:t,cachePool:null,transitions:null}}function VE(t,e,n){var r=e.pendingProps,i=Ge.current,s=!1,o=(e.flags&128)!==0,a;if((a=o)||(a=t!==null&&t.memoizedState===null?!1:(i&2)!==0),a?(s=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(i|=1),Ne(Ge,i&1),t===null)return mp(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(o=r.children,t=r.fallback,s?(r=e.mode,s=e.child,o={mode:"hidden",children:o},!(r&1)&&s!==null?(s.childLanes=0,s.pendingProps=o):s=Yh(o,r,0,null),t=Ts(t,r,n,null),s.return=e,t.return=e,s.sibling=t,e.child=s,e.child.memoizedState=Tp(n),e.memoizedState=bp,t):Zm(e,o));if(i=t.memoizedState,i!==null&&(a=i.dehydrated,a!==null))return qA(t,e,o,r,a,i,n);if(s){s=r.fallback,o=e.mode,i=t.child,a=i.sibling;var l={mode:"hidden",children:r.children};return!(o&1)&&e.child!==i?(r=e.child,r.childLanes=0,r.pendingProps=l,e.deletions=null):(r=Pi(i,l),r.subtreeFlags=i.subtreeFlags&14680064),a!==null?s=Pi(a,s):(s=Ts(s,o,n,null),s.flags|=2),s.return=e,r.return=e,r.sibling=s,e.child=r,r=s,s=e.child,o=t.child.memoizedState,o=o===null?Tp(n):{baseLanes:o.baseLanes|n,cachePool:null,transitions:o.transitions},s.memoizedState=o,s.childLanes=t.childLanes&~n,e.memoizedState=bp,r}return s=t.child,t=s.sibling,r=Pi(s,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=n),r.return=e,r.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=r,e.memoizedState=null,r}function Zm(t,e){return e=Yh({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function oc(t,e,n,r){return r!==null&&$m(r),Wo(e,t.child,null,n),t=Zm(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function qA(t,e,n,r,i,s,o){if(n)return e.flags&256?(e.flags&=-257,r=mf(Error(W(422))),oc(t,e,o,r)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(s=r.fallback,i=e.mode,r=Yh({mode:"visible",children:r.children},i,0,null),s=Ts(s,i,o,null),s.flags|=2,r.return=e,s.return=e,r.sibling=s,e.child=r,e.mode&1&&Wo(e,t.child,null,o),e.child.memoizedState=Tp(o),e.memoizedState=bp,s);if(!(e.mode&1))return oc(t,e,o,null);if(i.data==="$!"){if(r=i.nextSibling&&i.nextSibling.dataset,r)var a=r.dgst;return r=a,s=Error(W(419)),r=mf(s,r,void 0),oc(t,e,o,r)}if(a=(o&t.childLanes)!==0,sn||a){if(r=vt,r!==null){switch(o&-o){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}i=i&(r.suspendedLanes|o)?0:i,i!==0&&i!==s.retryLane&&(s.retryLane=i,jr(t,i),Gn(r,t,i,-1))}return sg(),r=mf(Error(W(421))),oc(t,e,o,r)}return i.data==="$?"?(e.flags|=128,e.child=t.child,e=sx.bind(null,t),i._reactRetry=e,null):(t=s.treeContext,fn=Si(i.nextSibling),pn=e,He=!0,Bn=null,t!==null&&(bn[Tn++]=Pr,bn[Tn++]=Rr,bn[Tn++]=xs,Pr=t.id,Rr=t.overflow,xs=e),e=Zm(e,r.children),e.flags|=4096,e)}function v_(t,e,n){t.lanes|=e;var r=t.alternate;r!==null&&(r.lanes|=e),gp(t.return,e,n)}function gf(t,e,n,r,i){var s=t.memoizedState;s===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(s.isBackwards=e,s.rendering=null,s.renderingStartTime=0,s.last=r,s.tail=n,s.tailMode=i)}function UE(t,e,n){var r=e.pendingProps,i=r.revealOrder,s=r.tail;if(Gt(t,e,r.children,n),r=Ge.current,r&2)r=r&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&v_(t,n,e);else if(t.tag===19)v_(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(Ne(Ge,r),!(e.mode&1))e.memoizedState=null;else switch(i){case"forwards":for(n=e.child,i=null;n!==null;)t=n.alternate,t!==null&&ah(t)===null&&(i=n),n=n.sibling;n=i,n===null?(i=e.child,e.child=null):(i=n.sibling,n.sibling=null),gf(e,!1,i,n,s);break;case"backwards":for(n=null,i=e.child,e.child=null;i!==null;){if(t=i.alternate,t!==null&&ah(t)===null){e.child=i;break}t=i.sibling,i.sibling=n,n=i,i=t}gf(e,!0,n,null,s);break;case"together":gf(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function Pc(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function zr(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),Ps|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(W(153));if(e.child!==null){for(t=e.child,n=Pi(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=Pi(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function GA(t,e,n){switch(e.tag){case 3:ME(e),Ho();break;case 5:cE(e);break;case 1:an(e.type)&&th(e);break;case 4:Wm(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,i=e.memoizedProps.value;Ne(ih,r._currentValue),r._currentValue=i;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(Ne(Ge,Ge.current&1),e.flags|=128,null):n&e.child.childLanes?VE(t,e,n):(Ne(Ge,Ge.current&1),t=zr(t,e,n),t!==null?t.sibling:null);Ne(Ge,Ge.current&1);break;case 19:if(r=(n&e.childLanes)!==0,t.flags&128){if(r)return UE(t,e,n);e.flags|=128}if(i=e.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),Ne(Ge,Ge.current),r)break;return null;case 22:case 23:return e.lanes=0,NE(t,e,n)}return zr(t,e,n)}var $E,Cp,FE,jE;$E=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};Cp=function(){};FE=function(t,e,n,r){var i=t.memoizedProps;if(i!==r){t=e.stateNode,gs(lr.current);var s=null;switch(n){case"input":i=qf(t,i),r=qf(t,r),s=[];break;case"select":i=Xe({},i,{value:void 0}),r=Xe({},r,{value:void 0}),s=[];break;case"textarea":i=Qf(t,i),r=Qf(t,r),s=[];break;default:typeof i.onClick!="function"&&typeof r.onClick=="function"&&(t.onclick=Zc)}Yf(n,r);var o;n=null;for(c in i)if(!r.hasOwnProperty(c)&&i.hasOwnProperty(c)&&i[c]!=null)if(c==="style"){var a=i[c];for(o in a)a.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else c!=="dangerouslySetInnerHTML"&&c!=="children"&&c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&c!=="autoFocus"&&(Rl.hasOwnProperty(c)?s||(s=[]):(s=s||[]).push(c,null));for(c in r){var l=r[c];if(a=i!=null?i[c]:void 0,r.hasOwnProperty(c)&&l!==a&&(l!=null||a!=null))if(c==="style")if(a){for(o in a)!a.hasOwnProperty(o)||l&&l.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in l)l.hasOwnProperty(o)&&a[o]!==l[o]&&(n||(n={}),n[o]=l[o])}else n||(s||(s=[]),s.push(c,n)),n=l;else c==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,a=a?a.__html:void 0,l!=null&&a!==l&&(s=s||[]).push(c,l)):c==="children"?typeof l!="string"&&typeof l!="number"||(s=s||[]).push(c,""+l):c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&(Rl.hasOwnProperty(c)?(l!=null&&c==="onScroll"&&$e("scroll",t),s||a===l||(s=[])):(s=s||[]).push(c,l))}n&&(s=s||[]).push("style",n);var c=s;(e.updateQueue=c)&&(e.flags|=4)}};jE=function(t,e,n,r){n!==r&&(e.flags|=4)};function qa(t,e){if(!He)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:r.sibling=null}}function Vt(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,r=0;if(e)for(var i=t.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags&14680064,r|=i.flags&14680064,i.return=t,i=i.sibling;else for(i=t.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=t,i=i.sibling;return t.subtreeFlags|=r,t.childLanes=n,e}function KA(t,e,n){var r=e.pendingProps;switch(Um(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Vt(e),null;case 1:return an(e.type)&&eh(),Vt(e),null;case 3:return r=e.stateNode,qo(),je(on),je(zt),Gm(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&(ic(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,Bn!==null&&(Op(Bn),Bn=null))),Cp(t,e),Vt(e),null;case 5:qm(e);var i=gs(Bl.current);if(n=e.type,t!==null&&e.stateNode!=null)FE(t,e,n,r,i),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error(W(166));return Vt(e),null}if(t=gs(lr.current),ic(e)){r=e.stateNode,n=e.type;var s=e.memoizedProps;switch(r[or]=e,r[jl]=s,t=(e.mode&1)!==0,n){case"dialog":$e("cancel",r),$e("close",r);break;case"iframe":case"object":case"embed":$e("load",r);break;case"video":case"audio":for(i=0;i<al.length;i++)$e(al[i],r);break;case"source":$e("error",r);break;case"img":case"image":case"link":$e("error",r),$e("load",r);break;case"details":$e("toggle",r);break;case"input":Av(r,s),$e("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!s.multiple},$e("invalid",r);break;case"textarea":kv(r,s),$e("invalid",r)}Yf(n,s),i=null;for(var o in s)if(s.hasOwnProperty(o)){var a=s[o];o==="children"?typeof a=="string"?r.textContent!==a&&(s.suppressHydrationWarning!==!0&&rc(r.textContent,a,t),i=["children",a]):typeof a=="number"&&r.textContent!==""+a&&(s.suppressHydrationWarning!==!0&&rc(r.textContent,a,t),i=["children",""+a]):Rl.hasOwnProperty(o)&&a!=null&&o==="onScroll"&&$e("scroll",r)}switch(n){case"input":Qu(r),xv(r,s,!0);break;case"textarea":Qu(r),Pv(r);break;case"select":case"option":break;default:typeof s.onClick=="function"&&(r.onclick=Zc)}r=i,e.updateQueue=r,r!==null&&(e.flags|=4)}else{o=i.nodeType===9?i:i.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=m1(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=o.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof r.is=="string"?t=o.createElement(n,{is:r.is}):(t=o.createElement(n),n==="select"&&(o=t,r.multiple?o.multiple=!0:r.size&&(o.size=r.size))):t=o.createElementNS(t,n),t[or]=e,t[jl]=r,$E(t,e,!1,!1),e.stateNode=t;e:{switch(o=Jf(n,r),n){case"dialog":$e("cancel",t),$e("close",t),i=r;break;case"iframe":case"object":case"embed":$e("load",t),i=r;break;case"video":case"audio":for(i=0;i<al.length;i++)$e(al[i],t);i=r;break;case"source":$e("error",t),i=r;break;case"img":case"image":case"link":$e("error",t),$e("load",t),i=r;break;case"details":$e("toggle",t),i=r;break;case"input":Av(t,r),i=qf(t,r),$e("invalid",t);break;case"option":i=r;break;case"select":t._wrapperState={wasMultiple:!!r.multiple},i=Xe({},r,{value:void 0}),$e("invalid",t);break;case"textarea":kv(t,r),i=Qf(t,r),$e("invalid",t);break;default:i=r}Yf(n,i),a=i;for(s in a)if(a.hasOwnProperty(s)){var l=a[s];s==="style"?v1(t,l):s==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,l!=null&&g1(t,l)):s==="children"?typeof l=="string"?(n!=="textarea"||l!=="")&&Ol(t,l):typeof l=="number"&&Ol(t,""+l):s!=="suppressContentEditableWarning"&&s!=="suppressHydrationWarning"&&s!=="autoFocus"&&(Rl.hasOwnProperty(s)?l!=null&&s==="onScroll"&&$e("scroll",t):l!=null&&Tm(t,s,l,o))}switch(n){case"input":Qu(t),xv(t,r,!1);break;case"textarea":Qu(t),Pv(t);break;case"option":r.value!=null&&t.setAttribute("value",""+Fi(r.value));break;case"select":t.multiple=!!r.multiple,s=r.value,s!=null?Ro(t,!!r.multiple,s,!1):r.defaultValue!=null&&Ro(t,!!r.multiple,r.defaultValue,!0);break;default:typeof i.onClick=="function"&&(t.onclick=Zc)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return Vt(e),null;case 6:if(t&&e.stateNode!=null)jE(t,e,t.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(W(166));if(n=gs(Bl.current),gs(lr.current),ic(e)){if(r=e.stateNode,n=e.memoizedProps,r[or]=e,(s=r.nodeValue!==n)&&(t=pn,t!==null))switch(t.tag){case 3:rc(r.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&rc(r.nodeValue,n,(t.mode&1)!==0)}s&&(e.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[or]=e,e.stateNode=r}return Vt(e),null;case 13:if(je(Ge),r=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(He&&fn!==null&&e.mode&1&&!(e.flags&128))sE(),Ho(),e.flags|=98560,s=!1;else if(s=ic(e),r!==null&&r.dehydrated!==null){if(t===null){if(!s)throw Error(W(318));if(s=e.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(W(317));s[or]=e}else Ho(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;Vt(e),s=!1}else Bn!==null&&(Op(Bn),Bn=null),s=!0;if(!s)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(r=r!==null,r!==(t!==null&&t.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(t===null||Ge.current&1?pt===0&&(pt=3):sg())),e.updateQueue!==null&&(e.flags|=4),Vt(e),null);case 4:return qo(),Cp(t,e),t===null&&$l(e.stateNode.containerInfo),Vt(e),null;case 10:return zm(e.type._context),Vt(e),null;case 17:return an(e.type)&&eh(),Vt(e),null;case 19:if(je(Ge),s=e.memoizedState,s===null)return Vt(e),null;if(r=(e.flags&128)!==0,o=s.rendering,o===null)if(r)qa(s,!1);else{if(pt!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(o=ah(t),o!==null){for(e.flags|=128,qa(s,!1),r=o.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=n,n=e.child;n!==null;)s=n,t=r,s.flags&=14680066,o=s.alternate,o===null?(s.childLanes=0,s.lanes=t,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=o.childLanes,s.lanes=o.lanes,s.child=o.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=o.memoizedProps,s.memoizedState=o.memoizedState,s.updateQueue=o.updateQueue,s.type=o.type,t=o.dependencies,s.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return Ne(Ge,Ge.current&1|2),e.child}t=t.sibling}s.tail!==null&&rt()>Ko&&(e.flags|=128,r=!0,qa(s,!1),e.lanes=4194304)}else{if(!r)if(t=ah(o),t!==null){if(e.flags|=128,r=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),qa(s,!0),s.tail===null&&s.tailMode==="hidden"&&!o.alternate&&!He)return Vt(e),null}else 2*rt()-s.renderingStartTime>Ko&&n!==1073741824&&(e.flags|=128,r=!0,qa(s,!1),e.lanes=4194304);s.isBackwards?(o.sibling=e.child,e.child=o):(n=s.last,n!==null?n.sibling=o:e.child=o,s.last=o)}return s.tail!==null?(e=s.tail,s.rendering=e,s.tail=e.sibling,s.renderingStartTime=rt(),e.sibling=null,n=Ge.current,Ne(Ge,r?n&1|2:n&1),e):(Vt(e),null);case 22:case 23:return ig(),r=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?dn&1073741824&&(Vt(e),e.subtreeFlags&6&&(e.flags|=8192)):Vt(e),null;case 24:return null;case 25:return null}throw Error(W(156,e.tag))}function QA(t,e){switch(Um(e),e.tag){case 1:return an(e.type)&&eh(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return qo(),je(on),je(zt),Gm(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return qm(e),null;case 13:if(je(Ge),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(W(340));Ho()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return je(Ge),null;case 4:return qo(),null;case 10:return zm(e.type._context),null;case 22:case 23:return ig(),null;case 24:return null;default:return null}}var ac=!1,Ft=!1,XA=typeof WeakSet=="function"?WeakSet:Set,X=null;function So(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){Ze(t,e,r)}else n.current=null}function Ip(t,e,n){try{n()}catch(r){Ze(t,e,r)}}var __=!1;function YA(t,e){if(lp=Xc,t=q1(),Mm(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var i=r.anchorOffset,s=r.focusNode;r=r.focusOffset;try{n.nodeType,s.nodeType}catch{n=null;break e}var o=0,a=-1,l=-1,c=0,h=0,f=t,p=null;t:for(;;){for(var w;f!==n||i!==0&&f.nodeType!==3||(a=o+i),f!==s||r!==0&&f.nodeType!==3||(l=o+r),f.nodeType===3&&(o+=f.nodeValue.length),(w=f.firstChild)!==null;)p=f,f=w;for(;;){if(f===t)break t;if(p===n&&++c===i&&(a=o),p===s&&++h===r&&(l=o),(w=f.nextSibling)!==null)break;f=p,p=f.parentNode}f=w}n=a===-1||l===-1?null:{start:a,end:l}}else n=null}n=n||{start:0,end:0}}else n=null;for(up={focusedElem:t,selectionRange:n},Xc=!1,X=e;X!==null;)if(e=X,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,X=t;else for(;X!==null;){e=X;try{var E=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(E!==null){var S=E.memoizedProps,P=E.memoizedState,T=e.stateNode,_=T.getSnapshotBeforeUpdate(e.elementType===e.type?S:Fn(e.type,S),P);T.__reactInternalSnapshotBeforeUpdate=_}break;case 3:var C=e.stateNode.containerInfo;C.nodeType===1?C.textContent="":C.nodeType===9&&C.documentElement&&C.removeChild(C.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(W(163))}}catch(N){Ze(e,e.return,N)}if(t=e.sibling,t!==null){t.return=e.return,X=t;break}X=e.return}return E=__,__=!1,E}function bl(t,e,n){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var i=r=r.next;do{if((i.tag&t)===t){var s=i.destroy;i.destroy=void 0,s!==void 0&&Ip(e,n,s)}i=i.next}while(i!==r)}}function Qh(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var r=n.create;n.destroy=r()}n=n.next}while(n!==e)}}function Sp(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function zE(t){var e=t.alternate;e!==null&&(t.alternate=null,zE(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[or],delete e[jl],delete e[dp],delete e[LA],delete e[NA])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function BE(t){return t.tag===5||t.tag===3||t.tag===4}function w_(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||BE(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function Ap(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=Zc));else if(r!==4&&(t=t.child,t!==null))for(Ap(t,e,n),t=t.sibling;t!==null;)Ap(t,e,n),t=t.sibling}function xp(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(r!==4&&(t=t.child,t!==null))for(xp(t,e,n),t=t.sibling;t!==null;)xp(t,e,n),t=t.sibling}var At=null,jn=!1;function oi(t,e,n){for(n=n.child;n!==null;)HE(t,e,n),n=n.sibling}function HE(t,e,n){if(ar&&typeof ar.onCommitFiberUnmount=="function")try{ar.onCommitFiberUnmount(jh,n)}catch{}switch(n.tag){case 5:Ft||So(n,e);case 6:var r=At,i=jn;At=null,oi(t,e,n),At=r,jn=i,At!==null&&(jn?(t=At,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):At.removeChild(n.stateNode));break;case 18:At!==null&&(jn?(t=At,n=n.stateNode,t.nodeType===8?uf(t.parentNode,n):t.nodeType===1&&uf(t,n),Ml(t)):uf(At,n.stateNode));break;case 4:r=At,i=jn,At=n.stateNode.containerInfo,jn=!0,oi(t,e,n),At=r,jn=i;break;case 0:case 11:case 14:case 15:if(!Ft&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){i=r=r.next;do{var s=i,o=s.destroy;s=s.tag,o!==void 0&&(s&2||s&4)&&Ip(n,e,o),i=i.next}while(i!==r)}oi(t,e,n);break;case 1:if(!Ft&&(So(n,e),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(a){Ze(n,e,a)}oi(t,e,n);break;case 21:oi(t,e,n);break;case 22:n.mode&1?(Ft=(r=Ft)||n.memoizedState!==null,oi(t,e,n),Ft=r):oi(t,e,n);break;default:oi(t,e,n)}}function E_(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new XA),e.forEach(function(r){var i=ox.bind(null,t,r);n.has(r)||(n.add(r),r.then(i,i))})}}function Un(t,e){var n=e.deletions;if(n!==null)for(var r=0;r<n.length;r++){var i=n[r];try{var s=t,o=e,a=o;e:for(;a!==null;){switch(a.tag){case 5:At=a.stateNode,jn=!1;break e;case 3:At=a.stateNode.containerInfo,jn=!0;break e;case 4:At=a.stateNode.containerInfo,jn=!0;break e}a=a.return}if(At===null)throw Error(W(160));HE(s,o,i),At=null,jn=!1;var l=i.alternate;l!==null&&(l.return=null),i.return=null}catch(c){Ze(i,e,c)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)WE(e,t),e=e.sibling}function WE(t,e){var n=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(Un(e,t),er(t),r&4){try{bl(3,t,t.return),Qh(3,t)}catch(S){Ze(t,t.return,S)}try{bl(5,t,t.return)}catch(S){Ze(t,t.return,S)}}break;case 1:Un(e,t),er(t),r&512&&n!==null&&So(n,n.return);break;case 5:if(Un(e,t),er(t),r&512&&n!==null&&So(n,n.return),t.flags&32){var i=t.stateNode;try{Ol(i,"")}catch(S){Ze(t,t.return,S)}}if(r&4&&(i=t.stateNode,i!=null)){var s=t.memoizedProps,o=n!==null?n.memoizedProps:s,a=t.type,l=t.updateQueue;if(t.updateQueue=null,l!==null)try{a==="input"&&s.type==="radio"&&s.name!=null&&f1(i,s),Jf(a,o);var c=Jf(a,s);for(o=0;o<l.length;o+=2){var h=l[o],f=l[o+1];h==="style"?v1(i,f):h==="dangerouslySetInnerHTML"?g1(i,f):h==="children"?Ol(i,f):Tm(i,h,f,c)}switch(a){case"input":Gf(i,s);break;case"textarea":p1(i,s);break;case"select":var p=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!s.multiple;var w=s.value;w!=null?Ro(i,!!s.multiple,w,!1):p!==!!s.multiple&&(s.defaultValue!=null?Ro(i,!!s.multiple,s.defaultValue,!0):Ro(i,!!s.multiple,s.multiple?[]:"",!1))}i[jl]=s}catch(S){Ze(t,t.return,S)}}break;case 6:if(Un(e,t),er(t),r&4){if(t.stateNode===null)throw Error(W(162));i=t.stateNode,s=t.memoizedProps;try{i.nodeValue=s}catch(S){Ze(t,t.return,S)}}break;case 3:if(Un(e,t),er(t),r&4&&n!==null&&n.memoizedState.isDehydrated)try{Ml(e.containerInfo)}catch(S){Ze(t,t.return,S)}break;case 4:Un(e,t),er(t);break;case 13:Un(e,t),er(t),i=t.child,i.flags&8192&&(s=i.memoizedState!==null,i.stateNode.isHidden=s,!s||i.alternate!==null&&i.alternate.memoizedState!==null||(ng=rt())),r&4&&E_(t);break;case 22:if(h=n!==null&&n.memoizedState!==null,t.mode&1?(Ft=(c=Ft)||h,Un(e,t),Ft=c):Un(e,t),er(t),r&8192){if(c=t.memoizedState!==null,(t.stateNode.isHidden=c)&&!h&&t.mode&1)for(X=t,h=t.child;h!==null;){for(f=X=h;X!==null;){switch(p=X,w=p.child,p.tag){case 0:case 11:case 14:case 15:bl(4,p,p.return);break;case 1:So(p,p.return);var E=p.stateNode;if(typeof E.componentWillUnmount=="function"){r=p,n=p.return;try{e=r,E.props=e.memoizedProps,E.state=e.memoizedState,E.componentWillUnmount()}catch(S){Ze(r,n,S)}}break;case 5:So(p,p.return);break;case 22:if(p.memoizedState!==null){T_(f);continue}}w!==null?(w.return=p,X=w):T_(f)}h=h.sibling}e:for(h=null,f=t;;){if(f.tag===5){if(h===null){h=f;try{i=f.stateNode,c?(s=i.style,typeof s.setProperty=="function"?s.setProperty("display","none","important"):s.display="none"):(a=f.stateNode,l=f.memoizedProps.style,o=l!=null&&l.hasOwnProperty("display")?l.display:null,a.style.display=y1("display",o))}catch(S){Ze(t,t.return,S)}}}else if(f.tag===6){if(h===null)try{f.stateNode.nodeValue=c?"":f.memoizedProps}catch(S){Ze(t,t.return,S)}}else if((f.tag!==22&&f.tag!==23||f.memoizedState===null||f===t)&&f.child!==null){f.child.return=f,f=f.child;continue}if(f===t)break e;for(;f.sibling===null;){if(f.return===null||f.return===t)break e;h===f&&(h=null),f=f.return}h===f&&(h=null),f.sibling.return=f.return,f=f.sibling}}break;case 19:Un(e,t),er(t),r&4&&E_(t);break;case 21:break;default:Un(e,t),er(t)}}function er(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(BE(n)){var r=n;break e}n=n.return}throw Error(W(160))}switch(r.tag){case 5:var i=r.stateNode;r.flags&32&&(Ol(i,""),r.flags&=-33);var s=w_(t);xp(t,s,i);break;case 3:case 4:var o=r.stateNode.containerInfo,a=w_(t);Ap(t,a,o);break;default:throw Error(W(161))}}catch(l){Ze(t,t.return,l)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function JA(t,e,n){X=t,qE(t)}function qE(t,e,n){for(var r=(t.mode&1)!==0;X!==null;){var i=X,s=i.child;if(i.tag===22&&r){var o=i.memoizedState!==null||ac;if(!o){var a=i.alternate,l=a!==null&&a.memoizedState!==null||Ft;a=ac;var c=Ft;if(ac=o,(Ft=l)&&!c)for(X=i;X!==null;)o=X,l=o.child,o.tag===22&&o.memoizedState!==null?C_(i):l!==null?(l.return=o,X=l):C_(i);for(;s!==null;)X=s,qE(s),s=s.sibling;X=i,ac=a,Ft=c}b_(t)}else i.subtreeFlags&8772&&s!==null?(s.return=i,X=s):b_(t)}}function b_(t){for(;X!==null;){var e=X;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:Ft||Qh(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!Ft)if(n===null)r.componentDidMount();else{var i=e.elementType===e.type?n.memoizedProps:Fn(e.type,n.memoizedProps);r.componentDidUpdate(i,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var s=e.updateQueue;s!==null&&o_(e,s,r);break;case 3:var o=e.updateQueue;if(o!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}o_(e,o,n)}break;case 5:var a=e.stateNode;if(n===null&&e.flags&4){n=a;var l=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":l.autoFocus&&n.focus();break;case"img":l.src&&(n.src=l.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var c=e.alternate;if(c!==null){var h=c.memoizedState;if(h!==null){var f=h.dehydrated;f!==null&&Ml(f)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(W(163))}Ft||e.flags&512&&Sp(e)}catch(p){Ze(e,e.return,p)}}if(e===t){X=null;break}if(n=e.sibling,n!==null){n.return=e.return,X=n;break}X=e.return}}function T_(t){for(;X!==null;){var e=X;if(e===t){X=null;break}var n=e.sibling;if(n!==null){n.return=e.return,X=n;break}X=e.return}}function C_(t){for(;X!==null;){var e=X;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{Qh(4,e)}catch(l){Ze(e,n,l)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var i=e.return;try{r.componentDidMount()}catch(l){Ze(e,i,l)}}var s=e.return;try{Sp(e)}catch(l){Ze(e,s,l)}break;case 5:var o=e.return;try{Sp(e)}catch(l){Ze(e,o,l)}}}catch(l){Ze(e,e.return,l)}if(e===t){X=null;break}var a=e.sibling;if(a!==null){a.return=e.return,X=a;break}X=e.return}}var ZA=Math.ceil,ch=Kr.ReactCurrentDispatcher,eg=Kr.ReactCurrentOwner,kn=Kr.ReactCurrentBatchConfig,Ce=0,vt=null,ut=null,Pt=0,dn=0,Ao=Ki(0),pt=0,Gl=null,Ps=0,Xh=0,tg=0,Tl=null,nn=null,ng=0,Ko=1/0,Ir=null,hh=!1,kp=null,xi=null,lc=!1,wi=null,dh=0,Cl=0,Pp=null,Rc=-1,Oc=0;function Xt(){return Ce&6?rt():Rc!==-1?Rc:Rc=rt()}function ki(t){return t.mode&1?Ce&2&&Pt!==0?Pt&-Pt:MA.transition!==null?(Oc===0&&(Oc=P1()),Oc):(t=ke,t!==0||(t=window.event,t=t===void 0?16:V1(t.type)),t):1}function Gn(t,e,n,r){if(50<Cl)throw Cl=0,Pp=null,Error(W(185));lu(t,n,r),(!(Ce&2)||t!==vt)&&(t===vt&&(!(Ce&2)&&(Xh|=n),pt===4&&mi(t,Pt)),ln(t,r),n===1&&Ce===0&&!(e.mode&1)&&(Ko=rt()+500,qh&&Qi()))}function ln(t,e){var n=t.callbackNode;M2(t,e);var r=Qc(t,t===vt?Pt:0);if(r===0)n!==null&&Lv(n),t.callbackNode=null,t.callbackPriority=0;else if(e=r&-r,t.callbackPriority!==e){if(n!=null&&Lv(n),e===1)t.tag===0?DA(I_.bind(null,t)):nE(I_.bind(null,t)),RA(function(){!(Ce&6)&&Qi()}),n=null;else{switch(R1(r)){case 1:n=xm;break;case 4:n=x1;break;case 16:n=Kc;break;case 536870912:n=k1;break;default:n=Kc}n=eb(n,GE.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function GE(t,e){if(Rc=-1,Oc=0,Ce&6)throw Error(W(327));var n=t.callbackNode;if(Mo()&&t.callbackNode!==n)return null;var r=Qc(t,t===vt?Pt:0);if(r===0)return null;if(r&30||r&t.expiredLanes||e)e=fh(t,r);else{e=r;var i=Ce;Ce|=2;var s=QE();(vt!==t||Pt!==e)&&(Ir=null,Ko=rt()+500,bs(t,e));do try{nx();break}catch(a){KE(t,a)}while(!0);jm(),ch.current=s,Ce=i,ut!==null?e=0:(vt=null,Pt=0,e=pt)}if(e!==0){if(e===2&&(i=rp(t),i!==0&&(r=i,e=Rp(t,i))),e===1)throw n=Gl,bs(t,0),mi(t,r),ln(t,rt()),n;if(e===6)mi(t,r);else{if(i=t.current.alternate,!(r&30)&&!ex(i)&&(e=fh(t,r),e===2&&(s=rp(t),s!==0&&(r=s,e=Rp(t,s))),e===1))throw n=Gl,bs(t,0),mi(t,r),ln(t,rt()),n;switch(t.finishedWork=i,t.finishedLanes=r,e){case 0:case 1:throw Error(W(345));case 2:ds(t,nn,Ir);break;case 3:if(mi(t,r),(r&130023424)===r&&(e=ng+500-rt(),10<e)){if(Qc(t,0)!==0)break;if(i=t.suspendedLanes,(i&r)!==r){Xt(),t.pingedLanes|=t.suspendedLanes&i;break}t.timeoutHandle=hp(ds.bind(null,t,nn,Ir),e);break}ds(t,nn,Ir);break;case 4:if(mi(t,r),(r&4194240)===r)break;for(e=t.eventTimes,i=-1;0<r;){var o=31-qn(r);s=1<<o,o=e[o],o>i&&(i=o),r&=~s}if(r=i,r=rt()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*ZA(r/1960))-r,10<r){t.timeoutHandle=hp(ds.bind(null,t,nn,Ir),r);break}ds(t,nn,Ir);break;case 5:ds(t,nn,Ir);break;default:throw Error(W(329))}}}return ln(t,rt()),t.callbackNode===n?GE.bind(null,t):null}function Rp(t,e){var n=Tl;return t.current.memoizedState.isDehydrated&&(bs(t,e).flags|=256),t=fh(t,e),t!==2&&(e=nn,nn=n,e!==null&&Op(e)),t}function Op(t){nn===null?nn=t:nn.push.apply(nn,t)}function ex(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var i=n[r],s=i.getSnapshot;i=i.value;try{if(!Xn(s(),i))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function mi(t,e){for(e&=~tg,e&=~Xh,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-qn(e),r=1<<n;t[n]=-1,e&=~r}}function I_(t){if(Ce&6)throw Error(W(327));Mo();var e=Qc(t,0);if(!(e&1))return ln(t,rt()),null;var n=fh(t,e);if(t.tag!==0&&n===2){var r=rp(t);r!==0&&(e=r,n=Rp(t,r))}if(n===1)throw n=Gl,bs(t,0),mi(t,e),ln(t,rt()),n;if(n===6)throw Error(W(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,ds(t,nn,Ir),ln(t,rt()),null}function rg(t,e){var n=Ce;Ce|=1;try{return t(e)}finally{Ce=n,Ce===0&&(Ko=rt()+500,qh&&Qi())}}function Rs(t){wi!==null&&wi.tag===0&&!(Ce&6)&&Mo();var e=Ce;Ce|=1;var n=kn.transition,r=ke;try{if(kn.transition=null,ke=1,t)return t()}finally{ke=r,kn.transition=n,Ce=e,!(Ce&6)&&Qi()}}function ig(){dn=Ao.current,je(Ao)}function bs(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,PA(n)),ut!==null)for(n=ut.return;n!==null;){var r=n;switch(Um(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&eh();break;case 3:qo(),je(on),je(zt),Gm();break;case 5:qm(r);break;case 4:qo();break;case 13:je(Ge);break;case 19:je(Ge);break;case 10:zm(r.type._context);break;case 22:case 23:ig()}n=n.return}if(vt=t,ut=t=Pi(t.current,null),Pt=dn=e,pt=0,Gl=null,tg=Xh=Ps=0,nn=Tl=null,ms!==null){for(e=0;e<ms.length;e++)if(n=ms[e],r=n.interleaved,r!==null){n.interleaved=null;var i=r.next,s=n.pending;if(s!==null){var o=s.next;s.next=i,r.next=o}n.pending=r}ms=null}return t}function KE(t,e){do{var n=ut;try{if(jm(),xc.current=uh,lh){for(var r=Qe.memoizedState;r!==null;){var i=r.queue;i!==null&&(i.pending=null),r=r.next}lh=!1}if(ks=0,yt=ft=Qe=null,El=!1,Hl=0,eg.current=null,n===null||n.return===null){pt=1,Gl=e,ut=null;break}e:{var s=t,o=n.return,a=n,l=e;if(e=Pt,a.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){var c=l,h=a,f=h.tag;if(!(h.mode&1)&&(f===0||f===11||f===15)){var p=h.alternate;p?(h.updateQueue=p.updateQueue,h.memoizedState=p.memoizedState,h.lanes=p.lanes):(h.updateQueue=null,h.memoizedState=null)}var w=d_(o);if(w!==null){w.flags&=-257,f_(w,o,a,s,e),w.mode&1&&h_(s,c,e),e=w,l=c;var E=e.updateQueue;if(E===null){var S=new Set;S.add(l),e.updateQueue=S}else E.add(l);break e}else{if(!(e&1)){h_(s,c,e),sg();break e}l=Error(W(426))}}else if(He&&a.mode&1){var P=d_(o);if(P!==null){!(P.flags&65536)&&(P.flags|=256),f_(P,o,a,s,e),$m(Go(l,a));break e}}s=l=Go(l,a),pt!==4&&(pt=2),Tl===null?Tl=[s]:Tl.push(s),s=o;do{switch(s.tag){case 3:s.flags|=65536,e&=-e,s.lanes|=e;var T=RE(s,l,e);s_(s,T);break e;case 1:a=l;var _=s.type,C=s.stateNode;if(!(s.flags&128)&&(typeof _.getDerivedStateFromError=="function"||C!==null&&typeof C.componentDidCatch=="function"&&(xi===null||!xi.has(C)))){s.flags|=65536,e&=-e,s.lanes|=e;var N=OE(s,a,e);s_(s,N);break e}}s=s.return}while(s!==null)}YE(n)}catch(F){e=F,ut===n&&n!==null&&(ut=n=n.return);continue}break}while(!0)}function QE(){var t=ch.current;return ch.current=uh,t===null?uh:t}function sg(){(pt===0||pt===3||pt===2)&&(pt=4),vt===null||!(Ps&268435455)&&!(Xh&268435455)||mi(vt,Pt)}function fh(t,e){var n=Ce;Ce|=2;var r=QE();(vt!==t||Pt!==e)&&(Ir=null,bs(t,e));do try{tx();break}catch(i){KE(t,i)}while(!0);if(jm(),Ce=n,ch.current=r,ut!==null)throw Error(W(261));return vt=null,Pt=0,pt}function tx(){for(;ut!==null;)XE(ut)}function nx(){for(;ut!==null&&!A2();)XE(ut)}function XE(t){var e=ZE(t.alternate,t,dn);t.memoizedProps=t.pendingProps,e===null?YE(t):ut=e,eg.current=null}function YE(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=QA(n,e),n!==null){n.flags&=32767,ut=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{pt=6,ut=null;return}}else if(n=KA(n,e,dn),n!==null){ut=n;return}if(e=e.sibling,e!==null){ut=e;return}ut=e=t}while(e!==null);pt===0&&(pt=5)}function ds(t,e,n){var r=ke,i=kn.transition;try{kn.transition=null,ke=1,rx(t,e,n,r)}finally{kn.transition=i,ke=r}return null}function rx(t,e,n,r){do Mo();while(wi!==null);if(Ce&6)throw Error(W(327));n=t.finishedWork;var i=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(W(177));t.callbackNode=null,t.callbackPriority=0;var s=n.lanes|n.childLanes;if(V2(t,s),t===vt&&(ut=vt=null,Pt=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||lc||(lc=!0,eb(Kc,function(){return Mo(),null})),s=(n.flags&15990)!==0,n.subtreeFlags&15990||s){s=kn.transition,kn.transition=null;var o=ke;ke=1;var a=Ce;Ce|=4,eg.current=null,YA(t,n),WE(n,t),TA(up),Xc=!!lp,up=lp=null,t.current=n,JA(n),x2(),Ce=a,ke=o,kn.transition=s}else t.current=n;if(lc&&(lc=!1,wi=t,dh=i),s=t.pendingLanes,s===0&&(xi=null),R2(n.stateNode),ln(t,rt()),e!==null)for(r=t.onRecoverableError,n=0;n<e.length;n++)i=e[n],r(i.value,{componentStack:i.stack,digest:i.digest});if(hh)throw hh=!1,t=kp,kp=null,t;return dh&1&&t.tag!==0&&Mo(),s=t.pendingLanes,s&1?t===Pp?Cl++:(Cl=0,Pp=t):Cl=0,Qi(),null}function Mo(){if(wi!==null){var t=R1(dh),e=kn.transition,n=ke;try{if(kn.transition=null,ke=16>t?16:t,wi===null)var r=!1;else{if(t=wi,wi=null,dh=0,Ce&6)throw Error(W(331));var i=Ce;for(Ce|=4,X=t.current;X!==null;){var s=X,o=s.child;if(X.flags&16){var a=s.deletions;if(a!==null){for(var l=0;l<a.length;l++){var c=a[l];for(X=c;X!==null;){var h=X;switch(h.tag){case 0:case 11:case 15:bl(8,h,s)}var f=h.child;if(f!==null)f.return=h,X=f;else for(;X!==null;){h=X;var p=h.sibling,w=h.return;if(zE(h),h===c){X=null;break}if(p!==null){p.return=w,X=p;break}X=w}}}var E=s.alternate;if(E!==null){var S=E.child;if(S!==null){E.child=null;do{var P=S.sibling;S.sibling=null,S=P}while(S!==null)}}X=s}}if(s.subtreeFlags&2064&&o!==null)o.return=s,X=o;else e:for(;X!==null;){if(s=X,s.flags&2048)switch(s.tag){case 0:case 11:case 15:bl(9,s,s.return)}var T=s.sibling;if(T!==null){T.return=s.return,X=T;break e}X=s.return}}var _=t.current;for(X=_;X!==null;){o=X;var C=o.child;if(o.subtreeFlags&2064&&C!==null)C.return=o,X=C;else e:for(o=_;X!==null;){if(a=X,a.flags&2048)try{switch(a.tag){case 0:case 11:case 15:Qh(9,a)}}catch(F){Ze(a,a.return,F)}if(a===o){X=null;break e}var N=a.sibling;if(N!==null){N.return=a.return,X=N;break e}X=a.return}}if(Ce=i,Qi(),ar&&typeof ar.onPostCommitFiberRoot=="function")try{ar.onPostCommitFiberRoot(jh,t)}catch{}r=!0}return r}finally{ke=n,kn.transition=e}}return!1}function S_(t,e,n){e=Go(n,e),e=RE(t,e,1),t=Ai(t,e,1),e=Xt(),t!==null&&(lu(t,1,e),ln(t,e))}function Ze(t,e,n){if(t.tag===3)S_(t,t,n);else for(;e!==null;){if(e.tag===3){S_(e,t,n);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(xi===null||!xi.has(r))){t=Go(n,t),t=OE(e,t,1),e=Ai(e,t,1),t=Xt(),e!==null&&(lu(e,1,t),ln(e,t));break}}e=e.return}}function ix(t,e,n){var r=t.pingCache;r!==null&&r.delete(e),e=Xt(),t.pingedLanes|=t.suspendedLanes&n,vt===t&&(Pt&n)===n&&(pt===4||pt===3&&(Pt&130023424)===Pt&&500>rt()-ng?bs(t,0):tg|=n),ln(t,e)}function JE(t,e){e===0&&(t.mode&1?(e=Ju,Ju<<=1,!(Ju&130023424)&&(Ju=4194304)):e=1);var n=Xt();t=jr(t,e),t!==null&&(lu(t,e,n),ln(t,n))}function sx(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),JE(t,n)}function ox(t,e){var n=0;switch(t.tag){case 13:var r=t.stateNode,i=t.memoizedState;i!==null&&(n=i.retryLane);break;case 19:r=t.stateNode;break;default:throw Error(W(314))}r!==null&&r.delete(e),JE(t,n)}var ZE;ZE=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||on.current)sn=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return sn=!1,GA(t,e,n);sn=!!(t.flags&131072)}else sn=!1,He&&e.flags&1048576&&rE(e,rh,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;Pc(t,e),t=e.pendingProps;var i=Bo(e,zt.current);Do(e,n),i=Qm(null,e,r,t,i,n);var s=Xm();return e.flags|=1,typeof i=="object"&&i!==null&&typeof i.render=="function"&&i.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,an(r)?(s=!0,th(e)):s=!1,e.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,Hm(e),i.updater=Kh,e.stateNode=i,i._reactInternals=e,vp(e,r,t,n),e=Ep(null,e,r,!0,s,n)):(e.tag=0,He&&s&&Vm(e),Gt(null,e,i,n),e=e.child),e;case 16:r=e.elementType;e:{switch(Pc(t,e),t=e.pendingProps,i=r._init,r=i(r._payload),e.type=r,i=e.tag=lx(r),t=Fn(r,t),i){case 0:e=wp(null,e,r,t,n);break e;case 1:e=g_(null,e,r,t,n);break e;case 11:e=p_(null,e,r,t,n);break e;case 14:e=m_(null,e,r,Fn(r.type,t),n);break e}throw Error(W(306,r,""))}return e;case 0:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Fn(r,i),wp(t,e,r,i,n);case 1:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Fn(r,i),g_(t,e,r,i,n);case 3:e:{if(ME(e),t===null)throw Error(W(387));r=e.pendingProps,s=e.memoizedState,i=s.element,uE(t,e),oh(e,r,null,n);var o=e.memoizedState;if(r=o.element,s.isDehydrated)if(s={element:r,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=s,e.memoizedState=s,e.flags&256){i=Go(Error(W(423)),e),e=y_(t,e,r,n,i);break e}else if(r!==i){i=Go(Error(W(424)),e),e=y_(t,e,r,n,i);break e}else for(fn=Si(e.stateNode.containerInfo.firstChild),pn=e,He=!0,Bn=null,n=aE(e,null,r,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(Ho(),r===i){e=zr(t,e,n);break e}Gt(t,e,r,n)}e=e.child}return e;case 5:return cE(e),t===null&&mp(e),r=e.type,i=e.pendingProps,s=t!==null?t.memoizedProps:null,o=i.children,cp(r,i)?o=null:s!==null&&cp(r,s)&&(e.flags|=32),DE(t,e),Gt(t,e,o,n),e.child;case 6:return t===null&&mp(e),null;case 13:return VE(t,e,n);case 4:return Wm(e,e.stateNode.containerInfo),r=e.pendingProps,t===null?e.child=Wo(e,null,r,n):Gt(t,e,r,n),e.child;case 11:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Fn(r,i),p_(t,e,r,i,n);case 7:return Gt(t,e,e.pendingProps,n),e.child;case 8:return Gt(t,e,e.pendingProps.children,n),e.child;case 12:return Gt(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(r=e.type._context,i=e.pendingProps,s=e.memoizedProps,o=i.value,Ne(ih,r._currentValue),r._currentValue=o,s!==null)if(Xn(s.value,o)){if(s.children===i.children&&!on.current){e=zr(t,e,n);break e}}else for(s=e.child,s!==null&&(s.return=e);s!==null;){var a=s.dependencies;if(a!==null){o=s.child;for(var l=a.firstContext;l!==null;){if(l.context===r){if(s.tag===1){l=Dr(-1,n&-n),l.tag=2;var c=s.updateQueue;if(c!==null){c=c.shared;var h=c.pending;h===null?l.next=l:(l.next=h.next,h.next=l),c.pending=l}}s.lanes|=n,l=s.alternate,l!==null&&(l.lanes|=n),gp(s.return,n,e),a.lanes|=n;break}l=l.next}}else if(s.tag===10)o=s.type===e.type?null:s.child;else if(s.tag===18){if(o=s.return,o===null)throw Error(W(341));o.lanes|=n,a=o.alternate,a!==null&&(a.lanes|=n),gp(o,n,e),o=s.sibling}else o=s.child;if(o!==null)o.return=s;else for(o=s;o!==null;){if(o===e){o=null;break}if(s=o.sibling,s!==null){s.return=o.return,o=s;break}o=o.return}s=o}Gt(t,e,i.children,n),e=e.child}return e;case 9:return i=e.type,r=e.pendingProps.children,Do(e,n),i=Rn(i),r=r(i),e.flags|=1,Gt(t,e,r,n),e.child;case 14:return r=e.type,i=Fn(r,e.pendingProps),i=Fn(r.type,i),m_(t,e,r,i,n);case 15:return LE(t,e,e.type,e.pendingProps,n);case 17:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Fn(r,i),Pc(t,e),e.tag=1,an(r)?(t=!0,th(e)):t=!1,Do(e,n),PE(e,r,i),vp(e,r,i,n),Ep(null,e,r,!0,t,n);case 19:return UE(t,e,n);case 22:return NE(t,e,n)}throw Error(W(156,e.tag))};function eb(t,e){return A1(t,e)}function ax(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function xn(t,e,n,r){return new ax(t,e,n,r)}function og(t){return t=t.prototype,!(!t||!t.isReactComponent)}function lx(t){if(typeof t=="function")return og(t)?1:0;if(t!=null){if(t=t.$$typeof,t===Im)return 11;if(t===Sm)return 14}return 2}function Pi(t,e){var n=t.alternate;return n===null?(n=xn(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function Lc(t,e,n,r,i,s){var o=2;if(r=t,typeof t=="function")og(t)&&(o=1);else if(typeof t=="string")o=5;else e:switch(t){case yo:return Ts(n.children,i,s,e);case Cm:o=8,i|=8;break;case zf:return t=xn(12,n,e,i|2),t.elementType=zf,t.lanes=s,t;case Bf:return t=xn(13,n,e,i),t.elementType=Bf,t.lanes=s,t;case Hf:return t=xn(19,n,e,i),t.elementType=Hf,t.lanes=s,t;case c1:return Yh(n,i,s,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case l1:o=10;break e;case u1:o=9;break e;case Im:o=11;break e;case Sm:o=14;break e;case di:o=16,r=null;break e}throw Error(W(130,t==null?t:typeof t,""))}return e=xn(o,n,e,i),e.elementType=t,e.type=r,e.lanes=s,e}function Ts(t,e,n,r){return t=xn(7,t,r,e),t.lanes=n,t}function Yh(t,e,n,r){return t=xn(22,t,r,e),t.elementType=c1,t.lanes=n,t.stateNode={isHidden:!1},t}function yf(t,e,n){return t=xn(6,t,null,e),t.lanes=n,t}function vf(t,e,n){return e=xn(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function ux(t,e,n,r,i){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Yd(0),this.expirationTimes=Yd(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Yd(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function ag(t,e,n,r,i,s,o,a,l){return t=new ux(t,e,n,a,l),e===1?(e=1,s===!0&&(e|=8)):e=0,s=xn(3,null,null,e),t.current=s,s.stateNode=t,s.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Hm(s),t}function cx(t,e,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:go,key:r==null?null:""+r,children:t,containerInfo:e,implementation:n}}function tb(t){if(!t)return ji;t=t._reactInternals;e:{if(zs(t)!==t||t.tag!==1)throw Error(W(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(an(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(W(171))}if(t.tag===1){var n=t.type;if(an(n))return tE(t,n,e)}return e}function nb(t,e,n,r,i,s,o,a,l){return t=ag(n,r,!0,t,i,s,o,a,l),t.context=tb(null),n=t.current,r=Xt(),i=ki(n),s=Dr(r,i),s.callback=e??null,Ai(n,s,i),t.current.lanes=i,lu(t,i,r),ln(t,r),t}function Jh(t,e,n,r){var i=e.current,s=Xt(),o=ki(i);return n=tb(n),e.context===null?e.context=n:e.pendingContext=n,e=Dr(s,o),e.payload={element:t},r=r===void 0?null:r,r!==null&&(e.callback=r),t=Ai(i,e,o),t!==null&&(Gn(t,i,o,s),Ac(t,i,o)),o}function ph(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function A_(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function lg(t,e){A_(t,e),(t=t.alternate)&&A_(t,e)}function hx(){return null}var rb=typeof reportError=="function"?reportError:function(t){console.error(t)};function ug(t){this._internalRoot=t}Zh.prototype.render=ug.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(W(409));Jh(t,e,null,null)};Zh.prototype.unmount=ug.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;Rs(function(){Jh(null,t,null,null)}),e[Fr]=null}};function Zh(t){this._internalRoot=t}Zh.prototype.unstable_scheduleHydration=function(t){if(t){var e=N1();t={blockedOn:null,target:t,priority:e};for(var n=0;n<pi.length&&e!==0&&e<pi[n].priority;n++);pi.splice(n,0,t),n===0&&M1(t)}};function cg(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function ed(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function x_(){}function dx(t,e,n,r,i){if(i){if(typeof r=="function"){var s=r;r=function(){var c=ph(o);s.call(c)}}var o=nb(e,r,t,0,null,!1,!1,"",x_);return t._reactRootContainer=o,t[Fr]=o.current,$l(t.nodeType===8?t.parentNode:t),Rs(),o}for(;i=t.lastChild;)t.removeChild(i);if(typeof r=="function"){var a=r;r=function(){var c=ph(l);a.call(c)}}var l=ag(t,0,!1,null,null,!1,!1,"",x_);return t._reactRootContainer=l,t[Fr]=l.current,$l(t.nodeType===8?t.parentNode:t),Rs(function(){Jh(e,l,n,r)}),l}function td(t,e,n,r,i){var s=n._reactRootContainer;if(s){var o=s;if(typeof i=="function"){var a=i;i=function(){var l=ph(o);a.call(l)}}Jh(e,o,t,i)}else o=dx(n,e,t,i,r);return ph(o)}O1=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=ol(e.pendingLanes);n!==0&&(km(e,n|1),ln(e,rt()),!(Ce&6)&&(Ko=rt()+500,Qi()))}break;case 13:Rs(function(){var r=jr(t,1);if(r!==null){var i=Xt();Gn(r,t,1,i)}}),lg(t,1)}};Pm=function(t){if(t.tag===13){var e=jr(t,134217728);if(e!==null){var n=Xt();Gn(e,t,134217728,n)}lg(t,134217728)}};L1=function(t){if(t.tag===13){var e=ki(t),n=jr(t,e);if(n!==null){var r=Xt();Gn(n,t,e,r)}lg(t,e)}};N1=function(){return ke};D1=function(t,e){var n=ke;try{return ke=t,e()}finally{ke=n}};ep=function(t,e,n){switch(e){case"input":if(Gf(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var i=Wh(r);if(!i)throw Error(W(90));d1(r),Gf(r,i)}}}break;case"textarea":p1(t,n);break;case"select":e=n.value,e!=null&&Ro(t,!!n.multiple,e,!1)}};E1=rg;b1=Rs;var fx={usingClientEntryPoint:!1,Events:[cu,Eo,Wh,_1,w1,rg]},Ga={findFiberByHostInstance:ps,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},px={bundleType:Ga.bundleType,version:Ga.version,rendererPackageName:Ga.rendererPackageName,rendererConfig:Ga.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Kr.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=I1(t),t===null?null:t.stateNode},findFiberByHostInstance:Ga.findFiberByHostInstance||hx,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var uc=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!uc.isDisabled&&uc.supportsFiber)try{jh=uc.inject(px),ar=uc}catch{}}gn.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=fx;gn.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!cg(e))throw Error(W(200));return cx(t,e,null,n)};gn.createRoot=function(t,e){if(!cg(t))throw Error(W(299));var n=!1,r="",i=rb;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(i=e.onRecoverableError)),e=ag(t,1,!1,null,null,n,!1,r,i),t[Fr]=e.current,$l(t.nodeType===8?t.parentNode:t),new ug(e)};gn.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(W(188)):(t=Object.keys(t).join(","),Error(W(268,t)));return t=I1(e),t=t===null?null:t.stateNode,t};gn.flushSync=function(t){return Rs(t)};gn.hydrate=function(t,e,n){if(!ed(e))throw Error(W(200));return td(null,t,e,!0,n)};gn.hydrateRoot=function(t,e,n){if(!cg(t))throw Error(W(405));var r=n!=null&&n.hydratedSources||null,i=!1,s="",o=rb;if(n!=null&&(n.unstable_strictMode===!0&&(i=!0),n.identifierPrefix!==void 0&&(s=n.identifierPrefix),n.onRecoverableError!==void 0&&(o=n.onRecoverableError)),e=nb(e,null,t,1,n??null,i,!1,s,o),t[Fr]=e.current,$l(t),r)for(t=0;t<r.length;t++)n=r[t],i=n._getVersion,i=i(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,i]:e.mutableSourceEagerHydrationData.push(n,i);return new Zh(e)};gn.render=function(t,e,n){if(!ed(e))throw Error(W(200));return td(null,t,e,!1,n)};gn.unmountComponentAtNode=function(t){if(!ed(t))throw Error(W(40));return t._reactRootContainer?(Rs(function(){td(null,null,t,!1,function(){t._reactRootContainer=null,t[Fr]=null})}),!0):!1};gn.unstable_batchedUpdates=rg;gn.unstable_renderSubtreeIntoContainer=function(t,e,n,r){if(!ed(n))throw Error(W(200));if(t==null||t._reactInternals===void 0)throw Error(W(38));return td(t,e,n,!1,r)};gn.version="18.3.1-next-f1338f8080-20240426";function ib(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(ib)}catch(t){console.error(t)}}ib(),i1.exports=gn;var hg=i1.exports;const mx=qw(hg),gx=Ww({__proto__:null,default:mx},[hg]);var k_=hg;Ff.createRoot=k_.createRoot,Ff.hydrateRoot=k_.hydrateRoot;/**
 * @remix-run/router v1.16.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function qe(){return qe=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},qe.apply(this,arguments)}var at;(function(t){t.Pop="POP",t.Push="PUSH",t.Replace="REPLACE"})(at||(at={}));const P_="popstate";function yx(t){t===void 0&&(t={});function e(r,i){let{pathname:s,search:o,hash:a}=r.location;return Kl("",{pathname:s,search:o,hash:a},i.state&&i.state.usr||null,i.state&&i.state.key||"default")}function n(r,i){return typeof i=="string"?i:Os(i)}return _x(e,n,null,t)}function me(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function Qo(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function vx(){return Math.random().toString(36).substr(2,8)}function R_(t,e){return{usr:t.state,key:t.key,idx:e}}function Kl(t,e,n,r){return n===void 0&&(n=null),qe({pathname:typeof t=="string"?t:t.pathname,search:"",hash:""},typeof e=="string"?Xi(e):e,{state:n,key:e&&e.key||r||vx()})}function Os(t){let{pathname:e="/",search:n="",hash:r=""}=t;return n&&n!=="?"&&(e+=n.charAt(0)==="?"?n:"?"+n),r&&r!=="#"&&(e+=r.charAt(0)==="#"?r:"#"+r),e}function Xi(t){let e={};if(t){let n=t.indexOf("#");n>=0&&(e.hash=t.substr(n),t=t.substr(0,n));let r=t.indexOf("?");r>=0&&(e.search=t.substr(r),t=t.substr(0,r)),t&&(e.pathname=t)}return e}function _x(t,e,n,r){r===void 0&&(r={});let{window:i=document.defaultView,v5Compat:s=!1}=r,o=i.history,a=at.Pop,l=null,c=h();c==null&&(c=0,o.replaceState(qe({},o.state,{idx:c}),""));function h(){return(o.state||{idx:null}).idx}function f(){a=at.Pop;let P=h(),T=P==null?null:P-c;c=P,l&&l({action:a,location:S.location,delta:T})}function p(P,T){a=at.Push;let _=Kl(S.location,P,T);c=h()+1;let C=R_(_,c),N=S.createHref(_);try{o.pushState(C,"",N)}catch(F){if(F instanceof DOMException&&F.name==="DataCloneError")throw F;i.location.assign(N)}s&&l&&l({action:a,location:S.location,delta:1})}function w(P,T){a=at.Replace;let _=Kl(S.location,P,T);c=h();let C=R_(_,c),N=S.createHref(_);o.replaceState(C,"",N),s&&l&&l({action:a,location:S.location,delta:0})}function E(P){let T=i.location.origin!=="null"?i.location.origin:i.location.href,_=typeof P=="string"?P:Os(P);return _=_.replace(/ $/,"%20"),me(T,"No window.location.(origin|href) available to create URL for href: "+_),new URL(_,T)}let S={get action(){return a},get location(){return t(i,o)},listen(P){if(l)throw new Error("A history only accepts one active listener");return i.addEventListener(P_,f),l=P,()=>{i.removeEventListener(P_,f),l=null}},createHref(P){return e(i,P)},createURL:E,encodeLocation(P){let T=E(P);return{pathname:T.pathname,search:T.search,hash:T.hash}},push:p,replace:w,go(P){return o.go(P)}};return S}var Be;(function(t){t.data="data",t.deferred="deferred",t.redirect="redirect",t.error="error"})(Be||(Be={}));const wx=new Set(["lazy","caseSensitive","path","id","index","children"]);function Ex(t){return t.index===!0}function Lp(t,e,n,r){return n===void 0&&(n=[]),r===void 0&&(r={}),t.map((i,s)=>{let o=[...n,s],a=typeof i.id=="string"?i.id:o.join("-");if(me(i.index!==!0||!i.children,"Cannot specify children on an index route"),me(!r[a],'Found a route id collision on id "'+a+`".  Route id's must be globally unique within Data Router usages`),Ex(i)){let l=qe({},i,e(i),{id:a});return r[a]=l,l}else{let l=qe({},i,e(i),{id:a,children:void 0});return r[a]=l,i.children&&(l.children=Lp(i.children,e,o,r)),l}})}function xo(t,e,n){n===void 0&&(n="/");let r=typeof e=="string"?Xi(e):e,i=da(r.pathname||"/",n);if(i==null)return null;let s=sb(t);Tx(s);let o=null;for(let a=0;o==null&&a<s.length;++a){let l=Dx(i);o=Ox(s[a],l)}return o}function bx(t,e){let{route:n,pathname:r,params:i}=t;return{id:n.id,pathname:r,params:i,data:e[n.id],handle:n.handle}}function sb(t,e,n,r){e===void 0&&(e=[]),n===void 0&&(n=[]),r===void 0&&(r="");let i=(s,o,a)=>{let l={relativePath:a===void 0?s.path||"":a,caseSensitive:s.caseSensitive===!0,childrenIndex:o,route:s};l.relativePath.startsWith("/")&&(me(l.relativePath.startsWith(r),'Absolute route path "'+l.relativePath+'" nested under path '+('"'+r+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),l.relativePath=l.relativePath.slice(r.length));let c=Mr([r,l.relativePath]),h=n.concat(l);s.children&&s.children.length>0&&(me(s.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+c+'".')),sb(s.children,e,h,c)),!(s.path==null&&!s.index)&&e.push({path:c,score:Px(c,s.index),routesMeta:h})};return t.forEach((s,o)=>{var a;if(s.path===""||!((a=s.path)!=null&&a.includes("?")))i(s,o);else for(let l of ob(s.path))i(s,o,l)}),e}function ob(t){let e=t.split("/");if(e.length===0)return[];let[n,...r]=e,i=n.endsWith("?"),s=n.replace(/\?$/,"");if(r.length===0)return i?[s,""]:[s];let o=ob(r.join("/")),a=[];return a.push(...o.map(l=>l===""?s:[s,l].join("/"))),i&&a.push(...o),a.map(l=>t.startsWith("/")&&l===""?"/":l)}function Tx(t){t.sort((e,n)=>e.score!==n.score?n.score-e.score:Rx(e.routesMeta.map(r=>r.childrenIndex),n.routesMeta.map(r=>r.childrenIndex)))}const Cx=/^:[\w-]+$/,Ix=3,Sx=2,Ax=1,xx=10,kx=-2,O_=t=>t==="*";function Px(t,e){let n=t.split("/"),r=n.length;return n.some(O_)&&(r+=kx),e&&(r+=Sx),n.filter(i=>!O_(i)).reduce((i,s)=>i+(Cx.test(s)?Ix:s===""?Ax:xx),r)}function Rx(t,e){return t.length===e.length&&t.slice(0,-1).every((r,i)=>r===e[i])?t[t.length-1]-e[e.length-1]:0}function Ox(t,e){let{routesMeta:n}=t,r={},i="/",s=[];for(let o=0;o<n.length;++o){let a=n[o],l=o===n.length-1,c=i==="/"?e:e.slice(i.length)||"/",h=Lx({path:a.relativePath,caseSensitive:a.caseSensitive,end:l},c);if(!h)return null;Object.assign(r,h.params);let f=a.route;s.push({params:r,pathname:Mr([i,h.pathname]),pathnameBase:Ux(Mr([i,h.pathnameBase])),route:f}),h.pathnameBase!=="/"&&(i=Mr([i,h.pathnameBase]))}return s}function Lx(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[n,r]=Nx(t.path,t.caseSensitive,t.end),i=e.match(n);if(!i)return null;let s=i[0],o=s.replace(/(.)\/+$/,"$1"),a=i.slice(1);return{params:r.reduce((c,h,f)=>{let{paramName:p,isOptional:w}=h;if(p==="*"){let S=a[f]||"";o=s.slice(0,s.length-S.length).replace(/(.)\/+$/,"$1")}const E=a[f];return w&&!E?c[p]=void 0:c[p]=(E||"").replace(/%2F/g,"/"),c},{}),pathname:s,pathnameBase:o,pattern:t}}function Nx(t,e,n){e===void 0&&(e=!1),n===void 0&&(n=!0),Qo(t==="*"||!t.endsWith("*")||t.endsWith("/*"),'Route path "'+t+'" will be treated as if it were '+('"'+t.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+t.replace(/\*$/,"/*")+'".'));let r=[],i="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(o,a,l)=>(r.push({paramName:a,isOptional:l!=null}),l?"/?([^\\/]+)?":"/([^\\/]+)"));return t.endsWith("*")?(r.push({paramName:"*"}),i+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?i+="\\/*$":t!==""&&t!=="/"&&(i+="(?:(?=\\/|$))"),[new RegExp(i,e?void 0:"i"),r]}function Dx(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return Qo(!1,'The URL path "'+t+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),t}}function da(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,r=t.charAt(n);return r&&r!=="/"?null:t.slice(n)||"/"}function Mx(t,e){e===void 0&&(e="/");let{pathname:n,search:r="",hash:i=""}=typeof t=="string"?Xi(t):t;return{pathname:n?n.startsWith("/")?n:Vx(n,e):e,search:$x(r),hash:Fx(i)}}function Vx(t,e){let n=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(i=>{i===".."?n.length>1&&n.pop():i!=="."&&n.push(i)}),n.length>1?n.join("/"):"/"}function _f(t,e,n,r){return"Cannot include a '"+t+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(r)+"].  Please separate it out to the ")+("`to."+n+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function ab(t){return t.filter((e,n)=>n===0||e.route.path&&e.route.path.length>0)}function nd(t,e){let n=ab(t);return e?n.map((r,i)=>i===t.length-1?r.pathname:r.pathnameBase):n.map(r=>r.pathnameBase)}function rd(t,e,n,r){r===void 0&&(r=!1);let i;typeof t=="string"?i=Xi(t):(i=qe({},t),me(!i.pathname||!i.pathname.includes("?"),_f("?","pathname","search",i)),me(!i.pathname||!i.pathname.includes("#"),_f("#","pathname","hash",i)),me(!i.search||!i.search.includes("#"),_f("#","search","hash",i)));let s=t===""||i.pathname==="",o=s?"/":i.pathname,a;if(o==null)a=n;else{let f=e.length-1;if(!r&&o.startsWith("..")){let p=o.split("/");for(;p[0]==="..";)p.shift(),f-=1;i.pathname=p.join("/")}a=f>=0?e[f]:"/"}let l=Mx(i,a),c=o&&o!=="/"&&o.endsWith("/"),h=(s||o===".")&&n.endsWith("/");return!l.pathname.endsWith("/")&&(c||h)&&(l.pathname+="/"),l}const Mr=t=>t.join("/").replace(/\/\/+/g,"/"),Ux=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),$x=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,Fx=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;class dg{constructor(e,n,r,i){i===void 0&&(i=!1),this.status=e,this.statusText=n||"",this.internal=i,r instanceof Error?(this.data=r.toString(),this.error=r):this.data=r}}function fg(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}const lb=["post","put","patch","delete"],jx=new Set(lb),zx=["get",...lb],Bx=new Set(zx),Hx=new Set([301,302,303,307,308]),Wx=new Set([307,308]),wf={state:"idle",location:void 0,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0},qx={state:"idle",data:void 0,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0},Ka={state:"unblocked",proceed:void 0,reset:void 0,location:void 0},pg=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Gx=t=>({hasErrorBoundary:!!t.hasErrorBoundary}),ub="remix-router-transitions";function Kx(t){const e=t.window?t.window:typeof window<"u"?window:void 0,n=typeof e<"u"&&typeof e.document<"u"&&typeof e.document.createElement<"u",r=!n;me(t.routes.length>0,"You must provide a non-empty routes array to createRouter");let i;if(t.mapRouteProperties)i=t.mapRouteProperties;else if(t.detectErrorBoundary){let O=t.detectErrorBoundary;i=M=>({hasErrorBoundary:O(M)})}else i=Gx;let s={},o=Lp(t.routes,i,void 0,s),a,l=t.basename||"/",c=t.unstable_dataStrategy||Jx,h=qe({v7_fetcherPersist:!1,v7_normalizeFormMethod:!1,v7_partialHydration:!1,v7_prependBasename:!1,v7_relativeSplatPath:!1,unstable_skipActionErrorRevalidation:!1},t.future),f=null,p=new Set,w=null,E=null,S=null,P=t.hydrationData!=null,T=xo(o,t.history.location,l),_=null;if(T==null){let O=En(404,{pathname:t.history.location.pathname}),{matches:M,route:$}=z_(o);T=M,_={[$.id]:O}}let C,N=T.some(O=>O.route.lazy),F=T.some(O=>O.route.loader);if(N)C=!1;else if(!F)C=!0;else if(h.v7_partialHydration){let O=t.hydrationData?t.hydrationData.loaderData:null,M=t.hydrationData?t.hydrationData.errors:null,$=q=>q.route.loader?typeof q.route.loader=="function"&&q.route.loader.hydrate===!0?!1:O&&O[q.route.id]!==void 0||M&&M[q.route.id]!==void 0:!0;if(M){let q=T.findIndex(Q=>M[Q.route.id]!==void 0);C=T.slice(0,q+1).every($)}else C=T.every($)}else C=t.hydrationData!=null;let z,g={historyAction:t.history.action,location:t.history.location,matches:T,initialized:C,navigation:wf,restoreScrollPosition:t.hydrationData!=null?!1:null,preventScrollReset:!1,revalidation:"idle",loaderData:t.hydrationData&&t.hydrationData.loaderData||{},actionData:t.hydrationData&&t.hydrationData.actionData||null,errors:t.hydrationData&&t.hydrationData.errors||_,fetchers:new Map,blockers:new Map},y=at.Pop,b=!1,I,x=!1,k=new Map,A=null,Ie=!1,it=!1,Ht=[],_t=[],H=new Map,ee=0,re=-1,_e=new Map,he=new Set,Pe=new Map,Wt=new Map,ht=new Set,wt=new Map,Et=new Map,Ia=!1;function Dd(){if(f=t.history.listen(O=>{let{action:M,location:$,delta:q}=O;if(Ia){Ia=!1;return}Qo(Et.size===0||q!=null,"You are trying to use a blocker on a POP navigation to a location that was not created by @remix-run/router. This will fail silently in production. This can happen if you are navigating outside the router via `window.history.pushState`/`window.location.hash` instead of using router navigation APIs.  This can also happen if you are using createHashRouter and the user manually changes the URL.");let Q=Zs({currentLocation:g.location,nextLocation:$,historyAction:M});if(Q&&q!=null){Ia=!0,t.history.go(q*-1),Js(Q,{state:"blocked",location:$,proceed(){Js(Q,{state:"proceeding",proceed:void 0,reset:void 0,location:$}),t.history.go(q)},reset(){let Z=new Map(g.blockers);Z.set(Q,Ka),bt({blockers:Z})}});return}return Jn(M,$)}),n){ck(e,k);let O=()=>hk(e,k);e.addEventListener("pagehide",O),A=()=>e.removeEventListener("pagehide",O)}return g.initialized||Jn(at.Pop,g.location,{initialHydration:!0}),z}function Gs(){f&&f(),A&&A(),p.clear(),I&&I.abort(),g.fetchers.forEach((O,M)=>ss(M)),g.blockers.forEach((O,M)=>Du(M))}function Ks(O){return p.add(O),()=>p.delete(O)}function bt(O,M){M===void 0&&(M={}),g=qe({},g,O);let $=[],q=[];h.v7_fetcherPersist&&g.fetchers.forEach((Q,Z)=>{Q.state==="idle"&&(ht.has(Z)?q.push(Z):$.push(Z))}),[...p].forEach(Q=>Q(g,{deletedFetchers:q,unstable_viewTransitionOpts:M.viewTransitionOpts,unstable_flushSync:M.flushSync===!0})),h.v7_fetcherPersist&&($.forEach(Q=>g.fetchers.delete(Q)),q.forEach(Q=>ss(Q)))}function pr(O,M,$){var q,Q;let{flushSync:Z}=$===void 0?{}:$,te=g.actionData!=null&&g.navigation.formMethod!=null&&zn(g.navigation.formMethod)&&g.navigation.state==="loading"&&((q=O.state)==null?void 0:q._isRedirect)!==!0,K;M.actionData?Object.keys(M.actionData).length>0?K=M.actionData:K=null:te?K=g.actionData:K=null;let oe=M.loaderData?F_(g.loaderData,M.loaderData,M.matches||[],M.errors):g.loaderData,ae=g.blockers;ae.size>0&&(ae=new Map(ae),ae.forEach((ie,Le)=>ae.set(Le,Ka)));let dt=b===!0||g.navigation.formMethod!=null&&zn(g.navigation.formMethod)&&((Q=O.state)==null?void 0:Q._isRedirect)!==!0;a&&(o=a,a=void 0),Ie||y===at.Pop||(y===at.Push?t.history.push(O,O.state):y===at.Replace&&t.history.replace(O,O.state));let ze;if(y===at.Pop){let ie=k.get(g.location.pathname);ie&&ie.has(O.pathname)?ze={currentLocation:g.location,nextLocation:O}:k.has(O.pathname)&&(ze={currentLocation:O,nextLocation:g.location})}else if(x){let ie=k.get(g.location.pathname);ie?ie.add(O.pathname):(ie=new Set([O.pathname]),k.set(g.location.pathname,ie)),ze={currentLocation:g.location,nextLocation:O}}bt(qe({},M,{actionData:K,loaderData:oe,historyAction:y,location:O,initialized:!0,navigation:wf,revalidation:"idle",restoreScrollPosition:to(O,M.matches||g.matches),preventScrollReset:dt,blockers:ae}),{viewTransitionOpts:ze,flushSync:Z===!0}),y=at.Pop,b=!1,x=!1,Ie=!1,it=!1,Ht=[],_t=[]}async function Qs(O,M){if(typeof O=="number"){t.history.go(O);return}let $=Np(g.location,g.matches,l,h.v7_prependBasename,O,h.v7_relativeSplatPath,M==null?void 0:M.fromRouteId,M==null?void 0:M.relative),{path:q,submission:Q,error:Z}=L_(h.v7_normalizeFormMethod,!1,$,M),te=g.location,K=Kl(g.location,q,M&&M.state);K=qe({},K,t.history.encodeLocation(K));let oe=M&&M.replace!=null?M.replace:void 0,ae=at.Push;oe===!0?ae=at.Replace:oe===!1||Q!=null&&zn(Q.formMethod)&&Q.formAction===g.location.pathname+g.location.search&&(ae=at.Replace);let dt=M&&"preventScrollReset"in M?M.preventScrollReset===!0:void 0,ze=(M&&M.unstable_flushSync)===!0,ie=Zs({currentLocation:te,nextLocation:K,historyAction:ae});if(ie){Js(ie,{state:"blocked",location:K,proceed(){Js(ie,{state:"proceeding",proceed:void 0,reset:void 0,location:K}),Qs(O,M)},reset(){let Le=new Map(g.blockers);Le.set(ie,Ka),bt({blockers:Le})}});return}return await Jn(ae,K,{submission:Q,pendingError:Z,preventScrollReset:dt,replace:M&&M.replace,enableViewTransition:M&&M.unstable_viewTransition,flushSync:ze})}function Sa(){if(Ys(),bt({revalidation:"loading"}),g.navigation.state!=="submitting"){if(g.navigation.state==="idle"){Jn(g.historyAction,g.location,{startUninterruptedRevalidation:!0});return}Jn(y||g.historyAction,g.navigation.location,{overrideNavigation:g.navigation})}}async function Jn(O,M,$){I&&I.abort(),I=null,y=O,Ie=($&&$.startUninterruptedRevalidation)===!0,Ra(g.location,g.matches),b=($&&$.preventScrollReset)===!0,x=($&&$.enableViewTransition)===!0;let q=a||o,Q=$&&$.overrideNavigation,Z=xo(q,M,l),te=($&&$.flushSync)===!0;if(!Z){let ie=En(404,{pathname:M.pathname}),{matches:Le,route:We}=z_(q);eo(),pr(M,{matches:Le,loaderData:{},errors:{[We.id]:ie}},{flushSync:te});return}if(g.initialized&&!it&&ik(g.location,M)&&!($&&$.submission&&zn($.submission.formMethod))){pr(M,{matches:Z},{flushSync:te});return}I=new AbortController;let K=oo(t.history,M,I.signal,$&&$.submission),oe;if($&&$.pendingError)oe=[Il(Z).route.id,{type:Be.error,error:$.pendingError}];else if($&&$.submission&&zn($.submission.formMethod)){let ie=await Md(K,M,$.submission,Z,{replace:$.replace,flushSync:te});if(ie.shortCircuited)return;oe=ie.pendingActionResult,Q=Ef(M,$.submission),te=!1,K=oo(t.history,K.url,K.signal)}let{shortCircuited:ae,loaderData:dt,errors:ze}=await Vd(K,M,Z,Q,$&&$.submission,$&&$.fetcherSubmission,$&&$.replace,$&&$.initialHydration===!0,te,oe);ae||(I=null,pr(M,qe({matches:Z},j_(oe),{loaderData:dt,errors:ze})))}async function Md(O,M,$,q,Q){Q===void 0&&(Q={}),Ys();let Z=lk(M,$);bt({navigation:Z},{flushSync:Q.flushSync===!0});let te,K=Mp(q,M);if(!K.route.action&&!K.route.lazy)te={type:Be.error,error:En(405,{method:O.method,pathname:M.pathname,routeId:K.route.id})};else if(te=(await mr("action",O,[K],q))[0],O.signal.aborted)return{shortCircuited:!0};if(vs(te)){let oe;return Q&&Q.replace!=null?oe=Q.replace:oe=V_(te.response.headers.get("Location"),new URL(O.url),l)===g.location.pathname+g.location.search,await rs(O,te,{submission:$,replace:oe}),{shortCircuited:!0}}if(ys(te))throw En(400,{type:"defer-action"});if(Cn(te)){let oe=Il(q,K.route.id);return(Q&&Q.replace)!==!0&&(y=at.Push),{pendingActionResult:[oe.route.id,te]}}return{pendingActionResult:[K.route.id,te]}}async function Vd(O,M,$,q,Q,Z,te,K,oe,ae){let dt=q||Ef(M,Q),ze=Q||Z||W_(dt),ie=a||o,[Le,We]=N_(t.history,g,$,ze,M,h.v7_partialHydration&&K===!0,h.unstable_skipActionErrorRevalidation,it,Ht,_t,ht,Pe,he,ie,l,ae);if(eo(ye=>!($&&$.some(Tt=>Tt.route.id===ye))||Le&&Le.some(Tt=>Tt.route.id===ye)),re=++ee,Le.length===0&&We.length===0){let ye=xa();return pr(M,qe({matches:$,loaderData:{},errors:ae&&Cn(ae[1])?{[ae[0]]:ae[1].error}:null},j_(ae),ye?{fetchers:new Map(g.fetchers)}:{}),{flushSync:oe}),{shortCircuited:!0}}if(!Ie&&(!h.v7_partialHydration||!K)){We.forEach(Tt=>{let Ct=g.fetchers.get(Tt.key),st=Qa(void 0,Ct?Ct.data:void 0);g.fetchers.set(Tt.key,st)});let ye;ae&&!Cn(ae[1])?ye={[ae[0]]:ae[1].data}:g.actionData&&(Object.keys(g.actionData).length===0?ye=null:ye=g.actionData),bt(qe({navigation:dt},ye!==void 0?{actionData:ye}:{},We.length>0?{fetchers:new Map(g.fetchers)}:{}),{flushSync:oe})}We.forEach(ye=>{H.has(ye.key)&&Zn(ye.key),ye.controller&&H.set(ye.key,ye.controller)});let ei=()=>We.forEach(ye=>Zn(ye.key));I&&I.signal.addEventListener("abort",ei);let{loaderResults:vn,fetcherResults:Mn}=await Xs(g.matches,$,Le,We,O);if(O.signal.aborted)return{shortCircuited:!0};I&&I.signal.removeEventListener("abort",ei),We.forEach(ye=>H.delete(ye.key));let qt=B_([...vn,...Mn]);if(qt){if(qt.idx>=Le.length){let ye=We[qt.idx-Le.length].key;he.add(ye)}return await rs(O,qt.result,{replace:te}),{shortCircuited:!0}}let{loaderData:yr,errors:cn}=$_(g,$,Le,vn,ae,We,Mn,wt);wt.forEach((ye,Tt)=>{ye.subscribe(Ct=>{(Ct||ye.done)&&wt.delete(Tt)})}),h.v7_partialHydration&&K&&g.errors&&Object.entries(g.errors).filter(ye=>{let[Tt]=ye;return!Le.some(Ct=>Ct.route.id===Tt)}).forEach(ye=>{let[Tt,Ct]=ye;cn=Object.assign(cn||{},{[Tt]:Ct})});let ti=xa(),ni=ka(re),os=ti||ni||We.length>0;return qe({loaderData:yr,errors:cn},os?{fetchers:new Map(g.fetchers)}:{})}function Ou(O,M,$,q){if(r)throw new Error("router.fetch() was called during the server render, but it shouldn't be. You are likely calling a useFetcher() method in the body of your component. Try moving it to a useEffect or a callback.");H.has(O)&&Zn(O);let Q=(q&&q.unstable_flushSync)===!0,Z=a||o,te=Np(g.location,g.matches,l,h.v7_prependBasename,$,h.v7_relativeSplatPath,M,q==null?void 0:q.relative),K=xo(Z,te,l);if(!K){et(O,M,En(404,{pathname:te}),{flushSync:Q});return}let{path:oe,submission:ae,error:dt}=L_(h.v7_normalizeFormMethod,!0,te,q);if(dt){et(O,M,dt,{flushSync:Q});return}let ze=Mp(K,oe);if(b=(q&&q.preventScrollReset)===!0,ae&&zn(ae.formMethod)){Aa(O,M,oe,ze,K,Q,ae);return}Pe.set(O,{routeId:M,path:oe}),Lu(O,M,oe,ze,K,Q,ae)}async function Aa(O,M,$,q,Q,Z,te){if(Ys(),Pe.delete(O),!q.route.action&&!q.route.lazy){let st=En(405,{method:te.formMethod,pathname:$,routeId:M});et(O,M,st,{flushSync:Z});return}let K=g.fetchers.get(O);Me(O,uk(te,K),{flushSync:Z});let oe=new AbortController,ae=oo(t.history,$,oe.signal,te);H.set(O,oe);let dt=ee,ie=(await mr("action",ae,[q],Q))[0];if(ae.signal.aborted){H.get(O)===oe&&H.delete(O);return}if(h.v7_fetcherPersist&&ht.has(O)){if(vs(ie)||Cn(ie)){Me(O,ci(void 0));return}}else{if(vs(ie))if(H.delete(O),re>dt){Me(O,ci(void 0));return}else return he.add(O),Me(O,Qa(te)),rs(ae,ie,{fetcherSubmission:te});if(Cn(ie)){et(O,M,ie.error);return}}if(ys(ie))throw En(400,{type:"defer-action"});let Le=g.navigation.location||g.location,We=oo(t.history,Le,oe.signal),ei=a||o,vn=g.navigation.state!=="idle"?xo(ei,g.navigation.location,l):g.matches;me(vn,"Didn't find any matches after fetcher action");let Mn=++ee;_e.set(O,Mn);let qt=Qa(te,ie.data);g.fetchers.set(O,qt);let[yr,cn]=N_(t.history,g,vn,te,Le,!1,h.unstable_skipActionErrorRevalidation,it,Ht,_t,ht,Pe,he,ei,l,[q.route.id,ie]);cn.filter(st=>st.key!==O).forEach(st=>{let vr=st.key,ri=g.fetchers.get(vr),_r=Qa(void 0,ri?ri.data:void 0);g.fetchers.set(vr,_r),H.has(vr)&&Zn(vr),st.controller&&H.set(vr,st.controller)}),bt({fetchers:new Map(g.fetchers)});let ti=()=>cn.forEach(st=>Zn(st.key));oe.signal.addEventListener("abort",ti);let{loaderResults:ni,fetcherResults:os}=await Xs(g.matches,vn,yr,cn,We);if(oe.signal.aborted)return;oe.signal.removeEventListener("abort",ti),_e.delete(O),H.delete(O),cn.forEach(st=>H.delete(st.key));let ye=B_([...ni,...os]);if(ye){if(ye.idx>=yr.length){let st=cn[ye.idx-yr.length].key;he.add(st)}return rs(We,ye.result)}let{loaderData:Tt,errors:Ct}=$_(g,g.matches,yr,ni,void 0,cn,os,wt);if(g.fetchers.has(O)){let st=ci(ie.data);g.fetchers.set(O,st)}ka(Mn),g.navigation.state==="loading"&&Mn>re?(me(y,"Expected pending action"),I&&I.abort(),pr(g.navigation.location,{matches:vn,loaderData:Tt,errors:Ct,fetchers:new Map(g.fetchers)})):(bt({errors:Ct,loaderData:F_(g.loaderData,Tt,vn,Ct),fetchers:new Map(g.fetchers)}),it=!1)}async function Lu(O,M,$,q,Q,Z,te){let K=g.fetchers.get(O);Me(O,Qa(te,K?K.data:void 0),{flushSync:Z});let oe=new AbortController,ae=oo(t.history,$,oe.signal);H.set(O,oe);let dt=ee,ie=(await mr("loader",ae,[q],Q))[0];if(ys(ie)&&(ie=await fb(ie,ae.signal,!0)||ie),H.get(O)===oe&&H.delete(O),!ae.signal.aborted){if(ht.has(O)){Me(O,ci(void 0));return}if(vs(ie))if(re>dt){Me(O,ci(void 0));return}else{he.add(O),await rs(ae,ie);return}if(Cn(ie)){et(O,M,ie.error);return}me(!ys(ie),"Unhandled fetcher deferred data"),Me(O,ci(ie.data))}}async function rs(O,M,$){let{submission:q,fetcherSubmission:Q,replace:Z}=$===void 0?{}:$;M.response.headers.has("X-Remix-Revalidate")&&(it=!0);let te=M.response.headers.get("Location");me(te,"Expected a Location header on the redirect Response"),te=V_(te,new URL(O.url),l);let K=Kl(g.location,te,{_isRedirect:!0});if(n){let Le=!1;if(M.response.headers.has("X-Remix-Reload-Document"))Le=!0;else if(pg.test(te)){const We=t.history.createURL(te);Le=We.origin!==e.location.origin||da(We.pathname,l)==null}if(Le){Z?e.location.replace(te):e.location.assign(te);return}}I=null;let oe=Z===!0?at.Replace:at.Push,{formMethod:ae,formAction:dt,formEncType:ze}=g.navigation;!q&&!Q&&ae&&dt&&ze&&(q=W_(g.navigation));let ie=q||Q;if(Wx.has(M.response.status)&&ie&&zn(ie.formMethod))await Jn(oe,K,{submission:qe({},ie,{formAction:te}),preventScrollReset:b});else{let Le=Ef(K,q);await Jn(oe,K,{overrideNavigation:Le,fetcherSubmission:Q,preventScrollReset:b})}}async function mr(O,M,$,q){try{let Q=await Zx(c,O,M,$,q,s,i);return await Promise.all(Q.map((Z,te)=>{if(sk(Z)){let K=Z.result;return{type:Be.redirect,response:nk(K,M,$[te].route.id,q,l,h.v7_relativeSplatPath)}}return tk(Z)}))}catch(Q){return $.map(()=>({type:Be.error,error:Q}))}}async function Xs(O,M,$,q,Q){let[Z,...te]=await Promise.all([$.length?mr("loader",Q,$,M):[],...q.map(K=>{if(K.matches&&K.match&&K.controller){let oe=oo(t.history,K.path,K.controller.signal);return mr("loader",oe,[K.match],K.matches).then(ae=>ae[0])}else return Promise.resolve({type:Be.error,error:En(404,{pathname:K.path})})})]);return await Promise.all([H_(O,$,Z,Z.map(()=>Q.signal),!1,g.loaderData),H_(O,q.map(K=>K.match),te,q.map(K=>K.controller?K.controller.signal:null),!0)]),{loaderResults:Z,fetcherResults:te}}function Ys(){it=!0,Ht.push(...eo()),Pe.forEach((O,M)=>{H.has(M)&&(_t.push(M),Zn(M))})}function Me(O,M,$){$===void 0&&($={}),g.fetchers.set(O,M),bt({fetchers:new Map(g.fetchers)},{flushSync:($&&$.flushSync)===!0})}function et(O,M,$,q){q===void 0&&(q={});let Q=Il(g.matches,M);ss(O),bt({errors:{[Q.route.id]:$},fetchers:new Map(g.fetchers)},{flushSync:(q&&q.flushSync)===!0})}function is(O){return h.v7_fetcherPersist&&(Wt.set(O,(Wt.get(O)||0)+1),ht.has(O)&&ht.delete(O)),g.fetchers.get(O)||qx}function ss(O){let M=g.fetchers.get(O);H.has(O)&&!(M&&M.state==="loading"&&_e.has(O))&&Zn(O),Pe.delete(O),_e.delete(O),he.delete(O),ht.delete(O),g.fetchers.delete(O)}function Nu(O){if(h.v7_fetcherPersist){let M=(Wt.get(O)||0)-1;M<=0?(Wt.delete(O),ht.add(O)):Wt.set(O,M)}else ss(O);bt({fetchers:new Map(g.fetchers)})}function Zn(O){let M=H.get(O);me(M,"Expected fetch controller: "+O),M.abort(),H.delete(O)}function Jr(O){for(let M of O){let $=is(M),q=ci($.data);g.fetchers.set(M,q)}}function xa(){let O=[],M=!1;for(let $ of he){let q=g.fetchers.get($);me(q,"Expected fetcher: "+$),q.state==="loading"&&(he.delete($),O.push($),M=!0)}return Jr(O),M}function ka(O){let M=[];for(let[$,q]of _e)if(q<O){let Q=g.fetchers.get($);me(Q,"Expected fetcher: "+$),Q.state==="loading"&&(Zn($),_e.delete($),M.push($))}return Jr(M),M.length>0}function Pa(O,M){let $=g.blockers.get(O)||Ka;return Et.get(O)!==M&&Et.set(O,M),$}function Du(O){g.blockers.delete(O),Et.delete(O)}function Js(O,M){let $=g.blockers.get(O)||Ka;me($.state==="unblocked"&&M.state==="blocked"||$.state==="blocked"&&M.state==="blocked"||$.state==="blocked"&&M.state==="proceeding"||$.state==="blocked"&&M.state==="unblocked"||$.state==="proceeding"&&M.state==="unblocked","Invalid blocker state transition: "+$.state+" -> "+M.state);let q=new Map(g.blockers);q.set(O,M),bt({blockers:q})}function Zs(O){let{currentLocation:M,nextLocation:$,historyAction:q}=O;if(Et.size===0)return;Et.size>1&&Qo(!1,"A router only supports one blocker at a time");let Q=Array.from(Et.entries()),[Z,te]=Q[Q.length-1],K=g.blockers.get(Z);if(!(K&&K.state==="proceeding")&&te({currentLocation:M,nextLocation:$,historyAction:q}))return Z}function eo(O){let M=[];return wt.forEach(($,q)=>{(!O||O(q))&&($.cancel(),M.push(q),wt.delete(q))}),M}function Mu(O,M,$){if(w=O,S=M,E=$||null,!P&&g.navigation===wf){P=!0;let q=to(g.location,g.matches);q!=null&&bt({restoreScrollPosition:q})}return()=>{w=null,S=null,E=null}}function Zr(O,M){return E&&E(O,M.map(q=>bx(q,g.loaderData)))||O.key}function Ra(O,M){if(w&&S){let $=Zr(O,M);w[$]=S()}}function to(O,M){if(w){let $=Zr(O,M),q=w[$];if(typeof q=="number")return q}return null}function gr(O){s={},a=Lp(O,i,void 0,s)}return z={get basename(){return l},get future(){return h},get state(){return g},get routes(){return o},get window(){return e},initialize:Dd,subscribe:Ks,enableScrollRestoration:Mu,navigate:Qs,fetch:Ou,revalidate:Sa,createHref:O=>t.history.createHref(O),encodeLocation:O=>t.history.encodeLocation(O),getFetcher:is,deleteFetcher:Nu,dispose:Gs,getBlocker:Pa,deleteBlocker:Du,_internalFetchControllers:H,_internalActiveDeferreds:wt,_internalSetRoutes:gr},z}function Qx(t){return t!=null&&("formData"in t&&t.formData!=null||"body"in t&&t.body!==void 0)}function Np(t,e,n,r,i,s,o,a){let l,c;if(o){l=[];for(let f of e)if(l.push(f),f.route.id===o){c=f;break}}else l=e,c=e[e.length-1];let h=rd(i||".",nd(l,s),da(t.pathname,n)||t.pathname,a==="path");return i==null&&(h.search=t.search,h.hash=t.hash),(i==null||i===""||i===".")&&c&&c.route.index&&!mg(h.search)&&(h.search=h.search?h.search.replace(/^\?/,"?index&"):"?index"),r&&n!=="/"&&(h.pathname=h.pathname==="/"?n:Mr([n,h.pathname])),Os(h)}function L_(t,e,n,r){if(!r||!Qx(r))return{path:n};if(r.formMethod&&!ak(r.formMethod))return{path:n,error:En(405,{method:r.formMethod})};let i=()=>({path:n,error:En(400,{type:"invalid-body"})}),s=r.formMethod||"get",o=t?s.toUpperCase():s.toLowerCase(),a=hb(n);if(r.body!==void 0){if(r.formEncType==="text/plain"){if(!zn(o))return i();let p=typeof r.body=="string"?r.body:r.body instanceof FormData||r.body instanceof URLSearchParams?Array.from(r.body.entries()).reduce((w,E)=>{let[S,P]=E;return""+w+S+"="+P+`
`},""):String(r.body);return{path:n,submission:{formMethod:o,formAction:a,formEncType:r.formEncType,formData:void 0,json:void 0,text:p}}}else if(r.formEncType==="application/json"){if(!zn(o))return i();try{let p=typeof r.body=="string"?JSON.parse(r.body):r.body;return{path:n,submission:{formMethod:o,formAction:a,formEncType:r.formEncType,formData:void 0,json:p,text:void 0}}}catch{return i()}}}me(typeof FormData=="function","FormData is not available in this environment");let l,c;if(r.formData)l=Dp(r.formData),c=r.formData;else if(r.body instanceof FormData)l=Dp(r.body),c=r.body;else if(r.body instanceof URLSearchParams)l=r.body,c=U_(l);else if(r.body==null)l=new URLSearchParams,c=new FormData;else try{l=new URLSearchParams(r.body),c=U_(l)}catch{return i()}let h={formMethod:o,formAction:a,formEncType:r&&r.formEncType||"application/x-www-form-urlencoded",formData:c,json:void 0,text:void 0};if(zn(h.formMethod))return{path:n,submission:h};let f=Xi(n);return e&&f.search&&mg(f.search)&&l.append("index",""),f.search="?"+l,{path:Os(f),submission:h}}function Xx(t,e){let n=t;if(e){let r=t.findIndex(i=>i.route.id===e);r>=0&&(n=t.slice(0,r))}return n}function N_(t,e,n,r,i,s,o,a,l,c,h,f,p,w,E,S){let P=S?Cn(S[1])?S[1].error:S[1].data:void 0,T=t.createURL(e.location),_=t.createURL(i),C=S&&Cn(S[1])?S[0]:void 0,N=C?Xx(n,C):n,F=S?S[1].statusCode:void 0,z=o&&F&&F>=400,g=N.filter((b,I)=>{let{route:x}=b;if(x.lazy)return!0;if(x.loader==null)return!1;if(s)return typeof x.loader!="function"||x.loader.hydrate?!0:e.loaderData[x.id]===void 0&&(!e.errors||e.errors[x.id]===void 0);if(Yx(e.loaderData,e.matches[I],b)||l.some(Ie=>Ie===b.route.id))return!0;let k=e.matches[I],A=b;return D_(b,qe({currentUrl:T,currentParams:k.params,nextUrl:_,nextParams:A.params},r,{actionResult:P,unstable_actionStatus:F,defaultShouldRevalidate:z?!1:a||T.pathname+T.search===_.pathname+_.search||T.search!==_.search||cb(k,A)}))}),y=[];return f.forEach((b,I)=>{if(s||!n.some(it=>it.route.id===b.routeId)||h.has(I))return;let x=xo(w,b.path,E);if(!x){y.push({key:I,routeId:b.routeId,path:b.path,matches:null,match:null,controller:null});return}let k=e.fetchers.get(I),A=Mp(x,b.path),Ie=!1;p.has(I)?Ie=!1:c.includes(I)?Ie=!0:k&&k.state!=="idle"&&k.data===void 0?Ie=a:Ie=D_(A,qe({currentUrl:T,currentParams:e.matches[e.matches.length-1].params,nextUrl:_,nextParams:n[n.length-1].params},r,{actionResult:P,unstable_actionStatus:F,defaultShouldRevalidate:z?!1:a})),Ie&&y.push({key:I,routeId:b.routeId,path:b.path,matches:x,match:A,controller:new AbortController})}),[g,y]}function Yx(t,e,n){let r=!e||n.route.id!==e.route.id,i=t[n.route.id]===void 0;return r||i}function cb(t,e){let n=t.route.path;return t.pathname!==e.pathname||n!=null&&n.endsWith("*")&&t.params["*"]!==e.params["*"]}function D_(t,e){if(t.route.shouldRevalidate){let n=t.route.shouldRevalidate(e);if(typeof n=="boolean")return n}return e.defaultShouldRevalidate}async function M_(t,e,n){if(!t.lazy)return;let r=await t.lazy();if(!t.lazy)return;let i=n[t.id];me(i,"No route found in manifest");let s={};for(let o in r){let l=i[o]!==void 0&&o!=="hasErrorBoundary";Qo(!l,'Route "'+i.id+'" has a static property "'+o+'" defined but its lazy function is also returning a value for this property. '+('The lazy route property "'+o+'" will be ignored.')),!l&&!wx.has(o)&&(s[o]=r[o])}Object.assign(i,s),Object.assign(i,qe({},e(i),{lazy:void 0}))}function Jx(t){return Promise.all(t.matches.map(e=>e.resolve()))}async function Zx(t,e,n,r,i,s,o,a){let l=r.reduce((f,p)=>f.add(p.route.id),new Set),c=new Set,h=await t({matches:i.map(f=>{let p=l.has(f.route.id);return qe({},f,{shouldLoad:p,resolve:E=>(c.add(f.route.id),p?ek(e,n,f,s,o,E,a):Promise.resolve({type:Be.data,result:void 0}))})}),request:n,params:i[0].params,context:a});return i.forEach(f=>me(c.has(f.route.id),'`match.resolve()` was not called for route id "'+f.route.id+'". You must call `match.resolve()` on every match passed to `dataStrategy` to ensure all routes are properly loaded.')),h.filter((f,p)=>l.has(i[p].route.id))}async function ek(t,e,n,r,i,s,o){let a,l,c=h=>{let f,p=new Promise((S,P)=>f=P);l=()=>f(),e.signal.addEventListener("abort",l);let w=S=>typeof h!="function"?Promise.reject(new Error("You cannot call the handler for a route which defines a boolean "+('"'+t+'" [routeId: '+n.route.id+"]"))):h({request:e,params:n.params,context:o},...S!==void 0?[S]:[]),E;return s?E=s(S=>w(S)):E=(async()=>{try{return{type:"data",result:await w()}}catch(S){return{type:"error",result:S}}})(),Promise.race([E,p])};try{let h=n.route[t];if(n.route.lazy)if(h){let f,[p]=await Promise.all([c(h).catch(w=>{f=w}),M_(n.route,i,r)]);if(f!==void 0)throw f;a=p}else if(await M_(n.route,i,r),h=n.route[t],h)a=await c(h);else if(t==="action"){let f=new URL(e.url),p=f.pathname+f.search;throw En(405,{method:e.method,pathname:p,routeId:n.route.id})}else return{type:Be.data,result:void 0};else if(h)a=await c(h);else{let f=new URL(e.url),p=f.pathname+f.search;throw En(404,{pathname:p})}me(a.result!==void 0,"You defined "+(t==="action"?"an action":"a loader")+" for route "+('"'+n.route.id+"\" but didn't return anything from your `"+t+"` ")+"function. Please return a value or `null`.")}catch(h){return{type:Be.error,result:h}}finally{l&&e.signal.removeEventListener("abort",l)}return a}async function tk(t){let{result:e,type:n,status:r}=t;if(db(e)){let o;try{let a=e.headers.get("Content-Type");a&&/\bapplication\/json\b/.test(a)?e.body==null?o=null:o=await e.json():o=await e.text()}catch(a){return{type:Be.error,error:a}}return n===Be.error?{type:Be.error,error:new dg(e.status,e.statusText,o),statusCode:e.status,headers:e.headers}:{type:Be.data,data:o,statusCode:e.status,headers:e.headers}}if(n===Be.error)return{type:Be.error,error:e,statusCode:fg(e)?e.status:r};if(ok(e)){var i,s;return{type:Be.deferred,deferredData:e,statusCode:(i=e.init)==null?void 0:i.status,headers:((s=e.init)==null?void 0:s.headers)&&new Headers(e.init.headers)}}return{type:Be.data,data:e,statusCode:r}}function nk(t,e,n,r,i,s){let o=t.headers.get("Location");if(me(o,"Redirects returned/thrown from loaders/actions must have a Location header"),!pg.test(o)){let a=r.slice(0,r.findIndex(l=>l.route.id===n)+1);o=Np(new URL(e.url),a,i,!0,o,s),t.headers.set("Location",o)}return t}function V_(t,e,n){if(pg.test(t)){let r=t,i=r.startsWith("//")?new URL(e.protocol+r):new URL(r),s=da(i.pathname,n)!=null;if(i.origin===e.origin&&s)return i.pathname+i.search+i.hash}return t}function oo(t,e,n,r){let i=t.createURL(hb(e)).toString(),s={signal:n};if(r&&zn(r.formMethod)){let{formMethod:o,formEncType:a}=r;s.method=o.toUpperCase(),a==="application/json"?(s.headers=new Headers({"Content-Type":a}),s.body=JSON.stringify(r.json)):a==="text/plain"?s.body=r.text:a==="application/x-www-form-urlencoded"&&r.formData?s.body=Dp(r.formData):s.body=r.formData}return new Request(i,s)}function Dp(t){let e=new URLSearchParams;for(let[n,r]of t.entries())e.append(n,typeof r=="string"?r:r.name);return e}function U_(t){let e=new FormData;for(let[n,r]of t.entries())e.append(n,r);return e}function rk(t,e,n,r,i,s){let o={},a=null,l,c=!1,h={},f=r&&Cn(r[1])?r[1].error:void 0;return n.forEach((p,w)=>{let E=e[w].route.id;if(me(!vs(p),"Cannot handle redirect results in processLoaderData"),Cn(p)){let S=p.error;f!==void 0&&(S=f,f=void 0),a=a||{};{let P=Il(t,E);a[P.route.id]==null&&(a[P.route.id]=S)}o[E]=void 0,c||(c=!0,l=fg(p.error)?p.error.status:500),p.headers&&(h[E]=p.headers)}else ys(p)?(i.set(E,p.deferredData),o[E]=p.deferredData.data,p.statusCode!=null&&p.statusCode!==200&&!c&&(l=p.statusCode),p.headers&&(h[E]=p.headers)):(o[E]=p.data,p.statusCode&&p.statusCode!==200&&!c&&(l=p.statusCode),p.headers&&(h[E]=p.headers))}),f!==void 0&&r&&(a={[r[0]]:f},o[r[0]]=void 0),{loaderData:o,errors:a,statusCode:l||200,loaderHeaders:h}}function $_(t,e,n,r,i,s,o,a){let{loaderData:l,errors:c}=rk(e,n,r,i,a);for(let h=0;h<s.length;h++){let{key:f,match:p,controller:w}=s[h];me(o!==void 0&&o[h]!==void 0,"Did not find corresponding fetcher result");let E=o[h];if(!(w&&w.signal.aborted))if(Cn(E)){let S=Il(t.matches,p==null?void 0:p.route.id);c&&c[S.route.id]||(c=qe({},c,{[S.route.id]:E.error})),t.fetchers.delete(f)}else if(vs(E))me(!1,"Unhandled fetcher revalidation redirect");else if(ys(E))me(!1,"Unhandled fetcher deferred data");else{let S=ci(E.data);t.fetchers.set(f,S)}}return{loaderData:l,errors:c}}function F_(t,e,n,r){let i=qe({},e);for(let s of n){let o=s.route.id;if(e.hasOwnProperty(o)?e[o]!==void 0&&(i[o]=e[o]):t[o]!==void 0&&s.route.loader&&(i[o]=t[o]),r&&r.hasOwnProperty(o))break}return i}function j_(t){return t?Cn(t[1])?{actionData:{}}:{actionData:{[t[0]]:t[1].data}}:{}}function Il(t,e){return(e?t.slice(0,t.findIndex(r=>r.route.id===e)+1):[...t]).reverse().find(r=>r.route.hasErrorBoundary===!0)||t[0]}function z_(t){let e=t.length===1?t[0]:t.find(n=>n.index||!n.path||n.path==="/")||{id:"__shim-error-route__"};return{matches:[{params:{},pathname:"",pathnameBase:"",route:e}],route:e}}function En(t,e){let{pathname:n,routeId:r,method:i,type:s}=e===void 0?{}:e,o="Unknown Server Error",a="Unknown @remix-run/router error";return t===400?(o="Bad Request",i&&n&&r?a="You made a "+i+' request to "'+n+'" but '+('did not provide a `loader` for route "'+r+'", ')+"so there is no way to handle the request.":s==="defer-action"?a="defer() is not supported in actions":s==="invalid-body"&&(a="Unable to encode submission body")):t===403?(o="Forbidden",a='Route "'+r+'" does not match URL "'+n+'"'):t===404?(o="Not Found",a='No route matches URL "'+n+'"'):t===405&&(o="Method Not Allowed",i&&n&&r?a="You made a "+i.toUpperCase()+' request to "'+n+'" but '+('did not provide an `action` for route "'+r+'", ')+"so there is no way to handle the request.":i&&(a='Invalid request method "'+i.toUpperCase()+'"')),new dg(t||500,o,new Error(a),!0)}function B_(t){for(let e=t.length-1;e>=0;e--){let n=t[e];if(vs(n))return{result:n,idx:e}}}function hb(t){let e=typeof t=="string"?Xi(t):t;return Os(qe({},e,{hash:""}))}function ik(t,e){return t.pathname!==e.pathname||t.search!==e.search?!1:t.hash===""?e.hash!=="":t.hash===e.hash?!0:e.hash!==""}function sk(t){return db(t.result)&&Hx.has(t.result.status)}function ys(t){return t.type===Be.deferred}function Cn(t){return t.type===Be.error}function vs(t){return(t&&t.type)===Be.redirect}function ok(t){let e=t;return e&&typeof e=="object"&&typeof e.data=="object"&&typeof e.subscribe=="function"&&typeof e.cancel=="function"&&typeof e.resolveData=="function"}function db(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.headers=="object"&&typeof t.body<"u"}function ak(t){return Bx.has(t.toLowerCase())}function zn(t){return jx.has(t.toLowerCase())}async function H_(t,e,n,r,i,s){for(let o=0;o<n.length;o++){let a=n[o],l=e[o];if(!l)continue;let c=t.find(f=>f.route.id===l.route.id),h=c!=null&&!cb(c,l)&&(s&&s[l.route.id])!==void 0;if(ys(a)&&(i||h)){let f=r[o];me(f,"Expected an AbortSignal for revalidating fetcher deferred result"),await fb(a,f,i).then(p=>{p&&(n[o]=p||n[o])})}}}async function fb(t,e,n){if(n===void 0&&(n=!1),!await t.deferredData.resolveData(e)){if(n)try{return{type:Be.data,data:t.deferredData.unwrappedData}}catch(i){return{type:Be.error,error:i}}return{type:Be.data,data:t.deferredData.data}}}function mg(t){return new URLSearchParams(t).getAll("index").some(e=>e==="")}function Mp(t,e){let n=typeof e=="string"?Xi(e).search:e.search;if(t[t.length-1].route.index&&mg(n||""))return t[t.length-1];let r=ab(t);return r[r.length-1]}function W_(t){let{formMethod:e,formAction:n,formEncType:r,text:i,formData:s,json:o}=t;if(!(!e||!n||!r)){if(i!=null)return{formMethod:e,formAction:n,formEncType:r,formData:void 0,json:void 0,text:i};if(s!=null)return{formMethod:e,formAction:n,formEncType:r,formData:s,json:void 0,text:void 0};if(o!==void 0)return{formMethod:e,formAction:n,formEncType:r,formData:void 0,json:o,text:void 0}}}function Ef(t,e){return e?{state:"loading",location:t,formMethod:e.formMethod,formAction:e.formAction,formEncType:e.formEncType,formData:e.formData,json:e.json,text:e.text}:{state:"loading",location:t,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0}}function lk(t,e){return{state:"submitting",location:t,formMethod:e.formMethod,formAction:e.formAction,formEncType:e.formEncType,formData:e.formData,json:e.json,text:e.text}}function Qa(t,e){return t?{state:"loading",formMethod:t.formMethod,formAction:t.formAction,formEncType:t.formEncType,formData:t.formData,json:t.json,text:t.text,data:e}:{state:"loading",formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0,data:e}}function uk(t,e){return{state:"submitting",formMethod:t.formMethod,formAction:t.formAction,formEncType:t.formEncType,formData:t.formData,json:t.json,text:t.text,data:e?e.data:void 0}}function ci(t){return{state:"idle",formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0,data:t}}function ck(t,e){try{let n=t.sessionStorage.getItem(ub);if(n){let r=JSON.parse(n);for(let[i,s]of Object.entries(r||{}))s&&Array.isArray(s)&&e.set(i,new Set(s||[]))}}catch{}}function hk(t,e){if(e.size>0){let n={};for(let[r,i]of e)n[r]=[...i];try{t.sessionStorage.setItem(ub,JSON.stringify(n))}catch(r){Qo(!1,"Failed to save applied view transitions in sessionStorage ("+r+").")}}}/**
 * React Router v6.23.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function mh(){return mh=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},mh.apply(this,arguments)}const id=D.createContext(null),pb=D.createContext(null),Yi=D.createContext(null),gg=D.createContext(null),Qr=D.createContext({outlet:null,matches:[],isDataRoute:!1}),mb=D.createContext(null);function dk(t,e){let{relative:n}=e===void 0?{}:e;fa()||me(!1);let{basename:r,navigator:i}=D.useContext(Yi),{hash:s,pathname:o,search:a}=yb(t,{relative:n}),l=o;return r!=="/"&&(l=o==="/"?r:Mr([r,o])),i.createHref({pathname:l,search:a,hash:s})}function fa(){return D.useContext(gg)!=null}function Bs(){return fa()||me(!1),D.useContext(gg).location}function gb(t){D.useContext(Yi).static||D.useLayoutEffect(t)}function du(){let{isDataRoute:t}=D.useContext(Qr);return t?Sk():fk()}function fk(){fa()||me(!1);let t=D.useContext(id),{basename:e,future:n,navigator:r}=D.useContext(Yi),{matches:i}=D.useContext(Qr),{pathname:s}=Bs(),o=JSON.stringify(nd(i,n.v7_relativeSplatPath)),a=D.useRef(!1);return gb(()=>{a.current=!0}),D.useCallback(function(c,h){if(h===void 0&&(h={}),!a.current)return;if(typeof c=="number"){r.go(c);return}let f=rd(c,JSON.parse(o),s,h.relative==="path");t==null&&e!=="/"&&(f.pathname=f.pathname==="/"?e:Mr([e,f.pathname])),(h.replace?r.replace:r.push)(f,h.state,h)},[e,r,o,s,t])}const pk=D.createContext(null);function mk(t){let e=D.useContext(Qr).outlet;return e&&D.createElement(pk.Provider,{value:t},e)}function yb(t,e){let{relative:n}=e===void 0?{}:e,{future:r}=D.useContext(Yi),{matches:i}=D.useContext(Qr),{pathname:s}=Bs(),o=JSON.stringify(nd(i,r.v7_relativeSplatPath));return D.useMemo(()=>rd(t,JSON.parse(o),s,n==="path"),[t,o,s,n])}function gk(t,e,n,r){fa()||me(!1);let{navigator:i}=D.useContext(Yi),{matches:s}=D.useContext(Qr),o=s[s.length-1],a=o?o.params:{};o&&o.pathname;let l=o?o.pathnameBase:"/";o&&o.route;let c=Bs(),h;h=c;let f=h.pathname||"/",p=f;if(l!=="/"){let S=l.replace(/^\//,"").split("/");p="/"+f.replace(/^\//,"").split("/").slice(S.length).join("/")}let w=xo(t,{pathname:p});return Ek(w&&w.map(S=>Object.assign({},S,{params:Object.assign({},a,S.params),pathname:Mr([l,i.encodeLocation?i.encodeLocation(S.pathname).pathname:S.pathname]),pathnameBase:S.pathnameBase==="/"?l:Mr([l,i.encodeLocation?i.encodeLocation(S.pathnameBase).pathname:S.pathnameBase])})),s,n,r)}function yk(){let t=Ik(),e=fg(t)?t.status+" "+t.statusText:t instanceof Error?t.message:JSON.stringify(t),n=t instanceof Error?t.stack:null,i={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return D.createElement(D.Fragment,null,D.createElement("h2",null,"Unexpected Application Error!"),D.createElement("h3",{style:{fontStyle:"italic"}},e),n?D.createElement("pre",{style:i},n):null,null)}const vk=D.createElement(yk,null);class _k extends D.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,n){return n.location!==e.location||n.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:n.error,location:n.location,revalidation:e.revalidation||n.revalidation}}componentDidCatch(e,n){console.error("React Router caught the following error during render",e,n)}render(){return this.state.error!==void 0?D.createElement(Qr.Provider,{value:this.props.routeContext},D.createElement(mb.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function wk(t){let{routeContext:e,match:n,children:r}=t,i=D.useContext(id);return i&&i.static&&i.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(i.staticContext._deepestRenderedBoundaryId=n.route.id),D.createElement(Qr.Provider,{value:e},r)}function Ek(t,e,n,r){var i;if(e===void 0&&(e=[]),n===void 0&&(n=null),r===void 0&&(r=null),t==null){var s;if((s=n)!=null&&s.errors)t=n.matches;else return null}let o=t,a=(i=n)==null?void 0:i.errors;if(a!=null){let h=o.findIndex(f=>f.route.id&&(a==null?void 0:a[f.route.id])!==void 0);h>=0||me(!1),o=o.slice(0,Math.min(o.length,h+1))}let l=!1,c=-1;if(n&&r&&r.v7_partialHydration)for(let h=0;h<o.length;h++){let f=o[h];if((f.route.HydrateFallback||f.route.hydrateFallbackElement)&&(c=h),f.route.id){let{loaderData:p,errors:w}=n,E=f.route.loader&&p[f.route.id]===void 0&&(!w||w[f.route.id]===void 0);if(f.route.lazy||E){l=!0,c>=0?o=o.slice(0,c+1):o=[o[0]];break}}}return o.reduceRight((h,f,p)=>{let w,E=!1,S=null,P=null;n&&(w=a&&f.route.id?a[f.route.id]:void 0,S=f.route.errorElement||vk,l&&(c<0&&p===0?(E=!0,P=null):c===p&&(E=!0,P=f.route.hydrateFallbackElement||null)));let T=e.concat(o.slice(0,p+1)),_=()=>{let C;return w?C=S:E?C=P:f.route.Component?C=D.createElement(f.route.Component,null):f.route.element?C=f.route.element:C=h,D.createElement(wk,{match:f,routeContext:{outlet:h,matches:T,isDataRoute:n!=null},children:C})};return n&&(f.route.ErrorBoundary||f.route.errorElement||p===0)?D.createElement(_k,{location:n.location,revalidation:n.revalidation,component:S,error:w,children:_(),routeContext:{outlet:null,matches:T,isDataRoute:!0}}):_()},null)}var vb=function(t){return t.UseBlocker="useBlocker",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t}(vb||{}),gh=function(t){return t.UseBlocker="useBlocker",t.UseLoaderData="useLoaderData",t.UseActionData="useActionData",t.UseRouteError="useRouteError",t.UseNavigation="useNavigation",t.UseRouteLoaderData="useRouteLoaderData",t.UseMatches="useMatches",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t.UseRouteId="useRouteId",t}(gh||{});function bk(t){let e=D.useContext(id);return e||me(!1),e}function Tk(t){let e=D.useContext(pb);return e||me(!1),e}function Ck(t){let e=D.useContext(Qr);return e||me(!1),e}function _b(t){let e=Ck(),n=e.matches[e.matches.length-1];return n.route.id||me(!1),n.route.id}function Ik(){var t;let e=D.useContext(mb),n=Tk(gh.UseRouteError),r=_b(gh.UseRouteError);return e!==void 0?e:(t=n.errors)==null?void 0:t[r]}function Sk(){let{router:t}=bk(vb.UseNavigateStable),e=_b(gh.UseNavigateStable),n=D.useRef(!1);return gb(()=>{n.current=!0}),D.useCallback(function(i,s){s===void 0&&(s={}),n.current&&(typeof i=="number"?t.navigate(i):t.navigate(i,mh({fromRouteId:e},s)))},[t,e])}function Ak(t){let{to:e,replace:n,state:r,relative:i}=t;fa()||me(!1);let{future:s,static:o}=D.useContext(Yi),{matches:a}=D.useContext(Qr),{pathname:l}=Bs(),c=du(),h=rd(e,nd(a,s.v7_relativeSplatPath),l,i==="path"),f=JSON.stringify(h);return D.useEffect(()=>c(JSON.parse(f),{replace:n,state:r,relative:i}),[c,f,i,n,r]),null}function xk(t){return mk(t.context)}function kk(t){let{basename:e="/",children:n=null,location:r,navigationType:i=at.Pop,navigator:s,static:o=!1,future:a}=t;fa()&&me(!1);let l=e.replace(/^\/*/,"/"),c=D.useMemo(()=>({basename:l,navigator:s,static:o,future:mh({v7_relativeSplatPath:!1},a)}),[l,a,s,o]);typeof r=="string"&&(r=Xi(r));let{pathname:h="/",search:f="",hash:p="",state:w=null,key:E="default"}=r,S=D.useMemo(()=>{let P=da(h,l);return P==null?null:{location:{pathname:P,search:f,hash:p,state:w,key:E},navigationType:i}},[l,h,f,p,w,E,i]);return S==null?null:D.createElement(Yi.Provider,{value:c},D.createElement(gg.Provider,{children:n,value:S}))}new Promise(()=>{});function Pk(t){let e={hasErrorBoundary:t.ErrorBoundary!=null||t.errorElement!=null};return t.Component&&Object.assign(e,{element:D.createElement(t.Component),Component:void 0}),t.HydrateFallback&&Object.assign(e,{hydrateFallbackElement:D.createElement(t.HydrateFallback),HydrateFallback:void 0}),t.ErrorBoundary&&Object.assign(e,{errorElement:D.createElement(t.ErrorBoundary),ErrorBoundary:void 0}),e}/**
 * React Router DOM v6.23.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Ql(){return Ql=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Ql.apply(this,arguments)}function Rk(t,e){if(t==null)return{};var n={},r=Object.keys(t),i,s;for(s=0;s<r.length;s++)i=r[s],!(e.indexOf(i)>=0)&&(n[i]=t[i]);return n}function Ok(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function Lk(t,e){return t.button===0&&(!e||e==="_self")&&!Ok(t)}const Nk=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","unstable_viewTransition"],Dk="6";try{window.__reactRouterVersion=Dk}catch{}function Mk(t,e){return Kx({basename:void 0,future:Ql({},void 0,{v7_prependBasename:!0}),history:yx({window:void 0}),hydrationData:Vk(),routes:t,mapRouteProperties:Pk,unstable_dataStrategy:void 0,window:void 0}).initialize()}function Vk(){var t;let e=(t=window)==null?void 0:t.__staticRouterHydrationData;return e&&e.errors&&(e=Ql({},e,{errors:Uk(e.errors)})),e}function Uk(t){if(!t)return null;let e=Object.entries(t),n={};for(let[r,i]of e)if(i&&i.__type==="RouteErrorResponse")n[r]=new dg(i.status,i.statusText,i.data,i.internal===!0);else if(i&&i.__type==="Error"){if(i.__subType){let s=window[i.__subType];if(typeof s=="function")try{let o=new s(i.message);o.stack="",n[r]=o}catch{}}if(n[r]==null){let s=new Error(i.message);s.stack="",n[r]=s}}else n[r]=i;return n}const $k=D.createContext({isTransitioning:!1}),Fk=D.createContext(new Map),jk="startTransition",q_=i2[jk],zk="flushSync",G_=gx[zk];function Bk(t){q_?q_(t):t()}function Xa(t){G_?G_(t):t()}let Hk=class{constructor(){this.status="pending",this.promise=new Promise((e,n)=>{this.resolve=r=>{this.status==="pending"&&(this.status="resolved",e(r))},this.reject=r=>{this.status==="pending"&&(this.status="rejected",n(r))}})}};function Wk(t){let{fallbackElement:e,router:n,future:r}=t,[i,s]=D.useState(n.state),[o,a]=D.useState(),[l,c]=D.useState({isTransitioning:!1}),[h,f]=D.useState(),[p,w]=D.useState(),[E,S]=D.useState(),P=D.useRef(new Map),{v7_startTransition:T}=r||{},_=D.useCallback(g=>{T?Bk(g):g()},[T]),C=D.useCallback((g,y)=>{let{deletedFetchers:b,unstable_flushSync:I,unstable_viewTransitionOpts:x}=y;b.forEach(A=>P.current.delete(A)),g.fetchers.forEach((A,Ie)=>{A.data!==void 0&&P.current.set(Ie,A.data)});let k=n.window==null||n.window.document==null||typeof n.window.document.startViewTransition!="function";if(!x||k){I?Xa(()=>s(g)):_(()=>s(g));return}if(I){Xa(()=>{p&&(h&&h.resolve(),p.skipTransition()),c({isTransitioning:!0,flushSync:!0,currentLocation:x.currentLocation,nextLocation:x.nextLocation})});let A=n.window.document.startViewTransition(()=>{Xa(()=>s(g))});A.finished.finally(()=>{Xa(()=>{f(void 0),w(void 0),a(void 0),c({isTransitioning:!1})})}),Xa(()=>w(A));return}p?(h&&h.resolve(),p.skipTransition(),S({state:g,currentLocation:x.currentLocation,nextLocation:x.nextLocation})):(a(g),c({isTransitioning:!0,flushSync:!1,currentLocation:x.currentLocation,nextLocation:x.nextLocation}))},[n.window,p,h,P,_]);D.useLayoutEffect(()=>n.subscribe(C),[n,C]),D.useEffect(()=>{l.isTransitioning&&!l.flushSync&&f(new Hk)},[l]),D.useEffect(()=>{if(h&&o&&n.window){let g=o,y=h.promise,b=n.window.document.startViewTransition(async()=>{_(()=>s(g)),await y});b.finished.finally(()=>{f(void 0),w(void 0),a(void 0),c({isTransitioning:!1})}),w(b)}},[_,o,h,n.window]),D.useEffect(()=>{h&&o&&i.location.key===o.location.key&&h.resolve()},[h,p,i.location,o]),D.useEffect(()=>{!l.isTransitioning&&E&&(a(E.state),c({isTransitioning:!0,flushSync:!1,currentLocation:E.currentLocation,nextLocation:E.nextLocation}),S(void 0))},[l.isTransitioning,E]),D.useEffect(()=>{},[]);let N=D.useMemo(()=>({createHref:n.createHref,encodeLocation:n.encodeLocation,go:g=>n.navigate(g),push:(g,y,b)=>n.navigate(g,{state:y,preventScrollReset:b==null?void 0:b.preventScrollReset}),replace:(g,y,b)=>n.navigate(g,{replace:!0,state:y,preventScrollReset:b==null?void 0:b.preventScrollReset})}),[n]),F=n.basename||"/",z=D.useMemo(()=>({router:n,navigator:N,static:!1,basename:F}),[n,N,F]);return D.createElement(D.Fragment,null,D.createElement(id.Provider,{value:z},D.createElement(pb.Provider,{value:i},D.createElement(Fk.Provider,{value:P.current},D.createElement($k.Provider,{value:l},D.createElement(kk,{basename:F,location:i.location,navigationType:i.historyAction,navigator:N,future:{v7_relativeSplatPath:n.future.v7_relativeSplatPath}},i.initialized||n.future.v7_partialHydration?D.createElement(qk,{routes:n.routes,future:n.future,state:i}):e))))),null)}function qk(t){let{routes:e,future:n,state:r}=t;return gk(e,void 0,r,n)}const Gk=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",Kk=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,yh=D.forwardRef(function(e,n){let{onClick:r,relative:i,reloadDocument:s,replace:o,state:a,target:l,to:c,preventScrollReset:h,unstable_viewTransition:f}=e,p=Rk(e,Nk),{basename:w}=D.useContext(Yi),E,S=!1;if(typeof c=="string"&&Kk.test(c)&&(E=c,Gk))try{let C=new URL(window.location.href),N=c.startsWith("//")?new URL(C.protocol+c):new URL(c),F=da(N.pathname,w);N.origin===C.origin&&F!=null?c=F+N.search+N.hash:S=!0}catch{}let P=dk(c,{relative:i}),T=Qk(c,{replace:o,state:a,target:l,preventScrollReset:h,relative:i,unstable_viewTransition:f});function _(C){r&&r(C),C.defaultPrevented||T(C)}return D.createElement("a",Ql({},p,{href:E||P,onClick:S||s?r:_,ref:n,target:l}))});var K_;(function(t){t.UseScrollRestoration="useScrollRestoration",t.UseSubmit="useSubmit",t.UseSubmitFetcher="useSubmitFetcher",t.UseFetcher="useFetcher",t.useViewTransitionState="useViewTransitionState"})(K_||(K_={}));var Q_;(function(t){t.UseFetcher="useFetcher",t.UseFetchers="useFetchers",t.UseScrollRestoration="useScrollRestoration"})(Q_||(Q_={}));function Qk(t,e){let{target:n,replace:r,state:i,preventScrollReset:s,relative:o,unstable_viewTransition:a}=e===void 0?{}:e,l=du(),c=Bs(),h=yb(t,{relative:o});return D.useCallback(f=>{if(Lk(f,n)){f.preventDefault();let p=r!==void 0?r:Os(c)===Os(h);l(t,{replace:p,state:i,preventScrollReset:s,relative:o,unstable_viewTransition:a})}},[c,l,h,r,i,n,t,s,o,a])}function wb(t){var e,n,r="";if(typeof t=="string"||typeof t=="number")r+=t;else if(typeof t=="object")if(Array.isArray(t)){var i=t.length;for(e=0;e<i;e++)t[e]&&(n=wb(t[e]))&&(r&&(r+=" "),r+=n)}else for(n in t)t[n]&&(r&&(r+=" "),r+=n);return r}function Xk(){for(var t,e,n=0,r="",i=arguments.length;n<i;n++)(t=arguments[n])&&(e=wb(t))&&(r&&(r+=" "),r+=e);return r}const yg="-";function Yk(t){const e=Zk(t),{conflictingClassGroups:n,conflictingClassGroupModifiers:r}=t;function i(o){const a=o.split(yg);return a[0]===""&&a.length!==1&&a.shift(),Eb(a,e)||Jk(o)}function s(o,a){const l=n[o]||[];return a&&r[o]?[...l,...r[o]]:l}return{getClassGroupId:i,getConflictingClassGroupIds:s}}function Eb(t,e){var o;if(t.length===0)return e.classGroupId;const n=t[0],r=e.nextPart.get(n),i=r?Eb(t.slice(1),r):void 0;if(i)return i;if(e.validators.length===0)return;const s=t.join(yg);return(o=e.validators.find(({validator:a})=>a(s)))==null?void 0:o.classGroupId}const X_=/^\[(.+)\]$/;function Jk(t){if(X_.test(t)){const e=X_.exec(t)[1],n=e==null?void 0:e.substring(0,e.indexOf(":"));if(n)return"arbitrary.."+n}}function Zk(t){const{theme:e,prefix:n}=t,r={nextPart:new Map,validators:[]};return tP(Object.entries(t.classGroups),n).forEach(([s,o])=>{Vp(o,r,s,e)}),r}function Vp(t,e,n,r){t.forEach(i=>{if(typeof i=="string"){const s=i===""?e:Y_(e,i);s.classGroupId=n;return}if(typeof i=="function"){if(eP(i)){Vp(i(r),e,n,r);return}e.validators.push({validator:i,classGroupId:n});return}Object.entries(i).forEach(([s,o])=>{Vp(o,Y_(e,s),n,r)})})}function Y_(t,e){let n=t;return e.split(yg).forEach(r=>{n.nextPart.has(r)||n.nextPart.set(r,{nextPart:new Map,validators:[]}),n=n.nextPart.get(r)}),n}function eP(t){return t.isThemeGetter}function tP(t,e){return e?t.map(([n,r])=>{const i=r.map(s=>typeof s=="string"?e+s:typeof s=="object"?Object.fromEntries(Object.entries(s).map(([o,a])=>[e+o,a])):s);return[n,i]}):t}function nP(t){if(t<1)return{get:()=>{},set:()=>{}};let e=0,n=new Map,r=new Map;function i(s,o){n.set(s,o),e++,e>t&&(e=0,r=n,n=new Map)}return{get(s){let o=n.get(s);if(o!==void 0)return o;if((o=r.get(s))!==void 0)return i(s,o),o},set(s,o){n.has(s)?n.set(s,o):i(s,o)}}}const bb="!";function rP(t){const e=t.separator,n=e.length===1,r=e[0],i=e.length;return function(o){const a=[];let l=0,c=0,h;for(let S=0;S<o.length;S++){let P=o[S];if(l===0){if(P===r&&(n||o.slice(S,S+i)===e)){a.push(o.slice(c,S)),c=S+i;continue}if(P==="/"){h=S;continue}}P==="["?l++:P==="]"&&l--}const f=a.length===0?o:o.substring(c),p=f.startsWith(bb),w=p?f.substring(1):f,E=h&&h>c?h-c:void 0;return{modifiers:a,hasImportantModifier:p,baseClassName:w,maybePostfixModifierPosition:E}}}function iP(t){if(t.length<=1)return t;const e=[];let n=[];return t.forEach(r=>{r[0]==="["?(e.push(...n.sort(),r),n=[]):n.push(r)}),e.push(...n.sort()),e}function sP(t){return{cache:nP(t.cacheSize),splitModifiers:rP(t),...Yk(t)}}const oP=/\s+/;function aP(t,e){const{splitModifiers:n,getClassGroupId:r,getConflictingClassGroupIds:i}=e,s=new Set;return t.trim().split(oP).map(o=>{const{modifiers:a,hasImportantModifier:l,baseClassName:c,maybePostfixModifierPosition:h}=n(o);let f=r(h?c.substring(0,h):c),p=!!h;if(!f){if(!h)return{isTailwindClass:!1,originalClassName:o};if(f=r(c),!f)return{isTailwindClass:!1,originalClassName:o};p=!1}const w=iP(a).join(":");return{isTailwindClass:!0,modifierId:l?w+bb:w,classGroupId:f,originalClassName:o,hasPostfixModifier:p}}).reverse().filter(o=>{if(!o.isTailwindClass)return!0;const{modifierId:a,classGroupId:l,hasPostfixModifier:c}=o,h=a+l;return s.has(h)?!1:(s.add(h),i(l,c).forEach(f=>s.add(a+f)),!0)}).reverse().map(o=>o.originalClassName).join(" ")}function lP(){let t=0,e,n,r="";for(;t<arguments.length;)(e=arguments[t++])&&(n=Tb(e))&&(r&&(r+=" "),r+=n);return r}function Tb(t){if(typeof t=="string")return t;let e,n="";for(let r=0;r<t.length;r++)t[r]&&(e=Tb(t[r]))&&(n&&(n+=" "),n+=e);return n}function uP(t,...e){let n,r,i,s=o;function o(l){const c=e.reduce((h,f)=>f(h),t());return n=sP(c),r=n.cache.get,i=n.cache.set,s=a,a(l)}function a(l){const c=r(l);if(c)return c;const h=aP(l,n);return i(l,h),h}return function(){return s(lP.apply(null,arguments))}}function Ue(t){const e=n=>n[t]||[];return e.isThemeGetter=!0,e}const Cb=/^\[(?:([a-z-]+):)?(.+)\]$/i,cP=/^\d+\/\d+$/,hP=new Set(["px","full","screen"]),dP=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,fP=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,pP=/^(rgba?|hsla?|hwb|(ok)?(lab|lch))\(.+\)$/,mP=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,gP=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/;function br(t){return _s(t)||hP.has(t)||cP.test(t)}function ai(t){return pa(t,"length",CP)}function _s(t){return!!t&&!Number.isNaN(Number(t))}function cc(t){return pa(t,"number",_s)}function Ya(t){return!!t&&Number.isInteger(Number(t))}function yP(t){return t.endsWith("%")&&_s(t.slice(0,-1))}function de(t){return Cb.test(t)}function li(t){return dP.test(t)}const vP=new Set(["length","size","percentage"]);function _P(t){return pa(t,vP,Ib)}function wP(t){return pa(t,"position",Ib)}const EP=new Set(["image","url"]);function bP(t){return pa(t,EP,SP)}function TP(t){return pa(t,"",IP)}function Ja(){return!0}function pa(t,e,n){const r=Cb.exec(t);return r?r[1]?typeof e=="string"?r[1]===e:e.has(r[1]):n(r[2]):!1}function CP(t){return fP.test(t)&&!pP.test(t)}function Ib(){return!1}function IP(t){return mP.test(t)}function SP(t){return gP.test(t)}function AP(){const t=Ue("colors"),e=Ue("spacing"),n=Ue("blur"),r=Ue("brightness"),i=Ue("borderColor"),s=Ue("borderRadius"),o=Ue("borderSpacing"),a=Ue("borderWidth"),l=Ue("contrast"),c=Ue("grayscale"),h=Ue("hueRotate"),f=Ue("invert"),p=Ue("gap"),w=Ue("gradientColorStops"),E=Ue("gradientColorStopPositions"),S=Ue("inset"),P=Ue("margin"),T=Ue("opacity"),_=Ue("padding"),C=Ue("saturate"),N=Ue("scale"),F=Ue("sepia"),z=Ue("skew"),g=Ue("space"),y=Ue("translate"),b=()=>["auto","contain","none"],I=()=>["auto","hidden","clip","visible","scroll"],x=()=>["auto",de,e],k=()=>[de,e],A=()=>["",br,ai],Ie=()=>["auto",_s,de],it=()=>["bottom","center","left","left-bottom","left-top","right","right-bottom","right-top","top"],Ht=()=>["solid","dashed","dotted","double","none"],_t=()=>["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],H=()=>["start","end","center","between","around","evenly","stretch"],ee=()=>["","0",de],re=()=>["auto","avoid","all","avoid-page","page","left","right","column"],_e=()=>[_s,cc],he=()=>[_s,de];return{cacheSize:500,separator:":",theme:{colors:[Ja],spacing:[br,ai],blur:["none","",li,de],brightness:_e(),borderColor:[t],borderRadius:["none","","full",li,de],borderSpacing:k(),borderWidth:A(),contrast:_e(),grayscale:ee(),hueRotate:he(),invert:ee(),gap:k(),gradientColorStops:[t],gradientColorStopPositions:[yP,ai],inset:x(),margin:x(),opacity:_e(),padding:k(),saturate:_e(),scale:_e(),sepia:ee(),skew:he(),space:k(),translate:k()},classGroups:{aspect:[{aspect:["auto","square","video",de]}],container:["container"],columns:[{columns:[li]}],"break-after":[{"break-after":re()}],"break-before":[{"break-before":re()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:[...it(),de]}],overflow:[{overflow:I()}],"overflow-x":[{"overflow-x":I()}],"overflow-y":[{"overflow-y":I()}],overscroll:[{overscroll:b()}],"overscroll-x":[{"overscroll-x":b()}],"overscroll-y":[{"overscroll-y":b()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:[S]}],"inset-x":[{"inset-x":[S]}],"inset-y":[{"inset-y":[S]}],start:[{start:[S]}],end:[{end:[S]}],top:[{top:[S]}],right:[{right:[S]}],bottom:[{bottom:[S]}],left:[{left:[S]}],visibility:["visible","invisible","collapse"],z:[{z:["auto",Ya,de]}],basis:[{basis:x()}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["wrap","wrap-reverse","nowrap"]}],flex:[{flex:["1","auto","initial","none",de]}],grow:[{grow:ee()}],shrink:[{shrink:ee()}],order:[{order:["first","last","none",Ya,de]}],"grid-cols":[{"grid-cols":[Ja]}],"col-start-end":[{col:["auto",{span:["full",Ya,de]},de]}],"col-start":[{"col-start":Ie()}],"col-end":[{"col-end":Ie()}],"grid-rows":[{"grid-rows":[Ja]}],"row-start-end":[{row:["auto",{span:[Ya,de]},de]}],"row-start":[{"row-start":Ie()}],"row-end":[{"row-end":Ie()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":["auto","min","max","fr",de]}],"auto-rows":[{"auto-rows":["auto","min","max","fr",de]}],gap:[{gap:[p]}],"gap-x":[{"gap-x":[p]}],"gap-y":[{"gap-y":[p]}],"justify-content":[{justify:["normal",...H()]}],"justify-items":[{"justify-items":["start","end","center","stretch"]}],"justify-self":[{"justify-self":["auto","start","end","center","stretch"]}],"align-content":[{content:["normal",...H(),"baseline"]}],"align-items":[{items:["start","end","center","baseline","stretch"]}],"align-self":[{self:["auto","start","end","center","stretch","baseline"]}],"place-content":[{"place-content":[...H(),"baseline"]}],"place-items":[{"place-items":["start","end","center","baseline","stretch"]}],"place-self":[{"place-self":["auto","start","end","center","stretch"]}],p:[{p:[_]}],px:[{px:[_]}],py:[{py:[_]}],ps:[{ps:[_]}],pe:[{pe:[_]}],pt:[{pt:[_]}],pr:[{pr:[_]}],pb:[{pb:[_]}],pl:[{pl:[_]}],m:[{m:[P]}],mx:[{mx:[P]}],my:[{my:[P]}],ms:[{ms:[P]}],me:[{me:[P]}],mt:[{mt:[P]}],mr:[{mr:[P]}],mb:[{mb:[P]}],ml:[{ml:[P]}],"space-x":[{"space-x":[g]}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":[g]}],"space-y-reverse":["space-y-reverse"],w:[{w:["auto","min","max","fit","svw","lvw","dvw",de,e]}],"min-w":[{"min-w":[de,e,"min","max","fit"]}],"max-w":[{"max-w":[de,e,"none","full","min","max","fit","prose",{screen:[li]},li]}],h:[{h:[de,e,"auto","min","max","fit","svh","lvh","dvh"]}],"min-h":[{"min-h":[de,e,"min","max","fit","svh","lvh","dvh"]}],"max-h":[{"max-h":[de,e,"min","max","fit","svh","lvh","dvh"]}],size:[{size:[de,e,"auto","min","max","fit"]}],"font-size":[{text:["base",li,ai]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:["thin","extralight","light","normal","medium","semibold","bold","extrabold","black",cc]}],"font-family":[{font:[Ja]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractons"],tracking:[{tracking:["tighter","tight","normal","wide","wider","widest",de]}],"line-clamp":[{"line-clamp":["none",_s,cc]}],leading:[{leading:["none","tight","snug","normal","relaxed","loose",br,de]}],"list-image":[{"list-image":["none",de]}],"list-style-type":[{list:["none","disc","decimal",de]}],"list-style-position":[{list:["inside","outside"]}],"placeholder-color":[{placeholder:[t]}],"placeholder-opacity":[{"placeholder-opacity":[T]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"text-color":[{text:[t]}],"text-opacity":[{"text-opacity":[T]}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[...Ht(),"wavy"]}],"text-decoration-thickness":[{decoration:["auto","from-font",br,ai]}],"underline-offset":[{"underline-offset":["auto",br,de]}],"text-decoration-color":[{decoration:[t]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:k()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",de]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",de]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-opacity":[{"bg-opacity":[T]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:[...it(),wP]}],"bg-repeat":[{bg:["no-repeat",{repeat:["","x","y","round","space"]}]}],"bg-size":[{bg:["auto","cover","contain",_P]}],"bg-image":[{bg:["none",{"gradient-to":["t","tr","r","br","b","bl","l","tl"]},bP]}],"bg-color":[{bg:[t]}],"gradient-from-pos":[{from:[E]}],"gradient-via-pos":[{via:[E]}],"gradient-to-pos":[{to:[E]}],"gradient-from":[{from:[w]}],"gradient-via":[{via:[w]}],"gradient-to":[{to:[w]}],rounded:[{rounded:[s]}],"rounded-s":[{"rounded-s":[s]}],"rounded-e":[{"rounded-e":[s]}],"rounded-t":[{"rounded-t":[s]}],"rounded-r":[{"rounded-r":[s]}],"rounded-b":[{"rounded-b":[s]}],"rounded-l":[{"rounded-l":[s]}],"rounded-ss":[{"rounded-ss":[s]}],"rounded-se":[{"rounded-se":[s]}],"rounded-ee":[{"rounded-ee":[s]}],"rounded-es":[{"rounded-es":[s]}],"rounded-tl":[{"rounded-tl":[s]}],"rounded-tr":[{"rounded-tr":[s]}],"rounded-br":[{"rounded-br":[s]}],"rounded-bl":[{"rounded-bl":[s]}],"border-w":[{border:[a]}],"border-w-x":[{"border-x":[a]}],"border-w-y":[{"border-y":[a]}],"border-w-s":[{"border-s":[a]}],"border-w-e":[{"border-e":[a]}],"border-w-t":[{"border-t":[a]}],"border-w-r":[{"border-r":[a]}],"border-w-b":[{"border-b":[a]}],"border-w-l":[{"border-l":[a]}],"border-opacity":[{"border-opacity":[T]}],"border-style":[{border:[...Ht(),"hidden"]}],"divide-x":[{"divide-x":[a]}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":[a]}],"divide-y-reverse":["divide-y-reverse"],"divide-opacity":[{"divide-opacity":[T]}],"divide-style":[{divide:Ht()}],"border-color":[{border:[i]}],"border-color-x":[{"border-x":[i]}],"border-color-y":[{"border-y":[i]}],"border-color-t":[{"border-t":[i]}],"border-color-r":[{"border-r":[i]}],"border-color-b":[{"border-b":[i]}],"border-color-l":[{"border-l":[i]}],"divide-color":[{divide:[i]}],"outline-style":[{outline:["",...Ht()]}],"outline-offset":[{"outline-offset":[br,de]}],"outline-w":[{outline:[br,ai]}],"outline-color":[{outline:[t]}],"ring-w":[{ring:A()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:[t]}],"ring-opacity":[{"ring-opacity":[T]}],"ring-offset-w":[{"ring-offset":[br,ai]}],"ring-offset-color":[{"ring-offset":[t]}],shadow:[{shadow:["","inner","none",li,TP]}],"shadow-color":[{shadow:[Ja]}],opacity:[{opacity:[T]}],"mix-blend":[{"mix-blend":[..._t(),"plus-lighter","plus-darker"]}],"bg-blend":[{"bg-blend":_t()}],filter:[{filter:["","none"]}],blur:[{blur:[n]}],brightness:[{brightness:[r]}],contrast:[{contrast:[l]}],"drop-shadow":[{"drop-shadow":["","none",li,de]}],grayscale:[{grayscale:[c]}],"hue-rotate":[{"hue-rotate":[h]}],invert:[{invert:[f]}],saturate:[{saturate:[C]}],sepia:[{sepia:[F]}],"backdrop-filter":[{"backdrop-filter":["","none"]}],"backdrop-blur":[{"backdrop-blur":[n]}],"backdrop-brightness":[{"backdrop-brightness":[r]}],"backdrop-contrast":[{"backdrop-contrast":[l]}],"backdrop-grayscale":[{"backdrop-grayscale":[c]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[h]}],"backdrop-invert":[{"backdrop-invert":[f]}],"backdrop-opacity":[{"backdrop-opacity":[T]}],"backdrop-saturate":[{"backdrop-saturate":[C]}],"backdrop-sepia":[{"backdrop-sepia":[F]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":[o]}],"border-spacing-x":[{"border-spacing-x":[o]}],"border-spacing-y":[{"border-spacing-y":[o]}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["none","all","","colors","opacity","shadow","transform",de]}],duration:[{duration:he()}],ease:[{ease:["linear","in","out","in-out",de]}],delay:[{delay:he()}],animate:[{animate:["none","spin","ping","pulse","bounce",de]}],transform:[{transform:["","gpu","none"]}],scale:[{scale:[N]}],"scale-x":[{"scale-x":[N]}],"scale-y":[{"scale-y":[N]}],rotate:[{rotate:[Ya,de]}],"translate-x":[{"translate-x":[y]}],"translate-y":[{"translate-y":[y]}],"skew-x":[{"skew-x":[z]}],"skew-y":[{"skew-y":[z]}],"transform-origin":[{origin:["center","top","top-right","right","bottom-right","bottom","bottom-left","left","top-left",de]}],accent:[{accent:["auto",t]}],appearance:[{appearance:["none","auto"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",de]}],"caret-color":[{caret:[t]}],"pointer-events":[{"pointer-events":["none","auto"]}],resize:[{resize:["none","y","x",""]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":k()}],"scroll-mx":[{"scroll-mx":k()}],"scroll-my":[{"scroll-my":k()}],"scroll-ms":[{"scroll-ms":k()}],"scroll-me":[{"scroll-me":k()}],"scroll-mt":[{"scroll-mt":k()}],"scroll-mr":[{"scroll-mr":k()}],"scroll-mb":[{"scroll-mb":k()}],"scroll-ml":[{"scroll-ml":k()}],"scroll-p":[{"scroll-p":k()}],"scroll-px":[{"scroll-px":k()}],"scroll-py":[{"scroll-py":k()}],"scroll-ps":[{"scroll-ps":k()}],"scroll-pe":[{"scroll-pe":k()}],"scroll-pt":[{"scroll-pt":k()}],"scroll-pr":[{"scroll-pr":k()}],"scroll-pb":[{"scroll-pb":k()}],"scroll-pl":[{"scroll-pl":k()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",de]}],fill:[{fill:[t,"none"]}],"stroke-w":[{stroke:[br,ai,cc]}],stroke:[{stroke:[t,"none"]}],sr:["sr-only","not-sr-only"],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]}}}const xP=uP(AP);function Ln(...t){return xP(Xk(t))}function Xo(){return Xo=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Xo.apply(null,arguments)}function kP(t,e){typeof t=="function"?t(e):t!=null&&(t.current=e)}function PP(...t){return e=>t.forEach(n=>kP(n,e))}const vg=D.forwardRef((t,e)=>{const{children:n,...r}=t,i=D.Children.toArray(n),s=i.find(OP);if(s){const o=s.props.children,a=i.map(l=>l===s?D.Children.count(o)>1?D.Children.only(null):D.isValidElement(o)?o.props.children:null:l);return D.createElement(Up,Xo({},r,{ref:e}),D.isValidElement(o)?D.cloneElement(o,void 0,a):null)}return D.createElement(Up,Xo({},r,{ref:e}),n)});vg.displayName="Slot";const Up=D.forwardRef((t,e)=>{const{children:n,...r}=t;return D.isValidElement(n)?D.cloneElement(n,{...LP(r,n.props),ref:e?PP(e,n.ref):n.ref}):D.Children.count(n)>1?D.Children.only(null):null});Up.displayName="SlotClone";const RP=({children:t})=>D.createElement(D.Fragment,null,t);function OP(t){return D.isValidElement(t)&&t.type===RP}function LP(t,e){const n={...e};for(const r in e){const i=t[r],s=e[r];/^on[A-Z]/.test(r)?i&&s?n[r]=(...a)=>{s(...a),i(...a)}:i&&(n[r]=i):r==="style"?n[r]={...i,...s}:r==="className"&&(n[r]=[i,s].filter(Boolean).join(" "))}return{...t,...n}}function Sb(t){var e,n,r="";if(typeof t=="string"||typeof t=="number")r+=t;else if(typeof t=="object")if(Array.isArray(t))for(e=0;e<t.length;e++)t[e]&&(n=Sb(t[e]))&&(r&&(r+=" "),r+=n);else for(e in t)t[e]&&(r&&(r+=" "),r+=e);return r}function NP(){for(var t,e,n=0,r="";n<arguments.length;)(t=arguments[n++])&&(e=Sb(t))&&(r&&(r+=" "),r+=e);return r}const J_=t=>typeof t=="boolean"?"".concat(t):t===0?"0":t,Z_=NP,Ab=(t,e)=>n=>{var r;if((e==null?void 0:e.variants)==null)return Z_(t,n==null?void 0:n.class,n==null?void 0:n.className);const{variants:i,defaultVariants:s}=e,o=Object.keys(i).map(c=>{const h=n==null?void 0:n[c],f=s==null?void 0:s[c];if(h===null)return null;const p=J_(h)||J_(f);return i[c][p]}),a=n&&Object.entries(n).reduce((c,h)=>{let[f,p]=h;return p===void 0||(c[f]=p),c},{}),l=e==null||(r=e.compoundVariants)===null||r===void 0?void 0:r.reduce((c,h)=>{let{class:f,className:p,...w}=h;return Object.entries(w).every(E=>{let[S,P]=E;return Array.isArray(P)?P.includes({...s,...a}[S]):{...s,...a}[S]===P})?[...c,f,p]:c},[]);return Z_(t,o,l,n==null?void 0:n.class,n==null?void 0:n.className)},$p=Ab("inline-flex items-center justify-center whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),Yo=D.forwardRef(({className:t,variant:e,size:n,asChild:r=!1,...i},s)=>{const o=r?vg:"button";return R.jsx(o,{className:Ln($p({variant:e,size:n,className:t})),ref:s,...i})});Yo.displayName="Button";const DP="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20fill='none'%20viewBox='0%200%2024%2024'%20stroke-width='1.5'%20stroke='currentColor'%20class='size-6'%3e%3cpath%20stroke-linecap='round'%20stroke-linejoin='round'%20d='m2.25%2012%208.954-8.955c.44-.439%201.152-.439%201.591%200L21.75%2012M4.5%209.75v10.125c0%20.621.504%201.125%201.125%201.125H9.75v-4.875c0-.621.504-1.125%201.125-1.125h2.25c.621%200%201.125.504%201.125%201.125V21h4.125c.621%200%201.125-.504%201.125-1.125V9.75M8.25%2021h8.25'%20/%3e%3c/svg%3e",MP="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20fill='none'%20viewBox='0%200%2024%2024'%20stroke-width='1.5'%20stroke='currentColor'%20class='size-6'%3e%3cpath%20stroke-linecap='round'%20stroke-linejoin='round'%20d='M12%204.5v15m7.5-7.5h-15'%20/%3e%3c/svg%3e",VP="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20fill='none'%20viewBox='0%200%2024%2024'%20stroke-width='1.5'%20stroke='currentColor'%20class='size-6'%3e%3cpath%20stroke-linecap='round'%20stroke-linejoin='round'%20d='M6.827%206.175A2.31%202.31%200%200%201%205.186%207.23c-.38.054-.757.112-1.134.175C2.999%207.58%202.25%208.507%202.25%209.574V18a2.25%202.25%200%200%200%202.25%202.25h15A2.25%202.25%200%200%200%2021.75%2018V9.574c0-1.067-.75-1.994-1.802-2.169a47.865%2047.865%200%200%200-1.134-.175%202.31%202.31%200%200%201-1.64-1.055l-.822-1.316a2.192%202.192%200%200%200-1.736-1.039%2048.774%2048.774%200%200%200-5.232%200%202.192%202.192%200%200%200-1.736%201.039l-.821%201.316Z'%20/%3e%3cpath%20stroke-linecap='round'%20stroke-linejoin='round'%20d='M16.5%2012.75a4.5%204.5%200%201%201-9%200%204.5%204.5%200%200%201%209%200ZM18.75%2010.5h.008v.008h-.008V10.5Z'%20/%3e%3c/svg%3e",UP="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20fill='none'%20viewBox='0%200%2024%2024'%20stroke-width='1.5'%20stroke='currentColor'%20class='size-6'%3e%3cpath%20stroke-linecap='round'%20stroke-linejoin='round'%20d='M17.982%2018.725A7.488%207.488%200%200%200%2012%2015.75a7.488%207.488%200%200%200-5.982%202.975m11.963%200a9%209%200%201%200-11.963%200m11.963%200A8.966%208.966%200%200%201%2012%2021a8.966%208.966%200%200%201-5.982-2.275M15%209.75a3%203%200%201%201-6%200%203%203%200%200%201%206%200Z'%20/%3e%3c/svg%3e",$P="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20fill='none'%20viewBox='0%200%2024%2024'%20stroke-width='1.5'%20stroke='currentColor'%20class='size-6'%3e%3cpath%20stroke-linecap='round'%20stroke-linejoin='round'%20d='M14.857%2017.082a23.848%2023.848%200%200%200%205.454-1.31A8.967%208.967%200%200%201%2018%209.75V9A6%206%200%200%200%206%209v.75a8.967%208.967%200%200%201-2.312%206.022c1.733.64%203.56%201.085%205.455%201.31m5.714%200a24.255%2024.255%200%200%201-5.714%200m5.714%200a3%203%200%201%201-5.714%200'%20/%3e%3c/svg%3e",FP="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20fill='none'%20viewBox='0%200%2024%2024'%20stroke-width='1.5'%20stroke='currentColor'%20class='size-6'%3e%3cpath%20stroke-linecap='round'%20stroke-linejoin='round'%20d='M6%2012%203.269%203.125A59.769%2059.769%200%200%201%2021.485%2012%2059.768%2059.768%200%200%201%203.27%2020.875L5.999%2012Zm0%200h7.5'%20/%3e%3c/svg%3e",jP="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20fill='none'%20viewBox='0%200%2024%2024'%20stroke-width='1.5'%20stroke='currentColor'%20class='size-6'%3e%3cpath%20stroke-linecap='round'%20stroke-linejoin='round'%20d='M10.343%203.94c.09-.542.56-.94%201.11-.94h1.093c.55%200%201.02.398%201.11.94l.149.894c.07.424.384.764.78.93.398.164.855.142%201.205-.108l.737-.527a1.125%201.125%200%200%201%201.45.12l.773.774c.39.389.44%201.002.12%201.45l-.527.737c-.25.35-.272.806-.107%201.204.165.397.505.71.93.78l.893.15c.543.09.94.559.94%201.109v1.094c0%20.55-.397%201.02-.94%201.11l-.894.149c-.424.07-.764.383-.929.78-.165.398-.143.854.107%201.204l.527.738c.32.447.269%201.06-.12%201.45l-.774.773a1.125%201.125%200%200%201-1.449.12l-.738-.527c-.35-.25-.806-.272-1.203-.107-.398.165-.71.505-.781.929l-.149.894c-.09.542-.56.94-1.11.94h-1.094c-.55%200-1.019-.398-1.11-.94l-.148-.894c-.071-.424-.384-.764-.781-.93-.398-.164-.854-.142-1.204.108l-.738.527c-.447.32-1.06.269-1.45-.12l-.773-.774a1.125%201.125%200%200%201-.12-1.45l.527-.737c.25-.35.272-.806.108-1.204-.165-.397-.506-.71-.93-.78l-.894-.15c-.542-.09-.94-.56-.94-1.109v-1.094c0-.55.398-1.02.94-1.11l.894-.149c.424-.07.765-.383.93-.78.165-.398.143-.854-.108-1.204l-.526-.738a1.125%201.125%200%200%201%20.12-1.45l.773-.773a1.125%201.125%200%200%201%201.45-.12l.737.527c.35.25.807.272%201.204.107.397-.165.71-.505.78-.929l.15-.894Z'%20/%3e%3cpath%20stroke-linecap='round'%20stroke-linejoin='round'%20d='M15%2012a3%203%200%201%201-6%200%203%203%200%200%201%206%200Z'%20/%3e%3c/svg%3e",zP=[{name:"Home",link:"/edelgram/",icon:DP},{name:"Add photos",link:"/edelgram/createpost",icon:MP},{name:"My photos",link:"/edelgram/myphotos",icon:VP},{name:"Profile",link:"/edelgram/profile",icon:UP},{name:"Notifications",link:"#",icon:$P},{name:"Direct",link:"#",icon:FP},{name:"Settings",link:"#",icon:jP}];var e0={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xb=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let i=t.charCodeAt(r);i<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=i&63|128):(i&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=i&63|128):(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=i&63|128)}return e},BP=function(t){const e=[];let n=0,r=0;for(;n<t.length;){const i=t[n++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){const s=t[n++];e[r++]=String.fromCharCode((i&31)<<6|s&63)}else if(i>239&&i<365){const s=t[n++],o=t[n++],a=t[n++],l=((i&7)<<18|(s&63)<<12|(o&63)<<6|a&63)-65536;e[r++]=String.fromCharCode(55296+(l>>10)),e[r++]=String.fromCharCode(56320+(l&1023))}else{const s=t[n++],o=t[n++];e[r++]=String.fromCharCode((i&15)<<12|(s&63)<<6|o&63)}}return e.join("")},kb={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<t.length;i+=3){const s=t[i],o=i+1<t.length,a=o?t[i+1]:0,l=i+2<t.length,c=l?t[i+2]:0,h=s>>2,f=(s&3)<<4|a>>4;let p=(a&15)<<2|c>>6,w=c&63;l||(w=64,o||(p=64)),r.push(n[h],n[f],n[p],n[w])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(xb(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):BP(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<t.length;){const s=n[t.charAt(i++)],a=i<t.length?n[t.charAt(i)]:0;++i;const c=i<t.length?n[t.charAt(i)]:64;++i;const f=i<t.length?n[t.charAt(i)]:64;if(++i,s==null||a==null||c==null||f==null)throw new HP;const p=s<<2|a>>4;if(r.push(p),c!==64){const w=a<<4&240|c>>2;if(r.push(w),f!==64){const E=c<<6&192|f;r.push(E)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class HP extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const WP=function(t){const e=xb(t);return kb.encodeByteArray(e,!0)},vh=function(t){return WP(t).replace(/\./g,"")},Pb=function(t){try{return kb.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qP(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const GP=()=>qP().__FIREBASE_DEFAULTS__,KP=()=>{if(typeof process>"u"||typeof e0>"u")return;const t=e0.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},QP=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&Pb(t[1]);return e&&JSON.parse(e)},sd=()=>{try{return GP()||KP()||QP()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},Rb=t=>{var e,n;return(n=(e=sd())===null||e===void 0?void 0:e.emulatorHosts)===null||n===void 0?void 0:n[t]},XP=t=>{const e=Rb(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),r]:[e.substring(0,n),r]},Ob=()=>{var t;return(t=sd())===null||t===void 0?void 0:t.config},Lb=t=>{var e;return(e=sd())===null||e===void 0?void 0:e[`_${t}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YP{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function JP(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},r=e||"demo-project",i=t.iat||0,s=t.sub||t.user_id;if(!s)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:i,exp:i+3600,auth_time:i,sub:s,user_id:s,firebase:{sign_in_provider:"custom",identities:{}}},t);return[vh(JSON.stringify(n)),vh(JSON.stringify(o)),""].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Lt(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function ZP(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Lt())}function eR(){var t;const e=(t=sd())===null||t===void 0?void 0:t.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function tR(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function nR(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function rR(){const t=Lt();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function iR(){return!eR()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function sR(){try{return typeof indexedDB=="object"}catch{return!1}}function oR(){return new Promise((t,e)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},i.onupgradeneeded=()=>{n=!1},i.onerror=()=>{var s;e(((s=i.error)===null||s===void 0?void 0:s.message)||"")}}catch(n){e(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aR="FirebaseError";class Xr extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=aR,Object.setPrototypeOf(this,Xr.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,fu.prototype.create)}}class fu{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){const r=n[0]||{},i=`${this.service}/${e}`,s=this.errors[e],o=s?lR(s,r):"Error",a=`${this.serviceName}: ${o} (${i}).`;return new Xr(i,a,r)}}function lR(t,e){return t.replace(uR,(n,r)=>{const i=e[r];return i!=null?String(i):`<${r}?>`})}const uR=/\{\$([^}]+)}/g;function cR(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function _h(t,e){if(t===e)return!0;const n=Object.keys(t),r=Object.keys(e);for(const i of n){if(!r.includes(i))return!1;const s=t[i],o=e[i];if(t0(s)&&t0(o)){if(!_h(s,o))return!1}else if(s!==o)return!1}for(const i of r)if(!n.includes(i))return!1;return!0}function t0(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pu(t){const e=[];for(const[n,r]of Object.entries(t))Array.isArray(r)?r.forEach(i=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(i))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function ll(t){const e={};return t.replace(/^\?/,"").split("&").forEach(r=>{if(r){const[i,s]=r.split("=");e[decodeURIComponent(i)]=decodeURIComponent(s)}}),e}function ul(t){const e=t.indexOf("?");if(!e)return"";const n=t.indexOf("#",e);return t.substring(e,n>0?n:void 0)}function hR(t,e){const n=new dR(t,e);return n.subscribe.bind(n)}class dR{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,r){let i;if(e===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");fR(e,["next","error","complete"])?i=e:i={next:e,error:n,complete:r},i.next===void 0&&(i.next=bf),i.error===void 0&&(i.error=bf),i.complete===void 0&&(i.complete=bf);const s=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),s}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function fR(t,e){if(typeof t!="object"||t===null)return!1;for(const n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function bf(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Yt(t){return t&&t._delegate?t._delegate:t}class Ls{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fs="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pR{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const r=new YP;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const i=this.getOrInitializeService({instanceIdentifier:n});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){var n;const r=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),i=(n=e==null?void 0:e.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(s){if(i)return null;throw s}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(gR(e))try{this.getOrInitializeService({instanceIdentifier:fs})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const i=this.normalizeInstanceIdentifier(n);try{const s=this.getOrInitializeService({instanceIdentifier:i});r.resolve(s)}catch{}}}}clearInstance(e=fs){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=fs){return this.instances.has(e)}getOptions(e=fs){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const i=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[s,o]of this.instancesDeferred.entries()){const a=this.normalizeInstanceIdentifier(s);r===a&&o.resolve(i)}return i}onInit(e,n){var r;const i=this.normalizeInstanceIdentifier(n),s=(r=this.onInitCallbacks.get(i))!==null&&r!==void 0?r:new Set;s.add(e),this.onInitCallbacks.set(i,s);const o=this.instances.get(i);return o&&e(o,i),()=>{s.delete(e)}}invokeOnInitCallbacks(e,n){const r=this.onInitCallbacks.get(n);if(r)for(const i of r)try{i(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:mR(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=fs){return this.component?this.component.multipleInstances?e:fs:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function mR(t){return t===fs?void 0:t}function gR(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yR{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new pR(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Ee;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(Ee||(Ee={}));const vR={debug:Ee.DEBUG,verbose:Ee.VERBOSE,info:Ee.INFO,warn:Ee.WARN,error:Ee.ERROR,silent:Ee.SILENT},_R=Ee.INFO,wR={[Ee.DEBUG]:"log",[Ee.VERBOSE]:"log",[Ee.INFO]:"info",[Ee.WARN]:"warn",[Ee.ERROR]:"error"},ER=(t,e,...n)=>{if(e<t.logLevel)return;const r=new Date().toISOString(),i=wR[e];if(i)console[i](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class _g{constructor(e){this.name=e,this._logLevel=_R,this._logHandler=ER,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Ee))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?vR[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Ee.DEBUG,...e),this._logHandler(this,Ee.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Ee.VERBOSE,...e),this._logHandler(this,Ee.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Ee.INFO,...e),this._logHandler(this,Ee.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Ee.WARN,...e),this._logHandler(this,Ee.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Ee.ERROR,...e),this._logHandler(this,Ee.ERROR,...e)}}const bR=(t,e)=>e.some(n=>t instanceof n);let n0,r0;function TR(){return n0||(n0=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function CR(){return r0||(r0=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const Nb=new WeakMap,Fp=new WeakMap,Db=new WeakMap,Tf=new WeakMap,wg=new WeakMap;function IR(t){const e=new Promise((n,r)=>{const i=()=>{t.removeEventListener("success",s),t.removeEventListener("error",o)},s=()=>{n(Ri(t.result)),i()},o=()=>{r(t.error),i()};t.addEventListener("success",s),t.addEventListener("error",o)});return e.then(n=>{n instanceof IDBCursor&&Nb.set(n,t)}).catch(()=>{}),wg.set(e,t),e}function SR(t){if(Fp.has(t))return;const e=new Promise((n,r)=>{const i=()=>{t.removeEventListener("complete",s),t.removeEventListener("error",o),t.removeEventListener("abort",o)},s=()=>{n(),i()},o=()=>{r(t.error||new DOMException("AbortError","AbortError")),i()};t.addEventListener("complete",s),t.addEventListener("error",o),t.addEventListener("abort",o)});Fp.set(t,e)}let jp={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return Fp.get(t);if(e==="objectStoreNames")return t.objectStoreNames||Db.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Ri(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function AR(t){jp=t(jp)}function xR(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const r=t.call(Cf(this),e,...n);return Db.set(r,e.sort?e.sort():[e]),Ri(r)}:CR().includes(t)?function(...e){return t.apply(Cf(this),e),Ri(Nb.get(this))}:function(...e){return Ri(t.apply(Cf(this),e))}}function kR(t){return typeof t=="function"?xR(t):(t instanceof IDBTransaction&&SR(t),bR(t,TR())?new Proxy(t,jp):t)}function Ri(t){if(t instanceof IDBRequest)return IR(t);if(Tf.has(t))return Tf.get(t);const e=kR(t);return e!==t&&(Tf.set(t,e),wg.set(e,t)),e}const Cf=t=>wg.get(t);function PR(t,e,{blocked:n,upgrade:r,blocking:i,terminated:s}={}){const o=indexedDB.open(t,e),a=Ri(o);return r&&o.addEventListener("upgradeneeded",l=>{r(Ri(o.result),l.oldVersion,l.newVersion,Ri(o.transaction),l)}),n&&o.addEventListener("blocked",l=>n(l.oldVersion,l.newVersion,l)),a.then(l=>{s&&l.addEventListener("close",()=>s()),i&&l.addEventListener("versionchange",c=>i(c.oldVersion,c.newVersion,c))}).catch(()=>{}),a}const RR=["get","getKey","getAll","getAllKeys","count"],OR=["put","add","delete","clear"],If=new Map;function i0(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(If.get(e))return If.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,i=OR.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(i||RR.includes(n)))return;const s=async function(o,...a){const l=this.transaction(o,i?"readwrite":"readonly");let c=l.store;return r&&(c=c.index(a.shift())),(await Promise.all([c[n](...a),i&&l.done]))[0]};return If.set(e,s),s}AR(t=>({...t,get:(e,n,r)=>i0(e,n)||t.get(e,n,r),has:(e,n)=>!!i0(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LR{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(NR(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function NR(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const zp="@firebase/app",s0="0.10.5";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ns=new _g("@firebase/app"),DR="@firebase/app-compat",MR="@firebase/analytics-compat",VR="@firebase/analytics",UR="@firebase/app-check-compat",$R="@firebase/app-check",FR="@firebase/auth",jR="@firebase/auth-compat",zR="@firebase/database",BR="@firebase/database-compat",HR="@firebase/functions",WR="@firebase/functions-compat",qR="@firebase/installations",GR="@firebase/installations-compat",KR="@firebase/messaging",QR="@firebase/messaging-compat",XR="@firebase/performance",YR="@firebase/performance-compat",JR="@firebase/remote-config",ZR="@firebase/remote-config-compat",eO="@firebase/storage",tO="@firebase/storage-compat",nO="@firebase/firestore",rO="@firebase/vertexai-preview",iO="@firebase/firestore-compat",sO="firebase",oO="10.12.2";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Bp="[DEFAULT]",aO={[zp]:"fire-core",[DR]:"fire-core-compat",[VR]:"fire-analytics",[MR]:"fire-analytics-compat",[$R]:"fire-app-check",[UR]:"fire-app-check-compat",[FR]:"fire-auth",[jR]:"fire-auth-compat",[zR]:"fire-rtdb",[BR]:"fire-rtdb-compat",[HR]:"fire-fn",[WR]:"fire-fn-compat",[qR]:"fire-iid",[GR]:"fire-iid-compat",[KR]:"fire-fcm",[QR]:"fire-fcm-compat",[XR]:"fire-perf",[YR]:"fire-perf-compat",[JR]:"fire-rc",[ZR]:"fire-rc-compat",[eO]:"fire-gcs",[tO]:"fire-gcs-compat",[nO]:"fire-fst",[iO]:"fire-fst-compat",[rO]:"fire-vertex","fire-js":"fire-js",[sO]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wh=new Map,lO=new Map,Hp=new Map;function o0(t,e){try{t.container.addComponent(e)}catch(n){Ns.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function Jo(t){const e=t.name;if(Hp.has(e))return Ns.debug(`There were multiple attempts to register component ${e}.`),!1;Hp.set(e,t);for(const n of wh.values())o0(n,t);for(const n of lO.values())o0(n,t);return!0}function Eg(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function Hn(t){return t.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uO={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Oi=new fu("app","Firebase",uO);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cO{constructor(e,n,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new Ls("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Oi.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ma=oO;function Mb(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const r=Object.assign({name:Bp,automaticDataCollectionEnabled:!1},e),i=r.name;if(typeof i!="string"||!i)throw Oi.create("bad-app-name",{appName:String(i)});if(n||(n=Ob()),!n)throw Oi.create("no-options");const s=wh.get(i);if(s){if(_h(n,s.options)&&_h(r,s.config))return s;throw Oi.create("duplicate-app",{appName:i})}const o=new yR(i);for(const l of Hp.values())o.addComponent(l);const a=new cO(n,r,o);return wh.set(i,a),a}function Vb(t=Bp){const e=wh.get(t);if(!e&&t===Bp&&Ob())return Mb();if(!e)throw Oi.create("no-app",{appName:t});return e}function Li(t,e,n){var r;let i=(r=aO[t])!==null&&r!==void 0?r:t;n&&(i+=`-${n}`);const s=i.match(/\s|\//),o=e.match(/\s|\//);if(s||o){const a=[`Unable to register library "${i}" with version "${e}":`];s&&a.push(`library name "${i}" contains illegal characters (whitespace or "/")`),s&&o&&a.push("and"),o&&a.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Ns.warn(a.join(" "));return}Jo(new Ls(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hO="firebase-heartbeat-database",dO=1,Xl="firebase-heartbeat-store";let Sf=null;function Ub(){return Sf||(Sf=PR(hO,dO,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(Xl)}catch(n){console.warn(n)}}}}).catch(t=>{throw Oi.create("idb-open",{originalErrorMessage:t.message})})),Sf}async function fO(t){try{const n=(await Ub()).transaction(Xl),r=await n.objectStore(Xl).get($b(t));return await n.done,r}catch(e){if(e instanceof Xr)Ns.warn(e.message);else{const n=Oi.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});Ns.warn(n.message)}}}async function a0(t,e){try{const r=(await Ub()).transaction(Xl,"readwrite");await r.objectStore(Xl).put(e,$b(t)),await r.done}catch(n){if(n instanceof Xr)Ns.warn(n.message);else{const r=Oi.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});Ns.warn(r.message)}}}function $b(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pO=1024,mO=30*24*60*60*1e3;class gO{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new vO(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,n;const i=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),s=l0();if(!(((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null))&&!(this._heartbeatsCache.lastSentHeartbeatDate===s||this._heartbeatsCache.heartbeats.some(o=>o.date===s)))return this._heartbeatsCache.heartbeats.push({date:s,agent:i}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(o=>{const a=new Date(o.date).valueOf();return Date.now()-a<=mO}),this._storage.overwrite(this._heartbeatsCache)}async getHeartbeatsHeader(){var e;if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=l0(),{heartbeatsToSend:r,unsentEntries:i}=yO(this._heartbeatsCache.heartbeats),s=vh(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=n,i.length>0?(this._heartbeatsCache.heartbeats=i,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),s}}function l0(){return new Date().toISOString().substring(0,10)}function yO(t,e=pO){const n=[];let r=t.slice();for(const i of t){const s=n.find(o=>o.agent===i.agent);if(s){if(s.dates.push(i.date),u0(n)>e){s.dates.pop();break}}else if(n.push({agent:i.agent,dates:[i.date]}),u0(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class vO{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return sR()?oR().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await fO(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var n;if(await this._canUseIndexedDBPromise){const i=await this.read();return a0(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var n;if(await this._canUseIndexedDBPromise){const i=await this.read();return a0(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...e.heartbeats]})}else return}}function u0(t){return vh(JSON.stringify({version:2,heartbeats:t})).length}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _O(t){Jo(new Ls("platform-logger",e=>new LR(e),"PRIVATE")),Jo(new Ls("heartbeat",e=>new gO(e),"PRIVATE")),Li(zp,s0,t),Li(zp,s0,"esm2017"),Li("fire-js","")}_O("");var wO="firebase",EO="10.12.2";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Li(wO,EO,"app");function bg(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n}function Fb(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const bO=Fb,jb=new fu("auth","Firebase",Fb());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Eh=new _g("@firebase/auth");function TO(t,...e){Eh.logLevel<=Ee.WARN&&Eh.warn(`Auth (${ma}): ${t}`,...e)}function Nc(t,...e){Eh.logLevel<=Ee.ERROR&&Eh.error(`Auth (${ma}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Nn(t,...e){throw Cg(t,...e)}function Kn(t,...e){return Cg(t,...e)}function Tg(t,e,n){const r=Object.assign(Object.assign({},bO()),{[e]:n});return new fu("auth","Firebase",r).create(e,{appName:t.name})}function Vr(t){return Tg(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function CO(t,e,n){const r=n;if(!(e instanceof r))throw r.name!==e.constructor.name&&Nn(t,"argument-error"),Tg(t,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function Cg(t,...e){if(typeof t!="string"){const n=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=t.name),t._errorFactory.create(n,...r)}return jb.create(t,...e)}function se(t,e,...n){if(!t)throw Cg(e,...n)}function Or(t){const e="INTERNAL ASSERTION FAILED: "+t;throw Nc(e),new Error(e)}function Br(t,e){t||Or(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Wp(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.href)||""}function IO(){return c0()==="http:"||c0()==="https:"}function c0(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function SO(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(IO()||tR()||"connection"in navigator)?navigator.onLine:!0}function AO(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mu{constructor(e,n){this.shortDelay=e,this.longDelay=n,Br(n>e,"Short delay should be less than long delay!"),this.isMobile=ZP()||nR()}get(){return SO()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ig(t,e){Br(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zb{static initialize(e,n,r){this.fetchImpl=e,n&&(this.headersImpl=n),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Or("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Or("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Or("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xO={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kO=new mu(3e4,6e4);function Ji(t,e){return t.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:t.tenantId}):e}async function Zi(t,e,n,r,i={}){return Bb(t,i,async()=>{let s={},o={};r&&(e==="GET"?o=r:s={body:JSON.stringify(r)});const a=pu(Object.assign({key:t.config.apiKey},o)).slice(1),l=await t._getAdditionalHeaders();return l["Content-Type"]="application/json",t.languageCode&&(l["X-Firebase-Locale"]=t.languageCode),zb.fetch()(Hb(t,t.config.apiHost,n,a),Object.assign({method:e,headers:l,referrerPolicy:"no-referrer"},s))})}async function Bb(t,e,n){t._canInitEmulator=!1;const r=Object.assign(Object.assign({},xO),e);try{const i=new RO(t),s=await Promise.race([n(),i.promise]);i.clearNetworkTimeout();const o=await s.json();if("needConfirmation"in o)throw hc(t,"account-exists-with-different-credential",o);if(s.ok&&!("errorMessage"in o))return o;{const a=s.ok?o.errorMessage:o.error.message,[l,c]=a.split(" : ");if(l==="FEDERATED_USER_ID_ALREADY_LINKED")throw hc(t,"credential-already-in-use",o);if(l==="EMAIL_EXISTS")throw hc(t,"email-already-in-use",o);if(l==="USER_DISABLED")throw hc(t,"user-disabled",o);const h=r[l]||l.toLowerCase().replace(/[_\s]+/g,"-");if(c)throw Tg(t,h,c);Nn(t,h)}}catch(i){if(i instanceof Xr)throw i;Nn(t,"network-request-failed",{message:String(i)})}}async function gu(t,e,n,r,i={}){const s=await Zi(t,e,n,r,i);return"mfaPendingCredential"in s&&Nn(t,"multi-factor-auth-required",{_serverResponse:s}),s}function Hb(t,e,n,r){const i=`${e}${n}?${r}`;return t.config.emulator?Ig(t.config,i):`${t.config.apiScheme}://${i}`}function PO(t){switch(t){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class RO{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,r)=>{this.timer=setTimeout(()=>r(Kn(this.auth,"network-request-failed")),kO.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function hc(t,e,n){const r={appName:t.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const i=Kn(t,e,r);return i.customData._tokenResponse=n,i}function h0(t){return t!==void 0&&t.enterprise!==void 0}class OO{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const n of this.recaptchaEnforcementState)if(n.provider&&n.provider===e)return PO(n.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}}async function LO(t,e){return Zi(t,"GET","/v2/recaptchaConfig",Ji(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function NO(t,e){return Zi(t,"POST","/v1/accounts:delete",e)}async function Wb(t,e){return Zi(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Sl(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function DO(t,e=!1){const n=Yt(t),r=await n.getIdToken(e),i=Sg(r);se(i&&i.exp&&i.auth_time&&i.iat,n.auth,"internal-error");const s=typeof i.firebase=="object"?i.firebase:void 0,o=s==null?void 0:s.sign_in_provider;return{claims:i,token:r,authTime:Sl(Af(i.auth_time)),issuedAtTime:Sl(Af(i.iat)),expirationTime:Sl(Af(i.exp)),signInProvider:o||null,signInSecondFactor:(s==null?void 0:s.sign_in_second_factor)||null}}function Af(t){return Number(t)*1e3}function Sg(t){const[e,n,r]=t.split(".");if(e===void 0||n===void 0||r===void 0)return Nc("JWT malformed, contained fewer than 3 sections"),null;try{const i=Pb(n);return i?JSON.parse(i):(Nc("Failed to decode base64 JWT payload"),null)}catch(i){return Nc("Caught error parsing JWT payload as JSON",i==null?void 0:i.toString()),null}}function d0(t){const e=Sg(t);return se(e,"internal-error"),se(typeof e.exp<"u","internal-error"),se(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Yl(t,e,n=!1){if(n)return e;try{return await e}catch(r){throw r instanceof Xr&&MO(r)&&t.auth.currentUser===t&&await t.auth.signOut(),r}}function MO({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VO{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var n;if(e){const r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;const i=((n=this.user.stsTokenManager.expirationTime)!==null&&n!==void 0?n:0)-Date.now()-3e5;return Math.max(0,i)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qp{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=Sl(this.lastLoginAt),this.creationTime=Sl(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function bh(t){var e;const n=t.auth,r=await t.getIdToken(),i=await Yl(t,Wb(n,{idToken:r}));se(i==null?void 0:i.users.length,n,"internal-error");const s=i.users[0];t._notifyReloadListener(s);const o=!((e=s.providerUserInfo)===null||e===void 0)&&e.length?qb(s.providerUserInfo):[],a=$O(t.providerData,o),l=t.isAnonymous,c=!(t.email&&s.passwordHash)&&!(a!=null&&a.length),h=l?c:!1,f={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:a,metadata:new qp(s.createdAt,s.lastLoginAt),isAnonymous:h};Object.assign(t,f)}async function UO(t){const e=Yt(t);await bh(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function $O(t,e){return[...t.filter(r=>!e.some(i=>i.providerId===r.providerId)),...e]}function qb(t){return t.map(e=>{var{providerId:n}=e,r=bg(e,["providerId"]);return{providerId:n,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function FO(t,e){const n=await Bb(t,{},async()=>{const r=pu({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:i,apiKey:s}=t.config,o=Hb(t,i,"/v1/token",`key=${s}`),a=await t._getAdditionalHeaders();return a["Content-Type"]="application/x-www-form-urlencoded",zb.fetch()(o,{method:"POST",headers:a,body:r})});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function jO(t,e){return Zi(t,"POST","/v2/accounts:revokeToken",Ji(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vo{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){se(e.idToken,"internal-error"),se(typeof e.idToken<"u","internal-error"),se(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):d0(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){se(e.length!==0,"internal-error");const n=d0(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(se(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:r,refreshToken:i,expiresIn:s}=await FO(e,n);this.updateTokensAndExpiration(r,i,Number(s))}updateTokensAndExpiration(e,n,r){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,n){const{refreshToken:r,accessToken:i,expirationTime:s}=n,o=new Vo;return r&&(se(typeof r=="string","internal-error",{appName:e}),o.refreshToken=r),i&&(se(typeof i=="string","internal-error",{appName:e}),o.accessToken=i),s&&(se(typeof s=="number","internal-error",{appName:e}),o.expirationTime=s),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Vo,this.toJSON())}_performRefresh(){return Or("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ui(t,e){se(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class Lr{constructor(e){var{uid:n,auth:r,stsTokenManager:i}=e,s=bg(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new VO(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=r,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=s.displayName||null,this.email=s.email||null,this.emailVerified=s.emailVerified||!1,this.phoneNumber=s.phoneNumber||null,this.photoURL=s.photoURL||null,this.isAnonymous=s.isAnonymous||!1,this.tenantId=s.tenantId||null,this.providerData=s.providerData?[...s.providerData]:[],this.metadata=new qp(s.createdAt||void 0,s.lastLoginAt||void 0)}async getIdToken(e){const n=await Yl(this,this.stsTokenManager.getToken(this.auth,e));return se(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return DO(this,e)}reload(){return UO(this)}_assign(e){this!==e&&(se(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>Object.assign({},n)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new Lr(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return n.metadata._copy(this.metadata),n}_onReload(e){se(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),n&&await bh(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(Hn(this.auth.app))return Promise.reject(Vr(this.auth));const e=await this.getIdToken();return await Yl(this,NO(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){var r,i,s,o,a,l,c,h;const f=(r=n.displayName)!==null&&r!==void 0?r:void 0,p=(i=n.email)!==null&&i!==void 0?i:void 0,w=(s=n.phoneNumber)!==null&&s!==void 0?s:void 0,E=(o=n.photoURL)!==null&&o!==void 0?o:void 0,S=(a=n.tenantId)!==null&&a!==void 0?a:void 0,P=(l=n._redirectEventId)!==null&&l!==void 0?l:void 0,T=(c=n.createdAt)!==null&&c!==void 0?c:void 0,_=(h=n.lastLoginAt)!==null&&h!==void 0?h:void 0,{uid:C,emailVerified:N,isAnonymous:F,providerData:z,stsTokenManager:g}=n;se(C&&g,e,"internal-error");const y=Vo.fromJSON(this.name,g);se(typeof C=="string",e,"internal-error"),ui(f,e.name),ui(p,e.name),se(typeof N=="boolean",e,"internal-error"),se(typeof F=="boolean",e,"internal-error"),ui(w,e.name),ui(E,e.name),ui(S,e.name),ui(P,e.name),ui(T,e.name),ui(_,e.name);const b=new Lr({uid:C,auth:e,email:p,emailVerified:N,displayName:f,isAnonymous:F,photoURL:E,phoneNumber:w,tenantId:S,stsTokenManager:y,createdAt:T,lastLoginAt:_});return z&&Array.isArray(z)&&(b.providerData=z.map(I=>Object.assign({},I))),P&&(b._redirectEventId=P),b}static async _fromIdTokenResponse(e,n,r=!1){const i=new Vo;i.updateFromServerResponse(n);const s=new Lr({uid:n.localId,auth:e,stsTokenManager:i,isAnonymous:r});return await bh(s),s}static async _fromGetAccountInfoResponse(e,n,r){const i=n.users[0];se(i.localId!==void 0,"internal-error");const s=i.providerUserInfo!==void 0?qb(i.providerUserInfo):[],o=!(i.email&&i.passwordHash)&&!(s!=null&&s.length),a=new Vo;a.updateFromIdToken(r);const l=new Lr({uid:i.localId,auth:e,stsTokenManager:a,isAnonymous:o}),c={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:s,metadata:new qp(i.createdAt,i.lastLoginAt),isAnonymous:!(i.email&&i.passwordHash)&&!(s!=null&&s.length)};return Object.assign(l,c),l}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const f0=new Map;function Nr(t){Br(t instanceof Function,"Expected a class definition");let e=f0.get(t);return e?(Br(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,f0.set(t,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gb{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}Gb.type="NONE";const p0=Gb;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Dc(t,e,n){return`firebase:${t}:${e}:${n}`}class Uo{constructor(e,n,r){this.persistence=e,this.auth=n,this.userKey=r;const{config:i,name:s}=this.auth;this.fullUserKey=Dc(this.userKey,i.apiKey,s),this.fullPersistenceKey=Dc("persistence",i.apiKey,s),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);return e?Lr._fromJSON(this.auth,e):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,r="authUser"){if(!n.length)return new Uo(Nr(p0),e,r);const i=(await Promise.all(n.map(async c=>{if(await c._isAvailable())return c}))).filter(c=>c);let s=i[0]||Nr(p0);const o=Dc(r,e.config.apiKey,e.name);let a=null;for(const c of n)try{const h=await c._get(o);if(h){const f=Lr._fromJSON(e,h);c!==s&&(a=f),s=c;break}}catch{}const l=i.filter(c=>c._shouldAllowMigration);return!s._shouldAllowMigration||!l.length?new Uo(s,e,r):(s=l[0],a&&await s._set(o,a.toJSON()),await Promise.all(n.map(async c=>{if(c!==s)try{await c._remove(o)}catch{}})),new Uo(s,e,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function m0(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(Xb(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(Kb(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(Jb(e))return"Blackberry";if(Zb(e))return"Webos";if(Ag(e))return"Safari";if((e.includes("chrome/")||Qb(e))&&!e.includes("edge/"))return"Chrome";if(Yb(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=t.match(n);if((r==null?void 0:r.length)===2)return r[1]}return"Other"}function Kb(t=Lt()){return/firefox\//i.test(t)}function Ag(t=Lt()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function Qb(t=Lt()){return/crios\//i.test(t)}function Xb(t=Lt()){return/iemobile/i.test(t)}function Yb(t=Lt()){return/android/i.test(t)}function Jb(t=Lt()){return/blackberry/i.test(t)}function Zb(t=Lt()){return/webos/i.test(t)}function od(t=Lt()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function zO(t=Lt()){var e;return od(t)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function BO(){return rR()&&document.documentMode===10}function eT(t=Lt()){return od(t)||Yb(t)||Zb(t)||Jb(t)||/windows phone/i.test(t)||Xb(t)}function HO(){try{return!!(window&&window!==window.top)}catch{return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tT(t,e=[]){let n;switch(t){case"Browser":n=m0(Lt());break;case"Worker":n=`${m0(Lt())}-${t}`;break;default:n=t}const r=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${ma}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WO{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const r=s=>new Promise((o,a)=>{try{const l=e(s);o(l)}catch(l){a(l)}});r.onAbort=n,this.queue.push(r);const i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const r of this.queue)await r(e),r.onAbort&&n.push(r.onAbort)}catch(r){n.reverse();for(const i of n)try{i()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r==null?void 0:r.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function qO(t,e={}){return Zi(t,"GET","/v2/passwordPolicy",Ji(t,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const GO=6;class KO{constructor(e){var n,r,i,s;const o=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(n=o.minPasswordLength)!==null&&n!==void 0?n:GO,o.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=o.maxPasswordLength),o.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=o.containsLowercaseCharacter),o.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=o.containsUppercaseCharacter),o.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=o.containsNumericCharacter),o.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=o.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(i=(r=e.allowedNonAlphanumericCharacters)===null||r===void 0?void 0:r.join(""))!==null&&i!==void 0?i:"",this.forceUpgradeOnSignin=(s=e.forceUpgradeOnSignin)!==null&&s!==void 0?s:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var n,r,i,s,o,a;const l={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,l),this.validatePasswordCharacterOptions(e,l),l.isValid&&(l.isValid=(n=l.meetsMinPasswordLength)!==null&&n!==void 0?n:!0),l.isValid&&(l.isValid=(r=l.meetsMaxPasswordLength)!==null&&r!==void 0?r:!0),l.isValid&&(l.isValid=(i=l.containsLowercaseLetter)!==null&&i!==void 0?i:!0),l.isValid&&(l.isValid=(s=l.containsUppercaseLetter)!==null&&s!==void 0?s:!0),l.isValid&&(l.isValid=(o=l.containsNumericCharacter)!==null&&o!==void 0?o:!0),l.isValid&&(l.isValid=(a=l.containsNonAlphanumericCharacter)!==null&&a!==void 0?a:!0),l}validatePasswordLengthOptions(e,n){const r=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;r&&(n.meetsMinPasswordLength=e.length>=r),i&&(n.meetsMaxPasswordLength=e.length<=i)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let r;for(let i=0;i<e.length;i++)r=e.charAt(i),this.updatePasswordCharacterOptionsStatuses(n,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,n,r,i,s){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QO{constructor(e,n,r,i){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=r,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new g0(this),this.idTokenSubscription=new g0(this),this.beforeStateQueue=new WO(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=jb,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=i.sdkClientVersion}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=Nr(n)),this._initializationPromise=this.queue(async()=>{var r,i;if(!this._deleted&&(this.persistenceManager=await Uo.create(this,e),!this._deleted)){if(!((r=this._popupRedirectResolver)===null||r===void 0)&&r._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((i=this.currentUser)===null||i===void 0?void 0:i.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await Wb(this,{idToken:e}),r=await Lr._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(r)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var n;if(Hn(this.app)){const o=this.app.settings.authIdToken;return o?new Promise(a=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(o).then(a,a))}):this.directlySetCurrentUser(null)}const r=await this.assertedPersistence.getCurrentUser();let i=r,s=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const o=(n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId,a=i==null?void 0:i._redirectEventId,l=await this.tryRedirectSignIn(e);(!o||o===a)&&(l!=null&&l.user)&&(i=l.user,s=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(s)try{await this.beforeStateQueue.runMiddleware(i)}catch(o){i=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return se(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await bh(e)}catch(n){if((n==null?void 0:n.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=AO()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(Hn(this.app))return Promise.reject(Vr(this));const n=e?Yt(e):null;return n&&se(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&se(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return Hn(this.app)?Promise.reject(Vr(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return Hn(this.app)?Promise.reject(Vr(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Nr(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await qO(this),n=new KO(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new fu("auth","Firebase",e())}onAuthStateChanged(e,n,r){return this.registerStateListener(this.authStateSubscription,e,n,r)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,r){return this.registerStateListener(this.idTokenSubscription,e,n,r)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(r.tenantId=this.tenantId),await jO(this,r)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,n){const r=await this.getOrInitRedirectPersistenceManager(n);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&Nr(e)||this._popupRedirectResolver;se(n,this,"argument-error"),this.redirectPersistenceManager=await Uo.create(this,[Nr(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var n,r;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)===null||n===void 0?void 0:n._redirectEventId)===e?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const r=(n=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&n!==void 0?n:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,r,i){if(this._deleted)return()=>{};const s=typeof n=="function"?n:n.next.bind(n);let o=!1;const a=this._isInitialized?Promise.resolve():this._initializationPromise;if(se(a,this,"internal-error"),a.then(()=>{o||s(this.currentUser)}),typeof n=="function"){const l=e.addObserver(n,r,i);return()=>{o=!0,l()}}else{const l=e.addObserver(n);return()=>{o=!0,l()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return se(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=tT(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const n={"X-Client-Version":this.clientVersion};this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId);const r=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());r&&(n["X-Firebase-Client"]=r);const i=await this._getAppCheckToken();return i&&(n["X-Firebase-AppCheck"]=i),n}async _getAppCheckToken(){var e;const n=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return n!=null&&n.error&&TO(`Error while retrieving App Check token: ${n.error}`),n==null?void 0:n.token}}function es(t){return Yt(t)}class g0{constructor(e){this.auth=e,this.observer=null,this.addObserver=hR(n=>this.observer=n)}get next(){return se(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let ad={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function XO(t){ad=t}function nT(t){return ad.loadJS(t)}function YO(){return ad.recaptchaEnterpriseScript}function JO(){return ad.gapiScript}function ZO(t){return`__${t}${Math.floor(Math.random()*1e6)}`}const eL="recaptcha-enterprise",tL="NO_RECAPTCHA";class nL{constructor(e){this.type=eL,this.auth=es(e)}async verify(e="verify",n=!1){async function r(s){if(!n){if(s.tenantId==null&&s._agentRecaptchaConfig!=null)return s._agentRecaptchaConfig.siteKey;if(s.tenantId!=null&&s._tenantRecaptchaConfigs[s.tenantId]!==void 0)return s._tenantRecaptchaConfigs[s.tenantId].siteKey}return new Promise(async(o,a)=>{LO(s,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(l=>{if(l.recaptchaKey===void 0)a(new Error("recaptcha Enterprise site key undefined"));else{const c=new OO(l);return s.tenantId==null?s._agentRecaptchaConfig=c:s._tenantRecaptchaConfigs[s.tenantId]=c,o(c.siteKey)}}).catch(l=>{a(l)})})}function i(s,o,a){const l=window.grecaptcha;h0(l)?l.enterprise.ready(()=>{l.enterprise.execute(s,{action:e}).then(c=>{o(c)}).catch(()=>{o(tL)})}):a(Error("No reCAPTCHA enterprise script loaded."))}return new Promise((s,o)=>{r(this.auth).then(a=>{if(!n&&h0(window.grecaptcha))i(a,s,o);else{if(typeof window>"u"){o(new Error("RecaptchaVerifier is only supported in browser"));return}let l=YO();l.length!==0&&(l+=a),nT(l).then(()=>{i(a,s,o)}).catch(c=>{o(c)})}}).catch(a=>{o(a)})})}}async function y0(t,e,n,r=!1){const i=new nL(t);let s;try{s=await i.verify(n)}catch{s=await i.verify(n,!0)}const o=Object.assign({},e);return r?Object.assign(o,{captchaResp:s}):Object.assign(o,{captchaResponse:s}),Object.assign(o,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(o,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),o}async function Gp(t,e,n,r){var i;if(!((i=t._getRecaptchaConfig())===null||i===void 0)&&i.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const s=await y0(t,e,n,n==="getOobCode");return r(t,s)}else return r(t,e).catch(async s=>{if(s.code==="auth/missing-recaptcha-token"){console.log(`${n} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const o=await y0(t,e,n,n==="getOobCode");return r(t,o)}else return Promise.reject(s)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rL(t,e){const n=Eg(t,"auth");if(n.isInitialized()){const i=n.getImmediate(),s=n.getOptions();if(_h(s,e??{}))return i;Nn(i,"already-initialized")}return n.initialize({options:e})}function iL(t,e){const n=(e==null?void 0:e.persistence)||[],r=(Array.isArray(n)?n:[n]).map(Nr);e!=null&&e.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(r,e==null?void 0:e.popupRedirectResolver)}function sL(t,e,n){const r=es(t);se(r._canInitEmulator,r,"emulator-config-failed"),se(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const i=!1,s=rT(e),{host:o,port:a}=oL(e),l=a===null?"":`:${a}`;r.config.emulator={url:`${s}//${o}${l}/`},r.settings.appVerificationDisabledForTesting=!0,r.emulatorConfig=Object.freeze({host:o,port:a,protocol:s.replace(":",""),options:Object.freeze({disableWarnings:i})}),aL()}function rT(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function oL(t){const e=rT(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){const s=i[1];return{host:s,port:v0(r.substr(s.length+1))}}else{const[s,o]=r.split(":");return{host:s,port:v0(o)}}}function v0(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function aL(){function t(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xg{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return Or("not implemented")}_getIdTokenResponse(e){return Or("not implemented")}_linkToIdToken(e,n){return Or("not implemented")}_getReauthenticationResolver(e){return Or("not implemented")}}async function lL(t,e){return Zi(t,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function uL(t,e){return gu(t,"POST","/v1/accounts:signInWithPassword",Ji(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function cL(t,e){return gu(t,"POST","/v1/accounts:signInWithEmailLink",Ji(t,e))}async function hL(t,e){return gu(t,"POST","/v1/accounts:signInWithEmailLink",Ji(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jl extends xg{constructor(e,n,r,i=null){super("password",r),this._email=e,this._password=n,this._tenantId=i}static _fromEmailAndPassword(e,n){return new Jl(e,n,"password")}static _fromEmailAndCode(e,n,r=null){return new Jl(e,n,"emailLink",r)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e;if(n!=null&&n.email&&(n!=null&&n.password)){if(n.signInMethod==="password")return this._fromEmailAndPassword(n.email,n.password);if(n.signInMethod==="emailLink")return this._fromEmailAndCode(n.email,n.password,n.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const n={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Gp(e,n,"signInWithPassword",uL);case"emailLink":return cL(e,{email:this._email,oobCode:this._password});default:Nn(e,"internal-error")}}async _linkToIdToken(e,n){switch(this.signInMethod){case"password":const r={idToken:n,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Gp(e,r,"signUpPassword",lL);case"emailLink":return hL(e,{idToken:n,email:this._email,oobCode:this._password});default:Nn(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function $o(t,e){return gu(t,"POST","/v1/accounts:signInWithIdp",Ji(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dL="http://localhost";class Ds extends xg{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new Ds(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):Nn("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:i}=n,s=bg(n,["providerId","signInMethod"]);if(!r||!i)return null;const o=new Ds(r,i);return o.idToken=s.idToken||void 0,o.accessToken=s.accessToken||void 0,o.secret=s.secret,o.nonce=s.nonce,o.pendingToken=s.pendingToken||null,o}_getIdTokenResponse(e){const n=this.buildRequest();return $o(e,n)}_linkToIdToken(e,n){const r=this.buildRequest();return r.idToken=n,$o(e,r)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,$o(e,n)}buildRequest(){const e={requestUri:dL,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=pu(n)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fL(t){switch(t){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function pL(t){const e=ll(ul(t)).link,n=e?ll(ul(e)).deep_link_id:null,r=ll(ul(t)).deep_link_id;return(r?ll(ul(r)).link:null)||r||n||e||t}class kg{constructor(e){var n,r,i,s,o,a;const l=ll(ul(e)),c=(n=l.apiKey)!==null&&n!==void 0?n:null,h=(r=l.oobCode)!==null&&r!==void 0?r:null,f=fL((i=l.mode)!==null&&i!==void 0?i:null);se(c&&h&&f,"argument-error"),this.apiKey=c,this.operation=f,this.code=h,this.continueUrl=(s=l.continueUrl)!==null&&s!==void 0?s:null,this.languageCode=(o=l.languageCode)!==null&&o!==void 0?o:null,this.tenantId=(a=l.tenantId)!==null&&a!==void 0?a:null}static parseLink(e){const n=pL(e);try{return new kg(n)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ga{constructor(){this.providerId=ga.PROVIDER_ID}static credential(e,n){return Jl._fromEmailAndPassword(e,n)}static credentialWithLink(e,n){const r=kg.parseLink(n);return se(r,"argument-error"),Jl._fromEmailAndCode(e,r.code,r.tenantId)}}ga.PROVIDER_ID="password";ga.EMAIL_PASSWORD_SIGN_IN_METHOD="password";ga.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pg{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yu extends Pg{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gi extends yu{constructor(){super("facebook.com")}static credential(e){return Ds._fromParams({providerId:gi.PROVIDER_ID,signInMethod:gi.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return gi.credentialFromTaggedObject(e)}static credentialFromError(e){return gi.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return gi.credential(e.oauthAccessToken)}catch{return null}}}gi.FACEBOOK_SIGN_IN_METHOD="facebook.com";gi.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xr extends yu{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return Ds._fromParams({providerId:xr.PROVIDER_ID,signInMethod:xr.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return xr.credentialFromTaggedObject(e)}static credentialFromError(e){return xr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:r}=e;if(!n&&!r)return null;try{return xr.credential(n,r)}catch{return null}}}xr.GOOGLE_SIGN_IN_METHOD="google.com";xr.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yi extends yu{constructor(){super("github.com")}static credential(e){return Ds._fromParams({providerId:yi.PROVIDER_ID,signInMethod:yi.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return yi.credentialFromTaggedObject(e)}static credentialFromError(e){return yi.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return yi.credential(e.oauthAccessToken)}catch{return null}}}yi.GITHUB_SIGN_IN_METHOD="github.com";yi.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vi extends yu{constructor(){super("twitter.com")}static credential(e,n){return Ds._fromParams({providerId:vi.PROVIDER_ID,signInMethod:vi.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return vi.credentialFromTaggedObject(e)}static credentialFromError(e){return vi.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:r}=e;if(!n||!r)return null;try{return vi.credential(n,r)}catch{return null}}}vi.TWITTER_SIGN_IN_METHOD="twitter.com";vi.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function mL(t,e){return gu(t,"POST","/v1/accounts:signUp",Ji(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ms{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,r,i=!1){const s=await Lr._fromIdTokenResponse(e,r,i),o=_0(r);return new Ms({user:s,providerId:o,_tokenResponse:r,operationType:n})}static async _forOperation(e,n,r){await e._updateTokensIfNecessary(r,!0);const i=_0(r);return new Ms({user:e,providerId:i,_tokenResponse:r,operationType:n})}}function _0(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Th extends Xr{constructor(e,n,r,i){var s;super(n.code,n.message),this.operationType=r,this.user=i,Object.setPrototypeOf(this,Th.prototype),this.customData={appName:e.name,tenantId:(s=e.tenantId)!==null&&s!==void 0?s:void 0,_serverResponse:n.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,n,r,i){return new Th(e,n,r,i)}}function iT(t,e,n,r){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(s=>{throw s.code==="auth/multi-factor-auth-required"?Th._fromErrorAndOperation(t,s,e,r):s})}async function gL(t,e,n=!1){const r=await Yl(t,e._linkToIdToken(t.auth,await t.getIdToken()),n);return Ms._forOperation(t,"link",r)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function yL(t,e,n=!1){const{auth:r}=t;if(Hn(r.app))return Promise.reject(Vr(r));const i="reauthenticate";try{const s=await Yl(t,iT(r,i,e,t),n);se(s.idToken,r,"internal-error");const o=Sg(s.idToken);se(o,r,"internal-error");const{sub:a}=o;return se(t.uid===a,r,"user-mismatch"),Ms._forOperation(t,i,s)}catch(s){throw(s==null?void 0:s.code)==="auth/user-not-found"&&Nn(r,"user-mismatch"),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function sT(t,e,n=!1){if(Hn(t.app))return Promise.reject(Vr(t));const r="signIn",i=await iT(t,r,e),s=await Ms._fromIdTokenResponse(t,r,i);return n||await t._updateCurrentUser(s.user),s}async function vL(t,e){return sT(es(t),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function oT(t){const e=es(t);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function _L(t,e,n){if(Hn(t.app))return Promise.reject(Vr(t));const r=es(t),o=await Gp(r,{returnSecureToken:!0,email:e,password:n,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",mL).catch(l=>{throw l.code==="auth/password-does-not-meet-requirements"&&oT(t),l}),a=await Ms._fromIdTokenResponse(r,"signIn",o);return await r._updateCurrentUser(a.user),a}function wL(t,e,n){return Hn(t.app)?Promise.reject(Vr(t)):vL(Yt(t),ga.credential(e,n)).catch(async r=>{throw r.code==="auth/password-does-not-meet-requirements"&&oT(t),r})}function EL(t,e,n,r){return Yt(t).onIdTokenChanged(e,n,r)}function bL(t,e,n){return Yt(t).beforeAuthStateChanged(e,n)}function aT(t,e,n,r){return Yt(t).onAuthStateChanged(e,n,r)}function TL(t){return Yt(t).signOut()}const Ch="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lT{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(Ch,"1"),this.storage.removeItem(Ch),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function CL(){const t=Lt();return Ag(t)||od(t)}const IL=1e3,SL=10;class uT extends lT{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=CL()&&HO(),this.fallbackToPolling=eT(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const r=this.storage.getItem(n),i=this.localCache[n];r!==i&&e(n,i,r)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((o,a,l)=>{this.notifyListeners(o,l)});return}const r=e.key;if(n?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const o=this.storage.getItem(r);if(e.newValue!==o)e.newValue!==null?this.storage.setItem(r,e.newValue):this.storage.removeItem(r);else if(this.localCache[r]===e.newValue&&!n)return}const i=()=>{const o=this.storage.getItem(r);!n&&this.localCache[r]===o||this.notifyListeners(r,o)},s=this.storage.getItem(r);BO()&&s!==e.newValue&&e.newValue!==e.oldValue?setTimeout(i,SL):i()}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const i of Array.from(r))i(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:r}),!0)})},IL)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}uT.type="LOCAL";const AL=uT;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cT extends lT{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}cT.type="SESSION";const hT=cT;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xL(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ld{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(i=>i.isListeningto(e));if(n)return n;const r=new ld(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:r,eventType:i,data:s}=n.data,o=this.handlersMap[i];if(!(o!=null&&o.size))return;n.ports[0].postMessage({status:"ack",eventId:r,eventType:i});const a=Array.from(o).map(async c=>c(n.origin,s)),l=await xL(a);n.ports[0].postMessage({status:"done",eventId:r,eventType:i,response:l})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}ld.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Rg(t="",e=10){let n="";for(let r=0;r<e;r++)n+=Math.floor(Math.random()*10);return t+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kL{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,r=50){const i=typeof MessageChannel<"u"?new MessageChannel:null;if(!i)throw new Error("connection_unavailable");let s,o;return new Promise((a,l)=>{const c=Rg("",20);i.port1.start();const h=setTimeout(()=>{l(new Error("unsupported_event"))},r);o={messageChannel:i,onMessage(f){const p=f;if(p.data.eventId===c)switch(p.data.status){case"ack":clearTimeout(h),s=setTimeout(()=>{l(new Error("timeout"))},3e3);break;case"done":clearTimeout(s),a(p.data.response);break;default:clearTimeout(h),clearTimeout(s),l(new Error("invalid_response"));break}}},this.handlers.add(o),i.port1.addEventListener("message",o.onMessage),this.target.postMessage({eventType:e,eventId:c,data:n},[i.port2])}).finally(()=>{o&&this.removeMessageHandler(o)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ur(){return window}function PL(t){ur().location.href=t}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dT(){return typeof ur().WorkerGlobalScope<"u"&&typeof ur().importScripts=="function"}async function RL(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function OL(){var t;return((t=navigator==null?void 0:navigator.serviceWorker)===null||t===void 0?void 0:t.controller)||null}function LL(){return dT()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fT="firebaseLocalStorageDb",NL=1,Ih="firebaseLocalStorage",pT="fbase_key";class vu{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function ud(t,e){return t.transaction([Ih],e?"readwrite":"readonly").objectStore(Ih)}function DL(){const t=indexedDB.deleteDatabase(fT);return new vu(t).toPromise()}function Kp(){const t=indexedDB.open(fT,NL);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{const r=t.result;try{r.createObjectStore(Ih,{keyPath:pT})}catch(i){n(i)}}),t.addEventListener("success",async()=>{const r=t.result;r.objectStoreNames.contains(Ih)?e(r):(r.close(),await DL(),e(await Kp()))})})}async function w0(t,e,n){const r=ud(t,!0).put({[pT]:e,value:n});return new vu(r).toPromise()}async function ML(t,e){const n=ud(t,!1).get(e),r=await new vu(n).toPromise();return r===void 0?null:r.value}function E0(t,e){const n=ud(t,!0).delete(e);return new vu(n).toPromise()}const VL=800,UL=3;class mT{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await Kp(),this.db)}async _withRetries(e){let n=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(n++>UL)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return dT()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=ld._getInstance(LL()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){var e,n;if(this.activeServiceWorker=await RL(),!this.activeServiceWorker)return;this.sender=new kL(this.activeServiceWorker);const r=await this.sender._send("ping",{},800);r&&!((e=r[0])===null||e===void 0)&&e.fulfilled&&!((n=r[0])===null||n===void 0)&&n.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||OL()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await Kp();return await w0(e,Ch,"1"),await E0(e,Ch),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(r=>w0(r,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(r=>ML(r,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>E0(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(i=>{const s=ud(i,!1).getAll();return new vu(s).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],r=new Set;if(e.length!==0)for(const{fbase_key:i,value:s}of e)r.add(i),JSON.stringify(this.localCache[i])!==JSON.stringify(s)&&(this.notifyListeners(i,s),n.push(i));for(const i of Object.keys(this.localCache))this.localCache[i]&&!r.has(i)&&(this.notifyListeners(i,null),n.push(i));return n}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const i of Array.from(r))i(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),VL)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}mT.type="LOCAL";const $L=mT;new mu(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gT(t,e){return e?Nr(e):(se(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Og extends xg{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return $o(e,this._buildIdpRequest())}_linkToIdToken(e,n){return $o(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return $o(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function FL(t){return sT(t.auth,new Og(t),t.bypassAuthState)}function jL(t){const{auth:e,user:n}=t;return se(n,e,"internal-error"),yL(n,new Og(t),t.bypassAuthState)}async function zL(t){const{auth:e,user:n}=t;return se(n,e,"internal-error"),gL(n,new Og(t),t.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yT{constructor(e,n,r,i,s=!1){this.auth=e,this.resolver=r,this.user=i,this.bypassAuthState=s,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:r,postBody:i,tenantId:s,error:o,type:a}=e;if(o){this.reject(o);return}const l={auth:this.auth,requestUri:n,sessionId:r,tenantId:s||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(a)(l))}catch(c){this.reject(c)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return FL;case"linkViaPopup":case"linkViaRedirect":return zL;case"reauthViaPopup":case"reauthViaRedirect":return jL;default:Nn(this.auth,"internal-error")}}resolve(e){Br(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Br(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const BL=new mu(2e3,1e4);async function HL(t,e,n){if(Hn(t.app))return Promise.reject(Kn(t,"operation-not-supported-in-this-environment"));const r=es(t);CO(t,e,Pg);const i=gT(r,n);return new ws(r,"signInViaPopup",e,i).executeNotNull()}class ws extends yT{constructor(e,n,r,i,s){super(e,n,i,s),this.provider=r,this.authWindow=null,this.pollId=null,ws.currentPopupAction&&ws.currentPopupAction.cancel(),ws.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return se(e,this.auth,"internal-error"),e}async onExecution(){Br(this.filter.length===1,"Popup operations only handle one event");const e=Rg();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(Kn(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(Kn(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,ws.currentPopupAction=null}pollUserCancellation(){const e=()=>{var n,r;if(!((r=(n=this.authWindow)===null||n===void 0?void 0:n.window)===null||r===void 0)&&r.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Kn(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,BL.get())};e()}}ws.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const WL="pendingRedirect",Mc=new Map;class qL extends yT{constructor(e,n,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,r),this.eventId=null}async execute(){let e=Mc.get(this.auth._key());if(!e){try{const r=await GL(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(n){e=()=>Promise.reject(n)}Mc.set(this.auth._key(),e)}return this.bypassAuthState||Mc.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function GL(t,e){const n=XL(e),r=QL(t);if(!await r._isAvailable())return!1;const i=await r._get(n)==="true";return await r._remove(n),i}function KL(t,e){Mc.set(t._key(),e)}function QL(t){return Nr(t._redirectPersistence)}function XL(t){return Dc(WL,t.config.apiKey,t.name)}async function YL(t,e,n=!1){if(Hn(t.app))return Promise.reject(Vr(t));const r=es(t),i=gT(r,e),o=await new qL(r,i,n).execute();return o&&!n&&(delete o.user._redirectEventId,await r._persistUserIfCurrent(o.user),await r._setRedirectUser(null,e)),o}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const JL=10*60*1e3;class ZL{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(n=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!eN(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var r;if(e.error&&!vT(e)){const i=((r=e.error.code)===null||r===void 0?void 0:r.split("auth/")[1])||"internal-error";n.onError(Kn(this.auth,i))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const r=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=JL&&this.cachedEventUids.clear(),this.cachedEventUids.has(b0(e))}saveEventToCache(e){this.cachedEventUids.add(b0(e)),this.lastProcessedEventTime=Date.now()}}function b0(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function vT({type:t,error:e}){return t==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function eN(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return vT(t);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function tN(t,e={}){return Zi(t,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nN=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,rN=/^https?/;async function iN(t){if(t.config.emulator)return;const{authorizedDomains:e}=await tN(t);for(const n of e)try{if(sN(n))return}catch{}Nn(t,"unauthorized-domain")}function sN(t){const e=Wp(),{protocol:n,hostname:r}=new URL(e);if(t.startsWith("chrome-extension://")){const o=new URL(t);return o.hostname===""&&r===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&o.hostname===r}if(!rN.test(n))return!1;if(nN.test(t))return r===t;const i=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oN=new mu(3e4,6e4);function T0(){const t=ur().___jsl;if(t!=null&&t.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function aN(t){return new Promise((e,n)=>{var r,i,s;function o(){T0(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{T0(),n(Kn(t,"network-request-failed"))},timeout:oN.get()})}if(!((i=(r=ur().gapi)===null||r===void 0?void 0:r.iframes)===null||i===void 0)&&i.Iframe)e(gapi.iframes.getContext());else if(!((s=ur().gapi)===null||s===void 0)&&s.load)o();else{const a=ZO("iframefcb");return ur()[a]=()=>{gapi.load?o():n(Kn(t,"network-request-failed"))},nT(`${JO()}?onload=${a}`).catch(l=>n(l))}}).catch(e=>{throw Vc=null,e})}let Vc=null;function lN(t){return Vc=Vc||aN(t),Vc}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uN=new mu(5e3,15e3),cN="__/auth/iframe",hN="emulator/auth/iframe",dN={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},fN=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function pN(t){const e=t.config;se(e.authDomain,t,"auth-domain-config-required");const n=e.emulator?Ig(e,hN):`https://${t.config.authDomain}/${cN}`,r={apiKey:e.apiKey,appName:t.name,v:ma},i=fN.get(t.config.apiHost);i&&(r.eid=i);const s=t._getFrameworks();return s.length&&(r.fw=s.join(",")),`${n}?${pu(r).slice(1)}`}async function mN(t){const e=await lN(t),n=ur().gapi;return se(n,t,"internal-error"),e.open({where:document.body,url:pN(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:dN,dontclear:!0},r=>new Promise(async(i,s)=>{await r.restyle({setHideOnLeave:!1});const o=Kn(t,"network-request-failed"),a=ur().setTimeout(()=>{s(o)},uN.get());function l(){ur().clearTimeout(a),i(r)}r.ping(l).then(l,()=>{s(o)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gN={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},yN=500,vN=600,_N="_blank",wN="http://localhost";class C0{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function EN(t,e,n,r=yN,i=vN){const s=Math.max((window.screen.availHeight-i)/2,0).toString(),o=Math.max((window.screen.availWidth-r)/2,0).toString();let a="";const l=Object.assign(Object.assign({},gN),{width:r.toString(),height:i.toString(),top:s,left:o}),c=Lt().toLowerCase();n&&(a=Qb(c)?_N:n),Kb(c)&&(e=e||wN,l.scrollbars="yes");const h=Object.entries(l).reduce((p,[w,E])=>`${p}${w}=${E},`,"");if(zO(c)&&a!=="_self")return bN(e||"",a),new C0(null);const f=window.open(e||"",a,h);se(f,t,"popup-blocked");try{f.focus()}catch{}return new C0(f)}function bN(t,e){const n=document.createElement("a");n.href=t,n.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const TN="__/auth/handler",CN="emulator/auth/handler",IN=encodeURIComponent("fac");async function I0(t,e,n,r,i,s){se(t.config.authDomain,t,"auth-domain-config-required"),se(t.config.apiKey,t,"invalid-api-key");const o={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:r,v:ma,eventId:i};if(e instanceof Pg){e.setDefaultLanguage(t.languageCode),o.providerId=e.providerId||"",cR(e.getCustomParameters())||(o.customParameters=JSON.stringify(e.getCustomParameters()));for(const[h,f]of Object.entries({}))o[h]=f}if(e instanceof yu){const h=e.getScopes().filter(f=>f!=="");h.length>0&&(o.scopes=h.join(","))}t.tenantId&&(o.tid=t.tenantId);const a=o;for(const h of Object.keys(a))a[h]===void 0&&delete a[h];const l=await t._getAppCheckToken(),c=l?`#${IN}=${encodeURIComponent(l)}`:"";return`${SN(t)}?${pu(a).slice(1)}${c}`}function SN({config:t}){return t.emulator?Ig(t,CN):`https://${t.authDomain}/${TN}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xf="webStorageSupport";class AN{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=hT,this._completeRedirectFn=YL,this._overrideRedirectResult=KL}async _openPopup(e,n,r,i){var s;Br((s=this.eventManagers[e._key()])===null||s===void 0?void 0:s.manager,"_initialize() not called before _openPopup()");const o=await I0(e,n,r,Wp(),i);return EN(e,o,Rg())}async _openRedirect(e,n,r,i){await this._originValidation(e);const s=await I0(e,n,r,Wp(),i);return PL(s),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:i,promise:s}=this.eventManagers[n];return i?Promise.resolve(i):(Br(s,"If manager is not set, promise should be"),s)}const r=this.initAndGetManager(e);return this.eventManagers[n]={promise:r},r.catch(()=>{delete this.eventManagers[n]}),r}async initAndGetManager(e){const n=await mN(e),r=new ZL(e);return n.register("authEvent",i=>(se(i==null?void 0:i.authEvent,e,"invalid-auth-event"),{status:r.onEvent(i.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=n,r}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(xf,{type:xf},i=>{var s;const o=(s=i==null?void 0:i[0])===null||s===void 0?void 0:s[xf];o!==void 0&&n(!!o),Nn(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=iN(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return eT()||Ag()||od()}}const xN=AN;var S0="@firebase/auth",A0="1.7.4";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kN{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(r=>{e((r==null?void 0:r.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){se(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function PN(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function RN(t){Jo(new Ls("auth",(e,{options:n})=>{const r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),s=e.getProvider("app-check-internal"),{apiKey:o,authDomain:a}=r.options;se(o&&!o.includes(":"),"invalid-api-key",{appName:r.name});const l={apiKey:o,authDomain:a,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:tT(t)},c=new QO(r,i,s,l);return iL(c,n),c},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,r)=>{e.getProvider("auth-internal").initialize()})),Jo(new Ls("auth-internal",e=>{const n=es(e.getProvider("auth").getImmediate());return(r=>new kN(r))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),Li(S0,A0,PN(t)),Li(S0,A0,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ON=5*60,LN=Lb("authIdTokenMaxAge")||ON;let x0=null;const NN=t=>async e=>{const n=e&&await e.getIdTokenResult(),r=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(r&&r>LN)return;const i=n==null?void 0:n.token;x0!==i&&(x0=i,await fetch(t,{method:i?"POST":"DELETE",headers:i?{Authorization:`Bearer ${i}`}:{}}))};function _T(t=Vb()){const e=Eg(t,"auth");if(e.isInitialized())return e.getImmediate();const n=rL(t,{popupRedirectResolver:xN,persistence:[$L,AL,hT]}),r=Lb("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){const s=new URL(r,location.origin);if(location.origin===s.origin){const o=NN(s.toString());bL(n,o,()=>o(n.currentUser)),EL(n,a=>o(a))}}const i=Rb("auth");return i&&sL(n,`http://${i}`),n}function DN(){var t,e;return(e=(t=document.getElementsByTagName("head"))===null||t===void 0?void 0:t[0])!==null&&e!==void 0?e:document}XO({loadJS(t){return new Promise((e,n)=>{const r=document.createElement("script");r.setAttribute("src",t),r.onload=e,r.onerror=i=>{const s=Kn("internal-error");s.customData=i,n(s)},r.type="text/javascript",r.charset="UTF-8",DN().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});RN("Browser");var k0=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Cs,wT;(function(){var t;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(g,y){function b(){}b.prototype=y.prototype,g.D=y.prototype,g.prototype=new b,g.prototype.constructor=g,g.C=function(I,x,k){for(var A=Array(arguments.length-2),Ie=2;Ie<arguments.length;Ie++)A[Ie-2]=arguments[Ie];return y.prototype[x].apply(I,A)}}function n(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(r,n),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(g,y,b){b||(b=0);var I=Array(16);if(typeof y=="string")for(var x=0;16>x;++x)I[x]=y.charCodeAt(b++)|y.charCodeAt(b++)<<8|y.charCodeAt(b++)<<16|y.charCodeAt(b++)<<24;else for(x=0;16>x;++x)I[x]=y[b++]|y[b++]<<8|y[b++]<<16|y[b++]<<24;y=g.g[0],b=g.g[1],x=g.g[2];var k=g.g[3],A=y+(k^b&(x^k))+I[0]+3614090360&4294967295;y=b+(A<<7&4294967295|A>>>25),A=k+(x^y&(b^x))+I[1]+3905402710&4294967295,k=y+(A<<12&4294967295|A>>>20),A=x+(b^k&(y^b))+I[2]+606105819&4294967295,x=k+(A<<17&4294967295|A>>>15),A=b+(y^x&(k^y))+I[3]+3250441966&4294967295,b=x+(A<<22&4294967295|A>>>10),A=y+(k^b&(x^k))+I[4]+4118548399&4294967295,y=b+(A<<7&4294967295|A>>>25),A=k+(x^y&(b^x))+I[5]+1200080426&4294967295,k=y+(A<<12&4294967295|A>>>20),A=x+(b^k&(y^b))+I[6]+2821735955&4294967295,x=k+(A<<17&4294967295|A>>>15),A=b+(y^x&(k^y))+I[7]+4249261313&4294967295,b=x+(A<<22&4294967295|A>>>10),A=y+(k^b&(x^k))+I[8]+1770035416&4294967295,y=b+(A<<7&4294967295|A>>>25),A=k+(x^y&(b^x))+I[9]+2336552879&4294967295,k=y+(A<<12&4294967295|A>>>20),A=x+(b^k&(y^b))+I[10]+4294925233&4294967295,x=k+(A<<17&4294967295|A>>>15),A=b+(y^x&(k^y))+I[11]+2304563134&4294967295,b=x+(A<<22&4294967295|A>>>10),A=y+(k^b&(x^k))+I[12]+1804603682&4294967295,y=b+(A<<7&4294967295|A>>>25),A=k+(x^y&(b^x))+I[13]+4254626195&4294967295,k=y+(A<<12&4294967295|A>>>20),A=x+(b^k&(y^b))+I[14]+2792965006&4294967295,x=k+(A<<17&4294967295|A>>>15),A=b+(y^x&(k^y))+I[15]+1236535329&4294967295,b=x+(A<<22&4294967295|A>>>10),A=y+(x^k&(b^x))+I[1]+4129170786&4294967295,y=b+(A<<5&4294967295|A>>>27),A=k+(b^x&(y^b))+I[6]+3225465664&4294967295,k=y+(A<<9&4294967295|A>>>23),A=x+(y^b&(k^y))+I[11]+643717713&4294967295,x=k+(A<<14&4294967295|A>>>18),A=b+(k^y&(x^k))+I[0]+3921069994&4294967295,b=x+(A<<20&4294967295|A>>>12),A=y+(x^k&(b^x))+I[5]+3593408605&4294967295,y=b+(A<<5&4294967295|A>>>27),A=k+(b^x&(y^b))+I[10]+38016083&4294967295,k=y+(A<<9&4294967295|A>>>23),A=x+(y^b&(k^y))+I[15]+3634488961&4294967295,x=k+(A<<14&4294967295|A>>>18),A=b+(k^y&(x^k))+I[4]+3889429448&4294967295,b=x+(A<<20&4294967295|A>>>12),A=y+(x^k&(b^x))+I[9]+568446438&4294967295,y=b+(A<<5&4294967295|A>>>27),A=k+(b^x&(y^b))+I[14]+3275163606&4294967295,k=y+(A<<9&4294967295|A>>>23),A=x+(y^b&(k^y))+I[3]+4107603335&4294967295,x=k+(A<<14&4294967295|A>>>18),A=b+(k^y&(x^k))+I[8]+1163531501&4294967295,b=x+(A<<20&4294967295|A>>>12),A=y+(x^k&(b^x))+I[13]+2850285829&4294967295,y=b+(A<<5&4294967295|A>>>27),A=k+(b^x&(y^b))+I[2]+4243563512&4294967295,k=y+(A<<9&4294967295|A>>>23),A=x+(y^b&(k^y))+I[7]+1735328473&4294967295,x=k+(A<<14&4294967295|A>>>18),A=b+(k^y&(x^k))+I[12]+2368359562&4294967295,b=x+(A<<20&4294967295|A>>>12),A=y+(b^x^k)+I[5]+4294588738&4294967295,y=b+(A<<4&4294967295|A>>>28),A=k+(y^b^x)+I[8]+2272392833&4294967295,k=y+(A<<11&4294967295|A>>>21),A=x+(k^y^b)+I[11]+1839030562&4294967295,x=k+(A<<16&4294967295|A>>>16),A=b+(x^k^y)+I[14]+4259657740&4294967295,b=x+(A<<23&4294967295|A>>>9),A=y+(b^x^k)+I[1]+2763975236&4294967295,y=b+(A<<4&4294967295|A>>>28),A=k+(y^b^x)+I[4]+1272893353&4294967295,k=y+(A<<11&4294967295|A>>>21),A=x+(k^y^b)+I[7]+4139469664&4294967295,x=k+(A<<16&4294967295|A>>>16),A=b+(x^k^y)+I[10]+3200236656&4294967295,b=x+(A<<23&4294967295|A>>>9),A=y+(b^x^k)+I[13]+681279174&4294967295,y=b+(A<<4&4294967295|A>>>28),A=k+(y^b^x)+I[0]+3936430074&4294967295,k=y+(A<<11&4294967295|A>>>21),A=x+(k^y^b)+I[3]+3572445317&4294967295,x=k+(A<<16&4294967295|A>>>16),A=b+(x^k^y)+I[6]+76029189&4294967295,b=x+(A<<23&4294967295|A>>>9),A=y+(b^x^k)+I[9]+3654602809&4294967295,y=b+(A<<4&4294967295|A>>>28),A=k+(y^b^x)+I[12]+3873151461&4294967295,k=y+(A<<11&4294967295|A>>>21),A=x+(k^y^b)+I[15]+530742520&4294967295,x=k+(A<<16&4294967295|A>>>16),A=b+(x^k^y)+I[2]+3299628645&4294967295,b=x+(A<<23&4294967295|A>>>9),A=y+(x^(b|~k))+I[0]+4096336452&4294967295,y=b+(A<<6&4294967295|A>>>26),A=k+(b^(y|~x))+I[7]+1126891415&4294967295,k=y+(A<<10&4294967295|A>>>22),A=x+(y^(k|~b))+I[14]+2878612391&4294967295,x=k+(A<<15&4294967295|A>>>17),A=b+(k^(x|~y))+I[5]+4237533241&4294967295,b=x+(A<<21&4294967295|A>>>11),A=y+(x^(b|~k))+I[12]+1700485571&4294967295,y=b+(A<<6&4294967295|A>>>26),A=k+(b^(y|~x))+I[3]+2399980690&4294967295,k=y+(A<<10&4294967295|A>>>22),A=x+(y^(k|~b))+I[10]+4293915773&4294967295,x=k+(A<<15&4294967295|A>>>17),A=b+(k^(x|~y))+I[1]+2240044497&4294967295,b=x+(A<<21&4294967295|A>>>11),A=y+(x^(b|~k))+I[8]+1873313359&4294967295,y=b+(A<<6&4294967295|A>>>26),A=k+(b^(y|~x))+I[15]+4264355552&4294967295,k=y+(A<<10&4294967295|A>>>22),A=x+(y^(k|~b))+I[6]+2734768916&4294967295,x=k+(A<<15&4294967295|A>>>17),A=b+(k^(x|~y))+I[13]+1309151649&4294967295,b=x+(A<<21&4294967295|A>>>11),A=y+(x^(b|~k))+I[4]+4149444226&4294967295,y=b+(A<<6&4294967295|A>>>26),A=k+(b^(y|~x))+I[11]+3174756917&4294967295,k=y+(A<<10&4294967295|A>>>22),A=x+(y^(k|~b))+I[2]+718787259&4294967295,x=k+(A<<15&4294967295|A>>>17),A=b+(k^(x|~y))+I[9]+3951481745&4294967295,g.g[0]=g.g[0]+y&4294967295,g.g[1]=g.g[1]+(x+(A<<21&4294967295|A>>>11))&4294967295,g.g[2]=g.g[2]+x&4294967295,g.g[3]=g.g[3]+k&4294967295}r.prototype.u=function(g,y){y===void 0&&(y=g.length);for(var b=y-this.blockSize,I=this.B,x=this.h,k=0;k<y;){if(x==0)for(;k<=b;)i(this,g,k),k+=this.blockSize;if(typeof g=="string"){for(;k<y;)if(I[x++]=g.charCodeAt(k++),x==this.blockSize){i(this,I),x=0;break}}else for(;k<y;)if(I[x++]=g[k++],x==this.blockSize){i(this,I),x=0;break}}this.h=x,this.o+=y},r.prototype.v=function(){var g=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);g[0]=128;for(var y=1;y<g.length-8;++y)g[y]=0;var b=8*this.o;for(y=g.length-8;y<g.length;++y)g[y]=b&255,b/=256;for(this.u(g),g=Array(16),y=b=0;4>y;++y)for(var I=0;32>I;I+=8)g[b++]=this.g[y]>>>I&255;return g};function s(g,y){var b=a;return Object.prototype.hasOwnProperty.call(b,g)?b[g]:b[g]=y(g)}function o(g,y){this.h=y;for(var b=[],I=!0,x=g.length-1;0<=x;x--){var k=g[x]|0;I&&k==y||(b[x]=k,I=!1)}this.g=b}var a={};function l(g){return-128<=g&&128>g?s(g,function(y){return new o([y|0],0>y?-1:0)}):new o([g|0],0>g?-1:0)}function c(g){if(isNaN(g)||!isFinite(g))return f;if(0>g)return P(c(-g));for(var y=[],b=1,I=0;g>=b;I++)y[I]=g/b|0,b*=4294967296;return new o(y,0)}function h(g,y){if(g.length==0)throw Error("number format error: empty string");if(y=y||10,2>y||36<y)throw Error("radix out of range: "+y);if(g.charAt(0)=="-")return P(h(g.substring(1),y));if(0<=g.indexOf("-"))throw Error('number format error: interior "-" character');for(var b=c(Math.pow(y,8)),I=f,x=0;x<g.length;x+=8){var k=Math.min(8,g.length-x),A=parseInt(g.substring(x,x+k),y);8>k?(k=c(Math.pow(y,k)),I=I.j(k).add(c(A))):(I=I.j(b),I=I.add(c(A)))}return I}var f=l(0),p=l(1),w=l(16777216);t=o.prototype,t.m=function(){if(S(this))return-P(this).m();for(var g=0,y=1,b=0;b<this.g.length;b++){var I=this.i(b);g+=(0<=I?I:4294967296+I)*y,y*=4294967296}return g},t.toString=function(g){if(g=g||10,2>g||36<g)throw Error("radix out of range: "+g);if(E(this))return"0";if(S(this))return"-"+P(this).toString(g);for(var y=c(Math.pow(g,6)),b=this,I="";;){var x=N(b,y).g;b=T(b,x.j(y));var k=((0<b.g.length?b.g[0]:b.h)>>>0).toString(g);if(b=x,E(b))return k+I;for(;6>k.length;)k="0"+k;I=k+I}},t.i=function(g){return 0>g?0:g<this.g.length?this.g[g]:this.h};function E(g){if(g.h!=0)return!1;for(var y=0;y<g.g.length;y++)if(g.g[y]!=0)return!1;return!0}function S(g){return g.h==-1}t.l=function(g){return g=T(this,g),S(g)?-1:E(g)?0:1};function P(g){for(var y=g.g.length,b=[],I=0;I<y;I++)b[I]=~g.g[I];return new o(b,~g.h).add(p)}t.abs=function(){return S(this)?P(this):this},t.add=function(g){for(var y=Math.max(this.g.length,g.g.length),b=[],I=0,x=0;x<=y;x++){var k=I+(this.i(x)&65535)+(g.i(x)&65535),A=(k>>>16)+(this.i(x)>>>16)+(g.i(x)>>>16);I=A>>>16,k&=65535,A&=65535,b[x]=A<<16|k}return new o(b,b[b.length-1]&-2147483648?-1:0)};function T(g,y){return g.add(P(y))}t.j=function(g){if(E(this)||E(g))return f;if(S(this))return S(g)?P(this).j(P(g)):P(P(this).j(g));if(S(g))return P(this.j(P(g)));if(0>this.l(w)&&0>g.l(w))return c(this.m()*g.m());for(var y=this.g.length+g.g.length,b=[],I=0;I<2*y;I++)b[I]=0;for(I=0;I<this.g.length;I++)for(var x=0;x<g.g.length;x++){var k=this.i(I)>>>16,A=this.i(I)&65535,Ie=g.i(x)>>>16,it=g.i(x)&65535;b[2*I+2*x]+=A*it,_(b,2*I+2*x),b[2*I+2*x+1]+=k*it,_(b,2*I+2*x+1),b[2*I+2*x+1]+=A*Ie,_(b,2*I+2*x+1),b[2*I+2*x+2]+=k*Ie,_(b,2*I+2*x+2)}for(I=0;I<y;I++)b[I]=b[2*I+1]<<16|b[2*I];for(I=y;I<2*y;I++)b[I]=0;return new o(b,0)};function _(g,y){for(;(g[y]&65535)!=g[y];)g[y+1]+=g[y]>>>16,g[y]&=65535,y++}function C(g,y){this.g=g,this.h=y}function N(g,y){if(E(y))throw Error("division by zero");if(E(g))return new C(f,f);if(S(g))return y=N(P(g),y),new C(P(y.g),P(y.h));if(S(y))return y=N(g,P(y)),new C(P(y.g),y.h);if(30<g.g.length){if(S(g)||S(y))throw Error("slowDivide_ only works with positive integers.");for(var b=p,I=y;0>=I.l(g);)b=F(b),I=F(I);var x=z(b,1),k=z(I,1);for(I=z(I,2),b=z(b,2);!E(I);){var A=k.add(I);0>=A.l(g)&&(x=x.add(b),k=A),I=z(I,1),b=z(b,1)}return y=T(g,x.j(y)),new C(x,y)}for(x=f;0<=g.l(y);){for(b=Math.max(1,Math.floor(g.m()/y.m())),I=Math.ceil(Math.log(b)/Math.LN2),I=48>=I?1:Math.pow(2,I-48),k=c(b),A=k.j(y);S(A)||0<A.l(g);)b-=I,k=c(b),A=k.j(y);E(k)&&(k=p),x=x.add(k),g=T(g,A)}return new C(x,g)}t.A=function(g){return N(this,g).h},t.and=function(g){for(var y=Math.max(this.g.length,g.g.length),b=[],I=0;I<y;I++)b[I]=this.i(I)&g.i(I);return new o(b,this.h&g.h)},t.or=function(g){for(var y=Math.max(this.g.length,g.g.length),b=[],I=0;I<y;I++)b[I]=this.i(I)|g.i(I);return new o(b,this.h|g.h)},t.xor=function(g){for(var y=Math.max(this.g.length,g.g.length),b=[],I=0;I<y;I++)b[I]=this.i(I)^g.i(I);return new o(b,this.h^g.h)};function F(g){for(var y=g.g.length+1,b=[],I=0;I<y;I++)b[I]=g.i(I)<<1|g.i(I-1)>>>31;return new o(b,g.h)}function z(g,y){var b=y>>5;y%=32;for(var I=g.g.length-b,x=[],k=0;k<I;k++)x[k]=0<y?g.i(k+b)>>>y|g.i(k+b+1)<<32-y:g.i(k+b);return new o(x,g.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,wT=r,o.prototype.add=o.prototype.add,o.prototype.multiply=o.prototype.j,o.prototype.modulo=o.prototype.A,o.prototype.compare=o.prototype.l,o.prototype.toNumber=o.prototype.m,o.prototype.toString=o.prototype.toString,o.prototype.getBits=o.prototype.i,o.fromNumber=c,o.fromString=h,Cs=o}).apply(typeof k0<"u"?k0:typeof self<"u"?self:typeof window<"u"?window:{});var dc=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var ET,bT,cl,TT,Uc,Qp,CT,IT,ST;(function(){var t,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(u,d,m){return u==Array.prototype||u==Object.prototype||(u[d]=m.value),u};function n(u){u=[typeof globalThis=="object"&&globalThis,u,typeof window=="object"&&window,typeof self=="object"&&self,typeof dc=="object"&&dc];for(var d=0;d<u.length;++d){var m=u[d];if(m&&m.Math==Math)return m}throw Error("Cannot find global object")}var r=n(this);function i(u,d){if(d)e:{var m=r;u=u.split(".");for(var v=0;v<u.length-1;v++){var L=u[v];if(!(L in m))break e;m=m[L]}u=u[u.length-1],v=m[u],d=d(v),d!=v&&d!=null&&e(m,u,{configurable:!0,writable:!0,value:d})}}function s(u,d){u instanceof String&&(u+="");var m=0,v=!1,L={next:function(){if(!v&&m<u.length){var U=m++;return{value:d(U,u[U]),done:!1}}return v=!0,{done:!0,value:void 0}}};return L[Symbol.iterator]=function(){return L},L}i("Array.prototype.values",function(u){return u||function(){return s(this,function(d,m){return m})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var o=o||{},a=this||self;function l(u){var d=typeof u;return d=d!="object"?d:u?Array.isArray(u)?"array":d:"null",d=="array"||d=="object"&&typeof u.length=="number"}function c(u){var d=typeof u;return d=="object"&&u!=null||d=="function"}function h(u,d,m){return u.call.apply(u.bind,arguments)}function f(u,d,m){if(!u)throw Error();if(2<arguments.length){var v=Array.prototype.slice.call(arguments,2);return function(){var L=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(L,v),u.apply(d,L)}}return function(){return u.apply(d,arguments)}}function p(u,d,m){return p=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?h:f,p.apply(null,arguments)}function w(u,d){var m=Array.prototype.slice.call(arguments,1);return function(){var v=m.slice();return v.push.apply(v,arguments),u.apply(this,v)}}function E(u,d){function m(){}m.prototype=d.prototype,u.aa=d.prototype,u.prototype=new m,u.prototype.constructor=u,u.Qb=function(v,L,U){for(var G=Array(arguments.length-2),Re=2;Re<arguments.length;Re++)G[Re-2]=arguments[Re];return d.prototype[L].apply(v,G)}}function S(u){const d=u.length;if(0<d){const m=Array(d);for(let v=0;v<d;v++)m[v]=u[v];return m}return[]}function P(u,d){for(let m=1;m<arguments.length;m++){const v=arguments[m];if(l(v)){const L=u.length||0,U=v.length||0;u.length=L+U;for(let G=0;G<U;G++)u[L+G]=v[G]}else u.push(v)}}class T{constructor(d,m){this.i=d,this.j=m,this.h=0,this.g=null}get(){let d;return 0<this.h?(this.h--,d=this.g,this.g=d.next,d.next=null):d=this.i(),d}}function _(u){return/^[\s\xa0]*$/.test(u)}function C(){var u=a.navigator;return u&&(u=u.userAgent)?u:""}function N(u){return N[" "](u),u}N[" "]=function(){};var F=C().indexOf("Gecko")!=-1&&!(C().toLowerCase().indexOf("webkit")!=-1&&C().indexOf("Edge")==-1)&&!(C().indexOf("Trident")!=-1||C().indexOf("MSIE")!=-1)&&C().indexOf("Edge")==-1;function z(u,d,m){for(const v in u)d.call(m,u[v],v,u)}function g(u,d){for(const m in u)d.call(void 0,u[m],m,u)}function y(u){const d={};for(const m in u)d[m]=u[m];return d}const b="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function I(u,d){let m,v;for(let L=1;L<arguments.length;L++){v=arguments[L];for(m in v)u[m]=v[m];for(let U=0;U<b.length;U++)m=b[U],Object.prototype.hasOwnProperty.call(v,m)&&(u[m]=v[m])}}function x(u){var d=1;u=u.split(":");const m=[];for(;0<d&&u.length;)m.push(u.shift()),d--;return u.length&&m.push(u.join(":")),m}function k(u){a.setTimeout(()=>{throw u},0)}function A(){var u=ee;let d=null;return u.g&&(d=u.g,u.g=u.g.next,u.g||(u.h=null),d.next=null),d}class Ie{constructor(){this.h=this.g=null}add(d,m){const v=it.get();v.set(d,m),this.h?this.h.next=v:this.g=v,this.h=v}}var it=new T(()=>new Ht,u=>u.reset());class Ht{constructor(){this.next=this.g=this.h=null}set(d,m){this.h=d,this.g=m,this.next=null}reset(){this.next=this.g=this.h=null}}let _t,H=!1,ee=new Ie,re=()=>{const u=a.Promise.resolve(void 0);_t=()=>{u.then(_e)}};var _e=()=>{for(var u;u=A();){try{u.h.call(u.g)}catch(m){k(m)}var d=it;d.j(u),100>d.h&&(d.h++,u.next=d.g,d.g=u)}H=!1};function he(){this.s=this.s,this.C=this.C}he.prototype.s=!1,he.prototype.ma=function(){this.s||(this.s=!0,this.N())},he.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function Pe(u,d){this.type=u,this.g=this.target=d,this.defaultPrevented=!1}Pe.prototype.h=function(){this.defaultPrevented=!0};var Wt=function(){if(!a.addEventListener||!Object.defineProperty)return!1;var u=!1,d=Object.defineProperty({},"passive",{get:function(){u=!0}});try{const m=()=>{};a.addEventListener("test",m,d),a.removeEventListener("test",m,d)}catch{}return u}();function ht(u,d){if(Pe.call(this,u?u.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,u){var m=this.type=u.type,v=u.changedTouches&&u.changedTouches.length?u.changedTouches[0]:null;if(this.target=u.target||u.srcElement,this.g=d,d=u.relatedTarget){if(F){e:{try{N(d.nodeName);var L=!0;break e}catch{}L=!1}L||(d=null)}}else m=="mouseover"?d=u.fromElement:m=="mouseout"&&(d=u.toElement);this.relatedTarget=d,v?(this.clientX=v.clientX!==void 0?v.clientX:v.pageX,this.clientY=v.clientY!==void 0?v.clientY:v.pageY,this.screenX=v.screenX||0,this.screenY=v.screenY||0):(this.clientX=u.clientX!==void 0?u.clientX:u.pageX,this.clientY=u.clientY!==void 0?u.clientY:u.pageY,this.screenX=u.screenX||0,this.screenY=u.screenY||0),this.button=u.button,this.key=u.key||"",this.ctrlKey=u.ctrlKey,this.altKey=u.altKey,this.shiftKey=u.shiftKey,this.metaKey=u.metaKey,this.pointerId=u.pointerId||0,this.pointerType=typeof u.pointerType=="string"?u.pointerType:wt[u.pointerType]||"",this.state=u.state,this.i=u,u.defaultPrevented&&ht.aa.h.call(this)}}E(ht,Pe);var wt={2:"touch",3:"pen",4:"mouse"};ht.prototype.h=function(){ht.aa.h.call(this);var u=this.i;u.preventDefault?u.preventDefault():u.returnValue=!1};var Et="closure_listenable_"+(1e6*Math.random()|0),Ia=0;function Dd(u,d,m,v,L){this.listener=u,this.proxy=null,this.src=d,this.type=m,this.capture=!!v,this.ha=L,this.key=++Ia,this.da=this.fa=!1}function Gs(u){u.da=!0,u.listener=null,u.proxy=null,u.src=null,u.ha=null}function Ks(u){this.src=u,this.g={},this.h=0}Ks.prototype.add=function(u,d,m,v,L){var U=u.toString();u=this.g[U],u||(u=this.g[U]=[],this.h++);var G=pr(u,d,v,L);return-1<G?(d=u[G],m||(d.fa=!1)):(d=new Dd(d,this.src,U,!!v,L),d.fa=m,u.push(d)),d};function bt(u,d){var m=d.type;if(m in u.g){var v=u.g[m],L=Array.prototype.indexOf.call(v,d,void 0),U;(U=0<=L)&&Array.prototype.splice.call(v,L,1),U&&(Gs(d),u.g[m].length==0&&(delete u.g[m],u.h--))}}function pr(u,d,m,v){for(var L=0;L<u.length;++L){var U=u[L];if(!U.da&&U.listener==d&&U.capture==!!m&&U.ha==v)return L}return-1}var Qs="closure_lm_"+(1e6*Math.random()|0),Sa={};function Jn(u,d,m,v,L){if(Array.isArray(d)){for(var U=0;U<d.length;U++)Jn(u,d[U],m,v,L);return null}return m=Ys(m),u&&u[Et]?u.K(d,m,c(v)?!!v.capture:!!v,L):Md(u,d,m,!1,v,L)}function Md(u,d,m,v,L,U){if(!d)throw Error("Invalid event type");var G=c(L)?!!L.capture:!!L,Re=mr(u);if(Re||(u[Qs]=Re=new Ks(u)),m=Re.add(d,m,v,G,U),m.proxy)return m;if(v=Vd(),m.proxy=v,v.src=u,v.listener=m,u.addEventListener)Wt||(L=G),L===void 0&&(L=!1),u.addEventListener(d.toString(),v,L);else if(u.attachEvent)u.attachEvent(Lu(d.toString()),v);else if(u.addListener&&u.removeListener)u.addListener(v);else throw Error("addEventListener and attachEvent are unavailable.");return m}function Vd(){function u(m){return d.call(u.src,u.listener,m)}const d=rs;return u}function Ou(u,d,m,v,L){if(Array.isArray(d))for(var U=0;U<d.length;U++)Ou(u,d[U],m,v,L);else v=c(v)?!!v.capture:!!v,m=Ys(m),u&&u[Et]?(u=u.i,d=String(d).toString(),d in u.g&&(U=u.g[d],m=pr(U,m,v,L),-1<m&&(Gs(U[m]),Array.prototype.splice.call(U,m,1),U.length==0&&(delete u.g[d],u.h--)))):u&&(u=mr(u))&&(d=u.g[d.toString()],u=-1,d&&(u=pr(d,m,v,L)),(m=-1<u?d[u]:null)&&Aa(m))}function Aa(u){if(typeof u!="number"&&u&&!u.da){var d=u.src;if(d&&d[Et])bt(d.i,u);else{var m=u.type,v=u.proxy;d.removeEventListener?d.removeEventListener(m,v,u.capture):d.detachEvent?d.detachEvent(Lu(m),v):d.addListener&&d.removeListener&&d.removeListener(v),(m=mr(d))?(bt(m,u),m.h==0&&(m.src=null,d[Qs]=null)):Gs(u)}}}function Lu(u){return u in Sa?Sa[u]:Sa[u]="on"+u}function rs(u,d){if(u.da)u=!0;else{d=new ht(d,this);var m=u.listener,v=u.ha||u.src;u.fa&&Aa(u),u=m.call(v,d)}return u}function mr(u){return u=u[Qs],u instanceof Ks?u:null}var Xs="__closure_events_fn_"+(1e9*Math.random()>>>0);function Ys(u){return typeof u=="function"?u:(u[Xs]||(u[Xs]=function(d){return u.handleEvent(d)}),u[Xs])}function Me(){he.call(this),this.i=new Ks(this),this.M=this,this.F=null}E(Me,he),Me.prototype[Et]=!0,Me.prototype.removeEventListener=function(u,d,m,v){Ou(this,u,d,m,v)};function et(u,d){var m,v=u.F;if(v)for(m=[];v;v=v.F)m.push(v);if(u=u.M,v=d.type||d,typeof d=="string")d=new Pe(d,u);else if(d instanceof Pe)d.target=d.target||u;else{var L=d;d=new Pe(v,u),I(d,L)}if(L=!0,m)for(var U=m.length-1;0<=U;U--){var G=d.g=m[U];L=is(G,v,!0,d)&&L}if(G=d.g=u,L=is(G,v,!0,d)&&L,L=is(G,v,!1,d)&&L,m)for(U=0;U<m.length;U++)G=d.g=m[U],L=is(G,v,!1,d)&&L}Me.prototype.N=function(){if(Me.aa.N.call(this),this.i){var u=this.i,d;for(d in u.g){for(var m=u.g[d],v=0;v<m.length;v++)Gs(m[v]);delete u.g[d],u.h--}}this.F=null},Me.prototype.K=function(u,d,m,v){return this.i.add(String(u),d,!1,m,v)},Me.prototype.L=function(u,d,m,v){return this.i.add(String(u),d,!0,m,v)};function is(u,d,m,v){if(d=u.i.g[String(d)],!d)return!0;d=d.concat();for(var L=!0,U=0;U<d.length;++U){var G=d[U];if(G&&!G.da&&G.capture==m){var Re=G.listener,It=G.ha||G.src;G.fa&&bt(u.i,G),L=Re.call(It,v)!==!1&&L}}return L&&!v.defaultPrevented}function ss(u,d,m){if(typeof u=="function")m&&(u=p(u,m));else if(u&&typeof u.handleEvent=="function")u=p(u.handleEvent,u);else throw Error("Invalid listener argument");return 2147483647<Number(d)?-1:a.setTimeout(u,d||0)}function Nu(u){u.g=ss(()=>{u.g=null,u.i&&(u.i=!1,Nu(u))},u.l);const d=u.h;u.h=null,u.m.apply(null,d)}class Zn extends he{constructor(d,m){super(),this.m=d,this.l=m,this.h=null,this.i=!1,this.g=null}j(d){this.h=arguments,this.g?this.i=!0:Nu(this)}N(){super.N(),this.g&&(a.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Jr(u){he.call(this),this.h=u,this.g={}}E(Jr,he);var xa=[];function ka(u){z(u.g,function(d,m){this.g.hasOwnProperty(m)&&Aa(d)},u),u.g={}}Jr.prototype.N=function(){Jr.aa.N.call(this),ka(this)},Jr.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Pa=a.JSON.stringify,Du=a.JSON.parse,Js=class{stringify(u){return a.JSON.stringify(u,void 0)}parse(u){return a.JSON.parse(u,void 0)}};function Zs(){}Zs.prototype.h=null;function eo(u){return u.h||(u.h=u.i())}function Mu(){}var Zr={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function Ra(){Pe.call(this,"d")}E(Ra,Pe);function to(){Pe.call(this,"c")}E(to,Pe);var gr={},O=null;function M(){return O=O||new Me}gr.La="serverreachability";function $(u){Pe.call(this,gr.La,u)}E($,Pe);function q(u){const d=M();et(d,new $(d))}gr.STAT_EVENT="statevent";function Q(u,d){Pe.call(this,gr.STAT_EVENT,u),this.stat=d}E(Q,Pe);function Z(u){const d=M();et(d,new Q(d,u))}gr.Ma="timingevent";function te(u,d){Pe.call(this,gr.Ma,u),this.size=d}E(te,Pe);function K(u,d){if(typeof u!="function")throw Error("Fn must not be null and must be a function");return a.setTimeout(function(){u()},d)}function oe(){this.g=!0}oe.prototype.xa=function(){this.g=!1};function ae(u,d,m,v,L,U){u.info(function(){if(u.g)if(U)for(var G="",Re=U.split("&"),It=0;It<Re.length;It++){var Se=Re[It].split("=");if(1<Se.length){var Nt=Se[0];Se=Se[1];var Dt=Nt.split("_");G=2<=Dt.length&&Dt[1]=="type"?G+(Nt+"="+Se+"&"):G+(Nt+"=redacted&")}}else G=null;else G=U;return"XMLHTTP REQ ("+v+") [attempt "+L+"]: "+d+`
`+m+`
`+G})}function dt(u,d,m,v,L,U,G){u.info(function(){return"XMLHTTP RESP ("+v+") [ attempt "+L+"]: "+d+`
`+m+`
`+U+" "+G})}function ze(u,d,m,v){u.info(function(){return"XMLHTTP TEXT ("+d+"): "+Le(u,m)+(v?" "+v:"")})}function ie(u,d){u.info(function(){return"TIMEOUT: "+d})}oe.prototype.info=function(){};function Le(u,d){if(!u.g)return d;if(!d)return null;try{var m=JSON.parse(d);if(m){for(u=0;u<m.length;u++)if(Array.isArray(m[u])){var v=m[u];if(!(2>v.length)){var L=v[1];if(Array.isArray(L)&&!(1>L.length)){var U=L[0];if(U!="noop"&&U!="stop"&&U!="close")for(var G=1;G<L.length;G++)L[G]=""}}}}return Pa(m)}catch{return d}}var We={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},ei={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},vn;function Mn(){}E(Mn,Zs),Mn.prototype.g=function(){return new XMLHttpRequest},Mn.prototype.i=function(){return{}},vn=new Mn;function qt(u,d,m,v){this.j=u,this.i=d,this.l=m,this.R=v||1,this.U=new Jr(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new yr}function yr(){this.i=null,this.g="",this.h=!1}var cn={},ti={};function ni(u,d,m){u.L=1,u.v=$u(wr(d)),u.m=m,u.P=!0,os(u,null)}function os(u,d){u.F=Date.now(),Ct(u),u.A=wr(u.v);var m=u.A,v=u.R;Array.isArray(v)||(v=[String(v)]),Zy(m.i,"t",v),u.C=0,m=u.j.J,u.h=new yr,u.g=yv(u.j,m?d:null,!u.m),0<u.O&&(u.M=new Zn(p(u.Y,u,u.g),u.O)),d=u.U,m=u.g,v=u.ca;var L="readystatechange";Array.isArray(L)||(L&&(xa[0]=L.toString()),L=xa);for(var U=0;U<L.length;U++){var G=Jn(m,L[U],v||d.handleEvent,!1,d.h||d);if(!G)break;d.g[G.key]=G}d=u.H?y(u.H):{},u.m?(u.u||(u.u="POST"),d["Content-Type"]="application/x-www-form-urlencoded",u.g.ea(u.A,u.u,u.m,d)):(u.u="GET",u.g.ea(u.A,u.u,null,d)),q(),ae(u.i,u.u,u.A,u.l,u.R,u.m)}qt.prototype.ca=function(u){u=u.target;const d=this.M;d&&Er(u)==3?d.j():this.Y(u)},qt.prototype.Y=function(u){try{if(u==this.g)e:{const Dt=Er(this.g);var d=this.g.Ba();const io=this.g.Z();if(!(3>Dt)&&(Dt!=3||this.g&&(this.h.h||this.g.oa()||ov(this.g)))){this.J||Dt!=4||d==7||(d==8||0>=io?q(3):q(2)),vr(this);var m=this.g.Z();this.X=m;t:if(ye(this)){var v=ov(this.g);u="";var L=v.length,U=Er(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){_r(this),ri(this);var G="";break t}this.h.i=new a.TextDecoder}for(d=0;d<L;d++)this.h.h=!0,u+=this.h.i.decode(v[d],{stream:!(U&&d==L-1)});v.length=0,this.h.g+=u,this.C=0,G=this.h.g}else G=this.g.oa();if(this.o=m==200,dt(this.i,this.u,this.A,this.l,this.R,Dt,m),this.o){if(this.T&&!this.K){t:{if(this.g){var Re,It=this.g;if((Re=It.g?It.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!_(Re)){var Se=Re;break t}}Se=null}if(m=Se)ze(this.i,this.l,m,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Ud(this,m);else{this.o=!1,this.s=3,Z(12),_r(this),ri(this);break e}}if(this.P){m=!0;let Vn;for(;!this.J&&this.C<G.length;)if(Vn=Tt(this,G),Vn==ti){Dt==4&&(this.s=4,Z(14),m=!1),ze(this.i,this.l,null,"[Incomplete Response]");break}else if(Vn==cn){this.s=4,Z(15),ze(this.i,this.l,G,"[Invalid Chunk]"),m=!1;break}else ze(this.i,this.l,Vn,null),Ud(this,Vn);if(ye(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Dt!=4||G.length!=0||this.h.h||(this.s=1,Z(16),m=!1),this.o=this.o&&m,!m)ze(this.i,this.l,G,"[Invalid Chunked Response]"),_r(this),ri(this);else if(0<G.length&&!this.W){this.W=!0;var Nt=this.j;Nt.g==this&&Nt.ba&&!Nt.M&&(Nt.j.info("Great, no buffering proxy detected. Bytes received: "+G.length),Hd(Nt),Nt.M=!0,Z(11))}}else ze(this.i,this.l,G,null),Ud(this,G);Dt==4&&_r(this),this.o&&!this.J&&(Dt==4?fv(this.j,this):(this.o=!1,Ct(this)))}else $S(this.g),m==400&&0<G.indexOf("Unknown SID")?(this.s=3,Z(12)):(this.s=0,Z(13)),_r(this),ri(this)}}}catch{}finally{}};function ye(u){return u.g?u.u=="GET"&&u.L!=2&&u.j.Ca:!1}function Tt(u,d){var m=u.C,v=d.indexOf(`
`,m);return v==-1?ti:(m=Number(d.substring(m,v)),isNaN(m)?cn:(v+=1,v+m>d.length?ti:(d=d.slice(v,v+m),u.C=v+m,d)))}qt.prototype.cancel=function(){this.J=!0,_r(this)};function Ct(u){u.S=Date.now()+u.I,st(u,u.I)}function st(u,d){if(u.B!=null)throw Error("WatchDog timer not null");u.B=K(p(u.ba,u),d)}function vr(u){u.B&&(a.clearTimeout(u.B),u.B=null)}qt.prototype.ba=function(){this.B=null;const u=Date.now();0<=u-this.S?(ie(this.i,this.A),this.L!=2&&(q(),Z(17)),_r(this),this.s=2,ri(this)):st(this,this.S-u)};function ri(u){u.j.G==0||u.J||fv(u.j,u)}function _r(u){vr(u);var d=u.M;d&&typeof d.ma=="function"&&d.ma(),u.M=null,ka(u.U),u.g&&(d=u.g,u.g=null,d.abort(),d.ma())}function Ud(u,d){try{var m=u.j;if(m.G!=0&&(m.g==u||$d(m.h,u))){if(!u.K&&$d(m.h,u)&&m.G==3){try{var v=m.Da.g.parse(d)}catch{v=null}if(Array.isArray(v)&&v.length==3){var L=v;if(L[0]==0){e:if(!m.u){if(m.g)if(m.g.F+3e3<u.F)Hu(m),zu(m);else break e;Bd(m),Z(18)}}else m.za=L[1],0<m.za-m.T&&37500>L[2]&&m.F&&m.v==0&&!m.C&&(m.C=K(p(m.Za,m),6e3));if(1>=Hy(m.h)&&m.ca){try{m.ca()}catch{}m.ca=void 0}}else ls(m,11)}else if((u.K||m.g==u)&&Hu(m),!_(d))for(L=m.Da.g.parse(d),d=0;d<L.length;d++){let Se=L[d];if(m.T=Se[0],Se=Se[1],m.G==2)if(Se[0]=="c"){m.K=Se[1],m.ia=Se[2];const Nt=Se[3];Nt!=null&&(m.la=Nt,m.j.info("VER="+m.la));const Dt=Se[4];Dt!=null&&(m.Aa=Dt,m.j.info("SVER="+m.Aa));const io=Se[5];io!=null&&typeof io=="number"&&0<io&&(v=1.5*io,m.L=v,m.j.info("backChannelRequestTimeoutMs_="+v)),v=m;const Vn=u.g;if(Vn){const qu=Vn.g?Vn.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(qu){var U=v.h;U.g||qu.indexOf("spdy")==-1&&qu.indexOf("quic")==-1&&qu.indexOf("h2")==-1||(U.j=U.l,U.g=new Set,U.h&&(Fd(U,U.h),U.h=null))}if(v.D){const Wd=Vn.g?Vn.g.getResponseHeader("X-HTTP-Session-Id"):null;Wd&&(v.ya=Wd,Ve(v.I,v.D,Wd))}}m.G=3,m.l&&m.l.ua(),m.ba&&(m.R=Date.now()-u.F,m.j.info("Handshake RTT: "+m.R+"ms")),v=m;var G=u;if(v.qa=gv(v,v.J?v.ia:null,v.W),G.K){Wy(v.h,G);var Re=G,It=v.L;It&&(Re.I=It),Re.B&&(vr(Re),Ct(Re)),v.g=G}else hv(v);0<m.i.length&&Bu(m)}else Se[0]!="stop"&&Se[0]!="close"||ls(m,7);else m.G==3&&(Se[0]=="stop"||Se[0]=="close"?Se[0]=="stop"?ls(m,7):zd(m):Se[0]!="noop"&&m.l&&m.l.ta(Se),m.v=0)}}q(4)}catch{}}var TS=class{constructor(u,d){this.g=u,this.map=d}};function zy(u){this.l=u||10,a.PerformanceNavigationTiming?(u=a.performance.getEntriesByType("navigation"),u=0<u.length&&(u[0].nextHopProtocol=="hq"||u[0].nextHopProtocol=="h2")):u=!!(a.chrome&&a.chrome.loadTimes&&a.chrome.loadTimes()&&a.chrome.loadTimes().wasFetchedViaSpdy),this.j=u?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function By(u){return u.h?!0:u.g?u.g.size>=u.j:!1}function Hy(u){return u.h?1:u.g?u.g.size:0}function $d(u,d){return u.h?u.h==d:u.g?u.g.has(d):!1}function Fd(u,d){u.g?u.g.add(d):u.h=d}function Wy(u,d){u.h&&u.h==d?u.h=null:u.g&&u.g.has(d)&&u.g.delete(d)}zy.prototype.cancel=function(){if(this.i=qy(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const u of this.g.values())u.cancel();this.g.clear()}};function qy(u){if(u.h!=null)return u.i.concat(u.h.D);if(u.g!=null&&u.g.size!==0){let d=u.i;for(const m of u.g.values())d=d.concat(m.D);return d}return S(u.i)}function CS(u){if(u.V&&typeof u.V=="function")return u.V();if(typeof Map<"u"&&u instanceof Map||typeof Set<"u"&&u instanceof Set)return Array.from(u.values());if(typeof u=="string")return u.split("");if(l(u)){for(var d=[],m=u.length,v=0;v<m;v++)d.push(u[v]);return d}d=[],m=0;for(v in u)d[m++]=u[v];return d}function IS(u){if(u.na&&typeof u.na=="function")return u.na();if(!u.V||typeof u.V!="function"){if(typeof Map<"u"&&u instanceof Map)return Array.from(u.keys());if(!(typeof Set<"u"&&u instanceof Set)){if(l(u)||typeof u=="string"){var d=[];u=u.length;for(var m=0;m<u;m++)d.push(m);return d}d=[],m=0;for(const v in u)d[m++]=v;return d}}}function Gy(u,d){if(u.forEach&&typeof u.forEach=="function")u.forEach(d,void 0);else if(l(u)||typeof u=="string")Array.prototype.forEach.call(u,d,void 0);else for(var m=IS(u),v=CS(u),L=v.length,U=0;U<L;U++)d.call(void 0,v[U],m&&m[U],u)}var Ky=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function SS(u,d){if(u){u=u.split("&");for(var m=0;m<u.length;m++){var v=u[m].indexOf("="),L=null;if(0<=v){var U=u[m].substring(0,v);L=u[m].substring(v+1)}else U=u[m];d(U,L?decodeURIComponent(L.replace(/\+/g," ")):"")}}}function as(u){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,u instanceof as){this.h=u.h,Vu(this,u.j),this.o=u.o,this.g=u.g,Uu(this,u.s),this.l=u.l;var d=u.i,m=new Na;m.i=d.i,d.g&&(m.g=new Map(d.g),m.h=d.h),Qy(this,m),this.m=u.m}else u&&(d=String(u).match(Ky))?(this.h=!1,Vu(this,d[1]||"",!0),this.o=Oa(d[2]||""),this.g=Oa(d[3]||"",!0),Uu(this,d[4]),this.l=Oa(d[5]||"",!0),Qy(this,d[6]||"",!0),this.m=Oa(d[7]||"")):(this.h=!1,this.i=new Na(null,this.h))}as.prototype.toString=function(){var u=[],d=this.j;d&&u.push(La(d,Xy,!0),":");var m=this.g;return(m||d=="file")&&(u.push("//"),(d=this.o)&&u.push(La(d,Xy,!0),"@"),u.push(encodeURIComponent(String(m)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),m=this.s,m!=null&&u.push(":",String(m))),(m=this.l)&&(this.g&&m.charAt(0)!="/"&&u.push("/"),u.push(La(m,m.charAt(0)=="/"?kS:xS,!0))),(m=this.i.toString())&&u.push("?",m),(m=this.m)&&u.push("#",La(m,RS)),u.join("")};function wr(u){return new as(u)}function Vu(u,d,m){u.j=m?Oa(d,!0):d,u.j&&(u.j=u.j.replace(/:$/,""))}function Uu(u,d){if(d){if(d=Number(d),isNaN(d)||0>d)throw Error("Bad port number "+d);u.s=d}else u.s=null}function Qy(u,d,m){d instanceof Na?(u.i=d,OS(u.i,u.h)):(m||(d=La(d,PS)),u.i=new Na(d,u.h))}function Ve(u,d,m){u.i.set(d,m)}function $u(u){return Ve(u,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),u}function Oa(u,d){return u?d?decodeURI(u.replace(/%25/g,"%2525")):decodeURIComponent(u):""}function La(u,d,m){return typeof u=="string"?(u=encodeURI(u).replace(d,AS),m&&(u=u.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),u):null}function AS(u){return u=u.charCodeAt(0),"%"+(u>>4&15).toString(16)+(u&15).toString(16)}var Xy=/[#\/\?@]/g,xS=/[#\?:]/g,kS=/[#\?]/g,PS=/[#\?@]/g,RS=/#/g;function Na(u,d){this.h=this.g=null,this.i=u||null,this.j=!!d}function ii(u){u.g||(u.g=new Map,u.h=0,u.i&&SS(u.i,function(d,m){u.add(decodeURIComponent(d.replace(/\+/g," ")),m)}))}t=Na.prototype,t.add=function(u,d){ii(this),this.i=null,u=no(this,u);var m=this.g.get(u);return m||this.g.set(u,m=[]),m.push(d),this.h+=1,this};function Yy(u,d){ii(u),d=no(u,d),u.g.has(d)&&(u.i=null,u.h-=u.g.get(d).length,u.g.delete(d))}function Jy(u,d){return ii(u),d=no(u,d),u.g.has(d)}t.forEach=function(u,d){ii(this),this.g.forEach(function(m,v){m.forEach(function(L){u.call(d,L,v,this)},this)},this)},t.na=function(){ii(this);const u=Array.from(this.g.values()),d=Array.from(this.g.keys()),m=[];for(let v=0;v<d.length;v++){const L=u[v];for(let U=0;U<L.length;U++)m.push(d[v])}return m},t.V=function(u){ii(this);let d=[];if(typeof u=="string")Jy(this,u)&&(d=d.concat(this.g.get(no(this,u))));else{u=Array.from(this.g.values());for(let m=0;m<u.length;m++)d=d.concat(u[m])}return d},t.set=function(u,d){return ii(this),this.i=null,u=no(this,u),Jy(this,u)&&(this.h-=this.g.get(u).length),this.g.set(u,[d]),this.h+=1,this},t.get=function(u,d){return u?(u=this.V(u),0<u.length?String(u[0]):d):d};function Zy(u,d,m){Yy(u,d),0<m.length&&(u.i=null,u.g.set(no(u,d),S(m)),u.h+=m.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const u=[],d=Array.from(this.g.keys());for(var m=0;m<d.length;m++){var v=d[m];const U=encodeURIComponent(String(v)),G=this.V(v);for(v=0;v<G.length;v++){var L=U;G[v]!==""&&(L+="="+encodeURIComponent(String(G[v]))),u.push(L)}}return this.i=u.join("&")};function no(u,d){return d=String(d),u.j&&(d=d.toLowerCase()),d}function OS(u,d){d&&!u.j&&(ii(u),u.i=null,u.g.forEach(function(m,v){var L=v.toLowerCase();v!=L&&(Yy(this,v),Zy(this,L,m))},u)),u.j=d}function LS(u,d){const m=new oe;if(a.Image){const v=new Image;v.onload=w(si,m,"TestLoadImage: loaded",!0,d,v),v.onerror=w(si,m,"TestLoadImage: error",!1,d,v),v.onabort=w(si,m,"TestLoadImage: abort",!1,d,v),v.ontimeout=w(si,m,"TestLoadImage: timeout",!1,d,v),a.setTimeout(function(){v.ontimeout&&v.ontimeout()},1e4),v.src=u}else d(!1)}function NS(u,d){const m=new oe,v=new AbortController,L=setTimeout(()=>{v.abort(),si(m,"TestPingServer: timeout",!1,d)},1e4);fetch(u,{signal:v.signal}).then(U=>{clearTimeout(L),U.ok?si(m,"TestPingServer: ok",!0,d):si(m,"TestPingServer: server error",!1,d)}).catch(()=>{clearTimeout(L),si(m,"TestPingServer: error",!1,d)})}function si(u,d,m,v,L){try{L&&(L.onload=null,L.onerror=null,L.onabort=null,L.ontimeout=null),v(m)}catch{}}function DS(){this.g=new Js}function MS(u,d,m){const v=m||"";try{Gy(u,function(L,U){let G=L;c(L)&&(G=Pa(L)),d.push(v+U+"="+encodeURIComponent(G))})}catch(L){throw d.push(v+"type="+encodeURIComponent("_badmap")),L}}function Da(u){this.l=u.Ub||null,this.j=u.eb||!1}E(Da,Zs),Da.prototype.g=function(){return new Fu(this.l,this.j)},Da.prototype.i=function(u){return function(){return u}}({});function Fu(u,d){Me.call(this),this.D=u,this.o=d,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}E(Fu,Me),t=Fu.prototype,t.open=function(u,d){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=u,this.A=d,this.readyState=1,Va(this)},t.send=function(u){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const d={headers:this.u,method:this.B,credentials:this.m,cache:void 0};u&&(d.body=u),(this.D||a).fetch(new Request(this.A,d)).then(this.Sa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,Ma(this)),this.readyState=0},t.Sa=function(u){if(this.g&&(this.l=u,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=u.headers,this.readyState=2,Va(this)),this.g&&(this.readyState=3,Va(this),this.g)))if(this.responseType==="arraybuffer")u.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof a.ReadableStream<"u"&&"body"in u){if(this.j=u.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;ev(this)}else u.text().then(this.Ra.bind(this),this.ga.bind(this))};function ev(u){u.j.read().then(u.Pa.bind(u)).catch(u.ga.bind(u))}t.Pa=function(u){if(this.g){if(this.o&&u.value)this.response.push(u.value);else if(!this.o){var d=u.value?u.value:new Uint8Array(0);(d=this.v.decode(d,{stream:!u.done}))&&(this.response=this.responseText+=d)}u.done?Ma(this):Va(this),this.readyState==3&&ev(this)}},t.Ra=function(u){this.g&&(this.response=this.responseText=u,Ma(this))},t.Qa=function(u){this.g&&(this.response=u,Ma(this))},t.ga=function(){this.g&&Ma(this)};function Ma(u){u.readyState=4,u.l=null,u.j=null,u.v=null,Va(u)}t.setRequestHeader=function(u,d){this.u.append(u,d)},t.getResponseHeader=function(u){return this.h&&this.h.get(u.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const u=[],d=this.h.entries();for(var m=d.next();!m.done;)m=m.value,u.push(m[0]+": "+m[1]),m=d.next();return u.join(`\r
`)};function Va(u){u.onreadystatechange&&u.onreadystatechange.call(u)}Object.defineProperty(Fu.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(u){this.m=u?"include":"same-origin"}});function tv(u){let d="";return z(u,function(m,v){d+=v,d+=":",d+=m,d+=`\r
`}),d}function jd(u,d,m){e:{for(v in m){var v=!1;break e}v=!0}v||(m=tv(m),typeof u=="string"?m!=null&&encodeURIComponent(String(m)):Ve(u,d,m))}function Je(u){Me.call(this),this.headers=new Map,this.o=u||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}E(Je,Me);var VS=/^https?$/i,US=["POST","PUT"];t=Je.prototype,t.Ha=function(u){this.J=u},t.ea=function(u,d,m,v){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+u);d=d?d.toUpperCase():"GET",this.D=u,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():vn.g(),this.v=this.o?eo(this.o):eo(vn),this.g.onreadystatechange=p(this.Ea,this);try{this.B=!0,this.g.open(d,String(u),!0),this.B=!1}catch(U){nv(this,U);return}if(u=m||"",m=new Map(this.headers),v)if(Object.getPrototypeOf(v)===Object.prototype)for(var L in v)m.set(L,v[L]);else if(typeof v.keys=="function"&&typeof v.get=="function")for(const U of v.keys())m.set(U,v.get(U));else throw Error("Unknown input type for opt_headers: "+String(v));v=Array.from(m.keys()).find(U=>U.toLowerCase()=="content-type"),L=a.FormData&&u instanceof a.FormData,!(0<=Array.prototype.indexOf.call(US,d,void 0))||v||L||m.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[U,G]of m)this.g.setRequestHeader(U,G);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{sv(this),this.u=!0,this.g.send(u),this.u=!1}catch(U){nv(this,U)}};function nv(u,d){u.h=!1,u.g&&(u.j=!0,u.g.abort(),u.j=!1),u.l=d,u.m=5,rv(u),ju(u)}function rv(u){u.A||(u.A=!0,et(u,"complete"),et(u,"error"))}t.abort=function(u){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=u||7,et(this,"complete"),et(this,"abort"),ju(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),ju(this,!0)),Je.aa.N.call(this)},t.Ea=function(){this.s||(this.B||this.u||this.j?iv(this):this.bb())},t.bb=function(){iv(this)};function iv(u){if(u.h&&typeof o<"u"&&(!u.v[1]||Er(u)!=4||u.Z()!=2)){if(u.u&&Er(u)==4)ss(u.Ea,0,u);else if(et(u,"readystatechange"),Er(u)==4){u.h=!1;try{const G=u.Z();e:switch(G){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var d=!0;break e;default:d=!1}var m;if(!(m=d)){var v;if(v=G===0){var L=String(u.D).match(Ky)[1]||null;!L&&a.self&&a.self.location&&(L=a.self.location.protocol.slice(0,-1)),v=!VS.test(L?L.toLowerCase():"")}m=v}if(m)et(u,"complete"),et(u,"success");else{u.m=6;try{var U=2<Er(u)?u.g.statusText:""}catch{U=""}u.l=U+" ["+u.Z()+"]",rv(u)}}finally{ju(u)}}}}function ju(u,d){if(u.g){sv(u);const m=u.g,v=u.v[0]?()=>{}:null;u.g=null,u.v=null,d||et(u,"ready");try{m.onreadystatechange=v}catch{}}}function sv(u){u.I&&(a.clearTimeout(u.I),u.I=null)}t.isActive=function(){return!!this.g};function Er(u){return u.g?u.g.readyState:0}t.Z=function(){try{return 2<Er(this)?this.g.status:-1}catch{return-1}},t.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.Oa=function(u){if(this.g){var d=this.g.responseText;return u&&d.indexOf(u)==0&&(d=d.substring(u.length)),Du(d)}};function ov(u){try{if(!u.g)return null;if("response"in u.g)return u.g.response;switch(u.H){case"":case"text":return u.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in u.g)return u.g.mozResponseArrayBuffer}return null}catch{return null}}function $S(u){const d={};u=(u.g&&2<=Er(u)&&u.g.getAllResponseHeaders()||"").split(`\r
`);for(let v=0;v<u.length;v++){if(_(u[v]))continue;var m=x(u[v]);const L=m[0];if(m=m[1],typeof m!="string")continue;m=m.trim();const U=d[L]||[];d[L]=U,U.push(m)}g(d,function(v){return v.join(", ")})}t.Ba=function(){return this.m},t.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function Ua(u,d,m){return m&&m.internalChannelParams&&m.internalChannelParams[u]||d}function av(u){this.Aa=0,this.i=[],this.j=new oe,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=Ua("failFast",!1,u),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=Ua("baseRetryDelayMs",5e3,u),this.cb=Ua("retryDelaySeedMs",1e4,u),this.Wa=Ua("forwardChannelMaxRetries",2,u),this.wa=Ua("forwardChannelRequestTimeoutMs",2e4,u),this.pa=u&&u.xmlHttpFactory||void 0,this.Xa=u&&u.Tb||void 0,this.Ca=u&&u.useFetchStreams||!1,this.L=void 0,this.J=u&&u.supportsCrossDomainXhr||!1,this.K="",this.h=new zy(u&&u.concurrentRequestLimit),this.Da=new DS,this.P=u&&u.fastHandshake||!1,this.O=u&&u.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=u&&u.Rb||!1,u&&u.xa&&this.j.xa(),u&&u.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&u&&u.detectBufferingProxy||!1,this.ja=void 0,u&&u.longPollingTimeout&&0<u.longPollingTimeout&&(this.ja=u.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}t=av.prototype,t.la=8,t.G=1,t.connect=function(u,d,m,v){Z(0),this.W=u,this.H=d||{},m&&v!==void 0&&(this.H.OSID=m,this.H.OAID=v),this.F=this.X,this.I=gv(this,null,this.W),Bu(this)};function zd(u){if(lv(u),u.G==3){var d=u.U++,m=wr(u.I);if(Ve(m,"SID",u.K),Ve(m,"RID",d),Ve(m,"TYPE","terminate"),$a(u,m),d=new qt(u,u.j,d),d.L=2,d.v=$u(wr(m)),m=!1,a.navigator&&a.navigator.sendBeacon)try{m=a.navigator.sendBeacon(d.v.toString(),"")}catch{}!m&&a.Image&&(new Image().src=d.v,m=!0),m||(d.g=yv(d.j,null),d.g.ea(d.v)),d.F=Date.now(),Ct(d)}mv(u)}function zu(u){u.g&&(Hd(u),u.g.cancel(),u.g=null)}function lv(u){zu(u),u.u&&(a.clearTimeout(u.u),u.u=null),Hu(u),u.h.cancel(),u.s&&(typeof u.s=="number"&&a.clearTimeout(u.s),u.s=null)}function Bu(u){if(!By(u.h)&&!u.s){u.s=!0;var d=u.Ga;_t||re(),H||(_t(),H=!0),ee.add(d,u),u.B=0}}function FS(u,d){return Hy(u.h)>=u.h.j-(u.s?1:0)?!1:u.s?(u.i=d.D.concat(u.i),!0):u.G==1||u.G==2||u.B>=(u.Va?0:u.Wa)?!1:(u.s=K(p(u.Ga,u,d),pv(u,u.B)),u.B++,!0)}t.Ga=function(u){if(this.s)if(this.s=null,this.G==1){if(!u){this.U=Math.floor(1e5*Math.random()),u=this.U++;const L=new qt(this,this.j,u);let U=this.o;if(this.S&&(U?(U=y(U),I(U,this.S)):U=this.S),this.m!==null||this.O||(L.H=U,U=null),this.P)e:{for(var d=0,m=0;m<this.i.length;m++){t:{var v=this.i[m];if("__data__"in v.map&&(v=v.map.__data__,typeof v=="string")){v=v.length;break t}v=void 0}if(v===void 0)break;if(d+=v,4096<d){d=m;break e}if(d===4096||m===this.i.length-1){d=m+1;break e}}d=1e3}else d=1e3;d=cv(this,L,d),m=wr(this.I),Ve(m,"RID",u),Ve(m,"CVER",22),this.D&&Ve(m,"X-HTTP-Session-Id",this.D),$a(this,m),U&&(this.O?d="headers="+encodeURIComponent(String(tv(U)))+"&"+d:this.m&&jd(m,this.m,U)),Fd(this.h,L),this.Ua&&Ve(m,"TYPE","init"),this.P?(Ve(m,"$req",d),Ve(m,"SID","null"),L.T=!0,ni(L,m,null)):ni(L,m,d),this.G=2}}else this.G==3&&(u?uv(this,u):this.i.length==0||By(this.h)||uv(this))};function uv(u,d){var m;d?m=d.l:m=u.U++;const v=wr(u.I);Ve(v,"SID",u.K),Ve(v,"RID",m),Ve(v,"AID",u.T),$a(u,v),u.m&&u.o&&jd(v,u.m,u.o),m=new qt(u,u.j,m,u.B+1),u.m===null&&(m.H=u.o),d&&(u.i=d.D.concat(u.i)),d=cv(u,m,1e3),m.I=Math.round(.5*u.wa)+Math.round(.5*u.wa*Math.random()),Fd(u.h,m),ni(m,v,d)}function $a(u,d){u.H&&z(u.H,function(m,v){Ve(d,v,m)}),u.l&&Gy({},function(m,v){Ve(d,v,m)})}function cv(u,d,m){m=Math.min(u.i.length,m);var v=u.l?p(u.l.Na,u.l,u):null;e:{var L=u.i;let U=-1;for(;;){const G=["count="+m];U==-1?0<m?(U=L[0].g,G.push("ofs="+U)):U=0:G.push("ofs="+U);let Re=!0;for(let It=0;It<m;It++){let Se=L[It].g;const Nt=L[It].map;if(Se-=U,0>Se)U=Math.max(0,L[It].g-100),Re=!1;else try{MS(Nt,G,"req"+Se+"_")}catch{v&&v(Nt)}}if(Re){v=G.join("&");break e}}}return u=u.i.splice(0,m),d.D=u,v}function hv(u){if(!u.g&&!u.u){u.Y=1;var d=u.Fa;_t||re(),H||(_t(),H=!0),ee.add(d,u),u.v=0}}function Bd(u){return u.g||u.u||3<=u.v?!1:(u.Y++,u.u=K(p(u.Fa,u),pv(u,u.v)),u.v++,!0)}t.Fa=function(){if(this.u=null,dv(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var u=2*this.R;this.j.info("BP detection timer enabled: "+u),this.A=K(p(this.ab,this),u)}},t.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,Z(10),zu(this),dv(this))};function Hd(u){u.A!=null&&(a.clearTimeout(u.A),u.A=null)}function dv(u){u.g=new qt(u,u.j,"rpc",u.Y),u.m===null&&(u.g.H=u.o),u.g.O=0;var d=wr(u.qa);Ve(d,"RID","rpc"),Ve(d,"SID",u.K),Ve(d,"AID",u.T),Ve(d,"CI",u.F?"0":"1"),!u.F&&u.ja&&Ve(d,"TO",u.ja),Ve(d,"TYPE","xmlhttp"),$a(u,d),u.m&&u.o&&jd(d,u.m,u.o),u.L&&(u.g.I=u.L);var m=u.g;u=u.ia,m.L=1,m.v=$u(wr(d)),m.m=null,m.P=!0,os(m,u)}t.Za=function(){this.C!=null&&(this.C=null,zu(this),Bd(this),Z(19))};function Hu(u){u.C!=null&&(a.clearTimeout(u.C),u.C=null)}function fv(u,d){var m=null;if(u.g==d){Hu(u),Hd(u),u.g=null;var v=2}else if($d(u.h,d))m=d.D,Wy(u.h,d),v=1;else return;if(u.G!=0){if(d.o)if(v==1){m=d.m?d.m.length:0,d=Date.now()-d.F;var L=u.B;v=M(),et(v,new te(v,m)),Bu(u)}else hv(u);else if(L=d.s,L==3||L==0&&0<d.X||!(v==1&&FS(u,d)||v==2&&Bd(u)))switch(m&&0<m.length&&(d=u.h,d.i=d.i.concat(m)),L){case 1:ls(u,5);break;case 4:ls(u,10);break;case 3:ls(u,6);break;default:ls(u,2)}}}function pv(u,d){let m=u.Ta+Math.floor(Math.random()*u.cb);return u.isActive()||(m*=2),m*d}function ls(u,d){if(u.j.info("Error code "+d),d==2){var m=p(u.fb,u),v=u.Xa;const L=!v;v=new as(v||"//www.google.com/images/cleardot.gif"),a.location&&a.location.protocol=="http"||Vu(v,"https"),$u(v),L?LS(v.toString(),m):NS(v.toString(),m)}else Z(2);u.G=0,u.l&&u.l.sa(d),mv(u),lv(u)}t.fb=function(u){u?(this.j.info("Successfully pinged google.com"),Z(2)):(this.j.info("Failed to ping google.com"),Z(1))};function mv(u){if(u.G=0,u.ka=[],u.l){const d=qy(u.h);(d.length!=0||u.i.length!=0)&&(P(u.ka,d),P(u.ka,u.i),u.h.i.length=0,S(u.i),u.i.length=0),u.l.ra()}}function gv(u,d,m){var v=m instanceof as?wr(m):new as(m);if(v.g!="")d&&(v.g=d+"."+v.g),Uu(v,v.s);else{var L=a.location;v=L.protocol,d=d?d+"."+L.hostname:L.hostname,L=+L.port;var U=new as(null);v&&Vu(U,v),d&&(U.g=d),L&&Uu(U,L),m&&(U.l=m),v=U}return m=u.D,d=u.ya,m&&d&&Ve(v,m,d),Ve(v,"VER",u.la),$a(u,v),v}function yv(u,d,m){if(d&&!u.J)throw Error("Can't create secondary domain capable XhrIo object.");return d=u.Ca&&!u.pa?new Je(new Da({eb:m})):new Je(u.pa),d.Ha(u.J),d}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function vv(){}t=vv.prototype,t.ua=function(){},t.ta=function(){},t.sa=function(){},t.ra=function(){},t.isActive=function(){return!0},t.Na=function(){};function Wu(){}Wu.prototype.g=function(u,d){return new hn(u,d)};function hn(u,d){Me.call(this),this.g=new av(d),this.l=u,this.h=d&&d.messageUrlParams||null,u=d&&d.messageHeaders||null,d&&d.clientProtocolHeaderRequired&&(u?u["X-Client-Protocol"]="webchannel":u={"X-Client-Protocol":"webchannel"}),this.g.o=u,u=d&&d.initMessageHeaders||null,d&&d.messageContentType&&(u?u["X-WebChannel-Content-Type"]=d.messageContentType:u={"X-WebChannel-Content-Type":d.messageContentType}),d&&d.va&&(u?u["X-WebChannel-Client-Profile"]=d.va:u={"X-WebChannel-Client-Profile":d.va}),this.g.S=u,(u=d&&d.Sb)&&!_(u)&&(this.g.m=u),this.v=d&&d.supportsCrossDomainXhr||!1,this.u=d&&d.sendRawJson||!1,(d=d&&d.httpSessionIdParam)&&!_(d)&&(this.g.D=d,u=this.h,u!==null&&d in u&&(u=this.h,d in u&&delete u[d])),this.j=new ro(this)}E(hn,Me),hn.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},hn.prototype.close=function(){zd(this.g)},hn.prototype.o=function(u){var d=this.g;if(typeof u=="string"){var m={};m.__data__=u,u=m}else this.u&&(m={},m.__data__=Pa(u),u=m);d.i.push(new TS(d.Ya++,u)),d.G==3&&Bu(d)},hn.prototype.N=function(){this.g.l=null,delete this.j,zd(this.g),delete this.g,hn.aa.N.call(this)};function _v(u){Ra.call(this),u.__headers__&&(this.headers=u.__headers__,this.statusCode=u.__status__,delete u.__headers__,delete u.__status__);var d=u.__sm__;if(d){e:{for(const m in d){u=m;break e}u=void 0}(this.i=u)&&(u=this.i,d=d!==null&&u in d?d[u]:void 0),this.data=d}else this.data=u}E(_v,Ra);function wv(){to.call(this),this.status=1}E(wv,to);function ro(u){this.g=u}E(ro,vv),ro.prototype.ua=function(){et(this.g,"a")},ro.prototype.ta=function(u){et(this.g,new _v(u))},ro.prototype.sa=function(u){et(this.g,new wv)},ro.prototype.ra=function(){et(this.g,"b")},Wu.prototype.createWebChannel=Wu.prototype.g,hn.prototype.send=hn.prototype.o,hn.prototype.open=hn.prototype.m,hn.prototype.close=hn.prototype.close,ST=function(){return new Wu},IT=function(){return M()},CT=gr,Qp={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},We.NO_ERROR=0,We.TIMEOUT=8,We.HTTP_ERROR=6,Uc=We,ei.COMPLETE="complete",TT=ei,Mu.EventType=Zr,Zr.OPEN="a",Zr.CLOSE="b",Zr.ERROR="c",Zr.MESSAGE="d",Me.prototype.listen=Me.prototype.K,cl=Mu,bT=Da,Je.prototype.listenOnce=Je.prototype.L,Je.prototype.getLastError=Je.prototype.Ka,Je.prototype.getLastErrorCode=Je.prototype.Ba,Je.prototype.getStatus=Je.prototype.Z,Je.prototype.getResponseJson=Je.prototype.Oa,Je.prototype.getResponseText=Je.prototype.oa,Je.prototype.send=Je.prototype.ea,Je.prototype.setWithCredentials=Je.prototype.Ha,ET=Je}).apply(typeof dc<"u"?dc:typeof self<"u"?self:typeof window<"u"?window:{});const P0="@firebase/firestore";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $t{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}$t.UNAUTHENTICATED=new $t(null),$t.GOOGLE_CREDENTIALS=new $t("google-credentials-uid"),$t.FIRST_PARTY=new $t("first-party-uid"),$t.MOCK_USER=new $t("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let ya="10.12.1";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vs=new _g("@firebase/firestore");function Za(){return Vs.logLevel}function Y(t,...e){if(Vs.logLevel<=Ee.DEBUG){const n=e.map(Lg);Vs.debug(`Firestore (${ya}): ${t}`,...n)}}function Hr(t,...e){if(Vs.logLevel<=Ee.ERROR){const n=e.map(Lg);Vs.error(`Firestore (${ya}): ${t}`,...n)}}function Zo(t,...e){if(Vs.logLevel<=Ee.WARN){const n=e.map(Lg);Vs.warn(`Firestore (${ya}): ${t}`,...n)}}function Lg(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(n){return JSON.stringify(n)}(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function le(t="Unexpected state"){const e=`FIRESTORE (${ya}) INTERNAL ASSERTION FAILED: `+t;throw Hr(e),new Error(e)}function De(t,e){t||le()}function ce(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const j={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class J extends Xr{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ni{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AT{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class MN{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n($t.UNAUTHENTICATED))}shutdown(){}}class VN{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class UN{constructor(e){this.t=e,this.currentUser=$t.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){let r=this.i;const i=l=>this.i!==r?(r=this.i,n(l)):Promise.resolve();let s=new Ni;this.o=()=>{this.i++,this.currentUser=this.u(),s.resolve(),s=new Ni,e.enqueueRetryable(()=>i(this.currentUser))};const o=()=>{const l=s;e.enqueueRetryable(async()=>{await l.promise,await i(this.currentUser)})},a=l=>{Y("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=l,this.auth.addAuthTokenListener(this.o),o()};this.t.onInit(l=>a(l)),setTimeout(()=>{if(!this.auth){const l=this.t.getImmediate({optional:!0});l?a(l):(Y("FirebaseAuthCredentialsProvider","Auth not yet detected"),s.resolve(),s=new Ni)}},0),o()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==e?(Y("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(De(typeof r.accessToken=="string"),new AT(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const e=this.auth&&this.auth.getUid();return De(e===null||typeof e=="string"),new $t(e)}}class $N{constructor(e,n,r){this.l=e,this.h=n,this.P=r,this.type="FirstParty",this.user=$t.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);const e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}}class FN{constructor(e,n,r){this.l=e,this.h=n,this.P=r}getToken(){return Promise.resolve(new $N(this.l,this.h,this.P))}start(e,n){e.enqueueRetryable(()=>n($t.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class jN{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class zN{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,n){const r=s=>{s.error!=null&&Y("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${s.error.message}`);const o=s.token!==this.R;return this.R=s.token,Y("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?n(s.token):Promise.resolve()};this.o=s=>{e.enqueueRetryable(()=>r(s))};const i=s=>{Y("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=s,this.appCheck.addTokenListener(this.o)};this.A.onInit(s=>i(s)),setTimeout(()=>{if(!this.appCheck){const s=this.A.getImmediate({optional:!0});s?i(s):Y("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(De(typeof n.token=="string"),this.R=n.token,new jN(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function BN(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xT{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=Math.floor(256/e.length)*e.length;let r="";for(;r.length<20;){const i=BN(40);for(let s=0;s<i.length;++s)r.length<20&&i[s]<n&&(r+=e.charAt(i[s]%e.length))}return r}}function Ae(t,e){return t<e?-1:t>e?1:0}function ea(t,e,n){return t.length===e.length&&t.every((r,i)=>n(r,e[i]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mt{constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new J(j.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new J(j.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<-62135596800)throw new J(j.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new J(j.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return mt.fromMillis(Date.now())}static fromDate(e){return mt.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*n));return new mt(n,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?Ae(this.nanoseconds,e.nanoseconds):Ae(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ue{constructor(e){this.timestamp=e}static fromTimestamp(e){return new ue(e)}static min(){return new ue(new mt(0,0))}static max(){return new ue(new mt(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zl{constructor(e,n,r){n===void 0?n=0:n>e.length&&le(),r===void 0?r=e.length-n:r>e.length-n&&le(),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return Zl.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof Zl?e.forEach(r=>{n.push(r)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const r=Math.min(e.length,n.length);for(let i=0;i<r;i++){const s=e.get(i),o=n.get(i);if(s<o)return-1;if(s>o)return 1}return e.length<n.length?-1:e.length>n.length?1:0}}class Fe extends Zl{construct(e,n,r){return new Fe(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const r of e){if(r.indexOf("//")>=0)throw new J(j.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(i=>i.length>0))}return new Fe(n)}static emptyPath(){return new Fe([])}}const HN=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class kt extends Zl{construct(e,n,r){return new kt(e,n,r)}static isValidIdentifier(e){return HN.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),kt.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new kt(["__name__"])}static fromServerFormat(e){const n=[];let r="",i=0;const s=()=>{if(r.length===0)throw new J(j.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let o=!1;for(;i<e.length;){const a=e[i];if(a==="\\"){if(i+1===e.length)throw new J(j.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const l=e[i+1];if(l!=="\\"&&l!=="."&&l!=="`")throw new J(j.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=l,i+=2}else a==="`"?(o=!o,i++):a!=="."||o?(r+=a,i++):(s(),i++)}if(s(),o)throw new J(j.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new kt(n)}static emptyPath(){return new kt([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ne{constructor(e){this.path=e}static fromPath(e){return new ne(Fe.fromString(e))}static fromName(e){return new ne(Fe.fromString(e).popFirst(5))}static empty(){return new ne(Fe.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Fe.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return Fe.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new ne(new Fe(e.slice()))}}function WN(t,e){const n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,i=ue.fromTimestamp(r===1e9?new mt(n+1,0):new mt(n,r));return new zi(i,ne.empty(),e)}function qN(t){return new zi(t.readTime,t.key,-1)}class zi{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new zi(ue.min(),ne.empty(),-1)}static max(){return new zi(ue.max(),ne.empty(),-1)}}function GN(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=ne.comparator(t.documentKey,e.documentKey),n!==0?n:Ae(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const KN="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class QN{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function _u(t){if(t.code!==j.FAILED_PRECONDITION||t.message!==KN)throw t;Y("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class B{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&le(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new B((r,i)=>{this.nextCallback=s=>{this.wrapSuccess(e,s).next(r,i)},this.catchCallback=s=>{this.wrapFailure(n,s).next(r,i)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof B?n:B.resolve(n)}catch(n){return B.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):B.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):B.reject(n)}static resolve(e){return new B((n,r)=>{n(e)})}static reject(e){return new B((n,r)=>{r(e)})}static waitFor(e){return new B((n,r)=>{let i=0,s=0,o=!1;e.forEach(a=>{++i,a.next(()=>{++s,o&&s===i&&n()},l=>r(l))}),o=!0,s===i&&n()})}static or(e){let n=B.resolve(!1);for(const r of e)n=n.next(i=>i?B.resolve(i):r());return n}static forEach(e,n){const r=[];return e.forEach((i,s)=>{r.push(n.call(this,i,s))}),this.waitFor(r)}static mapArray(e,n){return new B((r,i)=>{const s=e.length,o=new Array(s);let a=0;for(let l=0;l<s;l++){const c=l;n(e[c]).next(h=>{o[c]=h,++a,a===s&&r(o)},h=>i(h))}})}static doWhile(e,n){return new B((r,i)=>{const s=()=>{e()===!0?n().next(()=>{s()},i):r()};s()})}}function XN(t){const e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function wu(t){return t.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ng{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=r=>this.ie(r),this.se=r=>n.writeSequenceNumber(r))}ie(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.se&&this.se(e),e}}Ng.oe=-1;function cd(t){return t==null}function Sh(t){return t===0&&1/t==-1/0}function YN(t){return typeof t=="number"&&Number.isInteger(t)&&!Sh(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function R0(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function va(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function kT(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ye{constructor(e,n){this.comparator=e,this.root=n||xt.EMPTY}insert(e,n){return new Ye(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,xt.BLACK,null,null))}remove(e){return new Ye(this.comparator,this.root.remove(e,this.comparator).copy(null,null,xt.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){const i=this.comparator(e,r.key);if(i===0)return n+r.left.size;i<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,r)=>(e(n,r),!1))}toString(){const e=[];return this.inorderTraversal((n,r)=>(e.push(`${n}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new fc(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new fc(this.root,e,this.comparator,!1)}getReverseIterator(){return new fc(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new fc(this.root,e,this.comparator,!0)}}class fc{constructor(e,n,r,i){this.isReverse=i,this.nodeStack=[];let s=1;for(;!e.isEmpty();)if(s=n?r(e.key,n):1,n&&i&&(s*=-1),s<0)e=this.isReverse?e.left:e.right;else{if(s===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class xt{constructor(e,n,r,i,s){this.key=e,this.value=n,this.color=r??xt.RED,this.left=i??xt.EMPTY,this.right=s??xt.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,i,s){return new xt(e??this.key,n??this.value,r??this.color,i??this.left,s??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let i=this;const s=r(e,i.key);return i=s<0?i.copy(null,null,null,i.left.insert(e,n,r),null):s===0?i.copy(null,n,null,null,null):i.copy(null,null,null,null,i.right.insert(e,n,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return xt.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,i=this;if(n(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),n(e,i.key)===0){if(i.right.isEmpty())return xt.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,n))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,xt.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,xt.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw le();const e=this.left.check();if(e!==this.right.check())throw le();return e+(this.isRed()?0:1)}}xt.EMPTY=null,xt.RED=!0,xt.BLACK=!1;xt.EMPTY=new class{constructor(){this.size=0}get key(){throw le()}get value(){throw le()}get color(){throw le()}get left(){throw le()}get right(){throw le()}copy(e,n,r,i,s){return this}insert(e,n,r){return new xt(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rt{constructor(e){this.comparator=e,this.data=new Ye(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,r)=>(e(n),!1))}forEachInRange(e,n){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;n(i.key)}}forEachWhile(e,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new O0(this.data.getIterator())}getIteratorFrom(e){return new O0(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(r=>{n=n.add(r)}),n}isEqual(e){if(!(e instanceof Rt)||this.size!==e.size)return!1;const n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){const i=n.getNext().key,s=r.getNext().key;if(this.comparator(i,s)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new Rt(this.comparator);return n.data=e,n}}class O0{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wn{constructor(e){this.fields=e,e.sort(kt.comparator)}static empty(){return new Wn([])}unionWith(e){let n=new Rt(kt.comparator);for(const r of this.fields)n=n.add(r);for(const r of e)n=n.add(r);return new Wn(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return ea(this.fields,e.fields,(n,r)=>n.isEqual(r))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PT extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bt{constructor(e){this.binaryString=e}static fromBase64String(e){const n=function(i){try{return atob(i)}catch(s){throw typeof DOMException<"u"&&s instanceof DOMException?new PT("Invalid base64 string: "+s):s}}(e);return new Bt(n)}static fromUint8Array(e){const n=function(i){let s="";for(let o=0;o<i.length;++o)s+=String.fromCharCode(i[o]);return s}(e);return new Bt(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const r=new Uint8Array(n.length);for(let i=0;i<n.length;i++)r[i]=n.charCodeAt(i);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Ae(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Bt.EMPTY_BYTE_STRING=new Bt("");const JN=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Bi(t){if(De(!!t),typeof t=="string"){let e=0;const n=JN.exec(t);if(De(!!n),n[1]){let i=n[1];i=(i+"000000000").substr(0,9),e=Number(i)}const r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:lt(t.seconds),nanos:lt(t.nanos)}}function lt(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function Us(t){return typeof t=="string"?Bt.fromBase64String(t):Bt.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Dg(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="server_timestamp"}function Mg(t){const e=t.mapValue.fields.__previous_value__;return Dg(e)?Mg(e):e}function eu(t){const e=Bi(t.mapValue.fields.__local_write_time__.timestampValue);return new mt(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZN{constructor(e,n,r,i,s,o,a,l,c){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=i,this.ssl=s,this.forceLongPolling=o,this.autoDetectLongPolling=a,this.longPollingOptions=l,this.useFetchStreams=c}}class tu{constructor(e,n){this.projectId=e,this.database=n||"(default)"}static empty(){return new tu("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof tu&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pc={mapValue:{fields:{__type__:{stringValue:"__max__"}}}};function $s(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?Dg(t)?4:e4(t)?9007199254740991:10:le()}function fr(t,e){if(t===e)return!0;const n=$s(t);if(n!==$s(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return eu(t).isEqual(eu(e));case 3:return function(i,s){if(typeof i.timestampValue=="string"&&typeof s.timestampValue=="string"&&i.timestampValue.length===s.timestampValue.length)return i.timestampValue===s.timestampValue;const o=Bi(i.timestampValue),a=Bi(s.timestampValue);return o.seconds===a.seconds&&o.nanos===a.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(i,s){return Us(i.bytesValue).isEqual(Us(s.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(i,s){return lt(i.geoPointValue.latitude)===lt(s.geoPointValue.latitude)&&lt(i.geoPointValue.longitude)===lt(s.geoPointValue.longitude)}(t,e);case 2:return function(i,s){if("integerValue"in i&&"integerValue"in s)return lt(i.integerValue)===lt(s.integerValue);if("doubleValue"in i&&"doubleValue"in s){const o=lt(i.doubleValue),a=lt(s.doubleValue);return o===a?Sh(o)===Sh(a):isNaN(o)&&isNaN(a)}return!1}(t,e);case 9:return ea(t.arrayValue.values||[],e.arrayValue.values||[],fr);case 10:return function(i,s){const o=i.mapValue.fields||{},a=s.mapValue.fields||{};if(R0(o)!==R0(a))return!1;for(const l in o)if(o.hasOwnProperty(l)&&(a[l]===void 0||!fr(o[l],a[l])))return!1;return!0}(t,e);default:return le()}}function nu(t,e){return(t.values||[]).find(n=>fr(n,e))!==void 0}function ta(t,e){if(t===e)return 0;const n=$s(t),r=$s(e);if(n!==r)return Ae(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return Ae(t.booleanValue,e.booleanValue);case 2:return function(s,o){const a=lt(s.integerValue||s.doubleValue),l=lt(o.integerValue||o.doubleValue);return a<l?-1:a>l?1:a===l?0:isNaN(a)?isNaN(l)?0:-1:1}(t,e);case 3:return L0(t.timestampValue,e.timestampValue);case 4:return L0(eu(t),eu(e));case 5:return Ae(t.stringValue,e.stringValue);case 6:return function(s,o){const a=Us(s),l=Us(o);return a.compareTo(l)}(t.bytesValue,e.bytesValue);case 7:return function(s,o){const a=s.split("/"),l=o.split("/");for(let c=0;c<a.length&&c<l.length;c++){const h=Ae(a[c],l[c]);if(h!==0)return h}return Ae(a.length,l.length)}(t.referenceValue,e.referenceValue);case 8:return function(s,o){const a=Ae(lt(s.latitude),lt(o.latitude));return a!==0?a:Ae(lt(s.longitude),lt(o.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return function(s,o){const a=s.values||[],l=o.values||[];for(let c=0;c<a.length&&c<l.length;++c){const h=ta(a[c],l[c]);if(h)return h}return Ae(a.length,l.length)}(t.arrayValue,e.arrayValue);case 10:return function(s,o){if(s===pc.mapValue&&o===pc.mapValue)return 0;if(s===pc.mapValue)return 1;if(o===pc.mapValue)return-1;const a=s.fields||{},l=Object.keys(a),c=o.fields||{},h=Object.keys(c);l.sort(),h.sort();for(let f=0;f<l.length&&f<h.length;++f){const p=Ae(l[f],h[f]);if(p!==0)return p;const w=ta(a[l[f]],c[h[f]]);if(w!==0)return w}return Ae(l.length,h.length)}(t.mapValue,e.mapValue);default:throw le()}}function L0(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return Ae(t,e);const n=Bi(t),r=Bi(e),i=Ae(n.seconds,r.seconds);return i!==0?i:Ae(n.nanos,r.nanos)}function na(t){return Xp(t)}function Xp(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(n){const r=Bi(n);return`time(${r.seconds},${r.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(n){return Us(n).toBase64()}(t.bytesValue):"referenceValue"in t?function(n){return ne.fromName(n).toString()}(t.referenceValue):"geoPointValue"in t?function(n){return`geo(${n.latitude},${n.longitude})`}(t.geoPointValue):"arrayValue"in t?function(n){let r="[",i=!0;for(const s of n.values||[])i?i=!1:r+=",",r+=Xp(s);return r+"]"}(t.arrayValue):"mapValue"in t?function(n){const r=Object.keys(n.fields||{}).sort();let i="{",s=!0;for(const o of r)s?s=!1:i+=",",i+=`${o}:${Xp(n.fields[o])}`;return i+"}"}(t.mapValue):le()}function N0(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function Yp(t){return!!t&&"integerValue"in t}function Vg(t){return!!t&&"arrayValue"in t}function D0(t){return!!t&&"nullValue"in t}function M0(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function $c(t){return!!t&&"mapValue"in t}function Al(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){const e={mapValue:{fields:{}}};return va(t.mapValue.fields,(n,r)=>e.mapValue.fields[n]=Al(r)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=Al(t.arrayValue.values[n]);return e}return Object.assign({},t)}function e4(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sn{constructor(e){this.value=e}static empty(){return new Sn({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!$c(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=Al(n)}setAll(e){let n=kt.emptyPath(),r={},i=[];e.forEach((o,a)=>{if(!n.isImmediateParentOf(a)){const l=this.getFieldsMap(n);this.applyChanges(l,r,i),r={},i=[],n=a.popLast()}o?r[a.lastSegment()]=Al(o):i.push(a.lastSegment())});const s=this.getFieldsMap(n);this.applyChanges(s,r,i)}delete(e){const n=this.field(e.popLast());$c(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return fr(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=n.mapValue.fields[e.get(r)];$c(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=i),n=i}return n.mapValue.fields}applyChanges(e,n,r){va(n,(i,s)=>e[i]=s);for(const i of r)delete e[i]}clone(){return new Sn(Al(this.value))}}function RT(t){const e=[];return va(t.fields,(n,r)=>{const i=new kt([n]);if($c(r)){const s=RT(r.mapValue).fields;if(s.length===0)e.push(i);else for(const o of s)e.push(i.child(o))}else e.push(i)}),new Wn(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jt{constructor(e,n,r,i,s,o,a){this.key=e,this.documentType=n,this.version=r,this.readTime=i,this.createTime=s,this.data=o,this.documentState=a}static newInvalidDocument(e){return new jt(e,0,ue.min(),ue.min(),ue.min(),Sn.empty(),0)}static newFoundDocument(e,n,r,i){return new jt(e,1,n,ue.min(),r,i,0)}static newNoDocument(e,n){return new jt(e,2,n,ue.min(),ue.min(),Sn.empty(),0)}static newUnknownDocument(e,n){return new jt(e,3,n,ue.min(),ue.min(),Sn.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(ue.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Sn.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Sn.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=ue.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof jt&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new jt(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ah{constructor(e,n){this.position=e,this.inclusive=n}}function V0(t,e,n){let r=0;for(let i=0;i<t.position.length;i++){const s=e[i],o=t.position[i];if(s.field.isKeyField()?r=ne.comparator(ne.fromName(o.referenceValue),n.key):r=ta(o,n.data.field(s.field)),s.dir==="desc"&&(r*=-1),r!==0)break}return r}function U0(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!fr(t.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xh{constructor(e,n="asc"){this.field=e,this.dir=n}}function t4(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OT{}class ct extends OT{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,r):new r4(e,n,r):n==="array-contains"?new o4(e,r):n==="in"?new a4(e,r):n==="not-in"?new l4(e,r):n==="array-contains-any"?new u4(e,r):new ct(e,n,r)}static createKeyFieldInFilter(e,n,r){return n==="in"?new i4(e,r):new s4(e,r)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&this.matchesComparison(ta(n,this.value)):n!==null&&$s(this.value)===$s(n)&&this.matchesComparison(ta(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return le()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Yn extends OT{constructor(e,n){super(),this.filters=e,this.op=n,this.ae=null}static create(e,n){return new Yn(e,n)}matches(e){return LT(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.ae!==null||(this.ae=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.ae}getFilters(){return Object.assign([],this.filters)}}function LT(t){return t.op==="and"}function NT(t){return n4(t)&&LT(t)}function n4(t){for(const e of t.filters)if(e instanceof Yn)return!1;return!0}function Jp(t){if(t instanceof ct)return t.field.canonicalString()+t.op.toString()+na(t.value);if(NT(t))return t.filters.map(e=>Jp(e)).join(",");{const e=t.filters.map(n=>Jp(n)).join(",");return`${t.op}(${e})`}}function DT(t,e){return t instanceof ct?function(r,i){return i instanceof ct&&r.op===i.op&&r.field.isEqual(i.field)&&fr(r.value,i.value)}(t,e):t instanceof Yn?function(r,i){return i instanceof Yn&&r.op===i.op&&r.filters.length===i.filters.length?r.filters.reduce((s,o,a)=>s&&DT(o,i.filters[a]),!0):!1}(t,e):void le()}function MT(t){return t instanceof ct?function(n){return`${n.field.canonicalString()} ${n.op} ${na(n.value)}`}(t):t instanceof Yn?function(n){return n.op.toString()+" {"+n.getFilters().map(MT).join(" ,")+"}"}(t):"Filter"}class r4 extends ct{constructor(e,n,r){super(e,n,r),this.key=ne.fromName(r.referenceValue)}matches(e){const n=ne.comparator(e.key,this.key);return this.matchesComparison(n)}}class i4 extends ct{constructor(e,n){super(e,"in",n),this.keys=VT("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class s4 extends ct{constructor(e,n){super(e,"not-in",n),this.keys=VT("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function VT(t,e){var n;return(((n=e.arrayValue)===null||n===void 0?void 0:n.values)||[]).map(r=>ne.fromName(r.referenceValue))}class o4 extends ct{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return Vg(n)&&nu(n.arrayValue,this.value)}}class a4 extends ct{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&nu(this.value.arrayValue,n)}}class l4 extends ct{constructor(e,n){super(e,"not-in",n)}matches(e){if(nu(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&!nu(this.value.arrayValue,n)}}class u4 extends ct{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!Vg(n)||!n.arrayValue.values)&&n.arrayValue.values.some(r=>nu(this.value.arrayValue,r))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class c4{constructor(e,n=null,r=[],i=[],s=null,o=null,a=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=i,this.limit=s,this.startAt=o,this.endAt=a,this.ue=null}}function $0(t,e=null,n=[],r=[],i=null,s=null,o=null){return new c4(t,e,n,r,i,s,o)}function Ug(t){const e=ce(t);if(e.ue===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(r=>Jp(r)).join(","),n+="|ob:",n+=e.orderBy.map(r=>function(s){return s.field.canonicalString()+s.dir}(r)).join(","),cd(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(r=>na(r)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(r=>na(r)).join(",")),e.ue=n}return e.ue}function $g(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!t4(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!DT(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!U0(t.startAt,e.startAt)&&U0(t.endAt,e.endAt)}function Zp(t){return ne.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Eu{constructor(e,n=null,r=[],i=[],s=null,o="F",a=null,l=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=i,this.limit=s,this.limitType=o,this.startAt=a,this.endAt=l,this.ce=null,this.le=null,this.he=null,this.startAt,this.endAt}}function h4(t,e,n,r,i,s,o,a){return new Eu(t,e,n,r,i,s,o,a)}function UT(t){return new Eu(t)}function F0(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function $T(t){return t.collectionGroup!==null}function xl(t){const e=ce(t);if(e.ce===null){e.ce=[];const n=new Set;for(const s of e.explicitOrderBy)e.ce.push(s),n.add(s.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(o){let a=new Rt(kt.comparator);return o.filters.forEach(l=>{l.getFlattenedFilters().forEach(c=>{c.isInequality()&&(a=a.add(c.field))})}),a})(e).forEach(s=>{n.has(s.canonicalString())||s.isKeyField()||e.ce.push(new xh(s,r))}),n.has(kt.keyField().canonicalString())||e.ce.push(new xh(kt.keyField(),r))}return e.ce}function cr(t){const e=ce(t);return e.le||(e.le=d4(e,xl(t))),e.le}function d4(t,e){if(t.limitType==="F")return $0(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(i=>{const s=i.dir==="desc"?"asc":"desc";return new xh(i.field,s)});const n=t.endAt?new Ah(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new Ah(t.startAt.position,t.startAt.inclusive):null;return $0(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}}function em(t,e){const n=t.filters.concat([e]);return new Eu(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}function tm(t,e,n){return new Eu(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function hd(t,e){return $g(cr(t),cr(e))&&t.limitType===e.limitType}function FT(t){return`${Ug(cr(t))}|lt:${t.limitType}`}function ho(t){return`Query(target=${function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map(i=>MT(i)).join(", ")}]`),cd(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map(i=>function(o){return`${o.field.canonicalString()} (${o.dir})`}(i)).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map(i=>na(i)).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map(i=>na(i)).join(",")),`Target(${r})`}(cr(t))}; limitType=${t.limitType})`}function dd(t,e){return e.isFoundDocument()&&function(r,i){const s=i.key.path;return r.collectionGroup!==null?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(s):ne.isDocumentKey(r.path)?r.path.isEqual(s):r.path.isImmediateParentOf(s)}(t,e)&&function(r,i){for(const s of xl(r))if(!s.field.isKeyField()&&i.data.field(s.field)===null)return!1;return!0}(t,e)&&function(r,i){for(const s of r.filters)if(!s.matches(i))return!1;return!0}(t,e)&&function(r,i){return!(r.startAt&&!function(o,a,l){const c=V0(o,a,l);return o.inclusive?c<=0:c<0}(r.startAt,xl(r),i)||r.endAt&&!function(o,a,l){const c=V0(o,a,l);return o.inclusive?c>=0:c>0}(r.endAt,xl(r),i))}(t,e)}function f4(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function jT(t){return(e,n)=>{let r=!1;for(const i of xl(t)){const s=p4(i,e,n);if(s!==0)return s;r=r||i.field.isKeyField()}return 0}}function p4(t,e,n){const r=t.field.isKeyField()?ne.comparator(e.key,n.key):function(s,o,a){const l=o.data.field(s),c=a.data.field(s);return l!==null&&c!==null?ta(l,c):le()}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return le()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _a{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r!==void 0){for(const[i,s]of r)if(this.equalsFn(i,e))return s}}has(e){return this.get(e)!==void 0}set(e,n){const r=this.mapKeyFn(e),i=this.inner[r];if(i===void 0)return this.inner[r]=[[e,n]],void this.innerSize++;for(let s=0;s<i.length;s++)if(this.equalsFn(i[s][0],e))return void(i[s]=[e,n]);i.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return r.length===1?delete this.inner[n]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){va(this.inner,(n,r)=>{for(const[i,s]of r)e(i,s)})}isEmpty(){return kT(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const m4=new Ye(ne.comparator);function Wr(){return m4}const zT=new Ye(ne.comparator);function hl(...t){let e=zT;for(const n of t)e=e.insert(n.key,n);return e}function BT(t){let e=zT;return t.forEach((n,r)=>e=e.insert(n,r.overlayedDocument)),e}function Es(){return kl()}function HT(){return kl()}function kl(){return new _a(t=>t.toString(),(t,e)=>t.isEqual(e))}const g4=new Ye(ne.comparator),y4=new Rt(ne.comparator);function we(...t){let e=y4;for(const n of t)e=e.add(n);return e}const v4=new Rt(Ae);function _4(){return v4}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function WT(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Sh(e)?"-0":e}}function qT(t){return{integerValue:""+t}}function w4(t,e){return YN(e)?qT(e):WT(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fd{constructor(){this._=void 0}}function E4(t,e,n){return t instanceof kh?function(i,s){const o={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return s&&Dg(s)&&(s=Mg(s)),s&&(o.fields.__previous_value__=s),{mapValue:o}}(n,e):t instanceof ru?KT(t,e):t instanceof iu?QT(t,e):function(i,s){const o=GT(i,s),a=j0(o)+j0(i.Pe);return Yp(o)&&Yp(i.Pe)?qT(a):WT(i.serializer,a)}(t,e)}function b4(t,e,n){return t instanceof ru?KT(t,e):t instanceof iu?QT(t,e):n}function GT(t,e){return t instanceof Ph?function(r){return Yp(r)||function(s){return!!s&&"doubleValue"in s}(r)}(e)?e:{integerValue:0}:null}class kh extends fd{}class ru extends fd{constructor(e){super(),this.elements=e}}function KT(t,e){const n=XT(e);for(const r of t.elements)n.some(i=>fr(i,r))||n.push(r);return{arrayValue:{values:n}}}class iu extends fd{constructor(e){super(),this.elements=e}}function QT(t,e){let n=XT(e);for(const r of t.elements)n=n.filter(i=>!fr(i,r));return{arrayValue:{values:n}}}class Ph extends fd{constructor(e,n){super(),this.serializer=e,this.Pe=n}}function j0(t){return lt(t.integerValue||t.doubleValue)}function XT(t){return Vg(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}function T4(t,e){return t.field.isEqual(e.field)&&function(r,i){return r instanceof ru&&i instanceof ru||r instanceof iu&&i instanceof iu?ea(r.elements,i.elements,fr):r instanceof Ph&&i instanceof Ph?fr(r.Pe,i.Pe):r instanceof kh&&i instanceof kh}(t.transform,e.transform)}class C4{constructor(e,n){this.version=e,this.transformResults=n}}class Ur{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new Ur}static exists(e){return new Ur(void 0,e)}static updateTime(e){return new Ur(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Fc(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class pd{}function YT(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new ZT(t.key,Ur.none()):new bu(t.key,t.data,Ur.none());{const n=t.data,r=Sn.empty();let i=new Rt(kt.comparator);for(let s of e.fields)if(!i.has(s)){let o=n.field(s);o===null&&s.length>1&&(s=s.popLast(),o=n.field(s)),o===null?r.delete(s):r.set(s,o),i=i.add(s)}return new Hs(t.key,r,new Wn(i.toArray()),Ur.none())}}function I4(t,e,n){t instanceof bu?function(i,s,o){const a=i.value.clone(),l=B0(i.fieldTransforms,s,o.transformResults);a.setAll(l),s.convertToFoundDocument(o.version,a).setHasCommittedMutations()}(t,e,n):t instanceof Hs?function(i,s,o){if(!Fc(i.precondition,s))return void s.convertToUnknownDocument(o.version);const a=B0(i.fieldTransforms,s,o.transformResults),l=s.data;l.setAll(JT(i)),l.setAll(a),s.convertToFoundDocument(o.version,l).setHasCommittedMutations()}(t,e,n):function(i,s,o){s.convertToNoDocument(o.version).setHasCommittedMutations()}(0,e,n)}function Pl(t,e,n,r){return t instanceof bu?function(s,o,a,l){if(!Fc(s.precondition,o))return a;const c=s.value.clone(),h=H0(s.fieldTransforms,l,o);return c.setAll(h),o.convertToFoundDocument(o.version,c).setHasLocalMutations(),null}(t,e,n,r):t instanceof Hs?function(s,o,a,l){if(!Fc(s.precondition,o))return a;const c=H0(s.fieldTransforms,l,o),h=o.data;return h.setAll(JT(s)),h.setAll(c),o.convertToFoundDocument(o.version,h).setHasLocalMutations(),a===null?null:a.unionWith(s.fieldMask.fields).unionWith(s.fieldTransforms.map(f=>f.field))}(t,e,n,r):function(s,o,a){return Fc(s.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):a}(t,e,n)}function S4(t,e){let n=null;for(const r of t.fieldTransforms){const i=e.data.field(r.field),s=GT(r.transform,i||null);s!=null&&(n===null&&(n=Sn.empty()),n.set(r.field,s))}return n||null}function z0(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(r,i){return r===void 0&&i===void 0||!(!r||!i)&&ea(r,i,(s,o)=>T4(s,o))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class bu extends pd{constructor(e,n,r,i=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}}class Hs extends pd{constructor(e,n,r,i,s=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=i,this.fieldTransforms=s,this.type=1}getFieldMask(){return this.fieldMask}}function JT(t){const e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const r=t.data.field(n);e.set(n,r)}}),e}function B0(t,e,n){const r=new Map;De(t.length===n.length);for(let i=0;i<n.length;i++){const s=t[i],o=s.transform,a=e.data.field(s.field);r.set(s.field,b4(o,a,n[i]))}return r}function H0(t,e,n){const r=new Map;for(const i of t){const s=i.transform,o=n.data.field(i.field);r.set(i.field,E4(s,o,e))}return r}class ZT extends pd{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class A4 extends pd{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class x4{constructor(e,n,r,i){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,n){const r=n.mutationResults;for(let i=0;i<this.mutations.length;i++){const s=this.mutations[i];s.key.isEqual(e.key)&&I4(s,e,r[i])}}applyToLocalView(e,n){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(n=Pl(r,e,n,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(n=Pl(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const r=HT();return this.mutations.forEach(i=>{const s=e.get(i.key),o=s.overlayedDocument;let a=this.applyToLocalView(o,s.mutatedFields);a=n.has(i.key)?null:a;const l=YT(o,a);l!==null&&r.set(i.key,l),o.isValidDocument()||o.convertToNoDocument(ue.min())}),r}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),we())}isEqual(e){return this.batchId===e.batchId&&ea(this.mutations,e.mutations,(n,r)=>z0(n,r))&&ea(this.baseMutations,e.baseMutations,(n,r)=>z0(n,r))}}class Fg{constructor(e,n,r,i){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=i}static from(e,n,r){De(e.mutations.length===r.length);let i=function(){return g4}();const s=e.mutations;for(let o=0;o<s.length;o++)i=i.insert(s[o].key,r[o].version);return new Fg(e,n,r,i)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class k4{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class P4{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var ot,be;function R4(t){switch(t){default:return le();case j.CANCELLED:case j.UNKNOWN:case j.DEADLINE_EXCEEDED:case j.RESOURCE_EXHAUSTED:case j.INTERNAL:case j.UNAVAILABLE:case j.UNAUTHENTICATED:return!1;case j.INVALID_ARGUMENT:case j.NOT_FOUND:case j.ALREADY_EXISTS:case j.PERMISSION_DENIED:case j.FAILED_PRECONDITION:case j.ABORTED:case j.OUT_OF_RANGE:case j.UNIMPLEMENTED:case j.DATA_LOSS:return!0}}function eC(t){if(t===void 0)return Hr("GRPC error has no .code"),j.UNKNOWN;switch(t){case ot.OK:return j.OK;case ot.CANCELLED:return j.CANCELLED;case ot.UNKNOWN:return j.UNKNOWN;case ot.DEADLINE_EXCEEDED:return j.DEADLINE_EXCEEDED;case ot.RESOURCE_EXHAUSTED:return j.RESOURCE_EXHAUSTED;case ot.INTERNAL:return j.INTERNAL;case ot.UNAVAILABLE:return j.UNAVAILABLE;case ot.UNAUTHENTICATED:return j.UNAUTHENTICATED;case ot.INVALID_ARGUMENT:return j.INVALID_ARGUMENT;case ot.NOT_FOUND:return j.NOT_FOUND;case ot.ALREADY_EXISTS:return j.ALREADY_EXISTS;case ot.PERMISSION_DENIED:return j.PERMISSION_DENIED;case ot.FAILED_PRECONDITION:return j.FAILED_PRECONDITION;case ot.ABORTED:return j.ABORTED;case ot.OUT_OF_RANGE:return j.OUT_OF_RANGE;case ot.UNIMPLEMENTED:return j.UNIMPLEMENTED;case ot.DATA_LOSS:return j.DATA_LOSS;default:return le()}}(be=ot||(ot={}))[be.OK=0]="OK",be[be.CANCELLED=1]="CANCELLED",be[be.UNKNOWN=2]="UNKNOWN",be[be.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",be[be.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",be[be.NOT_FOUND=5]="NOT_FOUND",be[be.ALREADY_EXISTS=6]="ALREADY_EXISTS",be[be.PERMISSION_DENIED=7]="PERMISSION_DENIED",be[be.UNAUTHENTICATED=16]="UNAUTHENTICATED",be[be.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",be[be.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",be[be.ABORTED=10]="ABORTED",be[be.OUT_OF_RANGE=11]="OUT_OF_RANGE",be[be.UNIMPLEMENTED=12]="UNIMPLEMENTED",be[be.INTERNAL=13]="INTERNAL",be[be.UNAVAILABLE=14]="UNAVAILABLE",be[be.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function O4(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const L4=new Cs([4294967295,4294967295],0);function W0(t){const e=O4().encode(t),n=new wT;return n.update(e),new Uint8Array(n.digest())}function q0(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),s=e.getUint32(12,!0);return[new Cs([n,r],0),new Cs([i,s],0)]}class jg{constructor(e,n,r){if(this.bitmap=e,this.padding=n,this.hashCount=r,n<0||n>=8)throw new dl(`Invalid padding: ${n}`);if(r<0)throw new dl(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new dl(`Invalid hash count: ${r}`);if(e.length===0&&n!==0)throw new dl(`Invalid padding when bitmap length is 0: ${n}`);this.Ie=8*e.length-n,this.Te=Cs.fromNumber(this.Ie)}Ee(e,n,r){let i=e.add(n.multiply(Cs.fromNumber(r)));return i.compare(L4)===1&&(i=new Cs([i.getBits(0),i.getBits(1)],0)),i.modulo(this.Te).toNumber()}de(e){return(this.bitmap[Math.floor(e/8)]&1<<e%8)!=0}mightContain(e){if(this.Ie===0)return!1;const n=W0(e),[r,i]=q0(n);for(let s=0;s<this.hashCount;s++){const o=this.Ee(r,i,s);if(!this.de(o))return!1}return!0}static create(e,n,r){const i=e%8==0?0:8-e%8,s=new Uint8Array(Math.ceil(e/8)),o=new jg(s,i,n);return r.forEach(a=>o.insert(a)),o}insert(e){if(this.Ie===0)return;const n=W0(e),[r,i]=q0(n);for(let s=0;s<this.hashCount;s++){const o=this.Ee(r,i,s);this.Ae(o)}}Ae(e){const n=Math.floor(e/8),r=e%8;this.bitmap[n]|=1<<r}}class dl extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class md{constructor(e,n,r,i,s){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=s}static createSynthesizedRemoteEventForCurrentChange(e,n,r){const i=new Map;return i.set(e,Tu.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new md(ue.min(),i,new Ye(Ae),Wr(),we())}}class Tu{constructor(e,n,r,i,s){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=s}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new Tu(r,n,we(),we(),we())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jc{constructor(e,n,r,i){this.Re=e,this.removedTargetIds=n,this.key=r,this.Ve=i}}class tC{constructor(e,n){this.targetId=e,this.me=n}}class nC{constructor(e,n,r=Bt.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=i}}class G0{constructor(){this.fe=0,this.ge=Q0(),this.pe=Bt.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return this.fe!==0}get be(){return this.we}De(e){e.approximateByteSize()>0&&(this.we=!0,this.pe=e)}Ce(){let e=we(),n=we(),r=we();return this.ge.forEach((i,s)=>{switch(s){case 0:e=e.add(i);break;case 2:n=n.add(i);break;case 1:r=r.add(i);break;default:le()}}),new Tu(this.pe,this.ye,e,n,r)}ve(){this.we=!1,this.ge=Q0()}Fe(e,n){this.we=!0,this.ge=this.ge.insert(e,n)}Me(e){this.we=!0,this.ge=this.ge.remove(e)}xe(){this.fe+=1}Oe(){this.fe-=1,De(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}}class N4{constructor(e){this.Le=e,this.Be=new Map,this.ke=Wr(),this.qe=K0(),this.Qe=new Ye(Ae)}Ke(e){for(const n of e.Re)e.Ve&&e.Ve.isFoundDocument()?this.$e(n,e.Ve):this.Ue(n,e.key,e.Ve);for(const n of e.removedTargetIds)this.Ue(n,e.key,e.Ve)}We(e){this.forEachTarget(e,n=>{const r=this.Ge(n);switch(e.state){case 0:this.ze(n)&&r.De(e.resumeToken);break;case 1:r.Oe(),r.Se||r.ve(),r.De(e.resumeToken);break;case 2:r.Oe(),r.Se||this.removeTarget(n);break;case 3:this.ze(n)&&(r.Ne(),r.De(e.resumeToken));break;case 4:this.ze(n)&&(this.je(n),r.De(e.resumeToken));break;default:le()}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.Be.forEach((r,i)=>{this.ze(i)&&n(i)})}He(e){const n=e.targetId,r=e.me.count,i=this.Je(n);if(i){const s=i.target;if(Zp(s))if(r===0){const o=new ne(s.path);this.Ue(n,o,jt.newNoDocument(o,ue.min()))}else De(r===1);else{const o=this.Ye(n);if(o!==r){const a=this.Ze(e),l=a?this.Xe(a,e,o):1;if(l!==0){this.je(n);const c=l===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Qe=this.Qe.insert(n,c)}}}}}Ze(e){const n=e.me.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:r="",padding:i=0},hashCount:s=0}=n;let o,a;try{o=Us(r).toUint8Array()}catch(l){if(l instanceof PT)return Zo("Decoding the base64 bloom filter in existence filter failed ("+l.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw l}try{a=new jg(o,i,s)}catch(l){return Zo(l instanceof dl?"BloomFilter error: ":"Applying bloom filter failed: ",l),null}return a.Ie===0?null:a}Xe(e,n,r){return n.me.count===r-this.nt(e,n.targetId)?0:2}nt(e,n){const r=this.Le.getRemoteKeysForTarget(n);let i=0;return r.forEach(s=>{const o=this.Le.tt(),a=`projects/${o.projectId}/databases/${o.database}/documents/${s.path.canonicalString()}`;e.mightContain(a)||(this.Ue(n,s,null),i++)}),i}rt(e){const n=new Map;this.Be.forEach((s,o)=>{const a=this.Je(o);if(a){if(s.current&&Zp(a.target)){const l=new ne(a.target.path);this.ke.get(l)!==null||this.it(o,l)||this.Ue(o,l,jt.newNoDocument(l,e))}s.be&&(n.set(o,s.Ce()),s.ve())}});let r=we();this.qe.forEach((s,o)=>{let a=!0;o.forEachWhile(l=>{const c=this.Je(l);return!c||c.purpose==="TargetPurposeLimboResolution"||(a=!1,!1)}),a&&(r=r.add(s))}),this.ke.forEach((s,o)=>o.setReadTime(e));const i=new md(e,n,this.Qe,this.ke,r);return this.ke=Wr(),this.qe=K0(),this.Qe=new Ye(Ae),i}$e(e,n){if(!this.ze(e))return;const r=this.it(e,n.key)?2:0;this.Ge(e).Fe(n.key,r),this.ke=this.ke.insert(n.key,n),this.qe=this.qe.insert(n.key,this.st(n.key).add(e))}Ue(e,n,r){if(!this.ze(e))return;const i=this.Ge(e);this.it(e,n)?i.Fe(n,1):i.Me(n),this.qe=this.qe.insert(n,this.st(n).delete(e)),r&&(this.ke=this.ke.insert(n,r))}removeTarget(e){this.Be.delete(e)}Ye(e){const n=this.Ge(e).Ce();return this.Le.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}xe(e){this.Ge(e).xe()}Ge(e){let n=this.Be.get(e);return n||(n=new G0,this.Be.set(e,n)),n}st(e){let n=this.qe.get(e);return n||(n=new Rt(Ae),this.qe=this.qe.insert(e,n)),n}ze(e){const n=this.Je(e)!==null;return n||Y("WatchChangeAggregator","Detected inactive target",e),n}Je(e){const n=this.Be.get(e);return n&&n.Se?null:this.Le.ot(e)}je(e){this.Be.set(e,new G0),this.Le.getRemoteKeysForTarget(e).forEach(n=>{this.Ue(e,n,null)})}it(e,n){return this.Le.getRemoteKeysForTarget(e).has(n)}}function K0(){return new Ye(ne.comparator)}function Q0(){return new Ye(ne.comparator)}const D4={asc:"ASCENDING",desc:"DESCENDING"},M4={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},V4={and:"AND",or:"OR"};class U4{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function nm(t,e){return t.useProto3Json||cd(e)?e:{value:e}}function Rh(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function rC(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function $4(t,e){return Rh(t,e.toTimestamp())}function hr(t){return De(!!t),ue.fromTimestamp(function(n){const r=Bi(n);return new mt(r.seconds,r.nanos)}(t))}function zg(t,e){return rm(t,e).canonicalString()}function rm(t,e){const n=function(i){return new Fe(["projects",i.projectId,"databases",i.database])}(t).child("documents");return e===void 0?n:n.child(e)}function iC(t){const e=Fe.fromString(t);return De(uC(e)),e}function im(t,e){return zg(t.databaseId,e.path)}function kf(t,e){const n=iC(e);if(n.get(1)!==t.databaseId.projectId)throw new J(j.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new J(j.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new ne(oC(n))}function sC(t,e){return zg(t.databaseId,e)}function F4(t){const e=iC(t);return e.length===4?Fe.emptyPath():oC(e)}function sm(t){return new Fe(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function oC(t){return De(t.length>4&&t.get(4)==="documents"),t.popFirst(5)}function X0(t,e,n){return{name:im(t,e),fields:n.value.mapValue.fields}}function j4(t,e){let n;if("targetChange"in e){e.targetChange;const r=function(c){return c==="NO_CHANGE"?0:c==="ADD"?1:c==="REMOVE"?2:c==="CURRENT"?3:c==="RESET"?4:le()}(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],s=function(c,h){return c.useProto3Json?(De(h===void 0||typeof h=="string"),Bt.fromBase64String(h||"")):(De(h===void 0||h instanceof Buffer||h instanceof Uint8Array),Bt.fromUint8Array(h||new Uint8Array))}(t,e.targetChange.resumeToken),o=e.targetChange.cause,a=o&&function(c){const h=c.code===void 0?j.UNKNOWN:eC(c.code);return new J(h,c.message||"")}(o);n=new nC(r,i,s,a||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const i=kf(t,r.document.name),s=hr(r.document.updateTime),o=r.document.createTime?hr(r.document.createTime):ue.min(),a=new Sn({mapValue:{fields:r.document.fields}}),l=jt.newFoundDocument(i,s,o,a),c=r.targetIds||[],h=r.removedTargetIds||[];n=new jc(c,h,l.key,l)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const i=kf(t,r.document),s=r.readTime?hr(r.readTime):ue.min(),o=jt.newNoDocument(i,s),a=r.removedTargetIds||[];n=new jc([],a,o.key,o)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const i=kf(t,r.document),s=r.removedTargetIds||[];n=new jc([],s,i,null)}else{if(!("filter"in e))return le();{e.filter;const r=e.filter;r.targetId;const{count:i=0,unchangedNames:s}=r,o=new P4(i,s),a=r.targetId;n=new tC(a,o)}}return n}function z4(t,e){let n;if(e instanceof bu)n={update:X0(t,e.key,e.value)};else if(e instanceof ZT)n={delete:im(t,e.key)};else if(e instanceof Hs)n={update:X0(t,e.key,e.data),updateMask:Y4(e.fieldMask)};else{if(!(e instanceof A4))return le();n={verify:im(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(r=>function(s,o){const a=o.transform;if(a instanceof kh)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(a instanceof ru)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:a.elements}};if(a instanceof iu)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:a.elements}};if(a instanceof Ph)return{fieldPath:o.field.canonicalString(),increment:a.Pe};throw le()}(0,r))),e.precondition.isNone||(n.currentDocument=function(i,s){return s.updateTime!==void 0?{updateTime:$4(i,s.updateTime)}:s.exists!==void 0?{exists:s.exists}:le()}(t,e.precondition)),n}function B4(t,e){return t&&t.length>0?(De(e!==void 0),t.map(n=>function(i,s){let o=i.updateTime?hr(i.updateTime):hr(s);return o.isEqual(ue.min())&&(o=hr(s)),new C4(o,i.transformResults||[])}(n,e))):[]}function H4(t,e){return{documents:[sC(t,e.path)]}}function W4(t,e){const n={structuredQuery:{}},r=e.path;let i;e.collectionGroup!==null?(i=r,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=sC(t,i);const s=function(c){if(c.length!==0)return lC(Yn.create(c,"and"))}(e.filters);s&&(n.structuredQuery.where=s);const o=function(c){if(c.length!==0)return c.map(h=>function(p){return{field:fo(p.field),direction:K4(p.dir)}}(h))}(e.orderBy);o&&(n.structuredQuery.orderBy=o);const a=nm(t,e.limit);return a!==null&&(n.structuredQuery.limit=a),e.startAt&&(n.structuredQuery.startAt=function(c){return{before:c.inclusive,values:c.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(c){return{before:!c.inclusive,values:c.position}}(e.endAt)),{_t:n,parent:i}}function q4(t){let e=F4(t.parent);const n=t.structuredQuery,r=n.from?n.from.length:0;let i=null;if(r>0){De(r===1);const h=n.from[0];h.allDescendants?i=h.collectionId:e=e.child(h.collectionId)}let s=[];n.where&&(s=function(f){const p=aC(f);return p instanceof Yn&&NT(p)?p.getFilters():[p]}(n.where));let o=[];n.orderBy&&(o=function(f){return f.map(p=>function(E){return new xh(po(E.field),function(P){switch(P){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(E.direction))}(p))}(n.orderBy));let a=null;n.limit&&(a=function(f){let p;return p=typeof f=="object"?f.value:f,cd(p)?null:p}(n.limit));let l=null;n.startAt&&(l=function(f){const p=!!f.before,w=f.values||[];return new Ah(w,p)}(n.startAt));let c=null;return n.endAt&&(c=function(f){const p=!f.before,w=f.values||[];return new Ah(w,p)}(n.endAt)),h4(e,i,o,s,a,"F",l,c)}function G4(t,e){const n=function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return le()}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function aC(t){return t.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const r=po(n.unaryFilter.field);return ct.create(r,"==",{doubleValue:NaN});case"IS_NULL":const i=po(n.unaryFilter.field);return ct.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const s=po(n.unaryFilter.field);return ct.create(s,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const o=po(n.unaryFilter.field);return ct.create(o,"!=",{nullValue:"NULL_VALUE"});default:return le()}}(t):t.fieldFilter!==void 0?function(n){return ct.create(po(n.fieldFilter.field),function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return le()}}(n.fieldFilter.op),n.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(n){return Yn.create(n.compositeFilter.filters.map(r=>aC(r)),function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return le()}}(n.compositeFilter.op))}(t):le()}function K4(t){return D4[t]}function Q4(t){return M4[t]}function X4(t){return V4[t]}function fo(t){return{fieldPath:t.canonicalString()}}function po(t){return kt.fromServerFormat(t.fieldPath)}function lC(t){return t instanceof ct?function(n){if(n.op==="=="){if(M0(n.value))return{unaryFilter:{field:fo(n.field),op:"IS_NAN"}};if(D0(n.value))return{unaryFilter:{field:fo(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(M0(n.value))return{unaryFilter:{field:fo(n.field),op:"IS_NOT_NAN"}};if(D0(n.value))return{unaryFilter:{field:fo(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:fo(n.field),op:Q4(n.op),value:n.value}}}(t):t instanceof Yn?function(n){const r=n.getFilters().map(i=>lC(i));return r.length===1?r[0]:{compositeFilter:{op:X4(n.op),filters:r}}}(t):le()}function Y4(t){const e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function uC(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ei{constructor(e,n,r,i,s=ue.min(),o=ue.min(),a=Bt.EMPTY_BYTE_STRING,l=null){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=s,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=a,this.expectedCount=l}withSequenceNumber(e){return new Ei(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new Ei(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Ei(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Ei(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class J4{constructor(e){this.ct=e}}function Z4(t){const e=q4({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?tm(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eD{constructor(){this._n=new tD}addToCollectionParentIndex(e,n){return this._n.add(n),B.resolve()}getCollectionParents(e,n){return B.resolve(this._n.getEntries(n))}addFieldIndex(e,n){return B.resolve()}deleteFieldIndex(e,n){return B.resolve()}deleteAllFieldIndexes(e){return B.resolve()}createTargetIndexes(e,n){return B.resolve()}getDocumentsMatchingTarget(e,n){return B.resolve(null)}getIndexType(e,n){return B.resolve(0)}getFieldIndexes(e,n){return B.resolve([])}getNextCollectionGroupToUpdate(e){return B.resolve(null)}getMinOffset(e,n){return B.resolve(zi.min())}getMinOffsetFromCollectionGroup(e,n){return B.resolve(zi.min())}updateCollectionGroup(e,n,r){return B.resolve()}updateIndexEntries(e,n){return B.resolve()}}class tD{constructor(){this.index={}}add(e){const n=e.lastSegment(),r=e.popLast(),i=this.index[n]||new Rt(Fe.comparator),s=!i.has(r);return this.index[n]=i.add(r),s}has(e){const n=e.lastSegment(),r=e.popLast(),i=this.index[n];return i&&i.has(r)}getEntries(e){return(this.index[e]||new Rt(Fe.comparator)).toArray()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ra{constructor(e){this.On=e}next(){return this.On+=2,this.On}static Nn(){return new ra(0)}static Ln(){return new ra(-1)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nD{constructor(){this.changes=new _a(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,jt.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const r=this.changes.get(n);return r!==void 0?B.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rD{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iD{constructor(e,n,r,i){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next(i=>(r=i,this.remoteDocumentCache.getEntry(e,n))).next(i=>(r!==null&&Pl(r.mutation,i,Wn.empty(),mt.now()),i))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.getLocalViewOfDocuments(e,r,we()).next(()=>r))}getLocalViewOfDocuments(e,n,r=we()){const i=Es();return this.populateOverlays(e,i,n).next(()=>this.computeViews(e,n,i,r).next(s=>{let o=hl();return s.forEach((a,l)=>{o=o.insert(a,l.overlayedDocument)}),o}))}getOverlayedDocuments(e,n){const r=Es();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,we()))}populateOverlays(e,n,r){const i=[];return r.forEach(s=>{n.has(s)||i.push(s)}),this.documentOverlayCache.getOverlays(e,i).next(s=>{s.forEach((o,a)=>{n.set(o,a)})})}computeViews(e,n,r,i){let s=Wr();const o=kl(),a=function(){return kl()}();return n.forEach((l,c)=>{const h=r.get(c.key);i.has(c.key)&&(h===void 0||h.mutation instanceof Hs)?s=s.insert(c.key,c):h!==void 0?(o.set(c.key,h.mutation.getFieldMask()),Pl(h.mutation,c,h.mutation.getFieldMask(),mt.now())):o.set(c.key,Wn.empty())}),this.recalculateAndSaveOverlays(e,s).next(l=>(l.forEach((c,h)=>o.set(c,h)),n.forEach((c,h)=>{var f;return a.set(c,new rD(h,(f=o.get(c))!==null&&f!==void 0?f:null))}),a))}recalculateAndSaveOverlays(e,n){const r=kl();let i=new Ye((o,a)=>o-a),s=we();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(o=>{for(const a of o)a.keys().forEach(l=>{const c=n.get(l);if(c===null)return;let h=r.get(l)||Wn.empty();h=a.applyToLocalView(c,h),r.set(l,h);const f=(i.get(a.batchId)||we()).add(l);i=i.insert(a.batchId,f)})}).next(()=>{const o=[],a=i.getReverseIterator();for(;a.hasNext();){const l=a.getNext(),c=l.key,h=l.value,f=HT();h.forEach(p=>{if(!s.has(p)){const w=YT(n.get(p),r.get(p));w!==null&&f.set(p,w),s=s.add(p)}}),o.push(this.documentOverlayCache.saveOverlays(e,c,f))}return B.waitFor(o)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,n,r,i){return function(o){return ne.isDocumentKey(o.path)&&o.collectionGroup===null&&o.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):$T(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r,i):this.getDocumentsMatchingCollectionQuery(e,n,r,i)}getNextDocuments(e,n,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,i).next(s=>{const o=i-s.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,i-s.size):B.resolve(Es());let a=-1,l=s;return o.next(c=>B.forEach(c,(h,f)=>(a<f.largestBatchId&&(a=f.largestBatchId),s.get(h)?B.resolve():this.remoteDocumentCache.getEntry(e,h).next(p=>{l=l.insert(h,p)}))).next(()=>this.populateOverlays(e,c,s)).next(()=>this.computeViews(e,l,c,we())).next(h=>({batchId:a,changes:BT(h)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new ne(n)).next(r=>{let i=hl();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,n,r,i){const s=n.collectionGroup;let o=hl();return this.indexManager.getCollectionParents(e,s).next(a=>B.forEach(a,l=>{const c=function(f,p){return new Eu(p,null,f.explicitOrderBy.slice(),f.filters.slice(),f.limit,f.limitType,f.startAt,f.endAt)}(n,l.child(s));return this.getDocumentsMatchingCollectionQuery(e,c,r,i).next(h=>{h.forEach((f,p)=>{o=o.insert(f,p)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(e,n,r,i){let s;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next(o=>(s=o,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,s,i))).next(o=>{s.forEach((l,c)=>{const h=c.getKey();o.get(h)===null&&(o=o.insert(h,jt.newInvalidDocument(h)))});let a=hl();return o.forEach((l,c)=>{const h=s.get(l);h!==void 0&&Pl(h.mutation,c,Wn.empty(),mt.now()),dd(n,c)&&(a=a.insert(l,c))}),a})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sD{constructor(e){this.serializer=e,this.cr=new Map,this.lr=new Map}getBundleMetadata(e,n){return B.resolve(this.cr.get(n))}saveBundleMetadata(e,n){return this.cr.set(n.id,function(i){return{id:i.id,version:i.version,createTime:hr(i.createTime)}}(n)),B.resolve()}getNamedQuery(e,n){return B.resolve(this.lr.get(n))}saveNamedQuery(e,n){return this.lr.set(n.name,function(i){return{name:i.name,query:Z4(i.bundledQuery),readTime:hr(i.readTime)}}(n)),B.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oD{constructor(){this.overlays=new Ye(ne.comparator),this.hr=new Map}getOverlay(e,n){return B.resolve(this.overlays.get(n))}getOverlays(e,n){const r=Es();return B.forEach(n,i=>this.getOverlay(e,i).next(s=>{s!==null&&r.set(i,s)})).next(()=>r)}saveOverlays(e,n,r){return r.forEach((i,s)=>{this.ht(e,n,s)}),B.resolve()}removeOverlaysForBatchId(e,n,r){const i=this.hr.get(r);return i!==void 0&&(i.forEach(s=>this.overlays=this.overlays.remove(s)),this.hr.delete(r)),B.resolve()}getOverlaysForCollection(e,n,r){const i=Es(),s=n.length+1,o=new ne(n.child("")),a=this.overlays.getIteratorFrom(o);for(;a.hasNext();){const l=a.getNext().value,c=l.getKey();if(!n.isPrefixOf(c.path))break;c.path.length===s&&l.largestBatchId>r&&i.set(l.getKey(),l)}return B.resolve(i)}getOverlaysForCollectionGroup(e,n,r,i){let s=new Ye((c,h)=>c-h);const o=this.overlays.getIterator();for(;o.hasNext();){const c=o.getNext().value;if(c.getKey().getCollectionGroup()===n&&c.largestBatchId>r){let h=s.get(c.largestBatchId);h===null&&(h=Es(),s=s.insert(c.largestBatchId,h)),h.set(c.getKey(),c)}}const a=Es(),l=s.getIterator();for(;l.hasNext()&&(l.getNext().value.forEach((c,h)=>a.set(c,h)),!(a.size()>=i)););return B.resolve(a)}ht(e,n,r){const i=this.overlays.get(r.key);if(i!==null){const o=this.hr.get(i.largestBatchId).delete(r.key);this.hr.set(i.largestBatchId,o)}this.overlays=this.overlays.insert(r.key,new k4(n,r));let s=this.hr.get(n);s===void 0&&(s=we(),this.hr.set(n,s)),this.hr.set(n,s.add(r.key))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bg{constructor(){this.Pr=new Rt(gt.Ir),this.Tr=new Rt(gt.Er)}isEmpty(){return this.Pr.isEmpty()}addReference(e,n){const r=new gt(e,n);this.Pr=this.Pr.add(r),this.Tr=this.Tr.add(r)}dr(e,n){e.forEach(r=>this.addReference(r,n))}removeReference(e,n){this.Ar(new gt(e,n))}Rr(e,n){e.forEach(r=>this.removeReference(r,n))}Vr(e){const n=new ne(new Fe([])),r=new gt(n,e),i=new gt(n,e+1),s=[];return this.Tr.forEachInRange([r,i],o=>{this.Ar(o),s.push(o.key)}),s}mr(){this.Pr.forEach(e=>this.Ar(e))}Ar(e){this.Pr=this.Pr.delete(e),this.Tr=this.Tr.delete(e)}gr(e){const n=new ne(new Fe([])),r=new gt(n,e),i=new gt(n,e+1);let s=we();return this.Tr.forEachInRange([r,i],o=>{s=s.add(o.key)}),s}containsKey(e){const n=new gt(e,0),r=this.Pr.firstAfterOrEqual(n);return r!==null&&e.isEqual(r.key)}}class gt{constructor(e,n){this.key=e,this.pr=n}static Ir(e,n){return ne.comparator(e.key,n.key)||Ae(e.pr,n.pr)}static Er(e,n){return Ae(e.pr,n.pr)||ne.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aD{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.yr=1,this.wr=new Rt(gt.Ir)}checkEmpty(e){return B.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,r,i){const s=this.yr;this.yr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const o=new x4(s,n,r,i);this.mutationQueue.push(o);for(const a of i)this.wr=this.wr.add(new gt(a.key,s)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return B.resolve(o)}lookupMutationBatch(e,n){return B.resolve(this.Sr(n))}getNextMutationBatchAfterBatchId(e,n){const r=n+1,i=this.br(r),s=i<0?0:i;return B.resolve(this.mutationQueue.length>s?this.mutationQueue[s]:null)}getHighestUnacknowledgedBatchId(){return B.resolve(this.mutationQueue.length===0?-1:this.yr-1)}getAllMutationBatches(e){return B.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const r=new gt(n,0),i=new gt(n,Number.POSITIVE_INFINITY),s=[];return this.wr.forEachInRange([r,i],o=>{const a=this.Sr(o.pr);s.push(a)}),B.resolve(s)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new Rt(Ae);return n.forEach(i=>{const s=new gt(i,0),o=new gt(i,Number.POSITIVE_INFINITY);this.wr.forEachInRange([s,o],a=>{r=r.add(a.pr)})}),B.resolve(this.Dr(r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,i=r.length+1;let s=r;ne.isDocumentKey(s)||(s=s.child(""));const o=new gt(new ne(s),0);let a=new Rt(Ae);return this.wr.forEachWhile(l=>{const c=l.key.path;return!!r.isPrefixOf(c)&&(c.length===i&&(a=a.add(l.pr)),!0)},o),B.resolve(this.Dr(a))}Dr(e){const n=[];return e.forEach(r=>{const i=this.Sr(r);i!==null&&n.push(i)}),n}removeMutationBatch(e,n){De(this.Cr(n.batchId,"removed")===0),this.mutationQueue.shift();let r=this.wr;return B.forEach(n.mutations,i=>{const s=new gt(i.key,n.batchId);return r=r.delete(s),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.wr=r})}Mn(e){}containsKey(e,n){const r=new gt(n,0),i=this.wr.firstAfterOrEqual(r);return B.resolve(n.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,B.resolve()}Cr(e,n){return this.br(e)}br(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Sr(e){const n=this.br(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lD{constructor(e){this.vr=e,this.docs=function(){return new Ye(ne.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const r=n.key,i=this.docs.get(r),s=i?i.size:0,o=this.vr(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:o}),this.size+=o-s,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const r=this.docs.get(n);return B.resolve(r?r.document.mutableCopy():jt.newInvalidDocument(n))}getEntries(e,n){let r=Wr();return n.forEach(i=>{const s=this.docs.get(i);r=r.insert(i,s?s.document.mutableCopy():jt.newInvalidDocument(i))}),B.resolve(r)}getDocumentsMatchingQuery(e,n,r,i){let s=Wr();const o=n.path,a=new ne(o.child("")),l=this.docs.getIteratorFrom(a);for(;l.hasNext();){const{key:c,value:{document:h}}=l.getNext();if(!o.isPrefixOf(c.path))break;c.path.length>o.length+1||GN(qN(h),r)<=0||(i.has(h.key)||dd(n,h))&&(s=s.insert(h.key,h.mutableCopy()))}return B.resolve(s)}getAllFromCollectionGroup(e,n,r,i){le()}Fr(e,n){return B.forEach(this.docs,r=>n(r))}newChangeBuffer(e){return new uD(this)}getSize(e){return B.resolve(this.size)}}class uD extends nD{constructor(e){super(),this.ar=e}applyChanges(e){const n=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?n.push(this.ar.addEntry(e,i)):this.ar.removeEntry(r)}),B.waitFor(n)}getFromCache(e,n){return this.ar.getEntry(e,n)}getAllFromCache(e,n){return this.ar.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cD{constructor(e){this.persistence=e,this.Mr=new _a(n=>Ug(n),$g),this.lastRemoteSnapshotVersion=ue.min(),this.highestTargetId=0,this.Or=0,this.Nr=new Bg,this.targetCount=0,this.Lr=ra.Nn()}forEachTarget(e,n){return this.Mr.forEach((r,i)=>n(i)),B.resolve()}getLastRemoteSnapshotVersion(e){return B.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return B.resolve(this.Or)}allocateTargetId(e){return this.highestTargetId=this.Lr.next(),B.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.Or&&(this.Or=n),B.resolve()}qn(e){this.Mr.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.Lr=new ra(n),this.highestTargetId=n),e.sequenceNumber>this.Or&&(this.Or=e.sequenceNumber)}addTargetData(e,n){return this.qn(n),this.targetCount+=1,B.resolve()}updateTargetData(e,n){return this.qn(n),B.resolve()}removeTargetData(e,n){return this.Mr.delete(n.target),this.Nr.Vr(n.targetId),this.targetCount-=1,B.resolve()}removeTargets(e,n,r){let i=0;const s=[];return this.Mr.forEach((o,a)=>{a.sequenceNumber<=n&&r.get(a.targetId)===null&&(this.Mr.delete(o),s.push(this.removeMatchingKeysForTargetId(e,a.targetId)),i++)}),B.waitFor(s).next(()=>i)}getTargetCount(e){return B.resolve(this.targetCount)}getTargetData(e,n){const r=this.Mr.get(n)||null;return B.resolve(r)}addMatchingKeys(e,n,r){return this.Nr.dr(n,r),B.resolve()}removeMatchingKeys(e,n,r){this.Nr.Rr(n,r);const i=this.persistence.referenceDelegate,s=[];return i&&n.forEach(o=>{s.push(i.markPotentiallyOrphaned(e,o))}),B.waitFor(s)}removeMatchingKeysForTargetId(e,n){return this.Nr.Vr(n),B.resolve()}getMatchingKeysForTargetId(e,n){const r=this.Nr.gr(n);return B.resolve(r)}containsKey(e,n){return B.resolve(this.Nr.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hD{constructor(e,n){this.Br={},this.overlays={},this.kr=new Ng(0),this.qr=!1,this.qr=!0,this.referenceDelegate=e(this),this.Qr=new cD(this),this.indexManager=new eD,this.remoteDocumentCache=function(i){return new lD(i)}(r=>this.referenceDelegate.Kr(r)),this.serializer=new J4(n),this.$r=new sD(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.qr=!1,Promise.resolve()}get started(){return this.qr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new oD,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this.Br[e.toKey()];return r||(r=new aD(n,this.referenceDelegate),this.Br[e.toKey()]=r),r}getTargetCache(){return this.Qr}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.$r}runTransaction(e,n,r){Y("MemoryPersistence","Starting transaction:",e);const i=new dD(this.kr.next());return this.referenceDelegate.Ur(),r(i).next(s=>this.referenceDelegate.Wr(i).next(()=>s)).toPromise().then(s=>(i.raiseOnCommittedEvent(),s))}Gr(e,n){return B.or(Object.values(this.Br).map(r=>()=>r.containsKey(e,n)))}}class dD extends QN{constructor(e){super(),this.currentSequenceNumber=e}}class Hg{constructor(e){this.persistence=e,this.zr=new Bg,this.jr=null}static Hr(e){return new Hg(e)}get Jr(){if(this.jr)return this.jr;throw le()}addReference(e,n,r){return this.zr.addReference(r,n),this.Jr.delete(r.toString()),B.resolve()}removeReference(e,n,r){return this.zr.removeReference(r,n),this.Jr.add(r.toString()),B.resolve()}markPotentiallyOrphaned(e,n){return this.Jr.add(n.toString()),B.resolve()}removeTarget(e,n){this.zr.Vr(n.targetId).forEach(i=>this.Jr.add(i.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next(i=>{i.forEach(s=>this.Jr.add(s.toString()))}).next(()=>r.removeTargetData(e,n))}Ur(){this.jr=new Set}Wr(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return B.forEach(this.Jr,r=>{const i=ne.fromPath(r);return this.Yr(e,i).next(s=>{s||n.removeEntry(i,ue.min())})}).next(()=>(this.jr=null,n.apply(e)))}updateLimboDocument(e,n){return this.Yr(e,n).next(r=>{r?this.Jr.delete(n.toString()):this.Jr.add(n.toString())})}Kr(e){return 0}Yr(e,n){return B.or([()=>B.resolve(this.zr.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Gr(e,n)])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wg{constructor(e,n,r,i){this.targetId=e,this.fromCache=n,this.qi=r,this.Qi=i}static Ki(e,n){let r=we(),i=we();for(const s of n.docChanges)switch(s.type){case 0:r=r.add(s.doc.key);break;case 1:i=i.add(s.doc.key)}return new Wg(e,n.fromCache,r,i)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fD{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pD{constructor(){this.$i=!1,this.Ui=!1,this.Wi=100,this.Gi=function(){return iR()?8:XN(Lt())>0?6:4}()}initialize(e,n){this.zi=e,this.indexManager=n,this.$i=!0}getDocumentsMatchingQuery(e,n,r,i){const s={result:null};return this.ji(e,n).next(o=>{s.result=o}).next(()=>{if(!s.result)return this.Hi(e,n,i,r).next(o=>{s.result=o})}).next(()=>{if(s.result)return;const o=new fD;return this.Ji(e,n,o).next(a=>{if(s.result=a,this.Ui)return this.Yi(e,n,o,a.size)})}).next(()=>s.result)}Yi(e,n,r,i){return r.documentReadCount<this.Wi?(Za()<=Ee.DEBUG&&Y("QueryEngine","SDK will not create cache indexes for query:",ho(n),"since it only creates cache indexes for collection contains","more than or equal to",this.Wi,"documents"),B.resolve()):(Za()<=Ee.DEBUG&&Y("QueryEngine","Query:",ho(n),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.Gi*i?(Za()<=Ee.DEBUG&&Y("QueryEngine","The SDK decides to create cache indexes for query:",ho(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,cr(n))):B.resolve())}ji(e,n){if(F0(n))return B.resolve(null);let r=cr(n);return this.indexManager.getIndexType(e,r).next(i=>i===0?null:(n.limit!==null&&i===1&&(n=tm(n,null,"F"),r=cr(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next(s=>{const o=we(...s);return this.zi.getDocuments(e,o).next(a=>this.indexManager.getMinOffset(e,r).next(l=>{const c=this.Zi(n,a);return this.Xi(n,c,o,l.readTime)?this.ji(e,tm(n,null,"F")):this.es(e,c,n,l)}))})))}Hi(e,n,r,i){return F0(n)||i.isEqual(ue.min())?B.resolve(null):this.zi.getDocuments(e,r).next(s=>{const o=this.Zi(n,s);return this.Xi(n,o,r,i)?B.resolve(null):(Za()<=Ee.DEBUG&&Y("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),ho(n)),this.es(e,o,n,WN(i,-1)).next(a=>a))})}Zi(e,n){let r=new Rt(jT(e));return n.forEach((i,s)=>{dd(e,s)&&(r=r.add(s))}),r}Xi(e,n,r,i){if(e.limit===null)return!1;if(r.size!==n.size)return!0;const s=e.limitType==="F"?n.last():n.first();return!!s&&(s.hasPendingWrites||s.version.compareTo(i)>0)}Ji(e,n,r){return Za()<=Ee.DEBUG&&Y("QueryEngine","Using full collection scan to execute query:",ho(n)),this.zi.getDocumentsMatchingQuery(e,n,zi.min(),r)}es(e,n,r,i){return this.zi.getDocumentsMatchingQuery(e,r,i).next(s=>(n.forEach(o=>{s=s.insert(o.key,o)}),s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mD{constructor(e,n,r,i){this.persistence=e,this.ts=n,this.serializer=i,this.ns=new Ye(Ae),this.rs=new _a(s=>Ug(s),$g),this.ss=new Map,this.os=e.getRemoteDocumentCache(),this.Qr=e.getTargetCache(),this.$r=e.getBundleCache(),this._s(r)}_s(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new iD(this.os,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.os.setIndexManager(this.indexManager),this.ts.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.ns))}}function gD(t,e,n,r){return new mD(t,e,n,r)}async function cC(t,e){const n=ce(t);return await n.persistence.runTransaction("Handle user change","readonly",r=>{let i;return n.mutationQueue.getAllMutationBatches(r).next(s=>(i=s,n._s(e),n.mutationQueue.getAllMutationBatches(r))).next(s=>{const o=[],a=[];let l=we();for(const c of i){o.push(c.batchId);for(const h of c.mutations)l=l.add(h.key)}for(const c of s){a.push(c.batchId);for(const h of c.mutations)l=l.add(h.key)}return n.localDocuments.getDocuments(r,l).next(c=>({us:c,removedBatchIds:o,addedBatchIds:a}))})})}function yD(t,e){const n=ce(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const i=e.batch.keys(),s=n.os.newChangeBuffer({trackRemovals:!0});return function(a,l,c,h){const f=c.batch,p=f.keys();let w=B.resolve();return p.forEach(E=>{w=w.next(()=>h.getEntry(l,E)).next(S=>{const P=c.docVersions.get(E);De(P!==null),S.version.compareTo(P)<0&&(f.applyToRemoteDocument(S,c),S.isValidDocument()&&(S.setReadTime(c.commitVersion),h.addEntry(S)))})}),w.next(()=>a.mutationQueue.removeMutationBatch(l,f))}(n,r,e,s).next(()=>s.apply(r)).next(()=>n.mutationQueue.performConsistencyCheck(r)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(a){let l=we();for(let c=0;c<a.mutationResults.length;++c)a.mutationResults[c].transformResults.length>0&&(l=l.add(a.batch.mutations[c].key));return l}(e))).next(()=>n.localDocuments.getDocuments(r,i))})}function hC(t){const e=ce(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.Qr.getLastRemoteSnapshotVersion(n))}function vD(t,e){const n=ce(t),r=e.snapshotVersion;let i=n.ns;return n.persistence.runTransaction("Apply remote event","readwrite-primary",s=>{const o=n.os.newChangeBuffer({trackRemovals:!0});i=n.ns;const a=[];e.targetChanges.forEach((h,f)=>{const p=i.get(f);if(!p)return;a.push(n.Qr.removeMatchingKeys(s,h.removedDocuments,f).next(()=>n.Qr.addMatchingKeys(s,h.addedDocuments,f)));let w=p.withSequenceNumber(s.currentSequenceNumber);e.targetMismatches.get(f)!==null?w=w.withResumeToken(Bt.EMPTY_BYTE_STRING,ue.min()).withLastLimboFreeSnapshotVersion(ue.min()):h.resumeToken.approximateByteSize()>0&&(w=w.withResumeToken(h.resumeToken,r)),i=i.insert(f,w),function(S,P,T){return S.resumeToken.approximateByteSize()===0||P.snapshotVersion.toMicroseconds()-S.snapshotVersion.toMicroseconds()>=3e8?!0:T.addedDocuments.size+T.modifiedDocuments.size+T.removedDocuments.size>0}(p,w,h)&&a.push(n.Qr.updateTargetData(s,w))});let l=Wr(),c=we();if(e.documentUpdates.forEach(h=>{e.resolvedLimboDocuments.has(h)&&a.push(n.persistence.referenceDelegate.updateLimboDocument(s,h))}),a.push(_D(s,o,e.documentUpdates).next(h=>{l=h.cs,c=h.ls})),!r.isEqual(ue.min())){const h=n.Qr.getLastRemoteSnapshotVersion(s).next(f=>n.Qr.setTargetsMetadata(s,s.currentSequenceNumber,r));a.push(h)}return B.waitFor(a).next(()=>o.apply(s)).next(()=>n.localDocuments.getLocalViewOfDocuments(s,l,c)).next(()=>l)}).then(s=>(n.ns=i,s))}function _D(t,e,n){let r=we(),i=we();return n.forEach(s=>r=r.add(s)),e.getEntries(t,r).next(s=>{let o=Wr();return n.forEach((a,l)=>{const c=s.get(a);l.isFoundDocument()!==c.isFoundDocument()&&(i=i.add(a)),l.isNoDocument()&&l.version.isEqual(ue.min())?(e.removeEntry(a,l.readTime),o=o.insert(a,l)):!c.isValidDocument()||l.version.compareTo(c.version)>0||l.version.compareTo(c.version)===0&&c.hasPendingWrites?(e.addEntry(l),o=o.insert(a,l)):Y("LocalStore","Ignoring outdated watch update for ",a,". Current version:",c.version," Watch version:",l.version)}),{cs:o,ls:i}})}function wD(t,e){const n=ce(t);return n.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function ED(t,e){const n=ce(t);return n.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return n.Qr.getTargetData(r,e).next(s=>s?(i=s,B.resolve(i)):n.Qr.allocateTargetId(r).next(o=>(i=new Ei(e,o,"TargetPurposeListen",r.currentSequenceNumber),n.Qr.addTargetData(r,i).next(()=>i))))}).then(r=>{const i=n.ns.get(r.targetId);return(i===null||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(n.ns=n.ns.insert(r.targetId,r),n.rs.set(e,r.targetId)),r})}async function om(t,e,n){const r=ce(t),i=r.ns.get(e),s=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",s,o=>r.persistence.referenceDelegate.removeTarget(o,i))}catch(o){if(!wu(o))throw o;Y("LocalStore",`Failed to update sequence numbers for target ${e}: ${o}`)}r.ns=r.ns.remove(e),r.rs.delete(i.target)}function Y0(t,e,n){const r=ce(t);let i=ue.min(),s=we();return r.persistence.runTransaction("Execute query","readwrite",o=>function(l,c,h){const f=ce(l),p=f.rs.get(h);return p!==void 0?B.resolve(f.ns.get(p)):f.Qr.getTargetData(c,h)}(r,o,cr(e)).next(a=>{if(a)return i=a.lastLimboFreeSnapshotVersion,r.Qr.getMatchingKeysForTargetId(o,a.targetId).next(l=>{s=l})}).next(()=>r.ts.getDocumentsMatchingQuery(o,e,n?i:ue.min(),n?s:we())).next(a=>(bD(r,f4(e),a),{documents:a,hs:s})))}function bD(t,e,n){let r=t.ss.get(e)||ue.min();n.forEach((i,s)=>{s.readTime.compareTo(r)>0&&(r=s.readTime)}),t.ss.set(e,r)}class J0{constructor(){this.activeTargetIds=_4()}As(e){this.activeTargetIds=this.activeTargetIds.add(e)}Rs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}ds(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class TD{constructor(){this.no=new J0,this.ro={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e){return this.no.As(e),this.ro[e]||"not-current"}updateQueryState(e,n,r){this.ro[e]=n}removeLocalQueryTarget(e){this.no.Rs(e)}isLocalQueryTarget(e){return this.no.activeTargetIds.has(e)}clearQueryState(e){delete this.ro[e]}getAllActiveQueryTargets(){return this.no.activeTargetIds}isActiveQueryTarget(e){return this.no.activeTargetIds.has(e)}start(){return this.no=new J0,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CD{io(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Z0{constructor(){this.so=()=>this.oo(),this._o=()=>this.ao(),this.uo=[],this.co()}io(e){this.uo.push(e)}shutdown(){window.removeEventListener("online",this.so),window.removeEventListener("offline",this._o)}co(){window.addEventListener("online",this.so),window.addEventListener("offline",this._o)}oo(){Y("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.uo)e(0)}ao(){Y("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.uo)e(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let mc=null;function Pf(){return mc===null?mc=function(){return 268435456+Math.round(2147483648*Math.random())}():mc++,"0x"+mc.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ID={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SD{constructor(e){this.lo=e.lo,this.ho=e.ho}Po(e){this.Io=e}To(e){this.Eo=e}Ao(e){this.Ro=e}onMessage(e){this.Vo=e}close(){this.ho()}send(e){this.lo(e)}mo(){this.Io()}fo(){this.Eo()}po(e){this.Ro(e)}yo(e){this.Vo(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ut="WebChannelConnection";class AD extends class{constructor(n){this.databaseInfo=n,this.databaseId=n.databaseId;const r=n.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),s=encodeURIComponent(this.databaseId.database);this.wo=r+"://"+n.host,this.So=`projects/${i}/databases/${s}`,this.bo=this.databaseId.database==="(default)"?`project_id=${i}`:`project_id=${i}&database_id=${s}`}get Do(){return!1}Co(n,r,i,s,o){const a=Pf(),l=this.vo(n,r.toUriEncodedString());Y("RestConnection",`Sending RPC '${n}' ${a}:`,l,i);const c={"google-cloud-resource-prefix":this.So,"x-goog-request-params":this.bo};return this.Fo(c,s,o),this.Mo(n,l,c,i).then(h=>(Y("RestConnection",`Received RPC '${n}' ${a}: `,h),h),h=>{throw Zo("RestConnection",`RPC '${n}' ${a} failed with error: `,h,"url: ",l,"request:",i),h})}xo(n,r,i,s,o,a){return this.Co(n,r,i,s,o)}Fo(n,r,i){n["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+ya}(),n["Content-Type"]="text/plain",this.databaseInfo.appId&&(n["X-Firebase-GMPID"]=this.databaseInfo.appId),r&&r.headers.forEach((s,o)=>n[o]=s),i&&i.headers.forEach((s,o)=>n[o]=s)}vo(n,r){const i=ID[n];return`${this.wo}/v1/${r}:${i}`}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Mo(e,n,r,i){const s=Pf();return new Promise((o,a)=>{const l=new ET;l.setWithCredentials(!0),l.listenOnce(TT.COMPLETE,()=>{try{switch(l.getLastErrorCode()){case Uc.NO_ERROR:const h=l.getResponseJson();Y(Ut,`XHR for RPC '${e}' ${s} received:`,JSON.stringify(h)),o(h);break;case Uc.TIMEOUT:Y(Ut,`RPC '${e}' ${s} timed out`),a(new J(j.DEADLINE_EXCEEDED,"Request time out"));break;case Uc.HTTP_ERROR:const f=l.getStatus();if(Y(Ut,`RPC '${e}' ${s} failed with status:`,f,"response text:",l.getResponseText()),f>0){let p=l.getResponseJson();Array.isArray(p)&&(p=p[0]);const w=p==null?void 0:p.error;if(w&&w.status&&w.message){const E=function(P){const T=P.toLowerCase().replace(/_/g,"-");return Object.values(j).indexOf(T)>=0?T:j.UNKNOWN}(w.status);a(new J(E,w.message))}else a(new J(j.UNKNOWN,"Server responded with status "+l.getStatus()))}else a(new J(j.UNAVAILABLE,"Connection failed."));break;default:le()}}finally{Y(Ut,`RPC '${e}' ${s} completed.`)}});const c=JSON.stringify(i);Y(Ut,`RPC '${e}' ${s} sending request:`,i),l.send(n,"POST",c,r,15)})}Oo(e,n,r){const i=Pf(),s=[this.wo,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=ST(),a=IT(),l={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},c=this.longPollingOptions.timeoutSeconds;c!==void 0&&(l.longPollingTimeout=Math.round(1e3*c)),this.useFetchStreams&&(l.xmlHttpFactory=new bT({})),this.Fo(l.initMessageHeaders,n,r),l.encodeInitMessageHeaders=!0;const h=s.join("");Y(Ut,`Creating RPC '${e}' stream ${i}: ${h}`,l);const f=o.createWebChannel(h,l);let p=!1,w=!1;const E=new SD({lo:P=>{w?Y(Ut,`Not sending because RPC '${e}' stream ${i} is closed:`,P):(p||(Y(Ut,`Opening RPC '${e}' stream ${i} transport.`),f.open(),p=!0),Y(Ut,`RPC '${e}' stream ${i} sending:`,P),f.send(P))},ho:()=>f.close()}),S=(P,T,_)=>{P.listen(T,C=>{try{_(C)}catch(N){setTimeout(()=>{throw N},0)}})};return S(f,cl.EventType.OPEN,()=>{w||(Y(Ut,`RPC '${e}' stream ${i} transport opened.`),E.mo())}),S(f,cl.EventType.CLOSE,()=>{w||(w=!0,Y(Ut,`RPC '${e}' stream ${i} transport closed`),E.po())}),S(f,cl.EventType.ERROR,P=>{w||(w=!0,Zo(Ut,`RPC '${e}' stream ${i} transport errored:`,P),E.po(new J(j.UNAVAILABLE,"The operation could not be completed")))}),S(f,cl.EventType.MESSAGE,P=>{var T;if(!w){const _=P.data[0];De(!!_);const C=_,N=C.error||((T=C[0])===null||T===void 0?void 0:T.error);if(N){Y(Ut,`RPC '${e}' stream ${i} received error:`,N);const F=N.status;let z=function(b){const I=ot[b];if(I!==void 0)return eC(I)}(F),g=N.message;z===void 0&&(z=j.INTERNAL,g="Unknown error status: "+F+" with message "+N.message),w=!0,E.po(new J(z,g)),f.close()}else Y(Ut,`RPC '${e}' stream ${i} received:`,_),E.yo(_)}}),S(a,CT.STAT_EVENT,P=>{P.stat===Qp.PROXY?Y(Ut,`RPC '${e}' stream ${i} detected buffering proxy`):P.stat===Qp.NOPROXY&&Y(Ut,`RPC '${e}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{E.fo()},0),E}}function Rf(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gd(t){return new U4(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dC{constructor(e,n,r=1e3,i=1.5,s=6e4){this.oi=e,this.timerId=n,this.No=r,this.Lo=i,this.Bo=s,this.ko=0,this.qo=null,this.Qo=Date.now(),this.reset()}reset(){this.ko=0}Ko(){this.ko=this.Bo}$o(e){this.cancel();const n=Math.floor(this.ko+this.Uo()),r=Math.max(0,Date.now()-this.Qo),i=Math.max(0,n-r);i>0&&Y("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.ko} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.qo=this.oi.enqueueAfterDelay(this.timerId,i,()=>(this.Qo=Date.now(),e())),this.ko*=this.Lo,this.ko<this.No&&(this.ko=this.No),this.ko>this.Bo&&(this.ko=this.Bo)}Wo(){this.qo!==null&&(this.qo.skipDelay(),this.qo=null)}cancel(){this.qo!==null&&(this.qo.cancel(),this.qo=null)}Uo(){return(Math.random()-.5)*this.ko}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fC{constructor(e,n,r,i,s,o,a,l){this.oi=e,this.Go=r,this.zo=i,this.connection=s,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=a,this.listener=l,this.state=0,this.jo=0,this.Ho=null,this.Jo=null,this.stream=null,this.Yo=new dC(e,n)}Zo(){return this.state===1||this.state===5||this.Xo()}Xo(){return this.state===2||this.state===3}start(){this.state!==4?this.auth():this.e_()}async stop(){this.Zo()&&await this.close(0)}t_(){this.state=0,this.Yo.reset()}n_(){this.Xo()&&this.Ho===null&&(this.Ho=this.oi.enqueueAfterDelay(this.Go,6e4,()=>this.r_()))}i_(e){this.s_(),this.stream.send(e)}async r_(){if(this.Xo())return this.close(0)}s_(){this.Ho&&(this.Ho.cancel(),this.Ho=null)}o_(){this.Jo&&(this.Jo.cancel(),this.Jo=null)}async close(e,n){this.s_(),this.o_(),this.Yo.cancel(),this.jo++,e!==4?this.Yo.reset():n&&n.code===j.RESOURCE_EXHAUSTED?(Hr(n.toString()),Hr("Using maximum backoff delay to prevent overloading the backend."),this.Yo.Ko()):n&&n.code===j.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.__(),this.stream.close(),this.stream=null),this.state=e,await this.listener.Ao(n)}__(){}auth(){this.state=1;const e=this.a_(this.jo),n=this.jo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.jo===n&&this.u_(r,i)},r=>{e(()=>{const i=new J(j.UNKNOWN,"Fetching auth token failed: "+r.message);return this.c_(i)})})}u_(e,n){const r=this.a_(this.jo);this.stream=this.l_(e,n),this.stream.Po(()=>{r(()=>this.listener.Po())}),this.stream.To(()=>{r(()=>(this.state=2,this.Jo=this.oi.enqueueAfterDelay(this.zo,1e4,()=>(this.Xo()&&(this.state=3),Promise.resolve())),this.listener.To()))}),this.stream.Ao(i=>{r(()=>this.c_(i))}),this.stream.onMessage(i=>{r(()=>this.onMessage(i))})}e_(){this.state=5,this.Yo.$o(async()=>{this.state=0,this.start()})}c_(e){return Y("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}a_(e){return n=>{this.oi.enqueueAndForget(()=>this.jo===e?n():(Y("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class xD extends fC{constructor(e,n,r,i,s,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,i,o),this.serializer=s}l_(e,n){return this.connection.Oo("Listen",e,n)}onMessage(e){this.Yo.reset();const n=j4(this.serializer,e),r=function(s){if(!("targetChange"in s))return ue.min();const o=s.targetChange;return o.targetIds&&o.targetIds.length?ue.min():o.readTime?hr(o.readTime):ue.min()}(e);return this.listener.h_(n,r)}P_(e){const n={};n.database=sm(this.serializer),n.addTarget=function(s,o){let a;const l=o.target;if(a=Zp(l)?{documents:H4(s,l)}:{query:W4(s,l)._t},a.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){a.resumeToken=rC(s,o.resumeToken);const c=nm(s,o.expectedCount);c!==null&&(a.expectedCount=c)}else if(o.snapshotVersion.compareTo(ue.min())>0){a.readTime=Rh(s,o.snapshotVersion.toTimestamp());const c=nm(s,o.expectedCount);c!==null&&(a.expectedCount=c)}return a}(this.serializer,e);const r=G4(this.serializer,e);r&&(n.labels=r),this.i_(n)}I_(e){const n={};n.database=sm(this.serializer),n.removeTarget=e,this.i_(n)}}class kD extends fC{constructor(e,n,r,i,s,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,i,o),this.serializer=s,this.T_=!1}get E_(){return this.T_}start(){this.T_=!1,this.lastStreamToken=void 0,super.start()}__(){this.T_&&this.d_([])}l_(e,n){return this.connection.Oo("Write",e,n)}onMessage(e){if(De(!!e.streamToken),this.lastStreamToken=e.streamToken,this.T_){this.Yo.reset();const n=B4(e.writeResults,e.commitTime),r=hr(e.commitTime);return this.listener.A_(r,n)}return De(!e.writeResults||e.writeResults.length===0),this.T_=!0,this.listener.R_()}V_(){const e={};e.database=sm(this.serializer),this.i_(e)}d_(e){const n={streamToken:this.lastStreamToken,writes:e.map(r=>z4(this.serializer,r))};this.i_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PD extends class{}{constructor(e,n,r,i){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=i,this.m_=!1}f_(){if(this.m_)throw new J(j.FAILED_PRECONDITION,"The client has already been terminated.")}Co(e,n,r,i){return this.f_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,o])=>this.connection.Co(e,rm(n,r),i,s,o)).catch(s=>{throw s.name==="FirebaseError"?(s.code===j.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new J(j.UNKNOWN,s.toString())})}xo(e,n,r,i,s){return this.f_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,a])=>this.connection.xo(e,rm(n,r),i,o,a,s)).catch(o=>{throw o.name==="FirebaseError"?(o.code===j.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new J(j.UNKNOWN,o.toString())})}terminate(){this.m_=!0,this.connection.terminate()}}class RD{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.g_=0,this.p_=null,this.y_=!0}w_(){this.g_===0&&(this.S_("Unknown"),this.p_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.p_=null,this.b_("Backend didn't respond within 10 seconds."),this.S_("Offline"),Promise.resolve())))}D_(e){this.state==="Online"?this.S_("Unknown"):(this.g_++,this.g_>=1&&(this.C_(),this.b_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.S_("Offline")))}set(e){this.C_(),this.g_=0,e==="Online"&&(this.y_=!1),this.S_(e)}S_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}b_(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.y_?(Hr(n),this.y_=!1):Y("OnlineStateTracker",n)}C_(){this.p_!==null&&(this.p_.cancel(),this.p_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OD{constructor(e,n,r,i,s){this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.v_=[],this.F_=new Map,this.M_=new Set,this.x_=[],this.O_=s,this.O_.io(o=>{r.enqueueAndForget(async()=>{Ws(this)&&(Y("RemoteStore","Restarting streams for network reachability change."),await async function(l){const c=ce(l);c.M_.add(4),await Cu(c),c.N_.set("Unknown"),c.M_.delete(4),await yd(c)}(this))})}),this.N_=new RD(r,i)}}async function yd(t){if(Ws(t))for(const e of t.x_)await e(!0)}async function Cu(t){for(const e of t.x_)await e(!1)}function pC(t,e){const n=ce(t);n.F_.has(e.targetId)||(n.F_.set(e.targetId,e),Qg(n)?Kg(n):wa(n).Xo()&&Gg(n,e))}function qg(t,e){const n=ce(t),r=wa(n);n.F_.delete(e),r.Xo()&&mC(n,e),n.F_.size===0&&(r.Xo()?r.n_():Ws(n)&&n.N_.set("Unknown"))}function Gg(t,e){if(t.L_.xe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(ue.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}wa(t).P_(e)}function mC(t,e){t.L_.xe(e),wa(t).I_(e)}function Kg(t){t.L_=new N4({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),ot:e=>t.F_.get(e)||null,tt:()=>t.datastore.serializer.databaseId}),wa(t).start(),t.N_.w_()}function Qg(t){return Ws(t)&&!wa(t).Zo()&&t.F_.size>0}function Ws(t){return ce(t).M_.size===0}function gC(t){t.L_=void 0}async function LD(t){t.N_.set("Online")}async function ND(t){t.F_.forEach((e,n)=>{Gg(t,e)})}async function DD(t,e){gC(t),Qg(t)?(t.N_.D_(e),Kg(t)):t.N_.set("Unknown")}async function MD(t,e,n){if(t.N_.set("Online"),e instanceof nC&&e.state===2&&e.cause)try{await async function(i,s){const o=s.cause;for(const a of s.targetIds)i.F_.has(a)&&(await i.remoteSyncer.rejectListen(a,o),i.F_.delete(a),i.L_.removeTarget(a))}(t,e)}catch(r){Y("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),await Oh(t,r)}else if(e instanceof jc?t.L_.Ke(e):e instanceof tC?t.L_.He(e):t.L_.We(e),!n.isEqual(ue.min()))try{const r=await hC(t.localStore);n.compareTo(r)>=0&&await function(s,o){const a=s.L_.rt(o);return a.targetChanges.forEach((l,c)=>{if(l.resumeToken.approximateByteSize()>0){const h=s.F_.get(c);h&&s.F_.set(c,h.withResumeToken(l.resumeToken,o))}}),a.targetMismatches.forEach((l,c)=>{const h=s.F_.get(l);if(!h)return;s.F_.set(l,h.withResumeToken(Bt.EMPTY_BYTE_STRING,h.snapshotVersion)),mC(s,l);const f=new Ei(h.target,l,c,h.sequenceNumber);Gg(s,f)}),s.remoteSyncer.applyRemoteEvent(a)}(t,n)}catch(r){Y("RemoteStore","Failed to raise snapshot:",r),await Oh(t,r)}}async function Oh(t,e,n){if(!wu(e))throw e;t.M_.add(1),await Cu(t),t.N_.set("Offline"),n||(n=()=>hC(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{Y("RemoteStore","Retrying IndexedDB access"),await n(),t.M_.delete(1),await yd(t)})}function yC(t,e){return e().catch(n=>Oh(t,n,e))}async function vd(t){const e=ce(t),n=Hi(e);let r=e.v_.length>0?e.v_[e.v_.length-1].batchId:-1;for(;VD(e);)try{const i=await wD(e.localStore,r);if(i===null){e.v_.length===0&&n.n_();break}r=i.batchId,UD(e,i)}catch(i){await Oh(e,i)}vC(e)&&_C(e)}function VD(t){return Ws(t)&&t.v_.length<10}function UD(t,e){t.v_.push(e);const n=Hi(t);n.Xo()&&n.E_&&n.d_(e.mutations)}function vC(t){return Ws(t)&&!Hi(t).Zo()&&t.v_.length>0}function _C(t){Hi(t).start()}async function $D(t){Hi(t).V_()}async function FD(t){const e=Hi(t);for(const n of t.v_)e.d_(n.mutations)}async function jD(t,e,n){const r=t.v_.shift(),i=Fg.from(r,e,n);await yC(t,()=>t.remoteSyncer.applySuccessfulWrite(i)),await vd(t)}async function zD(t,e){e&&Hi(t).E_&&await async function(r,i){if(function(o){return R4(o)&&o!==j.ABORTED}(i.code)){const s=r.v_.shift();Hi(r).t_(),await yC(r,()=>r.remoteSyncer.rejectFailedWrite(s.batchId,i)),await vd(r)}}(t,e),vC(t)&&_C(t)}async function ew(t,e){const n=ce(t);n.asyncQueue.verifyOperationInProgress(),Y("RemoteStore","RemoteStore received new credentials");const r=Ws(n);n.M_.add(3),await Cu(n),r&&n.N_.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.M_.delete(3),await yd(n)}async function BD(t,e){const n=ce(t);e?(n.M_.delete(2),await yd(n)):e||(n.M_.add(2),await Cu(n),n.N_.set("Unknown"))}function wa(t){return t.B_||(t.B_=function(n,r,i){const s=ce(n);return s.f_(),new xD(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(t.datastore,t.asyncQueue,{Po:LD.bind(null,t),To:ND.bind(null,t),Ao:DD.bind(null,t),h_:MD.bind(null,t)}),t.x_.push(async e=>{e?(t.B_.t_(),Qg(t)?Kg(t):t.N_.set("Unknown")):(await t.B_.stop(),gC(t))})),t.B_}function Hi(t){return t.k_||(t.k_=function(n,r,i){const s=ce(n);return s.f_(),new kD(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(t.datastore,t.asyncQueue,{Po:()=>Promise.resolve(),To:$D.bind(null,t),Ao:zD.bind(null,t),R_:FD.bind(null,t),A_:jD.bind(null,t)}),t.x_.push(async e=>{e?(t.k_.t_(),await vd(t)):(await t.k_.stop(),t.v_.length>0&&(Y("RemoteStore",`Stopping write stream with ${t.v_.length} pending writes`),t.v_=[]))})),t.k_}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xg{constructor(e,n,r,i,s){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=i,this.removalCallback=s,this.deferred=new Ni,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,r,i,s){const o=Date.now()+r,a=new Xg(e,n,o,i,s);return a.start(r),a}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new J(j.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Yg(t,e){if(Hr("AsyncQueue",`${e}: ${t}`),wu(t))return new J(j.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fo{constructor(e){this.comparator=e?(n,r)=>e(n,r)||ne.comparator(n.key,r.key):(n,r)=>ne.comparator(n.key,r.key),this.keyedMap=hl(),this.sortedSet=new Ye(this.comparator)}static emptySet(e){return new Fo(e.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,r)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof Fo)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){const i=n.getNext().key,s=r.getNext().key;if(!i.isEqual(s))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const r=new Fo;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tw{constructor(){this.q_=new Ye(ne.comparator)}track(e){const n=e.doc.key,r=this.q_.get(n);r?e.type!==0&&r.type===3?this.q_=this.q_.insert(n,e):e.type===3&&r.type!==1?this.q_=this.q_.insert(n,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.q_=this.q_.insert(n,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.q_=this.q_.insert(n,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.q_=this.q_.remove(n):e.type===1&&r.type===2?this.q_=this.q_.insert(n,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.q_=this.q_.insert(n,{type:2,doc:e.doc}):le():this.q_=this.q_.insert(n,e)}Q_(){const e=[];return this.q_.inorderTraversal((n,r)=>{e.push(r)}),e}}class ia{constructor(e,n,r,i,s,o,a,l,c){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=s,this.fromCache=o,this.syncStateChanged=a,this.excludesMetadataChanges=l,this.hasCachedResults=c}static fromInitialDocuments(e,n,r,i,s){const o=[];return n.forEach(a=>{o.push({type:0,doc:a})}),new ia(e,n,Fo.emptySet(n),o,r,i,!0,!1,s)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&hd(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let i=0;i<n.length;i++)if(n[i].type!==r[i].type||!n[i].doc.isEqual(r[i].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HD{constructor(){this.K_=void 0,this.U_=[]}W_(){return this.U_.some(e=>e.G_())}}class WD{constructor(){this.queries=new _a(e=>FT(e),hd),this.onlineState="Unknown",this.z_=new Set}}async function qD(t,e){const n=ce(t);let r=3;const i=e.query;let s=n.queries.get(i);s?!s.W_()&&e.G_()&&(r=2):(s=new HD,r=e.G_()?0:1);try{switch(r){case 0:s.K_=await n.onListen(i,!0);break;case 1:s.K_=await n.onListen(i,!1);break;case 2:await n.onFirstRemoteStoreListen(i)}}catch(o){const a=Yg(o,`Initialization of query '${ho(e.query)}' failed`);return void e.onError(a)}n.queries.set(i,s),s.U_.push(e),e.j_(n.onlineState),s.K_&&e.H_(s.K_)&&Jg(n)}async function GD(t,e){const n=ce(t),r=e.query;let i=3;const s=n.queries.get(r);if(s){const o=s.U_.indexOf(e);o>=0&&(s.U_.splice(o,1),s.U_.length===0?i=e.G_()?0:1:!s.W_()&&e.G_()&&(i=2))}switch(i){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function KD(t,e){const n=ce(t);let r=!1;for(const i of e){const s=i.query,o=n.queries.get(s);if(o){for(const a of o.U_)a.H_(i)&&(r=!0);o.K_=i}}r&&Jg(n)}function QD(t,e,n){const r=ce(t),i=r.queries.get(e);if(i)for(const s of i.U_)s.onError(n);r.queries.delete(e)}function Jg(t){t.z_.forEach(e=>{e.next()})}var am,nw;(nw=am||(am={})).J_="default",nw.Cache="cache";class XD{constructor(e,n,r){this.query=e,this.Y_=n,this.Z_=!1,this.X_=null,this.onlineState="Unknown",this.options=r||{}}H_(e){if(!this.options.includeMetadataChanges){const r=[];for(const i of e.docChanges)i.type!==3&&r.push(i);e=new ia(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.Z_?this.ea(e)&&(this.Y_.next(e),n=!0):this.ta(e,this.onlineState)&&(this.na(e),n=!0),this.X_=e,n}onError(e){this.Y_.error(e)}j_(e){this.onlineState=e;let n=!1;return this.X_&&!this.Z_&&this.ta(this.X_,e)&&(this.na(this.X_),n=!0),n}ta(e,n){if(!e.fromCache||!this.G_())return!0;const r=n!=="Offline";return(!this.options.ra||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}ea(e){if(e.docChanges.length>0)return!0;const n=this.X_&&this.X_.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}na(e){e=ia.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Z_=!0,this.Y_.next(e)}G_(){return this.options.source!==am.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wC{constructor(e){this.key=e}}class EC{constructor(e){this.key=e}}class YD{constructor(e,n){this.query=e,this.la=n,this.ha=null,this.hasCachedResults=!1,this.current=!1,this.Pa=we(),this.mutatedKeys=we(),this.Ia=jT(e),this.Ta=new Fo(this.Ia)}get Ea(){return this.la}da(e,n){const r=n?n.Aa:new tw,i=n?n.Ta:this.Ta;let s=n?n.mutatedKeys:this.mutatedKeys,o=i,a=!1;const l=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,c=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((h,f)=>{const p=i.get(h),w=dd(this.query,f)?f:null,E=!!p&&this.mutatedKeys.has(p.key),S=!!w&&(w.hasLocalMutations||this.mutatedKeys.has(w.key)&&w.hasCommittedMutations);let P=!1;p&&w?p.data.isEqual(w.data)?E!==S&&(r.track({type:3,doc:w}),P=!0):this.Ra(p,w)||(r.track({type:2,doc:w}),P=!0,(l&&this.Ia(w,l)>0||c&&this.Ia(w,c)<0)&&(a=!0)):!p&&w?(r.track({type:0,doc:w}),P=!0):p&&!w&&(r.track({type:1,doc:p}),P=!0,(l||c)&&(a=!0)),P&&(w?(o=o.add(w),s=S?s.add(h):s.delete(h)):(o=o.delete(h),s=s.delete(h)))}),this.query.limit!==null)for(;o.size>this.query.limit;){const h=this.query.limitType==="F"?o.last():o.first();o=o.delete(h.key),s=s.delete(h.key),r.track({type:1,doc:h})}return{Ta:o,Aa:r,Xi:a,mutatedKeys:s}}Ra(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r,i){const s=this.Ta;this.Ta=e.Ta,this.mutatedKeys=e.mutatedKeys;const o=e.Aa.Q_();o.sort((h,f)=>function(w,E){const S=P=>{switch(P){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return le()}};return S(w)-S(E)}(h.type,f.type)||this.Ia(h.doc,f.doc)),this.Va(r),i=i!=null&&i;const a=n&&!i?this.ma():[],l=this.Pa.size===0&&this.current&&!i?1:0,c=l!==this.ha;return this.ha=l,o.length!==0||c?{snapshot:new ia(this.query,e.Ta,s,o,e.mutatedKeys,l===0,c,!1,!!r&&r.resumeToken.approximateByteSize()>0),fa:a}:{fa:a}}j_(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({Ta:this.Ta,Aa:new tw,mutatedKeys:this.mutatedKeys,Xi:!1},!1)):{fa:[]}}ga(e){return!this.la.has(e)&&!!this.Ta.has(e)&&!this.Ta.get(e).hasLocalMutations}Va(e){e&&(e.addedDocuments.forEach(n=>this.la=this.la.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.la=this.la.delete(n)),this.current=e.current)}ma(){if(!this.current)return[];const e=this.Pa;this.Pa=we(),this.Ta.forEach(r=>{this.ga(r.key)&&(this.Pa=this.Pa.add(r.key))});const n=[];return e.forEach(r=>{this.Pa.has(r)||n.push(new EC(r))}),this.Pa.forEach(r=>{e.has(r)||n.push(new wC(r))}),n}pa(e){this.la=e.hs,this.Pa=we();const n=this.da(e.documents);return this.applyChanges(n,!0)}ya(){return ia.fromInitialDocuments(this.query,this.Ta,this.mutatedKeys,this.ha===0,this.hasCachedResults)}}class JD{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}}class ZD{constructor(e){this.key=e,this.wa=!1}}class eM{constructor(e,n,r,i,s,o){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=i,this.currentUser=s,this.maxConcurrentLimboResolutions=o,this.Sa={},this.ba=new _a(a=>FT(a),hd),this.Da=new Map,this.Ca=new Set,this.va=new Ye(ne.comparator),this.Fa=new Map,this.Ma=new Bg,this.xa={},this.Oa=new Map,this.Na=ra.Ln(),this.onlineState="Unknown",this.La=void 0}get isPrimaryClient(){return this.La===!0}}async function tM(t,e,n=!0){const r=AC(t);let i;const s=r.ba.get(e);return s?(r.sharedClientState.addLocalQueryTarget(s.targetId),i=s.view.ya()):i=await bC(r,e,n,!0),i}async function nM(t,e){const n=AC(t);await bC(n,e,!0,!1)}async function bC(t,e,n,r){const i=await ED(t.localStore,cr(e)),s=i.targetId,o=n?t.sharedClientState.addLocalQueryTarget(s):"not-current";let a;return r&&(a=await rM(t,e,s,o==="current",i.resumeToken)),t.isPrimaryClient&&n&&pC(t.remoteStore,i),a}async function rM(t,e,n,r,i){t.Ba=(f,p,w)=>async function(S,P,T,_){let C=P.view.da(T);C.Xi&&(C=await Y0(S.localStore,P.query,!1).then(({documents:g})=>P.view.da(g,C)));const N=_&&_.targetChanges.get(P.targetId),F=_&&_.targetMismatches.get(P.targetId)!=null,z=P.view.applyChanges(C,S.isPrimaryClient,N,F);return iw(S,P.targetId,z.fa),z.snapshot}(t,f,p,w);const s=await Y0(t.localStore,e,!0),o=new YD(e,s.hs),a=o.da(s.documents),l=Tu.createSynthesizedTargetChangeForCurrentChange(n,r&&t.onlineState!=="Offline",i),c=o.applyChanges(a,t.isPrimaryClient,l);iw(t,n,c.fa);const h=new JD(e,n,o);return t.ba.set(e,h),t.Da.has(n)?t.Da.get(n).push(e):t.Da.set(n,[e]),c.snapshot}async function iM(t,e,n){const r=ce(t),i=r.ba.get(e),s=r.Da.get(i.targetId);if(s.length>1)return r.Da.set(i.targetId,s.filter(o=>!hd(o,e))),void r.ba.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||await om(r.localStore,i.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(i.targetId),n&&qg(r.remoteStore,i.targetId),lm(r,i.targetId)}).catch(_u)):(lm(r,i.targetId),await om(r.localStore,i.targetId,!0))}async function sM(t,e){const n=ce(t),r=n.ba.get(e),i=n.Da.get(r.targetId);n.isPrimaryClient&&i.length===1&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),qg(n.remoteStore,r.targetId))}async function oM(t,e,n){const r=fM(t);try{const i=await function(o,a){const l=ce(o),c=mt.now(),h=a.reduce((w,E)=>w.add(E.key),we());let f,p;return l.persistence.runTransaction("Locally write mutations","readwrite",w=>{let E=Wr(),S=we();return l.os.getEntries(w,h).next(P=>{E=P,E.forEach((T,_)=>{_.isValidDocument()||(S=S.add(T))})}).next(()=>l.localDocuments.getOverlayedDocuments(w,E)).next(P=>{f=P;const T=[];for(const _ of a){const C=S4(_,f.get(_.key).overlayedDocument);C!=null&&T.push(new Hs(_.key,C,RT(C.value.mapValue),Ur.exists(!0)))}return l.mutationQueue.addMutationBatch(w,c,T,a)}).next(P=>{p=P;const T=P.applyToLocalDocumentSet(f,S);return l.documentOverlayCache.saveOverlays(w,P.batchId,T)})}).then(()=>({batchId:p.batchId,changes:BT(f)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),function(o,a,l){let c=o.xa[o.currentUser.toKey()];c||(c=new Ye(Ae)),c=c.insert(a,l),o.xa[o.currentUser.toKey()]=c}(r,i.batchId,n),await Iu(r,i.changes),await vd(r.remoteStore)}catch(i){const s=Yg(i,"Failed to persist write");n.reject(s)}}async function TC(t,e){const n=ce(t);try{const r=await vD(n.localStore,e);e.targetChanges.forEach((i,s)=>{const o=n.Fa.get(s);o&&(De(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1),i.addedDocuments.size>0?o.wa=!0:i.modifiedDocuments.size>0?De(o.wa):i.removedDocuments.size>0&&(De(o.wa),o.wa=!1))}),await Iu(n,r,e)}catch(r){await _u(r)}}function rw(t,e,n){const r=ce(t);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){const i=[];r.ba.forEach((s,o)=>{const a=o.view.j_(e);a.snapshot&&i.push(a.snapshot)}),function(o,a){const l=ce(o);l.onlineState=a;let c=!1;l.queries.forEach((h,f)=>{for(const p of f.U_)p.j_(a)&&(c=!0)}),c&&Jg(l)}(r.eventManager,e),i.length&&r.Sa.h_(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function aM(t,e,n){const r=ce(t);r.sharedClientState.updateQueryState(e,"rejected",n);const i=r.Fa.get(e),s=i&&i.key;if(s){let o=new Ye(ne.comparator);o=o.insert(s,jt.newNoDocument(s,ue.min()));const a=we().add(s),l=new md(ue.min(),new Map,new Ye(Ae),o,a);await TC(r,l),r.va=r.va.remove(s),r.Fa.delete(e),Zg(r)}else await om(r.localStore,e,!1).then(()=>lm(r,e,n)).catch(_u)}async function lM(t,e){const n=ce(t),r=e.batch.batchId;try{const i=await yD(n.localStore,e);IC(n,r,null),CC(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await Iu(n,i)}catch(i){await _u(i)}}async function uM(t,e,n){const r=ce(t);try{const i=await function(o,a){const l=ce(o);return l.persistence.runTransaction("Reject batch","readwrite-primary",c=>{let h;return l.mutationQueue.lookupMutationBatch(c,a).next(f=>(De(f!==null),h=f.keys(),l.mutationQueue.removeMutationBatch(c,f))).next(()=>l.mutationQueue.performConsistencyCheck(c)).next(()=>l.documentOverlayCache.removeOverlaysForBatchId(c,h,a)).next(()=>l.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(c,h)).next(()=>l.localDocuments.getDocuments(c,h))})}(r.localStore,e);IC(r,e,n),CC(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),await Iu(r,i)}catch(i){await _u(i)}}function CC(t,e){(t.Oa.get(e)||[]).forEach(n=>{n.resolve()}),t.Oa.delete(e)}function IC(t,e,n){const r=ce(t);let i=r.xa[r.currentUser.toKey()];if(i){const s=i.get(e);s&&(n?s.reject(n):s.resolve(),i=i.remove(e)),r.xa[r.currentUser.toKey()]=i}}function lm(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const r of t.Da.get(e))t.ba.delete(r),n&&t.Sa.ka(r,n);t.Da.delete(e),t.isPrimaryClient&&t.Ma.Vr(e).forEach(r=>{t.Ma.containsKey(r)||SC(t,r)})}function SC(t,e){t.Ca.delete(e.path.canonicalString());const n=t.va.get(e);n!==null&&(qg(t.remoteStore,n),t.va=t.va.remove(e),t.Fa.delete(n),Zg(t))}function iw(t,e,n){for(const r of n)r instanceof wC?(t.Ma.addReference(r.key,e),cM(t,r)):r instanceof EC?(Y("SyncEngine","Document no longer in limbo: "+r.key),t.Ma.removeReference(r.key,e),t.Ma.containsKey(r.key)||SC(t,r.key)):le()}function cM(t,e){const n=e.key,r=n.path.canonicalString();t.va.get(n)||t.Ca.has(r)||(Y("SyncEngine","New document in limbo: "+n),t.Ca.add(r),Zg(t))}function Zg(t){for(;t.Ca.size>0&&t.va.size<t.maxConcurrentLimboResolutions;){const e=t.Ca.values().next().value;t.Ca.delete(e);const n=new ne(Fe.fromString(e)),r=t.Na.next();t.Fa.set(r,new ZD(n)),t.va=t.va.insert(n,r),pC(t.remoteStore,new Ei(cr(UT(n.path)),r,"TargetPurposeLimboResolution",Ng.oe))}}async function Iu(t,e,n){const r=ce(t),i=[],s=[],o=[];r.ba.isEmpty()||(r.ba.forEach((a,l)=>{o.push(r.Ba(l,e,n).then(c=>{if((c||n)&&r.isPrimaryClient){const h=c&&!c.fromCache;r.sharedClientState.updateQueryState(l.targetId,h?"current":"not-current")}if(c){i.push(c);const h=Wg.Ki(l.targetId,c);s.push(h)}}))}),await Promise.all(o),r.Sa.h_(i),await async function(l,c){const h=ce(l);try{await h.persistence.runTransaction("notifyLocalViewChanges","readwrite",f=>B.forEach(c,p=>B.forEach(p.qi,w=>h.persistence.referenceDelegate.addReference(f,p.targetId,w)).next(()=>B.forEach(p.Qi,w=>h.persistence.referenceDelegate.removeReference(f,p.targetId,w)))))}catch(f){if(!wu(f))throw f;Y("LocalStore","Failed to update sequence numbers: "+f)}for(const f of c){const p=f.targetId;if(!f.fromCache){const w=h.ns.get(p),E=w.snapshotVersion,S=w.withLastLimboFreeSnapshotVersion(E);h.ns=h.ns.insert(p,S)}}}(r.localStore,s))}async function hM(t,e){const n=ce(t);if(!n.currentUser.isEqual(e)){Y("SyncEngine","User change. New user:",e.toKey());const r=await cC(n.localStore,e);n.currentUser=e,function(s,o){s.Oa.forEach(a=>{a.forEach(l=>{l.reject(new J(j.CANCELLED,o))})}),s.Oa.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await Iu(n,r.us)}}function dM(t,e){const n=ce(t),r=n.Fa.get(e);if(r&&r.wa)return we().add(r.key);{let i=we();const s=n.Da.get(e);if(!s)return i;for(const o of s){const a=n.ba.get(o);i=i.unionWith(a.view.Ea)}return i}}function AC(t){const e=ce(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=TC.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=dM.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=aM.bind(null,e),e.Sa.h_=KD.bind(null,e.eventManager),e.Sa.ka=QD.bind(null,e.eventManager),e}function fM(t){const e=ce(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=lM.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=uM.bind(null,e),e}class sw{constructor(){this.synchronizeTabs=!1}async initialize(e){this.serializer=gd(e.databaseInfo.databaseId),this.sharedClientState=this.createSharedClientState(e),this.persistence=this.createPersistence(e),await this.persistence.start(),this.localStore=this.createLocalStore(e),this.gcScheduler=this.createGarbageCollectionScheduler(e,this.localStore),this.indexBackfillerScheduler=this.createIndexBackfillerScheduler(e,this.localStore)}createGarbageCollectionScheduler(e,n){return null}createIndexBackfillerScheduler(e,n){return null}createLocalStore(e){return gD(this.persistence,new pD,e.initialUser,this.serializer)}createPersistence(e){return new hD(Hg.Hr,this.serializer)}createSharedClientState(e){return new TD}async terminate(){var e,n;(e=this.gcScheduler)===null||e===void 0||e.stop(),(n=this.indexBackfillerScheduler)===null||n===void 0||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}class pM{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>rw(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=hM.bind(null,this.syncEngine),await BD(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new WD}()}createDatastore(e){const n=gd(e.databaseInfo.databaseId),r=function(s){return new AD(s)}(e.databaseInfo);return function(s,o,a,l){return new PD(s,o,a,l)}(e.authCredentials,e.appCheckCredentials,r,n)}createRemoteStore(e){return function(r,i,s,o,a){return new OD(r,i,s,o,a)}(this.localStore,this.datastore,e.asyncQueue,n=>rw(this.syncEngine,n,0),function(){return Z0.D()?new Z0:new CD}())}createSyncEngine(e,n){return function(i,s,o,a,l,c,h){const f=new eM(i,s,o,a,l,c);return h&&(f.La=!0),f}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){var e;await async function(r){const i=ce(r);Y("RemoteStore","RemoteStore shutting down."),i.M_.add(5),await Cu(i),i.O_.shutdown(),i.N_.set("Unknown")}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mM{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.Ka(this.observer.next,e)}error(e){this.observer.error?this.Ka(this.observer.error,e):Hr("Uncaught Error in snapshot listener:",e.toString())}$a(){this.muted=!0}Ka(e,n){this.muted||setTimeout(()=>{this.muted||e(n)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gM{constructor(e,n,r,i){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=i,this.user=$t.UNAUTHENTICATED,this.clientId=xT.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(r,async s=>{Y("FirestoreClient","Received user=",s.uid),await this.authCredentialListener(s),this.user=s}),this.appCheckCredentials.start(r,s=>(Y("FirestoreClient","Received new app check token=",s),this.appCheckCredentialListener(s,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new J(j.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Ni;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const r=Yg(n,"Failed to shutdown persistence");e.reject(r)}}),e.promise}}async function Of(t,e){t.asyncQueue.verifyOperationInProgress(),Y("FirestoreClient","Initializing OfflineComponentProvider");const n=t.configuration;await e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener(async i=>{r.isEqual(i)||(await cC(e.localStore,i),r=i)}),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e}async function ow(t,e){t.asyncQueue.verifyOperationInProgress();const n=await vM(t);Y("FirestoreClient","Initializing OnlineComponentProvider"),await e.initialize(n,t.configuration),t.setCredentialChangeListener(r=>ew(e.remoteStore,r)),t.setAppCheckTokenChangeListener((r,i)=>ew(e.remoteStore,i)),t._onlineComponents=e}function yM(t){return t.name==="FirebaseError"?t.code===j.FAILED_PRECONDITION||t.code===j.UNIMPLEMENTED:!(typeof DOMException<"u"&&t instanceof DOMException)||t.code===22||t.code===20||t.code===11}async function vM(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){Y("FirestoreClient","Using user provided OfflineComponentProvider");try{await Of(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!yM(n))throw n;Zo("Error using user provided cache. Falling back to memory cache: "+n),await Of(t,new sw)}}else Y("FirestoreClient","Using default OfflineComponentProvider"),await Of(t,new sw);return t._offlineComponents}async function xC(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(Y("FirestoreClient","Using user provided OnlineComponentProvider"),await ow(t,t._uninitializedComponentsProvider._online)):(Y("FirestoreClient","Using default OnlineComponentProvider"),await ow(t,new pM))),t._onlineComponents}function _M(t){return xC(t).then(e=>e.syncEngine)}async function wM(t){const e=await xC(t),n=e.eventManager;return n.onListen=tM.bind(null,e.syncEngine),n.onUnlisten=iM.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=nM.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=sM.bind(null,e.syncEngine),n}function EM(t,e,n={}){const r=new Ni;return t.asyncQueue.enqueueAndForget(async()=>function(s,o,a,l,c){const h=new mM({next:p=>{o.enqueueAndForget(()=>GD(s,f)),p.fromCache&&l.source==="server"?c.reject(new J(j.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):c.resolve(p)},error:p=>c.reject(p)}),f=new XD(a,h,{includeMetadataChanges:!0,ra:!0});return qD(s,f)}(await wM(t),t.asyncQueue,e,n,r)),r.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kC(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aw=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function PC(t,e,n){if(!n)throw new J(j.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function bM(t,e,n,r){if(e===!0&&r===!0)throw new J(j.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function lw(t){if(!ne.isDocumentKey(t))throw new J(j.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function uw(t){if(ne.isDocumentKey(t))throw new J(j.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function _d(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(r){return r.constructor?r.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":le()}function Lh(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new J(j.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=_d(t);throw new J(j.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cw{constructor(e){var n,r;if(e.host===void 0){if(e.ssl!==void 0)throw new J(j.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(n=e.ssl)===null||n===void 0||n;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new J(j.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}bM("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=kC((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(s){if(s.timeoutSeconds!==void 0){if(isNaN(s.timeoutSeconds))throw new J(j.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (must not be NaN)`);if(s.timeoutSeconds<5)throw new J(j.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (minimum allowed value is 5)`);if(s.timeoutSeconds>30)throw new J(j.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,i){return r.timeoutSeconds===i.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class wd{constructor(e,n,r,i){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new cw({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new J(j.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!==void 0}_setSettings(e){if(this._settingsFrozen)throw new J(j.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new cw(e),e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new MN;switch(r.type){case"firstParty":return new FN(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new J(j.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const r=aw.get(n);r&&(Y("ComponentProvider","Removing Datastore"),aw.delete(n),r.terminate())}(this),Promise.resolve()}}function TM(t,e,n,r={}){var i;const s=(t=Lh(t,wd))._getSettings(),o=`${e}:${n}`;if(s.host!=="firestore.googleapis.com"&&s.host!==o&&Zo("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),t._setSettings(Object.assign(Object.assign({},s),{host:o,ssl:!1})),r.mockUserToken){let a,l;if(typeof r.mockUserToken=="string")a=r.mockUserToken,l=$t.MOCK_USER;else{a=JP(r.mockUserToken,(i=t._app)===null||i===void 0?void 0:i.options.projectId);const c=r.mockUserToken.sub||r.mockUserToken.user_id;if(!c)throw new J(j.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");l=new $t(c)}t._authCredentials=new VN(new AT(a,l))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ea{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new Ea(this.firestore,e,this._query)}}class Pn{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Di(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Pn(this.firestore,e,this._key)}}class Di extends Ea{constructor(e,n,r){super(e,n,UT(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Pn(this.firestore,null,new ne(e))}withConverter(e){return new Di(this.firestore,e,this._path)}}function RC(t,e,...n){if(t=Yt(t),PC("collection","path",e),t instanceof wd){const r=Fe.fromString(e,...n);return uw(r),new Di(t,null,r)}{if(!(t instanceof Pn||t instanceof Di))throw new J(j.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(Fe.fromString(e,...n));return uw(r),new Di(t.firestore,null,r)}}function CM(t,e,...n){if(t=Yt(t),arguments.length===1&&(e=xT.newId()),PC("doc","path",e),t instanceof wd){const r=Fe.fromString(e,...n);return lw(r),new Pn(t,null,new ne(r))}{if(!(t instanceof Pn||t instanceof Di))throw new J(j.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(Fe.fromString(e,...n));return lw(r),new Pn(t.firestore,t instanceof Di?t.converter:null,new ne(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IM{constructor(){this.iu=Promise.resolve(),this.su=[],this.ou=!1,this._u=[],this.au=null,this.uu=!1,this.cu=!1,this.lu=[],this.Yo=new dC(this,"async_queue_retry"),this.hu=()=>{const n=Rf();n&&Y("AsyncQueue","Visibility state changed to "+n.visibilityState),this.Yo.Wo()};const e=Rf();e&&typeof e.addEventListener=="function"&&e.addEventListener("visibilitychange",this.hu)}get isShuttingDown(){return this.ou}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.Pu(),this.Iu(e)}enterRestrictedMode(e){if(!this.ou){this.ou=!0,this.cu=e||!1;const n=Rf();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.hu)}}enqueue(e){if(this.Pu(),this.ou)return new Promise(()=>{});const n=new Ni;return this.Iu(()=>this.ou&&this.cu?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.su.push(e),this.Tu()))}async Tu(){if(this.su.length!==0){try{await this.su[0](),this.su.shift(),this.Yo.reset()}catch(e){if(!wu(e))throw e;Y("AsyncQueue","Operation failed with retryable error: "+e)}this.su.length>0&&this.Yo.$o(()=>this.Tu())}}Iu(e){const n=this.iu.then(()=>(this.uu=!0,e().catch(r=>{this.au=r,this.uu=!1;const i=function(o){let a=o.message||"";return o.stack&&(a=o.stack.includes(o.message)?o.stack:o.message+`
`+o.stack),a}(r);throw Hr("INTERNAL UNHANDLED ERROR: ",i),r}).then(r=>(this.uu=!1,r))));return this.iu=n,n}enqueueAfterDelay(e,n,r){this.Pu(),this.lu.indexOf(e)>-1&&(n=0);const i=Xg.createAndSchedule(this,e,n,r,s=>this.Eu(s));return this._u.push(i),i}Pu(){this.au&&le()}verifyOperationInProgress(){}async du(){let e;do e=this.iu,await e;while(e!==this.iu)}Au(e){for(const n of this._u)if(n.timerId===e)return!0;return!1}Ru(e){return this.du().then(()=>{this._u.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(const n of this._u)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.du()})}Vu(e){this.lu.push(e)}Eu(e){const n=this._u.indexOf(e);this._u.splice(n,1)}}class ey extends wd{constructor(e,n,r,i){super(e,n,r,i),this.type="firestore",this._queue=function(){return new IM}(),this._persistenceKey=(i==null?void 0:i.name)||"[DEFAULT]"}_terminate(){return this._firestoreClient||LC(this),this._firestoreClient.terminate()}}function SM(t,e){const n=typeof t=="object"?t:Vb(),r=typeof t=="string"?t:"(default)",i=Eg(n,"firestore").getImmediate({identifier:r});if(!i._initialized){const s=XP("firestore");s&&TM(i,...s)}return i}function OC(t){return t._firestoreClient||LC(t),t._firestoreClient.verifyNotTerminated(),t._firestoreClient}function LC(t){var e,n,r;const i=t._freezeSettings(),s=function(a,l,c,h){return new ZN(a,l,c,h.host,h.ssl,h.experimentalForceLongPolling,h.experimentalAutoDetectLongPolling,kC(h.experimentalLongPollingOptions),h.useFetchStreams)}(t._databaseId,((e=t._app)===null||e===void 0?void 0:e.options.appId)||"",t._persistenceKey,i);t._firestoreClient=new gM(t._authCredentials,t._appCheckCredentials,t._queue,s),!((n=i.localCache)===null||n===void 0)&&n._offlineComponentProvider&&(!((r=i.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(t._firestoreClient._uninitializedComponentsProvider={_offlineKind:i.localCache.kind,_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sa{constructor(e){this._byteString=e}static fromBase64String(e){try{return new sa(Bt.fromBase64String(e))}catch(n){throw new J(j.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new sa(Bt.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ty{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new J(j.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new kt(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NC{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ny{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new J(j.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new J(j.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return Ae(this._lat,e._lat)||Ae(this._long,e._long)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const AM=/^__.*__$/;class xM{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return this.fieldMask!==null?new Hs(e,this.data,this.fieldMask,n,this.fieldTransforms):new bu(e,this.data,n,this.fieldTransforms)}}function DC(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw le()}}class ry{constructor(e,n,r,i,s,o){this.settings=e,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=i,s===void 0&&this.mu(),this.fieldTransforms=s||[],this.fieldMask=o||[]}get path(){return this.settings.path}get fu(){return this.settings.fu}gu(e){return new ry(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}pu(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),i=this.gu({path:r,yu:!1});return i.wu(e),i}Su(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),i=this.gu({path:r,yu:!1});return i.mu(),i}bu(e){return this.gu({path:void 0,yu:!0})}Du(e){return Nh(e,this.settings.methodName,this.settings.Cu||!1,this.path,this.settings.vu)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}mu(){if(this.path)for(let e=0;e<this.path.length;e++)this.wu(this.path.get(e))}wu(e){if(e.length===0)throw this.Du("Document fields must not be empty");if(DC(this.fu)&&AM.test(e))throw this.Du('Document fields cannot begin and end with "__"')}}class kM{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=r||gd(e)}Fu(e,n,r,i=!1){return new ry({fu:e,methodName:n,vu:r,path:kt.emptyPath(),yu:!1,Cu:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function MC(t){const e=t._freezeSettings(),n=gd(t._databaseId);return new kM(t._databaseId,!!e.ignoreUndefinedProperties,n)}function PM(t,e,n,r,i,s={}){const o=t.Fu(s.merge||s.mergeFields?2:0,e,n,i);$C("Data must be an object, but it was:",o,r);const a=VC(r,o);let l,c;if(s.merge)l=new Wn(o.fieldMask),c=o.fieldTransforms;else if(s.mergeFields){const h=[];for(const f of s.mergeFields){const p=OM(e,f,n);if(!o.contains(p))throw new J(j.INVALID_ARGUMENT,`Field '${p}' is specified in your field mask but missing from your input data.`);NM(h,p)||h.push(p)}l=new Wn(h),c=o.fieldTransforms.filter(f=>l.covers(f.field))}else l=null,c=o.fieldTransforms;return new xM(new Sn(a),l,c)}function RM(t,e,n,r=!1){return iy(n,t.Fu(r?4:3,e))}function iy(t,e){if(UC(t=Yt(t)))return $C("Unsupported field value:",e,t),VC(t,e);if(t instanceof NC)return function(r,i){if(!DC(i.fu))throw i.Du(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.Du(`${r._methodName}() is not currently supported inside arrays`);const s=r._toFieldTransform(i);s&&i.fieldTransforms.push(s)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.yu&&e.fu!==4)throw e.Du("Nested arrays are not supported");return function(r,i){const s=[];let o=0;for(const a of r){let l=iy(a,i.bu(o));l==null&&(l={nullValue:"NULL_VALUE"}),s.push(l),o++}return{arrayValue:{values:s}}}(t,e)}return function(r,i){if((r=Yt(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return w4(i.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const s=mt.fromDate(r);return{timestampValue:Rh(i.serializer,s)}}if(r instanceof mt){const s=new mt(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:Rh(i.serializer,s)}}if(r instanceof ny)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof sa)return{bytesValue:rC(i.serializer,r._byteString)};if(r instanceof Pn){const s=i.databaseId,o=r.firestore._databaseId;if(!o.isEqual(s))throw i.Du(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${s.projectId}/${s.database}`);return{referenceValue:zg(r.firestore._databaseId||i.databaseId,r._key.path)}}throw i.Du(`Unsupported field value: ${_d(r)}`)}(t,e)}function VC(t,e){const n={};return kT(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):va(t,(r,i)=>{const s=iy(i,e.pu(r));s!=null&&(n[r]=s)}),{mapValue:{fields:n}}}function UC(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof mt||t instanceof ny||t instanceof sa||t instanceof Pn||t instanceof NC)}function $C(t,e,n){if(!UC(n)||!function(i){return typeof i=="object"&&i!==null&&(Object.getPrototypeOf(i)===Object.prototype||Object.getPrototypeOf(i)===null)}(n)){const r=_d(n);throw r==="an object"?e.Du(t+" a custom object"):e.Du(t+" "+r)}}function OM(t,e,n){if((e=Yt(e))instanceof ty)return e._internalPath;if(typeof e=="string")return FC(t,e);throw Nh("Field path arguments must be of type string or ",t,!1,void 0,n)}const LM=new RegExp("[~\\*/\\[\\]]");function FC(t,e,n){if(e.search(LM)>=0)throw Nh(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new ty(...e.split("."))._internalPath}catch{throw Nh(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function Nh(t,e,n,r,i){const s=r&&!r.isEmpty(),o=i!==void 0;let a=`Function ${e}() called with invalid data`;n&&(a+=" (via `toFirestore()`)"),a+=". ";let l="";return(s||o)&&(l+=" (found",s&&(l+=` in field ${r}`),o&&(l+=` in document ${i}`),l+=")"),new J(j.INVALID_ARGUMENT,a+t+l)}function NM(t,e){return t.some(n=>n.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jC{constructor(e,n,r,i,s){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=i,this._converter=s}get id(){return this._key.path.lastSegment()}get ref(){return new Pn(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new DM(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(sy("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class DM extends jC{data(){return super.data()}}function sy(t,e){return typeof e=="string"?FC(t,e):e instanceof ty?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function MM(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new J(j.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class oy{}class VM extends oy{}function UM(t,e,...n){let r=[];e instanceof oy&&r.push(e),r=r.concat(n),function(s){const o=s.filter(l=>l instanceof ay).length,a=s.filter(l=>l instanceof Ed).length;if(o>1||o>0&&a>0)throw new J(j.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(const i of r)t=i._apply(t);return t}class Ed extends VM{constructor(e,n,r){super(),this._field=e,this._op=n,this._value=r,this.type="where"}static _create(e,n,r){return new Ed(e,n,r)}_apply(e){const n=this._parse(e);return zC(e._query,n),new Ea(e.firestore,e.converter,em(e._query,n))}_parse(e){const n=MC(e.firestore);return function(s,o,a,l,c,h,f){let p;if(c.isKeyField()){if(h==="array-contains"||h==="array-contains-any")throw new J(j.INVALID_ARGUMENT,`Invalid Query. You can't perform '${h}' queries on documentId().`);if(h==="in"||h==="not-in"){dw(f,h);const w=[];for(const E of f)w.push(hw(l,s,E));p={arrayValue:{values:w}}}else p=hw(l,s,f)}else h!=="in"&&h!=="not-in"&&h!=="array-contains-any"||dw(f,h),p=RM(a,o,f,h==="in"||h==="not-in");return ct.create(c,h,p)}(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}}function $M(t,e,n){const r=e,i=sy("where",t);return Ed._create(i,r,n)}class ay extends oy{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new ay(e,n)}_parse(e){const n=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return n.length===1?n[0]:Yn.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return n.getFilters().length===0?e:(function(i,s){let o=i;const a=s.getFlattenedFilters();for(const l of a)zC(o,l),o=em(o,l)}(e._query,n),new Ea(e.firestore,e.converter,em(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}function hw(t,e,n){if(typeof(n=Yt(n))=="string"){if(n==="")throw new J(j.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!$T(e)&&n.indexOf("/")!==-1)throw new J(j.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const r=e.path.child(Fe.fromString(n));if(!ne.isDocumentKey(r))throw new J(j.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return N0(t,new ne(r))}if(n instanceof Pn)return N0(t,n._key);throw new J(j.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${_d(n)}.`)}function dw(t,e){if(!Array.isArray(t)||t.length===0)throw new J(j.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function zC(t,e){const n=function(i,s){for(const o of i)for(const a of o.getFlattenedFilters())if(s.indexOf(a.op)>=0)return a.op;return null}(t.filters,function(i){switch(i){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(n!==null)throw n===e.op?new J(j.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new J(j.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}class FM{convertValue(e,n="none"){switch($s(e)){case 0:return null;case 1:return e.booleanValue;case 2:return lt(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(Us(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 10:return this.convertObject(e.mapValue,n);default:throw le()}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const r={};return va(e,(i,s)=>{r[i]=this.convertValue(s,n)}),r}convertGeoPoint(e){return new ny(lt(e.latitude),lt(e.longitude))}convertArray(e,n){return(e.values||[]).map(r=>this.convertValue(r,n))}convertServerTimestamp(e,n){switch(n){case"previous":const r=Mg(e);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(eu(e));default:return null}}convertTimestamp(e){const n=Bi(e);return new mt(n.seconds,n.nanos)}convertDocumentKey(e,n){const r=Fe.fromString(e);De(uC(r));const i=new tu(r.get(1),r.get(3)),s=new ne(r.popFirst(5));return i.isEqual(n)||Hr(`Document ${s} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jM(t,e,n){let r;return r=t?t.toFirestore(e):e,r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gc{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class zM extends jC{constructor(e,n,r,i,s,o){super(e,n,r,i,o),this._firestore=e,this._firestoreImpl=e,this.metadata=s}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new zc(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const r=this._document.data.field(sy("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}}class zc extends zM{data(e={}){return super.data(e)}}class BM{constructor(e,n,r,i){this._firestore=e,this._userDataWriter=n,this._snapshot=i,this.metadata=new gc(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){const e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(r=>{e.call(n,new zc(this._firestore,this._userDataWriter,r.key,r,new gc(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new J(j.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(i,s){if(i._snapshot.oldDocs.isEmpty()){let o=0;return i._snapshot.docChanges.map(a=>{const l=new zc(i._firestore,i._userDataWriter,a.doc.key,a.doc,new gc(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter);return a.doc,{type:"added",doc:l,oldIndex:-1,newIndex:o++}})}{let o=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(a=>s||a.type!==3).map(a=>{const l=new zc(i._firestore,i._userDataWriter,a.doc.key,a.doc,new gc(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter);let c=-1,h=-1;return a.type!==0&&(c=o.indexOf(a.doc.key),o=o.delete(a.doc.key)),a.type!==1&&(o=o.add(a.doc),h=o.indexOf(a.doc.key)),{type:HM(a.type),doc:l,oldIndex:c,newIndex:h}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}}function HM(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return le()}}class WM extends FM{constructor(e){super(),this.firestore=e}convertBytes(e){return new sa(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new Pn(this.firestore,null,n)}}function qM(t){t=Lh(t,Ea);const e=Lh(t.firestore,ey),n=OC(e),r=new WM(e);return MM(t._query),EM(n,t._query).then(i=>new BM(e,r,t,i))}function GM(t,e){const n=Lh(t.firestore,ey),r=CM(t),i=jM(t.converter,e);return KM(n,[PM(MC(t.firestore),"addDoc",r._key,i,t.converter!==null,{}).toMutation(r._key,Ur.exists(!1))]).then(()=>r)}function KM(t,e){return function(r,i){const s=new Ni;return r.asyncQueue.enqueueAndForget(async()=>oM(await _M(r),i,s)),s.promise}(OC(t),e)}(function(e,n=!0){(function(i){ya=i})(ma),Jo(new Ls("firestore",(r,{instanceIdentifier:i,options:s})=>{const o=r.getProvider("app").getImmediate(),a=new ey(new UN(r.getProvider("auth-internal")),new zN(r.getProvider("app-check-internal")),function(c,h){if(!Object.prototype.hasOwnProperty.apply(c.options,["projectId"]))throw new J(j.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new tu(c.options.projectId,h)}(o,i),o);return s=Object.assign({useFetchStreams:n},s),a._setSettings(s),a},"PUBLIC").setMultipleInstances(!0)),Li(P0,"4.6.3",e),Li(P0,"4.6.3","esm2017")})();const QM={apiKey:"AIzaSyDKuvPzNmeXlqxNRyciKVdLetWxjNVjDnQ",authDomain:"edelgram-e14a7.firebaseapp.com",projectId:"edelgram-e14a7",storageBucket:"edelgram-e14a7.appspot.com",messagingSenderId:"524024204359",appId:"1:524024204359:web:23b7b1b859d1cc81e13562"},BC=Mb(QM),Su=_T(BC),HC=SM(BC),WC=(t,e)=>wL(Su,t,e),qC=(t,e)=>_L(Su,t,e),GC=()=>{TL(Su)},KC=()=>{const t=new xr;return HL(Su,t)},QC=D.createContext({user:null,logIn:WC,signUp:qC,logOut:GC,googleSignIn:KC}),XM=({children:t})=>{const[e,n]=D.useState(null);D.useEffect(()=>{const i=aT(Su,s=>(s&&(console.log("The logged in user state is:",s),n(s)),()=>{i()}))},[]);const r={user:e,logIn:WC,signUp:qC,logOut:GC,googleSignIn:KC};return R.jsx(QC.Provider,{value:r,children:t})},Au=()=>D.useContext(QC),YM="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20fill='none'%20viewBox='0%200%2024%2024'%20stroke-width='1.5'%20stroke='currentColor'%20class='size-6'%3e%3cpath%20stroke-linecap='round'%20stroke-linejoin='round'%20d='M8.25%209V5.25A2.25%202.25%200%200%201%2010.5%203h6a2.25%202.25%200%200%201%202.25%202.25v13.5A2.25%202.25%200%200%201%2016.5%2021h-6a2.25%202.25%200%200%201-2.25-2.25V15m-3%200-3-3m0%200%203-3m-3%203H15'%20/%3e%3c/svg%3e",JM=()=>{const{pathname:t}=Bs(),{logOut:e}=Au();return R.jsxs("nav",{className:"flex flex-col relative h-screen max-w-sm w-full",children:[R.jsx("div",{className:"flex justify-center m-5",children:R.jsx("div",{className:"text-white text-lg",children:"Edelgram"})}),zP.map(n=>R.jsx("div",{className:Ln($p({variant:"default"}),t===n.link?"bg-white text-white-800 hover:bg-white rounded-none":"hover:bg-slate-950 hover:text-white bg-transparent rounded-none","justify-start"),children:R.jsxs(yh,{to:n.link,className:"flex",children:[R.jsx("span",{children:R.jsx("img",{src:n.icon,alt:n.name,className:"w-5 h-5 mr-2",style:{filter:`${t===n.link?"invert(0)":"invert(1)"}`}})}),R.jsx("span",{children:n.name})]})},n.name)),R.jsx("div",{className:Ln($p({variant:"default"}),t==="/edelgram/login"?"bg-white text-white-800 hover:bg-white rounded-none":"hover:bg-slate-950 hover:text-white bg-transparent rounded-none","justify-start"),children:R.jsxs(yh,{to:"/edelgram/login",className:"flex",onClick:e,children:[R.jsx("span",{children:R.jsx("img",{src:YM,className:"w-5 h-5 mr-2",alt:"Logout",style:{filter:`${t==="/edelgram/login"?"invert(0)":"invert(1)"}`}})}),R.jsx("span",{children:"Logout"})]})})]})},ZM=()=>R.jsx("div",{children:"UserList"}),bd=({children:t})=>R.jsxs("div",{className:"flex bg-white",children:[R.jsx("aside",{className:"flex gap-x-4 bg-gray-800 fixed top-0 left-0 z-40 lg:w-60 h-screen",children:R.jsx(JM,{})}),R.jsx("div",{className:"lg:ml-60 lg:mr-60 p-8 flex-1 ml-36",children:t}),R.jsx("aside",{className:"hidden lg:block bg-gray-800 fixed top-0 right-0 z-40 lg:w-60 h-screen",children:R.jsx(ZM,{})})]}),e3=()=>R.jsx(bd,{children:R.jsx("div",{children:"Home"})}),ao=()=>R.jsx("div",{children:"Error"}),ly=D.forwardRef(({className:t,...e},n)=>R.jsx("div",{ref:n,className:Ln("rounded-lg border bg-card text-card-foreground shadow-sm",t),...e}));ly.displayName="Card";const uy=D.forwardRef(({className:t,...e},n)=>R.jsx("div",{ref:n,className:Ln("flex flex-col space-y-1.5 p-6",t),...e}));uy.displayName="CardHeader";const cy=D.forwardRef(({className:t,...e},n)=>R.jsx("h3",{ref:n,className:Ln("text-2xl font-semibold leading-none tracking-tight",t),...e}));cy.displayName="CardTitle";const hy=D.forwardRef(({className:t,...e},n)=>R.jsx("p",{ref:n,className:Ln("text-sm text-muted-foreground",t),...e}));hy.displayName="CardDescription";const dy=D.forwardRef(({className:t,...e},n)=>R.jsx("div",{ref:n,className:Ln("p-6 pt-0",t),...e}));dy.displayName="CardContent";const fy=D.forwardRef(({className:t,...e},n)=>R.jsx("div",{ref:n,className:Ln("flex items-center p-6 pt-0",t),...e}));fy.displayName="CardFooter";const jo=D.forwardRef(({className:t,type:e,...n},r)=>R.jsx("input",{type:e,className:Ln("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",t),ref:r,...n}));jo.displayName="Input";const t3=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","span","svg","ul"],n3=t3.reduce((t,e)=>{const n=D.forwardRef((r,i)=>{const{asChild:s,...o}=r,a=s?vg:e;return D.useEffect(()=>{window[Symbol.for("radix-ui")]=!0},[]),D.createElement(a,Xo({},o,{ref:i}))});return n.displayName=`Primitive.${e}`,{...t,[e]:n}},{}),r3=D.forwardRef((t,e)=>D.createElement(n3.label,Xo({},t,{ref:e,onMouseDown:n=>{var r;(r=t.onMouseDown)===null||r===void 0||r.call(t,n),!n.defaultPrevented&&n.detail>1&&n.preventDefault()}}))),XC=r3,i3=Ab("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),Mi=D.forwardRef(({className:t,...e},n)=>R.jsx(XC,{ref:n,className:Ln(i3(),t),...e}));Mi.displayName=XC.displayName;const YC={logo:t=>R.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 256 256",...t,children:[R.jsx("rect",{width:"256",height:"256",fill:"none"}),R.jsx("line",{x1:"208",y1:"128",x2:"128",y2:"208",fill:"none",stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"16"}),R.jsx("line",{x1:"192",y1:"40",x2:"40",y2:"192",fill:"none",stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"16"})]}),twitter:t=>R.jsx("svg",{...t,height:"23",viewBox:"0 0 1200 1227",width:"23",xmlns:"http://www.w3.org/2000/svg",children:R.jsx("path",{d:"M714.163 519.284L1160.89 0H1055.03L667.137 450.887L357.328 0H0L468.492 681.821L0 1226.37H105.866L515.491 750.218L842.672 1226.37H1200L714.137 519.284H714.163ZM569.165 687.828L521.697 619.934L144.011 79.6944H306.615L611.412 515.685L658.88 583.579L1055.08 1150.3H892.476L569.165 687.854V687.828Z"})}),gitHub:t=>R.jsx("svg",{viewBox:"0 0 438.549 438.549",...t,children:R.jsx("path",{fill:"currentColor",d:"M409.132 114.573c-19.608-33.596-46.205-60.194-79.798-79.8-33.598-19.607-70.277-29.408-110.063-29.408-39.781 0-76.472 9.804-110.063 29.408-33.596 19.605-60.192 46.204-79.8 79.8C9.803 148.168 0 184.854 0 224.63c0 47.78 13.94 90.745 41.827 128.906 27.884 38.164 63.906 64.572 108.063 79.227 5.14.954 8.945.283 11.419-1.996 2.475-2.282 3.711-5.14 3.711-8.562 0-.571-.049-5.708-.144-15.417a2549.81 2549.81 0 01-.144-25.406l-6.567 1.136c-4.187.767-9.469 1.092-15.846 1-6.374-.089-12.991-.757-19.842-1.999-6.854-1.231-13.229-4.086-19.13-8.559-5.898-4.473-10.085-10.328-12.56-17.556l-2.855-6.57c-1.903-4.374-4.899-9.233-8.992-14.559-4.093-5.331-8.232-8.945-12.419-10.848l-1.999-1.431c-1.332-.951-2.568-2.098-3.711-3.429-1.142-1.331-1.997-2.663-2.568-3.997-.572-1.335-.098-2.43 1.427-3.289 1.525-.859 4.281-1.276 8.28-1.276l5.708.853c3.807.763 8.516 3.042 14.133 6.851 5.614 3.806 10.229 8.754 13.846 14.842 4.38 7.806 9.657 13.754 15.846 17.847 6.184 4.093 12.419 6.136 18.699 6.136 6.28 0 11.704-.476 16.274-1.423 4.565-.952 8.848-2.383 12.847-4.285 1.713-12.758 6.377-22.559 13.988-29.41-10.848-1.14-20.601-2.857-29.264-5.14-8.658-2.286-17.605-5.996-26.835-11.14-9.235-5.137-16.896-11.516-22.985-19.126-6.09-7.614-11.088-17.61-14.987-29.979-3.901-12.374-5.852-26.648-5.852-42.826 0-23.035 7.52-42.637 22.557-58.817-7.044-17.318-6.379-36.732 1.997-58.24 5.52-1.715 13.706-.428 24.554 3.853 10.85 4.283 18.794 7.952 23.84 10.994 5.046 3.041 9.089 5.618 12.135 7.708 17.705-4.947 35.976-7.421 54.818-7.421s37.117 2.474 54.823 7.421l10.849-6.849c7.419-4.57 16.18-8.758 26.262-12.565 10.088-3.805 17.802-4.853 23.134-3.138 8.562 21.509 9.325 40.922 2.279 58.24 15.036 16.18 22.559 35.787 22.559 58.817 0 16.178-1.958 30.497-5.853 42.966-3.9 12.471-8.941 22.457-15.125 29.979-6.191 7.521-13.901 13.85-23.131 18.986-9.232 5.14-18.182 8.85-26.84 11.136-8.662 2.286-18.415 4.004-29.263 5.146 9.894 8.562 14.842 22.077 14.842 40.539v60.237c0 3.422 1.19 6.279 3.572 8.562 2.379 2.279 6.136 2.95 11.276 1.995 44.163-14.653 80.185-41.062 108.068-79.226 27.88-38.161 41.825-81.126 41.825-128.906-.01-39.771-9.818-76.454-29.414-110.049z"})}),radix:t=>R.jsxs("svg",{viewBox:"0 0 25 25",fill:"none",...t,children:[R.jsx("path",{d:"M12 25C7.58173 25 4 21.4183 4 17C4 12.5817 7.58173 9 12 9V25Z",fill:"currentcolor"}),R.jsx("path",{d:"M12 0H4V8H12V0Z",fill:"currentcolor"}),R.jsx("path",{d:"M17 8C19.2091 8 21 6.20914 21 4C21 1.79086 19.2091 0 17 0C14.7909 0 13 1.79086 13 4C13 6.20914 14.7909 8 17 8Z",fill:"currentcolor"})]}),aria:t=>R.jsx("svg",{role:"img",viewBox:"0 0 24 24",fill:"currentColor",...t,children:R.jsx("path",{d:"M13.966 22.624l-1.69-4.281H8.122l3.892-9.144 5.662 13.425zM8.884 1.376H0v21.248zm15.116 0h-8.884L24 22.624Z"})}),npm:t=>R.jsx("svg",{viewBox:"0 0 24 24",...t,children:R.jsx("path",{d:"M1.763 0C.786 0 0 .786 0 1.763v20.474C0 23.214.786 24 1.763 24h20.474c.977 0 1.763-.786 1.763-1.763V1.763C24 .786 23.214 0 22.237 0zM5.13 5.323l13.837.019-.009 13.836h-3.464l.01-10.382h-3.456L12.04 19.17H5.113z",fill:"currentColor"})}),yarn:t=>R.jsx("svg",{viewBox:"0 0 24 24",...t,children:R.jsx("path",{d:"M12 0C5.375 0 0 5.375 0 12s5.375 12 12 12 12-5.375 12-12S18.625 0 12 0zm.768 4.105c.183 0 .363.053.525.157.125.083.287.185.755 1.154.31-.088.468-.042.551-.019.204.056.366.19.463.375.477.917.542 2.553.334 3.605-.241 1.232-.755 2.029-1.131 2.576.324.329.778.899 1.117 1.825.278.774.31 1.478.273 2.015a5.51 5.51 0 0 0 .602-.329c.593-.366 1.487-.917 2.553-.931.714-.009 1.269.445 1.353 1.103a1.23 1.23 0 0 1-.945 1.362c-.649.158-.95.278-1.821.843-1.232.797-2.539 1.242-3.012 1.39a1.686 1.686 0 0 1-.704.343c-.737.181-3.266.315-3.466.315h-.046c-.783 0-1.214-.241-1.45-.491-.658.329-1.51.19-2.122-.134a1.078 1.078 0 0 1-.58-1.153 1.243 1.243 0 0 1-.153-.195c-.162-.25-.528-.936-.454-1.946.056-.723.556-1.367.88-1.71a5.522 5.522 0 0 1 .408-2.256c.306-.727.885-1.348 1.32-1.737-.32-.537-.644-1.367-.329-2.21.227-.602.412-.936.82-1.08h-.005c.199-.074.389-.153.486-.259a3.418 3.418 0 0 1 2.298-1.103c.037-.093.079-.185.125-.283.31-.658.639-1.029 1.024-1.168a.94.94 0 0 1 .328-.06zm.006.7c-.507.016-1.001 1.519-1.001 1.519s-1.27-.204-2.266.871c-.199.218-.468.334-.746.44-.079.028-.176.023-.417.672-.371.991.625 2.094.625 2.094s-1.186.839-1.626 1.881c-.486 1.144-.338 2.261-.338 2.261s-.843.732-.899 1.487c-.051.663.139 1.2.343 1.515.227.343.51.176.51.176s-.561.653-.037.931c.477.25 1.283.394 1.71-.037.31-.31.371-1.001.486-1.283.028-.065.12.111.209.199.097.093.264.195.264.195s-.755.324-.445 1.066c.102.246.468.403 1.066.398.222-.005 2.664-.139 3.313-.296.375-.088.505-.283.505-.283s1.566-.431 2.998-1.357c.917-.598 1.293-.76 2.034-.936.612-.148.57-1.098-.241-1.084-.839.009-1.575.44-2.196.825-1.163.718-1.742.672-1.742.672l-.018-.032c-.079-.13.371-1.293-.134-2.678-.547-1.515-1.413-1.881-1.344-1.997.297-.5 1.038-1.297 1.334-2.78.176-.899.13-2.377-.269-3.151-.074-.144-.732.241-.732.241s-.616-1.371-.788-1.483a.271.271 0 0 0-.157-.046z",fill:"currentColor"})}),pnpm:t=>R.jsx("svg",{viewBox:"0 0 24 24",...t,children:R.jsx("path",{d:"M0 0v7.5h7.5V0zm8.25 0v7.5h7.498V0zm8.25 0v7.5H24V0zM8.25 8.25v7.5h7.498v-7.5zm8.25 0v7.5H24v-7.5zM0 16.5V24h7.5v-7.5zm8.25 0V24h7.498v-7.5zm8.25 0V24H24v-7.5z",fill:"currentColor"})}),react:t=>R.jsx("svg",{viewBox:"0 0 24 24",...t,children:R.jsx("path",{d:"M14.23 12.004a2.236 2.236 0 0 1-2.235 2.236 2.236 2.236 0 0 1-2.236-2.236 2.236 2.236 0 0 1 2.235-2.236 2.236 2.236 0 0 1 2.236 2.236zm2.648-10.69c-1.346 0-3.107.96-4.888 2.622-1.78-1.653-3.542-2.602-4.887-2.602-.41 0-.783.093-1.106.278-1.375.793-1.683 3.264-.973 6.365C1.98 8.917 0 10.42 0 12.004c0 1.59 1.99 3.097 5.043 4.03-.704 3.113-.39 5.588.988 6.38.32.187.69.275 1.102.275 1.345 0 3.107-.96 4.888-2.624 1.78 1.654 3.542 2.603 4.887 2.603.41 0 .783-.09 1.106-.275 1.374-.792 1.683-3.263.973-6.365C22.02 15.096 24 13.59 24 12.004c0-1.59-1.99-3.097-5.043-4.032.704-3.11.39-5.587-.988-6.38-.318-.184-.688-.277-1.092-.278zm-.005 1.09v.006c.225 0 .406.044.558.127.666.382.955 1.835.73 3.704-.054.46-.142.945-.25 1.44-.96-.236-2.006-.417-3.107-.534-.66-.905-1.345-1.727-2.035-2.447 1.592-1.48 3.087-2.292 4.105-2.295zm-9.77.02c1.012 0 2.514.808 4.11 2.28-.686.72-1.37 1.537-2.02 2.442-1.107.117-2.154.298-3.113.538-.112-.49-.195-.964-.254-1.42-.23-1.868.054-3.32.714-3.707.19-.09.4-.127.563-.132zm4.882 3.05c.455.468.91.992 1.36 1.564-.44-.02-.89-.034-1.345-.034-.46 0-.915.01-1.36.034.44-.572.895-1.096 1.345-1.565zM12 8.1c.74 0 1.477.034 2.202.093.406.582.802 1.203 1.183 1.86.372.64.71 1.29 1.018 1.946-.308.655-.646 1.31-1.013 1.95-.38.66-.773 1.288-1.18 1.87-.728.063-1.466.098-2.21.098-.74 0-1.477-.035-2.202-.093-.406-.582-.802-1.204-1.183-1.86-.372-.64-.71-1.29-1.018-1.946.303-.657.646-1.313 1.013-1.954.38-.66.773-1.286 1.18-1.868.728-.064 1.466-.098 2.21-.098zm-3.635.254c-.24.377-.48.763-.704 1.16-.225.39-.435.782-.635 1.174-.265-.656-.49-1.31-.676-1.947.64-.15 1.315-.283 2.015-.386zm7.26 0c.695.103 1.365.23 2.006.387-.18.632-.405 1.282-.66 1.933-.2-.39-.41-.783-.64-1.174-.225-.392-.465-.774-.705-1.146zm3.063.675c.484.15.944.317 1.375.498 1.732.74 2.852 1.708 2.852 2.476-.005.768-1.125 1.74-2.857 2.475-.42.18-.88.342-1.355.493-.28-.958-.646-1.956-1.1-2.98.45-1.017.81-2.01 1.085-2.964zm-13.395.004c.278.96.645 1.957 1.1 2.98-.45 1.017-.812 2.01-1.086 2.964-.484-.15-.944-.318-1.37-.5-1.732-.737-2.852-1.706-2.852-2.474 0-.768 1.12-1.742 2.852-2.476.42-.18.88-.342 1.356-.494zm11.678 4.28c.265.657.49 1.312.676 1.948-.64.157-1.316.29-2.016.39.24-.375.48-.762.705-1.158.225-.39.435-.788.636-1.18zm-9.945.02c.2.392.41.783.64 1.175.23.39.465.772.705 1.143-.695-.102-1.365-.23-2.006-.386.18-.63.406-1.282.66-1.933zM17.92 16.32c.112.493.2.968.254 1.423.23 1.868-.054 3.32-.714 3.708-.147.09-.338.128-.563.128-1.012 0-2.514-.807-4.11-2.28.686-.72 1.37-1.536 2.02-2.44 1.107-.118 2.154-.3 3.113-.54zm-11.83.01c.96.234 2.006.415 3.107.532.66.905 1.345 1.727 2.035 2.446-1.595 1.483-3.092 2.295-4.11 2.295-.22-.005-.406-.05-.553-.132-.666-.38-.955-1.834-.73-3.703.054-.46.142-.944.25-1.438zm4.56.64c.44.02.89.034 1.345.034.46 0 .915-.01 1.36-.034-.44.572-.895 1.095-1.345 1.565-.455-.47-.91-.993-1.36-1.565z",fill:"currentColor"})}),tailwind:t=>R.jsx("svg",{viewBox:"0 0 24 24",...t,children:R.jsx("path",{d:"M12.001,4.8c-3.2,0-5.2,1.6-6,4.8c1.2-1.6,2.6-2.2,4.2-1.8c0.913,0.228,1.565,0.89,2.288,1.624 C13.666,10.618,15.027,12,18.001,12c3.2,0,5.2-1.6,6-4.8c-1.2,1.6-2.6,2.2-4.2,1.8c-0.913-0.228-1.565-0.89-2.288-1.624 C16.337,6.182,14.976,4.8,12.001,4.8z M6.001,12c-3.2,0-5.2,1.6-6,4.8c1.2-1.6,2.6-2.2,4.2-1.8c0.913,0.228,1.565,0.89,2.288,1.624 c1.177,1.194,2.538,2.576,5.512,2.576c3.2,0,5.2-1.6,6-4.8c-1.2,1.6-2.6,2.2-4.2,1.8c-0.913-0.228-1.565-0.89-2.288-1.624 C10.337,13.382,8.976,12,6.001,12z",fill:"currentColor"})}),google:t=>R.jsx("svg",{role:"img",viewBox:"0 0 24 24",...t,children:R.jsx("path",{fill:"currentColor",d:"M12.48 10.92v3.28h7.84c-.24 1.84-.853 3.187-1.787 4.133-1.147 1.147-2.933 2.4-6.053 2.4-4.827 0-8.6-3.893-8.6-8.72s3.773-8.72 8.6-8.72c2.6 0 4.507 1.027 5.907 2.347l2.307-2.307C18.747 1.44 16.133 0 12.48 0 5.867 0 .307 5.387.307 12s5.56 12 12.173 12c3.573 0 6.267-1.173 8.373-3.36 2.16-2.16 2.84-5.213 2.84-7.667 0-.76-.053-1.467-.173-2.053H12.48z"})}),apple:t=>R.jsx("svg",{role:"img",viewBox:"0 0 24 24",...t,children:R.jsx("path",{d:"M12.152 6.896c-.948 0-2.415-1.078-3.96-1.04-2.04.027-3.91 1.183-4.961 3.014-2.117 3.675-.546 9.103 1.519 12.09 1.013 1.454 2.208 3.09 3.792 3.039 1.52-.065 2.09-.987 3.935-.987 1.831 0 2.35.987 3.96.948 1.637-.026 2.676-1.48 3.676-2.948 1.156-1.688 1.636-3.325 1.662-3.415-.039-.013-3.182-1.221-3.22-4.857-.026-3.04 2.48-4.494 2.597-4.559-1.429-2.09-3.623-2.324-4.39-2.376-2-.156-3.675 1.09-4.61 1.09zM15.53 3.83c.843-1.012 1.4-2.427 1.245-3.83-1.207.052-2.662.805-3.532 1.818-.78.896-1.454 2.338-1.273 3.714 1.338.104 2.715-.688 3.559-1.701",fill:"currentColor"})}),paypal:t=>R.jsx("svg",{role:"img",viewBox:"0 0 24 24",...t,children:R.jsx("path",{d:"M7.076 21.337H2.47a.641.641 0 0 1-.633-.74L4.944.901C5.026.382 5.474 0 5.998 0h7.46c2.57 0 4.578.543 5.69 1.81 1.01 1.15 1.304 2.42 1.012 4.287-.023.143-.047.288-.077.437-.983 5.05-4.349 6.797-8.647 6.797h-2.19c-.524 0-.968.382-1.05.9l-1.12 7.106zm14.146-14.42a3.35 3.35 0 0 0-.607-.541c-.013.076-.026.175-.041.254-.93 4.778-4.005 7.201-9.138 7.201h-2.19a.563.563 0 0 0-.556.479l-1.187 7.527h-.506l-.24 1.516a.56.56 0 0 0 .554.647h3.882c.46 0 .85-.334.922-.788.06-.26.76-4.852.816-5.09a.932.932 0 0 1 .923-.788h.58c3.76 0 6.705-1.528 7.565-5.946.36-1.847.174-3.388-.777-4.471z",fill:"currentColor"})}),spinner:t=>R.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",...t,children:R.jsx("path",{d:"M21 12a9 9 0 1 1-6.219-8.56"})})},JC="/edelgram/assets/image1-CoqYZn9M.jpg",ZC="/edelgram/assets/image2-n_CPjltO.jpg",eI="/edelgram/assets/image3-DgA0XuPA.jpg",tI="/edelgram/assets/image4-C82QDRdx.jpg",s3={email:"",password:""},o3=()=>{const{logIn:t,googleSignIn:e}=Au(),[n,r]=D.useState(s3),i=du(),s=async a=>{a.preventDefault();try{console.log("The user info is : ",n),await t(n.email,n.password),i("/edelgram/")}catch(l){console.log("Error: ",l)}},o=async a=>{a.preventDefault();try{await e(),i("/edelgram/")}catch(l){console.log("Error: ",l)}};return R.jsx("div",{className:"bg-slate-800 w-full h-screen",children:R.jsx("div",{className:"container mx-auto p-6 flex h-full",children:R.jsxs("div",{className:"flex justify-center items-center w-full",children:[R.jsx("div",{className:"p-6 w-2/3 hidden lg:block",children:R.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[R.jsx("img",{className:"w-2/3 h-auto aspect-video rounded-3xl place-self-end",src:ZC}),R.jsx("img",{className:"w-2/4 h-auto aspect-auto rounded-3xl",src:JC}),R.jsx("img",{className:"w-2/4 h-auto aspect-auto rounded-3xl place-self-end",src:tI}),R.jsx("img",{className:"w-2/3 h-auto aspect-video rounded-3xl",src:eI})]})}),R.jsx("div",{className:"max-w-sm rounded-xl border bg-card text-card-foreground shadow-sm",children:R.jsx(ly,{children:R.jsxs("form",{onSubmit:s,children:[R.jsxs(uy,{className:"space-y-1",children:[R.jsx(cy,{className:"text-2xl",children:"Edelgram"}),R.jsx(hy,{children:"Enter your email below to create your account"})]}),R.jsxs(dy,{className:"grid gap-4",children:[R.jsx("div",{className:"grid",children:R.jsxs(Yo,{variant:"outline",onClick:o,children:[R.jsx(YC.google,{className:"mr-2 h-4 w-4"}),"Google"]})}),R.jsxs("div",{className:"relative",children:[R.jsx("div",{className:"absolute inset-0 flex items-center",children:R.jsx("span",{className:"w-full border-t"})}),R.jsx("div",{className:"relative flex justify-center text-xs uppercase",children:R.jsx("span",{className:"bg-background px-2 text-muted-foreground",children:"Or continue with"})})]}),R.jsxs("div",{className:"grid gap-2",children:[R.jsx(Mi,{htmlFor:"email",children:"Email"}),R.jsx(jo,{id:"email",type:"email",placeholder:"edelweisss21@example.com",value:n.email,onChange:a=>r({...n,email:a.target.value})})]}),R.jsxs("div",{className:"grid gap-2",children:[R.jsx(Mi,{htmlFor:"password",children:"Password"}),R.jsx(jo,{id:"password",type:"password",value:n.password,onChange:a=>r({...n,password:a.target.value})})]})]}),R.jsxs(fy,{className:"flex flex-col",children:[R.jsx(Yo,{className:"w-full",type:"submit",children:"Login"}),R.jsxs("p",{className:"mt-3 text-sm text-center",children:["Don't have an account?",R.jsx(yh,{to:"/edelgram/signup",children:" Sign up"})]})]})]})})})]})})})},nI="posts",a3=t=>GM(RC(HC,nI),t),l3=t=>{const e=UM(RC(HC,nI),$M("userId","==",t));return qM(e)};/**
 * @license lucide-react v0.390.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const u3=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),rI=(...t)=>t.filter((e,n,r)=>!!e&&r.indexOf(e)===n).join(" ");/**
 * @license lucide-react v0.390.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var c3={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.390.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const h3=D.forwardRef(({color:t="currentColor",size:e=24,strokeWidth:n=2,absoluteStrokeWidth:r,className:i="",children:s,iconNode:o,...a},l)=>D.createElement("svg",{ref:l,...c3,width:e,height:e,stroke:t,strokeWidth:r?Number(n)*24/Number(e):n,className:rI("lucide",i),...a},[...o.map(([c,h])=>D.createElement(c,h)),...Array.isArray(s)?s:[s]]));/**
 * @license lucide-react v0.390.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const d3=(t,e)=>{const n=D.forwardRef(({className:r,...i},s)=>D.createElement(h3,{ref:s,iconNode:e,className:rI(`lucide-${u3(t)}`,r),...i}));return n.displayName=`${t}`,n};/**
 * @license lucide-react v0.390.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const f3=d3("Heart",[["path",{d:"M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.3 1.5 4.05 3 5.5l7 7Z",key:"c3ymky"}]]),p3=({data:t})=>R.jsx(R.Fragment,{children:t.map(e=>R.jsxs("div",{className:"relative",children:[R.jsx("div",{className:"absolute group transition-all duration-200 bg-transparent hover:bg-slate-950 hover:bg-opacity-75 top-0 bottom-0 left-0 right-0 w-full h-full",children:R.jsxs("div",{className:"flex flex-col justify-center items-center w-full h-full",children:[R.jsx(f3,{className:"hidden group-hover:block fill-white"}),R.jsxs("div",{className:"hidden group-hover:block text-white",children:[e.likes," likes"]})]})}),R.jsx("img",{src:`${e.photos[0].cdnUrl}/-/progressive/yes/-/scale_crop/300x300/center/`})]},e.photos[0].uuid))}),m3=()=>{const{user:t}=Au(),[e,n]=D.useState([]),r=async i=>{try{const s=await l3(i),o=[];s.forEach(a=>{const l=a.data(),c={id:a.id,...l};o.push(c)}),n(o)}catch(s){console.error(s)}};return D.useEffect(()=>{t!==null&&r(t.uid)},[]),R.jsx(bd,{children:R.jsx("div",{className:"flex justify-center",children:R.jsxs("div",{className:"border max-w-3xl w-full",children:[R.jsx("h3",{className:"bg-slate-800 text-white text-center text-lg p-2",children:"My Photos"}),R.jsx("div",{className:"p-8",children:R.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-4",children:e?R.jsx(p3,{data:e}):R.jsx("div",{children:"...Loading"})})})]})})})},g3=()=>R.jsx(bd,{children:"Profile"}),y3={email:"",password:"",confirmPassword:""},v3=()=>{const{signUp:t,googleSignIn:e}=Au(),[n,r]=D.useState(y3),i=du(),s=async a=>{a.preventDefault();try{console.log("The user info is : ",n),await t(n.email,n.password),i("/edelgram/")}catch(l){console.log("Error: ",l)}},o=async a=>{a.preventDefault();try{await e(),i("/edelgram/")}catch(l){console.log("Error: ",l)}};return R.jsx("div",{className:"bg-slate-800 w-full h-screen",children:R.jsx("div",{className:"container mx-auto p-6 flex h-full",children:R.jsxs("div",{className:"flex justify-center items-center w-full",children:[R.jsx("div",{className:"p-6 w-2/3 hidden lg:block",children:R.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[R.jsx("img",{className:"w-2/3 h-auto aspect-video rounded-3xl place-self-end",src:ZC}),R.jsx("img",{className:"w-2/4 h-auto aspect-auto rounded-3xl",src:JC}),R.jsx("img",{className:"w-2/4 h-auto aspect-auto rounded-3xl place-self-end",src:tI}),R.jsx("img",{className:"w-2/3 h-auto aspect-video rounded-3xl",src:eI})]})}),R.jsx("div",{className:"max-w-sm rounded-xl border bg-card text-card-foreground shadow-sm",children:R.jsx(ly,{children:R.jsxs("form",{onSubmit:s,children:[R.jsxs(uy,{className:"space-y-1",children:[R.jsx(cy,{className:"text-2xl",children:"Edelgram"}),R.jsx(hy,{children:"Enter your email below to create your account"})]}),R.jsxs(dy,{className:"grid gap-4",children:[R.jsx("div",{className:"grid",children:R.jsxs(Yo,{variant:"outline",onClick:o,children:[R.jsx(YC.google,{className:"mr-2 h-4 w-4"}),"Google"]})}),R.jsxs("div",{className:"relative",children:[R.jsx("div",{className:"absolute inset-0 flex items-center",children:R.jsx("span",{className:"w-full border-t"})}),R.jsx("div",{className:"relative flex justify-center text-xs uppercase",children:R.jsx("span",{className:"bg-background px-2 text-muted-foreground",children:"Or continue with"})})]}),R.jsxs("div",{className:"grid gap-2",children:[R.jsx(Mi,{htmlFor:"email",children:"Email"}),R.jsx(jo,{id:"email",type:"email",placeholder:"edelweisss21@example.com",value:n.email,onChange:a=>r({...n,email:a.target.value})})]}),R.jsxs("div",{className:"grid gap-2",children:[R.jsx(Mi,{htmlFor:"password",children:"Password"}),R.jsx(jo,{id:"password",type:"password",value:n.password,onChange:a=>r({...n,password:a.target.value})})]}),R.jsxs("div",{className:"grid gap-2",children:[R.jsx(Mi,{htmlFor:"confirmpassword",children:"Confirm password"}),R.jsx(jo,{id:"confirmpassword",type:"password",value:n.confirmPassword,onChange:a=>r({...n,confirmPassword:a.target.value})})]})]}),R.jsxs(fy,{className:"flex flex-col",children:[R.jsx(Yo,{className:"w-full",type:"submit",children:"Sign Up"}),R.jsxs("p",{className:"mt-3 text-sm text-center",children:["Already have an account?",R.jsx(yh,{to:"/edelgram/login",children:" Login"})]})]})]})})})]})})})};var _3=Object.defineProperty,w3=(t,e,n)=>e in t?_3(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,py=(t,e,n)=>(w3(t,typeof e!="symbol"?e+"":e,n),n);function E3(t){let e=n=>{var r;for(let i in n)((r=n[i])==null?void 0:r.constructor)===Object&&(n[i]=e(n[i]));return{...n}};return e(t)}var xe=class{constructor(t){t.constructor===Object?this.store=E3(t):(this._storeIsProxy=!0,this.store=t),this.callbackMap=Object.create(null)}static warn(t,e){console.warn(`Symbiote Data: cannot ${t}. Prop name: `+e)}read(t){return!this._storeIsProxy&&!this.store.hasOwnProperty(t)?(xe.warn("read",t),null):this.store[t]}has(t){return this._storeIsProxy?this.store[t]!==void 0:this.store.hasOwnProperty(t)}add(t,e,n=!1){!n&&Object.keys(this.store).includes(t)||(this.store[t]=e,this.notify(t))}pub(t,e){if(!this._storeIsProxy&&!this.store.hasOwnProperty(t)){xe.warn("publish",t);return}this.store[t]=e,this.notify(t)}multiPub(t){for(let e in t)this.pub(e,t[e])}notify(t){this.callbackMap[t]&&this.callbackMap[t].forEach(e=>{e(this.store[t])})}sub(t,e,n=!0){return!this._storeIsProxy&&!this.store.hasOwnProperty(t)?(xe.warn("subscribe",t),null):(this.callbackMap[t]||(this.callbackMap[t]=new Set),this.callbackMap[t].add(e),n&&e(this.store[t]),{remove:()=>{this.callbackMap[t].delete(e),this.callbackMap[t].size||delete this.callbackMap[t]},callback:e})}static registerCtx(t,e=Symbol()){let n=xe.globalStore.get(e);return n?console.warn('State: context UID "'+e+'" already in use'):(n=new xe(t),xe.globalStore.set(e,n)),n}static deleteCtx(t){xe.globalStore.delete(t)}static getCtx(t,e=!0){return xe.globalStore.get(t)||(e&&console.warn('State: wrong context UID - "'+t+'"'),null)}};xe.globalStore=new Map;var pe=Object.freeze({BIND_ATTR:"set",ATTR_BIND_PRFX:"@",EXT_DATA_CTX_PRFX:"*",NAMED_DATA_CTX_SPLTR:"/",CTX_NAME_ATTR:"ctx-name",CTX_OWNER_ATTR:"ctx-owner",CSS_CTX_PROP:"--ctx-name",EL_REF_ATTR:"ref",AUTO_TAG_PRFX:"sym",REPEAT_ATTR:"repeat",REPEAT_ITEM_TAG_ATTR:"repeat-item-tag",SET_LATER_KEY:"__toSetLater__",USE_TPL:"use-template",ROOT_STYLE_ATTR_NAME:"sym-component"}),iI="1234567890QWERTYUIOPASDFGHJKLZXCVBNMqwertyuiopasdfghjklzxcvbnm",b3=iI.length-1,xu=class{static generate(t="XXXXXXXXX-XXX"){let e="";for(let n=0;n<t.length;n++)e+=t[n]==="-"?t[n]:iI.charAt(Math.random()*b3);return e}};function sI(t,e,n){let r=!0,i,s=e.split(".");return s.forEach((o,a)=>{a<s.length-1?t=t[o]:i=o}),t?t[i]=n:r=!1,r}function T3(t){return t.split("-").map((e,n)=>e&&n?e[0].toUpperCase()+e.slice(1):e).join("").split("_").map((e,n)=>e&&n?e.toUpperCase():e).join("")}function C3(t,e){[...t.querySelectorAll(`[${pe.REPEAT_ATTR}]`)].forEach(n=>{let r=n.getAttribute(pe.REPEAT_ITEM_TAG_ATTR),i;if(r&&(i=window.customElements.get(r)),!i){i=class extends e.BaseComponent{constructor(){super(),r||(this.style.display="contents")}};let o=n.innerHTML;i.template=o,i.reg(r)}for(;n.firstChild;)n.firstChild.remove();let s=n.getAttribute(pe.REPEAT_ATTR);e.sub(s,o=>{if(!o){for(;n.firstChild;)n.firstChild.remove();return}let a=[...n.children],l,c=h=>{h.forEach((p,w)=>{if(a[w])if(a[w].set$)setTimeout(()=>{a[w].set$(p)});else for(let E in p)a[w][E]=p[E];else{l||(l=new DocumentFragment);let E=new i;Object.assign(E.init$,p),l.appendChild(E)}}),l&&n.appendChild(l);let f=a.slice(h.length,a.length);for(let p of f)p.remove()};if(o.constructor===Array)c(o);else if(o.constructor===Object){let h=[];for(let f in o){let p=o[f];Object.defineProperty(p,"_KEY_",{value:f,enumerable:!0}),h.push(p)}c(h)}else console.warn("Symbiote repeat data type error:"),console.log(o)}),n.removeAttribute(pe.REPEAT_ATTR),n.removeAttribute(pe.REPEAT_ITEM_TAG_ATTR)})}var fw="__default__";function I3(t,e){if(e.shadowRoot)return;let n=[...t.querySelectorAll("slot")];if(!n.length)return;let r={};n.forEach(i=>{let s=i.getAttribute("name")||fw;r[s]={slot:i,fr:document.createDocumentFragment()}}),e.initChildren.forEach(i=>{var s;let o=fw;i instanceof Element&&i.hasAttribute("slot")&&(o=i.getAttribute("slot"),i.removeAttribute("slot")),(s=r[o])==null||s.fr.appendChild(i)}),Object.values(r).forEach(i=>{if(i.fr.childNodes.length)i.slot.parentNode.replaceChild(i.fr,i.slot);else if(i.slot.childNodes.length){let s=document.createDocumentFragment();s.append(...i.slot.childNodes),i.slot.parentNode.replaceChild(s,i.slot)}else i.slot.remove()})}function S3(t,e){[...t.querySelectorAll(`[${pe.EL_REF_ATTR}]`)].forEach(n=>{let r=n.getAttribute(pe.EL_REF_ATTR);e.ref[r]=n,n.removeAttribute(pe.EL_REF_ATTR)})}function A3(t,e){[...t.querySelectorAll(`[${pe.BIND_ATTR}]`)].forEach(n=>{let i=n.getAttribute(pe.BIND_ATTR).split(";");[...n.attributes].forEach(s=>{if(s.name.startsWith("-")&&s.value){let o=T3(s.name.replace("-",""));i.push(o+":"+s.value),n.removeAttribute(s.name)}}),i.forEach(s=>{if(!s)return;let o=s.split(":").map(h=>h.trim()),a=o[0],l;a.indexOf(pe.ATTR_BIND_PRFX)===0&&(l=!0,a=a.replace(pe.ATTR_BIND_PRFX,""));let c=o[1].split(",").map(h=>h.trim());for(let h of c){let f;h.startsWith("!!")?(f="double",h=h.replace("!!","")):h.startsWith("!")&&(f="single",h=h.replace("!","")),e.sub(h,p=>{f==="double"?p=!!p:f==="single"&&(p=!p),l?(p==null?void 0:p.constructor)===Boolean?p?n.setAttribute(a,""):n.removeAttribute(a):n.setAttribute(a,p):sI(n,a,p)||(n[pe.SET_LATER_KEY]||(n[pe.SET_LATER_KEY]=Object.create(null)),n[pe.SET_LATER_KEY][a]=p)})}}),n.removeAttribute(pe.BIND_ATTR)})}var Bc="{{",fl="}}",x3="skip-text";function k3(t){let e,n=[],r=document.createTreeWalker(t,NodeFilter.SHOW_TEXT,{acceptNode:i=>{var s;return!((s=i.parentElement)!=null&&s.hasAttribute(x3))&&i.textContent.includes(Bc)&&i.textContent.includes(fl)&&1}});for(;e=r.nextNode();)n.push(e);return n}var P3=function(t,e){k3(t).forEach(r=>{let i=[],s;for(;r.textContent.includes(fl);)r.textContent.startsWith(Bc)?(s=r.textContent.indexOf(fl)+fl.length,r.splitText(s),i.push(r)):(s=r.textContent.indexOf(Bc),r.splitText(s)),r=r.nextSibling;i.forEach(o=>{let a=o.textContent.replace(Bc,"").replace(fl,"");o.textContent="",e.sub(a,l=>{o.textContent=l})})})},R3=[C3,I3,S3,A3,P3],Dh="'",oa='"',O3=/\\([0-9a-fA-F]{1,6} ?)/g;function L3(t){return(t[0]===oa||t[0]===Dh)&&(t[t.length-1]===oa||t[t.length-1]===Dh)}function N3(t){return(t[0]===oa||t[0]===Dh)&&(t=t.slice(1)),(t[t.length-1]===oa||t[t.length-1]===Dh)&&(t=t.slice(0,-1)),t}function D3(t){let e="",n="";for(var r=0;r<t.length;r++){const i=t[r+1];t[r]==="\\"&&i==='"'?(e+='\\"',r++):t[r]==='"'&&n!=="\\"?e+='\\"':e+=t[r],n=t[r]}return e}function M3(t){let e=t;L3(t)&&(e=N3(e),e=e.replace(O3,(n,r)=>String.fromCodePoint(parseInt(r.trim(),16))),e=e.replaceAll(`\\
`,"\\n"),e=D3(e),e=oa+e+oa);try{return JSON.parse(e)}catch{throw new Error(`Failed to parse CSS property value: ${e}. Original input: ${t}`)}}var pw=0,lo=null,Tr=null,hi=class extends HTMLElement{constructor(){super(),py(this,"updateCssData",()=>{var t;this.dropCssDataCache(),(t=this.__boundCssProps)==null||t.forEach(e=>{let n=this.getCssData(this.__extractCssName(e),!0);n!==null&&this.$[e]!==n&&(this.$[e]=n)})}),this.init$=Object.create(null),this.cssInit$=Object.create(null),this.tplProcessors=new Set,this.ref=Object.create(null),this.allSubs=new Set,this.pauseRender=!1,this.renderShadow=!1,this.readyToDestroy=!0,this.processInnerHtml=!1,this.allowCustomTemplate=!1,this.ctxOwner=!1}get BaseComponent(){return hi}initCallback(){}__initCallback(){var t;this.__initialized||(this.__initialized=!0,(t=this.initCallback)==null||t.call(this))}render(t,e=this.renderShadow){let n;if((e||this.constructor.__shadowStylesUrl)&&!this.shadowRoot&&this.attachShadow({mode:"open"}),this.allowCustomTemplate){let i=this.getAttribute(pe.USE_TPL);if(i){let s=this.getRootNode(),o=(s==null?void 0:s.querySelector(i))||document.querySelector(i);o?t=o.content.cloneNode(!0):console.warn(`Symbiote template "${i}" is not found...`)}}if(this.processInnerHtml)for(let i of this.tplProcessors)i(this,this);if(t||this.constructor.template){if(this.constructor.template&&!this.constructor.__tpl&&(this.constructor.__tpl=document.createElement("template"),this.constructor.__tpl.innerHTML=this.constructor.template),(t==null?void 0:t.constructor)===DocumentFragment)n=t;else if((t==null?void 0:t.constructor)===String){let i=document.createElement("template");i.innerHTML=t,n=i.content.cloneNode(!0)}else this.constructor.__tpl&&(n=this.constructor.__tpl.content.cloneNode(!0));for(let i of this.tplProcessors)i(n,this)}let r=()=>{n&&(e&&this.shadowRoot.appendChild(n)||this.appendChild(n)),this.__initCallback()};if(this.constructor.__shadowStylesUrl){e=!0;let i=document.createElement("link");i.rel="stylesheet",i.href=this.constructor.__shadowStylesUrl,i.onload=r,this.shadowRoot.prepend(i)}else r()}addTemplateProcessor(t){this.tplProcessors.add(t)}get autoCtxName(){return this.__autoCtxName||(this.__autoCtxName=xu.generate(),this.style.setProperty(pe.CSS_CTX_PROP,`'${this.__autoCtxName}'`)),this.__autoCtxName}get cssCtxName(){return this.getCssData(pe.CSS_CTX_PROP,!0)}get ctxName(){var t;let e=((t=this.getAttribute(pe.CTX_NAME_ATTR))==null?void 0:t.trim())||this.cssCtxName||this.__cachedCtxName||this.autoCtxName;return this.__cachedCtxName=e,e}get localCtx(){return this.__localCtx||(this.__localCtx=xe.registerCtx({},this)),this.__localCtx}get nodeCtx(){return xe.getCtx(this.ctxName,!1)||xe.registerCtx({},this.ctxName)}static __parseProp(t,e){let n,r;if(t.startsWith(pe.EXT_DATA_CTX_PRFX))n=e.nodeCtx,r=t.replace(pe.EXT_DATA_CTX_PRFX,"");else if(t.includes(pe.NAMED_DATA_CTX_SPLTR)){let i=t.split(pe.NAMED_DATA_CTX_SPLTR);n=xe.getCtx(i[0]),r=i[1]}else n=e.localCtx,r=t;return{ctx:n,name:r}}sub(t,e,n=!0){let r=s=>{this.isConnected&&e(s)},i=hi.__parseProp(t,this);i.ctx.has(i.name)?this.allSubs.add(i.ctx.sub(i.name,r,n)):window.setTimeout(()=>{this.allSubs.add(i.ctx.sub(i.name,r,n))})}notify(t){let e=hi.__parseProp(t,this);e.ctx.notify(e.name)}has(t){let e=hi.__parseProp(t,this);return e.ctx.has(e.name)}add(t,e,n=!1){let r=hi.__parseProp(t,this);r.ctx.add(r.name,e,n)}add$(t,e=!1){for(let n in t)this.add(n,t[n],e)}get $(){if(!this.__stateProxy){let t=Object.create(null);this.__stateProxy=new Proxy(t,{set:(e,n,r)=>{let i=hi.__parseProp(n,this);return i.ctx.pub(i.name,r),!0},get:(e,n)=>{let r=hi.__parseProp(n,this);return r.ctx.read(r.name)}})}return this.__stateProxy}set$(t,e=!1){for(let n in t){let r=t[n];e||![String,Number,Boolean].includes(r==null?void 0:r.constructor)?this.$[n]=r:this.$[n]!==r&&(this.$[n]=r)}}get __ctxOwner(){return this.ctxOwner||this.hasAttribute(pe.CTX_OWNER_ATTR)&&this.getAttribute(pe.CTX_OWNER_ATTR)!=="false"}__initDataCtx(){let t=this.constructor.__attrDesc;if(t)for(let e of Object.values(t))Object.keys(this.init$).includes(e)||(this.init$[e]="");for(let e in this.init$)if(e.startsWith(pe.EXT_DATA_CTX_PRFX))this.nodeCtx.add(e.replace(pe.EXT_DATA_CTX_PRFX,""),this.init$[e],this.__ctxOwner);else if(e.includes(pe.NAMED_DATA_CTX_SPLTR)){let n=e.split(pe.NAMED_DATA_CTX_SPLTR),r=n[0].trim(),i=n[1].trim();if(r&&i){let s=xe.getCtx(r,!1);s||(s=xe.registerCtx({},r)),s.add(i,this.init$[e])}}else this.localCtx.add(e,this.init$[e]);for(let e in this.cssInit$)this.bindCssData(e,this.cssInit$[e]);this.__dataCtxInitialized=!0}connectedCallback(){var t;if(this.isConnected){if(this.__disconnectTimeout&&window.clearTimeout(this.__disconnectTimeout),!this.connectedOnce){let e=(t=this.getAttribute(pe.CTX_NAME_ATTR))==null?void 0:t.trim();if(e&&this.style.setProperty(pe.CSS_CTX_PROP,`'${e}'`),this.__initDataCtx(),this[pe.SET_LATER_KEY]){for(let n in this[pe.SET_LATER_KEY])sI(this,n,this[pe.SET_LATER_KEY][n]);delete this[pe.SET_LATER_KEY]}this.initChildren=[...this.childNodes];for(let n of R3)this.addTemplateProcessor(n);if(this.pauseRender)this.__initCallback();else if(this.constructor.__rootStylesLink){let n=this.getRootNode();if(!n)return;if(n==null?void 0:n.querySelector(`link[${pe.ROOT_STYLE_ATTR_NAME}="${this.constructor.is}"]`)){this.render();return}let i=this.constructor.__rootStylesLink.cloneNode(!0);i.setAttribute(pe.ROOT_STYLE_ATTR_NAME,this.constructor.is),i.onload=()=>{this.render()},n.nodeType===Node.DOCUMENT_NODE?n.head.appendChild(i):n.prepend(i)}else this.render()}this.connectedOnce=!0}}destroyCallback(){}disconnectedCallback(){this.connectedOnce&&(this.dropCssDataCache(),this.readyToDestroy&&(this.__disconnectTimeout&&window.clearTimeout(this.__disconnectTimeout),this.__disconnectTimeout=window.setTimeout(()=>{this.destroyCallback();for(let t of this.allSubs)t.remove(),this.allSubs.delete(t);for(let t of this.tplProcessors)this.tplProcessors.delete(t);Tr==null||Tr.delete(this.updateCssData),Tr!=null&&Tr.size||(lo==null||lo.disconnect(),lo=null,Tr=null)},100)))}static reg(t,e=!1){t||(pw++,t=`${pe.AUTO_TAG_PRFX}-${pw}`),this.__tag=t;let n=window.customElements.get(t);if(n){!e&&n!==this&&console.warn([`Element with tag name "${t}" already registered.`,`You're trying to override it with another class "${this.name}".`,"This is most likely a mistake.","New element will not be registered."].join(`
`));return}window.customElements.define(t,e?class extends this{}:this)}static get is(){return this.__tag||this.reg(),this.__tag}static bindAttributes(t){this.observedAttributes=Object.keys(t),this.__attrDesc=t}attributeChangedCallback(t,e,n){var r;if(e===n)return;let i=(r=this.constructor.__attrDesc)==null?void 0:r[t];i?this.__dataCtxInitialized?this.$[i]=n:this.init$[i]=n:this[t]=n}getCssData(t,e=!1){if(this.__cssDataCache||(this.__cssDataCache=Object.create(null)),!Object.keys(this.__cssDataCache).includes(t)){this.__computedStyle||(this.__computedStyle=window.getComputedStyle(this));let n=this.__computedStyle.getPropertyValue(t).trim();try{this.__cssDataCache[t]=M3(n)}catch{!e&&console.warn(`CSS Data error: ${t}`),this.__cssDataCache[t]=null}}return this.__cssDataCache[t]}__extractCssName(t){return t.split("--").map((e,n)=>n===0?"":e).join("--")}__initStyleAttrObserver(){Tr||(Tr=new Set),Tr.add(this.updateCssData),lo||(lo=new MutationObserver(t=>{t[0].type==="attributes"&&Tr.forEach(e=>{e()})}),lo.observe(document,{childList:!0,subtree:!0,attributes:!0,attributeFilter:["style"]}))}bindCssData(t,e=""){this.__boundCssProps||(this.__boundCssProps=new Set),this.__boundCssProps.add(t);let n=this.getCssData(this.__extractCssName(t),!0);n===null&&(n=e),this.add(t,n),this.__initStyleAttrObserver()}dropCssDataCache(){this.__cssDataCache=null,this.__computedStyle=null}defineAccessor(t,e,n){let r="__"+t;this[r]=this[t],Object.defineProperty(this,t,{set:i=>{this[r]=i,n?window.setTimeout(()=>{e==null||e(i)}):e==null||e(i)},get:()=>this[r]}),this[t]=this[r]}static set shadowStyles(t){let e=new Blob([t],{type:"text/css"});this.__shadowStylesUrl=URL.createObjectURL(e)}static set rootStyles(t){if(!this.__rootStylesLink){let e=new Blob([t],{type:"text/css"}),n=URL.createObjectURL(e),r=document.createElement("link");r.href=n,r.rel="stylesheet",this.__rootStylesLink=r}}},Td=hi;py(Td,"template");function oI(t,e){for(let n in e)n.includes("-")?t.style.setProperty(n,e[n]):t.style[n]=e[n]}function V3(t,e){for(let n in e)e[n].constructor===Boolean?e[n]?t.setAttribute(n,""):t.removeAttribute(n):t.setAttribute(n,e[n])}function my(t={tag:"div"}){let e=document.createElement(t.tag);if(t.attributes&&V3(e,t.attributes),t.styles&&oI(e,t.styles),t.properties)for(let n in t.properties)e[n]=t.properties[n];return t.processors&&t.processors.forEach(n=>{n(e)}),t.children&&t.children.forEach(n=>{let r=my(n);e.appendChild(r)}),e}var aI="idb-store-ready",U3="symbiote-db",$3="symbiote-idb-update_",F3=class{_notifyWhenReady(t=null){window.dispatchEvent(new CustomEvent(aI,{detail:{dbName:this.name,storeName:this.storeName,event:t}}))}get _updEventName(){return $3+this.name}_getUpdateEvent(t){return new CustomEvent(this._updEventName,{detail:{key:this.name,newValue:t}})}_notifySubscribers(t){window.localStorage.removeItem(this.name),window.localStorage.setItem(this.name,t),window.dispatchEvent(this._getUpdateEvent(t))}constructor(t,e){this.name=t,this.storeName=e,this.version=1,this.request=window.indexedDB.open(this.name,this.version),this.request.onupgradeneeded=n=>{this.db=n.target.result,this.objStore=this.db.createObjectStore(e,{keyPath:"_key"}),this.objStore.transaction.oncomplete=r=>{this._notifyWhenReady(r)}},this.request.onsuccess=n=>{this.db=n.target.result,this._notifyWhenReady(n)},this.request.onerror=n=>{console.error(n)},this._subscriptionsMap={},this._updateHandler=n=>{n.key===this.name&&this._subscriptionsMap[n.newValue]&&this._subscriptionsMap[n.newValue].forEach(async i=>{i(await this.read(n.newValue))})},this._localUpdateHandler=n=>{this._updateHandler(n.detail)},window.addEventListener("storage",this._updateHandler),window.addEventListener(this._updEventName,this._localUpdateHandler)}read(t){let n=this.db.transaction(this.storeName,"readwrite").objectStore(this.storeName).get(t);return new Promise((r,i)=>{n.onsuccess=s=>{var o;(o=s.target.result)!=null&&o._value?r(s.target.result._value):(r(null),console.warn(`IDB: cannot read "${t}"`))},n.onerror=s=>{i(s)}})}write(t,e,n=!1){let r={_key:t,_value:e},s=this.db.transaction(this.storeName,"readwrite").objectStore(this.storeName).put(r);return new Promise((o,a)=>{s.onsuccess=l=>{n||this._notifySubscribers(t),o(l.target.result)},s.onerror=l=>{a(l)}})}delete(t,e=!1){let r=this.db.transaction(this.storeName,"readwrite").objectStore(this.storeName).delete(t);return new Promise((i,s)=>{r.onsuccess=o=>{e||this._notifySubscribers(t),i(o)},r.onerror=o=>{s(o)}})}getAll(){let e=this.db.transaction(this.storeName,"readwrite").objectStore(this.storeName).getAll();return new Promise((n,r)=>{e.onsuccess=i=>{let s=i.target.result;n(s.map(o=>o._value))},e.onerror=i=>{r(i)}})}subscribe(t,e){this._subscriptionsMap[t]||(this._subscriptionsMap[t]=new Set);let n=this._subscriptionsMap[t];return n.add(e),{remove:()=>{n.delete(e),n.size||delete this._subscriptionsMap[t]}}}stop(){window.removeEventListener("storage",this._updateHandler),this._subscriptionsMap=null,lI.clear(this.name)}},lI=class{static get readyEventName(){return aI}static open(t=U3,e="store"){let n=t+"/"+e;return this._reg[n]||(this._reg[n]=new F3(t,e)),this._reg[n]}static clear(t){window.indexedDB.deleteDatabase(t);for(let e in this._reg)e.split("/")[0]===t&&delete this._reg[e]}};py(lI,"_reg",Object.create(null));const j3=20,tt=Object.freeze({FILE_ADDED:"file-added",FILE_REMOVED:"file-removed",FILE_UPLOAD_START:"file-upload-start",FILE_UPLOAD_PROGRESS:"file-upload-progress",FILE_UPLOAD_SUCCESS:"file-upload-success",FILE_UPLOAD_FAILED:"file-upload-failed",FILE_URL_CHANGED:"file-url-changed",MODAL_OPEN:"modal-open",MODAL_CLOSE:"modal-close",DONE_CLICK:"done-click",UPLOAD_CLICK:"upload-click",ACTIVITY_CHANGE:"activity-change",COMMON_UPLOAD_START:"common-upload-start",COMMON_UPLOAD_PROGRESS:"common-upload-progress",COMMON_UPLOAD_SUCCESS:"common-upload-success",COMMON_UPLOAD_FAILED:"common-upload-failed",CHANGE:"change",GROUP_CREATED:"group-created"});class z3{constructor(e){V(this,"_timeoutStore",new Map);V(this,"_targets",new Set);V(this,"_debugPrint",null);this._debugPrint=e}bindTarget(e){this._targets.add(e)}unbindTarget(e){this._targets.delete(e)}_dispatch(e,n){var r;for(const i of this._targets)i.dispatchEvent(new CustomEvent(e,{detail:n}));(r=this._debugPrint)==null||r.call(this,()=>{const i=n&&typeof n=="object"?{...n}:n;return[`event "${e}"`,i]})}emit(e,n,{debounce:r}={}){if(typeof r!="number"&&!r){this._dispatch(e,typeof n=="function"?n():n);return}this._timeoutStore.has(e)&&window.clearTimeout(this._timeoutStore.get(e));const i=typeof r=="number"?r:j3,s=window.setTimeout(()=>{this._dispatch(e,typeof n=="function"?n():n),this._timeoutStore.delete(e)},i);this._timeoutStore.set(e,s)}}function Dn(t,e){let n;const r=(...i)=>{clearTimeout(n),n=setTimeout(()=>t(...i),e)};return r.cancel=()=>{clearTimeout(n)},r}const mw="--uploadcare-blocks-window-height";class Mh{static registerClient(e){this.clientsRegistry.size===0&&this.attachTracker(),this.clientsRegistry.add(e)}static unregisterClient(e){this.clientsRegistry.delete(e),this.clientsRegistry.size===0&&this.detachTracker()}static attachTracker(){window.addEventListener("resize",this.flush,{passive:!0,capture:!0}),this.flush()}static detachTracker(){window.removeEventListener("resize",this.flush,{capture:!0}),document.documentElement.style.removeProperty(mw)}}V(Mh,"clientsRegistry",new Set),V(Mh,"flush",Dn(()=>{document.documentElement.style.setProperty(mw,`${window.innerHeight}px`)},100));const B3=t=>{var r;const e=new Intl.Locale(t);let n="ltr";return typeof e.getTextInfo=="function"&&e.getTextInfo().direction?n=e.getTextInfo().direction:"textInfo"in e&&((r=e.textInfo)!=null&&r.direction)&&(n=e.textInfo.direction),n},uI=(t,e)=>new Intl.PluralRules(t).select(e),H3=t=>t,um="{{",cI="}}",gw="plural:";function cm(t,e,n={}){var o;let{openToken:r=um,closeToken:i=cI,transform:s=H3}=n;for(let a in e){let l=(o=e[a])==null?void 0:o.toString();t=t.replaceAll(r+a+i,typeof l=="string"?s(l):l)}return t}function W3(t){const e=[];let n=t.indexOf(um);for(;n!==-1;){const r=t.indexOf(cI,n),i=t.substring(n+2,r);if(i.startsWith(gw)){const s=t.substring(n+2,r).replace(gw,""),o=s.substring(0,s.indexOf("(")),a=s.substring(s.indexOf("(")+1,s.indexOf(")"));e.push({variable:i,pluralKey:o,countVariable:a})}n=t.indexOf(um,r)}return e}const q3=({element:t,attribute:e,onSuccess:n,onTimeout:r,timeout:i=300})=>{const s=t.getAttribute(e);if(s!==null){n(s);return}const o=new MutationObserver(c=>{const h=c[c.length-1];l(h)});o.observe(t,{attributes:!0,attributeFilter:[e]});const a=setTimeout(()=>{o.disconnect(),r()},i),l=c=>{const h=t.getAttribute(e);c.type==="attributes"&&c.attributeName===e&&h!==null&&(clearTimeout(a),o.disconnect(),n(h))}};function yw(t){return Object.prototype.toString.call(t)==="[object Object]"}const G3=/\W|_/g;function K3(t){return t.split(G3).map((e,n)=>e.charAt(0)[n>0?"toUpperCase":"toLowerCase"]()+e.slice(1)).join("")}function vw(t,{ignoreKeys:e}={ignoreKeys:[]}){return Array.isArray(t)?t.map(n=>Yr(n,{ignoreKeys:e})):t}function Yr(t,{ignoreKeys:e}={ignoreKeys:[]}){if(Array.isArray(t))return vw(t,{ignoreKeys:e});if(!yw(t))return t;const n={};for(const r of Object.keys(t)){let i=t[r];if(e.includes(r)){n[r]=i;continue}yw(i)?i=Yr(i,{ignoreKeys:e}):Array.isArray(i)&&(i=vw(i,{ignoreKeys:e})),n[K3(r)]=i}return n}const Q3=t=>new Promise(e=>setTimeout(e,t));function hI({libraryName:t,libraryVersion:e,userAgent:n,publicKey:r="",integration:i=""}){const s="JavaScript";if(typeof n=="string")return n;if(typeof n=="function")return n({publicKey:r,libraryName:t,libraryVersion:e,languageName:s,integration:i});const o=[t,e,r].filter(Boolean).join("/"),a=[s,i].filter(Boolean).join("; ");return`${o} (${a})`}const X3={factor:2,time:100};function Y3(t,e=X3){let n=0;function r(i){const s=Math.round(e.time*e.factor**n);return i({attempt:n,retry:a=>Q3(a??s).then(()=>(n+=1,r(i)))})}return r(t)}class gy extends Error{}class ku extends gy{constructor(n){super();V(this,"originalProgressEvent");this.name="NetworkError",this.message="Network error",Object.setPrototypeOf(this,ku.prototype),this.originalProgressEvent=n}}const Cd=(t,e)=>{t&&(t.aborted?Promise.resolve().then(e):t.addEventListener("abort",()=>e(),{once:!0}))};class Fs extends gy{constructor(n="Request canceled"){super(n);V(this,"isCancel",!0);this.name="CancelError",Object.setPrototypeOf(this,Fs.prototype)}}const J3=500,dI=({check:t,interval:e=J3,timeout:n,signal:r})=>new Promise((i,s)=>{let o,a;Cd(r,()=>{o&&clearTimeout(o),s(new Fs("Poll cancelled"))}),n&&(a=setTimeout(()=>{o&&clearTimeout(o),s(new Fs("Timed out"))},n));const l=()=>{try{Promise.resolve(t(r)).then(c=>{c?(a&&clearTimeout(a),i(c)):o=setTimeout(l,e)}).catch(c=>{a&&clearTimeout(a),s(c)})}catch(c){a&&clearTimeout(a),s(c)}};o=setTimeout(l,0)}),Te={baseCDN:"https://ucarecdn.com",baseURL:"https://upload.uploadcare.com",maxContentLength:50*1024*1024,retryThrottledRequestMaxTimes:1,retryNetworkErrorMaxTimes:3,multipartMinFileSize:25*1024*1024,multipartChunkSize:5*1024*1024,multipartMinLastPartSize:1024*1024,maxConcurrentRequests:4,pollingTimeoutMilliseconds:1e4,pusherKey:"79ae88bd931ea68464d9"},Id="application/octet-stream",fI="original",ts=({method:t,url:e,data:n,headers:r={},signal:i,onProgress:s})=>new Promise((o,a)=>{const l=new XMLHttpRequest,c=(t==null?void 0:t.toUpperCase())||"GET";let h=!1;l.open(c,e,!0),r&&Object.entries(r).forEach(f=>{const[p,w]=f;typeof w<"u"&&!Array.isArray(w)&&l.setRequestHeader(p,w)}),l.responseType="text",Cd(i,()=>{h=!0,l.abort(),a(new Fs)}),l.onload=()=>{if(l.status!=200)a(new Error(`Error ${l.status}: ${l.statusText}`));else{const f={method:c,url:e,data:n,headers:r||void 0,signal:i,onProgress:s},p=l.getAllResponseHeaders().trim().split(/[\r\n]+/),w={};p.forEach(function(P){const T=P.split(": "),_=T.shift(),C=T.join(": ");_&&typeof _<"u"&&(w[_]=C)});const E=l.response,S=l.status;o({request:f,data:E,headers:w,status:S})}},l.onerror=f=>{h||a(new ku(f))},s&&typeof s=="function"&&(l.upload.onprogress=f=>{f.lengthComputable?s({isComputable:!0,value:f.loaded/f.total}):s({isComputable:!1})}),n?l.send(n):l.send()});function Z3(t,...e){return t}const e5=({name:t})=>t?[t]:[],t5=Z3;var n5=()=>new FormData;const pI=t=>!1,Sd=t=>typeof Blob<"u"&&t instanceof Blob,Ad=t=>typeof File<"u"&&t instanceof File,xd=t=>!!t&&typeof t=="object"&&!Array.isArray(t)&&"uri"in t&&typeof t.uri=="string",ba=t=>Sd(t)||Ad(t)||pI()||xd(t),r5=t=>typeof t=="string"||typeof t=="number"||typeof t>"u",i5=t=>!!t&&typeof t=="object"&&!Array.isArray(t),s5=t=>!!t&&typeof t=="object"&&"data"in t&&ba(t.data);function mI(t,e,n){if(Array.isArray(n))for(const r of n)mI(t,`${e}[]`,r);else if(s5(n)){const{name:r,contentType:i}=n,s=t5(n.data,r,i??Id),o=e5({name:r,contentType:i});t.push([e,s,...o])}else if(i5(n))for(const[r,i]of Object.entries(n))typeof i<"u"&&t.push([`${e}[${r}]`,String(i)]);else r5(n)&&n&&t.push([e,n.toString()])}function o5(t){const e=[];for(const[n,r]of Object.entries(t))mI(e,n,r);return e}function kd(t){const e=n5(),n=o5(t);for(const r of n){const[i,s,...o]=r;e.append(i,s,...o)}return e}class un extends gy{constructor(n,r,i,s,o){super();V(this,"code");V(this,"request");V(this,"response");V(this,"headers");this.name="UploadError",this.message=n,this.code=r,this.request=i,this.response=s,this.headers=o,Object.setPrototypeOf(this,un.prototype)}}const a5=t=>{const e=new URLSearchParams;for(const[n,r]of Object.entries(t))r&&typeof r=="object"&&!Array.isArray(r)?Object.entries(r).filter(i=>i[1]??!1).forEach(i=>e.set(`${n}[${i[0]}]`,String(i[1]))):Array.isArray(r)?r.forEach(i=>{e.append(`${n}[]`,i)}):typeof r=="string"&&r?e.set(n,r):typeof r=="number"&&e.set(n,r.toString());return e.toString()},qr=(t,e,n)=>{const r=new URL(t);return r.pathname=(r.pathname+e).replace("//","/"),n&&(r.search=a5(n)),r.toString()};var l5="6.14.1";const u5="UploadcareUploadClient",c5=l5;function qs(t){return hI({libraryName:u5,libraryVersion:c5,...t})}const h5="RequestThrottledError",_w=15e3,d5=1e3;function f5(t){const{headers:e}=t||{};if(!e||typeof e["retry-after"]!="string")return _w;const n=parseInt(e["retry-after"],10);return Number.isFinite(n)?n*1e3:_w}function ns(t,e){const{retryThrottledRequestMaxTimes:n,retryNetworkErrorMaxTimes:r}=e;return Y3(({attempt:i,retry:s})=>t().catch(o=>{if("response"in o&&(o==null?void 0:o.code)===h5&&i<n)return s(f5(o));if(o instanceof ku&&i<r)return s((i+1)*d5);throw o}))}const gI=t=>{let e="";return(Sd(t)||Ad(t)||xd(t))&&(e=t.type),e||Id},yI=t=>{let e="";return Ad(t)&&t.name?e=t.name:Sd(t)||pI()?e="":xd(t)&&t.name&&(e=t.name),e||fI};function yy(t){return typeof t>"u"||t==="auto"?"auto":t?"1":"0"}function p5(t,{publicKey:e,fileName:n,contentType:r,baseURL:i=Te.baseURL,secureSignature:s,secureExpire:o,store:a,signal:l,onProgress:c,source:h="local",integration:f,userAgent:p,retryThrottledRequestMaxTimes:w=Te.retryThrottledRequestMaxTimes,retryNetworkErrorMaxTimes:E=Te.retryNetworkErrorMaxTimes,metadata:S}){return ns(()=>ts({method:"POST",url:qr(i,"/base/",{jsonerrors:1}),headers:{"X-UC-User-Agent":qs({publicKey:e,integration:f,userAgent:p})},data:kd({file:{data:t,name:n||yI(t),contentType:r||gI(t)},UPLOADCARE_PUB_KEY:e,UPLOADCARE_STORE:yy(a),signature:s,expire:o,source:h,metadata:S}),signal:l,onProgress:c}).then(({data:P,headers:T,request:_})=>{const C=Yr(JSON.parse(P));if("error"in C)throw new un(C.error.content,C.error.errorCode,_,C,T);return C}),{retryNetworkErrorMaxTimes:E,retryThrottledRequestMaxTimes:w})}var hm;(function(t){t.Token="token",t.FileInfo="file_info"})(hm||(hm={}));function m5(t,{publicKey:e,baseURL:n=Te.baseURL,store:r,fileName:i,checkForUrlDuplicates:s,saveUrlForRecurrentUploads:o,secureSignature:a,secureExpire:l,source:c="url",signal:h,integration:f,userAgent:p,retryThrottledRequestMaxTimes:w=Te.retryThrottledRequestMaxTimes,retryNetworkErrorMaxTimes:E=Te.retryNetworkErrorMaxTimes,metadata:S}){return ns(()=>ts({method:"POST",headers:{"X-UC-User-Agent":qs({publicKey:e,integration:f,userAgent:p})},url:qr(n,"/from_url/",{jsonerrors:1,pub_key:e,source_url:t,store:yy(r),filename:i,check_URL_duplicates:s?1:void 0,save_URL_duplicates:o?1:void 0,signature:a,expire:l,source:c,metadata:S}),signal:h}).then(({data:P,headers:T,request:_})=>{const C=Yr(JSON.parse(P));if("error"in C)throw new un(C.error.content,C.error.errorCode,_,C,T);return C}),{retryNetworkErrorMaxTimes:E,retryThrottledRequestMaxTimes:w})}var rn;(function(t){t.Unknown="unknown",t.Waiting="waiting",t.Progress="progress",t.Error="error",t.Success="success"})(rn||(rn={}));const g5=t=>"status"in t&&t.status===rn.Error;function y5(t,{publicKey:e,baseURL:n=Te.baseURL,signal:r,integration:i,userAgent:s,retryThrottledRequestMaxTimes:o=Te.retryThrottledRequestMaxTimes,retryNetworkErrorMaxTimes:a=Te.retryNetworkErrorMaxTimes}={}){return ns(()=>ts({method:"GET",headers:e?{"X-UC-User-Agent":qs({publicKey:e,integration:i,userAgent:s})}:void 0,url:qr(n,"/from_url/status/",{jsonerrors:1,token:t}),signal:r}).then(({data:l,headers:c,request:h})=>{const f=Yr(JSON.parse(l));if("error"in f&&!g5(f))throw new un(f.error.content,f.error.errorCode,h,f,c);return f}),{retryNetworkErrorMaxTimes:a,retryThrottledRequestMaxTimes:o})}function v5(t,{publicKey:e,baseURL:n=Te.baseURL,jsonpCallback:r,secureSignature:i,secureExpire:s,signal:o,source:a,integration:l,userAgent:c,retryThrottledRequestMaxTimes:h=Te.retryThrottledRequestMaxTimes,retryNetworkErrorMaxTimes:f=Te.retryNetworkErrorMaxTimes}){return ns(()=>ts({method:"POST",headers:{"X-UC-User-Agent":qs({publicKey:e,integration:l,userAgent:c})},url:qr(n,"/group/",{jsonerrors:1}),data:kd({files:t,callback:r,pub_key:e,signature:i,expire:s,source:a}),signal:o}).then(({data:p,headers:w,request:E})=>{const S=Yr(JSON.parse(p));if("error"in S)throw new un(S.error.content,S.error.errorCode,E,S,w);return S}),{retryNetworkErrorMaxTimes:f,retryThrottledRequestMaxTimes:h})}function vI(t,{publicKey:e,baseURL:n=Te.baseURL,signal:r,source:i,integration:s,userAgent:o,retryThrottledRequestMaxTimes:a=Te.retryThrottledRequestMaxTimes,retryNetworkErrorMaxTimes:l=Te.retryNetworkErrorMaxTimes}){return ns(()=>ts({method:"GET",headers:{"X-UC-User-Agent":qs({publicKey:e,integration:s,userAgent:o})},url:qr(n,"/info/",{jsonerrors:1,pub_key:e,file_id:t,source:i}),signal:r}).then(({data:c,headers:h,request:f})=>{const p=Yr(JSON.parse(c));if("error"in p)throw new un(p.error.content,p.error.errorCode,f,p,h);return p}),{retryThrottledRequestMaxTimes:a,retryNetworkErrorMaxTimes:l})}function _5(t,{publicKey:e,contentType:n,fileName:r,multipartChunkSize:i=Te.multipartChunkSize,baseURL:s="",secureSignature:o,secureExpire:a,store:l,signal:c,source:h="local",integration:f,userAgent:p,retryThrottledRequestMaxTimes:w=Te.retryThrottledRequestMaxTimes,retryNetworkErrorMaxTimes:E=Te.retryNetworkErrorMaxTimes,metadata:S}){return ns(()=>ts({method:"POST",url:qr(s,"/multipart/start/",{jsonerrors:1}),headers:{"X-UC-User-Agent":qs({publicKey:e,integration:f,userAgent:p})},data:kd({filename:r||fI,size:t,content_type:n||Id,part_size:i,UPLOADCARE_STORE:yy(l),UPLOADCARE_PUB_KEY:e,signature:o,expire:a,source:h,metadata:S}),signal:c}).then(({data:P,headers:T,request:_})=>{const C=Yr(JSON.parse(P));if("error"in C)throw new un(C.error.content,C.error.errorCode,_,C,T);return C.parts=Object.keys(C.parts).map(N=>C.parts[Number(N)]),C}),{retryThrottledRequestMaxTimes:w,retryNetworkErrorMaxTimes:E})}function w5(t,e,{contentType:n,signal:r,onProgress:i,retryThrottledRequestMaxTimes:s=Te.retryThrottledRequestMaxTimes,retryNetworkErrorMaxTimes:o=Te.retryNetworkErrorMaxTimes}){return ns(()=>ts({method:"PUT",url:e,data:t,onProgress:i,signal:r,headers:{"Content-Type":n||Id}}).then(a=>(i&&i({isComputable:!0,value:1}),a)).then(({status:a})=>({code:a})),{retryThrottledRequestMaxTimes:s,retryNetworkErrorMaxTimes:o})}function E5(t,{publicKey:e,baseURL:n=Te.baseURL,source:r="local",signal:i,integration:s,userAgent:o,retryThrottledRequestMaxTimes:a=Te.retryThrottledRequestMaxTimes,retryNetworkErrorMaxTimes:l=Te.retryNetworkErrorMaxTimes}){return ns(()=>ts({method:"POST",url:qr(n,"/multipart/complete/",{jsonerrors:1}),headers:{"X-UC-User-Agent":qs({publicKey:e,integration:s,userAgent:o})},data:kd({uuid:t,UPLOADCARE_PUB_KEY:e,source:r}),signal:i}).then(({data:c,headers:h,request:f})=>{const p=Yr(JSON.parse(c));if("error"in p)throw new un(p.error.content,p.error.errorCode,f,p,h);return p}),{retryThrottledRequestMaxTimes:a,retryNetworkErrorMaxTimes:l})}function vy(t,{publicKey:e,baseURL:n,source:r,integration:i,userAgent:s,retryThrottledRequestMaxTimes:o,retryNetworkErrorMaxTimes:a,signal:l,onProgress:c}){return dI({check:h=>vI(t,{publicKey:e,baseURL:n,signal:h,source:r,integration:i,userAgent:s,retryThrottledRequestMaxTimes:o,retryNetworkErrorMaxTimes:a}).then(f=>f.isReady?f:(c&&c({isComputable:!0,value:1}),!1)),signal:l})}function b5(t){return"defaultEffects"in t}class Ta{constructor(e,{baseCDN:n=Te.baseCDN,fileName:r}={}){V(this,"uuid");V(this,"name",null);V(this,"size",null);V(this,"isStored",null);V(this,"isImage",null);V(this,"mimeType",null);V(this,"cdnUrl",null);V(this,"s3Url",null);V(this,"originalFilename",null);V(this,"imageInfo",null);V(this,"videoInfo",null);V(this,"contentInfo",null);V(this,"metadata",null);V(this,"s3Bucket",null);V(this,"defaultEffects",null);const{uuid:i,s3Bucket:s}=e,o=qr(n,`${i}/`),a=s?qr(`https://${s}.s3.amazonaws.com/`,`${i}/${e.filename}`):null;this.uuid=i,this.name=r||e.filename,this.size=e.size,this.isStored=e.isStored,this.isImage=e.isImage,this.mimeType=e.mimeType,this.cdnUrl=o,this.originalFilename=e.originalFilename,this.imageInfo=e.imageInfo,this.videoInfo=e.videoInfo,this.contentInfo=e.contentInfo,this.metadata=e.metadata||null,this.s3Bucket=s||null,this.s3Url=a,b5(e)&&(this.defaultEffects=e.defaultEffects)}}const T5=(t,{publicKey:e,fileName:n,baseURL:r,secureSignature:i,secureExpire:s,store:o,contentType:a,signal:l,onProgress:c,source:h,integration:f,userAgent:p,retryThrottledRequestMaxTimes:w,retryNetworkErrorMaxTimes:E,baseCDN:S,metadata:P})=>p5(t,{publicKey:e,fileName:n,contentType:a,baseURL:r,secureSignature:i,secureExpire:s,store:o,signal:l,onProgress:c,source:h,integration:f,userAgent:p,retryThrottledRequestMaxTimes:w,retryNetworkErrorMaxTimes:E,metadata:P}).then(({file:T})=>vy(T,{publicKey:e,baseURL:r,source:h,integration:f,userAgent:p,retryThrottledRequestMaxTimes:w,retryNetworkErrorMaxTimes:E,onProgress:c,signal:l})).then(T=>new Ta(T,{baseCDN:S})),C5=(t,{publicKey:e,fileName:n,baseURL:r,signal:i,onProgress:s,source:o,integration:a,userAgent:l,retryThrottledRequestMaxTimes:c,retryNetworkErrorMaxTimes:h,baseCDN:f})=>vI(t,{publicKey:e,baseURL:r,signal:i,source:o,integration:a,userAgent:l,retryThrottledRequestMaxTimes:c,retryNetworkErrorMaxTimes:h}).then(p=>new Ta(p,{baseCDN:f,fileName:n})).then(p=>(s&&s({isComputable:!0,value:1}),p)),I5=(t,{signal:e}={})=>{let n=null,r=null;const i=t.map(()=>new AbortController),s=o=>()=>{r=o,i.forEach((a,l)=>l!==o&&a.abort())};return Cd(e,()=>{i.forEach(o=>o.abort())}),Promise.all(t.map((o,a)=>{const l=s(a);return Promise.resolve().then(()=>o({stopRace:l,signal:i[a].signal})).then(c=>(l(),c)).catch(c=>(n=c,null))})).then(o=>{if(r===null)throw n;return o[r]})};var S5=window.WebSocket;class A5{constructor(){V(this,"events",Object.create({}))}emit(e,n){var r;(r=this.events[e])==null||r.forEach(i=>i(n))}on(e,n){this.events[e]=this.events[e]||[],this.events[e].push(n)}off(e,n){n?this.events[e]=this.events[e].filter(r=>r!==n):this.events[e]=[]}}const x5=(t,e)=>t==="success"?{status:rn.Success,...e}:t==="progress"?{status:rn.Progress,...e}:{status:rn.Error,...e};class k5{constructor(e,n=3e4){V(this,"key");V(this,"disconnectTime");V(this,"ws");V(this,"queue",[]);V(this,"isConnected",!1);V(this,"subscribers",0);V(this,"emmitter",new A5);V(this,"disconnectTimeoutId",null);this.key=e,this.disconnectTime=n}connect(){if(this.disconnectTimeoutId&&clearTimeout(this.disconnectTimeoutId),!this.isConnected&&!this.ws){const e=`wss://ws.pusherapp.com/app/${this.key}?protocol=5&client=js&version=1.12.2`;this.ws=new S5(e),this.ws.addEventListener("error",n=>{this.emmitter.emit("error",new Error(n.message))}),this.emmitter.on("connected",()=>{this.isConnected=!0,this.queue.forEach(n=>this.send(n.event,n.data)),this.queue=[]}),this.ws.addEventListener("message",n=>{const r=JSON.parse(n.data.toString());switch(r.event){case"pusher:connection_established":{this.emmitter.emit("connected",void 0);break}case"pusher:ping":{this.send("pusher:pong",{});break}case"progress":case"success":case"fail":this.emmitter.emit(r.channel,x5(r.event,JSON.parse(r.data)))}})}}disconnect(){const e=()=>{var n;(n=this.ws)==null||n.close(),this.ws=void 0,this.isConnected=!1};this.disconnectTime?this.disconnectTimeoutId=setTimeout(()=>{e()},this.disconnectTime):e()}send(e,n){var i;const r=JSON.stringify({event:e,data:n});(i=this.ws)==null||i.send(r)}subscribe(e,n){this.subscribers+=1,this.connect();const r=`task-status-${e}`,i={event:"pusher:subscribe",data:{channel:r}};this.emmitter.on(r,n),this.isConnected?this.send(i.event,i.data):this.queue.push(i)}unsubscribe(e){this.subscribers-=1;const n=`task-status-${e}`,r={event:"pusher:unsubscribe",data:{channel:n}};this.emmitter.off(n),this.isConnected?this.send(r.event,r.data):this.queue=this.queue.filter(i=>i.data.channel!==n),this.subscribers===0&&this.disconnect()}onError(e){return this.emmitter.on("error",e),()=>this.emmitter.off("error",e)}}let Lf=null;const _y=t=>{if(!Lf){const e=typeof window>"u"?0:3e4;Lf=new k5(t,e)}return Lf},P5=t=>{_y(t).connect()};function R5({token:t,publicKey:e,baseURL:n,integration:r,userAgent:i,retryThrottledRequestMaxTimes:s,retryNetworkErrorMaxTimes:o,onProgress:a,signal:l}){return dI({check:c=>y5(t,{publicKey:e,baseURL:n,integration:r,userAgent:i,retryThrottledRequestMaxTimes:s,retryNetworkErrorMaxTimes:o,signal:c}).then(h=>{switch(h.status){case rn.Error:return new un(h.error,h.errorCode);case rn.Waiting:return!1;case rn.Unknown:return new un(`Token "${t}" was not found.`);case rn.Progress:return a&&(h.total==="unknown"?a({isComputable:!1}):a({isComputable:!0,value:h.done/h.total})),!1;case rn.Success:return a&&a({isComputable:!0,value:h.done/h.total}),h;default:throw new Error("Unknown status")}}),signal:l})}const O5=({token:t,pusherKey:e,signal:n,onProgress:r})=>new Promise((i,s)=>{const o=_y(e),a=o.onError(s),l=()=>{a(),o.unsubscribe(t)};Cd(n,()=>{l(),s(new Fs("pusher cancelled"))}),o.subscribe(t,c=>{switch(c.status){case rn.Progress:{r&&(c.total==="unknown"?r({isComputable:!1}):r({isComputable:!0,value:c.done/c.total}));break}case rn.Success:{l(),r&&r({isComputable:!0,value:c.done/c.total}),i(c);break}case rn.Error:l(),s(new un(c.msg,c.error_code))}})}),L5=(t,{publicKey:e,fileName:n,baseURL:r,baseCDN:i,checkForUrlDuplicates:s,saveUrlForRecurrentUploads:o,secureSignature:a,secureExpire:l,store:c,signal:h,onProgress:f,source:p,integration:w,userAgent:E,retryThrottledRequestMaxTimes:S,pusherKey:P=Te.pusherKey,metadata:T})=>Promise.resolve(P5(P)).then(()=>m5(t,{publicKey:e,fileName:n,baseURL:r,checkForUrlDuplicates:s,saveUrlForRecurrentUploads:o,secureSignature:a,secureExpire:l,store:c,signal:h,source:p,integration:w,userAgent:E,retryThrottledRequestMaxTimes:S,metadata:T})).catch(_=>{const C=_y(P);return C==null||C.disconnect(),Promise.reject(_)}).then(_=>_.type===hm.FileInfo?_:I5([({signal:C})=>R5({token:_.token,publicKey:e,baseURL:r,integration:w,userAgent:E,retryThrottledRequestMaxTimes:S,onProgress:f,signal:C}),({signal:C})=>O5({token:_.token,pusherKey:P,signal:C,onProgress:f})],{signal:h})).then(_=>{if(_ instanceof un)throw _;return _}).then(_=>vy(_.uuid,{publicKey:e,baseURL:r,integration:w,userAgent:E,retryThrottledRequestMaxTimes:S,onProgress:f,signal:h})).then(_=>new Ta(_,{baseCDN:i})),Nf=new WeakMap,N5=async t=>{if(Nf.has(t))return Nf.get(t);const e=await fetch(t.uri).then(n=>n.blob());return Nf.set(t,e),e},_I=async t=>{if(Ad(t)||Sd(t))return t.size;if(xd(t))return(await N5(t)).size;throw new Error("Unknown file type. Cannot determine file size.")},D5=(t,e=Te.multipartMinFileSize)=>t>=e,wI=t=>{const e="[a-f0-9]{8}-[a-f0-9]{4}-[a-f0-9]{4}-[a-f0-9]{4}-[a-f0-9]{12}",n=new RegExp(e);return!ba(t)&&n.test(t)},wy=t=>{const e="^(?:\\w+:)?\\/\\/([^\\s\\.]+\\.\\S{2}|localhost[\\:?\\d]*)\\S*$",n=new RegExp(e);return!ba(t)&&n.test(t)},M5=(t,e)=>new Promise((n,r)=>{const i=[];let s=!1,o=e.length;const a=[...e],l=()=>{const c=e.length-a.length,h=a.shift();h&&h().then(f=>{s||(i[c]=f,o-=1,o?l():n(i))}).catch(f=>{s=!0,r(f)})};for(let c=0;c<t;c++)l()}),V5=(t,e,n,r)=>{const i=r*e,s=Math.min(i+r,n);return t.slice(i,s)},U5=async(t,e,n)=>r=>V5(t,r,e,n),$5=(t,e,{publicKey:n,contentType:r,onProgress:i,signal:s,integration:o,retryThrottledRequestMaxTimes:a,retryNetworkErrorMaxTimes:l})=>w5(t,e,{publicKey:n,contentType:r,onProgress:i,signal:s,integration:o,retryThrottledRequestMaxTimes:a,retryNetworkErrorMaxTimes:l}),F5=async(t,{publicKey:e,fileName:n,fileSize:r,baseURL:i,secureSignature:s,secureExpire:o,store:a,signal:l,onProgress:c,source:h,integration:f,userAgent:p,retryThrottledRequestMaxTimes:w,retryNetworkErrorMaxTimes:E,contentType:S,multipartChunkSize:P=Te.multipartChunkSize,maxConcurrentRequests:T=Te.maxConcurrentRequests,baseCDN:_,metadata:C})=>{const N=r??await _I(t);let F;const z=(g,y)=>{if(!c)return;F||(F=Array(g).fill(0));const b=I=>I.reduce((x,k)=>x+k,0);return I=>{I.isComputable&&(F[y]=I.value,c({isComputable:!0,value:b(F)/g}))}};return S||(S=gI(t)),_5(N,{publicKey:e,contentType:S,fileName:n||yI(t),baseURL:i,secureSignature:s,secureExpire:o,store:a,signal:l,source:h,integration:f,userAgent:p,retryThrottledRequestMaxTimes:w,retryNetworkErrorMaxTimes:E,metadata:C}).then(async({uuid:g,parts:y})=>{const b=await U5(t,N,P);return Promise.all([g,M5(T,y.map((I,x)=>()=>$5(b(x),I,{publicKey:e,contentType:S,onProgress:z(y.length,x),signal:l,integration:f,retryThrottledRequestMaxTimes:w,retryNetworkErrorMaxTimes:E})))])}).then(([g])=>E5(g,{publicKey:e,baseURL:i,source:h,integration:f,userAgent:p,retryThrottledRequestMaxTimes:w,retryNetworkErrorMaxTimes:E})).then(g=>g.isReady?g:vy(g.uuid,{publicKey:e,baseURL:i,source:h,integration:f,userAgent:p,retryThrottledRequestMaxTimes:w,retryNetworkErrorMaxTimes:E,onProgress:c,signal:l})).then(g=>new Ta(g,{baseCDN:_}))};async function EI(t,{publicKey:e,fileName:n,baseURL:r=Te.baseURL,secureSignature:i,secureExpire:s,store:o,signal:a,onProgress:l,source:c,integration:h,userAgent:f,retryThrottledRequestMaxTimes:p,retryNetworkErrorMaxTimes:w,contentType:E,multipartMinFileSize:S,multipartChunkSize:P,maxConcurrentRequests:T,baseCDN:_=Te.baseCDN,checkForUrlDuplicates:C,saveUrlForRecurrentUploads:N,pusherKey:F,metadata:z}){if(ba(t)){const g=await _I(t);return D5(g,S)?F5(t,{publicKey:e,contentType:E,multipartChunkSize:P,fileSize:g,fileName:n,baseURL:r,secureSignature:i,secureExpire:s,store:o,signal:a,onProgress:l,source:c,integration:h,userAgent:f,maxConcurrentRequests:T,retryThrottledRequestMaxTimes:p,retryNetworkErrorMaxTimes:w,baseCDN:_,metadata:z}):T5(t,{publicKey:e,fileName:n,contentType:E,baseURL:r,secureSignature:i,secureExpire:s,store:o,signal:a,onProgress:l,source:c,integration:h,userAgent:f,retryThrottledRequestMaxTimes:p,retryNetworkErrorMaxTimes:w,baseCDN:_,metadata:z})}if(wy(t))return L5(t,{publicKey:e,fileName:n,baseURL:r,baseCDN:_,checkForUrlDuplicates:C,saveUrlForRecurrentUploads:N,secureSignature:i,secureExpire:s,store:o,signal:a,onProgress:l,source:c,integration:h,userAgent:f,retryThrottledRequestMaxTimes:p,retryNetworkErrorMaxTimes:w,pusherKey:F,metadata:z});if(wI(t))return C5(t,{publicKey:e,fileName:n,baseURL:r,signal:a,onProgress:l,source:c,integration:h,userAgent:f,retryThrottledRequestMaxTimes:p,retryNetworkErrorMaxTimes:w,baseCDN:_});throw new TypeError(`File uploading from "${t}" is not supported`)}class j5{constructor(e,{baseCDN:n=Te.baseCDN}={}){V(this,"uuid");V(this,"filesCount");V(this,"totalSize");V(this,"isStored");V(this,"isImage");V(this,"cdnUrl");V(this,"files");V(this,"createdAt");V(this,"storedAt",null);this.uuid=e.id,this.filesCount=e.filesCount;const r=e.files.filter(Boolean);this.totalSize=Object.values(r).reduce((i,s)=>i+s.size,0),this.isStored=!!e.datetimeStored,this.isImage=!!Object.values(r).filter(i=>i.isImage).length,this.cdnUrl=e.cdnUrl,this.files=r.map(i=>new Ta(i,{baseCDN:n})),this.createdAt=e.datetimeCreated,this.storedAt=e.datetimeStored}}const z5=t=>{for(const e of t)if(!ba(e))return!1;return!0},B5=t=>{for(const e of t)if(!wI(e))return!1;return!0},H5=t=>{for(const e of t)if(!wy(e))return!1;return!0};function W5(t,{publicKey:e,fileName:n,baseURL:r=Te.baseURL,secureSignature:i,secureExpire:s,store:o,signal:a,onProgress:l,source:c,integration:h,userAgent:f,retryThrottledRequestMaxTimes:p,retryNetworkErrorMaxTimes:w,contentType:E,multipartChunkSize:S=Te.multipartChunkSize,baseCDN:P=Te.baseCDN,checkForUrlDuplicates:T,saveUrlForRecurrentUploads:_,jsonpCallback:C}){if(!z5(t)&&!H5(t)&&!B5(t))throw new TypeError(`Group uploading from "${t}" is not supported`);let N,F=!0;const z=t.length,g=(y,b)=>{if(!l)return;N||(N=Array(y).fill(0));const I=x=>x.reduce((k,A)=>k+A)/y;return x=>{if(!x.isComputable||!F){F=!1,l({isComputable:!1});return}N[b]=x.value,l({isComputable:!0,value:I(N)})}};return Promise.all(t.map((y,b)=>ba(y)||wy(y)?EI(y,{publicKey:e,fileName:n,baseURL:r,secureSignature:i,secureExpire:s,store:o,signal:a,onProgress:g(z,b),source:c,integration:h,userAgent:f,retryThrottledRequestMaxTimes:p,retryNetworkErrorMaxTimes:w,contentType:E,multipartChunkSize:S,baseCDN:P,checkForUrlDuplicates:T,saveUrlForRecurrentUploads:_}).then(I=>I.uuid):y)).then(y=>v5(y,{publicKey:e,baseURL:r,jsonpCallback:C,secureSignature:i,secureExpire:s,signal:a,source:c,integration:h,userAgent:f,retryThrottledRequestMaxTimes:p,retryNetworkErrorMaxTimes:w}).then(b=>new j5(b,{baseCDN:P})).then(b=>(l&&l({isComputable:!0,value:1}),b)))}class q5{constructor(e){V(this,"_concurrency",1);V(this,"_pending",[]);V(this,"_running",0);V(this,"_resolvers",new Map);V(this,"_rejectors",new Map);this._concurrency=e}_run(){const e=this._concurrency-this._running;for(let n=0;n<e;n++){const r=this._pending.shift();if(!r)return;const i=this._resolvers.get(r),s=this._rejectors.get(r);if(!i||!s)throw new Error("Unexpected behavior: resolver or rejector is undefined");this._running+=1,r().finally(()=>{this._resolvers.delete(r),this._rejectors.delete(r),this._running-=1,this._run()}).then(o=>i(o)).catch(o=>s(o))}}add(e){return new Promise((n,r)=>{this._resolvers.set(e,n),this._rejectors.set(e,r),this._pending.push(e),this._run()})}get pending(){return this._pending.length}get running(){return this._running}set concurrency(e){this._concurrency=e,this._run()}get concurrency(){return this._concurrency}}const bI=()=>({}),TI=t=>({...bI(),"*currentActivity":"","*currentActivityParams":{},"*history":[],"*historyBack":null,"*closeModal":()=>{t.set$({"*modalActive":!1,"*currentActivity":""})}}),CI=t=>({...TI(t),"*commonProgress":0,"*uploadList":[],"*focusedEntry":null,"*uploadMetadata":null,"*uploadQueue":new q5(1),"*uploadCollection":null,"*collectionErrors":[],"*collectionState":null,"*groupInfo":null,"*uploadTrigger":new Set}),Ey={"locale-id":"en","social-source-lang":"en","upload-file":"Upload file","upload-files":"Upload files","choose-file":"Choose file","choose-files":"Choose files","drop-files-here":"Drop files here","select-file-source":"Select file source",selected:"Selected",upload:"Upload","add-more":"Add more",cancel:"Cancel","start-from-cancel":"Cancel",clear:"Clear","camera-shot":"Shot","upload-url":"Import","upload-url-placeholder":"Paste link here","edit-image":"Edit image","edit-detail":"Details",back:"Back",done:"Done",ok:"Ok","remove-from-list":"Remove",no:"No",yes:"Yes","confirm-your-action":"Confirm your action","are-you-sure":"Are you sure?","selected-count":"Selected:","upload-error":"Upload error","validation-error":"Validation error","no-files":"No files selected",browse:"Browse","not-uploaded-yet":"Not uploaded yet...",file__one:"file",file__other:"files",error__one:"error",error__other:"errors","header-uploading":"Uploading {{count}} {{plural:file(count)}}","header-failed":"{{count}} {{plural:error(count)}}","header-succeed":"{{count}} {{plural:file(count)}} uploaded","header-total":"{{count}} {{plural:file(count)}} selected","src-type-local":"From device","src-type-from-url":"From link","src-type-camera":"Camera","src-type-draw":"Draw","src-type-facebook":"Facebook","src-type-dropbox":"Dropbox","src-type-gdrive":"Google Drive","src-type-gphotos":"Google Photos","src-type-instagram":"Instagram","src-type-flickr":"Flickr","src-type-vk":"VK","src-type-evernote":"Evernote","src-type-box":"Box","src-type-onedrive":"Onedrive","src-type-huddle":"Huddle","src-type-other":"Other","caption-from-url":"Import from link","caption-camera":"Camera","caption-draw":"Draw","caption-edit-file":"Edit file","file-no-name":"No name...","toggle-fullscreen":"Toggle fullscreen","toggle-guides":"Toggle guides",rotate:"Rotate","flip-vertical":"Flip vertical","flip-horizontal":"Flip horizontal",apply:"Apply",brightness:"Brightness",contrast:"Contrast",saturation:"Saturation",exposure:"Exposure",gamma:"Gamma",vibrance:"Vibrance",warmth:"Warmth",enhance:"Enhance",original:"Original",resize:"Resize image",crop:"Crop","select-color":"Select color",text:"Text",draw:"Draw","cancel-edit":"Cancel edit","tab-view":"Preview","tab-details":"Details","file-name":"Name","file-size":"Size","cdn-url":"CDN URL","file-size-unknown":"Unknown","camera-permissions-denied":"Camera access denied","camera-permissions-prompt":"Please allow access to the camera","camera-permissions-request":"Request access","files-count-limit-error-title":"Files count limit overflow","files-count-limit-error-too-few":"Youve chosen {{total}} {{plural:file(total)}}. At least {{min}} {{plural:file(min)}} required.","files-count-limit-error-too-many":"Youve chosen too many files. {{max}} {{plural:file(max)}} is maximum.","files-max-size-limit-error":"File is too big. Max file size is {{maxFileSize}}.","has-validation-errors":"File validation error ocurred. Please, check your files before upload.","images-only-accepted":"Only image files are accepted.","file-type-not-allowed":"Uploading of these file types is not allowed.","some-files-were-not-uploaded":"Some files were not uploaded."},Vh=new Map,dm=new Map,II=(t,e)=>{Vh.has(t)&&console.log(`Locale ${t} is already defined. Overwriting...`),Vh.set(t,{...Ey,...e})},G5=(t,e)=>{dm.set(t,e)},SI=(t,e)=>{typeof e=="function"?G5(t,e):II(t,e)},K5=async t=>{if(!Vh.has(t)){if(!dm.has(t))throw new Error(`Locale ${t} is not defined`);const n=await dm.get(t)();II(t,n)}return Vh.get(t)};SI("en",Ey);const Is=t=>`*l10n/${t}`,Q5="en";class X5{constructor(e){V(this,"_blockInstance",null);V(this,"_localeName","");V(this,"_callbacks",new Set);V(this,"_boundBlocks",new Map);this._blockInstance=e;for(let[n,r]of Object.entries(Ey))this._blockInstance.add(Is(n),r,!1);setTimeout(()=>{e.subConfigValue("localeName",async n=>{var s;if(!this._blockInstance||!n)return;this._localeName=n;const r=await K5(n);if(n!==Q5&&this._localeName!==n)return;const i=(s=this._blockInstance.cfg.localeDefinitionOverride)==null?void 0:s[n];for(const[o,a]of Object.entries(r)){const l=i==null?void 0:i[o];this._blockInstance.add(Is(o),l??a,!0);for(const c of this._callbacks)c()}}),e.subConfigValue("localeDefinitionOverride",n=>{var i;if(!n)return;const r=n[this._localeName];if(r)for(const[s,o]of Object.entries(r)){(i=this._blockInstance)==null||i.add(Is(s),o,!0);for(const a of this._callbacks)a()}})})}onLocaleChange(e){const n=Dn(e,0);return this._callbacks.add(n),()=>{this._callbacks.delete(n)}}bindL10n(e,n,r){var s,o,a;e.$[n]=r(),this._boundBlocks.has(e)||this._boundBlocks.set(e,new Map),(o=(s=this._boundBlocks.get(e))==null?void 0:s.get(n))==null||o();const i=this.onLocaleChange(()=>{e.$[n]=r()});(a=this._boundBlocks.get(e))==null||a.set(n,i)}destroyL10nBindings(e){const n=this._boundBlocks.get(e);if(n){for(const r of n.values())r();this._boundBlocks.delete(e)}}destroy(){this._callbacks.clear()}}function Y5(t,e){[...t.querySelectorAll("[l10n]")].forEach(n=>{let r=n.getAttribute("l10n");if(!r)return;let i="textContent",s=!1;if(r.includes(":")){const l=r.split(":");i=l[0],r=l[1],i.startsWith("@")&&(i=i.slice(1),s=!0)}const o=r;e.has(o)&&e.sub(o,l=>{if(!l)return;e.l10nProcessorSubs.has(o)||e.l10nProcessorSubs.set(o,new Set);const c=e.l10nProcessorSubs.get(o);c==null||c.forEach(p=>{p.remove(),c.delete(p),e.allSubs.delete(p)});const h=Is(l).replace("*","");e.nodeCtx.has(h)||e.nodeCtx.add(h,l);const f=e.nodeCtx.sub(h,()=>{n[i]=e.l10n(l)});c==null||c.add(f),e.allSubs.add(f),n.removeAttribute("l10n")});const a=Is(r);e.has(a)||e.add(a,""),e.sub(a,()=>{r=r,s?n.setAttribute(i,e.l10n(r)):n[i]=e.l10n(r)}),n.removeAttribute("l10n")})}const In=t=>`*cfg/${t}`,by="blocks",Ty="0.39.1",AI=t=>{if(typeof t!="string"||!t)return"";let e=t.trim();return e.startsWith("-/")?e=e.slice(2):e.startsWith("/")&&(e=e.slice(1)),e.endsWith("/")&&(e=e.slice(0,e.length-1)),e},Cy=(...t)=>t.filter(e=>typeof e=="string"&&e).map(e=>AI(e)).join("/-/"),Wi=(...t)=>{let e=Cy(...t);return e?`-/${e}/`:""};function xI(t){let e=new URL(t),n=e.pathname+e.search+e.hash,r=n.lastIndexOf("http"),i=n.lastIndexOf("/"),s="";return r>=0?s=n.slice(r):i>=0&&(s=n.slice(i+1)),s}function J5(t){let e=new URL(t),{pathname:n}=e;const r=n.indexOf("/"),i=n.indexOf("/",r+1);return n.substring(r+1,i)}function Z5(t){let e=kI(t),n=new URL(e),r=n.pathname.indexOf("/-/");return r===-1?[]:n.pathname.substring(r).split("/-/").filter(Boolean).map(s=>AI(s))}function kI(t){let e=new URL(t),n=xI(t),r=PI(n)?RI(n).pathname:n;return e.pathname=e.pathname.replace(r,""),e.search="",e.hash="",e.toString()}function PI(t){return t.startsWith("http")}function RI(t){let e=new URL(t);return{pathname:e.origin+e.pathname||"",search:e.search||"",hash:e.hash||""}}const An=(t,e,n)=>{let r=new URL(kI(t));if(n=n||xI(t),r.pathname.startsWith("//")&&(r.pathname=r.pathname.replace("//","/")),PI(n)){let i=RI(n);r.pathname=r.pathname+(e||"")+(i.pathname||""),r.search=i.search,r.hash=i.hash}else r.pathname=r.pathname+(e||"")+(n||"");return r.toString()},su=(t,e)=>{let n=new URL(t);return n.pathname=e+"/",n.toString()},Gr=(t,e=",")=>t.trim().split(e).map(n=>n.trim()).filter(n=>n.length>0),wn=Object.freeze({brightness:0,exposure:0,gamma:100,contrast:0,saturation:0,vibrance:0,warmth:0,enhance:0,filter:0,rotate:0,mirror:!1,flip:!1,crop:void 0}),OI=["enhance","brightness","exposure","gamma","contrast","saturation","vibrance","warmth","filter","mirror","flip","rotate","crop"];function eV(t,e){if(typeof e=="number"){const n=e;return wn[t]!==n?`${t}/${n}`:""}if(typeof e=="boolean"){const n=e;return wn[t]!==n?`${t}`:""}if(t==="filter"&&e){const{name:n,amount:r}=e;return wn.filter===r?"":`${t}/${n}/${r}`}if(t==="crop"&&e){let{dimensions:n,coords:r}=e;return`${t}/${n.join("x")}/${r.join(",")}`}return""}function Pd(t){return Cy(...OI.filter(e=>typeof t[e]<"u"&&t[e]!==null).map(e=>{let n=t[e];return eV(e,n)}).filter(e=>!!e))}const LI=Cy("format/auto","progressive/yes"),Cr=([t])=>typeof t<"u"?Number(t):void 0,ww=()=>!0,tV=([t,e])=>({name:t,amount:typeof e<"u"?Number(e):100}),nV=([t,e])=>{if(!/\d+x\d+/.test(t)||!/\d+,\d+/.test(e))throw new Error("Crop by aspect ratio, percentage or alignment shortcuts is not supported.");return{dimensions:Gr(t,"x").map(Number),coords:Gr(e).map(Number)}},rV=Object.freeze({enhance:Cr,brightness:Cr,exposure:Cr,gamma:Cr,contrast:Cr,saturation:Cr,vibrance:Cr,warmth:Cr,filter:tV,mirror:ww,flip:ww,rotate:Cr,crop:nV});function iV(t){const e={};for(const n of t){const[r,...i]=n.split("/");if(!OI.includes(r))continue;const s=r,o=rV[s];try{const a=o(i);e[s]=a}catch(a){console.warn([`Failed to parse URL operation "${n}". It will be ignored.`,a instanceof Error?`Error message: "${a.message}"`:a,"If you need this functionality, please feel free to open an issue at https://github.com/uploadcare/blocks/issues/new"].join(`
`))}}return e}const Kt=Object.freeze({CROP:"crop",TUNING:"tuning",FILTERS:"filters"}),dr=[Kt.CROP,Kt.TUNING,Kt.FILTERS],sV=["brightness","exposure","gamma","contrast","saturation","vibrance","warmth","enhance"],oV=["adaris","briaril","calarel","carris","cynarel","cyren","elmet","elonni","enzana","erydark","fenralan","ferand","galen","gavin","gethriel","iorill","iothari","iselva","jadis","lavra","misiara","namala","nerion","nethari","pamaya","sarnar","sedis","sewen","sorahel","sorlen","tarian","thellassan","varriel","varven","vevera","virkas","yedis","yllara","zatvel","zevcen"],aV=["rotate","mirror","flip"],aa=Object.freeze({brightness:{zero:wn.brightness,range:[-100,100],keypointsNumber:2},exposure:{zero:wn.exposure,range:[-500,500],keypointsNumber:2},gamma:{zero:wn.gamma,range:[0,1e3],keypointsNumber:2},contrast:{zero:wn.contrast,range:[-100,500],keypointsNumber:2},saturation:{zero:wn.saturation,range:[-100,500],keypointsNumber:1},vibrance:{zero:wn.vibrance,range:[-100,500],keypointsNumber:1},warmth:{zero:wn.warmth,range:[-100,100],keypointsNumber:1},enhance:{zero:wn.enhance,range:[0,100],keypointsNumber:1},filter:{zero:wn.filter,range:[0,100],keypointsNumber:1}}),lV=t=>t?t.split(",").map(e=>e.trim()):[],Iy=t=>t?t.join(","):"",uV="https://ucarecdn.com",cV="https://upload.uploadcare.com",hV="https://social.uploadcare.com",Vi={pubkey:"",multiple:!0,multipleMin:0,multipleMax:Number.MAX_SAFE_INTEGER,confirmUpload:!1,imgOnly:!1,accept:"",externalSourcesPreferredTypes:"",store:"auto",cameraMirror:!1,cameraCapture:"",sourceList:"local, url, camera, dropbox, gdrive",cloudImageEditorTabs:Iy(dr),maxLocalFileSizeBytes:0,thumbSize:76,showEmptyList:!1,useLocalImageEditor:!1,useCloudImageEditor:!0,removeCopyright:!1,cropPreset:"",imageShrink:"",modalScrollLock:!0,modalBackdropStrokes:!1,sourceListWrap:!0,remoteTabSessionKey:"",cdnCname:uV,baseUrl:cV,socialBaseUrl:hV,secureSignature:"",secureExpire:"",secureDeliveryProxy:"",retryThrottledRequestMaxTimes:1,multipartMinFileSize:26214400,multipartChunkSize:5242880,maxConcurrentRequests:10,multipartMaxConcurrentRequests:4,multipartMaxAttempts:3,checkForUrlDuplicates:!1,saveUrlForRecurrentUploads:!1,groupOutput:!1,userAgentIntegration:"",debug:!1,metadata:null,localeName:"en",localeDefinitionOverride:null},Df="lr-";class Oe extends Td{constructor(){super();V(this,"requireCtxName",!1);V(this,"allowCustomTemplate",!0);V(this,"activityType",null);V(this,"init$",bI());this.l10nProcessorSubs=new Map,this.addTemplateProcessor(Y5)}l10n(n,r={}){if(!n)return"";let i=this.$[Is(n)]||n,s=W3(i);for(let a of s)r[a.variable]=this.pluralize(a.pluralKey,Number(r[a.countVariable]));return cm(i,r)}pluralize(n,r){const i=this.l10n("locale-id")||"en",s=uI(i,r);return this.l10n(`${n}__${s}`)}bindL10n(n,r){var i;(i=this.localeManager)==null||i.bindL10n(this,n,r)}emit(n,r,i){const s=this.has("*eventEmitter")&&this.$["*eventEmitter"];s&&s.emit(n,r,i)}hasBlockInCtx(n){let r=this.$["*blocksRegistry"];for(let i of r)if(n(i))return!0;return!1}setOrAddState(n,r){this.add$({[n]:r},!0)}setActivity(n){if(this.hasBlockInCtx(r=>r.activityType===n)){this.$["*currentActivity"]=n;return}console.warn(`Activity type "${n}" not found in the context`)}connectedCallback(){const n=this.constructor.className;n&&this.classList.toggle(`${Df}${n}`,!0),this.hasAttribute("retpl")&&(this.constructor.template=null,this.processInnerHtml=!0),this.requireCtxName?q3({element:this,attribute:"ctx-name",onSuccess:()=>{super.connectedCallback()},onTimeout:()=>{console.error("Attribute `ctx-name` is required and it is not set.")}}):super.connectedCallback(),Mh.registerClient(this)}disconnectedCallback(){super.disconnectedCallback(),Mh.unregisterClient(this)}initCallback(){this.has("*blocksRegistry")||this.add("*blocksRegistry",new Set),this.$["*blocksRegistry"].add(this),this.has("*eventEmitter")||this.add("*eventEmitter",new z3(this.debugPrint.bind(this))),this.has("*localeManager")||this.add("*localeManager",new X5(this)),this.sub(Is("locale-id"),r=>{this.style.direction=B3(r)})}get localeManager(){return this.has("*localeManager")?this.$["*localeManager"]:null}destroyCallback(){var r;let n=this.$["*blocksRegistry"];n.delete(this),(r=this.localeManager)==null||r.destroyL10nBindings(this),this.l10nProcessorSubs=new Map,xe.deleteCtx(this),n.size===0&&setTimeout(()=>{this.destroyCtxCallback()},0)}destroyCtxCallback(){var n;xe.deleteCtx(this.ctxName),(n=this.localeManager)==null||n.destroy()}fileSizeFmt(n,r=2){let i=["B","KB","MB","GB","TB"];if(n===0)return`0 ${i[0]}`;let s=1024,o=r<0?0:r,a=Math.floor(Math.log(n)/Math.log(s));return parseFloat((n/s**a).toFixed(o))+" "+i[a]}proxyUrl(n){let r=this.cfg.secureDeliveryProxy;return r?cm(r,{previewUrl:n},{transform:i=>window.encodeURIComponent(i)}):n}get cfg(){if(!this.__cfgProxy){let n=Object.create(null);this.__cfgProxy=new Proxy(n,{set:(r,i,s)=>{if(typeof i!="string")return!1;const o=In(i);return this.has(o)||this.add(o,Vi[i]),this.$[o]=s,!0},get:(r,i)=>{const s=In(i);return this.has(s)||this.add(s,Vi[i]),this.$[In(i)]}})}return this.__cfgProxy}subConfigValue(n,r){const i=In(n);this.has(i)||this.add(i,Vi[n]),this.sub(i,r)}debugPrint(...n){if(!this.cfg.debug)return;let r=n;if(typeof(n==null?void 0:n[0])=="function"){const i=n[0];r=i()}console.log(`[${this.ctxName}]`,...r)}static reg(n){if(!n){super.reg();return}super.reg(n.startsWith(Df)?n:Df+n)}}V(Oe,"StateConsumerScope",null),V(Oe,"className","");const Ew="active",el="___ACTIVITY_IS_ACTIVE___",Sr=class Sr extends Oe{constructor(){super(...arguments);V(this,"historyTracked",!1);V(this,"init$",TI(this));V(this,"_debouncedHistoryFlush",Dn(this._historyFlush.bind(this),10))}_deactivate(){var r;let n=Sr._activityCallbacks.get(this);this[el]=!1,this.removeAttribute(Ew),(r=n==null?void 0:n.deactivateCallback)==null||r.call(n)}_activate(){var r;let n=Sr._activityCallbacks.get(this);this.$["*historyBack"]=this.historyBack.bind(this),this[el]=!0,this.setAttribute(Ew,""),(r=n==null?void 0:n.activateCallback)==null||r.call(n),this._debouncedHistoryFlush(),this.emit(tt.ACTIVITY_CHANGE,{activity:this.activityType})}initCallback(){super.initCallback(),this.hasAttribute("current-activity")&&this.sub("*currentActivity",n=>{this.setAttribute("current-activity",n)}),this.activityType&&(this.hasAttribute("activity")||this.setAttribute("activity",this.activityType),this.sub("*currentActivity",n=>{this.activityType!==n&&this[el]?this._deactivate():this.activityType===n&&!this[el]&&this._activate(),n||(this.$["*history"]=[])}),this.has("*modalActive")&&this.sub("*modalActive",n=>{!n&&this.activityType===this.$["*currentActivity"]&&(this.$["*currentActivity"]=null)}))}_historyFlush(){let n=this.$["*history"];n&&(n.length>10&&(n=n.slice(n.length-11,n.length-1)),this.historyTracked&&n[n.length-1]!==this.activityType&&n.push(this.activityType),this.$["*history"]=n)}_isActivityRegistered(){return this.activityType&&Sr._activityCallbacks.has(this)}get isActivityActive(){return this[el]}get couldOpenActivity(){return!0}registerActivity(n,r={}){const{onActivate:i,onDeactivate:s}=r;Sr._activityCallbacks.set(this,{activateCallback:i,deactivateCallback:s})}unregisterActivity(){this.isActivityActive&&this._deactivate(),Sr._activityCallbacks.delete(this)}destroyCallback(){super.destroyCallback(),this._isActivityRegistered()&&this.unregisterActivity();const n=this.$["*currentActivity"];!![...this.$["*blocksRegistry"]].find(s=>s instanceof Sr&&s.activityType===n)||(this.$["*currentActivity"]=null)}get activityKey(){return this.ctxName+this.activityType}get activityParams(){return this.$["*currentActivityParams"]}get initActivity(){return this.getCssData("--cfg-init-activity")}get doneActivity(){return this.getCssData("--cfg-done-activity")}historyBack(){let n=this.$["*history"];if(n){let r=n.pop();for(;r===this.activityType;)r=n.pop();let i=!!r;if(r){const o=[...this.$["*blocksRegistry"]].find(a=>a.activityType===r);i=(o==null?void 0:o.couldOpenActivity)??!1}r=i?r:void 0,this.$["*currentActivity"]=r,this.$["*history"]=n,r||this.setOrAddState("*modalActive",!1)}}};V(Sr,"_activityCallbacks",new Map);let fe=Sr;fe.activities=Object.freeze({START_FROM:"start-from",CAMERA:"camera",DRAW:"draw",UPLOAD_LIST:"upload-list",URL:"url",CONFIRMATION:"confirmation",CLOUD_IMG_EDIT:"cloud-image-edit",EXTERNAL:"external",DETAILS:"details"});const dV=20,fm=24,pl=34,NI=3,ir=NI/2,us=1,yc=100/3,ge=1,bw=24,fV=6;function mo(t,e){for(let n in e)t.setAttributeNS(null,n,e[n].toString())}function $n(t,e={}){let n=document.createElementNS("http://www.w3.org/2000/svg",t);return mo(n,e),n}function pV(t,e,n){let{x:r,y:i,width:s,height:o}=t,a=e.includes("w")?0:1,l=e.includes("n")?0:1,c=[-1,1][a],h=[-1,1][l],f=[r+a*s+ir*c,i+l*o+ir*h-fm*n*h],p=[r+a*s+ir*c,i+l*o+ir*h],w=[r+a*s-fm*n*c+ir*c,i+l*o+ir*h];return{d:`M ${f[0]} ${f[1]} L ${p[0]} ${p[1]} L ${w[0]} ${w[1]}`,center:p}}function mV(t,e,n){let{x:r,y:i,width:s,height:o}=t,a=["n","s"].includes(e)?.5:{w:0,e:1}[e],l=["w","e"].includes(e)?.5:{n:0,s:1}[e],c=[-1,1][a],h=[-1,1][l],f,p;["n","s"].includes(e)?(f=[r+a*s-pl*n/2,i+l*o+ir*h],p=[r+a*s+pl*n/2,i+l*o+ir*h]):(f=[r+a*s+ir*c,i+l*o-pl*n/2],p=[r+a*s+ir*c,i+l*o+pl*n/2]);let w=`M ${f[0]} ${f[1]} L ${p[0]} ${p[1]}`,E=[p[0]-(p[0]-f[0])/2,p[1]-(p[1]-f[1])/2];return{d:w,center:E}}function gV(t){return t===""?"move":["e","w"].includes(t)?"ew-resize":["n","s"].includes(t)?"ns-resize":["nw","se"].includes(t)?"nwse-resize":"nesw-resize"}function yV({rect:t,delta:[e,n],imageBox:r}){return Uh({...t,x:t.x+e,y:t.y+n},r)}function Uh(t,e){let{x:n}=t,{y:r}=t;return t.x<e.x?n=e.x:t.x+t.width>e.x+e.width&&(n=e.x+e.width-t.width),t.y<e.y?r=e.y:t.y+t.height>e.y+e.height&&(r=e.y+e.height-t.height),{...t,x:n,y:r}}function vV({rect:t,delta:e,aspectRatio:n,imageBox:r}){const[,i]=e;let{y:s,width:o,height:a}=t;s+=i,a-=i,n&&(o=a*n);let l=t.x+t.width/2-o/2;return s<=r.y&&(s=r.y,a=t.y+t.height-s,n&&(o=a*n,l=t.x+t.width/2-o/2)),l<=r.x&&(l=r.x,s=t.y+t.height-a),l+o>=r.x+r.width&&(l=Math.max(r.x,r.x+r.width-o),o=r.x+r.width-l,n&&(a=o/n),s=t.y+t.height-a),a<ge&&(a=ge,n&&(o=a*n,l=t.x+t.width/2-o/2),s=t.y+t.height-a),o<ge&&(o=ge,n&&(a=o/n,l=t.x+t.width/2-o/2),s=t.y+t.height-a),{x:l,y:s,width:o,height:a}}function _V({rect:t,delta:e,aspectRatio:n,imageBox:r}){const[i]=e;let{x:s,width:o,height:a}=t;s+=i,o-=i,n&&(a=o/n);let l=t.y+t.height/2-a/2;return s<=r.x&&(s=r.x,o=t.x+t.width-s,n&&(a=o/n,l=t.y+t.height/2-a/2)),l<=r.y&&(l=r.y,s=t.x+t.width-o),l+a>=r.y+r.height&&(l=Math.max(r.y,r.y+r.height-a),a=r.y+r.height-l,n&&(o=a*n),s=t.x+t.width-o),a<ge&&(a=ge,n&&(o=a*n),l=t.y+t.height/2-a/2,s=t.x+t.width-o),o<ge&&(o=ge,n&&(a=o/n),l=t.y+t.height/2-a/2,s=t.x+t.width-o),{x:s,y:l,width:o,height:a}}function wV({rect:t,delta:e,aspectRatio:n,imageBox:r}){const[,i]=e;let{y:s,width:o,height:a}=t;a+=i,n&&(o=a*n);let l=t.x+t.width/2-o/2;return s+a>=r.y+r.height&&(a=r.y+r.height-s,n&&(o=a*n),l=t.x+t.width/2-o/2),l<=r.x&&(l=r.x,s=t.y),l+o>=r.x+r.width&&(l=Math.max(r.x,r.x+r.width-o),o=r.x+r.width-l,n&&(a=o/n),s=t.y),a<ge&&(a=ge,n&&(o=a*n),l=t.x+t.width/2-o/2),o<ge&&(o=ge,n&&(a=o/n),l=t.x+t.width/2-o/2),{x:l,y:s,width:o,height:a}}function EV({rect:t,delta:e,aspectRatio:n,imageBox:r}){const[i]=e;let{x:s,width:o,height:a}=t;o+=i,n&&(a=o/n);let l=t.y+t.height/2-a/2;return s+o>=r.x+r.width&&(o=r.x+r.width-s,n&&(a=o/n),l=t.y+t.height/2-a/2),l<=r.y&&(l=r.y,s=t.x),l+a>=r.y+r.height&&(l=Math.max(r.y,r.y+r.height-a),a=r.y+r.height-l,n&&(o=a*n),s=t.x),a<ge&&(a=ge,n&&(o=a*n),l=t.y+t.height/2-a/2),o<ge&&(o=ge,n&&(a=o/n),l=t.y+t.height/2-a/2),{x:s,y:l,width:o,height:a}}function bV({rect:t,delta:e,aspectRatio:n,imageBox:r}){let[i,s]=e,{x:o,y:a,width:l,height:c}=t;return o+i<r.x&&(i=r.x-o),a+s<r.y&&(s=r.y-a),o+=i,l-=i,a+=s,c-=s,n&&Math.abs(l/c)>n?(s=l/n-c,c+=s,a-=s,a<=r.y&&(c=c-(r.y-a),l=c*n,o=t.x+t.width-l,a=r.y)):n&&(i=c*n-l,l=l+i,o-=i,o<=r.x&&(l=l-(r.x-o),c=l/n,o=r.x,a=t.y+t.height-c)),c<ge&&(c=ge,n&&(l=c*n),o=t.x+t.width-l,a=t.y+t.height-c),l<ge&&(l=ge,n&&(c=l/n),o=t.x+t.width-l,a=t.y+t.height-c),{x:o,y:a,width:l,height:c}}function TV({rect:t,delta:e,aspectRatio:n,imageBox:r}){let[i,s]=e,{x:o,y:a,width:l,height:c}=t;return o+l+i>r.x+r.width&&(i=r.x+r.width-o-l),a+s<r.y&&(s=r.y-a),l+=i,a+=s,c-=s,n&&Math.abs(l/c)>n?(s=l/n-c,c+=s,a-=s,a<=r.y&&(c=c-(r.y-a),l=c*n,o=t.x,a=r.y)):n&&(i=c*n-l,l+=i,o+l>=r.x+r.width&&(l=r.x+r.width-o,c=l/n,o=r.x+r.width-l,a=t.y+t.height-c)),c<ge&&(c=ge,n&&(l=c*n),a=t.y+t.height-c),l<ge&&(l=ge,n&&(c=l/n),a=t.y+t.height-c),{x:o,y:a,width:l,height:c}}function CV({rect:t,delta:e,aspectRatio:n,imageBox:r}){let[i,s]=e,{x:o,y:a,width:l,height:c}=t;return o+i<r.x&&(i=r.x-o),a+c+s>r.y+r.height&&(s=r.y+r.height-a-c),o+=i,l-=i,c+=s,n&&Math.abs(l/c)>n?(s=l/n-c,c+=s,a+c>=r.y+r.height&&(c=r.y+r.height-a,l=c*n,o=t.x+t.width-l,a=r.y+r.height-c)):n&&(i=c*n-l,l+=i,o-=i,o<=r.x&&(l=l-(r.x-o),c=l/n,o=r.x,a=t.y)),c<ge&&(c=ge,n&&(l=c*n),o=t.x+t.width-l),l<ge&&(l=ge,n&&(c=l/n),o=t.x+t.width-l),{x:o,y:a,width:l,height:c}}function IV({rect:t,delta:e,aspectRatio:n,imageBox:r}){let[i,s]=e,{x:o,y:a,width:l,height:c}=t;return o+l+i>r.x+r.width&&(i=r.x+r.width-o-l),a+c+s>r.y+r.height&&(s=r.y+r.height-a-c),l+=i,c+=s,n&&Math.abs(l/c)>n?(s=l/n-c,c+=s,a+c>=r.y+r.height&&(c=r.y+r.height-a,l=c*n,o=t.x,a=r.y+r.height-c)):n&&(i=c*n-l,l+=i,o+l>=r.x+r.width&&(l=r.x+r.width-o,c=l/n,o=r.x+r.width-l,a=t.y)),c<ge&&(c=ge,n&&(l=c*n)),l<ge&&(l=ge,n&&(c=l/n)),{x:o,y:a,width:l,height:c}}function SV({direction:t,...e}){switch(t){case"n":return vV(e);case"w":return _V(e);case"s":return wV(e);case"e":return EV(e);case"nw":return bV(e);case"ne":return TV(e);case"sw":return CV(e);case"se":return IV(e);default:return e.rect}}function AV(t,[e,n]){return t.x<=e&&e<=t.x+t.width&&t.y<=n&&n<=t.y+t.height}function xV(t,e){return t.x>=e.x&&t.y>=e.y&&t.x+t.width<=e.x+e.width&&t.y+t.height<=e.y+e.height}function kV(t,e){return Math.abs(t.width/t.height-e)<.1}function tl({width:t,height:e},n){let r=n/90%2!==0;return{width:r?e:t,height:r?t:e}}function PV(t,e,n){const r=t/e;let i,s;r>n?(i=Math.round(e*n),s=e):(i=t,s=Math.round(t/n));const o=Math.round((t-i)/2),a=Math.round((e-s)/2);return o+i>t&&(i=t-o),a+s>e&&(s=e-a),{x:o,y:a,width:i,height:s}}function Hc(t){return{x:Math.round(t.x),y:Math.round(t.y),width:Math.round(t.width),height:Math.round(t.height)}}function ko(t,e,n){return Math.min(Math.max(t,e),n)}const DI=t=>{if(!t)return[];const[e,n]=t.split(":").map(Number);if(!Number.isFinite(e)||!Number.isFinite(n)){console.error(`Invalid crop preset: ${t}`);return}return[{type:"aspect-ratio",width:e,height:n}]},sr=Object.freeze({LOCAL:"local",DROP_AREA:"drop-area",URL_TAB:"url-tab",CAMERA:"camera",EXTERNAL:"external",API:"js-api"});function RV(t){return hI({...t,libraryName:by,libraryVersion:Ty})}const MI=({type:t,message:e,...n})=>({type:t,message:e,...n}),uo=MI,Mf=MI,pm=["image/*","image/heif","image/heif-sequence","image/heic","image/heic-sequence","image/avif","image/avif-sequence",".heif",".heifs",".heic",".heics",".avif",".avifs"],Tw=t=>t?t.filter(e=>typeof e=="string").map(e=>Gr(e)).flat():[],VI=(t,e)=>e.some(n=>n.endsWith("*")?(n=n.replace("*",""),t.startsWith(n)):t===n),OV=(t,e)=>e.some(n=>n.startsWith(".")?t.toLowerCase().endsWith(n.toLowerCase()):!1),Cw=t=>{let e=t==null?void 0:t.type;return e?VI(e,pm):!1},tr=1e3,cs=Object.freeze({AUTO:"auto",BYTE:"byte",KB:"kb",MB:"mb",GB:"gb",TB:"tb",PB:"pb"}),nl=t=>Math.ceil(t*100)/100,LV=(t,e=cs.AUTO)=>{const n=e===cs.AUTO;if(e===cs.BYTE||n&&t<tr**1){const r=uI("en-US",t),i={one:"byte",other:"bytes"}[r];return`${t} ${i}`}return e===cs.KB||n&&t<tr**2?`${nl(t/tr**1)} KB`:e===cs.MB||n&&t<tr**3?`${nl(t/tr**2)} MB`:e===cs.GB||n&&t<tr**4?`${nl(t/tr**3)} GB`:e===cs.TB||n&&t<tr**5?`${nl(t/tr**4)} TB`:`${nl(t/tr**5)} PB`},Iw=new Set;function UI(t){Iw.has(t)||(Iw.add(t),console.warn(t))}const Sw="[Typed State] Wrong property name: ",NV="[Typed State] Wrong property type: ";class DV{constructor(e,n){this.__typedSchema=e,this.__ctxId=n||xu.generate(),this.__schema=Object.keys(e).reduce((r,i)=>(r[i]=e[i].value,r),{}),this.__data=xe.registerCtx(this.__schema,this.__ctxId)}get uid(){return this.__ctxId}setValue(e,n){if(!this.__typedSchema.hasOwnProperty(e)){console.warn(Sw+e);return}let r=this.__typedSchema[e];if((n==null?void 0:n.constructor)===r.type||n instanceof r.type||r.nullable&&n===null){this.__data.pub(e,n);return}console.warn(NV+e)}setMultipleValues(e){for(let n in e)this.setValue(n,e[n])}getValue(e){if(!this.__typedSchema.hasOwnProperty(e)){console.warn(Sw+e);return}return this.__data.read(e)}subscribe(e,n){return this.__data.sub(e,n)}remove(){xe.deleteCtx(this.__ctxId)}}class MV{constructor(e){this.__typedSchema=e.typedSchema,this.__ctxId=e.ctxName||xu.generate(),this.__data=xe.registerCtx({},this.__ctxId),this.__watchList=e.watchList||[],this.__subsMap=Object.create(null),this.__propertyObservers=new Set,this.__collectionObservers=new Set,this.__items=new Set,this.__removed=new Set,this.__added=new Set;let n=Object.create(null);this.__notifyObservers=(r,i)=>{this.__observeTimeout&&window.clearTimeout(this.__observeTimeout),n[r]||(n[r]=new Set),n[r].add(i),this.__observeTimeout=window.setTimeout(()=>{Object.keys(n).length!==0&&(this.__propertyObservers.forEach(s=>{s({...n})}),n=Object.create(null))})}}notify(){this.__notifyTimeout&&window.clearTimeout(this.__notifyTimeout),this.__notifyTimeout=window.setTimeout(()=>{let e=new Set(this.__added),n=new Set(this.__removed);this.__added.clear(),this.__removed.clear();for(const r of this.__collectionObservers)r==null||r([...this.__items],e,n)})}observeCollection(e){return this.__collectionObservers.add(e),this.__items.size>0&&this.notify(),()=>{this.unobserveCollection(e)}}unobserveCollection(e){var n;(n=this.__collectionObservers)==null||n.delete(e)}add(e){let n=new DV(this.__typedSchema);for(let r in e)n.setValue(r,e[r]);return this.__items.add(n.uid),this.notify(),this.__data.add(n.uid,n),this.__added.add(n),this.__watchList.forEach(r=>{this.__subsMap[n.uid]||(this.__subsMap[n.uid]=[]),this.__subsMap[n.uid].push(n.subscribe(r,()=>{this.__notifyObservers(r,n.uid)}))}),n.uid}read(e){return this.__data.read(e)}readProp(e,n){return this.read(e).getValue(n)}publishProp(e,n,r){this.read(e).setValue(n,r)}remove(e){this.__removed.add(this.__data.read(e)),this.__items.delete(e),this.notify(),this.__data.pub(e,null),delete this.__subsMap[e]}clearAll(){this.__items.forEach(e=>{this.remove(e)})}observeProperties(e){return this.__propertyObservers.add(e),()=>{this.unobserveProperties(e)}}unobserveProperties(e){var n;(n=this.__propertyObservers)==null||n.delete(e)}findItems(e){let n=[];return this.__items.forEach(r=>{let i=this.read(r);e(i)&&n.push(r)}),n}items(){return[...this.__items]}get size(){return this.__items.size}destroy(){xe.deleteCtx(this.__ctxId),this.__propertyObservers=null,this.__collectionObservers=null;for(let e in this.__subsMap)this.__subsMap[e].forEach(n=>{n.remove()}),delete this.__subsMap[e]}}const VV=t=>{const e=new Map;return(...n)=>{const r=JSON.stringify(n);if(e.has(r))return e.get(r);const i=t(...n);return e.set(r,i),i}};function UV(t){let e=!1;return setTimeout(()=>{e=!0},0),r=>(...i)=>(e&&UI(t),r(...i))}function $V(t){const e={progress:()=>t.$["*commonProgress"],errors:()=>t.$["*collectionErrors"],group:()=>t.$["*groupInfo"],totalCount:()=>t.uploadCollection.size,failedCount:()=>n.failedEntries.length,successCount:()=>n.successEntries.length,uploadingCount:()=>n.uploadingEntries.length,status:()=>n.isFailed?"failed":n.isUploading?"uploading":n.isSuccess?"success":"idle",isSuccess:()=>n.errors.length===0&&n.successEntries.length===n.allEntries.length,isUploading:()=>n.allEntries.some(i=>i.status==="uploading"),isFailed:()=>n.errors.length>0||n.failedEntries.length>0,allEntries:()=>t.getOutputData(),successEntries:()=>n.allEntries.filter(i=>i.status==="success"),failedEntries:()=>n.allEntries.filter(i=>i.status==="failed"),uploadingEntries:()=>n.allEntries.filter(i=>i.status==="uploading"),idleEntries:()=>n.allEntries.filter(i=>i.status==="idle")},n={},r=UV("You're trying to access the OutputCollectionState asynchronously. In this case, the data you retrieve will be newer than it was when the OutputCollectionState was created or when the event was dispatched. If you want to retain the state at a specific moment in time, you should use the spread operator like this: `{...outputCollectionState}` or `{...e.detail}`");for(const[i,s]of Object.entries(e)){const o=i,l=VV(r(s));Object.defineProperty(n,o,{get:l,enumerable:!0})}return n}const FV=Object.freeze({file:{type:File,value:null},externalUrl:{type:String,value:null},fileName:{type:String,value:null,nullable:!0},fileSize:{type:Number,value:null,nullable:!0},lastModified:{type:Number,value:Date.now()},uploadProgress:{type:Number,value:0},uuid:{type:String,value:null},isImage:{type:Boolean,value:!1},mimeType:{type:String,value:null,nullable:!0},ctxName:{type:String,value:null},cdnUrl:{type:String,value:null},cdnUrlModifiers:{type:String,value:null},fileInfo:{type:Ta,value:null},isUploading:{type:Boolean,value:!1},abortController:{type:AbortController,value:null,nullable:!0},thumbUrl:{type:String,value:null,nullable:!0},silent:{type:Boolean,value:!1},source:{type:String,value:!1,nullable:!0},fullPath:{type:String,value:null,nullable:!0},metadata:{type:Object,value:null,nullable:!0},errors:{type:Array,value:[]},uploadError:{type:Error,value:null,nullable:!0},isRemoved:{type:Boolean,value:!1}}),jV=/[a-f0-9]{8}-[a-f0-9]{4}-[a-f0-9]{4}-[a-f0-9]{4}-[a-f0-9]{12}/i,zV=new RegExp(`^/?(${jV.source})(?:/(-/(?:[^/]+/)+)?([^/]*))?$`,"i"),BV=({url:t,cdnBase:e})=>{const n=new URL(e),r=new URL(t);if(n.host!==r.host)return null;const[,i,s,o]=zV.exec(r.pathname);return{uuid:i,cdnUrlModifiers:s||"",filename:o||null}};class Ke extends fe{constructor(){super(...arguments);V(this,"couldBeCtxOwner",!1);V(this,"isCtxOwner",!1);V(this,"init$",CI(this));V(this,"__initialUploadMetadata",null);V(this,"_fileValidators",[this._validateIsImage.bind(this),this._validateFileType.bind(this),this._validateMaxSizeLimit.bind(this),this._validateUploadError.bind(this)]);V(this,"_collectionValidators",[n=>{const r=n.size,i=this.cfg.multiple?this.cfg.multipleMin:0,s=this.cfg.multiple?this.cfg.multipleMax:1;if(i&&r<i){const o=this.l10n("files-count-limit-error-too-few",{min:i,max:s,total:r});return Mf({type:"TOO_FEW_FILES",message:o,total:r,min:i,max:s})}if(s&&r>s){const o=this.l10n("files-count-limit-error-too-many",{min:i,max:s,total:r});return Mf({type:"TOO_MANY_FILES",message:o,total:r,min:i,max:s})}},n=>{if(n.items().some(r=>n.readProp(r,"errors").length>0))return Mf({type:"SOME_FILES_HAS_ERRORS",message:this.l10n("some-files-were-not-uploaded")})}]);V(this,"uploadAll",()=>{const n=this.uploadCollection.items().filter(r=>{const i=this.uploadCollection.read(r);return!i.getValue("isRemoved")&&!i.getValue("isUploading")&&!i.getValue("fileInfo")});n.length!==0&&(this.$["*uploadTrigger"]=new Set(n),this.emit(tt.COMMON_UPLOAD_START,this.getOutputCollectionState()))});V(this,"_flushOutputItems",Dn(async()=>{if(this.getOutputData().length!==this.uploadCollection.size)return;const r=this.getOutputCollectionState();this.$["*collectionState"]=r,this.emit(tt.CHANGE,()=>this.getOutputCollectionState(),{debounce:!0}),this.cfg.groupOutput&&r.totalCount>0&&r.status==="success"&&this._createGroup(r)},300));V(this,"_handleCollectionUpdate",(n,r,i)=>{var s;(r.size||i.size)&&(this.$["*groupInfo"]=null),this._runFileValidators(),this._runCollectionValidators();for(const o of r)o.getValue("silent")||this.emit(tt.FILE_ADDED,this.getOutputItem(o.uid));for(const o of i)this.$["*uploadTrigger"].delete(o.uid),(s=o.getValue("abortController"))==null||s.abort(),o.setMultipleValues({isRemoved:!0,abortController:null,isUploading:!1,uploadProgress:0}),URL.revokeObjectURL(o==null?void 0:o.getValue("thumbUrl")),this.emit(tt.FILE_REMOVED,this.getOutputItem(o.uid));this.$["*uploadList"]=n.map(o=>({uid:o})),this._flushCommonUploadProgress(),this._flushOutputItems()});V(this,"_handleCollectionPropertiesUpdate",n=>{this._flushOutputItems();const r=this.uploadCollection,i=[...new Set(Object.entries(n).filter(([s])=>["uploadError","fileInfo"].includes(s)).map(([,s])=>[...s]).flat())];if(i.length>0&&setTimeout(()=>{this._runFileValidators(i)}),n.uploadProgress){for(const s of n.uploadProgress){const{isUploading:o,silent:a}=xe.getCtx(s).store;o&&!a&&this.emit(tt.FILE_UPLOAD_PROGRESS,this.getOutputItem(s))}this._flushCommonUploadProgress()}if(n.isUploading)for(const s of n.isUploading){const{isUploading:o,silent:a}=xe.getCtx(s).store;o&&!a&&this.emit(tt.FILE_UPLOAD_START,this.getOutputItem(s))}if(n.fileInfo){for(const a of n.fileInfo){const{fileInfo:l,silent:c}=xe.getCtx(a).store;l&&!c&&this.emit(tt.FILE_UPLOAD_SUCCESS,this.getOutputItem(a))}this.cfg.cropPreset&&this.setInitialCrop();let s=r.findItems(a=>!!a.getValue("fileInfo"));r.findItems(a=>a.getValue("errors").length>0).length===0&&r.size===s.length&&this.emit(tt.COMMON_UPLOAD_SUCCESS,this.getOutputCollectionState())}if(n.errors)for(const s of n.errors){const{errors:o}=xe.getCtx(s).store;o.length>0&&(this.emit(tt.FILE_UPLOAD_FAILED,this.getOutputItem(s)),this.emit(tt.COMMON_UPLOAD_FAILED,()=>this.getOutputCollectionState(),{debounce:!0}))}n.cdnUrl&&([...n.cdnUrl].filter(o=>{var a;return!!((a=this.uploadCollection.read(o))!=null&&a.getValue("cdnUrl"))}).forEach(o=>{this.emit(tt.FILE_URL_CHANGED,this.getOutputItem(o))}),this.$["*groupInfo"]=null)});V(this,"_flushCommonUploadProgress",()=>{let n=0;const i=[...this.$["*uploadTrigger"]].filter(o=>!!this.uploadCollection.read(o));i.forEach(o=>{const a=this.uploadCollection.readProp(o,"uploadProgress");n+=a});const s=i.length?Math.round(n/i.length):0;this.$["*commonProgress"]!==s&&(this.$["*commonProgress"]=s,this.emit(tt.COMMON_UPLOAD_PROGRESS,this.getOutputCollectionState()))})}setUploadMetadata(n){UI("setUploadMetadata is deprecated. Use `metadata` instance property on `lr-config` block instead. See migration guide: https://uploadcare.com/docs/file-uploader/migration-to-0.25.0/"),this.connectedOnce?this.$["*uploadMetadata"]=n:this.__initialUploadMetadata=n}get hasCtxOwner(){return this.hasBlockInCtx(n=>n instanceof Ke?n.isCtxOwner&&n.isConnected&&n!==this:!1)}initCallback(){if(super.initCallback(),!this.$["*uploadCollection"]){let n=new MV({typedSchema:FV,watchList:["uploadProgress","uploadError","fileInfo","errors","cdnUrl","isUploading"]});this.$["*uploadCollection"]=n}!this.hasCtxOwner&&this.couldBeCtxOwner&&this.initCtxOwner()}destroyCtxCallback(){var n,r;(n=this._unobserveCollectionProperties)==null||n.call(this),(r=this._unobserveCollection)==null||r.call(this),this.uploadCollection.destroy(),this.$["*uploadCollection"]=null,super.destroyCtxCallback()}initCtxOwner(){this.isCtxOwner=!0,this._unobserveCollection=this.uploadCollection.observeCollection(this._handleCollectionUpdate),this._unobserveCollectionProperties=this.uploadCollection.observeProperties(this._handleCollectionPropertiesUpdate);const n=()=>{this._runFileValidators(),this._runCollectionValidators()};this.subConfigValue("maxLocalFileSizeBytes",n),this.subConfigValue("multipleMin",n),this.subConfigValue("multipleMax",n),this.subConfigValue("multiple",n),this.subConfigValue("imgOnly",n),this.subConfigValue("accept",n),this.subConfigValue("maxConcurrentRequests",r=>{this.$["*uploadQueue"].concurrency=Number(r)||1}),this.__initialUploadMetadata&&(this.$["*uploadMetadata"]=this.__initialUploadMetadata)}addFileFromUrl(n,{silent:r,fileName:i,source:s}={}){const o=this.uploadCollection.add({externalUrl:n,fileName:i??null,silent:r??!1,source:s??sr.API});return this.getOutputItem(o)}addFileFromUuid(n,{silent:r,fileName:i,source:s}={}){const o=this.uploadCollection.add({uuid:n,fileName:i??null,silent:r??!1,source:s??sr.API});return this.getOutputItem(o)}addFileFromCdnUrl(n,{silent:r,fileName:i,source:s}={}){const o=BV({url:n,cdnBase:this.cfg.cdnCname});if(!o)throw new Error("Invalid CDN URL");const a=this.uploadCollection.add({uuid:o.uuid,cdnUrl:n,cdnUrlModifiers:o.cdnUrlModifiers,fileName:i??o.filename??null,silent:r??!1,source:s??sr.API});return this.getOutputItem(a)}addFileFromObject(n,{silent:r,fileName:i,source:s,fullPath:o}={}){const a=this.uploadCollection.add({file:n,isImage:Cw(n),mimeType:n.type,fileName:i??n.name,fileSize:n.size,silent:r??!1,source:s??sr.API,fullPath:o??null});return this.getOutputItem(a)}addFiles(n){return console.warn("`addFiles` method is deprecated. Please use `addFileFromObject`, `addFileFromUrl` or `addFileFromUuid` instead."),n.map(r=>{const i=this.uploadCollection.add({file:r,isImage:Cw(r),mimeType:r.type,fileName:r.name,fileSize:r.size});return this.getOutputItem(i)})}removeFileByInternalId(n){if(!this.uploadCollection.read(n))throw new Error(`File with internalId ${n} not found`);this.uploadCollection.remove(n)}removeAllFiles(){this.uploadCollection.clearAll()}openSystemDialog(n={}){let r=Iy(Tw([this.cfg.accept??"",...this.cfg.imgOnly?pm:[]]));this.cfg.accept&&this.cfg.imgOnly&&console.warn("There could be a mistake.\nBoth `accept` and `imgOnly` parameters are set.\nThe value of `accept` will be concatenated with the internal image mime types list."),this.fileInput=document.createElement("input"),this.fileInput.type="file",this.fileInput.multiple=this.cfg.multiple,n.captureCamera?(this.fileInput.capture=this.cfg.cameraCapture,this.fileInput.accept="image/*"):this.fileInput.accept=r,this.fileInput.dispatchEvent(new MouseEvent("click")),this.fileInput.onchange=()=>{[...this.fileInput.files].forEach(i=>this.addFileFromObject(i,{source:n.captureCamera?sr.CAMERA:sr.LOCAL})),this.$["*currentActivity"]=fe.activities.UPLOAD_LIST,this.setOrAddState("*modalActive",!0),this.fileInput.value="",this.fileInput=null}}get sourceList(){let n=[];return this.cfg.sourceList&&(n=Gr(this.cfg.sourceList)),n}initFlow(n=!1){var r;if(this.uploadCollection.size>0&&!n)this.set$({"*currentActivity":fe.activities.UPLOAD_LIST}),this.setOrAddState("*modalActive",!0);else if(((r=this.sourceList)==null?void 0:r.length)===1){const i=this.sourceList[0];if(i==="local"){this.$["*currentActivity"]=fe.activities.UPLOAD_LIST,this==null||this.openSystemDialog();return}const s=this.$["*blocksRegistry"],o=l=>"type"in l&&l.type===i,a=[...s].find(o);a==null||a.activate(),this.$["*currentActivity"]&&this.setOrAddState("*modalActive",!0)}else this.set$({"*currentActivity":fe.activities.START_FROM}),this.setOrAddState("*modalActive",!0)}doneFlow(){this.set$({"*currentActivity":this.doneActivity,"*history":this.doneActivity?[this.doneActivity]:[]}),this.$["*currentActivity"]||this.setOrAddState("*modalActive",!1)}get uploadCollection(){return this.$["*uploadCollection"]}_validateFileType(n){const r=this.cfg.imgOnly,i=this.cfg.accept,s=Tw([...r?pm:[],i]);if(!s.length)return;const o=n.mimeType,a=n.name;if(!o||!a)return;const l=VI(o,s),c=OV(a,s);if(!l&&!c)return uo({type:"FORBIDDEN_FILE_TYPE",message:this.l10n("file-type-not-allowed"),entry:n})}_validateMaxSizeLimit(n){const r=this.cfg.maxLocalFileSizeBytes,i=n.size;if(r&&i&&i>r)return uo({type:"FILE_SIZE_EXCEEDED",message:this.l10n("files-max-size-limit-error",{maxFileSize:LV(r)}),entry:n})}_validateUploadError(n,r){const i=r==null?void 0:r.getValue("uploadError");if(i){if(i instanceof un)return uo({type:"UPLOAD_ERROR",message:i.message,entry:n,error:i});if(i instanceof ku)return uo({type:"NETWORK_ERROR",message:i.message,entry:n,error:i});{const s=i instanceof Error?i:new Error("Unknown error",{cause:i});return uo({type:"UNKNOWN_ERROR",message:s.message,entry:n,error:s})}}}_validateIsImage(n){const r=this.cfg.imgOnly,i=n.isImage;if(!(!r||i)&&!(!n.fileInfo&&n.externalUrl)&&!(!n.fileInfo&&!n.mimeType))return uo({type:"NOT_AN_IMAGE",message:this.l10n("images-only-accepted"),entry:n})}_runFileValidatorsForEntry(n){const r=this.getOutputItem(n.uid),i=[];for(const s of this._fileValidators){const o=s(r,n);o&&i.push(o)}n.setValue("errors",i)}_runFileValidators(n){const r=n??this.uploadCollection.items();for(const i of r){const s=this.uploadCollection.read(i);s&&this._runFileValidatorsForEntry(s)}}_runCollectionValidators(){const n=this.uploadCollection,r=[];for(const i of this._collectionValidators){const s=i(n);s&&(Array.isArray(s)?r.push(...s):r.push(s))}this.$["*collectionErrors"]=r,r.length>0&&this.emit(tt.COMMON_UPLOAD_FAILED,()=>this.getOutputCollectionState(),{debounce:!0})}async _createGroup(n){const r=this.getUploadClientOptions(),i=n.allEntries.map(l=>l.uuid+(l.cdnUrlModifiers?`/${l.cdnUrlModifiers}`:"")),s=new AbortController,o=await W5(i,{...r,signal:s.signal});if(this.$["*collectionState"]!==n){s.abort();return}this.$["*groupInfo"]=o;const a=this.getOutputCollectionState();this.emit(tt.GROUP_CREATED,a),this.emit(tt.CHANGE,()=>this.getOutputCollectionState(),{debounce:!0}),this.$["*collectionState"]=a}setInitialCrop(){const n=DI(this.cfg.cropPreset);if(n){const[r]=n,i=this.uploadCollection.findItems(s=>{var o;return s.getValue("fileInfo")&&s.getValue("isImage")&&!((o=s.getValue("cdnUrlModifiers"))!=null&&o.includes("/crop/"))}).map(s=>this.uploadCollection.read(s));for(const s of i){const o=s.getValue("fileInfo"),{width:a,height:l}=o.imageInfo,c=r.width/r.height,h=PV(a,l,c),f=Wi(`crop/${h.width}x${h.height}/${h.x},${h.y}`,"preview");s.setMultipleValues({cdnUrlModifiers:f,cdnUrl:An(s.getValue("cdnUrl"),f)}),this.uploadCollection.size===1&&this.cfg.useCloudImageEditor&&this.hasBlockInCtx(p=>p.activityType===fe.activities.CLOUD_IMG_EDIT)&&(this.$["*focusedEntry"]=s,this.$["*currentActivity"]=fe.activities.CLOUD_IMG_EDIT)}}}async getMetadataFor(n){const r=this.cfg.metadata??this.$["*uploadMetadata"];if(typeof r=="function"){const i=this.getOutputItem(n);return await r(i)}return r}getUploadClientOptions(){return{store:this.cfg.store,publicKey:this.cfg.pubkey,baseCDN:this.cfg.cdnCname,baseURL:this.cfg.baseUrl,userAgent:RV,integration:this.cfg.userAgentIntegration,secureSignature:this.cfg.secureSignature,secureExpire:this.cfg.secureExpire,retryThrottledRequestMaxTimes:this.cfg.retryThrottledRequestMaxTimes,multipartMinFileSize:this.cfg.multipartMinFileSize,multipartChunkSize:this.cfg.multipartChunkSize,maxConcurrentRequests:this.cfg.multipartMaxConcurrentRequests,multipartMaxAttempts:this.cfg.multipartMaxAttempts,checkForUrlDuplicates:!!this.cfg.checkForUrlDuplicates,saveUrlForRecurrentUploads:!!this.cfg.saveUrlForRecurrentUploads}}getOutputItem(n){const r=xe.getCtx(n).store,i=r.fileInfo;let s=r.isRemoved?"removed":r.errors.length>0?"failed":r.fileInfo?"success":r.isUploading?"uploading":"idle";return{uuid:(i==null?void 0:i.uuid)??r.uuid??null,internalId:n,name:(i==null?void 0:i.originalFilename)??r.fileName,size:(i==null?void 0:i.size)??r.fileSize,isImage:(i==null?void 0:i.isImage)??r.isImage,mimeType:(i==null?void 0:i.mimeType)??r.mimeType,file:r.file,externalUrl:r.externalUrl,cdnUrlModifiers:r.cdnUrlModifiers,cdnUrl:r.cdnUrl??(i==null?void 0:i.cdnUrl)??null,fullPath:r.fullPath,uploadProgress:r.uploadProgress,fileInfo:i??null,metadata:r.metadata??(i==null?void 0:i.metadata)??null,isSuccess:s==="success",isUploading:s==="uploading",isFailed:s==="failed",isRemoved:s==="removed",errors:r.errors,status:s}}getOutputData(n){return(n?this.uploadCollection.findItems(n):this.uploadCollection.items()).map(s=>this.getOutputItem(s))}getOutputCollectionState(){return $V(this)}}Ke.extSrcList=Object.freeze({FACEBOOK:"facebook",DROPBOX:"dropbox",GDRIVE:"gdrive",GPHOTOS:"gphotos",INSTAGRAM:"instagram",FLICKR:"flickr",VK:"vk",EVERNOTE:"evernote",BOX:"box",ONEDRIVE:"onedrive",HUDDLE:"huddle"});Ke.sourceTypes=Object.freeze({LOCAL:"local",URL:"url",CAMERA:"camera",DRAW:"draw",...Ke.extSrcList});const Rd=t=>{var e;return(e=t.match(/[A-Z]{2,}(?=[A-Z][a-z]+[0-9]*|\b)|[A-Z]?[a-z]+[0-9]*|[A-Z]|[0-9]+/g))==null?void 0:e.map(n=>n.toLowerCase()).join("-")},St=t=>String(t),nr=t=>{const e=Number(t);if(Number.isNaN(e))throw new Error(`Invalid number: "${t}"`);return e},nt=t=>{if(typeof t>"u"||t===null)return!1;if(typeof t=="boolean")return t;if(t==="true"||t==="")return!0;if(t==="false")return!1;throw new Error(`Invalid boolean: "${t}"`)},HV=t=>t==="auto"?t:nt(t),WV=t=>{const e=St(t);if(e!=="user"&&e!=="environment"&&e!=="")throw new Error(`Invalid "cameraCapture" value: "${e}"`);return e},qV=t=>{if(typeof t=="object"&&!Array.isArray(t)||typeof t=="function")return t;throw new Error("Invalid metadata value. Must be an object or function.")},GV=t=>{if(typeof t=="object")return t;throw new Error("Invalid localeDefinitionOverride value. Must be an object.")},KV={pubkey:St,multiple:nt,multipleMin:nr,multipleMax:nr,confirmUpload:nt,imgOnly:nt,accept:St,externalSourcesPreferredTypes:St,store:HV,cameraMirror:nt,cameraCapture:WV,sourceList:St,maxLocalFileSizeBytes:nr,thumbSize:nr,showEmptyList:nt,useLocalImageEditor:nt,useCloudImageEditor:nt,cloudImageEditorTabs:St,removeCopyright:nt,cropPreset:St,imageShrink:St,modalScrollLock:nt,modalBackdropStrokes:nt,sourceListWrap:nt,remoteTabSessionKey:St,cdnCname:St,baseUrl:St,socialBaseUrl:St,secureSignature:St,secureExpire:St,secureDeliveryProxy:St,retryThrottledRequestMaxTimes:nr,multipartMinFileSize:nr,multipartChunkSize:nr,maxConcurrentRequests:nr,multipartMaxConcurrentRequests:nr,multipartMaxAttempts:nr,checkForUrlDuplicates:nt,saveUrlForRecurrentUploads:nt,groupOutput:nt,userAgentIntegration:St,debug:nt,localeName:St,metadata:qV,localeDefinitionOverride:GV},QV=(t,e)=>{if(!(typeof e>"u"||e===null))try{return KV[t](e)}catch(n){return console.error(`Invalid value for config key "${t}".`,n),Vi[t]}},Sy=[...new Set(["debug",...Object.keys(Vi)])],XV=["metadata","localeDefinitionOverride"],YV=t=>XV.includes(t),la=Sy.filter(t=>!YV(t)),JV={...Object.fromEntries(la.map(t=>[Rd(t),t])),...Object.fromEntries(la.map(t=>[t.toLowerCase(),t]))},ZV={...Object.fromEntries(la.map(t=>[Rd(t),In(t)])),...Object.fromEntries(la.map(t=>[t.toLowerCase(),In(t)]))},Aw=t=>"__"+t;class Ay extends Oe{constructor(){super();V(this,"requireCtxName",!0);this.init$={...this.init$,...Object.fromEntries(Object.entries(Vi).map(([n,r])=>[In(n),r]))}}_flushValueToAttribute(n,r){if(la.includes(n)){const i=[...new Set([Rd(n),n.toLowerCase()])];for(const s of i)typeof r>"u"||r===null?this.removeAttribute(s):this.getAttribute(s)!==r.toString()&&this.setAttribute(s,r.toString())}}_flushValueToState(n,r){this.$[In(n)]!==r&&(typeof r>"u"||r===null?this.$[In(n)]=Vi[n]:this.$[In(n)]=r)}_setValue(n,r){const i=this,s=QV(n,r),o=Aw(n);i[o]!==s&&(this._assertSameValueDifferentReference(n,i[o],s),i[o]=s,this._flushValueToAttribute(n,s),this._flushValueToState(n,s),this.debugPrint(`[lr-config] "${n}"`,s))}_getValue(n){const r=this,i=Aw(n);return r[i]}_assertSameValueDifferentReference(n,r,i){this.cfg.debug&&JSON.stringify(i)===JSON.stringify(r)&&(console.warn(`[lr-config] Option "${n}" value is the same as the previous one but the reference is different`),console.warn("[lr-config] You should avoid changing the reference of the object to prevent unnecessary calculations"),console.warn(`[lr-config] "${n}" previous value:`,r),console.warn(`[lr-config] "${n}" new value:`,i))}initCallback(){super.initCallback();const n=this;for(const r of la)this.sub(In(r),i=>{this._setValue(r,i)},!1);for(const r of Sy){const i=n[r]??this.$[In(r)];i!==Vi[r]&&this._setValue(r,i),Object.defineProperty(this,r,{set:s=>{this._setValue(r,s)},get:()=>this._getValue(r)})}}attributeChangedCallback(n,r,i){if(r===i)return;const s=this,o=JV[n];s[o]=i}}Ay.bindAttributes(ZV);for(const t of Sy)Ay.prototype[t]=void 0;const $I=Ay;class xy extends Oe{constructor(){super(...arguments);V(this,"init$",{...this.init$,name:"",path:"",size:"24",viewBox:""})}initCallback(){super.initCallback(),this.sub("name",n=>{if(!n)return;let r=this.getCssData(`--icon-${n}`);r&&(this.$.path=r)}),this.sub("path",n=>{if(!n)return;n.trimStart().startsWith("<")?(this.setAttribute("raw",""),this.ref.svg.innerHTML=n):(this.removeAttribute("raw"),this.ref.svg.innerHTML=`<path fill-rule="evenodd" d="${n}"></path>`)}),this.sub("size",n=>{this.$.viewBox=`0 0 ${n} ${n}`})}}xy.template=`
  <svg ref="svg" xmlns="http://www.w3.org/2000/svg" set="@viewBox: viewBox; @height: size; @width: size"></svg>
`;xy.bindAttributes({name:"name",size:"size"});const eU=t=>[...new Set(t)],tU=t=>Object.entries(t).filter(([e,n])=>n!==void 0&&n!=="").map(([e,n])=>e==="cdn-operations"||e==="analytics"?n:`${e}/${n}`),nU="https://ucarecdn.com",$h=Object.freeze({"dev-mode":{},pubkey:{},uuid:{},src:{},lazy:{default:1},intersection:{},breakpoints:{},"cdn-cname":{default:nU},"proxy-cname":{},"secure-delivery-proxy":{},"hi-res-support":{default:1},"ultra-res-support":{},format:{},"cdn-operations":{},progressive:{},quality:{},"is-background-for":{},"is-preview-blur":{default:1}}),ml="--lr-img-",xw="unresolved",vc=2,_c=3,kw=!window.location.host.trim()||window.location.host.includes(":")||window.location.hostname.includes("localhost"),Pw=3e3,Rw=5e3,Ow=Object.freeze({PREVIEW:"PREVIEW",MAIN:"MAIN"}),FI=Object.create(null);var Hw;for(let t in $h)FI[ml+t]=((Hw=$h[t])==null?void 0:Hw.default)||"";class rU extends Td{constructor(){super(...arguments);V(this,"cssInit$",FI)}$$(n){return this.$[ml+n]}set$$(n){for(let r in n)this.$[ml+r]=n[r]}sub$$(n,r){this.sub(ml+n,i=>{i===null||i===""||r(i)})}analyticsParams(){return`-/@clib/${by}/${Ty}/lr-img/`}initAttributes(n){[...this.attributes].forEach(r=>{$h[r.name]||n.setAttribute(r.name,r.value)})}initIntersection(n,r){let i={root:null,rootMargin:"0px"};this._isnObserver=new IntersectionObserver(s=>{s.forEach(o=>{o.isIntersecting&&(r(),this._isnObserver.unobserve(n))})},i),this._isnObserver.observe(n),this._observed||(this._observed=new Set),this._observed.add(n)}destroyCallback(){super.destroyCallback(),this._isnObserver&&(this._observed.forEach(n=>{this._isnObserver.unobserve(n)}),this._isnObserver=null),xe.deleteCtx(this)}static get observedAttributes(){return Object.keys($h)}attributeChangedCallback(n,r,i){window.setTimeout(()=>{this.$[ml+n]=i})}}class iU extends rU{constructor(){super(...arguments);V(this,"_img",new Image);V(this,"_imgPreview",new Image)}_fmtAbs(n){return!n.includes("//")&&!kw&&(n=new URL(n,document.baseURI).href),n}_validateSize(n){if((n==null?void 0:n.trim())!==""){let r=n.match(/\d+/)[0],i=n.match(/[a-zA-Z]+/)[0];const s=parseInt(r,10);if(Number(s)>Rw&&this.hasFormatJPG)return Rw+i;if(Number(s)>Pw&&!this.hasFormatJPG)return Pw+i}return n}_getCdnModifiers(n,r){const i={format:this.$$("format"),quality:this.$$("quality"),resize:this._validateSize(n),blur:r,"cdn-operations":this.$$("cdn-operations"),analytics:this.analyticsParams()};return Wi(...tU(i))}_getUrlBase(n="",r=""){if(this.$$("src").startsWith("data:")||this.$$("src").startsWith("blob:"))return this.$$("src");if(kw&&this.$$("src")&&!this.$$("src").includes("//"))return this._proxyUrl(this.$$("src"));let i=this._getCdnModifiers(n,r);if(this.$$("src").startsWith(this.$$("cdn-cname")))return An(this.$$("src"),i);if(this.$$("cdn-cname")&&this.$$("uuid"))return this._proxyUrl(An(su(this.$$("cdn-cname"),this.$$("uuid")),i));if(this.$$("uuid"))return this._proxyUrl(An(su(this.$$("cdn-cname"),this.$$("uuid")),i));if(this.$$("proxy-cname"))return this._proxyUrl(An(this.$$("proxy-cname"),i,this._fmtAbs(this.$$("src"))));if(this.$$("pubkey"))return this._proxyUrl(An(`https://${this.$$("pubkey")}.ucr.io/`,i,this._fmtAbs(this.$$("src"))))}_proxyUrl(n){return this.$$("secure-delivery-proxy")?cm(this.$$("secure-delivery-proxy"),{previewUrl:n},{transform:i=>window.encodeURIComponent(i)}):n}_getElSize(n,r=1,i=!0){let s=n.getBoundingClientRect(),o=r*Math.round(s.width),a=i?"":r*Math.round(s.height);return o||a?`${o||""}x${a||""}`:null}_setupEventProxy(n){let r=s=>{s.stopPropagation();let o=new Event(s.type,s);this.dispatchEvent(o)},i=["load","error"];for(let s of i)n.addEventListener(s,r)}get img(){return this.hasPreviewImage||(this._setupConfigForImage({elNode:this._img}),this.appendChild(this._img)),this._img}get currentImg(){return this.hasPreviewImage?{type:Ow.PREVIEW,img:this._imgPreview}:{type:Ow.MAIN,img:this.img}}get hasPreviewImage(){return this.$$("is-preview-blur")}get bgSelector(){return this.$$("is-background-for")}get breakpoints(){if(this.$$("breakpoints")){const n=Gr(this.$$("breakpoints"));return eU(n.map(r=>parseInt(r,10)))}else return null}get hasFormatJPG(){return this.$$("format").toLowerCase()==="jpeg"}renderBg(n){let r=new Set;r.add(`url("${this._getUrlBase(this._getElSize(n))}") 1x`),this.$$("hi-res-support")&&r.add(`url("${this._getUrlBase(this._getElSize(n,vc))}") ${vc}x`),this.$$("ultra-res-support")&&r.add(`url("${this._getUrlBase(this._getElSize(n,_c))}") ${_c}x`);let i=`image-set(${[...r].join(", ")})`;n.style.setProperty("background-image",i),n.style.setProperty("background-image","-webkit-"+i)}getSrcset(){let n=new Set;return this.breakpoints?this.breakpoints.forEach(r=>{n.add(this._getUrlBase(r+"x")+` ${this._validateSize(r+"w")}`),this.$$("hi-res-support")&&n.add(this._getUrlBase(r*vc+"x")+` ${this._validateSize(r*vc+"w")}`),this.$$("ultra-res-support")&&n.add(this._getUrlBase(r*_c+"x")+` ${this._validateSize(r*_c+"w")}`)}):(n.add(this._getUrlBase(this._getElSize(this.currentImg.img))+" 1x"),this.$$("hi-res-support")&&n.add(this._getUrlBase(this._getElSize(this.currentImg.img,2))+" 2x"),this.$$("ultra-res-support")&&n.add(this._getUrlBase(this._getElSize(this.currentImg.img,3))+" 3x")),[...n].join()}getSrc(){return this._getUrlBase()}get srcUrlPreview(){return this._getUrlBase("100x","100")}renderBackground(){[...document.querySelectorAll(this.bgSelector)].forEach(n=>{this.$$("intersection")?this.initIntersection(n,()=>{this.renderBg(n)}):this.renderBg(n)})}_appendURL({elNode:n,src:r,srcset:i}){r&&(n.src=r),i&&(n.srcset=i)}_setupConfigForImage({elNode:n}){this._setupEventProxy(n),this.initAttributes(n)}loaderImage({src:n,srcset:r,elNode:i}){return new Promise((s,o)=>{this._setupConfigForImage({elNode:i}),i.setAttribute(xw,""),i.addEventListener("load",()=>{i.removeAttribute(xw),s(i)}),i.addEventListener("error",()=>{o(!1)}),this._appendURL({elNode:i,src:n,srcset:r})})}async renderImage(){var n,r;if(this.$$("intersection")){this.hasPreviewImage&&(this._setupConfigForImage({elNode:this._imgPreview}),this.appendChild(this._imgPreview)),this.initIntersection(this.currentImg.img,async()=>{var i;this.hasPreviewImage&&(this._imgPreview.src=this.srcUrlPreview);try{await this.loaderImage({src:this.getSrc(),srcset:this.getSrcset(),elNode:this._img}),this.hasPreviewImage&&await this._imgPreview.remove(),this.appendChild(this._img)}catch{this.hasPreviewImage&&await((i=this._imgPreview)==null?void 0:i.remove()),this.appendChild(this._img)}});return}try{this.hasPreviewImage&&(await this.loaderImage({src:this.srcUrlPreview,elNode:this._imgPreview}),this.appendChild(this._imgPreview)),await this.loaderImage({src:this.getSrc(),srcset:this.getSrcset(),elNode:this._img}),this.hasPreviewImage&&await((n=this._imgPreview)==null?void 0:n.remove()),this.appendChild(this._img)}catch{this.hasPreviewImage&&await((r=this._imgPreview)==null?void 0:r.remove()),this.appendChild(this._img)}}init(){this.bgSelector?this.renderBackground():this.renderImage()}}class sU extends iU{initCallback(){super.initCallback(),this.sub$$("src",()=>{this.init()}),this.sub$$("uuid",()=>{this.init()}),this.sub$$("lazy",e=>{!this.$$("is-background-for")&&!this.$$("is-preview-blur")&&(this.img.loading=e?"lazy":"eager")})}}class ky extends Ke{constructor(){super();V(this,"couldBeCtxOwner",!0);this.init$={...this.init$,withDropZone:!0,onClick:()=>{this.initFlow()},"button-text":""}}initCallback(){super.initCallback(),this.defineAccessor("dropzone",n=>{typeof n>"u"||(this.$.withDropZone=nt(n))}),this.subConfigValue("multiple",n=>{this.$["button-text"]=n?"upload-files":"upload-file"})}}ky.template=`
  <lr-drop-area set="@disabled: !withDropZone">
    <button type="button" set="onclick: onClick">
      <lr-icon name="upload"></lr-icon>
      <span l10n="button-text"></span>
      <slot></slot>
      <div class="visual-drop-area" l10n="drop-files-here"></div>
    </button>
  </lr-drop-area>
`;ky.bindAttributes({dropzone:null});class jI extends fe{constructor(){super(...arguments);V(this,"historyTracked",!0);V(this,"activityType","start-from")}initCallback(){super.initCallback(),this.registerActivity(this.activityType)}}jI.template=' <div class="content"><slot></slot></div> ';function oU(t){return new Promise(e=>{typeof window.FileReader!="function"&&e(!1);try{let n=new FileReader;n.onerror=()=>{e(!0)};let r=i=>{i.type!=="loadend"&&n.abort(),e(!1)};n.onloadend=r,n.onprogress=r,n.readAsDataURL(t)}catch{e(!1)}})}function aU(t,e){return new Promise(n=>{let r=0;const i=[],s=a=>{a||(console.warn("Unexpectedly received empty content entry",{scope:"drag-and-drop"}),n(null)),a.isFile?(r++,a.file(l=>{r--;const c=new File([l],l.name,{type:l.type||e});i.push({type:"file",file:c,fullPath:a.fullPath}),r===0&&n(i)})):a.isDirectory&&o(a.createReader())};let o=a=>{r++,a.readEntries(l=>{r--;for(let c of l)s(c);r===0&&n(i)})};s(t)})}function lU(t){const e=[],n=[];for(let r=0;r<t.items.length;r++){let i=t.items[r];if(i)if(i.kind==="file"){const s=i.type;if(typeof i.webkitGetAsEntry=="function"||typeof i.getAsEntry=="function"){let a=typeof i.webkitGetAsEntry=="function"?i.webkitGetAsEntry():i.getAsEntry();n.push(aU(a,s).then(l=>{l&&e.push(...l)}));continue}const o=i.getAsFile();o&&n.push(oU(o).then(a=>{a||e.push({type:"file",file:o})}))}else i.kind==="string"&&i.type.match("^text/uri-list")&&n.push(new Promise(s=>{i.getAsString(o=>{e.push({type:"url",url:o}),s(void 0)})}))}return Promise.all(n).then(()=>e)}const tn={ACTIVE:0,INACTIVE:1,NEAR:2,OVER:3};let Lw=["focus"],uU=100,Vf=new Map;function cU(t,e){let n=Math.max(Math.min(t[0],e.x+e.width),e.x),r=Math.max(Math.min(t[1],e.y+e.height),e.y);return Math.sqrt((t[0]-n)*(t[0]-n)+(t[1]-r)*(t[1]-r))}function Nw(t){let e=0,n=document.body,r=new Set,i=E=>r.add(E),s=tn.INACTIVE,o=E=>{t.shouldIgnore()&&E!==tn.INACTIVE||(s!==E&&r.forEach(S=>S(E)),s=E)},a=()=>e>0;i(E=>t.onChange(E));let l=()=>{e=0,o(tn.INACTIVE)},c=()=>{e+=1,s===tn.INACTIVE&&o(tn.ACTIVE)},h=()=>{e-=1,a()||o(tn.INACTIVE)},f=E=>{E.preventDefault(),e=0,o(tn.INACTIVE)},p=E=>{if(t.shouldIgnore())return;a()||(e+=1);let S=[E.x,E.y],P=t.element.getBoundingClientRect(),T=Math.floor(cU(S,P)),_=T<uU,C=E.composedPath().includes(t.element);Vf.set(t.element,T);let N=Math.min(...Vf.values())===T;C&&N?(E.preventDefault(),o(tn.OVER)):o(_&&N?tn.NEAR:tn.ACTIVE)},w=async E=>{if(t.shouldIgnore())return;E.preventDefault();let S=await lU(E.dataTransfer);t.onItems(S),o(tn.INACTIVE)};return n.addEventListener("drop",f),n.addEventListener("dragleave",h),n.addEventListener("dragenter",c),n.addEventListener("dragover",p),t.element.addEventListener("drop",w),Lw.forEach(E=>{window.addEventListener(E,l)}),()=>{Vf.delete(t.element),n.removeEventListener("drop",f),n.removeEventListener("dragleave",h),n.removeEventListener("dragenter",c),n.removeEventListener("dragover",p),t.element.removeEventListener("drop",w),Lw.forEach(E=>{window.removeEventListener(E,l)})}}const zI="lr-drop-area",co=`${zI}/registry`;class Py extends Ke{constructor(){super(),this.init$={...this.init$,state:tn.INACTIVE,withIcon:!1,isClickable:!1,isFullscreen:!1,isEnabled:!0,isVisible:!0,text:"",[co]:null}}isActive(){if(!this.$.isEnabled)return!1;const e=this.getBoundingClientRect(),n=e.width>0&&e.height>0,r=e.top>=0&&e.left>=0&&e.bottom<=(window.innerHeight||document.documentElement.clientHeight)&&e.right<=(window.innerWidth||document.documentElement.clientWidth),i=window.getComputedStyle(this),s=i.visibility!=="hidden"&&i.display!=="none";return n&&s&&r}initCallback(){super.initCallback(),this.bindL10n("text",()=>this.l10n("drop-files-here")),this.$[co]||(this.$[co]=new Set),this.$[co].add(this),this.defineAccessor("disabled",n=>{this.set$({isEnabled:!nt(n)})}),this.defineAccessor("clickable",n=>{this.set$({isClickable:nt(n)})}),this.defineAccessor("with-icon",n=>{this.set$({withIcon:nt(n)})}),this.defineAccessor("fullscreen",n=>{this.set$({isFullscreen:nt(n)})}),this.defineAccessor("text",n=>{typeof n=="string"?this.bindL10n("text",()=>this.l10n(n)||n):this.bindL10n("text",()=>this.l10n("drop-files-here"))}),this._destroyDropzone=Nw({element:this,shouldIgnore:()=>this._shouldIgnore(),onChange:n=>{this.$.state=n},onItems:n=>{n.length&&(n.forEach(r=>{r.type==="url"?this.addFileFromUrl(r.url,{source:sr.DROP_AREA}):r.type==="file"&&this.addFileFromObject(r.file,{source:sr.DROP_AREA,fullPath:r.fullPath})}),this.uploadCollection.size&&(this.set$({"*currentActivity":fe.activities.UPLOAD_LIST}),this.setOrAddState("*modalActive",!0)))}});let e=this.ref["content-wrapper"];e&&(this._destroyContentWrapperDropzone=Nw({element:e,onChange:n=>{var i;const r=(i=Object.entries(tn).find(([,s])=>s===n))==null?void 0:i[0].toLowerCase();r&&e.setAttribute("drag-state",r)},onItems:()=>{},shouldIgnore:()=>this._shouldIgnore()})),this.sub("state",n=>{var i;const r=(i=Object.entries(tn).find(([,s])=>s===n))==null?void 0:i[0].toLowerCase();r&&this.setAttribute("drag-state",r)}),this.subConfigValue("sourceList",n=>{const r=Gr(n);this.$.isEnabled=r.includes(Ke.sourceTypes.LOCAL),this.$.isVisible=this.$.isEnabled||!this.querySelector("[data-default-slot]")}),this.sub("isVisible",n=>{this.toggleAttribute("hidden",!n)}),this.sub("isClickable",n=>{this.toggleAttribute("clickable",n)}),this.$.isClickable&&(this._onAreaClicked=()=>{this.openSystemDialog()},this.addEventListener("click",this._onAreaClicked))}_shouldIgnore(){return!this.$.isEnabled||!this._couldHandleFiles()?!0:this.$.isFullscreen?[...this.$[co]].filter(r=>r!==this).filter(r=>r.isActive()).length>0:!1}_couldHandleFiles(){let e=this.cfg.multiple,n=this.cfg.multipleMax,r=this.uploadCollection.size;return!(e&&n&&r>=n||!e&&r>0)}destroyCallback(){var n,r;super.destroyCallback();const e=this.$[co];e&&(e.delete(this),e.size===0&&xe.deleteCtx(zI)),(n=this._destroyDropzone)==null||n.call(this),(r=this._destroyContentWrapperDropzone)==null||r.call(this),this._onAreaClicked&&this.removeEventListener("click",this._onAreaClicked)}}Py.template=`
  <slot>
    <div data-default-slot hidden></div>
    <div ref="content-wrapper" class="content-wrapper" set="@hidden: !isVisible">
      <div class="icon-container" set="@hidden: !withIcon">
        <lr-icon name="default"></lr-icon>
        <lr-icon name="arrow-down"></lr-icon>
      </div>
      <span class="text">{{text}}</span>
    </div>
  </slot>
`;Py.bindAttributes({"with-icon":null,clickable:null,text:null,fullscreen:null,disabled:null});const hU="src-type-";class Ry extends Ke{constructor(){super();V(this,"couldBeCtxOwner",!0);V(this,"type");V(this,"_registeredTypes",{});this.init$={...this.init$,iconName:"default","src-type":""}}initTypes(){this.registerType({type:Ke.sourceTypes.LOCAL,activate:()=>(this.openSystemDialog(),!1)}),this.registerType({type:Ke.sourceTypes.URL,activity:fe.activities.URL,textKey:"from-url"}),this.registerType({type:Ke.sourceTypes.CAMERA,activity:fe.activities.CAMERA,activate:()=>{const n="capture"in document.createElement("input");return n&&this.openSystemDialog({captureCamera:!0}),!n}}),this.registerType({type:"draw",activity:fe.activities.DRAW,icon:"edit-draw"});for(let n of Object.values(Ke.extSrcList))this.registerType({type:n,activity:fe.activities.EXTERNAL,activityParams:{externalSourceType:n}})}initCallback(){super.initCallback(),this.initTypes(),this.setAttribute("role","button"),this.defineAccessor("type",n=>{n&&this.applyType(n)})}registerType(n){this._registeredTypes[n.type]=n}getType(n){return this._registeredTypes[n]}activate(){if(!this.type)return;const n=this._registeredTypes[this.type],{activity:r,activate:i,activityParams:s={}}=n;(i?i():!!r)&&this.set$({"*currentActivityParams":s,"*currentActivity":r})}applyType(n){const r=this._registeredTypes[n];if(!r){console.warn("Unsupported source type: "+n);return}const{textKey:i=n,icon:s=n}=r;this.$["src-type"]=`${hU}${i}`,this.$.iconName=s,this.onclick=()=>{this.activate()}}}Ry.template=`
  <lr-icon set="@name: iconName"></lr-icon>
  <div class="txt" l10n="src-type"></div>
`;Ry.bindAttributes({type:null});class dU extends Oe{initCallback(){super.initCallback(),this.subConfigValue("sourceList",e=>{let n=Gr(e),r="";n.forEach(i=>{r+=`<lr-source-btn type="${i}"></lr-source-btn>`}),this.cfg.sourceListWrap?this.innerHTML=r:this.outerHTML=r})}}const Od=()=>{const t=[];return{stack:t,promiseReadJpegChunks:n=>new Promise((r,i)=>{let s=2;const o=(c,h)=>{const f=new FileReader;f.addEventListener("load",()=>{h(new DataView(f.result))}),f.addEventListener("error",p=>{i(`Reader error: ${p}`)}),f.readAsArrayBuffer(c)},a=()=>o(n.slice(s,s+128),c=>{let h,f,p;for(h=f=0,p=c.byteLength;p>=0?f<p:f>p;h=p>=0?++f:--f)if(c.getUint8(h)===255){s+=h;break}l()}),l=()=>{const c=s;return o(n.slice(s,s+=4),h=>{if(h.byteLength!==4||h.getUint8(0)!==255){i("Corrupted");return}const f=h.getUint8(1);if(f===218){r(!0);return}const p=h.getUint16(2)-2;return o(n.slice(s,s+=p),w=>{if(w.byteLength!==p){i("Corrupted");return}t.push({startPos:c,length:p,marker:f,view:w}),a()})})};FileReader&&DataView||i("Not Support"),o(n.slice(0,2),c=>{c.getUint16(0)!==65496&&i("Not jpeg"),a()})})}},fU=async t=>{const e=[],{promiseReadJpegChunks:n,stack:r}=Od();return await n(t),r.forEach(({marker:i,view:s})=>{i===226&&s.getUint32(0)===1229144927&&s.getUint32(4)===1347571526&&s.getUint32(8)===1229735168&&e.push(s)}),e},BI=async(t,e,n)=>{{const r=[],i=[],{promiseReadJpegChunks:s,stack:o}=Od();await s(t),o.forEach(c=>{if(c.marker===e)return r.push(c.startPos),i.push(c.length)});const a=[t.slice(0,2)];for(const c of n){const h=new DataView(new ArrayBuffer(4));h.setUint16(0,65280+e),h.setUint16(2,c.byteLength+2),a.push(h.buffer),a.push(c)}let l=2;for(let c=0;c<r.length;c++)r[c]>l&&a.push(t.slice(l,r[c])),l=r[c]+i[c]+4;return a.push(t.slice(l,t.size)),new Blob(a,{type:t.type})}},pU=226,HI=(t,e)=>BI(t,pU,e.map(n=>n.buffer)),mU=async t=>{try{return await HI(t,[])}catch(e){throw new Error(`Failed to strip ICC profile: ${e}`)}},gU=(t,e,n)=>new Promise((r,i)=>{const s=o=>{if(!o){i("Failed to convert canvas to blob");return}r(o)};t.toBlob(s,e,n),t.width=t.height=1}),ou=()=>{const t=document.createElement("canvas"),e=t.getContext("2d");return{canvas:t,ctx:e}},yU=t=>{const{ctx:n,canvas:r}=ou();r.width=r.height=50,n.drawImage(t,0,0,50,50);const i=n.getImageData(0,0,50,50).data;r.width=r.height=1;for(let s=3;s<i.length;s+=4)if(i[s]<254)return!0;return!1},vU=async t=>{let e=null;const{promiseReadJpegChunks:n,stack:r}=Od();return await n(t),r.forEach(({marker:i,view:s})=>{if(!e&&i===225&&s.byteLength>=14&&s.getUint32(0)===1165519206&&s.getUint16(4)===0){e=s;return}}),e},_U="data:image/jpg;base64,/9j/4AAQSkZJRgABAQEASABIAAD/4QA6RXhpZgAATU0AKgAAAAgAAwESAAMAAAABAAYAAAEoAAMAAAABAAIAAAITAAMAAAABAAEAAAAAAAD/2wBDAP//////////////////////////////////////////////////////////////////////////////////////wAALCAABAAIBASIA/8QAJgABAAAAAAAAAAAAAAAAAAAAAxABAAAAAAAAAAAAAAAAAAAAAP/aAAgBAQAAPwBH/9k=";let wc;const wU=()=>new Promise(t=>{if(wc!==void 0)t(wc);else{const e=new Image;e.addEventListener("load",()=>{wc=e.naturalWidth<e.naturalHeight,e.src="//:0",t(wc)}),e.src=_U}}),EU=(t,e)=>{let n,r,i,s;if(!t||t.byteLength<14||t.getUint32(0)!==1165519206||t.getUint16(4)!==0)return;if(t.getUint16(6)===18761)r=!0;else if(t.getUint16(6)===19789)r=!1;else return;if(t.getUint16(8,r)!==42)return;i=8+t.getUint32(10,r);const o=t.getUint16(i-2,r);for(n=0,s=o;s>=0?n<s:n>s;s>=0?++n:--n){if(t.byteLength<i+10)return;t.getUint16(i,r)===274&&e(i+8,r),i+=12}},bU=(t,e)=>{EU(t,(n,r)=>t.setUint16(n,e,r))},TU=async(t,e,n)=>(n&&bU(e,1),BI(t,225,[e.buffer])),CU=(t,e)=>new Promise((n,r)=>{e&&(t.src=e),t.complete?n(t):(t.addEventListener("load",()=>{n(t)}),t.addEventListener("error",()=>{r(new Error("Failed to load image. Probably not an image."))}))}),IU=t=>CU(new Image,t),SU=[1,3],AU=[192,193,194,195,197,198,199,201,202,203,205,206,207],Dw={squareSide:[Math.floor(Math.sqrt(5*1e3*1e3)),4096,8192,11180,10836,11402,14188,16384],dimension:[4096,8192,16384,32767,65535]},xU=async t=>{let e=!1;const{promiseReadJpegChunks:n,stack:r}=Od();return await n(t).then(()=>(r.forEach(({marker:i,view:s})=>{if(!e&&AU.indexOf(i)>=0){const o=s.getUint8(5);SU.indexOf(o)<0&&(e=!0)}}),e)).catch(()=>e)},WI=(t,e)=>{const n={};return(...r)=>{const i=e(r,n);return i in n?n[i]:n[i]=t(...r)}},qI=(t,e)=>{const[n]=t,r=Object.keys(e).map(i=>parseInt(i,10)).sort((i,s)=>i-s);for(let i=0;i<r.length;i++){const s=r[i],o=!!e[s];if(s>n&&o||s<n&&!o)return s}return n},bi={R:55,G:110,B:165,A:255},kU=`rgba(${bi.R}, ${bi.G}, ${bi.B}, ${bi.A/255})`,GI=(t,e)=>{try{const n=[t-1,e-1,1,1],{canvas:r,ctx:i}=ou();r.width=1,r.height=1;const{canvas:s,ctx:o}=ou();s.width=t,s.height=e,o&&(o.fillStyle=kU,o.fillRect(...n),i.drawImage(s,t-1,e-1,1,1,0,0,1,1));const a=i&&i.getImageData(0,0,1,1).data;let l=!1;return a&&(l=a[0]===bi.R&&a[1]===bi.G&&a[2]===bi.B&&a[3]===bi.A),s.width=s.height=1,l}catch{return console.error(`Failed to test for max canvas size of ${t}x${e}.`),!1}};function KI(t){return(...e)=>new Promise(n=>{setTimeout(()=>{const r=t(...e);n(r)},0)})}const PU=KI(WI(GI,qI)),RU=KI(WI(GI,qI)),QI=async(t,e)=>{const n=Dw.squareSide.find(o=>o*o>=t*e),r=Dw.dimension.find(o=>o>=t&&o>=e);if(!n||!r)throw new Error("Not supported");const[i,s]=await Promise.all([PU(n,n),RU(r,1)]);if(i&&s)return!0;throw new Error("Not supported")},XI=async(t,e,n)=>{try{const{ctx:r,canvas:i}=ou();return i.width=e,i.height=n,r.imageSmoothingQuality="high",r.drawImage(t,0,0,e,n),t instanceof HTMLImageElement&&(t.src="//:0"),t instanceof HTMLCanvasElement&&(t.width=t.height=1),i}catch(r){throw new Error("Canvas resize error",{cause:r})}},OU=({img:t,targetW:e,targetH:n})=>XI(t,e,n),LU=function({sourceW:t,targetW:e,targetH:n,step:r}){const i=[];let s=e,o=n;do i.push([s,o]),s=Math.round(s/r),o=Math.round(o/r);while(s<t*r);return i.reverse()},NU=({img:t,sourceW:e,targetW:n,targetH:r,step:i})=>LU({sourceW:e,targetW:n,targetH:r,step:i}).reduce((o,[a,l])=>o.then(c=>QI(a,l).then(()=>XI(c,a,l)).catch(()=>c)),Promise.resolve(t)),DU=()=>/iPad|iPhone|iPod/.test(navigator.platform)?!0:navigator.maxTouchPoints&&navigator.maxTouchPoints>2&&/MacIntel/.test(navigator.platform),MU=navigator.maxTouchPoints&&navigator.maxTouchPoints>2&&/MacIntel/.test(navigator.platform),Uf=.71,VU=(t,e)=>{if(t.width*Uf*t.height*Uf<e.size)throw new Error("Not required");const n=t.width,r=t.height,i=n/r,s=Math.floor(Math.sqrt(e.size*i)),o=Math.floor(e.size/Math.sqrt(e.size*i));return QI(s,o).then(()=>{const{ctx:a}=ou();return"imageSmoothingQuality"in a&&!DU()&&!MU?OU({img:t,targetW:s,targetH:o}):NU({img:t,sourceW:n,targetW:s,targetH:o,step:Uf})}).catch(()=>Promise.reject("Not supported"))},UU=async(t,e)=>{try{if(await xU(t))throw new Error("Should skipped");const r=await Promise.allSettled([vU(t),wU(),fU(t)]),s=!r.some(S=>S.status==="rejected"),[o,a,l]=r,c=await mU(t).catch(()=>t),h=await IU(URL.createObjectURL(c));URL.revokeObjectURL(h.src);const f=await VU(h,e);let p="image/jpeg",w=(e==null?void 0:e.quality)||.8;!s&&yU(f)&&(p="image/png",w=void 0);let E=await gU(f,p,w);if(s&&o.status==="fulfilled"&&o.value){const S=o.value,P=a.status==="fulfilled"?a.value:!1;E=await TU(E,S,P)}return s&&l.status==="fulfilled"&&l.value.length>0&&(E=await HI(E,l.value)),E}catch(n){let r;throw n instanceof Error&&(r=n.message),typeof n=="string"&&(r=n),new Error(`Failed to shrink image. ${r?`Message: "${r}".`:""}`,{cause:n})}};function YI(t){let e=new Blob([t],{type:"image/svg+xml"});return URL.createObjectURL(e)}function $U(t="#fff",e="rgba(0, 0, 0, .1)"){return YI(`<svg height="20" width="20" viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg">
    <rect x="0" y="0" width="20" height="20" fill="${t}" />
    <rect x="0" y="0" width="10" height="10" fill="${e}" />
    <rect x="10" y="10" width="10" height="10" fill="${e}" />
  </svg>`)}function Mw(t="hsl(209, 21%, 65%)",e=32,n=32){return YI(`
  <svg width="${e}" height="${n}" viewBox="0 0 30 30" fill="none" xmlns="http://www.w3.org/2000/svg">
    <path fill-rule="evenodd" fill="${t}" d="M9.68848 8.70068C9.68848 8.42454 9.91233 8.20068 10.1885 8.20068H15.0885C15.2211 8.20068 15.3483 8.25336 15.442 8.34713L20.342 13.2471C20.4358 13.3409 20.4885 13.4681 20.4885 13.6007V21.3007C20.4885 21.5768 20.2646 21.8007 19.9885 21.8007H10.1885C9.91233 21.8007 9.68848 21.5768 9.68848 21.3007V8.70068ZM10.6885 9.20068V20.8007H19.4885V14.1007L15.0885 14.1007C14.8123 14.1007 14.5885 13.8768 14.5885 13.6007L14.5885 9.20068H10.6885ZM15.5885 9.90779L18.7814 13.1007L15.5885 13.1007L15.5885 9.90779Z"/>
  </svg>
  `)}function FU(t,e=40){if(t.type==="image/svg+xml")return URL.createObjectURL(t);let n=document.createElement("canvas"),r=n.getContext("2d"),i=new Image,s=new Promise((o,a)=>{i.onload=()=>{let l=i.height/i.width;l>1?(n.width=e,n.height=e*l):(n.height=e,n.width=e/l),r.fillStyle="rgb(240, 240, 240)",r.fillRect(0,0,n.width,n.height),r.drawImage(i,0,0,n.width,n.height),n.toBlob(c=>{if(!c){a();return}let h=URL.createObjectURL(c);o(h)})},i.onerror=l=>{a(l)}});return i.src=URL.createObjectURL(t),s}const Vw=16384,jU=/^([0-9]+)x([0-9]+)(?:\s+(\d{1,2}|100)%)?$/i,zU=t=>{const e=jU.exec(t==null?void 0:t.toLocaleLowerCase())||[];if(!e.length)return!1;const n=e[1]*e[2],r=Vw*Vw;return n>r?(console.warn(`Shrinked size can not be larger than ${Math.floor(r/1e3/1e3)}MP. You have set ${e[1]}x${e[2]} (${Math.ceil(n/1e3/100)/10}MP).`),!1):{quality:e[3]?e[3]/100:void 0,size:n}},_n=Object.freeze({FINISHED:Symbol(0),FAILED:Symbol(1),UPLOADING:Symbol(2),IDLE:Symbol(3)});class Ss extends Ke{constructor(){super();V(this,"couldBeCtxOwner",!0);V(this,"pauseRender",!0);V(this,"_entrySubs",new Set);V(this,"_entry",null);V(this,"_isIntersecting",!1);V(this,"_debouncedGenerateThumb",Dn(this._generateThumbnail.bind(this),100));V(this,"_debouncedCalculateState",Dn(this._calculateState.bind(this),100));V(this,"_renderedOnce",!1);this.init$={...this.init$,uid:"",itemName:"",errorText:"",thumbUrl:"",progressValue:0,progressVisible:!1,badgeIcon:"",isFinished:!1,isFailed:!1,isUploading:!1,isFocused:!1,isEditable:!1,state:_n.IDLE,onEdit:()=>{this.set$({"*focusedEntry":this._entry}),this.hasBlockInCtx(n=>n.activityType===fe.activities.DETAILS)?this.$["*currentActivity"]=fe.activities.DETAILS:this.$["*currentActivity"]=fe.activities.CLOUD_IMG_EDIT},onRemove:()=>{this.uploadCollection.remove(this.$.uid)},onUpload:()=>{this.upload()}}}_reset(){for(let n of this._entrySubs)n.remove();this._debouncedGenerateThumb.cancel(),this._debouncedCalculateState.cancel(),this._entrySubs=new Set,this._entry=null}_observerCallback(n){let[r]=n;this._isIntersecting=r.isIntersecting,r.isIntersecting&&!this._renderedOnce&&(this.render(),this._renderedOnce=!0),r.intersectionRatio===0?this._debouncedGenerateThumb.cancel():this._debouncedGenerateThumb()}_calculateState(){if(!this._entry)return;let n=this._entry,r=_n.IDLE;n.getValue("errors").length>0?r=_n.FAILED:n.getValue("isUploading")?r=_n.UPLOADING:n.getValue("fileInfo")&&(r=_n.FINISHED),this.$.state=r}async _generateThumbnail(){var r;if(!this._entry)return;let n=this._entry;if(n.getValue("fileInfo")&&n.getValue("isImage")){let i=this.cfg.thumbSize,s=this.proxyUrl(An(su(this.cfg.cdnCname,this._entry.getValue("uuid")),Wi(n.getValue("cdnUrlModifiers"),`scale_crop/${i}x${i}/center`))),o=n.getValue("thumbUrl");o!==s&&(n.setValue("thumbUrl",s),o!=null&&o.startsWith("blob:")&&URL.revokeObjectURL(o));return}if(!n.getValue("thumbUrl"))if((r=n.getValue("file"))!=null&&r.type.includes("image"))try{let i=await FU(n.getValue("file"),this.cfg.thumbSize);n.setValue("thumbUrl",i)}catch{let s=window.getComputedStyle(this).getPropertyValue("--clr-generic-file-icon");n.setValue("thumbUrl",Mw(s))}else{let i=window.getComputedStyle(this).getPropertyValue("--clr-generic-file-icon");n.setValue("thumbUrl",Mw(i))}}_subEntry(n,r){let i=this._entry.subscribe(n,s=>{this.isConnected&&r(s)});this._entrySubs.add(i)}_handleEntryId(n){var i;this._reset();let r=(i=this.uploadCollection)==null?void 0:i.read(n);this._entry=r,r&&(this._subEntry("uploadProgress",s=>{this.$.progressValue=s}),this._subEntry("fileName",s=>{this.$.itemName=s||r.getValue("externalUrl")||this.l10n("file-no-name"),this._debouncedCalculateState()}),this._subEntry("externalUrl",s=>{this.$.itemName=r.getValue("fileName")||s||this.l10n("file-no-name")}),this._subEntry("fileInfo",s=>{this._debouncedCalculateState(),s&&this._isIntersecting&&this._debouncedGenerateThumb()}),this._subEntry("cdnUrlModifiers",()=>{this._isIntersecting&&this._debouncedGenerateThumb()}),this._subEntry("thumbUrl",s=>{this.$.thumbUrl=s?`url(${s})`:""}),this._subEntry("errors",()=>this._debouncedCalculateState()),this._subEntry("isUploading",()=>this._debouncedCalculateState()),this._subEntry("fileSize",()=>this._debouncedCalculateState()),this._subEntry("mimeType",()=>this._debouncedCalculateState()),this._subEntry("isImage",()=>this._debouncedCalculateState()),this._isIntersecting&&this._debouncedGenerateThumb())}initCallback(){super.initCallback(),this.sub("uid",n=>{this._handleEntryId(n)}),this.sub("state",n=>{this._handleState(n)}),this.subConfigValue("useCloudImageEditor",()=>this._debouncedCalculateState()),this.onclick=()=>{Ss.activeInstances.forEach(n=>{n===this?n.setAttribute("focused",""):n.removeAttribute("focused")})},this.sub("*uploadTrigger",n=>{n.has(this._entry.uid)&&setTimeout(()=>this.isConnected&&this.upload())}),Ss.activeInstances.add(this)}_handleState(n){var r,i,s,o;n===_n.FAILED?this.$.badgeIcon="badge-error":n===_n.FINISHED&&(this.$.badgeIcon="badge-success"),n===_n.UPLOADING?this.$.isFocused=!1:this.$.progressValue=0,this.set$({isFailed:n===_n.FAILED,isUploading:n===_n.UPLOADING,isFinished:n===_n.FINISHED,progressVisible:n===_n.UPLOADING,isEditable:this.cfg.useCloudImageEditor&&((r=this._entry)==null?void 0:r.getValue("isImage"))&&((i=this._entry)==null?void 0:i.getValue("cdnUrl")),errorText:(o=(s=this._entry.getValue("errors"))==null?void 0:s[0])==null?void 0:o.message})}destroyCallback(){super.destroyCallback(),Ss.activeInstances.delete(this),this._reset()}connectedCallback(){super.connectedCallback(),this._observer=new window.IntersectionObserver(this._observerCallback.bind(this),{root:this.parentElement,rootMargin:"50% 0px 50% 0px",threshold:[0,1]}),this._observer.observe(this)}disconnectedCallback(){var n;super.disconnectedCallback(),this._debouncedGenerateThumb.cancel(),(n=this._observer)==null||n.disconnect()}_settingsOfShrink(){return zU(this.cfg.imageShrink)}_processShrink(n){return UU(n,this._settingsOfShrink())}async upload(){var i,s;let n=this._entry;if(!this.uploadCollection.read(n.uid)||n.getValue("fileInfo")||n.getValue("isUploading")||n.getValue("errors").length>0)return;const r=this.cfg.multiple?this.cfg.multipleMax:1;if(!(r&&this.uploadCollection.size>r)){this._debouncedCalculateState(),n.setValue("isUploading",!0),n.setValue("errors",[]);try{let o=new AbortController;n.setValue("abortController",o);const a=async()=>{let c=n.getValue("file");c&&this.cfg.imageShrink&&(c=await this._processShrink(c).catch(()=>c));const h=c||n.getValue("externalUrl")||n.getValue("uuid"),p={...this.getUploadClientOptions(),fileName:n.getValue("fileName"),source:n.getValue("source"),onProgress:w=>{if(w.isComputable){let E=w.value*100;n.setValue("uploadProgress",E)}},signal:o.signal,metadata:await this.getMetadataFor(n.uid)};return this.debugPrint("upload options",h,p),EI(h,p)};let l=await this.$["*uploadQueue"].add(a);n.setMultipleValues({fileInfo:l,isUploading:!1,fileName:l.originalFilename,fileSize:l.size,isImage:l.isImage,mimeType:((s=(i=l.contentInfo)==null?void 0:i.mime)==null?void 0:s.mime)??l.mimeType,uuid:l.uuid,cdnUrl:n.getValue("cdnUrl")??l.cdnUrl,cdnUrlModifiers:n.getValue("cdnUrlModifiers")??"",uploadProgress:100}),n===this._entry&&this._debouncedCalculateState()}catch(o){o instanceof Fs&&o.isCancel?n.setMultipleValues({isUploading:!1,uploadProgress:0}):n.setMultipleValues({isUploading:!1,uploadProgress:0,uploadError:o}),n===this._entry&&this._debouncedCalculateState()}}}}Ss.template=`
  <div class="inner" set="@finished: isFinished; @uploading: isUploading; @failed: isFailed; @focused: isFocused">
    <div class="thumb" set="style.backgroundImage: thumbUrl">
      <div class="badge">
        <lr-icon set="@name: badgeIcon"></lr-icon>
      </div>
    </div>
    <div class="file-name-wrapper">
      <span class="file-name" set="@title: itemName">{{itemName}}</span>
      <span class="file-error" set="@hidden: !errorText">{{errorText}}</span>
    </div>
    <div class="file-actions">
      <button type="button" class="edit-btn mini-btn" set="onclick: onEdit; @hidden: !isEditable">
        <lr-icon name="edit-file"></lr-icon>
      </button>
      <button type="button" class="remove-btn mini-btn" set="onclick: onRemove;">
        <lr-icon name="remove-file"></lr-icon>
      </button>
      <button type="button" class="upload-btn mini-btn" set="onclick: onUpload;">
        <lr-icon name="upload"></lr-icon>
      </button>
    </div>
    <lr-progress-bar class="progress-bar" set="value: progressValue; visible: progressVisible;"> </lr-progress-bar>
  </div>
`;Ss.activeInstances=new Set;class Oy extends Oe{constructor(){super();V(this,"_handleBackdropClick",()=>{this._closeDialog()});V(this,"_closeDialog",()=>{this.setOrAddState("*modalActive",!1)});V(this,"_handleDialogClose",()=>{this._closeDialog()});V(this,"_handleDialogMouseDown",n=>{this._mouseDownTarget=n.target});V(this,"_handleDialogMouseUp",n=>{n.target===this.ref.dialog&&n.target===this._mouseDownTarget&&this._closeDialog()});this.init$={...this.init$,"*modalActive":!1,isOpen:!1,closeClicked:this._handleDialogClose}}show(){this.ref.dialog.showModal?this.ref.dialog.showModal():this.ref.dialog.setAttribute("open","")}hide(){this.ref.dialog.close?this.ref.dialog.close():this.ref.dialog.removeAttribute("open")}initCallback(){if(super.initCallback(),typeof HTMLDialogElement=="function")this.ref.dialog.addEventListener("close",this._handleDialogClose),this.ref.dialog.addEventListener("mousedown",this._handleDialogMouseDown),this.ref.dialog.addEventListener("mouseup",this._handleDialogMouseUp);else{this.setAttribute("dialog-fallback","");let n=document.createElement("div");n.className="backdrop",this.appendChild(n),n.addEventListener("click",this._handleBackdropClick)}this.sub("*modalActive",n=>{this.$.isOpen!==n&&(this.$.isOpen=n),n&&this.cfg.modalScrollLock?document.body.style.overflow="hidden":document.body.style.overflow=""}),this.subConfigValue("modalBackdropStrokes",n=>{n?this.setAttribute("strokes",""):this.removeAttribute("strokes")}),this.sub("isOpen",n=>{n?this.show():this.hide()})}destroyCallback(){super.destroyCallback(),document.body.style.overflow="",this._mouseDownTarget=void 0,this.ref.dialog.removeEventListener("close",this._handleDialogClose),this.ref.dialog.removeEventListener("mousedown",this._handleDialogMouseDown),this.ref.dialog.removeEventListener("mouseup",this._handleDialogMouseUp)}}V(Oy,"StateConsumerScope","modal");Oy.template=`
  <dialog ref="dialog">
    <slot></slot>
  </dialog>
`;const JI=(t,e)=>{let n,r,i;const s=(...o)=>{n?(clearTimeout(r),r=setTimeout(()=>{Date.now()-i>=e&&(t(...o),i=Date.now())},Math.max(e-(Date.now()-i),0))):(t(...o),i=Date.now(),n=!0)};return Object.defineProperty(s,"cancel",{configurable:!1,writable:!1,enumerable:!1,value:()=>{clearTimeout(r)}}),s};class ZI extends Ke{constructor(){super();V(this,"couldBeCtxOwner",!0);V(this,"historyTracked",!0);V(this,"activityType",fe.activities.UPLOAD_LIST);V(this,"_throttledHandleCollectionUpdate",JI(()=>{this.isConnected&&(this._updateUploadsState(),!this.couldOpenActivity&&this.$["*currentActivity"]===this.activityType&&this.historyBack())},300));this.init$={...this.init$,doneBtnVisible:!1,doneBtnEnabled:!1,uploadBtnVisible:!1,addMoreBtnVisible:!1,addMoreBtnEnabled:!1,headerText:"",commonErrorMessage:"",hasFiles:!1,onAdd:()=>{this.initFlow(!0)},onUpload:()=>{this.emit(tt.UPLOAD_CLICK),this.uploadAll(),this._throttledHandleCollectionUpdate()},onDone:()=>{this.emit(tt.DONE_CLICK,this.getOutputCollectionState()),this.doneFlow()},onCancel:()=>{this.uploadCollection.clearAll()}}}_updateUploadsState(){const n=this.getOutputCollectionState(),r={total:n.totalCount,succeed:n.successCount,uploading:n.uploadingCount,failed:n.failedCount},i=!n.errors.some(p=>p.type==="TOO_MANY_FILES"||p.type==="TOO_FEW_FILES"),s=n.errors.some(p=>p.type==="TOO_MANY_FILES"),o=n.totalCount===(this.cfg.multiple?this.cfg.multipleMax:1),a=r.failed===0;let l=!1,c=!1,h=!1;r.total-r.succeed-r.uploading-r.failed>0&&i?l=!0:(c=!0,h=r.total===r.succeed&&i&&a),this.set$({doneBtnVisible:c,doneBtnEnabled:h,uploadBtnVisible:l,addMoreBtnEnabled:r.total===0||!s&&!o,addMoreBtnVisible:!o||this.cfg.multiple}),this.bindL10n("headerText",()=>this._getHeaderText(r))}_getHeaderText(n){const r=i=>{const s=n[i];return this.l10n(`header-${i}`,{count:s})};return n.uploading>0?r("uploading"):n.failed>0?r("failed"):n.succeed>0?r("succeed"):r("total")}get couldOpenActivity(){return this.cfg.showEmptyList||this.uploadCollection.size>0}initCallback(){super.initCallback(),this.registerActivity(this.activityType),this.subConfigValue("multiple",this._throttledHandleCollectionUpdate),this.subConfigValue("multipleMin",this._throttledHandleCollectionUpdate),this.subConfigValue("multipleMax",this._throttledHandleCollectionUpdate),this.sub("*currentActivity",n=>{!this.couldOpenActivity&&n===this.activityType&&(this.$["*currentActivity"]=this.initActivity)}),this.uploadCollection.observeProperties(this._throttledHandleCollectionUpdate),this.sub("*uploadList",n=>{this._throttledHandleCollectionUpdate(),this.set$({hasFiles:n.length>0}),this.cfg.confirmUpload||this.uploadAll()},!1),this.sub("*collectionErrors",n=>{const r=n.filter(i=>i.type!=="SOME_FILES_HAS_ERRORS")[0];if(!r){this.set$({commonErrorMessage:null});return}this.set$({commonErrorMessage:r.message})})}destroyCallback(){super.destroyCallback(),this.uploadCollection.unobserveProperties(this._throttledHandleCollectionUpdate)}}ZI.template=`
  <lr-activity-header>
    <span class="header-text">{{headerText}}</span>
    <button type="button" class="mini-btn close-btn" set="onclick: *closeModal">
      <lr-icon name="close"></lr-icon>
    </button>
  </lr-activity-header>

  <div class="no-files" set="@hidden: hasFiles">
    <slot name="empty"><span l10n="no-files"></span></slot>
  </div>

  <div class="files" repeat="*uploadList" repeat-item-tag="lr-file-item"></div>

  <div class="common-error" set="@hidden: !commonErrorMessage; textContent: commonErrorMessage;"></div>

  <div class="toolbar">
    <button type="button" class="cancel-btn secondary-btn" set="onclick: onCancel;" l10n="clear"></button>
    <div class="toolbar-spacer"></div>
    <button
      type="button"
      class="add-more-btn secondary-btn"
      set="onclick: onAdd; @disabled: !addMoreBtnEnabled; @hidden: !addMoreBtnVisible"
    >
      <lr-icon name="add"></lr-icon><span l10n="add-more"></span>
    </button>
    <button
      type="button"
      class="upload-btn primary-btn"
      set="@hidden: !uploadBtnVisible; onclick: onUpload;"
      l10n="upload"
    ></button>
    <button
      type="button"
      class="done-btn primary-btn"
      set="@hidden: !doneBtnVisible; onclick: onDone;  @disabled: !doneBtnEnabled"
      l10n="done"
    ></button>
  </div>

  <lr-drop-area ghost></lr-drop-area>
`;class eS extends Ke{constructor(){super(...arguments);V(this,"couldBeCtxOwner",!0);V(this,"activityType",fe.activities.URL);V(this,"init$",{...this.init$,importDisabled:!0,onUpload:n=>{n.preventDefault();let r=this.ref.input.value;this.addFileFromUrl(r,{source:sr.URL_TAB}),this.$["*currentActivity"]=fe.activities.UPLOAD_LIST},onCancel:()=>{this.historyBack()},onInput:n=>{let r=n.target.value;this.set$({importDisabled:!r})}})}initCallback(){super.initCallback(),this.registerActivity(this.activityType,{onActivate:()=>{this.ref.input.value="",this.ref.input.focus()}})}}eS.template=`
  <lr-activity-header>
    <button type="button" class="mini-btn" set="onclick: *historyBack">
      <lr-icon name="back"></lr-icon>
    </button>
    <div>
      <lr-icon name="url"></lr-icon>
      <span l10n="caption-from-url"></span>
    </div>
    <button type="button" class="mini-btn close-btn" set="onclick: *closeModal">
      <lr-icon name="close"></lr-icon>
    </button>
  </lr-activity-header>
  <form class="content">
    <input placeholder="https://" class="url-input" type="text" ref="input" set="oninput: onInput" />
    <button
      type="submit"
      class="url-upload-btn primary-btn"
      set="onclick: onUpload; @disabled: importDisabled"
      l10n="upload-url"
    ></button>
  </form>
`;const Uw=()=>typeof navigator.permissions<"u";class tS extends Ke{constructor(){super(...arguments);V(this,"couldBeCtxOwner",!0);V(this,"activityType",fe.activities.CAMERA);V(this,"_unsubPermissions",null);V(this,"init$",{...this.init$,video:null,videoTransformCss:null,shotBtnDisabled:!0,videoHidden:!0,messageHidden:!0,requestBtnHidden:Uw(),cameraSelectOptions:null,cameraSelectHidden:!0,l10nMessage:"",onCameraSelectChange:n=>{this._selectedCameraId=n.target.value,this._capture()},onCancel:()=>{this.historyBack()},onShot:()=>{this._shot()},onRequestPermissions:()=>{this._capture()}});V(this,"_onActivate",()=>{Uw()&&this._subscribePermissions(),this._capture()});V(this,"_onDeactivate",()=>{this._unsubPermissions&&this._unsubPermissions(),this._stopCapture()});V(this,"_handlePermissionsChange",()=>{this._capture()});V(this,"_setPermissionsState",Dn(n=>{this.classList.toggle("initialized",n==="granted"),n==="granted"?this.set$({videoHidden:!1,shotBtnDisabled:!1,messageHidden:!0}):n==="prompt"?(this.$.l10nMessage="camera-permissions-prompt",this.set$({videoHidden:!0,shotBtnDisabled:!0,messageHidden:!1}),this._stopCapture()):(this.$.l10nMessage="camera-permissions-denied",this.set$({videoHidden:!0,shotBtnDisabled:!0,messageHidden:!1}),this._stopCapture())},300))}async _subscribePermissions(){try{(await navigator.permissions.query({name:"camera"})).addEventListener("change",this._handlePermissionsChange)}catch(n){console.log("Failed to use permissions API. Fallback to manual request mode.",n),this._capture()}}async _capture(){let n={video:{width:{ideal:1920},height:{ideal:1080},frameRate:{ideal:30}},audio:!1};this._selectedCameraId&&(n.video.deviceId={exact:this._selectedCameraId}),this._canvas=document.createElement("canvas"),this._ctx=this._canvas.getContext("2d");try{this._setPermissionsState("prompt");let r=await navigator.mediaDevices.getUserMedia(n);r.addEventListener("inactive",()=>{this._setPermissionsState("denied")}),this.$.video=r,this._capturing=!0,this._setPermissionsState("granted")}catch(r){this._setPermissionsState("denied"),console.error("Failed to capture camera",r)}}_stopCapture(){var n;this._capturing&&((n=this.$.video)==null||n.getTracks()[0].stop(),this.$.video=null,this._capturing=!1)}_shot(){this._canvas.height=this.ref.video.videoHeight,this._canvas.width=this.ref.video.videoWidth,this._ctx.drawImage(this.ref.video,0,0);const n=Date.now(),r=`camera-${n}.jpeg`,i="image/jpeg";this._canvas.toBlob(s=>{let o=new File([s],r,{lastModified:n,type:i});this.addFileFromObject(o,{source:sr.CAMERA}),this.set$({"*currentActivity":fe.activities.UPLOAD_LIST})},i)}async initCallback(){var n;super.initCallback(),this.registerActivity(this.activityType,{onActivate:this._onActivate,onDeactivate:this._onDeactivate}),this.subConfigValue("cameraMirror",r=>{this.$.videoTransformCss=r?"scaleX(-1)":null});try{let i=(await navigator.mediaDevices.enumerateDevices()).filter(s=>s.kind==="videoinput").map((s,o)=>({text:s.label.trim()||`${this.l10n("caption-camera")} ${o+1}`,value:s.deviceId}));i.length>1&&(this.$.cameraSelectOptions=i,this.$.cameraSelectHidden=!1),this._selectedCameraId=(n=i[0])==null?void 0:n.value}catch{}}}tS.template=`
  <lr-activity-header>
    <button type="button" class="mini-btn" set="onclick: *historyBack">
      <lr-icon name="back"></lr-icon>
    </button>
    <div set="@hidden: !cameraSelectHidden">
      <lr-icon name="camera"></lr-icon>
      <span l10n="caption-camera"></span>
    </div>
    <lr-select
      class="camera-select"
      set="$.options: cameraSelectOptions; @hidden: cameraSelectHidden; onchange: onCameraSelectChange"
    >
    </lr-select>
    <button type="button" class="mini-btn close-btn" set="onclick: *closeModal">
      <lr-icon name="close"></lr-icon>
    </button>
  </lr-activity-header>
  <div class="content">
    <video
      autoplay
      playsinline
      set="srcObject: video; style.transform: videoTransformCss; @hidden: videoHidden"
      ref="video"
    ></video>
    <div class="message-box" set="@hidden: messageHidden">
      <span l10n="l10nMessage"></span>
      <button
        type="button"
        set="onclick: onRequestPermissions; @hidden: requestBtnHidden"
        l10n="camera-permissions-request"
      ></button>
    </div>
    <button type="button" class="shot-btn" set="onclick: onShot; @disabled: shotBtnDisabled">
      <lr-icon name="camera"></lr-icon>
    </button>
  </div>
`;class nS extends Ke{constructor(){super(...arguments);V(this,"requireCtxName",!0)}initCallback(){super.initCallback(),this.$["*eventEmitter"].bindTarget(this)}destroyCallback(){super.destroyCallback(),this.$["*eventEmitter"].unbindTarget(this)}}nS.EventType=tt;const mm=nS;class BU{constructor(){V(this,"captionL10nStr","confirm-your-action");V(this,"messageL10Str","are-you-sure");V(this,"confirmL10nStr","yes");V(this,"denyL10nStr","no")}confirmAction(){console.log("Confirmed")}denyAction(){this.historyBack()}}class rS extends fe{constructor(){super(...arguments);V(this,"activityType",fe.activities.CONFIRMATION);V(this,"_defaults",new BU);V(this,"init$",{...this.init$,activityCaption:"",messageTxt:"",confirmBtnTxt:"",denyBtnTxt:"","*confirmation":null,onConfirm:this._defaults.confirmAction,onDeny:this._defaults.denyAction.bind(this)})}initCallback(){super.initCallback(),this.set$({messageTxt:this.l10n(this._defaults.messageL10Str),confirmBtnTxt:this.l10n(this._defaults.confirmL10nStr),denyBtnTxt:this.l10n(this._defaults.denyL10nStr)}),this.sub("*confirmation",n=>{n&&this.set$({"*currentActivity":fe.activities.CONFIRMATION,activityCaption:this.l10n(n.captionL10nStr),messageTxt:this.l10n(n.messageL10Str),confirmBtnTxt:this.l10n(n.confirmL10nStr),denyBtnTxt:this.l10n(n.denyL10nStr),onDeny:()=>{n.denyAction()},onConfirm:()=>{n.confirmAction()}})})}}rS.template=`
  <lr-activity-header>
    <button type="button" class="mini-btn" set="onclick: *historyBack">
      <lr-icon name="back"></lr-icon>
    </button>
    <span>{{activityCaption}}</span>
    <button type="button" class="mini-btn close-btn" set="onclick: *closeModal">
      <lr-icon name="close"></lr-icon>
    </button>
  </lr-activity-header>

  <div class="message">{{messageTxt}}</div>
  <div class="toolbar">
    <button type="button" class="deny-btn secondary-btn" set="onclick: onDeny">{{denyBtnTxt}}</button>
    <button type="button" class="confirm-btn primary-btn" set="onclick: onConfirm">{{confirmBtnTxt}}</button>
  </div>
`;class iS extends Ke{constructor(){super(...arguments);V(this,"init$",{...this.init$,visible:!1,value:0,"*commonProgress":0})}initCallback(){super.initCallback(),this._unobserveCollection=this.uploadCollection.observeProperties(()=>{let n=this.uploadCollection.items().some(r=>this.uploadCollection.read(r).getValue("isUploading"));this.$.visible=n}),this.sub("visible",n=>{n?this.setAttribute("active",""):this.removeAttribute("active")}),this.sub("*commonProgress",n=>{this.$.value=n})}destroyCallback(){var n;super.destroyCallback(),(n=this._unobserveCollection)==null||n.call(this)}}iS.template=' <lr-progress-bar set="visible: visible; value: value"></lr-progress-bar> ';class sS extends Oe{constructor(){super(...arguments);V(this,"_value",0);V(this,"init$",{...this.init$,width:0,opacity:0})}initCallback(){super.initCallback(),this.defineAccessor("value",n=>{if(n===void 0)return;const r=this._value;if(this._value=n,n===0&&r>0){this.ref.line.addEventListener("transitionend",()=>{this.style.setProperty("--l-width",this._value.toString())});return}this.style.setProperty("--l-width",this._value.toString())}),this.defineAccessor("visible",n=>{this.ref.line.classList.toggle("progress--hidden",!n)})}}sS.template=' <div ref="line" class="progress"></div> ';const qi="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAQAAAC1HAwCAAAAC0lEQVR42mNkYAAAAAYAAjCB0C8AAAAASUVORK5CYII=";class Ly extends Oe{constructor(){super();V(this,"init$",{...this.init$,checkerboard:!1,src:qi})}initCallback(){super.initCallback(),this.sub("checkerboard",()=>{this.style.backgroundImage=this.hasAttribute("checkerboard")?`url(${$U()})`:"unset"})}destroyCallback(){super.destroyCallback(),URL.revokeObjectURL(this._lastObjectUrl)}setImage(n){this.$.src=n.src}setImageFile(n){let r=URL.createObjectURL(n);this.$.src=r,this._lastObjectUrl=r}setImageUrl(n){this.$.src=n}clear(){URL.revokeObjectURL(this._lastObjectUrl),this.$.src=qi}}Ly.template=' <lr-img class="img-view" ref="img" set="@src: src; style.aa: src;" /> ';Ly.bindAttributes({checkerboard:"checkerboard"});function oS(...t){return t.reduce((e,n)=>{if(typeof n=="string")return e[n]=!0,e;for(let r of Object.keys(n))e[r]=n[r];return e},{})}function Qn(...t){let e=oS(...t);return Object.keys(e).reduce((n,r)=>(e[r]&&n.push(r),n),[]).join(" ")}function HU(t,...e){let n=oS(...e);for(let r of Object.keys(n))t.classList.toggle(r,n[r])}const WU=t=>{if(!t)return dr;const e=lV(t).filter(n=>dr.includes(n));return e.length===0?dr:e};function qU(t){return{"*originalUrl":null,"*faderEl":null,"*cropperEl":null,"*imgEl":null,"*imgContainerEl":null,"*networkProblems":!1,"*imageSize":null,"*editorTransformations":{},"*cropPresetList":[],"*tabList":dr,"*tabId":Kt.CROP,entry:null,extension:null,editorMode:!1,modalCaption:"",isImage:!1,msg:"",src:qi,fileType:"",showLoader:!1,uuid:null,cdnUrl:null,cropPreset:"",tabs:Iy(dr),"presence.networkProblems":!1,"presence.modalCaption":!0,"presence.editorToolbar":!1,"presence.viewerToolbar":!0,"*on.retryNetwork":()=>{let e=t.querySelectorAll("img");for(let n of e){let r=n.src;n.src=qi,n.src=r}t.$["*networkProblems"]=!1},"*on.apply":e=>{if(!e)return;let n=t.$["*originalUrl"],r=Wi(Pd(e),"preview"),i=An(n,r),s={originalUrl:n,cdnUrlModifiers:r,cdnUrl:i,transformations:e};t.dispatchEvent(new CustomEvent("apply",{detail:s,bubbles:!0,composed:!0})),t.remove()},"*on.cancel":()=>{t.remove(),t.dispatchEvent(new CustomEvent("cancel",{bubbles:!0,composed:!0}))}}}const GU=`
  <div class="wrapper wrapper_desktop">
    <lr-presence-toggle class="network_problems_splash" set="visible: presence.networkProblems;">
      <div class="network_problems_content">
        <div class="network_problems_icon">
          <lr-icon size="20" name="sad"></lr-icon>
        </div>
        <div class="network_problems_text">Network error</div>
      </div>
      <div class="network_problems_footer">
        <lr-btn-ui theme="primary" text="Retry" set="onclick: *on.retryNetwork"></lr-btn-ui>
      </div>
    </lr-presence-toggle>
    <div class="viewport">
      <div class="file_type_outer">
        <div class="file_type">{{fileType}}</div>
      </div>
      <div class="image_container" ref="img-container-el">
        <img src="${qi}" class="image image_visible_from_editor" ref="img-el" />
        <lr-editor-image-cropper ref="cropper-el"></lr-editor-image-cropper>
        <lr-editor-image-fader ref="fader-el"></lr-editor-image-fader>
      </div>
      <div class="info_pan">{{msg}}</div>
    </div>
    <div class="toolbar">
      <lr-line-loader-ui set="active: showLoader"></lr-line-loader-ui>
      <div class="toolbar_content toolbar_content__editor">
        <lr-editor-toolbar></lr-editor-toolbar>
      </div>
    </div>
  </div>
`;class Ca extends Oe{constructor(){super();V(this,"ctxOwner",!0);V(this,"_debouncedShowLoader",Dn(this._showLoader.bind(this),300));this.init$={...this.init$,...qU(this)}}_showLoader(n){this.$.showLoader=n}_waitForSize(){return new Promise((r,i)=>{const s=setTimeout(()=>{i(new Error("[cloud-image-editor] timeout waiting for non-zero container size"))},3e3),o=new ResizeObserver(([a])=>{a.contentRect.width>0&&a.contentRect.height>0&&(r(),clearTimeout(s),o.disconnect())});o.observe(this)})}initCallback(){super.initCallback(),this.$["*faderEl"]=this.ref["fader-el"],this.$["*cropperEl"]=this.ref["cropper-el"],this.$["*imgContainerEl"]=this.ref["img-container-el"],this.initEditor()}async updateImage(){if(this.isConnected){if(await this._waitForSize(),this.$.cdnUrl){const n=J5(this.$.cdnUrl),r=su(this.$.cdnUrl,n);if(r===this.$["*originalUrl"])return;this.$["*originalUrl"]=r;const i=Z5(this.$.cdnUrl),s=iV(i);this.$["*editorTransformations"]=s}else if(this.$.uuid){const n=su(this.cfg.cdnCname,this.$.uuid);if(n===this.$["*originalUrl"])return;this.$["*originalUrl"]=n,this.$["*editorTransformations"]={}}else throw new Error("No UUID nor CDN URL provided");this.$["*tabId"]===Kt.CROP?this.$["*cropperEl"].deactivate({reset:!0}):this.$["*faderEl"].deactivate();try{const n=An(this.$["*originalUrl"],Wi("json")),r=await fetch(n).then(o=>o.json()),{width:i,height:s}=r;this.$["*imageSize"]={width:i,height:s},this.$["*tabId"]===Kt.CROP?this.$["*cropperEl"].activate(this.$["*imageSize"]):this.$["*faderEl"].activate({url:this.$["*originalUrl"]})}catch(n){n&&console.error("Failed to load image info",n)}}}async initEditor(){try{await this._waitForSize()}catch(n){this.isConnected&&console.error(n.message);return}this.ref["img-el"].addEventListener("load",()=>{this._imgLoading=!1,this._debouncedShowLoader(!1),this.$.src!==qi&&(this.$["*networkProblems"]=!1)}),this.ref["img-el"].addEventListener("error",()=>{this._imgLoading=!1,this._debouncedShowLoader(!1),this.$["*networkProblems"]=!0}),this.sub("src",n=>{let r=this.ref["img-el"];r.src!==n&&(this._imgLoading=!0,r.src=n||qi)}),this.sub("cropPreset",n=>{this.$["*cropPresetList"]=DI(n)}),this.sub("tabs",n=>{this.$["*tabList"]=WU(n)}),this.sub("*tabId",n=>{this.ref["img-el"].className=Qn("image",{image_hidden_to_cropper:n===Kt.CROP,image_hidden_effects:n!==Kt.CROP})}),this.classList.add("editor_ON"),this.sub("*networkProblems",n=>{this.$["presence.networkProblems"]=n,this.$["presence.modalCaption"]=!n}),this.sub("*editorTransformations",n=>{if(Object.keys(n).length===0)return;let r=this.$["*originalUrl"],i=Wi(Pd(n),"preview"),s=An(r,i),o={originalUrl:r,cdnUrlModifiers:i,cdnUrl:s,transformations:n};this.dispatchEvent(new CustomEvent("change",{detail:o,bubbles:!0,composed:!0}))},!1),this.sub("uuid",n=>n&&this.updateImage()),this.sub("cdnUrl",n=>n&&this.updateImage())}}V(Ca,"className","cloud-image-editor");Ca.template=GU;Ca.bindAttributes({uuid:"uuid","cdn-url":"cdnUrl","crop-preset":"cropPreset",tabs:"tabs"});class aS extends Oe{constructor(){super(),this.init$={...this.init$,dragging:!1},this._handlePointerUp=this._handlePointerUp_.bind(this),this._handlePointerMove=this._handlePointerMove_.bind(this),this._handleSvgPointerMove=this._handleSvgPointerMove_.bind(this)}_shouldThumbBeDisabled(e){let n=this.$["*imageBox"];if(!n)return;if(e===""&&n.height<=ge&&n.width<=ge)return!0;let r=n.height<=ge&&(e.includes("n")||e.includes("s")),i=n.width<=ge&&(e.includes("e")||e.includes("w"));return r||i}_createBackdrop(){let e=this.$["*cropBox"];if(!e)return;let{x:n,y:r,width:i,height:s}=e,o=this.ref["svg-el"],a=$n("mask",{id:"backdrop-mask"}),l=$n("rect",{x:0,y:0,width:"100%",height:"100%",fill:"white"}),c=$n("rect",{x:n,y:r,width:i,height:s,fill:"black"});a.appendChild(l),a.appendChild(c);let h=$n("rect",{x:0,y:0,width:"100%",height:"100%",fill:"var(--color-image-background)","fill-opacity":.85,mask:"url(#backdrop-mask)"});o.appendChild(h),o.appendChild(a),this._backdropMask=a,this._backdropMaskInner=c}_resizeBackdrop(){this._backdropMask&&(this._backdropMask.style.display="none",window.requestAnimationFrame(()=>{this._backdropMask&&(this._backdropMask.style.display="block")}))}_updateBackdrop(){let e=this.$["*cropBox"];if(!e)return;let{x:n,y:r,width:i,height:s}=e;this._backdropMaskInner&&mo(this._backdropMaskInner,{x:n,y:r,width:i,height:s})}_updateFrame(){let e=this.$["*cropBox"];if(!(!e||!this._frameGuides||!this._frameThumbs)){for(let n of Object.values(this._frameThumbs)){let{direction:r,pathNode:i,interactionNode:s,groupNode:o}=n,a=r==="",l=r.length===2,{x:c,y:h,width:f,height:p}=e;if(a){const E={x:c+f/3,y:h+p/3,width:f/3,height:p/3};mo(s,E)}else{const E=ko(Math.min(f,p)/(fm*2+pl)/2,0,1);let{d:S,center:P}=l?pV(e,r,E):mV(e,r,E);const T=Math.max(bw*ko(Math.min(f,p)/bw/3,0,1),fV);mo(s,{x:P[0]-T,y:P[1]-T,width:T*2,height:T*2}),mo(i,{d:S})}let w=this._shouldThumbBeDisabled(r);o.setAttribute("class",Qn("thumb",{"thumb--hidden":w,"thumb--visible":!w}))}mo(this._frameGuides,{x:e.x-us*.5,y:e.y-us*.5,width:e.width+us,height:e.height+us})}}_createThumbs(){const e={};for(let n=0;n<3;n++)for(let r=0;r<3;r++){let i=`${["n","","s"][n]}${["w","","e"][r]}`,s=$n("g");s.classList.add("thumb"),s.setAttribute("with-effects","");let o=$n("rect",{fill:"transparent"}),a=$n("path",{stroke:"currentColor",fill:"none","stroke-width":NI});s.appendChild(a),s.appendChild(o),e[i]={direction:i,pathNode:a,interactionNode:o,groupNode:s},o.addEventListener("pointerdown",this._handlePointerDown.bind(this,i))}return e}_createGuides(){let e=$n("svg"),n=$n("rect",{x:0,y:0,width:"100%",height:"100%",fill:"none",stroke:"#000000","stroke-width":us,"stroke-opacity":.5});e.appendChild(n);for(let r=1;r<=2;r++){let i=$n("line",{x1:`${yc*r}%`,y1:"0%",x2:`${yc*r}%`,y2:"100%",stroke:"#000000","stroke-width":us,"stroke-opacity":.3});e.appendChild(i)}for(let r=1;r<=2;r++){let i=$n("line",{x1:"0%",y1:`${yc*r}%`,x2:"100%",y2:`${yc*r}%`,stroke:"#000000","stroke-width":us,"stroke-opacity":.3});e.appendChild(i)}return e.classList.add("guides","guides--semi-hidden"),e}_createFrame(){let e=this.ref["svg-el"],n=document.createDocumentFragment(),r=this._createGuides();n.appendChild(r);let i=this._createThumbs();for(let{groupNode:s}of Object.values(i))n.appendChild(s);e.appendChild(n),this._frameThumbs=i,this._frameGuides=r}_handlePointerDown(e,n){if(!this._frameThumbs)return;let r=this._frameThumbs[e];if(this._shouldThumbBeDisabled(e))return;let i=this.$["*cropBox"],{x:s,y:o}=this.ref["svg-el"].getBoundingClientRect(),a=n.x-s,l=n.y-o;this.$.dragging=!0,this._draggingThumb=r,this._dragStartPoint=[a,l],this._dragStartCrop={...i}}_handlePointerUp_(e){this._updateCursor(),this.$.dragging&&(e.stopPropagation(),e.preventDefault(),this.$.dragging=!1)}_handlePointerMove_(e){if(!this.$.dragging||!this._dragStartPoint||!this._draggingThumb)return;e.stopPropagation(),e.preventDefault();let n=this.ref["svg-el"],{x:r,y:i}=n.getBoundingClientRect(),s=e.x-r,o=e.y-i,a=s-this._dragStartPoint[0],l=o-this._dragStartPoint[1],{direction:c}=this._draggingThumb;const h=this._calcCropBox(c,[a,l]);h&&(this.$["*cropBox"]=h)}_calcCropBox(e,n){var c;const[r,i]=n;let s=this.$["*imageBox"],o=this._dragStartCrop??this.$["*cropBox"];const a=(c=this.$["*cropPresetList"])==null?void 0:c[0],l=a?a.width/a.height:void 0;if(e===""?o=yV({rect:o,delta:[r,i],imageBox:s}):o=SV({rect:o,delta:[r,i],direction:e,aspectRatio:l,imageBox:s}),!Object.values(o).every(h=>Number.isFinite(h)&&h>=0)){console.error("CropFrame is trying to create invalid rectangle",{payload:o});return}return Uh(Hc(o),this.$["*imageBox"])}_handleSvgPointerMove_(e){if(!this._frameThumbs)return;let n=Object.values(this._frameThumbs).find(r=>{if(this._shouldThumbBeDisabled(r.direction))return!1;let s=r.interactionNode.getBoundingClientRect(),o={x:s.x,y:s.y,width:s.width,height:s.height};return AV(o,[e.x,e.y])});this._hoverThumb=n,this._updateCursor()}_updateCursor(){let e=this._hoverThumb;this.ref["svg-el"].style.cursor=e?gV(e.direction):"initial"}_render(){this._updateBackdrop(),this._updateFrame()}toggleThumbs(e){this._frameThumbs&&Object.values(this._frameThumbs).map(({groupNode:n})=>n).forEach(n=>{n.setAttribute("class",Qn("thumb",{"thumb--hidden":!e,"thumb--visible":e}))})}initCallback(){super.initCallback(),this._createBackdrop(),this._createFrame(),this.sub("*imageBox",()=>{this._resizeBackdrop(),window.requestAnimationFrame(()=>{this._render()})}),this.sub("*cropBox",e=>{e&&(this._guidesHidden=e.height<=ge||e.width<=ge,window.requestAnimationFrame(()=>{this._render()}))}),this.sub("dragging",e=>{this._frameGuides&&this._frameGuides.setAttribute("class",Qn({"guides--hidden":this._guidesHidden,"guides--visible":!this._guidesHidden&&e,"guides--semi-hidden":!this._guidesHidden&&!e}))}),this.ref["svg-el"].addEventListener("pointermove",this._handleSvgPointerMove,!0),document.addEventListener("pointermove",this._handlePointerMove,!0),document.addEventListener("pointerup",this._handlePointerUp,!0)}destroyCallback(){super.destroyCallback(),document.removeEventListener("pointermove",this._handlePointerMove),document.removeEventListener("pointerup",this._handlePointerUp)}}aS.template=' <svg class="svg" ref="svg-el" xmlns="http://www.w3.org/2000/svg"></svg> ';class Ld extends Oe{constructor(){super(...arguments);V(this,"init$",{...this.init$,active:!1,title:"",icon:"","on.click":null})}initCallback(){super.initCallback(),this._titleEl=this.ref["title-el"],this._iconEl=this.ref["icon-el"],this.setAttribute("role","button"),this.tabIndex===-1&&(this.tabIndex=0),this.sub("title",n=>{this._titleEl&&(this._titleEl.style.display=n?"block":"none")}),this.sub("active",n=>{this.className=Qn({active:n,not_active:!n})}),this.sub("on.click",n=>{this.onclick=n})}}Ld.template=`
  <div class="before"></div>
  <lr-icon size="20" set="@name: icon;"></lr-icon>
  <div class="title" ref="title-el">{{title}}</div>
`;function KU(t){let e=t+90;return e=e>=360?0:e,e}function QU(t,e){return t==="rotate"?KU(e):["mirror","flip"].includes(t)?!e:null}class lS extends Ld{initCallback(){super.initCallback(),this.defineAccessor("operation",e=>{e&&(this._operation=e,this.$.icon=e)}),this.$["on.click"]=e=>{let n=this.$["*cropperEl"].getValue(this._operation),r=QU(this._operation,n);this.$["*cropperEl"].setValue(this._operation,r)}}}const rl={FILTER:"filter",COLOR_OPERATION:"color_operation"},Ui="original";class uS extends Oe{constructor(){super(...arguments);V(this,"init$",{...this.init$,disabled:!1,min:0,max:100,value:0,defaultValue:0,zero:0,"on.input":n=>{this.$["*faderEl"].set(n),this.$.value=n}})}setOperation(n,r){this._controlType=n==="filter"?rl.FILTER:rl.COLOR_OPERATION,this._operation=n,this._iconName=n,this._title=n.toUpperCase(),this._filter=r,this._initializeValues(),this.$["*faderEl"].activate({url:this.$["*originalUrl"],operation:this._operation,value:this._filter===Ui?void 0:this.$.value,filter:this._filter===Ui?void 0:this._filter,fromViewer:!1})}_initializeValues(){let{range:n,zero:r}=aa[this._operation],[i,s]=n;this.$.min=i,this.$.max=s,this.$.zero=r;let o=this.$["*editorTransformations"][this._operation];if(this._controlType===rl.FILTER){let a=s;if(o){let{name:l,amount:c}=o;a=l===this._filter?c:s}this.$.value=a,this.$.defaultValue=a}if(this._controlType===rl.COLOR_OPERATION){let a=typeof o<"u"?o:r;this.$.value=a,this.$.defaultValue=a}}apply(){let n;this._controlType===rl.FILTER?this._filter===Ui?n=null:n={name:this._filter,amount:this.$.value}:n=this.$.value;let r={...this.$["*editorTransformations"],[this._operation]:n};this.$["*editorTransformations"]=r}cancel(){this.$["*faderEl"].deactivate({hide:!1})}initCallback(){super.initCallback(),this.sub("*originalUrl",n=>{this._originalUrl=n}),this.sub("value",n=>{let r=`${this._filter||this._operation} ${n}`;this.$["*operationTooltip"]=r})}}uS.template=`
  <lr-slider-ui
    ref="slider-el"
    set="disabled: disabled; min: min; max: max; defaultValue: defaultValue; zero: zero; onInput: on.input;"
  ></lr-slider-ui>
`;function Ny(t){let e=new Image;return{promise:new Promise((i,s)=>{e.src=t,e.onload=i,e.onerror=s}),image:e,cancel:()=>{e.naturalWidth===0&&(e.src=qi)}}}function gm(t){let e=[];for(let s of t){let o=Ny(s);e.push(o)}let n=e.map(s=>s.image);return{promise:Promise.allSettled(e.map(s=>s.promise)),images:n,cancel:()=>{e.forEach(s=>{s.cancel()})}}}class Dy extends Ld{constructor(){super(...arguments);V(this,"init$",{...this.init$,active:!1,title:"",icon:"",isOriginal:!1,iconSize:"20","on.click":null})}_previewSrc(){let n=parseInt(window.getComputedStyle(this).getPropertyValue("--l-base-min-width"),10),r=window.devicePixelRatio,i=Math.ceil(r*n),s=r>=2?"lightest":"normal",o=100,a={...this.$["*editorTransformations"]};return a[this._operation]=this._filter!==Ui?{name:this._filter,amount:o}:void 0,An(this._originalUrl,Wi(LI,Pd(a),`quality/${s}`,`scale_crop/${i}x${i}/center`))}_observerCallback(n,r){if(n[0].isIntersecting){let s=this.proxyUrl(this._previewSrc()),o=this.ref["preview-el"],{promise:a,cancel:l}=Ny(s);this._cancelPreload=l,a.catch(c=>{this.$["*networkProblems"]=!0,console.error("Failed to load image",{error:c})}).finally(()=>{o.style.backgroundImage=`url(${s})`,o.setAttribute("loaded",""),r.unobserve(this)})}else this._cancelPreload&&this._cancelPreload()}initCallback(){super.initCallback(),this.$["on.click"]=r=>{this.$.active?this.$.isOriginal||(this.$["*sliderEl"].setOperation(this._operation,this._filter),this.$["*showSlider"]=!0):(this.$["*sliderEl"].setOperation(this._operation,this._filter),this.$["*sliderEl"].apply()),this.$["*currentFilter"]=this._filter},this.defineAccessor("filter",r=>{this._operation="filter",this._filter=r,this.$.isOriginal=r===Ui,this.$.icon=this.$.isOriginal?"original":"slider"}),this._observer=new window.IntersectionObserver(this._observerCallback.bind(this),{threshold:[0,1]});let n=this.$["*originalUrl"];this._originalUrl=n,this.$.isOriginal?this.ref["icon-el"].classList.add("original-icon"):this._observer.observe(this),this.sub("*currentFilter",r=>{this.$.active=r&&r===this._filter}),this.sub("isOriginal",r=>{this.$.iconSize=r?40:20}),this.sub("active",r=>{if(this.$.isOriginal)return;let i=this.ref["icon-el"];i.style.opacity=r?"1":"0";let s=this.ref["preview-el"];r?s.style.opacity="0":s.style.backgroundImage&&(s.style.opacity="1")}),this.sub("*networkProblems",r=>{if(!r){let i=this.proxyUrl(this._previewSrc()),s=this.ref["preview-el"];s.style.backgroundImage&&(s.style.backgroundImage="none",s.style.backgroundImage=`url(${i})`)}})}destroyCallback(){var n;super.destroyCallback(),(n=this._observer)==null||n.disconnect(),this._cancelPreload&&this._cancelPreload()}}Dy.template=`
  <div class="before"></div>
  <div class="preview" ref="preview-el"></div>
  <lr-icon size="40" ref="icon-el" set="@name: icon; @size: iconSize;"></lr-icon>
`;class cS extends Ld{constructor(){super(...arguments);V(this,"_operation","")}initCallback(){super.initCallback(),this.$["on.click"]=n=>{this.$["*sliderEl"].setOperation(this._operation),this.$["*showSlider"]=!0,this.$["*currentOperation"]=this._operation},this.defineAccessor("operation",n=>{n&&(this._operation=n,this.$.icon=n,this.bindL10n("title",()=>this.l10n(n)))}),this.sub("*editorTransformations",n=>{if(!this._operation)return;let{zero:r}=aa[this._operation],i=n[this._operation],s=typeof i<"u"?i!==r:!1;this.$.active=s})}}function XU(t,e){let n={};for(let r of e){let i=t[r];(t.hasOwnProperty(r)||i!==void 0)&&(n[r]=i)}return n}function My(t,e,n){let i=window.devicePixelRatio,s=Math.min(Math.ceil(e*i),3e3),o=i>=2?"lightest":"normal";return An(t,Wi(LI,Pd(n),`quality/${o}`,`stretch/off/-/resize/${s}x`))}function YU(t){return t?[({dimensions:n,coords:r})=>[...n,...r].every(i=>Number.isInteger(i)&&Number.isFinite(i)),({dimensions:n,coords:r})=>n.every(i=>i>0)&&r.every(i=>i>=0)].every(n=>n(t)):!0}class hS extends Oe{constructor(){super();V(this,"ctxOwner",!0);this.init$={...this.init$,image:null,"*padding":dV,"*operations":{rotate:0,mirror:!1,flip:!1},"*imageBox":{x:0,y:0,width:0,height:0},"*cropBox":{x:0,y:0,width:0,height:0}},this._commitDebounced=Dn(this._commit.bind(this),300),this._handleResizeThrottled=JI(this._handleResize.bind(this),100),this._imageSize={width:0,height:0}}_handleResize(){!this.isConnected||!this._isActive||(this._initCanvas(),this._syncTransformations(),this._alignImage(),this._alignCrop(),this._draw())}_syncTransformations(){let n=this.$["*editorTransformations"],r=XU(n,Object.keys(this.$["*operations"])),i={...this.$["*operations"],...r};this.$["*operations"]=i}_initCanvas(){let n=this.ref["canvas-el"],r=n.getContext("2d"),i=this.offsetWidth,s=this.offsetHeight,o=window.devicePixelRatio;n.style.width=`${i}px`,n.style.height=`${s}px`,n.width=i*o,n.height=s*o,r==null||r.scale(o,o),this._canvas=n,this._ctx=r}_alignImage(){if(!this._isActive||!this.$.image)return;let n=this.$.image,r=this.$["*padding"],i=this.$["*operations"],{rotate:s}=i,o={width:this.offsetWidth,height:this.offsetHeight},a=tl({width:n.naturalWidth,height:n.naturalHeight},s),l;if(a.width>o.width-r*2||a.height>o.height-r*2){let c=a.width/a.height,h=o.width/o.height;if(c>h){let f=o.width-r*2,p=f/c,w=0+r,E=r+(o.height-r*2)/2-p/2;l={x:w,y:E,width:f,height:p}}else{let f=o.height-r*2,p=f*c,w=r+(o.width-r*2)/2-p/2,E=0+r;l={x:w,y:E,width:p,height:f}}}else{let{width:c,height:h}=a,f=r+(o.width-r*2)/2-c/2,p=r+(o.height-r*2)/2-h/2;l={x:f,y:p,width:c,height:h}}this.$["*imageBox"]=Hc(l)}_alignCrop(){var p;let n=this.$["*cropBox"],r=this.$["*imageBox"],i=this.$["*operations"],{rotate:s}=i,o=this.$["*editorTransformations"].crop,{width:a,x:l,y:c}=this.$["*imageBox"];if(o){let{dimensions:[w,E],coords:[S,P]}=o,{width:T}=tl(this._imageSize,s),_=a/T;n=Uh(Hc({x:l+S*_,y:c+P*_,width:w*_,height:E*_}),this.$["*imageBox"])}const h=(p=this.$["*cropPresetList"])==null?void 0:p[0],f=h?h.width/h.height:void 0;if(!xV(n,r)||f&&!kV(n,f)){const w=r.width/r.height;let E=r.width,S=r.height;f&&(w>f?E=Math.min(r.height*f,r.width):S=Math.min(r.width/f,r.height)),n={x:r.x+r.width/2-E/2,y:r.y+r.height/2-S/2,width:E,height:S}}this.$["*cropBox"]=Uh(Hc(n),this.$["*imageBox"])}_drawImage(){let n=this._ctx;if(!n)return;let r=this.$.image,i=this.$["*imageBox"],s=this.$["*operations"],{mirror:o,flip:a,rotate:l}=s,c=tl({width:i.width,height:i.height},l);n.save(),n.translate(i.x+i.width/2,i.y+i.height/2),n.rotate(l*Math.PI*-1/180),n.scale(o?-1:1,a?-1:1),n.drawImage(r,-c.width/2,-c.height/2,c.width,c.height),n.restore()}_draw(){if(!this._isActive||!this.$.image||!this._canvas||!this._ctx)return;let n=this._canvas;this._ctx.clearRect(0,0,n.width,n.height),this._drawImage()}_animateIn({fromViewer:n}){this.$.image&&(this.ref["frame-el"].toggleThumbs(!0),this._transitionToImage(),setTimeout(()=>{this.className=Qn({active_from_viewer:n,active_from_editor:!n,inactive_to_editor:!1})}))}_getCropDimensions(){let n=this.$["*cropBox"],r=this.$["*imageBox"],i=this.$["*operations"],{rotate:s}=i,{width:o,height:a}=r,{width:l,height:c}=tl(this._imageSize,s),{width:h,height:f}=n,p=o/l,w=a/c;return[ko(Math.round(h/p),1,l),ko(Math.round(f/w),1,c)]}_getCropTransformation(){let n=this.$["*cropBox"],r=this.$["*imageBox"],i=this.$["*operations"],{rotate:s}=i,{width:o,height:a,x:l,y:c}=r,{width:h,height:f}=tl(this._imageSize,s),{x:p,y:w}=n,E=o/h,S=a/f,P=this._getCropDimensions(),T={dimensions:P,coords:[ko(Math.round((p-l)/E),0,h-P[0]),ko(Math.round((w-c)/S),0,f-P[1])]};if(!YU(T)){console.error("Cropper is trying to create invalid crop object",{payload:T});return}if(!(P[0]===h&&P[1]===f))return T}_commit(){if(!this.isConnected)return;let n=this.$["*operations"],{rotate:r,mirror:i,flip:s}=n,o=this._getCropTransformation(),l={...this.$["*editorTransformations"],crop:o,rotate:r,mirror:i,flip:s};this.$["*editorTransformations"]=l}setValue(n,r){this.$["*operations"]={...this.$["*operations"],[n]:r},this._isActive&&(this._alignImage(),this._alignCrop(),this._draw())}getValue(n){return this.$["*operations"][n]}async activate(n,{fromViewer:r}={}){if(!this._isActive){this._isActive=!0,this._imageSize=n,this.removeEventListener("transitionend",this._reset);try{this.$.image=await this._waitForImage(this.$["*originalUrl"],this.$["*editorTransformations"]),this._syncTransformations(),this._animateIn({fromViewer:r})}catch(i){console.error("Failed to activate cropper",{error:i})}this._observer=new ResizeObserver(([i])=>{i.contentRect.width>0&&i.contentRect.height>0&&this._isActive&&this.$.image&&this._handleResizeThrottled()}),this._observer.observe(this)}}deactivate({reset:n=!1}={}){var r;this._isActive&&(!n&&this._commit(),this._isActive=!1,this._transitionToCrop(),this.className=Qn({active_from_viewer:!1,active_from_editor:!1,inactive_to_editor:!0}),this.ref["frame-el"].toggleThumbs(!1),this.addEventListener("transitionend",this._reset,{once:!0}),(r=this._observer)==null||r.disconnect())}_transitionToCrop(){let n=this._getCropDimensions(),r=Math.min(this.offsetWidth,n[0])/this.$["*cropBox"].width,i=Math.min(this.offsetHeight,n[1])/this.$["*cropBox"].height,s=Math.min(r,i),o=this.$["*cropBox"].x+this.$["*cropBox"].width/2,a=this.$["*cropBox"].y+this.$["*cropBox"].height/2;this.style.transform=`scale(${s}) translate(${(this.offsetWidth/2-o)/s}px, ${(this.offsetHeight/2-a)/s}px)`,this.style.transformOrigin=`${o}px ${a}px`}_transitionToImage(){let n=this.$["*cropBox"].x+this.$["*cropBox"].width/2,r=this.$["*cropBox"].y+this.$["*cropBox"].height/2;this.style.transform="scale(1)",this.style.transformOrigin=`${n}px ${r}px`}_reset(){this._isActive||(this.$.image=null)}_waitForImage(n,r){let i=this.offsetWidth;r={...r,crop:void 0,rotate:void 0,flip:void 0,mirror:void 0};let s=this.proxyUrl(My(n,i,r)),{promise:o,cancel:a,image:l}=Ny(s),c=this._handleImageLoading(s);return l.addEventListener("load",c,{once:!0}),l.addEventListener("error",c,{once:!0}),this._cancelPreload&&this._cancelPreload(),this._cancelPreload=a,o.then(()=>l).catch(h=>(console.error("Failed to load image",{error:h}),this.$["*networkProblems"]=!0,Promise.resolve(l)))}_handleImageLoading(n){let r="crop",i=this.$["*loadingOperations"];return i.get(r)||i.set(r,new Map),i.get(r).get(n)||(i.set(r,i.get(r).set(n,!0)),this.$["*loadingOperations"]=i),()=>{var s;(s=i==null?void 0:i.get(r))!=null&&s.has(n)&&(i.get(r).delete(n),this.$["*loadingOperations"]=i)}}initCallback(){super.initCallback(),this.sub("*imageBox",()=>{this._draw()}),this.sub("*cropBox",()=>{this.$.image&&this._commitDebounced()}),this.sub("*cropPresetList",()=>{this._alignCrop()}),setTimeout(()=>{this.sub("*networkProblems",n=>{n||this._isActive&&this.activate(this._imageSize,{fromViewer:!1})})},0)}destroyCallback(){var n;super.destroyCallback(),(n=this._observer)==null||n.disconnect()}}hS.template=`
  <canvas class="canvas" ref="canvas-el"></canvas>
  <lr-crop-frame ref="frame-el"></lr-crop-frame>
`;function $w(t,e,n){let r=Array(n);n--;for(let i=n;i>=0;i--)r[i]=Math.ceil((i*e+(n-i)*t)/n);return r}function JU(t){return t.reduce((e,n,r)=>r<t.length-1?[...e,[n,t[r+1]]]:e,[])}function ZU(t,e,n){let r=JU(t).find(([i,s])=>i<=e&&e<=s);return t.map(i=>{let s=Math.abs(r[0]-r[1]),o=Math.abs(e-r[0])/s;return r[0]===i?e>n?1:1-o:r[1]===i?e>=n?o:1:0})}function e$(t,e){return t.map((n,r)=>n<e?t.length-r:r)}function Fw(t,e){let n=aa[t].keypointsNumber,{range:r,zero:i}=aa[t];return[...new Set([...$w(r[0],i,n+1),...$w(i,r[1],n+1),i,e])].sort((s,o)=>s-o)}class t$ extends Oe{constructor(){super(),this._isActive=!1,this._hidden=!0,this._addKeypointDebounced=Dn(this._addKeypoint.bind(this),600),this.classList.add("inactive_to_cropper")}_handleImageLoading(e){let n=this._operation,r=this.$["*loadingOperations"];return r.get(n)||r.set(n,new Map),r.get(n).get(e)||(r.set(n,r.get(n).set(e,!0)),this.$["*loadingOperations"]=r),()=>{var i;(i=r==null?void 0:r.get(n))!=null&&i.has(e)&&(r.get(n).delete(e),this.$["*loadingOperations"]=r)}}_flush(){window.cancelAnimationFrame(this._raf),this._raf=window.requestAnimationFrame(()=>{for(let e of this._keypoints){let{image:n}=e;n&&(n.style.opacity=e.opacity.toString(),n.style.zIndex=e.zIndex.toString())}})}_imageSrc({url:e=this._url,filter:n=this._filter,operation:r,value:i}={}){let s={...this._transformations};r&&(s[r]=n?{name:n,amount:i}:i);let o=this.offsetWidth;return this.proxyUrl(My(e,o,s))}_constructKeypoint(e,n){return{src:this._imageSrc({operation:e,value:n}),image:null,opacity:0,zIndex:0,value:n}}_isSame(e,n){return this._operation===e&&this._filter===n}_addKeypoint(e,n,r){let i=()=>!this._isSame(e,n)||this._value!==r||!!this._keypoints.find(l=>l.value===r);if(i())return;let s=this._constructKeypoint(e,r),o=new Image;o.src=s.src;let a=this._handleImageLoading(s.src);o.addEventListener("load",a,{once:!0}),o.addEventListener("error",a,{once:!0}),s.image=o,o.classList.add("fader-image"),o.addEventListener("load",()=>{if(i())return;let l=this._keypoints,c=l.findIndex(f=>f.value>r),h=c<l.length?l[c].image:null;!this._container||h&&!this._container.contains(h)||(l.splice(c,0,s),this._container.insertBefore(o,h),this._update(e,r))},{once:!0}),o.addEventListener("error",()=>{this.$["*networkProblems"]=!0},{once:!0})}set(e){e=typeof e=="string"?parseInt(e,10):e,this._update(this._operation,e),this._addKeypointDebounced(this._operation,this._filter,e)}_update(e,n){this._operation=e,this._value=n;let{zero:r}=aa[e],i=this._keypoints.map(a=>a.value),s=ZU(i,n,r),o=e$(i,r);for(let[a,l]of Object.entries(this._keypoints))l.opacity=s[a],l.zIndex=o[a];this._flush()}_createPreviewImage(){let e=new Image;return e.classList.add("fader-image","fader-image--preview"),e.style.opacity="0",e}async _initNodes(){let e=document.createDocumentFragment();this._previewImage=this._previewImage||this._createPreviewImage(),!this.contains(this._previewImage)&&e.appendChild(this._previewImage);let n=document.createElement("div");e.appendChild(n);let r=this._keypoints.map(c=>c.src),{images:i,promise:s,cancel:o}=gm(r);i.forEach(c=>{let h=this._handleImageLoading(c.src);c.addEventListener("load",h),c.addEventListener("error",h)}),this._cancelLastImages=()=>{o(),this._cancelLastImages=void 0};let a=this._operation,l=this._filter;await s,this._isActive&&this._isSame(a,l)&&(this._container&&this._container.remove(),this._container=n,this._keypoints.forEach((c,h)=>{let f=i[h];f.classList.add("fader-image"),c.image=f,this._container.appendChild(f)}),this.appendChild(e),this._flush())}setTransformations(e){if(this._transformations=e,this._previewImage){let n=this._imageSrc(),r=this._handleImageLoading(n);this._previewImage.src=n,this._previewImage.addEventListener("load",r,{once:!0}),this._previewImage.addEventListener("error",r,{once:!0}),this._previewImage.style.opacity="1",this._previewImage.addEventListener("error",()=>{this.$["*networkProblems"]=!0},{once:!0})}}preload({url:e,filter:n,operation:r,value:i}){this._cancelBatchPreload&&this._cancelBatchPreload();let o=Fw(r,i).map(l=>this._imageSrc({url:e,filter:n,operation:r,value:l})),{cancel:a}=gm(o);this._cancelBatchPreload=a}_setOriginalSrc(e){let n=this._previewImage||this._createPreviewImage();if(!this.contains(n)&&this.appendChild(n),this._previewImage=n,n.src===e){n.style.opacity="1",n.style.transform="scale(1)",this.className=Qn({active_from_viewer:this._fromViewer,active_from_cropper:!this._fromViewer,inactive_to_cropper:!1});return}n.style.opacity="0";let r=this._handleImageLoading(e);n.addEventListener("error",r,{once:!0}),n.src=e,n.addEventListener("load",()=>{r(),n&&(n.style.opacity="1",n.style.transform="scale(1)",this.className=Qn({active_from_viewer:this._fromViewer,active_from_cropper:!this._fromViewer,inactive_to_cropper:!1}))},{once:!0}),n.addEventListener("error",()=>{this.$["*networkProblems"]=!0},{once:!0})}activate({url:e,operation:n,value:r,filter:i,fromViewer:s}){if(this._isActive=!0,this._hidden=!1,this._url=e,this._operation=n||"initial",this._value=r,this._filter=i,this._fromViewer=s,typeof r!="number"&&!i){let a=this._imageSrc({operation:n,value:r});this._setOriginalSrc(a),this._container&&this._container.remove();return}this._keypoints=Fw(n,r).map(a=>this._constructKeypoint(n,a)),this._update(n,r),this._initNodes()}deactivate({hide:e=!0}={}){this._isActive=!1,this._cancelLastImages&&this._cancelLastImages(),this._cancelBatchPreload&&this._cancelBatchPreload(),e&&!this._hidden?(this._hidden=!0,this._previewImage&&(this._previewImage.style.transform="scale(1)"),this.className=Qn({active_from_viewer:!1,active_from_cropper:!1,inactive_to_cropper:!0}),this.addEventListener("transitionend",()=>{this._container&&this._container.remove()},{once:!0})):this._container&&this._container.remove()}}const n$=1;class dS extends Oe{initCallback(){super.initCallback(),this.addEventListener("wheel",e=>{e.preventDefault();let{deltaY:n,deltaX:r}=e;Math.abs(r)>n$?this.scrollLeft+=r:this.scrollLeft+=n})}}dS.template=" <slot></slot> ";function r$(t){return`
    <lr-presence-toggle class="tab-toggle" set="visible: presence.tabToggle.${t}; styles: presence.tabToggleStyles;">
      <lr-btn-ui
        theme="boring"
        ref="tab-toggle-${t}"
        data-id="${t}"
        icon="${t}"
        tabindex="0"
        set="onclick: on.clickTab;"
      >
      </lr-btn-ui>
    </lr-presence-toggle>
  `}function i$(t){return`
    <lr-presence-toggle class="tab-content" set="visible: presence.tabContent.${t}; styles: presence.tabContentStyles">
      <lr-editor-scroller hidden-scrollbar>
        <div class="controls-list_align">
          <div class="controls-list_inner" ref="controls-list-${t}"></div>
        </div>
      </lr-editor-scroller>
    </lr-presence-toggle>
  `}class fS extends Oe{constructor(){super();V(this,"_updateInfoTooltip",Dn(()=>{var o,a;const n=this.$["*editorTransformations"],r=this.$["*currentOperation"];let i="",s=!1;if(this.$["*tabId"]===Kt.FILTERS)if(s=!0,this.$["*currentFilter"]&&((o=n==null?void 0:n.filter)==null?void 0:o.name)===this.$["*currentFilter"]){let l=((a=n==null?void 0:n.filter)==null?void 0:a.amount)||100;i=this.$["*currentFilter"]+" "+l}else i=this.l10n(Ui);else if(this.$["*tabId"]===Kt.TUNING&&r){s=!0;let l=(n==null?void 0:n[r])||aa[r].zero;i=this.l10n(r)+" "+l}s&&(this.$["*operationTooltip"]=i),this.ref["tooltip-el"].classList.toggle("info-tooltip_visible",s)},0));this.init$={...this.init$,"*sliderEl":null,"*loadingOperations":new Map,"*showSlider":!1,"*currentFilter":Ui,"*currentOperation":null,showLoader:!1,filters:oV,colorOperations:sV,cropOperations:aV,"*operationTooltip":null,"presence.mainToolbar":!0,"presence.subToolbar":!1,"presence.tabToggles":!0,"presence.tabContent.crop":!1,"presence.tabContent.tuning":!1,"presence.tabContent.filters":!1,"presence.tabToggle.crop":!0,"presence.tabToggle.tuning":!0,"presence.tabToggle.filters":!0,"presence.subTopToolbarStyles":{hidden:"sub-toolbar--top-hidden",visible:"sub-toolbar--visible"},"presence.subBottomToolbarStyles":{hidden:"sub-toolbar--bottom-hidden",visible:"sub-toolbar--visible"},"presence.tabContentStyles":{hidden:"tab-content--hidden",visible:"tab-content--visible"},"presence.tabToggleStyles":{hidden:"tab-toggle--hidden",visible:"tab-toggle--visible"},"presence.tabTogglesStyles":{hidden:"tab-toggles--hidden",visible:"tab-toggles--visible"},"on.cancel":()=>{this._cancelPreload&&this._cancelPreload(),this.$["*on.cancel"]()},"on.apply":()=>{this.$["*on.apply"](this.$["*editorTransformations"])},"on.applySlider":()=>{this.ref["slider-el"].apply(),this._onSliderClose()},"on.cancelSlider":()=>{this.ref["slider-el"].cancel(),this._onSliderClose()},"on.clickTab":n=>{const r=n.currentTarget.getAttribute("data-id");r&&this._activateTab(r,{fromViewer:!1})}},this._debouncedShowLoader=Dn(this._showLoader.bind(this),500)}_onSliderClose(){this.$["*showSlider"]=!1,this.$["*tabId"]===Kt.TUNING&&this.ref["tooltip-el"].classList.toggle("info-tooltip_visible",!1)}_createOperationControl(n){let r=new cS;return r.operation=n,r}_createFilterControl(n){let r=new Dy;return r.filter=n,r}_createToggleControl(n){let r=new lS;return r.operation=n,r}_renderControlsList(n){let r=this.ref[`controls-list-${n}`],i=document.createDocumentFragment();n===Kt.CROP?this.$.cropOperations.forEach(s=>{let o=this._createToggleControl(s);i.appendChild(o)}):n===Kt.FILTERS?[Ui,...this.$.filters].forEach(s=>{let o=this._createFilterControl(s);i.appendChild(o)}):n===Kt.TUNING&&this.$.colorOperations.forEach(s=>{let o=this._createOperationControl(s);i.appendChild(o)}),[...i.children].forEach((s,o)=>{o===i.childNodes.length-1&&s.classList.add("controls-list_last-item")}),r.innerHTML="",r.appendChild(i)}_activateTab(n,{fromViewer:r}){this.$["*tabId"]=n,n===Kt.CROP?(this.$["*faderEl"].deactivate(),this.$["*cropperEl"].activate(this.$["*imageSize"],{fromViewer:r})):(this.$["*faderEl"].activate({url:this.$["*originalUrl"],fromViewer:r}),this.$["*cropperEl"].deactivate());for(let i of dr){let s=i===n,o=this.ref[`tab-toggle-${i}`];o.active=s,s?(this._renderControlsList(n),this._syncTabIndicator()):this._unmountTabControls(i),this.$[`presence.tabContent.${i}`]=s}}_unmountTabControls(n){let r=this.ref[`controls-list-${n}`];r&&(r.innerHTML="")}_syncTabIndicator(){let n=this.ref[`tab-toggle-${this.$["*tabId"]}`],r=this.ref["tabs-indicator"];r.style.transform=`translateX(${n.offsetLeft}px)`}_preloadEditedImage(){if(this.$["*imgContainerEl"]&&this.$["*originalUrl"]){let n=this.$["*imgContainerEl"].offsetWidth,r=this.proxyUrl(My(this.$["*originalUrl"],n,this.$["*editorTransformations"]));this._cancelPreload&&this._cancelPreload();let{cancel:i}=gm([r]);this._cancelPreload=()=>{i(),this._cancelPreload=void 0}}}_showLoader(n){this.$.showLoader=n}initCallback(){super.initCallback(),this.$["*sliderEl"]=this.ref["slider-el"],this.sub("*imageSize",n=>{n&&setTimeout(()=>{this._activateTab(this.$["*tabId"],{fromViewer:!0})},0)}),this.sub("*editorTransformations",n=>{var i;let r=(i=n==null?void 0:n.filter)==null?void 0:i.name;this.$["*currentFilter"]!==r&&(this.$["*currentFilter"]=r)}),this.sub("*currentFilter",()=>{this._updateInfoTooltip()}),this.sub("*currentOperation",()=>{this._updateInfoTooltip()}),this.sub("*tabId",()=>{this._updateInfoTooltip()}),this.sub("*originalUrl",()=>{this.$["*faderEl"]&&this.$["*faderEl"].deactivate()}),this.sub("*editorTransformations",n=>{this._preloadEditedImage(),this.$["*faderEl"]&&this.$["*faderEl"].setTransformations(n)}),this.sub("*loadingOperations",n=>{let r=!1;for(let[,i]of n.entries()){if(r)break;for(let[,s]of i.entries())if(s){r=!0;break}}this._debouncedShowLoader(r)}),this.sub("*showSlider",n=>{this.$["presence.subToolbar"]=n,this.$["presence.mainToolbar"]=!n}),this.sub("*tabList",n=>{this.$["presence.tabToggles"]=n.length>1;for(const r of dr){this.$[`presence.tabToggle.${r}`]=n.includes(r);const i=this.ref[`tab-toggle-${r}`];i.style.gridColumn=n.indexOf(r)+1}n.includes(this.$["*tabId"])||this._activateTab(n[0],{fromViewer:!1})}),this._updateInfoTooltip()}}fS.template=`
  <lr-line-loader-ui set="active: showLoader"></lr-line-loader-ui>
  <div class="info-tooltip_container">
    <div class="info-tooltip_wrapper">
      <div ref="tooltip-el" class="info-tooltip info-tooltip_hidden">{{*operationTooltip}}</div>
    </div>
  </div>
  <div class="toolbar-container">
    <lr-presence-toggle class="sub-toolbar" set="visible: presence.mainToolbar; styles: presence.subTopToolbarStyles">
      <div class="tab-content-row">${dr.map(i$).join("")}</div>
      <div class="controls-row">
        <lr-btn-ui theme="boring" icon="closeMax" set="onclick: on.cancel"> </lr-btn-ui>
        <lr-presence-toggle class="tab-toggles" set="visible: presence.tabToggles; styles: presence.tabTogglesStyles">
          <div ref="tabs-indicator" class="tab-toggles_indicator"></div>
          ${dr.map(r$).join("")}
        </lr-presence-toggle>
        <lr-btn-ui theme="primary" icon="done" set="onclick: on.apply"> </lr-btn-ui>
      </div>
    </lr-presence-toggle>
    <lr-presence-toggle class="sub-toolbar" set="visible: presence.subToolbar; styles: presence.subBottomToolbarStyles">
      <div class="slider">
        <lr-editor-slider ref="slider-el"></lr-editor-slider>
      </div>
      <div class="controls-row">
        <lr-btn-ui theme="boring" set="onclick: on.cancelSlider;" l10n="@text:cancel"> </lr-btn-ui>
        <lr-btn-ui theme="primary" set="onclick: on.applySlider;" l10n="@text:apply"> </lr-btn-ui>
      </div>
    </lr-presence-toggle>
  </div>
`;class Vy extends Oe{constructor(){super(),this._iconReversed=!1,this._iconSingle=!1,this._iconHidden=!1,this.init$={...this.init$,text:"",icon:"",iconCss:this._iconCss(),theme:null},this.defineAccessor("active",e=>{e?this.setAttribute("active",""):this.removeAttribute("active")})}_iconCss(){return Qn("icon",{icon_left:!this._iconReversed,icon_right:this._iconReversed,icon_hidden:this._iconHidden,icon_single:this._iconSingle})}initCallback(){super.initCallback(),this.sub("icon",e=>{this._iconSingle=!this.$.text,this._iconHidden=!e,this.$.iconCss=this._iconCss()}),this.sub("theme",e=>{e!=="custom"&&(this.className=e)}),this.sub("text",e=>{this._iconSingle=!1}),this.setAttribute("role","button"),this.tabIndex===-1&&(this.tabIndex=0),this.hasAttribute("theme")||this.setAttribute("theme","default")}set reverse(e){this.hasAttribute("reverse")?(this.style.flexDirection="row-reverse",this._iconReversed=!0):(this._iconReversed=!1,this.style.flexDirection=null)}}Vy.bindAttributes({text:"text",icon:"icon",reverse:"reverse",theme:"theme"});Vy.template=`
  <lr-icon size="20" set="className: iconCss; @name: icon;"></lr-icon>
  <div class="text">{{text}}</div>
`;class pS extends Oe{constructor(){super(),this._active=!1,this._handleTransitionEndRight=()=>{let e=this.ref["line-el"];e.style.transition="initial",e.style.opacity="0",e.style.transform="translateX(-101%)",this._active&&this._start()}}initCallback(){super.initCallback(),this.defineAccessor("active",e=>{typeof e=="boolean"&&(e?this._start():this._stop())})}_start(){this._active=!0;let{width:e}=this.getBoundingClientRect(),n=this.ref["line-el"];n.style.transition="transform 1s",n.style.opacity="1",n.style.transform=`translateX(${e}px)`,n.addEventListener("transitionend",this._handleTransitionEndRight,{once:!0})}_stop(){this._active=!1}}pS.template=`
  <div class="inner">
    <div class="line" ref="line-el"></div>
  </div>
`;const Ec={transition:"transition",visible:"visible",hidden:"hidden"};class mS extends Oe{constructor(){super(),this._visible=!1,this._visibleStyle=Ec.visible,this._hiddenStyle=Ec.hidden,this._externalTransitions=!1,this.defineAccessor("styles",e=>{e&&(this._externalTransitions=!0,this._visibleStyle=e.visible,this._hiddenStyle=e.hidden)}),this.defineAccessor("visible",e=>{typeof e=="boolean"&&(this._visible=e,this._handleVisible())})}_handleVisible(){this.style.visibility=this._visible?"inherit":"hidden",HU(this,{[Ec.transition]:!this._externalTransitions,[this._visibleStyle]:this._visible,[this._hiddenStyle]:!this._visible}),this.setAttribute("aria-hidden",this._visible?"false":"true")}initCallback(){super.initCallback(),this.setAttribute("hidden",""),this._externalTransitions||this.classList.add(Ec.transition),this._handleVisible(),setTimeout(()=>this.removeAttribute("hidden"),0)}}mS.template=" <slot></slot> ";class gS extends Oe{constructor(){super();V(this,"init$",{...this.init$,disabled:!1,min:0,max:100,onInput:null,onChange:null,defaultValue:null,"on.sliderInput":()=>{let n=parseInt(this.ref["input-el"].value,10);this._updateValue(n),this.$.onInput&&this.$.onInput(n)},"on.sliderChange":()=>{let n=parseInt(this.ref["input-el"].value,10);this.$.onChange&&this.$.onChange(n)}});this.setAttribute("with-effects","")}initCallback(){super.initCallback(),this.defineAccessor("disabled",r=>{this.$.disabled=r}),this.defineAccessor("min",r=>{this.$.min=r}),this.defineAccessor("max",r=>{this.$.max=r}),this.defineAccessor("defaultValue",r=>{this.$.defaultValue=r,this.ref["input-el"].value=r,this._updateValue(r)}),this.defineAccessor("zero",r=>{this._zero=r}),this.defineAccessor("onInput",r=>{r&&(this.$.onInput=r)}),this.defineAccessor("onChange",r=>{r&&(this.$.onChange=r)}),this._updateSteps(),this._observer=new ResizeObserver(()=>{this._updateSteps();let r=parseInt(this.ref["input-el"].value,10);this._updateValue(r)}),this._observer.observe(this),this._thumbSize=parseInt(window.getComputedStyle(this).getPropertyValue("--l-thumb-size"),10),setTimeout(()=>{let r=parseInt(this.ref["input-el"].value,10);this._updateValue(r)},0),this.sub("disabled",r=>{let i=this.ref["input-el"];r?i.setAttribute("disabled","disabled"):i.removeAttribute("disabled")});let n=this.ref["input-el"];n.addEventListener("focus",()=>{this.style.setProperty("--color-effect","var(--hover-color-rgb)")}),n.addEventListener("blur",()=>{this.style.setProperty("--color-effect","var(--idle-color-rgb)")})}_updateValue(n){this._updateZeroDot(n);let{width:r}=this.getBoundingClientRect(),o=100/(this.$.max-this.$.min)*(n-this.$.min)*(r-this._thumbSize)/100;window.requestAnimationFrame(()=>{this.ref["thumb-el"].style.transform=`translateX(${o}px)`})}_updateZeroDot(n){if(!this._zeroDotEl)return;n===this._zero?this._zeroDotEl.style.opacity="0":this._zeroDotEl.style.opacity="0.2";let{width:r}=this.getBoundingClientRect(),o=100/(this.$.max-this.$.min)*(this._zero-this.$.min)*(r-this._thumbSize)/100;window.requestAnimationFrame(()=>{this._zeroDotEl.style.transform=`translateX(${o}px)`})}_updateSteps(){let r=this.ref["steps-el"],{width:i}=r.getBoundingClientRect(),s=Math.ceil(i/2),o=Math.ceil(s/15)-2;if(this._stepsCount===o)return;let a=document.createDocumentFragment(),l=document.createElement("div"),c=document.createElement("div");l.className="minor-step",c.className="border-step",a.appendChild(c);for(let f=0;f<o;f++)a.appendChild(l.cloneNode());a.appendChild(c.cloneNode());for(let f=0;f<o;f++)a.appendChild(l.cloneNode());a.appendChild(c.cloneNode());let h=document.createElement("div");h.className="zero-dot",a.appendChild(h),this._zeroDotEl=h,r.innerHTML="",r.appendChild(a),this._stepsCount=o}destroyCallback(){var n;(n=this._observer)==null||n.disconnect()}}gS.template=`
  <div class="steps" ref="steps-el"></div>
  <div ref="thumb-el" class="thumb"></div>
  <input
    class="input"
    type="range"
    ref="input-el"
    tabindex="0"
    set="oninput: on.sliderInput; onchange: on.sliderChange; @min: min; @max: max; @value: defaultValue;"
  />
`;class s$ extends Ke{constructor(){super();V(this,"couldBeCtxOwner",!0);V(this,"activityType",fe.activities.CLOUD_IMG_EDIT);this.init$={...this.init$,cdnUrl:null}}initCallback(){super.initCallback(),this.registerActivity(this.activityType,{onActivate:()=>this.mountEditor(),onDeactivate:()=>this.unmountEditor()}),this.sub("*focusedEntry",n=>{n&&(this.entry=n,this.entry.subscribe("cdnUrl",r=>{r&&(this.$.cdnUrl=r)}))}),this.subConfigValue("cropPreset",n=>{this._instance&&this._instance.getAttribute("crop-preset")!==n&&this._instance.setAttribute("crop-preset",n)}),this.subConfigValue("cloudImageEditorTabs",n=>{this._instance&&this._instance.getAttribute("tabs")!==n&&this._instance.setAttribute("tabs",n)})}handleApply(n){if(!this.entry)return;let r=n.detail;this.entry.setMultipleValues({cdnUrl:r.cdnUrl,cdnUrlModifiers:r.cdnUrlModifiers}),this.historyBack()}handleCancel(){this.historyBack()}mountEditor(){const n=new Ca,r=this.$.cdnUrl,i=this.cfg.cropPreset,s=this.cfg.cloudImageEditorTabs;n.setAttribute("ctx-name",this.ctxName),n.setAttribute("cdn-url",r),i&&n.setAttribute("crop-preset",i),s&&n.setAttribute("tabs",s),n.addEventListener("apply",o=>{const a=o;this.handleApply(a),this.debugPrint('editor event "apply"',a.detail)}),n.addEventListener("cancel",o=>{const a=o;this.handleCancel(),this.debugPrint('editor event "cancel"',a.detail)}),n.addEventListener("change",o=>{const a=o;this.debugPrint('editor event "change"',a.detail)}),this.innerHTML="",this.appendChild(n),this._mounted=!0,this._instance=n}unmountEditor(){this._instance=void 0,this.innerHTML=""}}const o$=function(t){return t.replace(/[\\-\\[]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&")},a$=function(t,e="i"){const n=t.split("*").map(o$);return new RegExp("^"+n.join(".+")+"$",e)};let l$=t=>Object.keys(t).reduce((n,r)=>{let i=t[r],s=Object.keys(i).reduce((o,a)=>{let l=i[a];return o+`${a}: ${l};`},"");return n+`${r}{${s}}`},"");function u$({textColor:t,backgroundColor:e,linkColor:n,linkColorHover:r,shadeColor:i}){let s=`solid 1px ${i}`;return l$({body:{color:t,"background-color":e},".side-bar":{background:"inherit","border-right":s},".main-content":{background:"inherit"},".main-content-header":{background:"inherit"},".main-content-footer":{background:"inherit"},".list-table-row":{color:"inherit"},".list-table-row:hover":{background:i},".list-table-row .list-table-cell-a, .list-table-row .list-table-cell-b":{"border-top":s},".list-table-body .list-items":{"border-bottom":s},".bread-crumbs a":{color:n},".bread-crumbs a:hover":{color:r},".main-content.loading":{background:`${e} url(/static/images/loading_spinner.gif) center no-repeat`,"background-size":"25px 25px"},".list-icons-item":{"background-color":i},".source-gdrive .side-bar-menu a, .source-gphotos .side-bar-menu a":{color:n},".source-gdrive .side-bar-menu a, .source-gphotos .side-bar-menu a:hover":{color:r},".side-bar-menu a":{color:n},".side-bar-menu a:hover":{color:r},".source-gdrive .side-bar-menu .current, .source-gdrive .side-bar-menu a:hover, .source-gphotos .side-bar-menu .current, .source-gphotos .side-bar-menu a:hover":{color:r},".source-vk .side-bar-menu a":{color:n},".source-vk .side-bar-menu a:hover":{color:r,background:"none"}})}let $i={};window.addEventListener("message",t=>{let e;try{e=JSON.parse(t.data)}catch{return}if((e==null?void 0:e.type)in $i){let n=$i[e.type];for(let[r,i]of n)t.source===r&&i(e)}});const c$=function(t,e,n){t in $i||($i[t]=[]),$i[t].push([e,n])},h$=function(t,e){t in $i&&($i[t]=$i[t].filter(n=>n[0]!==e))};function d$(t){let e=[];for(let[n,r]of Object.entries(t))r==null||typeof r=="string"&&r.length===0||e.push(`${n}=${encodeURIComponent(r)}`);return e.join("&")}class yS extends Ke{constructor(){super();V(this,"couldBeCtxOwner",!0);V(this,"activityType",fe.activities.EXTERNAL);V(this,"_iframe",null);this.init$={...this.init$,activityIcon:"",activityCaption:"",selectedList:[],counter:0,multiple:!1,onDone:()=>{for(const n of this.$.selectedList){const r=this.extractUrlFromMessage(n),{filename:i}=n,{externalSourceType:s}=this.activityParams;this.addFileFromUrl(r,{fileName:i,source:s})}this.$["*currentActivity"]=fe.activities.UPLOAD_LIST},onCancel:()=>{this.historyBack()}}}initCallback(){super.initCallback(),this.registerActivity(this.activityType,{onActivate:()=>{let{externalSourceType:n}=this.activityParams;this.set$({activityCaption:`${n==null?void 0:n[0].toUpperCase()}${n==null?void 0:n.slice(1)}`,activityIcon:n}),this.mountIframe()}}),this.sub("*currentActivity",n=>{n!==this.activityType&&this.unmountIframe()}),this.sub("selectedList",n=>{this.$.counter=n.length}),this.subConfigValue("multiple",n=>{this.$.multiple=n})}extractUrlFromMessage(n){if(n.alternatives){const r=Gr(this.cfg.externalSourcesPreferredTypes);for(const i of r){const s=a$(i);for(const[o,a]of Object.entries(n.alternatives))if(s.test(o))return a}}return n.url}sendMessage(n){var r,i;(i=(r=this._iframe)==null?void 0:r.contentWindow)==null||i.postMessage(JSON.stringify(n),"*")}async handleFileSelected(n){!this.$.multiple&&this.$.selectedList.length||(this.$.selectedList=[...this.$.selectedList,n],this.$.multiple||this.$.onDone())}handleIframeLoad(){this.applyStyles()}getCssValue(n){return window.getComputedStyle(this).getPropertyValue(n).trim()}applyStyles(){let n={backgroundColor:this.getCssValue("--clr-background-light"),textColor:this.getCssValue("--clr-txt"),shadeColor:this.getCssValue("--clr-shade-lv1"),linkColor:"#157cfc",linkColorHover:"#3891ff"};this.sendMessage({type:"embed-css",style:u$(n)})}remoteUrl(){var c,h;const{pubkey:n,remoteTabSessionKey:r,socialBaseUrl:i}=this.cfg,{externalSourceType:s}=this.activityParams,a={lang:((h=(c=this.l10n("social-source-lang"))==null?void 0:c.split("-"))==null?void 0:h[0])||"en",public_key:n,images_only:"false",pass_window_open:!1,session_key:r},l=new URL(`/window3/${s}`,i);return l.search=d$(a),l.toString()}mountIframe(){let n=my({tag:"iframe",attributes:{src:this.remoteUrl(),marginheight:0,marginwidth:0,frameborder:0,allowTransparency:!0}});n.addEventListener("load",this.handleIframeLoad.bind(this)),this.ref.iframeWrapper.innerHTML="",this.ref.iframeWrapper.appendChild(n),c$("file-selected",n.contentWindow,this.handleFileSelected.bind(this)),this._iframe=n,this.$.selectedList=[]}unmountIframe(){this._iframe&&h$("file-selected",this._iframe.contentWindow),this.ref.iframeWrapper.innerHTML="",this._iframe=null,this.$.selectedList=[],this.$.counter=0}}yS.template=`
  <lr-activity-header>
    <button type="button" class="mini-btn" set="onclick: *historyBack">
      <lr-icon name="back"></lr-icon>
    </button>
    <div>
      <lr-icon set="@name: activityIcon"></lr-icon>
      <span>{{activityCaption}}</span>
    </div>
    <button type="button" class="mini-btn close-btn" set="onclick: *historyBack">
      <lr-icon name="close"></lr-icon>
    </button>
  </lr-activity-header>
  <div class="content">
    <div ref="iframeWrapper" class="iframe-wrapper"></div>
    <div class="toolbar">
      <button type="button" class="cancel-btn secondary-btn" set="onclick: onCancel" l10n="cancel"></button>
      <div></div>
      <div set="@hidden: !multiple" class="selected-counter"><span l10n="selected-count"></span>{{counter}}</div>
      <button type="button" class="done-btn primary-btn" set="onclick: onDone; @disabled: !counter">
        <lr-icon name="check"></lr-icon>
      </button>
    </div>
  </div>
`;class Uy extends Oe{setCurrentTab(e){if(!e)return;[...this.ref.context.querySelectorAll("[tab-ctx]")].forEach(r=>{r.getAttribute("tab-ctx")===e?r.removeAttribute("hidden"):r.setAttribute("hidden","")});for(let r in this._tabMap)r===e?this._tabMap[r].setAttribute("current",""):this._tabMap[r].removeAttribute("current")}initCallback(){super.initCallback(),this._tabMap={},this.defineAccessor("tab-list",e=>{if(!e)return;Gr(e).forEach(r=>{let i=my({tag:"div",attributes:{class:"tab"},properties:{onclick:()=>{this.setCurrentTab(r)}}});i.textContent=this.l10n(r),this.ref.row.appendChild(i),this._tabMap[r]=i})}),this.defineAccessor("default",e=>{this.setCurrentTab(e)}),this.hasAttribute("default")||this.setCurrentTab(Object.keys(this._tabMap)[0])}}Uy.bindAttributes({"tab-list":null,default:null});Uy.template=`
  <div ref="row" class="tabs-row"></div>
  <div ref="context" class="tabs-context">
    <slot></slot>
  </div>
`;class f$ extends Ke{constructor(){super(...arguments);V(this,"requireCtxName",!0)}_createValidationInput(){const n=document.createElement("input");return n.type="text",n.name=this.ctxName,n.required=this.cfg.multipleMin>0,n.tabIndex=-1,oI(n,{opacity:0,height:0,width:0}),n}initCallback(){super.initCallback(),this._validationInputElement=this._createValidationInput(),this.appendChild(this._validationInputElement),this.sub("*collectionState",n=>{var r;{if(this._dynamicInputsContainer||(this._dynamicInputsContainer=document.createElement("div"),this.appendChild(this._dynamicInputsContainer)),!this._validationInputElement){const a=this._createValidationInput();this.appendChild(a),this._validationInputElement=a}if(this._dynamicInputsContainer.innerHTML="",n.status==="uploading"||n.status==="idle"){this._validationInputElement.value="",this._validationInputElement.setCustomValidity("");return}if(n.status==="failed"){const a=(r=n.errors[0])==null?void 0:r.message;this._validationInputElement.value="",this._validationInputElement.setCustomValidity(a);return}const i=n.group?n.group:null;if(i){this._validationInputElement.value=i.cdnUrl,this._validationInputElement.setCustomValidity("");return}const s=n.allEntries.map(a=>a.cdnUrl);if(!this.cfg.multiple&&s.length===1){this._validationInputElement.value=s[0],this._validationInputElement.setCustomValidity("");return}this._validationInputElement.remove(),this._validationInputElement=null;const o=new DocumentFragment;for(let a of s){const l=document.createElement("input");l.type="hidden",l.name=`${this.ctxName}[]`,l.value=a,o.appendChild(l)}this._dynamicInputsContainer.replaceChildren(o)}},!1)}}class p$ extends fe{}class vS extends Oe{constructor(){super(...arguments);V(this,"init$",{...this.init$,currentText:"",options:[],selectHtml:"",onSelect:n=>{var r;n.preventDefault(),n.stopPropagation(),this.value=this.ref.select.value,this.$.currentText=((r=this.$.options.find(i=>i.value==this.value))==null?void 0:r.text)||"",this.dispatchEvent(new Event("change"))}})}initCallback(){super.initCallback(),this.sub("options",n=>{var i;this.$.currentText=((i=n==null?void 0:n[0])==null?void 0:i.text)||"";let r="";n==null||n.forEach(s=>{r+=`<option value="${s.value}">${s.text}</option>`}),this.$.selectHtml=r})}}vS.template=`
  <button>
    {{currentText}}
    <lr-icon name="select"></lr-icon>
    <select ref="select" set="innerHTML: selectHtml; onchange: onSelect"></select>
  </button>
`;const en={PLAY:"play",PAUSE:"pause",FS_ON:"fullscreen-on",FS_OFF:"fullscreen-off",VOL_ON:"unmute",VOL_OFF:"mute",CAP_ON:"captions",CAP_OFF:"captions-off"},jw={requestFullscreen:t=>{t.requestFullscreen?t.requestFullscreen():t.webkitRequestFullscreen&&t.webkitRequestFullscreen()},exitFullscreen:()=>{document.exitFullscreen?document.exitFullscreen():document.webkitExitFullscreen&&document.webkitExitFullscreen()}};class kr extends Oe{constructor(){super(...arguments);V(this,"init$",{...this.init$,src:"",ppIcon:en.PLAY,fsIcon:en.FS_ON,volIcon:en.VOL_ON,capIcon:en.CAP_OFF,totalTime:"00:00",currentTime:"00:00",progressCssWidth:"0",hasSubtitles:!1,volumeDisabled:!1,volumeValue:0,onPP:()=>{this.togglePlay()},onFs:()=>{this.toggleFullscreen()},onCap:()=>{this.toggleCaptions()},onMute:()=>{this.toggleSound()},onVolChange:n=>{let r=parseFloat(n.currentTarget.$.value);this.setVolume(r)},progressClicked:n=>{let r=this.progress.getBoundingClientRect();this._video.currentTime=this._video.duration*(n.offsetX/r.width)}})}togglePlay(){this._video.paused||this._video.ended?this._video.play():this._video.pause()}toggleFullscreen(){(document.fullscreenElement||document.webkitFullscreenElement)===this?jw.exitFullscreen():jw.requestFullscreen(this)}toggleCaptions(){this.$.capIcon===en.CAP_OFF?(this.$.capIcon=en.CAP_ON,this._video.textTracks[0].mode="showing",window.localStorage.setItem(kr.is+":captions","1")):(this.$.capIcon=en.CAP_OFF,this._video.textTracks[0].mode="hidden",window.localStorage.removeItem(kr.is+":captions"))}toggleSound(){this.$.volIcon===en.VOL_ON?(this.$.volIcon=en.VOL_OFF,this.$.volumeDisabled=!0,this._video.muted=!0):(this.$.volIcon=en.VOL_ON,this.$.volumeDisabled=!1,this._video.muted=!1)}setVolume(n){window.localStorage.setItem(kr.is+":volume",n);let r=n?n/100:0;this._video.volume=r}get progress(){return this.ref.progress}_getUrl(n){return n.includes("/")?n:`https://ucarecdn.com/${n}/`}_desc2attrs(n){let r=[];for(let i in n){let s=i==="src"?this._getUrl(n[i]):n[i];r.push(`${i}="${s}"`)}return r.join(" ")}_timeFmt(n){let r=new Date(Math.round(n)*1e3);return[r.getMinutes(),r.getSeconds()].map(i=>i<10?"0"+i:i).join(":")}_initTracks(){[...this._video.textTracks].forEach(n=>{n.mode="hidden"}),window.localStorage.getItem(kr.is+":captions")&&this.toggleCaptions()}_castAttributes(){let n=["autoplay","loop","muted"];[...this.attributes].forEach(r=>{n.includes(r.name)&&this._video.setAttribute(r.name,r.value)})}initCallback(){super.initCallback(),this._video=this.ref.video,this._castAttributes(),this._video.addEventListener("play",()=>{this.$.ppIcon=en.PAUSE,this.setAttribute("playback","")}),this._video.addEventListener("pause",()=>{this.$.ppIcon=en.PLAY,this.removeAttribute("playback")}),this.addEventListener("fullscreenchange",r=>{console.log(r),document.fullscreenElement===this?this.$.fsIcon=en.FS_OFF:this.$.fsIcon=en.FS_ON}),this.sub("src",r=>{if(!r)return;let i=this._getUrl(r);this._video.src=i}),this.sub("video",async r=>{if(!r)return;let i=await(await window.fetch(this._getUrl(r))).json();i.poster&&(this._video.poster=this._getUrl(i.poster));let s="";i==null||i.sources.forEach(o=>{s+=`<source ${this._desc2attrs(o)} />`}),i.tracks&&(i.tracks.forEach(o=>{s+=`<track ${this._desc2attrs(o)} />`}),this.$.hasSubtitles=!0),this._video.innerHTML+=s,this._initTracks(),console.log(i)}),this._video.addEventListener("loadedmetadata",r=>{this.$.currentTime=this._timeFmt(this._video.currentTime),this.$.totalTime=this._timeFmt(this._video.duration)}),this._video.addEventListener("timeupdate",r=>{let i=Math.round(100*(this._video.currentTime/this._video.duration));this.$.progressCssWidth=i+"%",this.$.currentTime=this._timeFmt(this._video.currentTime)});let n=window.localStorage.getItem(kr.is+":volume");if(n){let r=parseFloat(n);this.setVolume(r),this.$.volumeValue=r}}}kr.template=`
  <div class="video-wrapper">
    <video ref="video" preload="metadata" crossorigin="anonymous"></video>
  </div>

  <div class="toolbar">
    <div class="progress" ref="progress" set -onclick="progressClicked">
      <div class="bar" set -style.width="progressCssWidth"></div>
    </div>

    <div class="tb-block">
      <button set -onclick="onPP">
        <lr-icon set -@name="ppIcon"></lr-icon>
      </button>
      <div class="timer">{{currentTime}} / {{totalTime}}</div>
    </div>

    <div class="tb-block">
      <button set -onclick="onCap" -@hidden="!hasSubtitles">
        <lr-icon set -@name="capIcon"></lr-icon>
      </button>

      <button set -onclick="onMute">
        <lr-icon set -@name="volIcon"></lr-icon>
      </button>

      <lr-range type="range" set -onchange="onVolChange" -@disabled="volumeDisabled" -value="volumeValue"> </lr-range>

      <button set -onclick="onFs">
        <lr-icon set -@name="fsIcon"></lr-icon>
      </button>
    </div>
  </div>
`;kr.bindAttributes({video:"video",src:"src"});class _S extends Oe{initCallback(){super.initCallback(),this.subConfigValue("removeCopyright",e=>{this.toggleAttribute("hidden",!!e)})}}V(_S,"template",`
    <a
      href="https://uploadcare.com/?utm_source=copyright&utm_medium=referral&utm_campaign=v4"
      target="_blank noopener"
      class="credits"
      >Powered by Uploadcare</a
    >
  `);class $y extends Oe{constructor(){super(...arguments);V(this,"requireCtxName",!0);V(this,"init$",CI(this));V(this,"_template",null)}static set template(n){this._template=n+"<slot></slot>"}static get template(){return this._template}}class Fy extends $y{initCallback(){super.initCallback(),this.sub("*modalActive",e=>{this._lastModalActive!==e&&this.emit(e?tt.MODAL_OPEN:tt.MODAL_CLOSE,void 0,{debounce:!0}),this._lastModalActive=e},!1)}}Fy.template=`
  <lr-simple-btn></lr-simple-btn>

  <lr-modal strokes block-body-scrolling>
    <lr-start-from>
      <lr-drop-area with-icon clickable></lr-drop-area>
      <lr-source-list wrap></lr-source-list>
      <button type="button" l10n="start-from-cancel" class="secondary-btn" set="onclick: *historyBack"></button>
      <lr-copyright></lr-copyright>
    </lr-start-from>
    <lr-upload-list></lr-upload-list>
    <lr-camera-source></lr-camera-source>
    <lr-url-source></lr-url-source>
    <lr-external-source></lr-external-source>
    <lr-cloud-image-editor-activity></lr-cloud-image-editor-activity>
  </lr-modal>

  <lr-progress-bar-common></lr-progress-bar-common>
`;class Nd extends $y{initCallback(){super.initCallback();const e=this.ref.uBlock;this.sub("*currentActivity",n=>{n||(this.$["*currentActivity"]=e.initActivity||fe.activities.START_FROM)}),this.sub("*uploadList",n=>{(n==null?void 0:n.length)>0?this.$["*currentActivity"]=fe.activities.UPLOAD_LIST:this.$["*currentActivity"]=e.initActivity||fe.activities.START_FROM}),this.subConfigValue("sourceList",n=>{n!=="local"&&(this.cfg.sourceList="local")}),this.subConfigValue("confirmUpload",n=>{n!==!1&&(this.cfg.confirmUpload=!1)})}}Nd.template=`
  <lr-start-from>
    <lr-drop-area clickable l10n="choose-file"></lr-drop-area>
    <lr-copyright></lr-copyright>
  </lr-start-from>
  <lr-upload-list ref="uBlock"></lr-upload-list>
`;class wS extends $y{constructor(){super(),this.init$={...this.init$,couldCancel:!1,cancel:()=>{this.couldHistoryBack?this.$["*historyBack"]():this.couldShowList&&(this.$["*currentActivity"]=fe.activities.UPLOAD_LIST)}}}get couldHistoryBack(){const e=this.$["*history"];return e.length>1&&e[e.length-1]!==fe.activities.START_FROM}get couldShowList(){return this.cfg.showEmptyList||this.$["*uploadList"].length>0}initCallback(){super.initCallback();const e=this.ref.uBlock;this.sub("*currentActivity",n=>{n||(this.$["*currentActivity"]=e.initActivity||fe.activities.START_FROM)}),this.sub("*uploadList",n=>{(n==null?void 0:n.length)>0&&this.$["*currentActivity"]===(e.initActivity||fe.activities.START_FROM)&&(this.$["*currentActivity"]=fe.activities.UPLOAD_LIST)}),this.sub("*history",()=>{this.$.couldCancel=this.couldHistoryBack||this.couldShowList})}}wS.template=` <lr-start-from>
    <lr-drop-area with-icon clickable></lr-drop-area>
    <lr-source-list wrap></lr-source-list>
    <button
      type="button"
      l10n="start-from-cancel"
      class="cancel-btn secondary-btn"
      set="onclick: cancel; @hidden: !couldCancel"
    ></button>
    <lr-copyright></lr-copyright>
  </lr-start-from>
  <lr-upload-list ref="uBlock"></lr-upload-list>
  <lr-camera-source></lr-camera-source>
  <lr-url-source></lr-url-source>
  <lr-external-source></lr-external-source>
  <lr-progress-bar></lr-progress-bar>
  <lr-cloud-image-editor-activity></lr-cloud-image-editor-activity>`;class m$ extends Ca{initCallback(){super.initCallback(),this.__shadowReady=!0,this.$["*faderEl"]=this.ref["fader-el"],this.$["*cropperEl"]=this.ref["cropper-el"],this.$["*imgContainerEl"]=this.ref["img-container-el"],this.initEditor()}async initEditor(){this.__shadowReady&&await super.initEditor()}}function Pu(t){for(let e in t){let n=[...e].reduce((r,i)=>(i.toUpperCase()===i&&(i="-"+i.toLowerCase()),r+=i),"");n.startsWith("-")&&(n=n.replace("-","")),n.startsWith("lr-")||(n="lr-"+n),t[e].reg&&t[e].reg(n)}}const $f="LR";async function g$(t,e=!1){return new Promise((n,r)=>{if(typeof document!="object"){n(null);return}if(typeof window=="object"&&window[$f]){n(window[$f]);return}let i=document.createElement("script");i.async=!0,i.src=t,i.onerror=()=>{r()},i.onload=()=>{let s=window[$f];e&&Pu(s),n(s)},document.head.appendChild(i)})}const jy=Object.freeze(Object.defineProperty({__proto__:null,ActivityBlock:fe,ActivityHeader:p$,BaseComponent:Td,Block:Oe,CameraSource:tS,CloudImageEditor:m$,CloudImageEditorActivity:s$,CloudImageEditorBlock:Ca,Config:$I,ConfirmationDialog:rS,Copyright:_S,CropFrame:aS,Data:xe,DropArea:Py,EditorCropButtonControl:lS,EditorFilterControl:Dy,EditorImageCropper:hS,EditorImageFader:t$,EditorOperationControl:cS,EditorScroller:dS,EditorSlider:uS,EditorToolbar:fS,ExternalSource:yS,FileItem:Ss,FilePreview:Ly,FileUploaderInline:wS,FileUploaderMinimal:Nd,FileUploaderRegular:Fy,FormInput:f$,Icon:xy,Img:sU,LineLoaderUi:pS,LrBtnUi:Vy,Modal:Oy,PACKAGE_NAME:by,PACKAGE_VERSION:Ty,PresenceToggle:mS,ProgressBar:sS,ProgressBarCommon:iS,Select:vS,SimpleBtn:ky,SliderUi:gS,SourceBtn:Ry,SourceList:dU,StartFrom:jI,Tabs:Uy,UID:xu,UploadCtxProvider:mm,UploadList:ZI,UploaderBlock:Ke,UrlSource:eS,Video:kr,connectBlocksFrom:g$,defineLocale:SI,registerBlocks:Pu,toKebabCase:Rd},Symbol.toStringTag,{value:"Module"})),y$=new Set(["children","ref","style","className"]),v$=(t={})=>Object==null?void 0:Object.keys(t).reduce((e,n)=>{var r,i;const s=t==null?void 0:t[n],o=`on${(i=(r=s==null?void 0:s.split("-"))==null?void 0:r.map(a=>a.charAt(0).toUpperCase()+a.slice(1)))==null?void 0:i.join("")}`;return e[o]=s,e},{}),zw=new WeakMap,_$=t=>{let e=zw.get(t);return e===void 0&&(e=new Map,zw.set(t,e)),e},Bw=({node:t,nameProp:e,valueProp:n,prevValueProp:r,event:i})=>{if(i!==void 0){if(n!==r){const s=_$(t),o=s.has(i);let a=s.get(i);n!==void 0?o?a.handleEvent=n:(a={handleEvent:n},s.set(i,a),t.addEventListener(i,l=>a.handleEvent(l.detail))):o&&(s.delete(i),t.removeEventListener(i,a))}return}t[e]=n,n==null&&e in HTMLElement.prototype&&t.removeAttribute(e)},w$=(t,e,n)=>{const r={},i={};return Object.entries(t).forEach(([s,o])=>{y$.has(s)?r[s==="className"?"class":s]=o:e.has(s)||s in n.prototype?i[s]=o:r[s]=o}),{reactProps:r,customElProps:i}},Ru=({react:t,tag:e,elClass:n,schemaEvents:r})=>{const i=v$(r),s=new Set(Object.keys(i??{})),o=t.forwardRef((a,l)=>{const c=t.useRef(new Map),h=t.useRef(null),{reactProps:f,customElProps:p}=w$(a,s,n);return t.useLayoutEffect(()=>{if(h.current===null)return;const w=new Map;for(const E in p)Bw({node:h.current,nameProp:E,valueProp:p[E],prevValueProp:c.current.get(E),event:i[E]}),c.current.delete(E),w.set(E,a[E]);for(const[E,S]of c.current)Bw({node:h.current,nameProp:E,valueProp:void 0,prevValueProp:S,event:i[E]});c.current=w}),t.createElement(e??n.__tag,{...f,ref:t.useCallback(w=>{h.current=w,typeof l=="function"?l(w):l!==null&&(l.current=w)},[l])})});return o.displayName=n.name,o},E$=Ru({react:Qt,tag:"lr-config",elClass:$I}),b$=Ru({react:Qt,tag:"lr-upload-ctx-provider",elClass:mm,schemaEvents:mm.EventType}),T$=t=>{const e={},n={};return Object.entries(t).forEach(([r,i])=>{r.startsWith("on")?e[r]=i:n[r]=i}),{eventHandlers:e,config:n}},C$="0.5.2",I$="React-Uploader",S$=()=>`${I$}/${C$}`,A$=({condition:t,fallback:e,children:n,...r})=>t?Qt.createElement(D.Suspense,{fallback:e,...r},n):Qt.createElement(Qt.Fragment,null,e),x$=()=>{const[t,e]=D.useState(!1);return D.useEffect(()=>{typeof window<"u"&&e(!0)},[]),t};Pu(jy);const k$=Ru({react:Qt,tag:"lr-file-uploader-regular",elClass:Fy}),P$=({ctxName:t,className:e,classNameUploader:n,apiRef:r,fallback:i,...s})=>{const o=D.useMemo(()=>t??xu.generate(),[t]),{eventHandlers:a,config:l}=D.useMemo(()=>T$(s),[s]),c=x$();return Qt.createElement(A$,{condition:c,fallback:i},Qt.createElement("div",{className:e},Qt.createElement(E$,{userAgentIntegration:S$(),"ctx-name":o,...l}),Qt.createElement(b$,{ref:r,"ctx-name":o,...a}),Qt.createElement(k$,{class:n,"ctx-name":o})))};Pu(jy);Ru({react:Qt,tag:"lr-file-uploader-minimal",elClass:Nd});Pu(jy);Ru({react:Qt,tag:"lr-file-uploader-inline",elClass:Nd});const R$=({fileEntry:t,onChange:e})=>{const n=D.useRef(null),r=o=>{const a=o.successEntries.map(l=>({cdnUrl:l.cdnUrl||null,uuid:l.uuid||null}));e({files:a}),console.log("The uploaded file event is: ",a)},i=D.useCallback(o=>e({files:t.files.filter(a=>a.uuid!==o)}),[t.files,e]),s=()=>{var o;(o=n.current)==null||o.uploadCollection.clearAll(),e({files:[]})};return R.jsxs("div",{children:[R.jsx(P$,{maxLocalFileSizeBytes:1e7,multipleMax:50,imgOnly:!0,sourceList:"local, url, camera, dropbox, instagram",removeCopyright:!0,confirmUpload:!1,onChange:r,pubkey:"e70c89d72eb677ec70b2"}),R.jsx("div",{className:"grid grid-cols-2 gap-4 mt-8",children:t.files.map(o=>R.jsxs("div",{className:"relative",children:[R.jsx("img",{src:`${o.cdnUrl}/-/format/webp/-/quality/smart/-/stretch/fill/
              `,alt:o.uuid??""}),R.jsx("div",{className:"cursor-pointer flex justify-center absolute -right-2 -top-2 bg-white border-2 border-slate-800  rounded-full w-7 h-7",children:R.jsx("button",{className:"text-slate-800 text-center",type:"button",onClick:()=>i(o.uuid),children:""})}),R.jsx("button",{onClick:s,children:"test"})]},o.uuid))})]})},ES=D.forwardRef(({className:t,...e},n)=>R.jsx("textarea",{className:Ln("flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",t),ref:n,...e}));ES.displayName="Textarea";const O$=()=>{const{user:t}=Au(),e=du(),[n,r]=D.useState({files:[]}),[i,s]=D.useState({caption:"",photos:[],likes:0,userLikes:[],userId:"",date:new Date}),o=async a=>{a.preventDefault(),console.log("Uploaded File Entry: ",n.files),console.log("The create post is: ",i);const l=n.files.map(c=>({cdnUrl:c.cdnUrl,uuid:c.uuid}));if(t!==null){const c={...i,photos:l,userId:(t==null?void 0:t.uid)||null};console.log("The final post:",c),await a3(c),e("/edelgram/")}else e("/edelgram/login")};return R.jsx(bd,{children:R.jsx("div",{className:"flex justify-center",children:R.jsxs("div",{className:"border max-w-3xl w-full",children:[R.jsx("h3",{className:"bg-slate-800 text-white text-center text-lg p-2",children:"Create post"}),R.jsx("div",{className:"p-8",children:R.jsx("form",{onSubmit:o,children:R.jsxs("div",{className:"flex flex-col",children:[R.jsx(Mi,{className:"mb-4",htmlFor:"caption",children:"Photo caption"}),R.jsx(ES,{className:"mb-8",id:"caption",placeholder:"Write something....",value:i.caption,onChange:a=>s({...i,caption:a.target.value})}),R.jsxs("div",{className:"flex flex-col",children:[R.jsx(Mi,{className:"mb-4",htmlFor:"photo",children:"Photos"}),R.jsx(R$,{fileEntry:n,onChange:r})]}),R.jsx(Yo,{className:"mt-8 w-32",type:"submit",children:"Post"})]})})})]})})})};/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */function L$(t,e,n,r){function i(s){return s instanceof n?s:new n(function(o){o(s)})}return new(n||(n=Promise))(function(s,o){function a(h){try{c(r.next(h))}catch(f){o(f)}}function l(h){try{c(r.throw(h))}catch(f){o(f)}}function c(h){h.done?s(h.value):i(h.value).then(a,l)}c((r=r.apply(t,[])).next())})}function N$(t,e){var n={label:0,sent:function(){if(s[0]&1)throw s[1];return s[1]},trys:[],ops:[]},r,i,s,o;return o={next:a(0),throw:a(1),return:a(2)},typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function a(c){return function(h){return l([c,h])}}function l(c){if(r)throw new TypeError("Generator is already executing.");for(;n;)try{if(r=1,i&&(s=c[0]&2?i.return:c[0]?i.throw||((s=i.return)&&s.call(i),0):i.next)&&!(s=s.call(i,c[1])).done)return s;switch(i=0,s&&(c=[c[0]&2,s.value]),c[0]){case 0:case 1:s=c;break;case 4:return n.label++,{value:c[1],done:!1};case 5:n.label++,i=c[1],c=[0];continue;case 7:c=n.ops.pop(),n.trys.pop();continue;default:if(s=n.trys,!(s=s.length>0&&s[s.length-1])&&(c[0]===6||c[0]===2)){n=0;continue}if(c[0]===3&&(!s||c[1]>s[0]&&c[1]<s[3])){n.label=c[1];break}if(c[0]===6&&n.label<s[1]){n.label=s[1],s=c;break}if(s&&n.label<s[2]){n.label=s[2],n.ops.push(c);break}s[2]&&n.ops.pop(),n.trys.pop();continue}c=e.call(t,n)}catch(h){c=[6,h],i=0}finally{r=s=0}if(c[0]&5)throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}}/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var Po=function(){return Po=Object.assign||function(e){for(var n,r=1,i=arguments.length;r<i;r++){n=arguments[r];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},Po.apply(this,arguments)},bS=function(t){return{loading:t==null,value:t}},D$=function(){return function(t,e){switch(e.type){case"error":return Po(Po({},t),{error:e.error,loading:!1,value:void 0});case"reset":return bS(e.defaultValue);case"value":return Po(Po({},t),{error:void 0,loading:!1,value:e.value});default:return t}}},M$=function(t){var e=t?t():void 0,n=D.useReducer(D$(),bS(e)),r=n[0],i=n[1],s=D.useCallback(function(){var l=t?t():void 0;i({type:"reset",defaultValue:l})},[t]),o=D.useCallback(function(l){i({type:"error",error:l})},[]),a=D.useCallback(function(l){i({type:"value",value:l})},[]);return D.useMemo(function(){return{error:r.error,loading:r.loading,reset:s,setError:o,setValue:a,value:r.value}},[r.error,r.loading,s,o,a,r.value])},V$=function(t,e){var n=M$(function(){return t.currentUser}),r=n.error,i=n.loading,s=n.setError,o=n.setValue,a=n.value;return D.useEffect(function(){var l=aT(t,function(c){return L$(void 0,void 0,void 0,function(){var h;return N$(this,function(f){switch(f.label){case 0:return[3,4];case 1:return f.trys.push([1,3,,4]),[4,e.onUserChanged(c)];case 2:return f.sent(),[3,4];case 3:return h=f.sent(),s(h),[3,4];case 4:return o(c),[2]}})})},s);return function(){l()}},[t]),[a,i,r]};const U$=()=>{const t=_T(),[e,n]=V$(t),r=Bs();return n?R.jsx("div",{children:"Loading..."}):e?R.jsx(xk,{}):R.jsx(Ak,{to:"edelgram/login",state:{from:r}})},$$=Mk([{element:R.jsx(U$,{}),children:[{path:"/edelgram/",element:R.jsx(e3,{}),errorElement:R.jsx(ao,{})},{path:"/edelgram/myphotos",element:R.jsx(m3,{}),errorElement:R.jsx(ao,{})},{path:"/edelgram/createpost",element:R.jsx(O$,{}),errorElement:R.jsx(ao,{})},{path:"/edelgram/profile",element:R.jsx(g3,{}),errorElement:R.jsx(ao,{})}]},{path:"/edelgram/login",element:R.jsx(o3,{}),errorElement:R.jsx(ao,{})},{path:"/edelgram/signup",element:R.jsx(v3,{}),errorElement:R.jsx(ao,{})}]),F$=()=>R.jsx(XM,{children:R.jsx(Wk,{router:$$})});Ff.createRoot(document.getElementById("root")).render(R.jsx(Qt.StrictMode,{children:R.jsx(F$,{})}));
