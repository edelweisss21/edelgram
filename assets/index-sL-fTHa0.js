var nS=Object.defineProperty;var rS=(t,e,n)=>e in t?nS(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n;var V=(t,e,n)=>(rS(t,typeof e!="symbol"?e+"":e,n),n);function u1(t,e){for(var n=0;n<e.length;n++){const r=e[n];if(typeof r!="string"&&!Array.isArray(r)){for(const i in r)if(i!=="default"&&!(i in t)){const s=Object.getOwnPropertyDescriptor(r,i);s&&Object.defineProperty(t,i,s.get?s:{enumerable:!0,get:()=>r[i]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerPolicy&&(s.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?s.credentials="include":i.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(i){if(i.ep)return;i.ep=!0;const s=n(i);fetch(i.href,s)}})();function c1(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var h1={exports:{}},zh={},d1={exports:{}},ve={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var du=Symbol.for("react.element"),iS=Symbol.for("react.portal"),sS=Symbol.for("react.fragment"),oS=Symbol.for("react.strict_mode"),aS=Symbol.for("react.profiler"),lS=Symbol.for("react.provider"),uS=Symbol.for("react.context"),cS=Symbol.for("react.forward_ref"),hS=Symbol.for("react.suspense"),dS=Symbol.for("react.memo"),fS=Symbol.for("react.lazy"),Vv=Symbol.iterator;function pS(t){return t===null||typeof t!="object"?null:(t=Vv&&t[Vv]||t["@@iterator"],typeof t=="function"?t:null)}var f1={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},p1=Object.assign,m1={};function pa(t,e,n){this.props=t,this.context=e,this.refs=m1,this.updater=n||f1}pa.prototype.isReactComponent={};pa.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};pa.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function g1(){}g1.prototype=pa.prototype;function Lm(t,e,n){this.props=t,this.context=e,this.refs=m1,this.updater=n||f1}var Dm=Lm.prototype=new g1;Dm.constructor=Lm;p1(Dm,pa.prototype);Dm.isPureReactComponent=!0;var Uv=Array.isArray,y1=Object.prototype.hasOwnProperty,Mm={current:null},v1={key:!0,ref:!0,__self:!0,__source:!0};function _1(t,e,n){var r,i={},s=null,o=null;if(e!=null)for(r in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(s=""+e.key),e)y1.call(e,r)&&!v1.hasOwnProperty(r)&&(i[r]=e[r]);var a=arguments.length-2;if(a===1)i.children=n;else if(1<a){for(var l=Array(a),c=0;c<a;c++)l[c]=arguments[c+2];i.children=l}if(t&&t.defaultProps)for(r in a=t.defaultProps,a)i[r]===void 0&&(i[r]=a[r]);return{$$typeof:du,type:t,key:s,ref:o,props:i,_owner:Mm.current}}function mS(t,e){return{$$typeof:du,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function Vm(t){return typeof t=="object"&&t!==null&&t.$$typeof===du}function gS(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var $v=/\/+/g;function lf(t,e){return typeof t=="object"&&t!==null&&t.key!=null?gS(""+t.key):e.toString(36)}function Sc(t,e,n,r,i){var s=typeof t;(s==="undefined"||s==="boolean")&&(t=null);var o=!1;if(t===null)o=!0;else switch(s){case"string":case"number":o=!0;break;case"object":switch(t.$$typeof){case du:case iS:o=!0}}if(o)return o=t,i=i(o),t=r===""?"."+lf(o,0):r,Uv(i)?(n="",t!=null&&(n=t.replace($v,"$&/")+"/"),Sc(i,e,n,"",function(c){return c})):i!=null&&(Vm(i)&&(i=mS(i,n+(!i.key||o&&o.key===i.key?"":(""+i.key).replace($v,"$&/")+"/")+t)),e.push(i)),1;if(o=0,r=r===""?".":r+":",Uv(t))for(var a=0;a<t.length;a++){s=t[a];var l=r+lf(s,a);o+=Sc(s,e,n,l,i)}else if(l=pS(t),typeof l=="function")for(t=l.call(t),a=0;!(s=t.next()).done;)s=s.value,l=r+lf(s,a++),o+=Sc(s,e,n,l,i);else if(s==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return o}function Yu(t,e,n){if(t==null)return t;var r=[],i=0;return Sc(t,r,"","",function(s){return e.call(n,s,i++)}),r}function yS(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var Jt={current:null},Ac={transition:null},vS={ReactCurrentDispatcher:Jt,ReactCurrentBatchConfig:Ac,ReactCurrentOwner:Mm};function w1(){throw Error("act(...) is not supported in production builds of React.")}ve.Children={map:Yu,forEach:function(t,e,n){Yu(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return Yu(t,function(){e++}),e},toArray:function(t){return Yu(t,function(e){return e})||[]},only:function(t){if(!Vm(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};ve.Component=pa;ve.Fragment=sS;ve.Profiler=aS;ve.PureComponent=Lm;ve.StrictMode=oS;ve.Suspense=hS;ve.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=vS;ve.act=w1;ve.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var r=p1({},t.props),i=t.key,s=t.ref,o=t._owner;if(e!=null){if(e.ref!==void 0&&(s=e.ref,o=Mm.current),e.key!==void 0&&(i=""+e.key),t.type&&t.type.defaultProps)var a=t.type.defaultProps;for(l in e)y1.call(e,l)&&!v1.hasOwnProperty(l)&&(r[l]=e[l]===void 0&&a!==void 0?a[l]:e[l])}var l=arguments.length-2;if(l===1)r.children=n;else if(1<l){a=Array(l);for(var c=0;c<l;c++)a[c]=arguments[c+2];r.children=a}return{$$typeof:du,type:t.type,key:i,ref:s,props:r,_owner:o}};ve.createContext=function(t){return t={$$typeof:uS,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:lS,_context:t},t.Consumer=t};ve.createElement=_1;ve.createFactory=function(t){var e=_1.bind(null,t);return e.type=t,e};ve.createRef=function(){return{current:null}};ve.forwardRef=function(t){return{$$typeof:cS,render:t}};ve.isValidElement=Vm;ve.lazy=function(t){return{$$typeof:fS,_payload:{_status:-1,_result:t},_init:yS}};ve.memo=function(t,e){return{$$typeof:dS,type:t,compare:e===void 0?null:e}};ve.startTransition=function(t){var e=Ac.transition;Ac.transition={};try{t()}finally{Ac.transition=e}};ve.unstable_act=w1;ve.useCallback=function(t,e){return Jt.current.useCallback(t,e)};ve.useContext=function(t){return Jt.current.useContext(t)};ve.useDebugValue=function(){};ve.useDeferredValue=function(t){return Jt.current.useDeferredValue(t)};ve.useEffect=function(t,e){return Jt.current.useEffect(t,e)};ve.useId=function(){return Jt.current.useId()};ve.useImperativeHandle=function(t,e,n){return Jt.current.useImperativeHandle(t,e,n)};ve.useInsertionEffect=function(t,e){return Jt.current.useInsertionEffect(t,e)};ve.useLayoutEffect=function(t,e){return Jt.current.useLayoutEffect(t,e)};ve.useMemo=function(t,e){return Jt.current.useMemo(t,e)};ve.useReducer=function(t,e,n){return Jt.current.useReducer(t,e,n)};ve.useRef=function(t){return Jt.current.useRef(t)};ve.useState=function(t){return Jt.current.useState(t)};ve.useSyncExternalStore=function(t,e,n){return Jt.current.useSyncExternalStore(t,e,n)};ve.useTransition=function(){return Jt.current.useTransition()};ve.version="18.3.1";d1.exports=ve;var L=d1.exports;const Xt=c1(L),_S=u1({__proto__:null,default:Xt},[L]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var wS=L,ES=Symbol.for("react.element"),bS=Symbol.for("react.fragment"),TS=Object.prototype.hasOwnProperty,CS=wS.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,IS={key:!0,ref:!0,__self:!0,__source:!0};function E1(t,e,n){var r,i={},s=null,o=null;n!==void 0&&(s=""+n),e.key!==void 0&&(s=""+e.key),e.ref!==void 0&&(o=e.ref);for(r in e)TS.call(e,r)&&!IS.hasOwnProperty(r)&&(i[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps,e)i[r]===void 0&&(i[r]=e[r]);return{$$typeof:ES,type:t,key:s,ref:o,props:i,_owner:CS.current}}zh.Fragment=bS;zh.jsx=E1;zh.jsxs=E1;h1.exports=zh;var A=h1.exports,tp={},b1={exports:{}},wn={},T1={exports:{}},C1={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(H,ee){var re=H.length;H.push(ee);e:for(;0<re;){var _e=re-1>>>1,he=H[_e];if(0<i(he,ee))H[_e]=ee,H[re]=he,re=_e;else break e}}function n(H){return H.length===0?null:H[0]}function r(H){if(H.length===0)return null;var ee=H[0],re=H.pop();if(re!==ee){H[0]=re;e:for(var _e=0,he=H.length,Pe=he>>>1;_e<Pe;){var qt=2*(_e+1)-1,ht=H[qt],Et=qt+1,bt=H[Et];if(0>i(ht,re))Et<he&&0>i(bt,ht)?(H[_e]=bt,H[Et]=re,_e=Et):(H[_e]=ht,H[qt]=re,_e=qt);else if(Et<he&&0>i(bt,re))H[_e]=bt,H[Et]=re,_e=Et;else break e}}return ee}function i(H,ee){var re=H.sortIndex-ee.sortIndex;return re!==0?re:H.id-ee.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;t.unstable_now=function(){return s.now()}}else{var o=Date,a=o.now();t.unstable_now=function(){return o.now()-a}}var l=[],c=[],h=1,f=null,p=3,_=!1,E=!1,I=!1,R=typeof setTimeout=="function"?setTimeout:null,T=typeof clearTimeout=="function"?clearTimeout:null,w=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function C(H){for(var ee=n(c);ee!==null;){if(ee.callback===null)r(c);else if(ee.startTime<=H)r(c),ee.sortIndex=ee.expirationTime,e(l,ee);else break;ee=n(c)}}function D(H){if(I=!1,C(H),!E)if(n(l)!==null)E=!0,Wt(F);else{var ee=n(c);ee!==null&&wt(D,ee.startTime-H)}}function F(H,ee){E=!1,I&&(I=!1,T(y),y=-1),_=!0;var re=p;try{for(C(ee),f=n(l);f!==null&&(!(f.expirationTime>ee)||H&&!k());){var _e=f.callback;if(typeof _e=="function"){f.callback=null,p=f.priorityLevel;var he=_e(f.expirationTime<=ee);ee=t.unstable_now(),typeof he=="function"?f.callback=he:f===n(l)&&r(l),C(ee)}else r(l);f=n(l)}if(f!==null)var Pe=!0;else{var qt=n(c);qt!==null&&wt(D,qt.startTime-ee),Pe=!1}return Pe}finally{f=null,p=re,_=!1}}var z=!1,g=null,y=-1,b=5,S=-1;function k(){return!(t.unstable_now()-S<b)}function P(){if(g!==null){var H=t.unstable_now();S=H;var ee=!0;try{ee=g(!0,H)}finally{ee?x():(z=!1,g=null)}}else z=!1}var x;if(typeof w=="function")x=function(){w(P)};else if(typeof MessageChannel<"u"){var Ie=new MessageChannel,it=Ie.port2;Ie.port1.onmessage=P,x=function(){it.postMessage(null)}}else x=function(){R(P,0)};function Wt(H){g=H,z||(z=!0,x())}function wt(H,ee){y=R(function(){H(t.unstable_now())},ee)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(H){H.callback=null},t.unstable_continueExecution=function(){E||_||(E=!0,Wt(F))},t.unstable_forceFrameRate=function(H){0>H||125<H?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):b=0<H?Math.floor(1e3/H):5},t.unstable_getCurrentPriorityLevel=function(){return p},t.unstable_getFirstCallbackNode=function(){return n(l)},t.unstable_next=function(H){switch(p){case 1:case 2:case 3:var ee=3;break;default:ee=p}var re=p;p=ee;try{return H()}finally{p=re}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(H,ee){switch(H){case 1:case 2:case 3:case 4:case 5:break;default:H=3}var re=p;p=H;try{return ee()}finally{p=re}},t.unstable_scheduleCallback=function(H,ee,re){var _e=t.unstable_now();switch(typeof re=="object"&&re!==null?(re=re.delay,re=typeof re=="number"&&0<re?_e+re:_e):re=_e,H){case 1:var he=-1;break;case 2:he=250;break;case 5:he=1073741823;break;case 4:he=1e4;break;default:he=5e3}return he=re+he,H={id:h++,callback:ee,priorityLevel:H,startTime:re,expirationTime:he,sortIndex:-1},re>_e?(H.sortIndex=re,e(c,H),n(l)===null&&H===n(c)&&(I?(T(y),y=-1):I=!0,wt(D,re-_e))):(H.sortIndex=he,e(l,H),E||_||(E=!0,Wt(F))),H},t.unstable_shouldYield=k,t.unstable_wrapCallback=function(H){var ee=p;return function(){var re=p;p=ee;try{return H.apply(this,arguments)}finally{p=re}}}})(C1);T1.exports=C1;var SS=T1.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var AS=L,vn=SS;function W(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var I1=new Set,Dl={};function Ws(t,e){Go(t,e),Go(t+"Capture",e)}function Go(t,e){for(Dl[t]=e,t=0;t<e.length;t++)I1.add(e[t])}var $r=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),np=Object.prototype.hasOwnProperty,xS=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,Fv={},jv={};function kS(t){return np.call(jv,t)?!0:np.call(Fv,t)?!1:xS.test(t)?jv[t]=!0:(Fv[t]=!0,!1)}function PS(t,e,n,r){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function RS(t,e,n,r){if(e===null||typeof e>"u"||PS(t,e,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function Zt(t,e,n,r,i,s,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=s,this.removeEmptyString=o}var Ot={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){Ot[t]=new Zt(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];Ot[e]=new Zt(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){Ot[t]=new Zt(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){Ot[t]=new Zt(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){Ot[t]=new Zt(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){Ot[t]=new Zt(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){Ot[t]=new Zt(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){Ot[t]=new Zt(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){Ot[t]=new Zt(t,5,!1,t.toLowerCase(),null,!1,!1)});var Um=/[\-:]([a-z])/g;function $m(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(Um,$m);Ot[e]=new Zt(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(Um,$m);Ot[e]=new Zt(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(Um,$m);Ot[e]=new Zt(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){Ot[t]=new Zt(t,1,!1,t.toLowerCase(),null,!1,!1)});Ot.xlinkHref=new Zt("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){Ot[t]=new Zt(t,1,!1,t.toLowerCase(),null,!0,!0)});function Fm(t,e,n,r){var i=Ot.hasOwnProperty(e)?Ot[e]:null;(i!==null?i.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(RS(e,n,i,r)&&(n=null),r||i===null?kS(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):i.mustUseProperty?t[i.propertyName]=n===null?i.type===3?!1:"":n:(e=i.attributeName,r=i.attributeNamespace,n===null?t.removeAttribute(e):(i=i.type,n=i===3||i===4&&n===!0?"":""+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}var Kr=AS.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Ju=Symbol.for("react.element"),Eo=Symbol.for("react.portal"),bo=Symbol.for("react.fragment"),jm=Symbol.for("react.strict_mode"),rp=Symbol.for("react.profiler"),S1=Symbol.for("react.provider"),A1=Symbol.for("react.context"),zm=Symbol.for("react.forward_ref"),ip=Symbol.for("react.suspense"),sp=Symbol.for("react.suspense_list"),Bm=Symbol.for("react.memo"),di=Symbol.for("react.lazy"),x1=Symbol.for("react.offscreen"),zv=Symbol.iterator;function Ha(t){return t===null||typeof t!="object"?null:(t=zv&&t[zv]||t["@@iterator"],typeof t=="function"?t:null)}var Xe=Object.assign,uf;function ll(t){if(uf===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);uf=e&&e[1]||""}return`
`+uf+t}var cf=!1;function hf(t,e){if(!t||cf)return"";cf=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(c){var r=c}Reflect.construct(t,[],e)}else{try{e.call()}catch(c){r=c}t.call(e.prototype)}else{try{throw Error()}catch(c){r=c}t()}}catch(c){if(c&&r&&typeof c.stack=="string"){for(var i=c.stack.split(`
`),s=r.stack.split(`
`),o=i.length-1,a=s.length-1;1<=o&&0<=a&&i[o]!==s[a];)a--;for(;1<=o&&0<=a;o--,a--)if(i[o]!==s[a]){if(o!==1||a!==1)do if(o--,a--,0>a||i[o]!==s[a]){var l=`
`+i[o].replace(" at new "," at ");return t.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",t.displayName)),l}while(1<=o&&0<=a);break}}}finally{cf=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?ll(t):""}function NS(t){switch(t.tag){case 5:return ll(t.type);case 16:return ll("Lazy");case 13:return ll("Suspense");case 19:return ll("SuspenseList");case 0:case 2:case 15:return t=hf(t.type,!1),t;case 11:return t=hf(t.type.render,!1),t;case 1:return t=hf(t.type,!0),t;default:return""}}function op(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case bo:return"Fragment";case Eo:return"Portal";case rp:return"Profiler";case jm:return"StrictMode";case ip:return"Suspense";case sp:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case A1:return(t.displayName||"Context")+".Consumer";case S1:return(t._context.displayName||"Context")+".Provider";case zm:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case Bm:return e=t.displayName||null,e!==null?e:op(t.type)||"Memo";case di:e=t._payload,t=t._init;try{return op(t(e))}catch{}}return null}function OS(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return op(e);case 8:return e===jm?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function Fi(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function k1(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function LS(t){var e=k1(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var i=n.get,s=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return i.call(this)},set:function(o){r=""+o,s.call(this,o)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(o){r=""+o},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function Zu(t){t._valueTracker||(t._valueTracker=LS(t))}function P1(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=k1(t)?t.checked?"true":"false":t.value),t=r,t!==n?(e.setValue(t),!0):!1}function Qc(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function ap(t,e){var n=e.checked;return Xe({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function Bv(t,e){var n=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;n=Fi(e.value!=null?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function R1(t,e){e=e.checked,e!=null&&Fm(t,"checked",e,!1)}function lp(t,e){R1(t,e);var n=Fi(e.value),r=e.type;if(n!=null)r==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(r==="submit"||r==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?up(t,e.type,n):e.hasOwnProperty("defaultValue")&&up(t,e.type,Fi(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function Hv(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function up(t,e,n){(e!=="number"||Qc(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var ul=Array.isArray;function Vo(t,e,n,r){if(t=t.options,e){e={};for(var i=0;i<n.length;i++)e["$"+n[i]]=!0;for(n=0;n<t.length;n++)i=e.hasOwnProperty("$"+t[n].value),t[n].selected!==i&&(t[n].selected=i),i&&r&&(t[n].defaultSelected=!0)}else{for(n=""+Fi(n),e=null,i=0;i<t.length;i++){if(t[i].value===n){t[i].selected=!0,r&&(t[i].defaultSelected=!0);return}e!==null||t[i].disabled||(e=t[i])}e!==null&&(e.selected=!0)}}function cp(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(W(91));return Xe({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function Wv(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(W(92));if(ul(n)){if(1<n.length)throw Error(W(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:Fi(n)}}function N1(t,e){var n=Fi(e.value),r=Fi(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),r!=null&&(t.defaultValue=""+r)}function qv(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function O1(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function hp(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?O1(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var ec,L1=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,r,i){MSApp.execUnsafeLocalFunction(function(){return t(e,n,r,i)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(ec=ec||document.createElement("div"),ec.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=ec.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function Ml(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var wl={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},DS=["Webkit","ms","Moz","O"];Object.keys(wl).forEach(function(t){DS.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),wl[e]=wl[t]})});function D1(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||wl.hasOwnProperty(t)&&wl[t]?(""+e).trim():e+"px"}function M1(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var r=n.indexOf("--")===0,i=D1(n,e[n],r);n==="float"&&(n="cssFloat"),r?t.setProperty(n,i):t[n]=i}}var MS=Xe({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function dp(t,e){if(e){if(MS[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(W(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(W(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(W(61))}if(e.style!=null&&typeof e.style!="object")throw Error(W(62))}}function fp(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var pp=null;function Hm(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var mp=null,Uo=null,$o=null;function Gv(t){if(t=mu(t)){if(typeof mp!="function")throw Error(W(280));var e=t.stateNode;e&&(e=Gh(e),mp(t.stateNode,t.type,e))}}function V1(t){Uo?$o?$o.push(t):$o=[t]:Uo=t}function U1(){if(Uo){var t=Uo,e=$o;if($o=Uo=null,Gv(t),e)for(t=0;t<e.length;t++)Gv(e[t])}}function $1(t,e){return t(e)}function F1(){}var df=!1;function j1(t,e,n){if(df)return t(e,n);df=!0;try{return $1(t,e,n)}finally{df=!1,(Uo!==null||$o!==null)&&(F1(),U1())}}function Vl(t,e){var n=t.stateNode;if(n===null)return null;var r=Gh(n);if(r===null)return null;n=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(t=t.type,r=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!r;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(W(231,e,typeof n));return n}var gp=!1;if($r)try{var Wa={};Object.defineProperty(Wa,"passive",{get:function(){gp=!0}}),window.addEventListener("test",Wa,Wa),window.removeEventListener("test",Wa,Wa)}catch{gp=!1}function VS(t,e,n,r,i,s,o,a,l){var c=Array.prototype.slice.call(arguments,3);try{e.apply(n,c)}catch(h){this.onError(h)}}var El=!1,Xc=null,Yc=!1,yp=null,US={onError:function(t){El=!0,Xc=t}};function $S(t,e,n,r,i,s,o,a,l){El=!1,Xc=null,VS.apply(US,arguments)}function FS(t,e,n,r,i,s,o,a,l){if($S.apply(this,arguments),El){if(El){var c=Xc;El=!1,Xc=null}else throw Error(W(198));Yc||(Yc=!0,yp=c)}}function qs(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function z1(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function Kv(t){if(qs(t)!==t)throw Error(W(188))}function jS(t){var e=t.alternate;if(!e){if(e=qs(t),e===null)throw Error(W(188));return e!==t?null:t}for(var n=t,r=e;;){var i=n.return;if(i===null)break;var s=i.alternate;if(s===null){if(r=i.return,r!==null){n=r;continue}break}if(i.child===s.child){for(s=i.child;s;){if(s===n)return Kv(i),t;if(s===r)return Kv(i),e;s=s.sibling}throw Error(W(188))}if(n.return!==r.return)n=i,r=s;else{for(var o=!1,a=i.child;a;){if(a===n){o=!0,n=i,r=s;break}if(a===r){o=!0,r=i,n=s;break}a=a.sibling}if(!o){for(a=s.child;a;){if(a===n){o=!0,n=s,r=i;break}if(a===r){o=!0,r=s,n=i;break}a=a.sibling}if(!o)throw Error(W(189))}}if(n.alternate!==r)throw Error(W(190))}if(n.tag!==3)throw Error(W(188));return n.stateNode.current===n?t:e}function B1(t){return t=jS(t),t!==null?H1(t):null}function H1(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=H1(t);if(e!==null)return e;t=t.sibling}return null}var W1=vn.unstable_scheduleCallback,Qv=vn.unstable_cancelCallback,zS=vn.unstable_shouldYield,BS=vn.unstable_requestPaint,rt=vn.unstable_now,HS=vn.unstable_getCurrentPriorityLevel,Wm=vn.unstable_ImmediatePriority,q1=vn.unstable_UserBlockingPriority,Jc=vn.unstable_NormalPriority,WS=vn.unstable_LowPriority,G1=vn.unstable_IdlePriority,Bh=null,ar=null;function qS(t){if(ar&&typeof ar.onCommitFiberRoot=="function")try{ar.onCommitFiberRoot(Bh,t,void 0,(t.current.flags&128)===128)}catch{}}var qn=Math.clz32?Math.clz32:QS,GS=Math.log,KS=Math.LN2;function QS(t){return t>>>=0,t===0?32:31-(GS(t)/KS|0)|0}var tc=64,nc=4194304;function cl(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function Zc(t,e){var n=t.pendingLanes;if(n===0)return 0;var r=0,i=t.suspendedLanes,s=t.pingedLanes,o=n&268435455;if(o!==0){var a=o&~i;a!==0?r=cl(a):(s&=o,s!==0&&(r=cl(s)))}else o=n&~i,o!==0?r=cl(o):s!==0&&(r=cl(s));if(r===0)return 0;if(e!==0&&e!==r&&!(e&i)&&(i=r&-r,s=e&-e,i>=s||i===16&&(s&4194240)!==0))return e;if(r&4&&(r|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=r;0<e;)n=31-qn(e),i=1<<n,r|=t[n],e&=~i;return r}function XS(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function YS(t,e){for(var n=t.suspendedLanes,r=t.pingedLanes,i=t.expirationTimes,s=t.pendingLanes;0<s;){var o=31-qn(s),a=1<<o,l=i[o];l===-1?(!(a&n)||a&r)&&(i[o]=XS(a,e)):l<=e&&(t.expiredLanes|=a),s&=~a}}function vp(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function K1(){var t=tc;return tc<<=1,!(tc&4194240)&&(tc=64),t}function ff(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function fu(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-qn(e),t[e]=n}function JS(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var r=t.eventTimes;for(t=t.expirationTimes;0<n;){var i=31-qn(n),s=1<<i;e[i]=0,r[i]=-1,t[i]=-1,n&=~s}}function qm(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var r=31-qn(n),i=1<<r;i&e|t[r]&e&&(t[r]|=e),n&=~i}}var ke=0;function Q1(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var X1,Gm,Y1,J1,Z1,_p=!1,rc=[],Ti=null,Ci=null,Ii=null,Ul=new Map,$l=new Map,pi=[],ZS="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Xv(t,e){switch(t){case"focusin":case"focusout":Ti=null;break;case"dragenter":case"dragleave":Ci=null;break;case"mouseover":case"mouseout":Ii=null;break;case"pointerover":case"pointerout":Ul.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":$l.delete(e.pointerId)}}function qa(t,e,n,r,i,s){return t===null||t.nativeEvent!==s?(t={blockedOn:e,domEventName:n,eventSystemFlags:r,nativeEvent:s,targetContainers:[i]},e!==null&&(e=mu(e),e!==null&&Gm(e)),t):(t.eventSystemFlags|=r,e=t.targetContainers,i!==null&&e.indexOf(i)===-1&&e.push(i),t)}function eA(t,e,n,r,i){switch(e){case"focusin":return Ti=qa(Ti,t,e,n,r,i),!0;case"dragenter":return Ci=qa(Ci,t,e,n,r,i),!0;case"mouseover":return Ii=qa(Ii,t,e,n,r,i),!0;case"pointerover":var s=i.pointerId;return Ul.set(s,qa(Ul.get(s)||null,t,e,n,r,i)),!0;case"gotpointercapture":return s=i.pointerId,$l.set(s,qa($l.get(s)||null,t,e,n,r,i)),!0}return!1}function eE(t){var e=gs(t.target);if(e!==null){var n=qs(e);if(n!==null){if(e=n.tag,e===13){if(e=z1(n),e!==null){t.blockedOn=e,Z1(t.priority,function(){Y1(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function xc(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=wp(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var r=new n.constructor(n.type,n);pp=r,n.target.dispatchEvent(r),pp=null}else return e=mu(n),e!==null&&Gm(e),t.blockedOn=n,!1;e.shift()}return!0}function Yv(t,e,n){xc(t)&&n.delete(e)}function tA(){_p=!1,Ti!==null&&xc(Ti)&&(Ti=null),Ci!==null&&xc(Ci)&&(Ci=null),Ii!==null&&xc(Ii)&&(Ii=null),Ul.forEach(Yv),$l.forEach(Yv)}function Ga(t,e){t.blockedOn===e&&(t.blockedOn=null,_p||(_p=!0,vn.unstable_scheduleCallback(vn.unstable_NormalPriority,tA)))}function Fl(t){function e(i){return Ga(i,t)}if(0<rc.length){Ga(rc[0],t);for(var n=1;n<rc.length;n++){var r=rc[n];r.blockedOn===t&&(r.blockedOn=null)}}for(Ti!==null&&Ga(Ti,t),Ci!==null&&Ga(Ci,t),Ii!==null&&Ga(Ii,t),Ul.forEach(e),$l.forEach(e),n=0;n<pi.length;n++)r=pi[n],r.blockedOn===t&&(r.blockedOn=null);for(;0<pi.length&&(n=pi[0],n.blockedOn===null);)eE(n),n.blockedOn===null&&pi.shift()}var Fo=Kr.ReactCurrentBatchConfig,eh=!0;function nA(t,e,n,r){var i=ke,s=Fo.transition;Fo.transition=null;try{ke=1,Km(t,e,n,r)}finally{ke=i,Fo.transition=s}}function rA(t,e,n,r){var i=ke,s=Fo.transition;Fo.transition=null;try{ke=4,Km(t,e,n,r)}finally{ke=i,Fo.transition=s}}function Km(t,e,n,r){if(eh){var i=wp(t,e,n,r);if(i===null)Tf(t,e,r,th,n),Xv(t,r);else if(eA(i,t,e,n,r))r.stopPropagation();else if(Xv(t,r),e&4&&-1<ZS.indexOf(t)){for(;i!==null;){var s=mu(i);if(s!==null&&X1(s),s=wp(t,e,n,r),s===null&&Tf(t,e,r,th,n),s===i)break;i=s}i!==null&&r.stopPropagation()}else Tf(t,e,r,null,n)}}var th=null;function wp(t,e,n,r){if(th=null,t=Hm(r),t=gs(t),t!==null)if(e=qs(t),e===null)t=null;else if(n=e.tag,n===13){if(t=z1(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return th=t,null}function tE(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(HS()){case Wm:return 1;case q1:return 4;case Jc:case WS:return 16;case G1:return 536870912;default:return 16}default:return 16}}var _i=null,Qm=null,kc=null;function nE(){if(kc)return kc;var t,e=Qm,n=e.length,r,i="value"in _i?_i.value:_i.textContent,s=i.length;for(t=0;t<n&&e[t]===i[t];t++);var o=n-t;for(r=1;r<=o&&e[n-r]===i[s-r];r++);return kc=i.slice(t,1<r?1-r:void 0)}function Pc(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function ic(){return!0}function Jv(){return!1}function En(t){function e(n,r,i,s,o){this._reactName=n,this._targetInst=i,this.type=r,this.nativeEvent=s,this.target=o,this.currentTarget=null;for(var a in t)t.hasOwnProperty(a)&&(n=t[a],this[a]=n?n(s):s[a]);return this.isDefaultPrevented=(s.defaultPrevented!=null?s.defaultPrevented:s.returnValue===!1)?ic:Jv,this.isPropagationStopped=Jv,this}return Xe(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=ic)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=ic)},persist:function(){},isPersistent:ic}),e}var ma={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Xm=En(ma),pu=Xe({},ma,{view:0,detail:0}),iA=En(pu),pf,mf,Ka,Hh=Xe({},pu,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Ym,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==Ka&&(Ka&&t.type==="mousemove"?(pf=t.screenX-Ka.screenX,mf=t.screenY-Ka.screenY):mf=pf=0,Ka=t),pf)},movementY:function(t){return"movementY"in t?t.movementY:mf}}),Zv=En(Hh),sA=Xe({},Hh,{dataTransfer:0}),oA=En(sA),aA=Xe({},pu,{relatedTarget:0}),gf=En(aA),lA=Xe({},ma,{animationName:0,elapsedTime:0,pseudoElement:0}),uA=En(lA),cA=Xe({},ma,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),hA=En(cA),dA=Xe({},ma,{data:0}),e_=En(dA),fA={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},pA={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},mA={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function gA(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=mA[t])?!!e[t]:!1}function Ym(){return gA}var yA=Xe({},pu,{key:function(t){if(t.key){var e=fA[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=Pc(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?pA[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Ym,charCode:function(t){return t.type==="keypress"?Pc(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?Pc(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),vA=En(yA),_A=Xe({},Hh,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),t_=En(_A),wA=Xe({},pu,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Ym}),EA=En(wA),bA=Xe({},ma,{propertyName:0,elapsedTime:0,pseudoElement:0}),TA=En(bA),CA=Xe({},Hh,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),IA=En(CA),SA=[9,13,27,32],Jm=$r&&"CompositionEvent"in window,bl=null;$r&&"documentMode"in document&&(bl=document.documentMode);var AA=$r&&"TextEvent"in window&&!bl,rE=$r&&(!Jm||bl&&8<bl&&11>=bl),n_=" ",r_=!1;function iE(t,e){switch(t){case"keyup":return SA.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function sE(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var To=!1;function xA(t,e){switch(t){case"compositionend":return sE(e);case"keypress":return e.which!==32?null:(r_=!0,n_);case"textInput":return t=e.data,t===n_&&r_?null:t;default:return null}}function kA(t,e){if(To)return t==="compositionend"||!Jm&&iE(t,e)?(t=nE(),kc=Qm=_i=null,To=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return rE&&e.locale!=="ko"?null:e.data;default:return null}}var PA={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function i_(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!PA[t.type]:e==="textarea"}function oE(t,e,n,r){V1(r),e=nh(e,"onChange"),0<e.length&&(n=new Xm("onChange","change",null,n,r),t.push({event:n,listeners:e}))}var Tl=null,jl=null;function RA(t){yE(t,0)}function Wh(t){var e=So(t);if(P1(e))return t}function NA(t,e){if(t==="change")return e}var aE=!1;if($r){var yf;if($r){var vf="oninput"in document;if(!vf){var s_=document.createElement("div");s_.setAttribute("oninput","return;"),vf=typeof s_.oninput=="function"}yf=vf}else yf=!1;aE=yf&&(!document.documentMode||9<document.documentMode)}function o_(){Tl&&(Tl.detachEvent("onpropertychange",lE),jl=Tl=null)}function lE(t){if(t.propertyName==="value"&&Wh(jl)){var e=[];oE(e,jl,t,Hm(t)),j1(RA,e)}}function OA(t,e,n){t==="focusin"?(o_(),Tl=e,jl=n,Tl.attachEvent("onpropertychange",lE)):t==="focusout"&&o_()}function LA(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return Wh(jl)}function DA(t,e){if(t==="click")return Wh(e)}function MA(t,e){if(t==="input"||t==="change")return Wh(e)}function VA(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var Xn=typeof Object.is=="function"?Object.is:VA;function zl(t,e){if(Xn(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!np.call(e,i)||!Xn(t[i],e[i]))return!1}return!0}function a_(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function l_(t,e){var n=a_(t);t=0;for(var r;n;){if(n.nodeType===3){if(r=t+n.textContent.length,t<=e&&r>=e)return{node:n,offset:e-t};t=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=a_(n)}}function uE(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?uE(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function cE(){for(var t=window,e=Qc();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=Qc(t.document)}return e}function Zm(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function UA(t){var e=cE(),n=t.focusedElem,r=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&uE(n.ownerDocument.documentElement,n)){if(r!==null&&Zm(n)){if(e=r.start,t=r.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var i=n.textContent.length,s=Math.min(r.start,i);r=r.end===void 0?s:Math.min(r.end,i),!t.extend&&s>r&&(i=r,r=s,s=i),i=l_(n,s);var o=l_(n,r);i&&o&&(t.rangeCount!==1||t.anchorNode!==i.node||t.anchorOffset!==i.offset||t.focusNode!==o.node||t.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(i.node,i.offset),t.removeAllRanges(),s>r?(t.addRange(e),t.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var $A=$r&&"documentMode"in document&&11>=document.documentMode,Co=null,Ep=null,Cl=null,bp=!1;function u_(t,e,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;bp||Co==null||Co!==Qc(r)||(r=Co,"selectionStart"in r&&Zm(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),Cl&&zl(Cl,r)||(Cl=r,r=nh(Ep,"onSelect"),0<r.length&&(e=new Xm("onSelect","select",null,e,n),t.push({event:e,listeners:r}),e.target=Co)))}function sc(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var Io={animationend:sc("Animation","AnimationEnd"),animationiteration:sc("Animation","AnimationIteration"),animationstart:sc("Animation","AnimationStart"),transitionend:sc("Transition","TransitionEnd")},_f={},hE={};$r&&(hE=document.createElement("div").style,"AnimationEvent"in window||(delete Io.animationend.animation,delete Io.animationiteration.animation,delete Io.animationstart.animation),"TransitionEvent"in window||delete Io.transitionend.transition);function qh(t){if(_f[t])return _f[t];if(!Io[t])return t;var e=Io[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in hE)return _f[t]=e[n];return t}var dE=qh("animationend"),fE=qh("animationiteration"),pE=qh("animationstart"),mE=qh("transitionend"),gE=new Map,c_="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Gi(t,e){gE.set(t,e),Ws(e,[t])}for(var wf=0;wf<c_.length;wf++){var Ef=c_[wf],FA=Ef.toLowerCase(),jA=Ef[0].toUpperCase()+Ef.slice(1);Gi(FA,"on"+jA)}Gi(dE,"onAnimationEnd");Gi(fE,"onAnimationIteration");Gi(pE,"onAnimationStart");Gi("dblclick","onDoubleClick");Gi("focusin","onFocus");Gi("focusout","onBlur");Gi(mE,"onTransitionEnd");Go("onMouseEnter",["mouseout","mouseover"]);Go("onMouseLeave",["mouseout","mouseover"]);Go("onPointerEnter",["pointerout","pointerover"]);Go("onPointerLeave",["pointerout","pointerover"]);Ws("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Ws("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Ws("onBeforeInput",["compositionend","keypress","textInput","paste"]);Ws("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Ws("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Ws("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var hl="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),zA=new Set("cancel close invalid load scroll toggle".split(" ").concat(hl));function h_(t,e,n){var r=t.type||"unknown-event";t.currentTarget=n,FS(r,e,void 0,t),t.currentTarget=null}function yE(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var r=t[n],i=r.event;r=r.listeners;e:{var s=void 0;if(e)for(var o=r.length-1;0<=o;o--){var a=r[o],l=a.instance,c=a.currentTarget;if(a=a.listener,l!==s&&i.isPropagationStopped())break e;h_(i,a,c),s=l}else for(o=0;o<r.length;o++){if(a=r[o],l=a.instance,c=a.currentTarget,a=a.listener,l!==s&&i.isPropagationStopped())break e;h_(i,a,c),s=l}}}if(Yc)throw t=yp,Yc=!1,yp=null,t}function $e(t,e){var n=e[Ap];n===void 0&&(n=e[Ap]=new Set);var r=t+"__bubble";n.has(r)||(vE(e,t,2,!1),n.add(r))}function bf(t,e,n){var r=0;e&&(r|=4),vE(n,t,r,e)}var oc="_reactListening"+Math.random().toString(36).slice(2);function Bl(t){if(!t[oc]){t[oc]=!0,I1.forEach(function(n){n!=="selectionchange"&&(zA.has(n)||bf(n,!1,t),bf(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[oc]||(e[oc]=!0,bf("selectionchange",!1,e))}}function vE(t,e,n,r){switch(tE(e)){case 1:var i=nA;break;case 4:i=rA;break;default:i=Km}n=i.bind(null,e,n,t),i=void 0,!gp||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(i=!0),r?i!==void 0?t.addEventListener(e,n,{capture:!0,passive:i}):t.addEventListener(e,n,!0):i!==void 0?t.addEventListener(e,n,{passive:i}):t.addEventListener(e,n,!1)}function Tf(t,e,n,r,i){var s=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var o=r.tag;if(o===3||o===4){var a=r.stateNode.containerInfo;if(a===i||a.nodeType===8&&a.parentNode===i)break;if(o===4)for(o=r.return;o!==null;){var l=o.tag;if((l===3||l===4)&&(l=o.stateNode.containerInfo,l===i||l.nodeType===8&&l.parentNode===i))return;o=o.return}for(;a!==null;){if(o=gs(a),o===null)return;if(l=o.tag,l===5||l===6){r=s=o;continue e}a=a.parentNode}}r=r.return}j1(function(){var c=s,h=Hm(n),f=[];e:{var p=gE.get(t);if(p!==void 0){var _=Xm,E=t;switch(t){case"keypress":if(Pc(n)===0)break e;case"keydown":case"keyup":_=vA;break;case"focusin":E="focus",_=gf;break;case"focusout":E="blur",_=gf;break;case"beforeblur":case"afterblur":_=gf;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":_=Zv;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":_=oA;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":_=EA;break;case dE:case fE:case pE:_=uA;break;case mE:_=TA;break;case"scroll":_=iA;break;case"wheel":_=IA;break;case"copy":case"cut":case"paste":_=hA;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":_=t_}var I=(e&4)!==0,R=!I&&t==="scroll",T=I?p!==null?p+"Capture":null:p;I=[];for(var w=c,C;w!==null;){C=w;var D=C.stateNode;if(C.tag===5&&D!==null&&(C=D,T!==null&&(D=Vl(w,T),D!=null&&I.push(Hl(w,D,C)))),R)break;w=w.return}0<I.length&&(p=new _(p,E,null,n,h),f.push({event:p,listeners:I}))}}if(!(e&7)){e:{if(p=t==="mouseover"||t==="pointerover",_=t==="mouseout"||t==="pointerout",p&&n!==pp&&(E=n.relatedTarget||n.fromElement)&&(gs(E)||E[Fr]))break e;if((_||p)&&(p=h.window===h?h:(p=h.ownerDocument)?p.defaultView||p.parentWindow:window,_?(E=n.relatedTarget||n.toElement,_=c,E=E?gs(E):null,E!==null&&(R=qs(E),E!==R||E.tag!==5&&E.tag!==6)&&(E=null)):(_=null,E=c),_!==E)){if(I=Zv,D="onMouseLeave",T="onMouseEnter",w="mouse",(t==="pointerout"||t==="pointerover")&&(I=t_,D="onPointerLeave",T="onPointerEnter",w="pointer"),R=_==null?p:So(_),C=E==null?p:So(E),p=new I(D,w+"leave",_,n,h),p.target=R,p.relatedTarget=C,D=null,gs(h)===c&&(I=new I(T,w+"enter",E,n,h),I.target=C,I.relatedTarget=R,D=I),R=D,_&&E)t:{for(I=_,T=E,w=0,C=I;C;C=co(C))w++;for(C=0,D=T;D;D=co(D))C++;for(;0<w-C;)I=co(I),w--;for(;0<C-w;)T=co(T),C--;for(;w--;){if(I===T||T!==null&&I===T.alternate)break t;I=co(I),T=co(T)}I=null}else I=null;_!==null&&d_(f,p,_,I,!1),E!==null&&R!==null&&d_(f,R,E,I,!0)}}e:{if(p=c?So(c):window,_=p.nodeName&&p.nodeName.toLowerCase(),_==="select"||_==="input"&&p.type==="file")var F=NA;else if(i_(p))if(aE)F=MA;else{F=LA;var z=OA}else(_=p.nodeName)&&_.toLowerCase()==="input"&&(p.type==="checkbox"||p.type==="radio")&&(F=DA);if(F&&(F=F(t,c))){oE(f,F,n,h);break e}z&&z(t,p,c),t==="focusout"&&(z=p._wrapperState)&&z.controlled&&p.type==="number"&&up(p,"number",p.value)}switch(z=c?So(c):window,t){case"focusin":(i_(z)||z.contentEditable==="true")&&(Co=z,Ep=c,Cl=null);break;case"focusout":Cl=Ep=Co=null;break;case"mousedown":bp=!0;break;case"contextmenu":case"mouseup":case"dragend":bp=!1,u_(f,n,h);break;case"selectionchange":if($A)break;case"keydown":case"keyup":u_(f,n,h)}var g;if(Jm)e:{switch(t){case"compositionstart":var y="onCompositionStart";break e;case"compositionend":y="onCompositionEnd";break e;case"compositionupdate":y="onCompositionUpdate";break e}y=void 0}else To?iE(t,n)&&(y="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(y="onCompositionStart");y&&(rE&&n.locale!=="ko"&&(To||y!=="onCompositionStart"?y==="onCompositionEnd"&&To&&(g=nE()):(_i=h,Qm="value"in _i?_i.value:_i.textContent,To=!0)),z=nh(c,y),0<z.length&&(y=new e_(y,t,null,n,h),f.push({event:y,listeners:z}),g?y.data=g:(g=sE(n),g!==null&&(y.data=g)))),(g=AA?xA(t,n):kA(t,n))&&(c=nh(c,"onBeforeInput"),0<c.length&&(h=new e_("onBeforeInput","beforeinput",null,n,h),f.push({event:h,listeners:c}),h.data=g))}yE(f,e)})}function Hl(t,e,n){return{instance:t,listener:e,currentTarget:n}}function nh(t,e){for(var n=e+"Capture",r=[];t!==null;){var i=t,s=i.stateNode;i.tag===5&&s!==null&&(i=s,s=Vl(t,n),s!=null&&r.unshift(Hl(t,s,i)),s=Vl(t,e),s!=null&&r.push(Hl(t,s,i))),t=t.return}return r}function co(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function d_(t,e,n,r,i){for(var s=e._reactName,o=[];n!==null&&n!==r;){var a=n,l=a.alternate,c=a.stateNode;if(l!==null&&l===r)break;a.tag===5&&c!==null&&(a=c,i?(l=Vl(n,s),l!=null&&o.unshift(Hl(n,l,a))):i||(l=Vl(n,s),l!=null&&o.push(Hl(n,l,a)))),n=n.return}o.length!==0&&t.push({event:e,listeners:o})}var BA=/\r\n?/g,HA=/\u0000|\uFFFD/g;function f_(t){return(typeof t=="string"?t:""+t).replace(BA,`
`).replace(HA,"")}function ac(t,e,n){if(e=f_(e),f_(t)!==e&&n)throw Error(W(425))}function rh(){}var Tp=null,Cp=null;function Ip(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var Sp=typeof setTimeout=="function"?setTimeout:void 0,WA=typeof clearTimeout=="function"?clearTimeout:void 0,p_=typeof Promise=="function"?Promise:void 0,qA=typeof queueMicrotask=="function"?queueMicrotask:typeof p_<"u"?function(t){return p_.resolve(null).then(t).catch(GA)}:Sp;function GA(t){setTimeout(function(){throw t})}function Cf(t,e){var n=e,r=0;do{var i=n.nextSibling;if(t.removeChild(n),i&&i.nodeType===8)if(n=i.data,n==="/$"){if(r===0){t.removeChild(i),Fl(e);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=i}while(n);Fl(e)}function Si(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function m_(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var ga=Math.random().toString(36).slice(2),or="__reactFiber$"+ga,Wl="__reactProps$"+ga,Fr="__reactContainer$"+ga,Ap="__reactEvents$"+ga,KA="__reactListeners$"+ga,QA="__reactHandles$"+ga;function gs(t){var e=t[or];if(e)return e;for(var n=t.parentNode;n;){if(e=n[Fr]||n[or]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=m_(t);t!==null;){if(n=t[or])return n;t=m_(t)}return e}t=n,n=t.parentNode}return null}function mu(t){return t=t[or]||t[Fr],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function So(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(W(33))}function Gh(t){return t[Wl]||null}var xp=[],Ao=-1;function Ki(t){return{current:t}}function je(t){0>Ao||(t.current=xp[Ao],xp[Ao]=null,Ao--)}function Le(t,e){Ao++,xp[Ao]=t.current,t.current=e}var ji={},Bt=Ki(ji),an=Ki(!1),Ps=ji;function Ko(t,e){var n=t.type.contextTypes;if(!n)return ji;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var i={},s;for(s in n)i[s]=e[s];return r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=i),i}function ln(t){return t=t.childContextTypes,t!=null}function ih(){je(an),je(Bt)}function g_(t,e,n){if(Bt.current!==ji)throw Error(W(168));Le(Bt,e),Le(an,n)}function _E(t,e,n){var r=t.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var i in r)if(!(i in e))throw Error(W(108,OS(t)||"Unknown",i));return Xe({},n,r)}function sh(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||ji,Ps=Bt.current,Le(Bt,t),Le(an,an.current),!0}function y_(t,e,n){var r=t.stateNode;if(!r)throw Error(W(169));n?(t=_E(t,e,Ps),r.__reactInternalMemoizedMergedChildContext=t,je(an),je(Bt),Le(Bt,t)):je(an),Le(an,n)}var xr=null,Kh=!1,If=!1;function wE(t){xr===null?xr=[t]:xr.push(t)}function XA(t){Kh=!0,wE(t)}function Qi(){if(!If&&xr!==null){If=!0;var t=0,e=ke;try{var n=xr;for(ke=1;t<n.length;t++){var r=n[t];do r=r(!0);while(r!==null)}xr=null,Kh=!1}catch(i){throw xr!==null&&(xr=xr.slice(t+1)),W1(Wm,Qi),i}finally{ke=e,If=!1}}return null}var xo=[],ko=0,oh=null,ah=0,Sn=[],An=0,Rs=null,Rr=1,Nr="";function fs(t,e){xo[ko++]=ah,xo[ko++]=oh,oh=t,ah=e}function EE(t,e,n){Sn[An++]=Rr,Sn[An++]=Nr,Sn[An++]=Rs,Rs=t;var r=Rr;t=Nr;var i=32-qn(r)-1;r&=~(1<<i),n+=1;var s=32-qn(e)+i;if(30<s){var o=i-i%5;s=(r&(1<<o)-1).toString(32),r>>=o,i-=o,Rr=1<<32-qn(e)+i|n<<i|r,Nr=s+t}else Rr=1<<s|n<<i|r,Nr=t}function eg(t){t.return!==null&&(fs(t,1),EE(t,1,0))}function tg(t){for(;t===oh;)oh=xo[--ko],xo[ko]=null,ah=xo[--ko],xo[ko]=null;for(;t===Rs;)Rs=Sn[--An],Sn[An]=null,Nr=Sn[--An],Sn[An]=null,Rr=Sn[--An],Sn[An]=null}var gn=null,pn=null,He=!1,Hn=null;function bE(t,e){var n=Rn(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function v_(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,gn=t,pn=Si(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,gn=t,pn=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=Rs!==null?{id:Rr,overflow:Nr}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=Rn(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,gn=t,pn=null,!0):!1;default:return!1}}function kp(t){return(t.mode&1)!==0&&(t.flags&128)===0}function Pp(t){if(He){var e=pn;if(e){var n=e;if(!v_(t,e)){if(kp(t))throw Error(W(418));e=Si(n.nextSibling);var r=gn;e&&v_(t,e)?bE(r,n):(t.flags=t.flags&-4097|2,He=!1,gn=t)}}else{if(kp(t))throw Error(W(418));t.flags=t.flags&-4097|2,He=!1,gn=t}}}function __(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;gn=t}function lc(t){if(t!==gn)return!1;if(!He)return __(t),He=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!Ip(t.type,t.memoizedProps)),e&&(e=pn)){if(kp(t))throw TE(),Error(W(418));for(;e;)bE(t,e),e=Si(e.nextSibling)}if(__(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(W(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){pn=Si(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}pn=null}}else pn=gn?Si(t.stateNode.nextSibling):null;return!0}function TE(){for(var t=pn;t;)t=Si(t.nextSibling)}function Qo(){pn=gn=null,He=!1}function ng(t){Hn===null?Hn=[t]:Hn.push(t)}var YA=Kr.ReactCurrentBatchConfig;function Qa(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(W(309));var r=n.stateNode}if(!r)throw Error(W(147,t));var i=r,s=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===s?e.ref:(e=function(o){var a=i.refs;o===null?delete a[s]:a[s]=o},e._stringRef=s,e)}if(typeof t!="string")throw Error(W(284));if(!n._owner)throw Error(W(290,t))}return t}function uc(t,e){throw t=Object.prototype.toString.call(e),Error(W(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function w_(t){var e=t._init;return e(t._payload)}function CE(t){function e(T,w){if(t){var C=T.deletions;C===null?(T.deletions=[w],T.flags|=16):C.push(w)}}function n(T,w){if(!t)return null;for(;w!==null;)e(T,w),w=w.sibling;return null}function r(T,w){for(T=new Map;w!==null;)w.key!==null?T.set(w.key,w):T.set(w.index,w),w=w.sibling;return T}function i(T,w){return T=Pi(T,w),T.index=0,T.sibling=null,T}function s(T,w,C){return T.index=C,t?(C=T.alternate,C!==null?(C=C.index,C<w?(T.flags|=2,w):C):(T.flags|=2,w)):(T.flags|=1048576,w)}function o(T){return t&&T.alternate===null&&(T.flags|=2),T}function a(T,w,C,D){return w===null||w.tag!==6?(w=Nf(C,T.mode,D),w.return=T,w):(w=i(w,C),w.return=T,w)}function l(T,w,C,D){var F=C.type;return F===bo?h(T,w,C.props.children,D,C.key):w!==null&&(w.elementType===F||typeof F=="object"&&F!==null&&F.$$typeof===di&&w_(F)===w.type)?(D=i(w,C.props),D.ref=Qa(T,w,C),D.return=T,D):(D=Vc(C.type,C.key,C.props,null,T.mode,D),D.ref=Qa(T,w,C),D.return=T,D)}function c(T,w,C,D){return w===null||w.tag!==4||w.stateNode.containerInfo!==C.containerInfo||w.stateNode.implementation!==C.implementation?(w=Of(C,T.mode,D),w.return=T,w):(w=i(w,C.children||[]),w.return=T,w)}function h(T,w,C,D,F){return w===null||w.tag!==7?(w=Is(C,T.mode,D,F),w.return=T,w):(w=i(w,C),w.return=T,w)}function f(T,w,C){if(typeof w=="string"&&w!==""||typeof w=="number")return w=Nf(""+w,T.mode,C),w.return=T,w;if(typeof w=="object"&&w!==null){switch(w.$$typeof){case Ju:return C=Vc(w.type,w.key,w.props,null,T.mode,C),C.ref=Qa(T,null,w),C.return=T,C;case Eo:return w=Of(w,T.mode,C),w.return=T,w;case di:var D=w._init;return f(T,D(w._payload),C)}if(ul(w)||Ha(w))return w=Is(w,T.mode,C,null),w.return=T,w;uc(T,w)}return null}function p(T,w,C,D){var F=w!==null?w.key:null;if(typeof C=="string"&&C!==""||typeof C=="number")return F!==null?null:a(T,w,""+C,D);if(typeof C=="object"&&C!==null){switch(C.$$typeof){case Ju:return C.key===F?l(T,w,C,D):null;case Eo:return C.key===F?c(T,w,C,D):null;case di:return F=C._init,p(T,w,F(C._payload),D)}if(ul(C)||Ha(C))return F!==null?null:h(T,w,C,D,null);uc(T,C)}return null}function _(T,w,C,D,F){if(typeof D=="string"&&D!==""||typeof D=="number")return T=T.get(C)||null,a(w,T,""+D,F);if(typeof D=="object"&&D!==null){switch(D.$$typeof){case Ju:return T=T.get(D.key===null?C:D.key)||null,l(w,T,D,F);case Eo:return T=T.get(D.key===null?C:D.key)||null,c(w,T,D,F);case di:var z=D._init;return _(T,w,C,z(D._payload),F)}if(ul(D)||Ha(D))return T=T.get(C)||null,h(w,T,D,F,null);uc(w,D)}return null}function E(T,w,C,D){for(var F=null,z=null,g=w,y=w=0,b=null;g!==null&&y<C.length;y++){g.index>y?(b=g,g=null):b=g.sibling;var S=p(T,g,C[y],D);if(S===null){g===null&&(g=b);break}t&&g&&S.alternate===null&&e(T,g),w=s(S,w,y),z===null?F=S:z.sibling=S,z=S,g=b}if(y===C.length)return n(T,g),He&&fs(T,y),F;if(g===null){for(;y<C.length;y++)g=f(T,C[y],D),g!==null&&(w=s(g,w,y),z===null?F=g:z.sibling=g,z=g);return He&&fs(T,y),F}for(g=r(T,g);y<C.length;y++)b=_(g,T,y,C[y],D),b!==null&&(t&&b.alternate!==null&&g.delete(b.key===null?y:b.key),w=s(b,w,y),z===null?F=b:z.sibling=b,z=b);return t&&g.forEach(function(k){return e(T,k)}),He&&fs(T,y),F}function I(T,w,C,D){var F=Ha(C);if(typeof F!="function")throw Error(W(150));if(C=F.call(C),C==null)throw Error(W(151));for(var z=F=null,g=w,y=w=0,b=null,S=C.next();g!==null&&!S.done;y++,S=C.next()){g.index>y?(b=g,g=null):b=g.sibling;var k=p(T,g,S.value,D);if(k===null){g===null&&(g=b);break}t&&g&&k.alternate===null&&e(T,g),w=s(k,w,y),z===null?F=k:z.sibling=k,z=k,g=b}if(S.done)return n(T,g),He&&fs(T,y),F;if(g===null){for(;!S.done;y++,S=C.next())S=f(T,S.value,D),S!==null&&(w=s(S,w,y),z===null?F=S:z.sibling=S,z=S);return He&&fs(T,y),F}for(g=r(T,g);!S.done;y++,S=C.next())S=_(g,T,y,S.value,D),S!==null&&(t&&S.alternate!==null&&g.delete(S.key===null?y:S.key),w=s(S,w,y),z===null?F=S:z.sibling=S,z=S);return t&&g.forEach(function(P){return e(T,P)}),He&&fs(T,y),F}function R(T,w,C,D){if(typeof C=="object"&&C!==null&&C.type===bo&&C.key===null&&(C=C.props.children),typeof C=="object"&&C!==null){switch(C.$$typeof){case Ju:e:{for(var F=C.key,z=w;z!==null;){if(z.key===F){if(F=C.type,F===bo){if(z.tag===7){n(T,z.sibling),w=i(z,C.props.children),w.return=T,T=w;break e}}else if(z.elementType===F||typeof F=="object"&&F!==null&&F.$$typeof===di&&w_(F)===z.type){n(T,z.sibling),w=i(z,C.props),w.ref=Qa(T,z,C),w.return=T,T=w;break e}n(T,z);break}else e(T,z);z=z.sibling}C.type===bo?(w=Is(C.props.children,T.mode,D,C.key),w.return=T,T=w):(D=Vc(C.type,C.key,C.props,null,T.mode,D),D.ref=Qa(T,w,C),D.return=T,T=D)}return o(T);case Eo:e:{for(z=C.key;w!==null;){if(w.key===z)if(w.tag===4&&w.stateNode.containerInfo===C.containerInfo&&w.stateNode.implementation===C.implementation){n(T,w.sibling),w=i(w,C.children||[]),w.return=T,T=w;break e}else{n(T,w);break}else e(T,w);w=w.sibling}w=Of(C,T.mode,D),w.return=T,T=w}return o(T);case di:return z=C._init,R(T,w,z(C._payload),D)}if(ul(C))return E(T,w,C,D);if(Ha(C))return I(T,w,C,D);uc(T,C)}return typeof C=="string"&&C!==""||typeof C=="number"?(C=""+C,w!==null&&w.tag===6?(n(T,w.sibling),w=i(w,C),w.return=T,T=w):(n(T,w),w=Nf(C,T.mode,D),w.return=T,T=w),o(T)):n(T,w)}return R}var Xo=CE(!0),IE=CE(!1),lh=Ki(null),uh=null,Po=null,rg=null;function ig(){rg=Po=uh=null}function sg(t){var e=lh.current;je(lh),t._currentValue=e}function Rp(t,e,n){for(;t!==null;){var r=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),t===n)break;t=t.return}}function jo(t,e){uh=t,rg=Po=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(on=!0),t.firstContext=null)}function On(t){var e=t._currentValue;if(rg!==t)if(t={context:t,memoizedValue:e,next:null},Po===null){if(uh===null)throw Error(W(308));Po=t,uh.dependencies={lanes:0,firstContext:t}}else Po=Po.next=t;return e}var ys=null;function og(t){ys===null?ys=[t]:ys.push(t)}function SE(t,e,n,r){var i=e.interleaved;return i===null?(n.next=n,og(e)):(n.next=i.next,i.next=n),e.interleaved=n,jr(t,r)}function jr(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var fi=!1;function ag(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function AE(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function Mr(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function Ai(t,e,n){var r=t.updateQueue;if(r===null)return null;if(r=r.shared,Ce&2){var i=r.pending;return i===null?e.next=e:(e.next=i.next,i.next=e),r.pending=e,jr(t,n)}return i=r.interleaved,i===null?(e.next=e,og(r)):(e.next=i.next,i.next=e),r.interleaved=e,jr(t,n)}function Rc(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,qm(t,n)}}function E_(t,e){var n=t.updateQueue,r=t.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var i=null,s=null;if(n=n.firstBaseUpdate,n!==null){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};s===null?i=s=o:s=s.next=o,n=n.next}while(n!==null);s===null?i=s=e:s=s.next=e}else i=s=e;n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:s,shared:r.shared,effects:r.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function ch(t,e,n,r){var i=t.updateQueue;fi=!1;var s=i.firstBaseUpdate,o=i.lastBaseUpdate,a=i.shared.pending;if(a!==null){i.shared.pending=null;var l=a,c=l.next;l.next=null,o===null?s=c:o.next=c,o=l;var h=t.alternate;h!==null&&(h=h.updateQueue,a=h.lastBaseUpdate,a!==o&&(a===null?h.firstBaseUpdate=c:a.next=c,h.lastBaseUpdate=l))}if(s!==null){var f=i.baseState;o=0,h=c=l=null,a=s;do{var p=a.lane,_=a.eventTime;if((r&p)===p){h!==null&&(h=h.next={eventTime:_,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var E=t,I=a;switch(p=e,_=n,I.tag){case 1:if(E=I.payload,typeof E=="function"){f=E.call(_,f,p);break e}f=E;break e;case 3:E.flags=E.flags&-65537|128;case 0:if(E=I.payload,p=typeof E=="function"?E.call(_,f,p):E,p==null)break e;f=Xe({},f,p);break e;case 2:fi=!0}}a.callback!==null&&a.lane!==0&&(t.flags|=64,p=i.effects,p===null?i.effects=[a]:p.push(a))}else _={eventTime:_,lane:p,tag:a.tag,payload:a.payload,callback:a.callback,next:null},h===null?(c=h=_,l=f):h=h.next=_,o|=p;if(a=a.next,a===null){if(a=i.shared.pending,a===null)break;p=a,a=p.next,p.next=null,i.lastBaseUpdate=p,i.shared.pending=null}}while(!0);if(h===null&&(l=f),i.baseState=l,i.firstBaseUpdate=c,i.lastBaseUpdate=h,e=i.shared.interleaved,e!==null){i=e;do o|=i.lane,i=i.next;while(i!==e)}else s===null&&(i.shared.lanes=0);Os|=o,t.lanes=o,t.memoizedState=f}}function b_(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var r=t[e],i=r.callback;if(i!==null){if(r.callback=null,r=n,typeof i!="function")throw Error(W(191,i));i.call(r)}}}var gu={},lr=Ki(gu),ql=Ki(gu),Gl=Ki(gu);function vs(t){if(t===gu)throw Error(W(174));return t}function lg(t,e){switch(Le(Gl,e),Le(ql,t),Le(lr,gu),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:hp(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=hp(e,t)}je(lr),Le(lr,e)}function Yo(){je(lr),je(ql),je(Gl)}function xE(t){vs(Gl.current);var e=vs(lr.current),n=hp(e,t.type);e!==n&&(Le(ql,t),Le(lr,n))}function ug(t){ql.current===t&&(je(lr),je(ql))}var Ge=Ki(0);function hh(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var Sf=[];function cg(){for(var t=0;t<Sf.length;t++)Sf[t]._workInProgressVersionPrimary=null;Sf.length=0}var Nc=Kr.ReactCurrentDispatcher,Af=Kr.ReactCurrentBatchConfig,Ns=0,Qe=null,ft=null,yt=null,dh=!1,Il=!1,Kl=0,JA=0;function Vt(){throw Error(W(321))}function hg(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!Xn(t[n],e[n]))return!1;return!0}function dg(t,e,n,r,i,s){if(Ns=s,Qe=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,Nc.current=t===null||t.memoizedState===null?nx:rx,t=n(r,i),Il){s=0;do{if(Il=!1,Kl=0,25<=s)throw Error(W(301));s+=1,yt=ft=null,e.updateQueue=null,Nc.current=ix,t=n(r,i)}while(Il)}if(Nc.current=fh,e=ft!==null&&ft.next!==null,Ns=0,yt=ft=Qe=null,dh=!1,e)throw Error(W(300));return t}function fg(){var t=Kl!==0;return Kl=0,t}function rr(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return yt===null?Qe.memoizedState=yt=t:yt=yt.next=t,yt}function Ln(){if(ft===null){var t=Qe.alternate;t=t!==null?t.memoizedState:null}else t=ft.next;var e=yt===null?Qe.memoizedState:yt.next;if(e!==null)yt=e,ft=t;else{if(t===null)throw Error(W(310));ft=t,t={memoizedState:ft.memoizedState,baseState:ft.baseState,baseQueue:ft.baseQueue,queue:ft.queue,next:null},yt===null?Qe.memoizedState=yt=t:yt=yt.next=t}return yt}function Ql(t,e){return typeof e=="function"?e(t):e}function xf(t){var e=Ln(),n=e.queue;if(n===null)throw Error(W(311));n.lastRenderedReducer=t;var r=ft,i=r.baseQueue,s=n.pending;if(s!==null){if(i!==null){var o=i.next;i.next=s.next,s.next=o}r.baseQueue=i=s,n.pending=null}if(i!==null){s=i.next,r=r.baseState;var a=o=null,l=null,c=s;do{var h=c.lane;if((Ns&h)===h)l!==null&&(l=l.next={lane:0,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null}),r=c.hasEagerState?c.eagerState:t(r,c.action);else{var f={lane:h,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null};l===null?(a=l=f,o=r):l=l.next=f,Qe.lanes|=h,Os|=h}c=c.next}while(c!==null&&c!==s);l===null?o=r:l.next=a,Xn(r,e.memoizedState)||(on=!0),e.memoizedState=r,e.baseState=o,e.baseQueue=l,n.lastRenderedState=r}if(t=n.interleaved,t!==null){i=t;do s=i.lane,Qe.lanes|=s,Os|=s,i=i.next;while(i!==t)}else i===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function kf(t){var e=Ln(),n=e.queue;if(n===null)throw Error(W(311));n.lastRenderedReducer=t;var r=n.dispatch,i=n.pending,s=e.memoizedState;if(i!==null){n.pending=null;var o=i=i.next;do s=t(s,o.action),o=o.next;while(o!==i);Xn(s,e.memoizedState)||(on=!0),e.memoizedState=s,e.baseQueue===null&&(e.baseState=s),n.lastRenderedState=s}return[s,r]}function kE(){}function PE(t,e){var n=Qe,r=Ln(),i=e(),s=!Xn(r.memoizedState,i);if(s&&(r.memoizedState=i,on=!0),r=r.queue,pg(OE.bind(null,n,r,t),[t]),r.getSnapshot!==e||s||yt!==null&&yt.memoizedState.tag&1){if(n.flags|=2048,Xl(9,NE.bind(null,n,r,i,e),void 0,null),vt===null)throw Error(W(349));Ns&30||RE(n,e,i)}return i}function RE(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=Qe.updateQueue,e===null?(e={lastEffect:null,stores:null},Qe.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function NE(t,e,n,r){e.value=n,e.getSnapshot=r,LE(e)&&DE(t)}function OE(t,e,n){return n(function(){LE(e)&&DE(t)})}function LE(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!Xn(t,n)}catch{return!0}}function DE(t){var e=jr(t,1);e!==null&&Gn(e,t,1,-1)}function T_(t){var e=rr();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Ql,lastRenderedState:t},e.queue=t,t=t.dispatch=tx.bind(null,Qe,t),[e.memoizedState,t]}function Xl(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},e=Qe.updateQueue,e===null?(e={lastEffect:null,stores:null},Qe.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t)),t}function ME(){return Ln().memoizedState}function Oc(t,e,n,r){var i=rr();Qe.flags|=t,i.memoizedState=Xl(1|e,n,void 0,r===void 0?null:r)}function Qh(t,e,n,r){var i=Ln();r=r===void 0?null:r;var s=void 0;if(ft!==null){var o=ft.memoizedState;if(s=o.destroy,r!==null&&hg(r,o.deps)){i.memoizedState=Xl(e,n,s,r);return}}Qe.flags|=t,i.memoizedState=Xl(1|e,n,s,r)}function C_(t,e){return Oc(8390656,8,t,e)}function pg(t,e){return Qh(2048,8,t,e)}function VE(t,e){return Qh(4,2,t,e)}function UE(t,e){return Qh(4,4,t,e)}function $E(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function FE(t,e,n){return n=n!=null?n.concat([t]):null,Qh(4,4,$E.bind(null,e,t),n)}function mg(){}function jE(t,e){var n=Ln();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&hg(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function zE(t,e){var n=Ln();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&hg(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)}function BE(t,e,n){return Ns&21?(Xn(n,e)||(n=K1(),Qe.lanes|=n,Os|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,on=!0),t.memoizedState=n)}function ZA(t,e){var n=ke;ke=n!==0&&4>n?n:4,t(!0);var r=Af.transition;Af.transition={};try{t(!1),e()}finally{ke=n,Af.transition=r}}function HE(){return Ln().memoizedState}function ex(t,e,n){var r=ki(t);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},WE(t))qE(e,n);else if(n=SE(t,e,n,r),n!==null){var i=Yt();Gn(n,t,r,i),GE(n,e,r)}}function tx(t,e,n){var r=ki(t),i={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(WE(t))qE(e,i);else{var s=t.alternate;if(t.lanes===0&&(s===null||s.lanes===0)&&(s=e.lastRenderedReducer,s!==null))try{var o=e.lastRenderedState,a=s(o,n);if(i.hasEagerState=!0,i.eagerState=a,Xn(a,o)){var l=e.interleaved;l===null?(i.next=i,og(e)):(i.next=l.next,l.next=i),e.interleaved=i;return}}catch{}finally{}n=SE(t,e,i,r),n!==null&&(i=Yt(),Gn(n,t,r,i),GE(n,e,r))}}function WE(t){var e=t.alternate;return t===Qe||e!==null&&e===Qe}function qE(t,e){Il=dh=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function GE(t,e,n){if(n&4194240){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,qm(t,n)}}var fh={readContext:On,useCallback:Vt,useContext:Vt,useEffect:Vt,useImperativeHandle:Vt,useInsertionEffect:Vt,useLayoutEffect:Vt,useMemo:Vt,useReducer:Vt,useRef:Vt,useState:Vt,useDebugValue:Vt,useDeferredValue:Vt,useTransition:Vt,useMutableSource:Vt,useSyncExternalStore:Vt,useId:Vt,unstable_isNewReconciler:!1},nx={readContext:On,useCallback:function(t,e){return rr().memoizedState=[t,e===void 0?null:e],t},useContext:On,useEffect:C_,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,Oc(4194308,4,$E.bind(null,e,t),n)},useLayoutEffect:function(t,e){return Oc(4194308,4,t,e)},useInsertionEffect:function(t,e){return Oc(4,2,t,e)},useMemo:function(t,e){var n=rr();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=rr();return e=n!==void 0?n(e):e,r.memoizedState=r.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},r.queue=t,t=t.dispatch=ex.bind(null,Qe,t),[r.memoizedState,t]},useRef:function(t){var e=rr();return t={current:t},e.memoizedState=t},useState:T_,useDebugValue:mg,useDeferredValue:function(t){return rr().memoizedState=t},useTransition:function(){var t=T_(!1),e=t[0];return t=ZA.bind(null,t[1]),rr().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var r=Qe,i=rr();if(He){if(n===void 0)throw Error(W(407));n=n()}else{if(n=e(),vt===null)throw Error(W(349));Ns&30||RE(r,e,n)}i.memoizedState=n;var s={value:n,getSnapshot:e};return i.queue=s,C_(OE.bind(null,r,s,t),[t]),r.flags|=2048,Xl(9,NE.bind(null,r,s,n,e),void 0,null),n},useId:function(){var t=rr(),e=vt.identifierPrefix;if(He){var n=Nr,r=Rr;n=(r&~(1<<32-qn(r)-1)).toString(32)+n,e=":"+e+"R"+n,n=Kl++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=JA++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},rx={readContext:On,useCallback:jE,useContext:On,useEffect:pg,useImperativeHandle:FE,useInsertionEffect:VE,useLayoutEffect:UE,useMemo:zE,useReducer:xf,useRef:ME,useState:function(){return xf(Ql)},useDebugValue:mg,useDeferredValue:function(t){var e=Ln();return BE(e,ft.memoizedState,t)},useTransition:function(){var t=xf(Ql)[0],e=Ln().memoizedState;return[t,e]},useMutableSource:kE,useSyncExternalStore:PE,useId:HE,unstable_isNewReconciler:!1},ix={readContext:On,useCallback:jE,useContext:On,useEffect:pg,useImperativeHandle:FE,useInsertionEffect:VE,useLayoutEffect:UE,useMemo:zE,useReducer:kf,useRef:ME,useState:function(){return kf(Ql)},useDebugValue:mg,useDeferredValue:function(t){var e=Ln();return ft===null?e.memoizedState=t:BE(e,ft.memoizedState,t)},useTransition:function(){var t=kf(Ql)[0],e=Ln().memoizedState;return[t,e]},useMutableSource:kE,useSyncExternalStore:PE,useId:HE,unstable_isNewReconciler:!1};function jn(t,e){if(t&&t.defaultProps){e=Xe({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function Np(t,e,n,r){e=t.memoizedState,n=n(r,e),n=n==null?e:Xe({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var Xh={isMounted:function(t){return(t=t._reactInternals)?qs(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var r=Yt(),i=ki(t),s=Mr(r,i);s.payload=e,n!=null&&(s.callback=n),e=Ai(t,s,i),e!==null&&(Gn(e,t,i,r),Rc(e,t,i))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var r=Yt(),i=ki(t),s=Mr(r,i);s.tag=1,s.payload=e,n!=null&&(s.callback=n),e=Ai(t,s,i),e!==null&&(Gn(e,t,i,r),Rc(e,t,i))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=Yt(),r=ki(t),i=Mr(n,r);i.tag=2,e!=null&&(i.callback=e),e=Ai(t,i,r),e!==null&&(Gn(e,t,r,n),Rc(e,t,r))}};function I_(t,e,n,r,i,s,o){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(r,s,o):e.prototype&&e.prototype.isPureReactComponent?!zl(n,r)||!zl(i,s):!0}function KE(t,e,n){var r=!1,i=ji,s=e.contextType;return typeof s=="object"&&s!==null?s=On(s):(i=ln(e)?Ps:Bt.current,r=e.contextTypes,s=(r=r!=null)?Ko(t,i):ji),e=new e(n,s),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=Xh,t.stateNode=e,e._reactInternals=t,r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=i,t.__reactInternalMemoizedMaskedChildContext=s),e}function S_(t,e,n,r){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&Xh.enqueueReplaceState(e,e.state,null)}function Op(t,e,n,r){var i=t.stateNode;i.props=n,i.state=t.memoizedState,i.refs={},ag(t);var s=e.contextType;typeof s=="object"&&s!==null?i.context=On(s):(s=ln(e)?Ps:Bt.current,i.context=Ko(t,s)),i.state=t.memoizedState,s=e.getDerivedStateFromProps,typeof s=="function"&&(Np(t,e,s,n),i.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof i.getSnapshotBeforeUpdate=="function"||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(e=i.state,typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount(),e!==i.state&&Xh.enqueueReplaceState(i,i.state,null),ch(t,n,i,r),i.state=t.memoizedState),typeof i.componentDidMount=="function"&&(t.flags|=4194308)}function Jo(t,e){try{var n="",r=e;do n+=NS(r),r=r.return;while(r);var i=n}catch(s){i=`
Error generating stack: `+s.message+`
`+s.stack}return{value:t,source:e,stack:i,digest:null}}function Pf(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function Lp(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var sx=typeof WeakMap=="function"?WeakMap:Map;function QE(t,e,n){n=Mr(-1,n),n.tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){mh||(mh=!0,Hp=r),Lp(t,e)},n}function XE(t,e,n){n=Mr(-1,n),n.tag=3;var r=t.type.getDerivedStateFromError;if(typeof r=="function"){var i=e.value;n.payload=function(){return r(i)},n.callback=function(){Lp(t,e)}}var s=t.stateNode;return s!==null&&typeof s.componentDidCatch=="function"&&(n.callback=function(){Lp(t,e),typeof r!="function"&&(xi===null?xi=new Set([this]):xi.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),n}function A_(t,e,n){var r=t.pingCache;if(r===null){r=t.pingCache=new sx;var i=new Set;r.set(e,i)}else i=r.get(e),i===void 0&&(i=new Set,r.set(e,i));i.has(n)||(i.add(n),t=_x.bind(null,t,e,n),e.then(t,t))}function x_(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function k_(t,e,n,r,i){return t.mode&1?(t.flags|=65536,t.lanes=i,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=Mr(-1,1),e.tag=2,Ai(n,e,1))),n.lanes|=1),t)}var ox=Kr.ReactCurrentOwner,on=!1;function Kt(t,e,n,r){e.child=t===null?IE(e,null,n,r):Xo(e,t.child,n,r)}function P_(t,e,n,r,i){n=n.render;var s=e.ref;return jo(e,i),r=dg(t,e,n,r,s,i),n=fg(),t!==null&&!on?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,zr(t,e,i)):(He&&n&&eg(e),e.flags|=1,Kt(t,e,r,i),e.child)}function R_(t,e,n,r,i){if(t===null){var s=n.type;return typeof s=="function"&&!Tg(s)&&s.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=s,YE(t,e,s,r,i)):(t=Vc(n.type,null,r,e,e.mode,i),t.ref=e.ref,t.return=e,e.child=t)}if(s=t.child,!(t.lanes&i)){var o=s.memoizedProps;if(n=n.compare,n=n!==null?n:zl,n(o,r)&&t.ref===e.ref)return zr(t,e,i)}return e.flags|=1,t=Pi(s,r),t.ref=e.ref,t.return=e,e.child=t}function YE(t,e,n,r,i){if(t!==null){var s=t.memoizedProps;if(zl(s,r)&&t.ref===e.ref)if(on=!1,e.pendingProps=r=s,(t.lanes&i)!==0)t.flags&131072&&(on=!0);else return e.lanes=t.lanes,zr(t,e,i)}return Dp(t,e,n,r,i)}function JE(t,e,n){var r=e.pendingProps,i=r.children,s=t!==null?t.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},Le(No,fn),fn|=n;else{if(!(n&1073741824))return t=s!==null?s.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,Le(No,fn),fn|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=s!==null?s.baseLanes:n,Le(No,fn),fn|=r}else s!==null?(r=s.baseLanes|n,e.memoizedState=null):r=n,Le(No,fn),fn|=r;return Kt(t,e,i,n),e.child}function ZE(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function Dp(t,e,n,r,i){var s=ln(n)?Ps:Bt.current;return s=Ko(e,s),jo(e,i),n=dg(t,e,n,r,s,i),r=fg(),t!==null&&!on?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,zr(t,e,i)):(He&&r&&eg(e),e.flags|=1,Kt(t,e,n,i),e.child)}function N_(t,e,n,r,i){if(ln(n)){var s=!0;sh(e)}else s=!1;if(jo(e,i),e.stateNode===null)Lc(t,e),KE(e,n,r),Op(e,n,r,i),r=!0;else if(t===null){var o=e.stateNode,a=e.memoizedProps;o.props=a;var l=o.context,c=n.contextType;typeof c=="object"&&c!==null?c=On(c):(c=ln(n)?Ps:Bt.current,c=Ko(e,c));var h=n.getDerivedStateFromProps,f=typeof h=="function"||typeof o.getSnapshotBeforeUpdate=="function";f||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==r||l!==c)&&S_(e,o,r,c),fi=!1;var p=e.memoizedState;o.state=p,ch(e,r,o,i),l=e.memoizedState,a!==r||p!==l||an.current||fi?(typeof h=="function"&&(Np(e,n,h,r),l=e.memoizedState),(a=fi||I_(e,n,a,r,p,l,c))?(f||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=l),o.props=r,o.state=l,o.context=c,r=a):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{o=e.stateNode,AE(t,e),a=e.memoizedProps,c=e.type===e.elementType?a:jn(e.type,a),o.props=c,f=e.pendingProps,p=o.context,l=n.contextType,typeof l=="object"&&l!==null?l=On(l):(l=ln(n)?Ps:Bt.current,l=Ko(e,l));var _=n.getDerivedStateFromProps;(h=typeof _=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==f||p!==l)&&S_(e,o,r,l),fi=!1,p=e.memoizedState,o.state=p,ch(e,r,o,i);var E=e.memoizedState;a!==f||p!==E||an.current||fi?(typeof _=="function"&&(Np(e,n,_,r),E=e.memoizedState),(c=fi||I_(e,n,c,r,p,E,l)||!1)?(h||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(r,E,l),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(r,E,l)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&p===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&p===t.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=E),o.props=r,o.state=E,o.context=l,r=c):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&p===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&p===t.memoizedState||(e.flags|=1024),r=!1)}return Mp(t,e,n,r,s,i)}function Mp(t,e,n,r,i,s){ZE(t,e);var o=(e.flags&128)!==0;if(!r&&!o)return i&&y_(e,n,!1),zr(t,e,s);r=e.stateNode,ox.current=e;var a=o&&typeof n.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,t!==null&&o?(e.child=Xo(e,t.child,null,s),e.child=Xo(e,null,a,s)):Kt(t,e,a,s),e.memoizedState=r.state,i&&y_(e,n,!0),e.child}function eb(t){var e=t.stateNode;e.pendingContext?g_(t,e.pendingContext,e.pendingContext!==e.context):e.context&&g_(t,e.context,!1),lg(t,e.containerInfo)}function O_(t,e,n,r,i){return Qo(),ng(i),e.flags|=256,Kt(t,e,n,r),e.child}var Vp={dehydrated:null,treeContext:null,retryLane:0};function Up(t){return{baseLanes:t,cachePool:null,transitions:null}}function tb(t,e,n){var r=e.pendingProps,i=Ge.current,s=!1,o=(e.flags&128)!==0,a;if((a=o)||(a=t!==null&&t.memoizedState===null?!1:(i&2)!==0),a?(s=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(i|=1),Le(Ge,i&1),t===null)return Pp(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(o=r.children,t=r.fallback,s?(r=e.mode,s=e.child,o={mode:"hidden",children:o},!(r&1)&&s!==null?(s.childLanes=0,s.pendingProps=o):s=Zh(o,r,0,null),t=Is(t,r,n,null),s.return=e,t.return=e,s.sibling=t,e.child=s,e.child.memoizedState=Up(n),e.memoizedState=Vp,t):gg(e,o));if(i=t.memoizedState,i!==null&&(a=i.dehydrated,a!==null))return ax(t,e,o,r,a,i,n);if(s){s=r.fallback,o=e.mode,i=t.child,a=i.sibling;var l={mode:"hidden",children:r.children};return!(o&1)&&e.child!==i?(r=e.child,r.childLanes=0,r.pendingProps=l,e.deletions=null):(r=Pi(i,l),r.subtreeFlags=i.subtreeFlags&14680064),a!==null?s=Pi(a,s):(s=Is(s,o,n,null),s.flags|=2),s.return=e,r.return=e,r.sibling=s,e.child=r,r=s,s=e.child,o=t.child.memoizedState,o=o===null?Up(n):{baseLanes:o.baseLanes|n,cachePool:null,transitions:o.transitions},s.memoizedState=o,s.childLanes=t.childLanes&~n,e.memoizedState=Vp,r}return s=t.child,t=s.sibling,r=Pi(s,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=n),r.return=e,r.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=r,e.memoizedState=null,r}function gg(t,e){return e=Zh({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function cc(t,e,n,r){return r!==null&&ng(r),Xo(e,t.child,null,n),t=gg(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function ax(t,e,n,r,i,s,o){if(n)return e.flags&256?(e.flags&=-257,r=Pf(Error(W(422))),cc(t,e,o,r)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(s=r.fallback,i=e.mode,r=Zh({mode:"visible",children:r.children},i,0,null),s=Is(s,i,o,null),s.flags|=2,r.return=e,s.return=e,r.sibling=s,e.child=r,e.mode&1&&Xo(e,t.child,null,o),e.child.memoizedState=Up(o),e.memoizedState=Vp,s);if(!(e.mode&1))return cc(t,e,o,null);if(i.data==="$!"){if(r=i.nextSibling&&i.nextSibling.dataset,r)var a=r.dgst;return r=a,s=Error(W(419)),r=Pf(s,r,void 0),cc(t,e,o,r)}if(a=(o&t.childLanes)!==0,on||a){if(r=vt,r!==null){switch(o&-o){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}i=i&(r.suspendedLanes|o)?0:i,i!==0&&i!==s.retryLane&&(s.retryLane=i,jr(t,i),Gn(r,t,i,-1))}return bg(),r=Pf(Error(W(421))),cc(t,e,o,r)}return i.data==="$?"?(e.flags|=128,e.child=t.child,e=wx.bind(null,t),i._reactRetry=e,null):(t=s.treeContext,pn=Si(i.nextSibling),gn=e,He=!0,Hn=null,t!==null&&(Sn[An++]=Rr,Sn[An++]=Nr,Sn[An++]=Rs,Rr=t.id,Nr=t.overflow,Rs=e),e=gg(e,r.children),e.flags|=4096,e)}function L_(t,e,n){t.lanes|=e;var r=t.alternate;r!==null&&(r.lanes|=e),Rp(t.return,e,n)}function Rf(t,e,n,r,i){var s=t.memoizedState;s===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(s.isBackwards=e,s.rendering=null,s.renderingStartTime=0,s.last=r,s.tail=n,s.tailMode=i)}function nb(t,e,n){var r=e.pendingProps,i=r.revealOrder,s=r.tail;if(Kt(t,e,r.children,n),r=Ge.current,r&2)r=r&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&L_(t,n,e);else if(t.tag===19)L_(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(Le(Ge,r),!(e.mode&1))e.memoizedState=null;else switch(i){case"forwards":for(n=e.child,i=null;n!==null;)t=n.alternate,t!==null&&hh(t)===null&&(i=n),n=n.sibling;n=i,n===null?(i=e.child,e.child=null):(i=n.sibling,n.sibling=null),Rf(e,!1,i,n,s);break;case"backwards":for(n=null,i=e.child,e.child=null;i!==null;){if(t=i.alternate,t!==null&&hh(t)===null){e.child=i;break}t=i.sibling,i.sibling=n,n=i,i=t}Rf(e,!0,n,null,s);break;case"together":Rf(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function Lc(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function zr(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),Os|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(W(153));if(e.child!==null){for(t=e.child,n=Pi(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=Pi(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function lx(t,e,n){switch(e.tag){case 3:eb(e),Qo();break;case 5:xE(e);break;case 1:ln(e.type)&&sh(e);break;case 4:lg(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,i=e.memoizedProps.value;Le(lh,r._currentValue),r._currentValue=i;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(Le(Ge,Ge.current&1),e.flags|=128,null):n&e.child.childLanes?tb(t,e,n):(Le(Ge,Ge.current&1),t=zr(t,e,n),t!==null?t.sibling:null);Le(Ge,Ge.current&1);break;case 19:if(r=(n&e.childLanes)!==0,t.flags&128){if(r)return nb(t,e,n);e.flags|=128}if(i=e.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),Le(Ge,Ge.current),r)break;return null;case 22:case 23:return e.lanes=0,JE(t,e,n)}return zr(t,e,n)}var rb,$p,ib,sb;rb=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};$p=function(){};ib=function(t,e,n,r){var i=t.memoizedProps;if(i!==r){t=e.stateNode,vs(lr.current);var s=null;switch(n){case"input":i=ap(t,i),r=ap(t,r),s=[];break;case"select":i=Xe({},i,{value:void 0}),r=Xe({},r,{value:void 0}),s=[];break;case"textarea":i=cp(t,i),r=cp(t,r),s=[];break;default:typeof i.onClick!="function"&&typeof r.onClick=="function"&&(t.onclick=rh)}dp(n,r);var o;n=null;for(c in i)if(!r.hasOwnProperty(c)&&i.hasOwnProperty(c)&&i[c]!=null)if(c==="style"){var a=i[c];for(o in a)a.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else c!=="dangerouslySetInnerHTML"&&c!=="children"&&c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&c!=="autoFocus"&&(Dl.hasOwnProperty(c)?s||(s=[]):(s=s||[]).push(c,null));for(c in r){var l=r[c];if(a=i!=null?i[c]:void 0,r.hasOwnProperty(c)&&l!==a&&(l!=null||a!=null))if(c==="style")if(a){for(o in a)!a.hasOwnProperty(o)||l&&l.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in l)l.hasOwnProperty(o)&&a[o]!==l[o]&&(n||(n={}),n[o]=l[o])}else n||(s||(s=[]),s.push(c,n)),n=l;else c==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,a=a?a.__html:void 0,l!=null&&a!==l&&(s=s||[]).push(c,l)):c==="children"?typeof l!="string"&&typeof l!="number"||(s=s||[]).push(c,""+l):c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&(Dl.hasOwnProperty(c)?(l!=null&&c==="onScroll"&&$e("scroll",t),s||a===l||(s=[])):(s=s||[]).push(c,l))}n&&(s=s||[]).push("style",n);var c=s;(e.updateQueue=c)&&(e.flags|=4)}};sb=function(t,e,n,r){n!==r&&(e.flags|=4)};function Xa(t,e){if(!He)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:r.sibling=null}}function Ut(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,r=0;if(e)for(var i=t.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags&14680064,r|=i.flags&14680064,i.return=t,i=i.sibling;else for(i=t.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=t,i=i.sibling;return t.subtreeFlags|=r,t.childLanes=n,e}function ux(t,e,n){var r=e.pendingProps;switch(tg(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Ut(e),null;case 1:return ln(e.type)&&ih(),Ut(e),null;case 3:return r=e.stateNode,Yo(),je(an),je(Bt),cg(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&(lc(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,Hn!==null&&(Gp(Hn),Hn=null))),$p(t,e),Ut(e),null;case 5:ug(e);var i=vs(Gl.current);if(n=e.type,t!==null&&e.stateNode!=null)ib(t,e,n,r,i),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error(W(166));return Ut(e),null}if(t=vs(lr.current),lc(e)){r=e.stateNode,n=e.type;var s=e.memoizedProps;switch(r[or]=e,r[Wl]=s,t=(e.mode&1)!==0,n){case"dialog":$e("cancel",r),$e("close",r);break;case"iframe":case"object":case"embed":$e("load",r);break;case"video":case"audio":for(i=0;i<hl.length;i++)$e(hl[i],r);break;case"source":$e("error",r);break;case"img":case"image":case"link":$e("error",r),$e("load",r);break;case"details":$e("toggle",r);break;case"input":Bv(r,s),$e("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!s.multiple},$e("invalid",r);break;case"textarea":Wv(r,s),$e("invalid",r)}dp(n,s),i=null;for(var o in s)if(s.hasOwnProperty(o)){var a=s[o];o==="children"?typeof a=="string"?r.textContent!==a&&(s.suppressHydrationWarning!==!0&&ac(r.textContent,a,t),i=["children",a]):typeof a=="number"&&r.textContent!==""+a&&(s.suppressHydrationWarning!==!0&&ac(r.textContent,a,t),i=["children",""+a]):Dl.hasOwnProperty(o)&&a!=null&&o==="onScroll"&&$e("scroll",r)}switch(n){case"input":Zu(r),Hv(r,s,!0);break;case"textarea":Zu(r),qv(r);break;case"select":case"option":break;default:typeof s.onClick=="function"&&(r.onclick=rh)}r=i,e.updateQueue=r,r!==null&&(e.flags|=4)}else{o=i.nodeType===9?i:i.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=O1(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=o.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof r.is=="string"?t=o.createElement(n,{is:r.is}):(t=o.createElement(n),n==="select"&&(o=t,r.multiple?o.multiple=!0:r.size&&(o.size=r.size))):t=o.createElementNS(t,n),t[or]=e,t[Wl]=r,rb(t,e,!1,!1),e.stateNode=t;e:{switch(o=fp(n,r),n){case"dialog":$e("cancel",t),$e("close",t),i=r;break;case"iframe":case"object":case"embed":$e("load",t),i=r;break;case"video":case"audio":for(i=0;i<hl.length;i++)$e(hl[i],t);i=r;break;case"source":$e("error",t),i=r;break;case"img":case"image":case"link":$e("error",t),$e("load",t),i=r;break;case"details":$e("toggle",t),i=r;break;case"input":Bv(t,r),i=ap(t,r),$e("invalid",t);break;case"option":i=r;break;case"select":t._wrapperState={wasMultiple:!!r.multiple},i=Xe({},r,{value:void 0}),$e("invalid",t);break;case"textarea":Wv(t,r),i=cp(t,r),$e("invalid",t);break;default:i=r}dp(n,i),a=i;for(s in a)if(a.hasOwnProperty(s)){var l=a[s];s==="style"?M1(t,l):s==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,l!=null&&L1(t,l)):s==="children"?typeof l=="string"?(n!=="textarea"||l!=="")&&Ml(t,l):typeof l=="number"&&Ml(t,""+l):s!=="suppressContentEditableWarning"&&s!=="suppressHydrationWarning"&&s!=="autoFocus"&&(Dl.hasOwnProperty(s)?l!=null&&s==="onScroll"&&$e("scroll",t):l!=null&&Fm(t,s,l,o))}switch(n){case"input":Zu(t),Hv(t,r,!1);break;case"textarea":Zu(t),qv(t);break;case"option":r.value!=null&&t.setAttribute("value",""+Fi(r.value));break;case"select":t.multiple=!!r.multiple,s=r.value,s!=null?Vo(t,!!r.multiple,s,!1):r.defaultValue!=null&&Vo(t,!!r.multiple,r.defaultValue,!0);break;default:typeof i.onClick=="function"&&(t.onclick=rh)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return Ut(e),null;case 6:if(t&&e.stateNode!=null)sb(t,e,t.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(W(166));if(n=vs(Gl.current),vs(lr.current),lc(e)){if(r=e.stateNode,n=e.memoizedProps,r[or]=e,(s=r.nodeValue!==n)&&(t=gn,t!==null))switch(t.tag){case 3:ac(r.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&ac(r.nodeValue,n,(t.mode&1)!==0)}s&&(e.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[or]=e,e.stateNode=r}return Ut(e),null;case 13:if(je(Ge),r=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(He&&pn!==null&&e.mode&1&&!(e.flags&128))TE(),Qo(),e.flags|=98560,s=!1;else if(s=lc(e),r!==null&&r.dehydrated!==null){if(t===null){if(!s)throw Error(W(318));if(s=e.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(W(317));s[or]=e}else Qo(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;Ut(e),s=!1}else Hn!==null&&(Gp(Hn),Hn=null),s=!0;if(!s)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(r=r!==null,r!==(t!==null&&t.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(t===null||Ge.current&1?pt===0&&(pt=3):bg())),e.updateQueue!==null&&(e.flags|=4),Ut(e),null);case 4:return Yo(),$p(t,e),t===null&&Bl(e.stateNode.containerInfo),Ut(e),null;case 10:return sg(e.type._context),Ut(e),null;case 17:return ln(e.type)&&ih(),Ut(e),null;case 19:if(je(Ge),s=e.memoizedState,s===null)return Ut(e),null;if(r=(e.flags&128)!==0,o=s.rendering,o===null)if(r)Xa(s,!1);else{if(pt!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(o=hh(t),o!==null){for(e.flags|=128,Xa(s,!1),r=o.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=n,n=e.child;n!==null;)s=n,t=r,s.flags&=14680066,o=s.alternate,o===null?(s.childLanes=0,s.lanes=t,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=o.childLanes,s.lanes=o.lanes,s.child=o.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=o.memoizedProps,s.memoizedState=o.memoizedState,s.updateQueue=o.updateQueue,s.type=o.type,t=o.dependencies,s.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return Le(Ge,Ge.current&1|2),e.child}t=t.sibling}s.tail!==null&&rt()>Zo&&(e.flags|=128,r=!0,Xa(s,!1),e.lanes=4194304)}else{if(!r)if(t=hh(o),t!==null){if(e.flags|=128,r=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),Xa(s,!0),s.tail===null&&s.tailMode==="hidden"&&!o.alternate&&!He)return Ut(e),null}else 2*rt()-s.renderingStartTime>Zo&&n!==1073741824&&(e.flags|=128,r=!0,Xa(s,!1),e.lanes=4194304);s.isBackwards?(o.sibling=e.child,e.child=o):(n=s.last,n!==null?n.sibling=o:e.child=o,s.last=o)}return s.tail!==null?(e=s.tail,s.rendering=e,s.tail=e.sibling,s.renderingStartTime=rt(),e.sibling=null,n=Ge.current,Le(Ge,r?n&1|2:n&1),e):(Ut(e),null);case 22:case 23:return Eg(),r=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?fn&1073741824&&(Ut(e),e.subtreeFlags&6&&(e.flags|=8192)):Ut(e),null;case 24:return null;case 25:return null}throw Error(W(156,e.tag))}function cx(t,e){switch(tg(e),e.tag){case 1:return ln(e.type)&&ih(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return Yo(),je(an),je(Bt),cg(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return ug(e),null;case 13:if(je(Ge),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(W(340));Qo()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return je(Ge),null;case 4:return Yo(),null;case 10:return sg(e.type._context),null;case 22:case 23:return Eg(),null;case 24:return null;default:return null}}var hc=!1,jt=!1,hx=typeof WeakSet=="function"?WeakSet:Set,X=null;function Ro(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){Ze(t,e,r)}else n.current=null}function Fp(t,e,n){try{n()}catch(r){Ze(t,e,r)}}var D_=!1;function dx(t,e){if(Tp=eh,t=cE(),Zm(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var i=r.anchorOffset,s=r.focusNode;r=r.focusOffset;try{n.nodeType,s.nodeType}catch{n=null;break e}var o=0,a=-1,l=-1,c=0,h=0,f=t,p=null;t:for(;;){for(var _;f!==n||i!==0&&f.nodeType!==3||(a=o+i),f!==s||r!==0&&f.nodeType!==3||(l=o+r),f.nodeType===3&&(o+=f.nodeValue.length),(_=f.firstChild)!==null;)p=f,f=_;for(;;){if(f===t)break t;if(p===n&&++c===i&&(a=o),p===s&&++h===r&&(l=o),(_=f.nextSibling)!==null)break;f=p,p=f.parentNode}f=_}n=a===-1||l===-1?null:{start:a,end:l}}else n=null}n=n||{start:0,end:0}}else n=null;for(Cp={focusedElem:t,selectionRange:n},eh=!1,X=e;X!==null;)if(e=X,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,X=t;else for(;X!==null;){e=X;try{var E=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(E!==null){var I=E.memoizedProps,R=E.memoizedState,T=e.stateNode,w=T.getSnapshotBeforeUpdate(e.elementType===e.type?I:jn(e.type,I),R);T.__reactInternalSnapshotBeforeUpdate=w}break;case 3:var C=e.stateNode.containerInfo;C.nodeType===1?C.textContent="":C.nodeType===9&&C.documentElement&&C.removeChild(C.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(W(163))}}catch(D){Ze(e,e.return,D)}if(t=e.sibling,t!==null){t.return=e.return,X=t;break}X=e.return}return E=D_,D_=!1,E}function Sl(t,e,n){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var i=r=r.next;do{if((i.tag&t)===t){var s=i.destroy;i.destroy=void 0,s!==void 0&&Fp(e,n,s)}i=i.next}while(i!==r)}}function Yh(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var r=n.create;n.destroy=r()}n=n.next}while(n!==e)}}function jp(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function ob(t){var e=t.alternate;e!==null&&(t.alternate=null,ob(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[or],delete e[Wl],delete e[Ap],delete e[KA],delete e[QA])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function ab(t){return t.tag===5||t.tag===3||t.tag===4}function M_(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||ab(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function zp(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=rh));else if(r!==4&&(t=t.child,t!==null))for(zp(t,e,n),t=t.sibling;t!==null;)zp(t,e,n),t=t.sibling}function Bp(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(r!==4&&(t=t.child,t!==null))for(Bp(t,e,n),t=t.sibling;t!==null;)Bp(t,e,n),t=t.sibling}var xt=null,zn=!1;function oi(t,e,n){for(n=n.child;n!==null;)lb(t,e,n),n=n.sibling}function lb(t,e,n){if(ar&&typeof ar.onCommitFiberUnmount=="function")try{ar.onCommitFiberUnmount(Bh,n)}catch{}switch(n.tag){case 5:jt||Ro(n,e);case 6:var r=xt,i=zn;xt=null,oi(t,e,n),xt=r,zn=i,xt!==null&&(zn?(t=xt,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):xt.removeChild(n.stateNode));break;case 18:xt!==null&&(zn?(t=xt,n=n.stateNode,t.nodeType===8?Cf(t.parentNode,n):t.nodeType===1&&Cf(t,n),Fl(t)):Cf(xt,n.stateNode));break;case 4:r=xt,i=zn,xt=n.stateNode.containerInfo,zn=!0,oi(t,e,n),xt=r,zn=i;break;case 0:case 11:case 14:case 15:if(!jt&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){i=r=r.next;do{var s=i,o=s.destroy;s=s.tag,o!==void 0&&(s&2||s&4)&&Fp(n,e,o),i=i.next}while(i!==r)}oi(t,e,n);break;case 1:if(!jt&&(Ro(n,e),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(a){Ze(n,e,a)}oi(t,e,n);break;case 21:oi(t,e,n);break;case 22:n.mode&1?(jt=(r=jt)||n.memoizedState!==null,oi(t,e,n),jt=r):oi(t,e,n);break;default:oi(t,e,n)}}function V_(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new hx),e.forEach(function(r){var i=Ex.bind(null,t,r);n.has(r)||(n.add(r),r.then(i,i))})}}function $n(t,e){var n=e.deletions;if(n!==null)for(var r=0;r<n.length;r++){var i=n[r];try{var s=t,o=e,a=o;e:for(;a!==null;){switch(a.tag){case 5:xt=a.stateNode,zn=!1;break e;case 3:xt=a.stateNode.containerInfo,zn=!0;break e;case 4:xt=a.stateNode.containerInfo,zn=!0;break e}a=a.return}if(xt===null)throw Error(W(160));lb(s,o,i),xt=null,zn=!1;var l=i.alternate;l!==null&&(l.return=null),i.return=null}catch(c){Ze(i,e,c)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)ub(e,t),e=e.sibling}function ub(t,e){var n=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if($n(e,t),er(t),r&4){try{Sl(3,t,t.return),Yh(3,t)}catch(I){Ze(t,t.return,I)}try{Sl(5,t,t.return)}catch(I){Ze(t,t.return,I)}}break;case 1:$n(e,t),er(t),r&512&&n!==null&&Ro(n,n.return);break;case 5:if($n(e,t),er(t),r&512&&n!==null&&Ro(n,n.return),t.flags&32){var i=t.stateNode;try{Ml(i,"")}catch(I){Ze(t,t.return,I)}}if(r&4&&(i=t.stateNode,i!=null)){var s=t.memoizedProps,o=n!==null?n.memoizedProps:s,a=t.type,l=t.updateQueue;if(t.updateQueue=null,l!==null)try{a==="input"&&s.type==="radio"&&s.name!=null&&R1(i,s),fp(a,o);var c=fp(a,s);for(o=0;o<l.length;o+=2){var h=l[o],f=l[o+1];h==="style"?M1(i,f):h==="dangerouslySetInnerHTML"?L1(i,f):h==="children"?Ml(i,f):Fm(i,h,f,c)}switch(a){case"input":lp(i,s);break;case"textarea":N1(i,s);break;case"select":var p=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!s.multiple;var _=s.value;_!=null?Vo(i,!!s.multiple,_,!1):p!==!!s.multiple&&(s.defaultValue!=null?Vo(i,!!s.multiple,s.defaultValue,!0):Vo(i,!!s.multiple,s.multiple?[]:"",!1))}i[Wl]=s}catch(I){Ze(t,t.return,I)}}break;case 6:if($n(e,t),er(t),r&4){if(t.stateNode===null)throw Error(W(162));i=t.stateNode,s=t.memoizedProps;try{i.nodeValue=s}catch(I){Ze(t,t.return,I)}}break;case 3:if($n(e,t),er(t),r&4&&n!==null&&n.memoizedState.isDehydrated)try{Fl(e.containerInfo)}catch(I){Ze(t,t.return,I)}break;case 4:$n(e,t),er(t);break;case 13:$n(e,t),er(t),i=t.child,i.flags&8192&&(s=i.memoizedState!==null,i.stateNode.isHidden=s,!s||i.alternate!==null&&i.alternate.memoizedState!==null||(_g=rt())),r&4&&V_(t);break;case 22:if(h=n!==null&&n.memoizedState!==null,t.mode&1?(jt=(c=jt)||h,$n(e,t),jt=c):$n(e,t),er(t),r&8192){if(c=t.memoizedState!==null,(t.stateNode.isHidden=c)&&!h&&t.mode&1)for(X=t,h=t.child;h!==null;){for(f=X=h;X!==null;){switch(p=X,_=p.child,p.tag){case 0:case 11:case 14:case 15:Sl(4,p,p.return);break;case 1:Ro(p,p.return);var E=p.stateNode;if(typeof E.componentWillUnmount=="function"){r=p,n=p.return;try{e=r,E.props=e.memoizedProps,E.state=e.memoizedState,E.componentWillUnmount()}catch(I){Ze(r,n,I)}}break;case 5:Ro(p,p.return);break;case 22:if(p.memoizedState!==null){$_(f);continue}}_!==null?(_.return=p,X=_):$_(f)}h=h.sibling}e:for(h=null,f=t;;){if(f.tag===5){if(h===null){h=f;try{i=f.stateNode,c?(s=i.style,typeof s.setProperty=="function"?s.setProperty("display","none","important"):s.display="none"):(a=f.stateNode,l=f.memoizedProps.style,o=l!=null&&l.hasOwnProperty("display")?l.display:null,a.style.display=D1("display",o))}catch(I){Ze(t,t.return,I)}}}else if(f.tag===6){if(h===null)try{f.stateNode.nodeValue=c?"":f.memoizedProps}catch(I){Ze(t,t.return,I)}}else if((f.tag!==22&&f.tag!==23||f.memoizedState===null||f===t)&&f.child!==null){f.child.return=f,f=f.child;continue}if(f===t)break e;for(;f.sibling===null;){if(f.return===null||f.return===t)break e;h===f&&(h=null),f=f.return}h===f&&(h=null),f.sibling.return=f.return,f=f.sibling}}break;case 19:$n(e,t),er(t),r&4&&V_(t);break;case 21:break;default:$n(e,t),er(t)}}function er(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(ab(n)){var r=n;break e}n=n.return}throw Error(W(160))}switch(r.tag){case 5:var i=r.stateNode;r.flags&32&&(Ml(i,""),r.flags&=-33);var s=M_(t);Bp(t,s,i);break;case 3:case 4:var o=r.stateNode.containerInfo,a=M_(t);zp(t,a,o);break;default:throw Error(W(161))}}catch(l){Ze(t,t.return,l)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function fx(t,e,n){X=t,cb(t)}function cb(t,e,n){for(var r=(t.mode&1)!==0;X!==null;){var i=X,s=i.child;if(i.tag===22&&r){var o=i.memoizedState!==null||hc;if(!o){var a=i.alternate,l=a!==null&&a.memoizedState!==null||jt;a=hc;var c=jt;if(hc=o,(jt=l)&&!c)for(X=i;X!==null;)o=X,l=o.child,o.tag===22&&o.memoizedState!==null?F_(i):l!==null?(l.return=o,X=l):F_(i);for(;s!==null;)X=s,cb(s),s=s.sibling;X=i,hc=a,jt=c}U_(t)}else i.subtreeFlags&8772&&s!==null?(s.return=i,X=s):U_(t)}}function U_(t){for(;X!==null;){var e=X;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:jt||Yh(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!jt)if(n===null)r.componentDidMount();else{var i=e.elementType===e.type?n.memoizedProps:jn(e.type,n.memoizedProps);r.componentDidUpdate(i,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var s=e.updateQueue;s!==null&&b_(e,s,r);break;case 3:var o=e.updateQueue;if(o!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}b_(e,o,n)}break;case 5:var a=e.stateNode;if(n===null&&e.flags&4){n=a;var l=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":l.autoFocus&&n.focus();break;case"img":l.src&&(n.src=l.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var c=e.alternate;if(c!==null){var h=c.memoizedState;if(h!==null){var f=h.dehydrated;f!==null&&Fl(f)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(W(163))}jt||e.flags&512&&jp(e)}catch(p){Ze(e,e.return,p)}}if(e===t){X=null;break}if(n=e.sibling,n!==null){n.return=e.return,X=n;break}X=e.return}}function $_(t){for(;X!==null;){var e=X;if(e===t){X=null;break}var n=e.sibling;if(n!==null){n.return=e.return,X=n;break}X=e.return}}function F_(t){for(;X!==null;){var e=X;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{Yh(4,e)}catch(l){Ze(e,n,l)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var i=e.return;try{r.componentDidMount()}catch(l){Ze(e,i,l)}}var s=e.return;try{jp(e)}catch(l){Ze(e,s,l)}break;case 5:var o=e.return;try{jp(e)}catch(l){Ze(e,o,l)}}}catch(l){Ze(e,e.return,l)}if(e===t){X=null;break}var a=e.sibling;if(a!==null){a.return=e.return,X=a;break}X=e.return}}var px=Math.ceil,ph=Kr.ReactCurrentDispatcher,yg=Kr.ReactCurrentOwner,Nn=Kr.ReactCurrentBatchConfig,Ce=0,vt=null,ut=null,Rt=0,fn=0,No=Ki(0),pt=0,Yl=null,Os=0,Jh=0,vg=0,Al=null,nn=null,_g=0,Zo=1/0,Sr=null,mh=!1,Hp=null,xi=null,dc=!1,wi=null,gh=0,xl=0,Wp=null,Dc=-1,Mc=0;function Yt(){return Ce&6?rt():Dc!==-1?Dc:Dc=rt()}function ki(t){return t.mode&1?Ce&2&&Rt!==0?Rt&-Rt:YA.transition!==null?(Mc===0&&(Mc=K1()),Mc):(t=ke,t!==0||(t=window.event,t=t===void 0?16:tE(t.type)),t):1}function Gn(t,e,n,r){if(50<xl)throw xl=0,Wp=null,Error(W(185));fu(t,n,r),(!(Ce&2)||t!==vt)&&(t===vt&&(!(Ce&2)&&(Jh|=n),pt===4&&mi(t,Rt)),un(t,r),n===1&&Ce===0&&!(e.mode&1)&&(Zo=rt()+500,Kh&&Qi()))}function un(t,e){var n=t.callbackNode;YS(t,e);var r=Zc(t,t===vt?Rt:0);if(r===0)n!==null&&Qv(n),t.callbackNode=null,t.callbackPriority=0;else if(e=r&-r,t.callbackPriority!==e){if(n!=null&&Qv(n),e===1)t.tag===0?XA(j_.bind(null,t)):wE(j_.bind(null,t)),qA(function(){!(Ce&6)&&Qi()}),n=null;else{switch(Q1(r)){case 1:n=Wm;break;case 4:n=q1;break;case 16:n=Jc;break;case 536870912:n=G1;break;default:n=Jc}n=vb(n,hb.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function hb(t,e){if(Dc=-1,Mc=0,Ce&6)throw Error(W(327));var n=t.callbackNode;if(zo()&&t.callbackNode!==n)return null;var r=Zc(t,t===vt?Rt:0);if(r===0)return null;if(r&30||r&t.expiredLanes||e)e=yh(t,r);else{e=r;var i=Ce;Ce|=2;var s=fb();(vt!==t||Rt!==e)&&(Sr=null,Zo=rt()+500,Cs(t,e));do try{yx();break}catch(a){db(t,a)}while(!0);ig(),ph.current=s,Ce=i,ut!==null?e=0:(vt=null,Rt=0,e=pt)}if(e!==0){if(e===2&&(i=vp(t),i!==0&&(r=i,e=qp(t,i))),e===1)throw n=Yl,Cs(t,0),mi(t,r),un(t,rt()),n;if(e===6)mi(t,r);else{if(i=t.current.alternate,!(r&30)&&!mx(i)&&(e=yh(t,r),e===2&&(s=vp(t),s!==0&&(r=s,e=qp(t,s))),e===1))throw n=Yl,Cs(t,0),mi(t,r),un(t,rt()),n;switch(t.finishedWork=i,t.finishedLanes=r,e){case 0:case 1:throw Error(W(345));case 2:ps(t,nn,Sr);break;case 3:if(mi(t,r),(r&130023424)===r&&(e=_g+500-rt(),10<e)){if(Zc(t,0)!==0)break;if(i=t.suspendedLanes,(i&r)!==r){Yt(),t.pingedLanes|=t.suspendedLanes&i;break}t.timeoutHandle=Sp(ps.bind(null,t,nn,Sr),e);break}ps(t,nn,Sr);break;case 4:if(mi(t,r),(r&4194240)===r)break;for(e=t.eventTimes,i=-1;0<r;){var o=31-qn(r);s=1<<o,o=e[o],o>i&&(i=o),r&=~s}if(r=i,r=rt()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*px(r/1960))-r,10<r){t.timeoutHandle=Sp(ps.bind(null,t,nn,Sr),r);break}ps(t,nn,Sr);break;case 5:ps(t,nn,Sr);break;default:throw Error(W(329))}}}return un(t,rt()),t.callbackNode===n?hb.bind(null,t):null}function qp(t,e){var n=Al;return t.current.memoizedState.isDehydrated&&(Cs(t,e).flags|=256),t=yh(t,e),t!==2&&(e=nn,nn=n,e!==null&&Gp(e)),t}function Gp(t){nn===null?nn=t:nn.push.apply(nn,t)}function mx(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var i=n[r],s=i.getSnapshot;i=i.value;try{if(!Xn(s(),i))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function mi(t,e){for(e&=~vg,e&=~Jh,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-qn(e),r=1<<n;t[n]=-1,e&=~r}}function j_(t){if(Ce&6)throw Error(W(327));zo();var e=Zc(t,0);if(!(e&1))return un(t,rt()),null;var n=yh(t,e);if(t.tag!==0&&n===2){var r=vp(t);r!==0&&(e=r,n=qp(t,r))}if(n===1)throw n=Yl,Cs(t,0),mi(t,e),un(t,rt()),n;if(n===6)throw Error(W(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,ps(t,nn,Sr),un(t,rt()),null}function wg(t,e){var n=Ce;Ce|=1;try{return t(e)}finally{Ce=n,Ce===0&&(Zo=rt()+500,Kh&&Qi())}}function Ls(t){wi!==null&&wi.tag===0&&!(Ce&6)&&zo();var e=Ce;Ce|=1;var n=Nn.transition,r=ke;try{if(Nn.transition=null,ke=1,t)return t()}finally{ke=r,Nn.transition=n,Ce=e,!(Ce&6)&&Qi()}}function Eg(){fn=No.current,je(No)}function Cs(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,WA(n)),ut!==null)for(n=ut.return;n!==null;){var r=n;switch(tg(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&ih();break;case 3:Yo(),je(an),je(Bt),cg();break;case 5:ug(r);break;case 4:Yo();break;case 13:je(Ge);break;case 19:je(Ge);break;case 10:sg(r.type._context);break;case 22:case 23:Eg()}n=n.return}if(vt=t,ut=t=Pi(t.current,null),Rt=fn=e,pt=0,Yl=null,vg=Jh=Os=0,nn=Al=null,ys!==null){for(e=0;e<ys.length;e++)if(n=ys[e],r=n.interleaved,r!==null){n.interleaved=null;var i=r.next,s=n.pending;if(s!==null){var o=s.next;s.next=i,r.next=o}n.pending=r}ys=null}return t}function db(t,e){do{var n=ut;try{if(ig(),Nc.current=fh,dh){for(var r=Qe.memoizedState;r!==null;){var i=r.queue;i!==null&&(i.pending=null),r=r.next}dh=!1}if(Ns=0,yt=ft=Qe=null,Il=!1,Kl=0,yg.current=null,n===null||n.return===null){pt=1,Yl=e,ut=null;break}e:{var s=t,o=n.return,a=n,l=e;if(e=Rt,a.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){var c=l,h=a,f=h.tag;if(!(h.mode&1)&&(f===0||f===11||f===15)){var p=h.alternate;p?(h.updateQueue=p.updateQueue,h.memoizedState=p.memoizedState,h.lanes=p.lanes):(h.updateQueue=null,h.memoizedState=null)}var _=x_(o);if(_!==null){_.flags&=-257,k_(_,o,a,s,e),_.mode&1&&A_(s,c,e),e=_,l=c;var E=e.updateQueue;if(E===null){var I=new Set;I.add(l),e.updateQueue=I}else E.add(l);break e}else{if(!(e&1)){A_(s,c,e),bg();break e}l=Error(W(426))}}else if(He&&a.mode&1){var R=x_(o);if(R!==null){!(R.flags&65536)&&(R.flags|=256),k_(R,o,a,s,e),ng(Jo(l,a));break e}}s=l=Jo(l,a),pt!==4&&(pt=2),Al===null?Al=[s]:Al.push(s),s=o;do{switch(s.tag){case 3:s.flags|=65536,e&=-e,s.lanes|=e;var T=QE(s,l,e);E_(s,T);break e;case 1:a=l;var w=s.type,C=s.stateNode;if(!(s.flags&128)&&(typeof w.getDerivedStateFromError=="function"||C!==null&&typeof C.componentDidCatch=="function"&&(xi===null||!xi.has(C)))){s.flags|=65536,e&=-e,s.lanes|=e;var D=XE(s,a,e);E_(s,D);break e}}s=s.return}while(s!==null)}mb(n)}catch(F){e=F,ut===n&&n!==null&&(ut=n=n.return);continue}break}while(!0)}function fb(){var t=ph.current;return ph.current=fh,t===null?fh:t}function bg(){(pt===0||pt===3||pt===2)&&(pt=4),vt===null||!(Os&268435455)&&!(Jh&268435455)||mi(vt,Rt)}function yh(t,e){var n=Ce;Ce|=2;var r=fb();(vt!==t||Rt!==e)&&(Sr=null,Cs(t,e));do try{gx();break}catch(i){db(t,i)}while(!0);if(ig(),Ce=n,ph.current=r,ut!==null)throw Error(W(261));return vt=null,Rt=0,pt}function gx(){for(;ut!==null;)pb(ut)}function yx(){for(;ut!==null&&!zS();)pb(ut)}function pb(t){var e=yb(t.alternate,t,fn);t.memoizedProps=t.pendingProps,e===null?mb(t):ut=e,yg.current=null}function mb(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=cx(n,e),n!==null){n.flags&=32767,ut=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{pt=6,ut=null;return}}else if(n=ux(n,e,fn),n!==null){ut=n;return}if(e=e.sibling,e!==null){ut=e;return}ut=e=t}while(e!==null);pt===0&&(pt=5)}function ps(t,e,n){var r=ke,i=Nn.transition;try{Nn.transition=null,ke=1,vx(t,e,n,r)}finally{Nn.transition=i,ke=r}return null}function vx(t,e,n,r){do zo();while(wi!==null);if(Ce&6)throw Error(W(327));n=t.finishedWork;var i=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(W(177));t.callbackNode=null,t.callbackPriority=0;var s=n.lanes|n.childLanes;if(JS(t,s),t===vt&&(ut=vt=null,Rt=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||dc||(dc=!0,vb(Jc,function(){return zo(),null})),s=(n.flags&15990)!==0,n.subtreeFlags&15990||s){s=Nn.transition,Nn.transition=null;var o=ke;ke=1;var a=Ce;Ce|=4,yg.current=null,dx(t,n),ub(n,t),UA(Cp),eh=!!Tp,Cp=Tp=null,t.current=n,fx(n),BS(),Ce=a,ke=o,Nn.transition=s}else t.current=n;if(dc&&(dc=!1,wi=t,gh=i),s=t.pendingLanes,s===0&&(xi=null),qS(n.stateNode),un(t,rt()),e!==null)for(r=t.onRecoverableError,n=0;n<e.length;n++)i=e[n],r(i.value,{componentStack:i.stack,digest:i.digest});if(mh)throw mh=!1,t=Hp,Hp=null,t;return gh&1&&t.tag!==0&&zo(),s=t.pendingLanes,s&1?t===Wp?xl++:(xl=0,Wp=t):xl=0,Qi(),null}function zo(){if(wi!==null){var t=Q1(gh),e=Nn.transition,n=ke;try{if(Nn.transition=null,ke=16>t?16:t,wi===null)var r=!1;else{if(t=wi,wi=null,gh=0,Ce&6)throw Error(W(331));var i=Ce;for(Ce|=4,X=t.current;X!==null;){var s=X,o=s.child;if(X.flags&16){var a=s.deletions;if(a!==null){for(var l=0;l<a.length;l++){var c=a[l];for(X=c;X!==null;){var h=X;switch(h.tag){case 0:case 11:case 15:Sl(8,h,s)}var f=h.child;if(f!==null)f.return=h,X=f;else for(;X!==null;){h=X;var p=h.sibling,_=h.return;if(ob(h),h===c){X=null;break}if(p!==null){p.return=_,X=p;break}X=_}}}var E=s.alternate;if(E!==null){var I=E.child;if(I!==null){E.child=null;do{var R=I.sibling;I.sibling=null,I=R}while(I!==null)}}X=s}}if(s.subtreeFlags&2064&&o!==null)o.return=s,X=o;else e:for(;X!==null;){if(s=X,s.flags&2048)switch(s.tag){case 0:case 11:case 15:Sl(9,s,s.return)}var T=s.sibling;if(T!==null){T.return=s.return,X=T;break e}X=s.return}}var w=t.current;for(X=w;X!==null;){o=X;var C=o.child;if(o.subtreeFlags&2064&&C!==null)C.return=o,X=C;else e:for(o=w;X!==null;){if(a=X,a.flags&2048)try{switch(a.tag){case 0:case 11:case 15:Yh(9,a)}}catch(F){Ze(a,a.return,F)}if(a===o){X=null;break e}var D=a.sibling;if(D!==null){D.return=a.return,X=D;break e}X=a.return}}if(Ce=i,Qi(),ar&&typeof ar.onPostCommitFiberRoot=="function")try{ar.onPostCommitFiberRoot(Bh,t)}catch{}r=!0}return r}finally{ke=n,Nn.transition=e}}return!1}function z_(t,e,n){e=Jo(n,e),e=QE(t,e,1),t=Ai(t,e,1),e=Yt(),t!==null&&(fu(t,1,e),un(t,e))}function Ze(t,e,n){if(t.tag===3)z_(t,t,n);else for(;e!==null;){if(e.tag===3){z_(e,t,n);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(xi===null||!xi.has(r))){t=Jo(n,t),t=XE(e,t,1),e=Ai(e,t,1),t=Yt(),e!==null&&(fu(e,1,t),un(e,t));break}}e=e.return}}function _x(t,e,n){var r=t.pingCache;r!==null&&r.delete(e),e=Yt(),t.pingedLanes|=t.suspendedLanes&n,vt===t&&(Rt&n)===n&&(pt===4||pt===3&&(Rt&130023424)===Rt&&500>rt()-_g?Cs(t,0):vg|=n),un(t,e)}function gb(t,e){e===0&&(t.mode&1?(e=nc,nc<<=1,!(nc&130023424)&&(nc=4194304)):e=1);var n=Yt();t=jr(t,e),t!==null&&(fu(t,e,n),un(t,n))}function wx(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),gb(t,n)}function Ex(t,e){var n=0;switch(t.tag){case 13:var r=t.stateNode,i=t.memoizedState;i!==null&&(n=i.retryLane);break;case 19:r=t.stateNode;break;default:throw Error(W(314))}r!==null&&r.delete(e),gb(t,n)}var yb;yb=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||an.current)on=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return on=!1,lx(t,e,n);on=!!(t.flags&131072)}else on=!1,He&&e.flags&1048576&&EE(e,ah,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;Lc(t,e),t=e.pendingProps;var i=Ko(e,Bt.current);jo(e,n),i=dg(null,e,r,t,i,n);var s=fg();return e.flags|=1,typeof i=="object"&&i!==null&&typeof i.render=="function"&&i.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,ln(r)?(s=!0,sh(e)):s=!1,e.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,ag(e),i.updater=Xh,e.stateNode=i,i._reactInternals=e,Op(e,r,t,n),e=Mp(null,e,r,!0,s,n)):(e.tag=0,He&&s&&eg(e),Kt(null,e,i,n),e=e.child),e;case 16:r=e.elementType;e:{switch(Lc(t,e),t=e.pendingProps,i=r._init,r=i(r._payload),e.type=r,i=e.tag=Tx(r),t=jn(r,t),i){case 0:e=Dp(null,e,r,t,n);break e;case 1:e=N_(null,e,r,t,n);break e;case 11:e=P_(null,e,r,t,n);break e;case 14:e=R_(null,e,r,jn(r.type,t),n);break e}throw Error(W(306,r,""))}return e;case 0:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:jn(r,i),Dp(t,e,r,i,n);case 1:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:jn(r,i),N_(t,e,r,i,n);case 3:e:{if(eb(e),t===null)throw Error(W(387));r=e.pendingProps,s=e.memoizedState,i=s.element,AE(t,e),ch(e,r,null,n);var o=e.memoizedState;if(r=o.element,s.isDehydrated)if(s={element:r,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=s,e.memoizedState=s,e.flags&256){i=Jo(Error(W(423)),e),e=O_(t,e,r,n,i);break e}else if(r!==i){i=Jo(Error(W(424)),e),e=O_(t,e,r,n,i);break e}else for(pn=Si(e.stateNode.containerInfo.firstChild),gn=e,He=!0,Hn=null,n=IE(e,null,r,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(Qo(),r===i){e=zr(t,e,n);break e}Kt(t,e,r,n)}e=e.child}return e;case 5:return xE(e),t===null&&Pp(e),r=e.type,i=e.pendingProps,s=t!==null?t.memoizedProps:null,o=i.children,Ip(r,i)?o=null:s!==null&&Ip(r,s)&&(e.flags|=32),ZE(t,e),Kt(t,e,o,n),e.child;case 6:return t===null&&Pp(e),null;case 13:return tb(t,e,n);case 4:return lg(e,e.stateNode.containerInfo),r=e.pendingProps,t===null?e.child=Xo(e,null,r,n):Kt(t,e,r,n),e.child;case 11:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:jn(r,i),P_(t,e,r,i,n);case 7:return Kt(t,e,e.pendingProps,n),e.child;case 8:return Kt(t,e,e.pendingProps.children,n),e.child;case 12:return Kt(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(r=e.type._context,i=e.pendingProps,s=e.memoizedProps,o=i.value,Le(lh,r._currentValue),r._currentValue=o,s!==null)if(Xn(s.value,o)){if(s.children===i.children&&!an.current){e=zr(t,e,n);break e}}else for(s=e.child,s!==null&&(s.return=e);s!==null;){var a=s.dependencies;if(a!==null){o=s.child;for(var l=a.firstContext;l!==null;){if(l.context===r){if(s.tag===1){l=Mr(-1,n&-n),l.tag=2;var c=s.updateQueue;if(c!==null){c=c.shared;var h=c.pending;h===null?l.next=l:(l.next=h.next,h.next=l),c.pending=l}}s.lanes|=n,l=s.alternate,l!==null&&(l.lanes|=n),Rp(s.return,n,e),a.lanes|=n;break}l=l.next}}else if(s.tag===10)o=s.type===e.type?null:s.child;else if(s.tag===18){if(o=s.return,o===null)throw Error(W(341));o.lanes|=n,a=o.alternate,a!==null&&(a.lanes|=n),Rp(o,n,e),o=s.sibling}else o=s.child;if(o!==null)o.return=s;else for(o=s;o!==null;){if(o===e){o=null;break}if(s=o.sibling,s!==null){s.return=o.return,o=s;break}o=o.return}s=o}Kt(t,e,i.children,n),e=e.child}return e;case 9:return i=e.type,r=e.pendingProps.children,jo(e,n),i=On(i),r=r(i),e.flags|=1,Kt(t,e,r,n),e.child;case 14:return r=e.type,i=jn(r,e.pendingProps),i=jn(r.type,i),R_(t,e,r,i,n);case 15:return YE(t,e,e.type,e.pendingProps,n);case 17:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:jn(r,i),Lc(t,e),e.tag=1,ln(r)?(t=!0,sh(e)):t=!1,jo(e,n),KE(e,r,i),Op(e,r,i,n),Mp(null,e,r,!0,t,n);case 19:return nb(t,e,n);case 22:return JE(t,e,n)}throw Error(W(156,e.tag))};function vb(t,e){return W1(t,e)}function bx(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Rn(t,e,n,r){return new bx(t,e,n,r)}function Tg(t){return t=t.prototype,!(!t||!t.isReactComponent)}function Tx(t){if(typeof t=="function")return Tg(t)?1:0;if(t!=null){if(t=t.$$typeof,t===zm)return 11;if(t===Bm)return 14}return 2}function Pi(t,e){var n=t.alternate;return n===null?(n=Rn(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function Vc(t,e,n,r,i,s){var o=2;if(r=t,typeof t=="function")Tg(t)&&(o=1);else if(typeof t=="string")o=5;else e:switch(t){case bo:return Is(n.children,i,s,e);case jm:o=8,i|=8;break;case rp:return t=Rn(12,n,e,i|2),t.elementType=rp,t.lanes=s,t;case ip:return t=Rn(13,n,e,i),t.elementType=ip,t.lanes=s,t;case sp:return t=Rn(19,n,e,i),t.elementType=sp,t.lanes=s,t;case x1:return Zh(n,i,s,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case S1:o=10;break e;case A1:o=9;break e;case zm:o=11;break e;case Bm:o=14;break e;case di:o=16,r=null;break e}throw Error(W(130,t==null?t:typeof t,""))}return e=Rn(o,n,e,i),e.elementType=t,e.type=r,e.lanes=s,e}function Is(t,e,n,r){return t=Rn(7,t,r,e),t.lanes=n,t}function Zh(t,e,n,r){return t=Rn(22,t,r,e),t.elementType=x1,t.lanes=n,t.stateNode={isHidden:!1},t}function Nf(t,e,n){return t=Rn(6,t,null,e),t.lanes=n,t}function Of(t,e,n){return e=Rn(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function Cx(t,e,n,r,i){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=ff(0),this.expirationTimes=ff(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=ff(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function Cg(t,e,n,r,i,s,o,a,l){return t=new Cx(t,e,n,a,l),e===1?(e=1,s===!0&&(e|=8)):e=0,s=Rn(3,null,null,e),t.current=s,s.stateNode=t,s.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},ag(s),t}function Ix(t,e,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Eo,key:r==null?null:""+r,children:t,containerInfo:e,implementation:n}}function _b(t){if(!t)return ji;t=t._reactInternals;e:{if(qs(t)!==t||t.tag!==1)throw Error(W(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(ln(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(W(171))}if(t.tag===1){var n=t.type;if(ln(n))return _E(t,n,e)}return e}function wb(t,e,n,r,i,s,o,a,l){return t=Cg(n,r,!0,t,i,s,o,a,l),t.context=_b(null),n=t.current,r=Yt(),i=ki(n),s=Mr(r,i),s.callback=e??null,Ai(n,s,i),t.current.lanes=i,fu(t,i,r),un(t,r),t}function ed(t,e,n,r){var i=e.current,s=Yt(),o=ki(i);return n=_b(n),e.context===null?e.context=n:e.pendingContext=n,e=Mr(s,o),e.payload={element:t},r=r===void 0?null:r,r!==null&&(e.callback=r),t=Ai(i,e,o),t!==null&&(Gn(t,i,o,s),Rc(t,i,o)),o}function vh(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function B_(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function Ig(t,e){B_(t,e),(t=t.alternate)&&B_(t,e)}function Sx(){return null}var Eb=typeof reportError=="function"?reportError:function(t){console.error(t)};function Sg(t){this._internalRoot=t}td.prototype.render=Sg.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(W(409));ed(t,e,null,null)};td.prototype.unmount=Sg.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;Ls(function(){ed(null,t,null,null)}),e[Fr]=null}};function td(t){this._internalRoot=t}td.prototype.unstable_scheduleHydration=function(t){if(t){var e=J1();t={blockedOn:null,target:t,priority:e};for(var n=0;n<pi.length&&e!==0&&e<pi[n].priority;n++);pi.splice(n,0,t),n===0&&eE(t)}};function Ag(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function nd(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function H_(){}function Ax(t,e,n,r,i){if(i){if(typeof r=="function"){var s=r;r=function(){var c=vh(o);s.call(c)}}var o=wb(e,r,t,0,null,!1,!1,"",H_);return t._reactRootContainer=o,t[Fr]=o.current,Bl(t.nodeType===8?t.parentNode:t),Ls(),o}for(;i=t.lastChild;)t.removeChild(i);if(typeof r=="function"){var a=r;r=function(){var c=vh(l);a.call(c)}}var l=Cg(t,0,!1,null,null,!1,!1,"",H_);return t._reactRootContainer=l,t[Fr]=l.current,Bl(t.nodeType===8?t.parentNode:t),Ls(function(){ed(e,l,n,r)}),l}function rd(t,e,n,r,i){var s=n._reactRootContainer;if(s){var o=s;if(typeof i=="function"){var a=i;i=function(){var l=vh(o);a.call(l)}}ed(e,o,t,i)}else o=Ax(n,e,t,i,r);return vh(o)}X1=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=cl(e.pendingLanes);n!==0&&(qm(e,n|1),un(e,rt()),!(Ce&6)&&(Zo=rt()+500,Qi()))}break;case 13:Ls(function(){var r=jr(t,1);if(r!==null){var i=Yt();Gn(r,t,1,i)}}),Ig(t,1)}};Gm=function(t){if(t.tag===13){var e=jr(t,134217728);if(e!==null){var n=Yt();Gn(e,t,134217728,n)}Ig(t,134217728)}};Y1=function(t){if(t.tag===13){var e=ki(t),n=jr(t,e);if(n!==null){var r=Yt();Gn(n,t,e,r)}Ig(t,e)}};J1=function(){return ke};Z1=function(t,e){var n=ke;try{return ke=t,e()}finally{ke=n}};mp=function(t,e,n){switch(e){case"input":if(lp(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var i=Gh(r);if(!i)throw Error(W(90));P1(r),lp(r,i)}}}break;case"textarea":N1(t,n);break;case"select":e=n.value,e!=null&&Vo(t,!!n.multiple,e,!1)}};$1=wg;F1=Ls;var xx={usingClientEntryPoint:!1,Events:[mu,So,Gh,V1,U1,wg]},Ya={findFiberByHostInstance:gs,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},kx={bundleType:Ya.bundleType,version:Ya.version,rendererPackageName:Ya.rendererPackageName,rendererConfig:Ya.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Kr.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=B1(t),t===null?null:t.stateNode},findFiberByHostInstance:Ya.findFiberByHostInstance||Sx,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var fc=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!fc.isDisabled&&fc.supportsFiber)try{Bh=fc.inject(kx),ar=fc}catch{}}wn.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=xx;wn.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Ag(e))throw Error(W(200));return Ix(t,e,null,n)};wn.createRoot=function(t,e){if(!Ag(t))throw Error(W(299));var n=!1,r="",i=Eb;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(i=e.onRecoverableError)),e=Cg(t,1,!1,null,null,n,!1,r,i),t[Fr]=e.current,Bl(t.nodeType===8?t.parentNode:t),new Sg(e)};wn.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(W(188)):(t=Object.keys(t).join(","),Error(W(268,t)));return t=B1(e),t=t===null?null:t.stateNode,t};wn.flushSync=function(t){return Ls(t)};wn.hydrate=function(t,e,n){if(!nd(e))throw Error(W(200));return rd(null,t,e,!0,n)};wn.hydrateRoot=function(t,e,n){if(!Ag(t))throw Error(W(405));var r=n!=null&&n.hydratedSources||null,i=!1,s="",o=Eb;if(n!=null&&(n.unstable_strictMode===!0&&(i=!0),n.identifierPrefix!==void 0&&(s=n.identifierPrefix),n.onRecoverableError!==void 0&&(o=n.onRecoverableError)),e=wb(e,null,t,1,n??null,i,!1,s,o),t[Fr]=e.current,Bl(t),r)for(t=0;t<r.length;t++)n=r[t],i=n._getVersion,i=i(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,i]:e.mutableSourceEagerHydrationData.push(n,i);return new td(e)};wn.render=function(t,e,n){if(!nd(e))throw Error(W(200));return rd(null,t,e,!1,n)};wn.unmountComponentAtNode=function(t){if(!nd(t))throw Error(W(40));return t._reactRootContainer?(Ls(function(){rd(null,null,t,!1,function(){t._reactRootContainer=null,t[Fr]=null})}),!0):!1};wn.unstable_batchedUpdates=wg;wn.unstable_renderSubtreeIntoContainer=function(t,e,n,r){if(!nd(n))throw Error(W(200));if(t==null||t._reactInternals===void 0)throw Error(W(38));return rd(t,e,n,!1,r)};wn.version="18.3.1-next-f1338f8080-20240426";function bb(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(bb)}catch(t){console.error(t)}}bb(),b1.exports=wn;var xg=b1.exports;const Px=c1(xg),Rx=u1({__proto__:null,default:Px},[xg]);var W_=xg;tp.createRoot=W_.createRoot,tp.hydrateRoot=W_.hydrateRoot;/**
 * @remix-run/router v1.16.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function qe(){return qe=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},qe.apply(this,arguments)}var at;(function(t){t.Pop="POP",t.Push="PUSH",t.Replace="REPLACE"})(at||(at={}));const q_="popstate";function Nx(t){t===void 0&&(t={});function e(r,i){let{pathname:s,search:o,hash:a}=r.location;return Jl("",{pathname:s,search:o,hash:a},i.state&&i.state.usr||null,i.state&&i.state.key||"default")}function n(r,i){return typeof i=="string"?i:Ds(i)}return Lx(e,n,null,t)}function me(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function ea(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function Ox(){return Math.random().toString(36).substr(2,8)}function G_(t,e){return{usr:t.state,key:t.key,idx:e}}function Jl(t,e,n,r){return n===void 0&&(n=null),qe({pathname:typeof t=="string"?t:t.pathname,search:"",hash:""},typeof e=="string"?Xi(e):e,{state:n,key:e&&e.key||r||Ox()})}function Ds(t){let{pathname:e="/",search:n="",hash:r=""}=t;return n&&n!=="?"&&(e+=n.charAt(0)==="?"?n:"?"+n),r&&r!=="#"&&(e+=r.charAt(0)==="#"?r:"#"+r),e}function Xi(t){let e={};if(t){let n=t.indexOf("#");n>=0&&(e.hash=t.substr(n),t=t.substr(0,n));let r=t.indexOf("?");r>=0&&(e.search=t.substr(r),t=t.substr(0,r)),t&&(e.pathname=t)}return e}function Lx(t,e,n,r){r===void 0&&(r={});let{window:i=document.defaultView,v5Compat:s=!1}=r,o=i.history,a=at.Pop,l=null,c=h();c==null&&(c=0,o.replaceState(qe({},o.state,{idx:c}),""));function h(){return(o.state||{idx:null}).idx}function f(){a=at.Pop;let R=h(),T=R==null?null:R-c;c=R,l&&l({action:a,location:I.location,delta:T})}function p(R,T){a=at.Push;let w=Jl(I.location,R,T);c=h()+1;let C=G_(w,c),D=I.createHref(w);try{o.pushState(C,"",D)}catch(F){if(F instanceof DOMException&&F.name==="DataCloneError")throw F;i.location.assign(D)}s&&l&&l({action:a,location:I.location,delta:1})}function _(R,T){a=at.Replace;let w=Jl(I.location,R,T);c=h();let C=G_(w,c),D=I.createHref(w);o.replaceState(C,"",D),s&&l&&l({action:a,location:I.location,delta:0})}function E(R){let T=i.location.origin!=="null"?i.location.origin:i.location.href,w=typeof R=="string"?R:Ds(R);return w=w.replace(/ $/,"%20"),me(T,"No window.location.(origin|href) available to create URL for href: "+w),new URL(w,T)}let I={get action(){return a},get location(){return t(i,o)},listen(R){if(l)throw new Error("A history only accepts one active listener");return i.addEventListener(q_,f),l=R,()=>{i.removeEventListener(q_,f),l=null}},createHref(R){return e(i,R)},createURL:E,encodeLocation(R){let T=E(R);return{pathname:T.pathname,search:T.search,hash:T.hash}},push:p,replace:_,go(R){return o.go(R)}};return I}var Be;(function(t){t.data="data",t.deferred="deferred",t.redirect="redirect",t.error="error"})(Be||(Be={}));const Dx=new Set(["lazy","caseSensitive","path","id","index","children"]);function Mx(t){return t.index===!0}function Kp(t,e,n,r){return n===void 0&&(n=[]),r===void 0&&(r={}),t.map((i,s)=>{let o=[...n,s],a=typeof i.id=="string"?i.id:o.join("-");if(me(i.index!==!0||!i.children,"Cannot specify children on an index route"),me(!r[a],'Found a route id collision on id "'+a+`".  Route id's must be globally unique within Data Router usages`),Mx(i)){let l=qe({},i,e(i),{id:a});return r[a]=l,l}else{let l=qe({},i,e(i),{id:a,children:void 0});return r[a]=l,i.children&&(l.children=Kp(i.children,e,o,r)),l}})}function Oo(t,e,n){n===void 0&&(n="/");let r=typeof e=="string"?Xi(e):e,i=ya(r.pathname||"/",n);if(i==null)return null;let s=Tb(t);Ux(s);let o=null;for(let a=0;o==null&&a<s.length;++a){let l=Xx(i);o=Gx(s[a],l)}return o}function Vx(t,e){let{route:n,pathname:r,params:i}=t;return{id:n.id,pathname:r,params:i,data:e[n.id],handle:n.handle}}function Tb(t,e,n,r){e===void 0&&(e=[]),n===void 0&&(n=[]),r===void 0&&(r="");let i=(s,o,a)=>{let l={relativePath:a===void 0?s.path||"":a,caseSensitive:s.caseSensitive===!0,childrenIndex:o,route:s};l.relativePath.startsWith("/")&&(me(l.relativePath.startsWith(r),'Absolute route path "'+l.relativePath+'" nested under path '+('"'+r+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),l.relativePath=l.relativePath.slice(r.length));let c=Vr([r,l.relativePath]),h=n.concat(l);s.children&&s.children.length>0&&(me(s.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+c+'".')),Tb(s.children,e,h,c)),!(s.path==null&&!s.index)&&e.push({path:c,score:Wx(c,s.index),routesMeta:h})};return t.forEach((s,o)=>{var a;if(s.path===""||!((a=s.path)!=null&&a.includes("?")))i(s,o);else for(let l of Cb(s.path))i(s,o,l)}),e}function Cb(t){let e=t.split("/");if(e.length===0)return[];let[n,...r]=e,i=n.endsWith("?"),s=n.replace(/\?$/,"");if(r.length===0)return i?[s,""]:[s];let o=Cb(r.join("/")),a=[];return a.push(...o.map(l=>l===""?s:[s,l].join("/"))),i&&a.push(...o),a.map(l=>t.startsWith("/")&&l===""?"/":l)}function Ux(t){t.sort((e,n)=>e.score!==n.score?n.score-e.score:qx(e.routesMeta.map(r=>r.childrenIndex),n.routesMeta.map(r=>r.childrenIndex)))}const $x=/^:[\w-]+$/,Fx=3,jx=2,zx=1,Bx=10,Hx=-2,K_=t=>t==="*";function Wx(t,e){let n=t.split("/"),r=n.length;return n.some(K_)&&(r+=Hx),e&&(r+=jx),n.filter(i=>!K_(i)).reduce((i,s)=>i+($x.test(s)?Fx:s===""?zx:Bx),r)}function qx(t,e){return t.length===e.length&&t.slice(0,-1).every((r,i)=>r===e[i])?t[t.length-1]-e[e.length-1]:0}function Gx(t,e){let{routesMeta:n}=t,r={},i="/",s=[];for(let o=0;o<n.length;++o){let a=n[o],l=o===n.length-1,c=i==="/"?e:e.slice(i.length)||"/",h=Kx({path:a.relativePath,caseSensitive:a.caseSensitive,end:l},c);if(!h)return null;Object.assign(r,h.params);let f=a.route;s.push({params:r,pathname:Vr([i,h.pathname]),pathnameBase:Zx(Vr([i,h.pathnameBase])),route:f}),h.pathnameBase!=="/"&&(i=Vr([i,h.pathnameBase]))}return s}function Kx(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[n,r]=Qx(t.path,t.caseSensitive,t.end),i=e.match(n);if(!i)return null;let s=i[0],o=s.replace(/(.)\/+$/,"$1"),a=i.slice(1);return{params:r.reduce((c,h,f)=>{let{paramName:p,isOptional:_}=h;if(p==="*"){let I=a[f]||"";o=s.slice(0,s.length-I.length).replace(/(.)\/+$/,"$1")}const E=a[f];return _&&!E?c[p]=void 0:c[p]=(E||"").replace(/%2F/g,"/"),c},{}),pathname:s,pathnameBase:o,pattern:t}}function Qx(t,e,n){e===void 0&&(e=!1),n===void 0&&(n=!0),ea(t==="*"||!t.endsWith("*")||t.endsWith("/*"),'Route path "'+t+'" will be treated as if it were '+('"'+t.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+t.replace(/\*$/,"/*")+'".'));let r=[],i="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(o,a,l)=>(r.push({paramName:a,isOptional:l!=null}),l?"/?([^\\/]+)?":"/([^\\/]+)"));return t.endsWith("*")?(r.push({paramName:"*"}),i+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?i+="\\/*$":t!==""&&t!=="/"&&(i+="(?:(?=\\/|$))"),[new RegExp(i,e?void 0:"i"),r]}function Xx(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return ea(!1,'The URL path "'+t+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),t}}function ya(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,r=t.charAt(n);return r&&r!=="/"?null:t.slice(n)||"/"}function Yx(t,e){e===void 0&&(e="/");let{pathname:n,search:r="",hash:i=""}=typeof t=="string"?Xi(t):t;return{pathname:n?n.startsWith("/")?n:Jx(n,e):e,search:ek(r),hash:tk(i)}}function Jx(t,e){let n=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(i=>{i===".."?n.length>1&&n.pop():i!=="."&&n.push(i)}),n.length>1?n.join("/"):"/"}function Lf(t,e,n,r){return"Cannot include a '"+t+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(r)+"].  Please separate it out to the ")+("`to."+n+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function Ib(t){return t.filter((e,n)=>n===0||e.route.path&&e.route.path.length>0)}function id(t,e){let n=Ib(t);return e?n.map((r,i)=>i===t.length-1?r.pathname:r.pathnameBase):n.map(r=>r.pathnameBase)}function sd(t,e,n,r){r===void 0&&(r=!1);let i;typeof t=="string"?i=Xi(t):(i=qe({},t),me(!i.pathname||!i.pathname.includes("?"),Lf("?","pathname","search",i)),me(!i.pathname||!i.pathname.includes("#"),Lf("#","pathname","hash",i)),me(!i.search||!i.search.includes("#"),Lf("#","search","hash",i)));let s=t===""||i.pathname==="",o=s?"/":i.pathname,a;if(o==null)a=n;else{let f=e.length-1;if(!r&&o.startsWith("..")){let p=o.split("/");for(;p[0]==="..";)p.shift(),f-=1;i.pathname=p.join("/")}a=f>=0?e[f]:"/"}let l=Yx(i,a),c=o&&o!=="/"&&o.endsWith("/"),h=(s||o===".")&&n.endsWith("/");return!l.pathname.endsWith("/")&&(c||h)&&(l.pathname+="/"),l}const Vr=t=>t.join("/").replace(/\/\/+/g,"/"),Zx=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),ek=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,tk=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;class kg{constructor(e,n,r,i){i===void 0&&(i=!1),this.status=e,this.statusText=n||"",this.internal=i,r instanceof Error?(this.data=r.toString(),this.error=r):this.data=r}}function Pg(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}const Sb=["post","put","patch","delete"],nk=new Set(Sb),rk=["get",...Sb],ik=new Set(rk),sk=new Set([301,302,303,307,308]),ok=new Set([307,308]),Df={state:"idle",location:void 0,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0},ak={state:"idle",data:void 0,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0},Ja={state:"unblocked",proceed:void 0,reset:void 0,location:void 0},Rg=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,lk=t=>({hasErrorBoundary:!!t.hasErrorBoundary}),Ab="remix-router-transitions";function uk(t){const e=t.window?t.window:typeof window<"u"?window:void 0,n=typeof e<"u"&&typeof e.document<"u"&&typeof e.document.createElement<"u",r=!n;me(t.routes.length>0,"You must provide a non-empty routes array to createRouter");let i;if(t.mapRouteProperties)i=t.mapRouteProperties;else if(t.detectErrorBoundary){let N=t.detectErrorBoundary;i=M=>({hasErrorBoundary:N(M)})}else i=lk;let s={},o=Kp(t.routes,i,void 0,s),a,l=t.basename||"/",c=t.unstable_dataStrategy||fk,h=qe({v7_fetcherPersist:!1,v7_normalizeFormMethod:!1,v7_partialHydration:!1,v7_prependBasename:!1,v7_relativeSplatPath:!1,unstable_skipActionErrorRevalidation:!1},t.future),f=null,p=new Set,_=null,E=null,I=null,R=t.hydrationData!=null,T=Oo(o,t.history.location,l),w=null;if(T==null){let N=In(404,{pathname:t.history.location.pathname}),{matches:M,route:$}=i0(o);T=M,w={[$.id]:N}}let C,D=T.some(N=>N.route.lazy),F=T.some(N=>N.route.loader);if(D)C=!1;else if(!F)C=!0;else if(h.v7_partialHydration){let N=t.hydrationData?t.hydrationData.loaderData:null,M=t.hydrationData?t.hydrationData.errors:null,$=q=>q.route.loader?typeof q.route.loader=="function"&&q.route.loader.hydrate===!0?!1:N&&N[q.route.id]!==void 0||M&&M[q.route.id]!==void 0:!0;if(M){let q=T.findIndex(Q=>M[Q.route.id]!==void 0);C=T.slice(0,q+1).every($)}else C=T.every($)}else C=t.hydrationData!=null;let z,g={historyAction:t.history.action,location:t.history.location,matches:T,initialized:C,navigation:Df,restoreScrollPosition:t.hydrationData!=null?!1:null,preventScrollReset:!1,revalidation:"idle",loaderData:t.hydrationData&&t.hydrationData.loaderData||{},actionData:t.hydrationData&&t.hydrationData.actionData||null,errors:t.hydrationData&&t.hydrationData.errors||w,fetchers:new Map,blockers:new Map},y=at.Pop,b=!1,S,k=!1,P=new Map,x=null,Ie=!1,it=!1,Wt=[],wt=[],H=new Map,ee=0,re=-1,_e=new Map,he=new Set,Pe=new Map,qt=new Map,ht=new Set,Et=new Map,bt=new Map,ka=!1;function Xd(){if(f=t.history.listen(N=>{let{action:M,location:$,delta:q}=N;if(ka){ka=!1;return}ea(bt.size===0||q!=null,"You are trying to use a blocker on a POP navigation to a location that was not created by @remix-run/router. This will fail silently in production. This can happen if you are navigating outside the router via `window.history.pushState`/`window.location.hash` instead of using router navigation APIs.  This can also happen if you are using createHashRouter and the user manually changes the URL.");let Q=io({currentLocation:g.location,nextLocation:$,historyAction:M});if(Q&&q!=null){ka=!0,t.history.go(q*-1),ro(Q,{state:"blocked",location:$,proceed(){ro(Q,{state:"proceeding",proceed:void 0,reset:void 0,location:$}),t.history.go(q)},reset(){let Z=new Map(g.blockers);Z.set(Q,Ja),Tt({blockers:Z})}});return}return Jn(M,$)}),n){Ik(e,P);let N=()=>Sk(e,P);e.addEventListener("pagehide",N),x=()=>e.removeEventListener("pagehide",N)}return g.initialized||Jn(at.Pop,g.location,{initialHydration:!0}),z}function Js(){f&&f(),x&&x(),p.clear(),S&&S.abort(),g.fetchers.forEach((N,M)=>as(M)),g.blockers.forEach((N,M)=>$u(M))}function Zs(N){return p.add(N),()=>p.delete(N)}function Tt(N,M){M===void 0&&(M={}),g=qe({},g,N);let $=[],q=[];h.v7_fetcherPersist&&g.fetchers.forEach((Q,Z)=>{Q.state==="idle"&&(ht.has(Z)?q.push(Z):$.push(Z))}),[...p].forEach(Q=>Q(g,{deletedFetchers:q,unstable_viewTransitionOpts:M.viewTransitionOpts,unstable_flushSync:M.flushSync===!0})),h.v7_fetcherPersist&&($.forEach(Q=>g.fetchers.delete(Q)),q.forEach(Q=>as(Q)))}function mr(N,M,$){var q,Q;let{flushSync:Z}=$===void 0?{}:$,te=g.actionData!=null&&g.navigation.formMethod!=null&&Bn(g.navigation.formMethod)&&g.navigation.state==="loading"&&((q=N.state)==null?void 0:q._isRedirect)!==!0,K;M.actionData?Object.keys(M.actionData).length>0?K=M.actionData:K=null:te?K=g.actionData:K=null;let oe=M.loaderData?n0(g.loaderData,M.loaderData,M.matches||[],M.errors):g.loaderData,ae=g.blockers;ae.size>0&&(ae=new Map(ae),ae.forEach((ie,Oe)=>ae.set(Oe,Ja)));let dt=b===!0||g.navigation.formMethod!=null&&Bn(g.navigation.formMethod)&&((Q=N.state)==null?void 0:Q._isRedirect)!==!0;a&&(o=a,a=void 0),Ie||y===at.Pop||(y===at.Push?t.history.push(N,N.state):y===at.Replace&&t.history.replace(N,N.state));let ze;if(y===at.Pop){let ie=P.get(g.location.pathname);ie&&ie.has(N.pathname)?ze={currentLocation:g.location,nextLocation:N}:P.has(N.pathname)&&(ze={currentLocation:N,nextLocation:g.location})}else if(k){let ie=P.get(g.location.pathname);ie?ie.add(N.pathname):(ie=new Set([N.pathname]),P.set(g.location.pathname,ie)),ze={currentLocation:g.location,nextLocation:N}}Tt(qe({},M,{actionData:K,loaderData:oe,historyAction:y,location:N,initialized:!0,navigation:Df,revalidation:"idle",restoreScrollPosition:oo(N,M.matches||g.matches),preventScrollReset:dt,blockers:ae}),{viewTransitionOpts:ze,flushSync:Z===!0}),y=at.Pop,b=!1,k=!1,Ie=!1,it=!1,Wt=[],wt=[]}async function eo(N,M){if(typeof N=="number"){t.history.go(N);return}let $=Qp(g.location,g.matches,l,h.v7_prependBasename,N,h.v7_relativeSplatPath,M==null?void 0:M.fromRouteId,M==null?void 0:M.relative),{path:q,submission:Q,error:Z}=Q_(h.v7_normalizeFormMethod,!1,$,M),te=g.location,K=Jl(g.location,q,M&&M.state);K=qe({},K,t.history.encodeLocation(K));let oe=M&&M.replace!=null?M.replace:void 0,ae=at.Push;oe===!0?ae=at.Replace:oe===!1||Q!=null&&Bn(Q.formMethod)&&Q.formAction===g.location.pathname+g.location.search&&(ae=at.Replace);let dt=M&&"preventScrollReset"in M?M.preventScrollReset===!0:void 0,ze=(M&&M.unstable_flushSync)===!0,ie=io({currentLocation:te,nextLocation:K,historyAction:ae});if(ie){ro(ie,{state:"blocked",location:K,proceed(){ro(ie,{state:"proceeding",proceed:void 0,reset:void 0,location:K}),eo(N,M)},reset(){let Oe=new Map(g.blockers);Oe.set(ie,Ja),Tt({blockers:Oe})}});return}return await Jn(ae,K,{submission:Q,pendingError:Z,preventScrollReset:dt,replace:M&&M.replace,enableViewTransition:M&&M.unstable_viewTransition,flushSync:ze})}function Pa(){if(no(),Tt({revalidation:"loading"}),g.navigation.state!=="submitting"){if(g.navigation.state==="idle"){Jn(g.historyAction,g.location,{startUninterruptedRevalidation:!0});return}Jn(y||g.historyAction,g.navigation.location,{overrideNavigation:g.navigation})}}async function Jn(N,M,$){S&&S.abort(),S=null,y=N,Ie=($&&$.startUninterruptedRevalidation)===!0,Da(g.location,g.matches),b=($&&$.preventScrollReset)===!0,k=($&&$.enableViewTransition)===!0;let q=a||o,Q=$&&$.overrideNavigation,Z=Oo(q,M,l),te=($&&$.flushSync)===!0;if(!Z){let ie=In(404,{pathname:M.pathname}),{matches:Oe,route:We}=i0(q);so(),mr(M,{matches:Oe,loaderData:{},errors:{[We.id]:ie}},{flushSync:te});return}if(g.initialized&&!it&&_k(g.location,M)&&!($&&$.submission&&Bn($.submission.formMethod))){mr(M,{matches:Z},{flushSync:te});return}S=new AbortController;let K=ho(t.history,M,S.signal,$&&$.submission),oe;if($&&$.pendingError)oe=[kl(Z).route.id,{type:Be.error,error:$.pendingError}];else if($&&$.submission&&Bn($.submission.formMethod)){let ie=await Yd(K,M,$.submission,Z,{replace:$.replace,flushSync:te});if(ie.shortCircuited)return;oe=ie.pendingActionResult,Q=Mf(M,$.submission),te=!1,K=ho(t.history,K.url,K.signal)}let{shortCircuited:ae,loaderData:dt,errors:ze}=await Jd(K,M,Z,Q,$&&$.submission,$&&$.fetcherSubmission,$&&$.replace,$&&$.initialHydration===!0,te,oe);ae||(S=null,mr(M,qe({matches:Z},r0(oe),{loaderData:dt,errors:ze})))}async function Yd(N,M,$,q,Q){Q===void 0&&(Q={}),no();let Z=Tk(M,$);Tt({navigation:Z},{flushSync:Q.flushSync===!0});let te,K=Yp(q,M);if(!K.route.action&&!K.route.lazy)te={type:Be.error,error:In(405,{method:N.method,pathname:M.pathname,routeId:K.route.id})};else if(te=(await gr("action",N,[K],q))[0],N.signal.aborted)return{shortCircuited:!0};if(ws(te)){let oe;return Q&&Q.replace!=null?oe=Q.replace:oe=Z_(te.response.headers.get("Location"),new URL(N.url),l)===g.location.pathname+g.location.search,await ss(N,te,{submission:$,replace:oe}),{shortCircuited:!0}}if(_s(te))throw In(400,{type:"defer-action"});if(xn(te)){let oe=kl(q,K.route.id);return(Q&&Q.replace)!==!0&&(y=at.Push),{pendingActionResult:[oe.route.id,te]}}return{pendingActionResult:[K.route.id,te]}}async function Jd(N,M,$,q,Q,Z,te,K,oe,ae){let dt=q||Mf(M,Q),ze=Q||Z||a0(dt),ie=a||o,[Oe,We]=X_(t.history,g,$,ze,M,h.v7_partialHydration&&K===!0,h.unstable_skipActionErrorRevalidation,it,Wt,wt,ht,Pe,he,ie,l,ae);if(so(ye=>!($&&$.some(Ct=>Ct.route.id===ye))||Oe&&Oe.some(Ct=>Ct.route.id===ye)),re=++ee,Oe.length===0&&We.length===0){let ye=Na();return mr(M,qe({matches:$,loaderData:{},errors:ae&&xn(ae[1])?{[ae[0]]:ae[1].error}:null},r0(ae),ye?{fetchers:new Map(g.fetchers)}:{}),{flushSync:oe}),{shortCircuited:!0}}if(!Ie&&(!h.v7_partialHydration||!K)){We.forEach(Ct=>{let It=g.fetchers.get(Ct.key),st=Za(void 0,It?It.data:void 0);g.fetchers.set(Ct.key,st)});let ye;ae&&!xn(ae[1])?ye={[ae[0]]:ae[1].data}:g.actionData&&(Object.keys(g.actionData).length===0?ye=null:ye=g.actionData),Tt(qe({navigation:dt},ye!==void 0?{actionData:ye}:{},We.length>0?{fetchers:new Map(g.fetchers)}:{}),{flushSync:oe})}We.forEach(ye=>{H.has(ye.key)&&Zn(ye.key),ye.controller&&H.set(ye.key,ye.controller)});let ei=()=>We.forEach(ye=>Zn(ye.key));S&&S.signal.addEventListener("abort",ei);let{loaderResults:bn,fetcherResults:Vn}=await to(g.matches,$,Oe,We,N);if(N.signal.aborted)return{shortCircuited:!0};S&&S.signal.removeEventListener("abort",ei),We.forEach(ye=>H.delete(ye.key));let Gt=s0([...bn,...Vn]);if(Gt){if(Gt.idx>=Oe.length){let ye=We[Gt.idx-Oe.length].key;he.add(ye)}return await ss(N,Gt.result,{replace:te}),{shortCircuited:!0}}let{loaderData:vr,errors:hn}=t0(g,$,Oe,bn,ae,We,Vn,Et);Et.forEach((ye,Ct)=>{ye.subscribe(It=>{(It||ye.done)&&Et.delete(Ct)})}),h.v7_partialHydration&&K&&g.errors&&Object.entries(g.errors).filter(ye=>{let[Ct]=ye;return!Oe.some(It=>It.route.id===Ct)}).forEach(ye=>{let[Ct,It]=ye;hn=Object.assign(hn||{},{[Ct]:It})});let ti=Na(),ni=Oa(re),ls=ti||ni||We.length>0;return qe({loaderData:vr,errors:hn},ls?{fetchers:new Map(g.fetchers)}:{})}function Mu(N,M,$,q){if(r)throw new Error("router.fetch() was called during the server render, but it shouldn't be. You are likely calling a useFetcher() method in the body of your component. Try moving it to a useEffect or a callback.");H.has(N)&&Zn(N);let Q=(q&&q.unstable_flushSync)===!0,Z=a||o,te=Qp(g.location,g.matches,l,h.v7_prependBasename,$,h.v7_relativeSplatPath,M,q==null?void 0:q.relative),K=Oo(Z,te,l);if(!K){et(N,M,In(404,{pathname:te}),{flushSync:Q});return}let{path:oe,submission:ae,error:dt}=Q_(h.v7_normalizeFormMethod,!0,te,q);if(dt){et(N,M,dt,{flushSync:Q});return}let ze=Yp(K,oe);if(b=(q&&q.preventScrollReset)===!0,ae&&Bn(ae.formMethod)){Ra(N,M,oe,ze,K,Q,ae);return}Pe.set(N,{routeId:M,path:oe}),Vu(N,M,oe,ze,K,Q,ae)}async function Ra(N,M,$,q,Q,Z,te){if(no(),Pe.delete(N),!q.route.action&&!q.route.lazy){let st=In(405,{method:te.formMethod,pathname:$,routeId:M});et(N,M,st,{flushSync:Z});return}let K=g.fetchers.get(N);Me(N,Ck(te,K),{flushSync:Z});let oe=new AbortController,ae=ho(t.history,$,oe.signal,te);H.set(N,oe);let dt=ee,ie=(await gr("action",ae,[q],Q))[0];if(ae.signal.aborted){H.get(N)===oe&&H.delete(N);return}if(h.v7_fetcherPersist&&ht.has(N)){if(ws(ie)||xn(ie)){Me(N,ci(void 0));return}}else{if(ws(ie))if(H.delete(N),re>dt){Me(N,ci(void 0));return}else return he.add(N),Me(N,Za(te)),ss(ae,ie,{fetcherSubmission:te});if(xn(ie)){et(N,M,ie.error);return}}if(_s(ie))throw In(400,{type:"defer-action"});let Oe=g.navigation.location||g.location,We=ho(t.history,Oe,oe.signal),ei=a||o,bn=g.navigation.state!=="idle"?Oo(ei,g.navigation.location,l):g.matches;me(bn,"Didn't find any matches after fetcher action");let Vn=++ee;_e.set(N,Vn);let Gt=Za(te,ie.data);g.fetchers.set(N,Gt);let[vr,hn]=X_(t.history,g,bn,te,Oe,!1,h.unstable_skipActionErrorRevalidation,it,Wt,wt,ht,Pe,he,ei,l,[q.route.id,ie]);hn.filter(st=>st.key!==N).forEach(st=>{let _r=st.key,ri=g.fetchers.get(_r),wr=Za(void 0,ri?ri.data:void 0);g.fetchers.set(_r,wr),H.has(_r)&&Zn(_r),st.controller&&H.set(_r,st.controller)}),Tt({fetchers:new Map(g.fetchers)});let ti=()=>hn.forEach(st=>Zn(st.key));oe.signal.addEventListener("abort",ti);let{loaderResults:ni,fetcherResults:ls}=await to(g.matches,bn,vr,hn,We);if(oe.signal.aborted)return;oe.signal.removeEventListener("abort",ti),_e.delete(N),H.delete(N),hn.forEach(st=>H.delete(st.key));let ye=s0([...ni,...ls]);if(ye){if(ye.idx>=vr.length){let st=hn[ye.idx-vr.length].key;he.add(st)}return ss(We,ye.result)}let{loaderData:Ct,errors:It}=t0(g,g.matches,vr,ni,void 0,hn,ls,Et);if(g.fetchers.has(N)){let st=ci(ie.data);g.fetchers.set(N,st)}Oa(Vn),g.navigation.state==="loading"&&Vn>re?(me(y,"Expected pending action"),S&&S.abort(),mr(g.navigation.location,{matches:bn,loaderData:Ct,errors:It,fetchers:new Map(g.fetchers)})):(Tt({errors:It,loaderData:n0(g.loaderData,Ct,bn,It),fetchers:new Map(g.fetchers)}),it=!1)}async function Vu(N,M,$,q,Q,Z,te){let K=g.fetchers.get(N);Me(N,Za(te,K?K.data:void 0),{flushSync:Z});let oe=new AbortController,ae=ho(t.history,$,oe.signal);H.set(N,oe);let dt=ee,ie=(await gr("loader",ae,[q],Q))[0];if(_s(ie)&&(ie=await Rb(ie,ae.signal,!0)||ie),H.get(N)===oe&&H.delete(N),!ae.signal.aborted){if(ht.has(N)){Me(N,ci(void 0));return}if(ws(ie))if(re>dt){Me(N,ci(void 0));return}else{he.add(N),await ss(ae,ie);return}if(xn(ie)){et(N,M,ie.error);return}me(!_s(ie),"Unhandled fetcher deferred data"),Me(N,ci(ie.data))}}async function ss(N,M,$){let{submission:q,fetcherSubmission:Q,replace:Z}=$===void 0?{}:$;M.response.headers.has("X-Remix-Revalidate")&&(it=!0);let te=M.response.headers.get("Location");me(te,"Expected a Location header on the redirect Response"),te=Z_(te,new URL(N.url),l);let K=Jl(g.location,te,{_isRedirect:!0});if(n){let Oe=!1;if(M.response.headers.has("X-Remix-Reload-Document"))Oe=!0;else if(Rg.test(te)){const We=t.history.createURL(te);Oe=We.origin!==e.location.origin||ya(We.pathname,l)==null}if(Oe){Z?e.location.replace(te):e.location.assign(te);return}}S=null;let oe=Z===!0?at.Replace:at.Push,{formMethod:ae,formAction:dt,formEncType:ze}=g.navigation;!q&&!Q&&ae&&dt&&ze&&(q=a0(g.navigation));let ie=q||Q;if(ok.has(M.response.status)&&ie&&Bn(ie.formMethod))await Jn(oe,K,{submission:qe({},ie,{formAction:te}),preventScrollReset:b});else{let Oe=Mf(K,q);await Jn(oe,K,{overrideNavigation:Oe,fetcherSubmission:Q,preventScrollReset:b})}}async function gr(N,M,$,q){try{let Q=await pk(c,N,M,$,q,s,i);return await Promise.all(Q.map((Z,te)=>{if(wk(Z)){let K=Z.result;return{type:Be.redirect,response:yk(K,M,$[te].route.id,q,l,h.v7_relativeSplatPath)}}return gk(Z)}))}catch(Q){return $.map(()=>({type:Be.error,error:Q}))}}async function to(N,M,$,q,Q){let[Z,...te]=await Promise.all([$.length?gr("loader",Q,$,M):[],...q.map(K=>{if(K.matches&&K.match&&K.controller){let oe=ho(t.history,K.path,K.controller.signal);return gr("loader",oe,[K.match],K.matches).then(ae=>ae[0])}else return Promise.resolve({type:Be.error,error:In(404,{pathname:K.path})})})]);return await Promise.all([o0(N,$,Z,Z.map(()=>Q.signal),!1,g.loaderData),o0(N,q.map(K=>K.match),te,q.map(K=>K.controller?K.controller.signal:null),!0)]),{loaderResults:Z,fetcherResults:te}}function no(){it=!0,Wt.push(...so()),Pe.forEach((N,M)=>{H.has(M)&&(wt.push(M),Zn(M))})}function Me(N,M,$){$===void 0&&($={}),g.fetchers.set(N,M),Tt({fetchers:new Map(g.fetchers)},{flushSync:($&&$.flushSync)===!0})}function et(N,M,$,q){q===void 0&&(q={});let Q=kl(g.matches,M);as(N),Tt({errors:{[Q.route.id]:$},fetchers:new Map(g.fetchers)},{flushSync:(q&&q.flushSync)===!0})}function os(N){return h.v7_fetcherPersist&&(qt.set(N,(qt.get(N)||0)+1),ht.has(N)&&ht.delete(N)),g.fetchers.get(N)||ak}function as(N){let M=g.fetchers.get(N);H.has(N)&&!(M&&M.state==="loading"&&_e.has(N))&&Zn(N),Pe.delete(N),_e.delete(N),he.delete(N),ht.delete(N),g.fetchers.delete(N)}function Uu(N){if(h.v7_fetcherPersist){let M=(qt.get(N)||0)-1;M<=0?(qt.delete(N),ht.add(N)):qt.set(N,M)}else as(N);Tt({fetchers:new Map(g.fetchers)})}function Zn(N){let M=H.get(N);me(M,"Expected fetch controller: "+N),M.abort(),H.delete(N)}function Jr(N){for(let M of N){let $=os(M),q=ci($.data);g.fetchers.set(M,q)}}function Na(){let N=[],M=!1;for(let $ of he){let q=g.fetchers.get($);me(q,"Expected fetcher: "+$),q.state==="loading"&&(he.delete($),N.push($),M=!0)}return Jr(N),M}function Oa(N){let M=[];for(let[$,q]of _e)if(q<N){let Q=g.fetchers.get($);me(Q,"Expected fetcher: "+$),Q.state==="loading"&&(Zn($),_e.delete($),M.push($))}return Jr(M),M.length>0}function La(N,M){let $=g.blockers.get(N)||Ja;return bt.get(N)!==M&&bt.set(N,M),$}function $u(N){g.blockers.delete(N),bt.delete(N)}function ro(N,M){let $=g.blockers.get(N)||Ja;me($.state==="unblocked"&&M.state==="blocked"||$.state==="blocked"&&M.state==="blocked"||$.state==="blocked"&&M.state==="proceeding"||$.state==="blocked"&&M.state==="unblocked"||$.state==="proceeding"&&M.state==="unblocked","Invalid blocker state transition: "+$.state+" -> "+M.state);let q=new Map(g.blockers);q.set(N,M),Tt({blockers:q})}function io(N){let{currentLocation:M,nextLocation:$,historyAction:q}=N;if(bt.size===0)return;bt.size>1&&ea(!1,"A router only supports one blocker at a time");let Q=Array.from(bt.entries()),[Z,te]=Q[Q.length-1],K=g.blockers.get(Z);if(!(K&&K.state==="proceeding")&&te({currentLocation:M,nextLocation:$,historyAction:q}))return Z}function so(N){let M=[];return Et.forEach(($,q)=>{(!N||N(q))&&($.cancel(),M.push(q),Et.delete(q))}),M}function Fu(N,M,$){if(_=N,I=M,E=$||null,!R&&g.navigation===Df){R=!0;let q=oo(g.location,g.matches);q!=null&&Tt({restoreScrollPosition:q})}return()=>{_=null,I=null,E=null}}function Zr(N,M){return E&&E(N,M.map(q=>Vx(q,g.loaderData)))||N.key}function Da(N,M){if(_&&I){let $=Zr(N,M);_[$]=I()}}function oo(N,M){if(_){let $=Zr(N,M),q=_[$];if(typeof q=="number")return q}return null}function yr(N){s={},a=Kp(N,i,void 0,s)}return z={get basename(){return l},get future(){return h},get state(){return g},get routes(){return o},get window(){return e},initialize:Xd,subscribe:Zs,enableScrollRestoration:Fu,navigate:eo,fetch:Mu,revalidate:Pa,createHref:N=>t.history.createHref(N),encodeLocation:N=>t.history.encodeLocation(N),getFetcher:os,deleteFetcher:Uu,dispose:Js,getBlocker:La,deleteBlocker:$u,_internalFetchControllers:H,_internalActiveDeferreds:Et,_internalSetRoutes:yr},z}function ck(t){return t!=null&&("formData"in t&&t.formData!=null||"body"in t&&t.body!==void 0)}function Qp(t,e,n,r,i,s,o,a){let l,c;if(o){l=[];for(let f of e)if(l.push(f),f.route.id===o){c=f;break}}else l=e,c=e[e.length-1];let h=sd(i||".",id(l,s),ya(t.pathname,n)||t.pathname,a==="path");return i==null&&(h.search=t.search,h.hash=t.hash),(i==null||i===""||i===".")&&c&&c.route.index&&!Ng(h.search)&&(h.search=h.search?h.search.replace(/^\?/,"?index&"):"?index"),r&&n!=="/"&&(h.pathname=h.pathname==="/"?n:Vr([n,h.pathname])),Ds(h)}function Q_(t,e,n,r){if(!r||!ck(r))return{path:n};if(r.formMethod&&!bk(r.formMethod))return{path:n,error:In(405,{method:r.formMethod})};let i=()=>({path:n,error:In(400,{type:"invalid-body"})}),s=r.formMethod||"get",o=t?s.toUpperCase():s.toLowerCase(),a=kb(n);if(r.body!==void 0){if(r.formEncType==="text/plain"){if(!Bn(o))return i();let p=typeof r.body=="string"?r.body:r.body instanceof FormData||r.body instanceof URLSearchParams?Array.from(r.body.entries()).reduce((_,E)=>{let[I,R]=E;return""+_+I+"="+R+`
`},""):String(r.body);return{path:n,submission:{formMethod:o,formAction:a,formEncType:r.formEncType,formData:void 0,json:void 0,text:p}}}else if(r.formEncType==="application/json"){if(!Bn(o))return i();try{let p=typeof r.body=="string"?JSON.parse(r.body):r.body;return{path:n,submission:{formMethod:o,formAction:a,formEncType:r.formEncType,formData:void 0,json:p,text:void 0}}}catch{return i()}}}me(typeof FormData=="function","FormData is not available in this environment");let l,c;if(r.formData)l=Xp(r.formData),c=r.formData;else if(r.body instanceof FormData)l=Xp(r.body),c=r.body;else if(r.body instanceof URLSearchParams)l=r.body,c=e0(l);else if(r.body==null)l=new URLSearchParams,c=new FormData;else try{l=new URLSearchParams(r.body),c=e0(l)}catch{return i()}let h={formMethod:o,formAction:a,formEncType:r&&r.formEncType||"application/x-www-form-urlencoded",formData:c,json:void 0,text:void 0};if(Bn(h.formMethod))return{path:n,submission:h};let f=Xi(n);return e&&f.search&&Ng(f.search)&&l.append("index",""),f.search="?"+l,{path:Ds(f),submission:h}}function hk(t,e){let n=t;if(e){let r=t.findIndex(i=>i.route.id===e);r>=0&&(n=t.slice(0,r))}return n}function X_(t,e,n,r,i,s,o,a,l,c,h,f,p,_,E,I){let R=I?xn(I[1])?I[1].error:I[1].data:void 0,T=t.createURL(e.location),w=t.createURL(i),C=I&&xn(I[1])?I[0]:void 0,D=C?hk(n,C):n,F=I?I[1].statusCode:void 0,z=o&&F&&F>=400,g=D.filter((b,S)=>{let{route:k}=b;if(k.lazy)return!0;if(k.loader==null)return!1;if(s)return typeof k.loader!="function"||k.loader.hydrate?!0:e.loaderData[k.id]===void 0&&(!e.errors||e.errors[k.id]===void 0);if(dk(e.loaderData,e.matches[S],b)||l.some(Ie=>Ie===b.route.id))return!0;let P=e.matches[S],x=b;return Y_(b,qe({currentUrl:T,currentParams:P.params,nextUrl:w,nextParams:x.params},r,{actionResult:R,unstable_actionStatus:F,defaultShouldRevalidate:z?!1:a||T.pathname+T.search===w.pathname+w.search||T.search!==w.search||xb(P,x)}))}),y=[];return f.forEach((b,S)=>{if(s||!n.some(it=>it.route.id===b.routeId)||h.has(S))return;let k=Oo(_,b.path,E);if(!k){y.push({key:S,routeId:b.routeId,path:b.path,matches:null,match:null,controller:null});return}let P=e.fetchers.get(S),x=Yp(k,b.path),Ie=!1;p.has(S)?Ie=!1:c.includes(S)?Ie=!0:P&&P.state!=="idle"&&P.data===void 0?Ie=a:Ie=Y_(x,qe({currentUrl:T,currentParams:e.matches[e.matches.length-1].params,nextUrl:w,nextParams:n[n.length-1].params},r,{actionResult:R,unstable_actionStatus:F,defaultShouldRevalidate:z?!1:a})),Ie&&y.push({key:S,routeId:b.routeId,path:b.path,matches:k,match:x,controller:new AbortController})}),[g,y]}function dk(t,e,n){let r=!e||n.route.id!==e.route.id,i=t[n.route.id]===void 0;return r||i}function xb(t,e){let n=t.route.path;return t.pathname!==e.pathname||n!=null&&n.endsWith("*")&&t.params["*"]!==e.params["*"]}function Y_(t,e){if(t.route.shouldRevalidate){let n=t.route.shouldRevalidate(e);if(typeof n=="boolean")return n}return e.defaultShouldRevalidate}async function J_(t,e,n){if(!t.lazy)return;let r=await t.lazy();if(!t.lazy)return;let i=n[t.id];me(i,"No route found in manifest");let s={};for(let o in r){let l=i[o]!==void 0&&o!=="hasErrorBoundary";ea(!l,'Route "'+i.id+'" has a static property "'+o+'" defined but its lazy function is also returning a value for this property. '+('The lazy route property "'+o+'" will be ignored.')),!l&&!Dx.has(o)&&(s[o]=r[o])}Object.assign(i,s),Object.assign(i,qe({},e(i),{lazy:void 0}))}function fk(t){return Promise.all(t.matches.map(e=>e.resolve()))}async function pk(t,e,n,r,i,s,o,a){let l=r.reduce((f,p)=>f.add(p.route.id),new Set),c=new Set,h=await t({matches:i.map(f=>{let p=l.has(f.route.id);return qe({},f,{shouldLoad:p,resolve:E=>(c.add(f.route.id),p?mk(e,n,f,s,o,E,a):Promise.resolve({type:Be.data,result:void 0}))})}),request:n,params:i[0].params,context:a});return i.forEach(f=>me(c.has(f.route.id),'`match.resolve()` was not called for route id "'+f.route.id+'". You must call `match.resolve()` on every match passed to `dataStrategy` to ensure all routes are properly loaded.')),h.filter((f,p)=>l.has(i[p].route.id))}async function mk(t,e,n,r,i,s,o){let a,l,c=h=>{let f,p=new Promise((I,R)=>f=R);l=()=>f(),e.signal.addEventListener("abort",l);let _=I=>typeof h!="function"?Promise.reject(new Error("You cannot call the handler for a route which defines a boolean "+('"'+t+'" [routeId: '+n.route.id+"]"))):h({request:e,params:n.params,context:o},...I!==void 0?[I]:[]),E;return s?E=s(I=>_(I)):E=(async()=>{try{return{type:"data",result:await _()}}catch(I){return{type:"error",result:I}}})(),Promise.race([E,p])};try{let h=n.route[t];if(n.route.lazy)if(h){let f,[p]=await Promise.all([c(h).catch(_=>{f=_}),J_(n.route,i,r)]);if(f!==void 0)throw f;a=p}else if(await J_(n.route,i,r),h=n.route[t],h)a=await c(h);else if(t==="action"){let f=new URL(e.url),p=f.pathname+f.search;throw In(405,{method:e.method,pathname:p,routeId:n.route.id})}else return{type:Be.data,result:void 0};else if(h)a=await c(h);else{let f=new URL(e.url),p=f.pathname+f.search;throw In(404,{pathname:p})}me(a.result!==void 0,"You defined "+(t==="action"?"an action":"a loader")+" for route "+('"'+n.route.id+"\" but didn't return anything from your `"+t+"` ")+"function. Please return a value or `null`.")}catch(h){return{type:Be.error,result:h}}finally{l&&e.signal.removeEventListener("abort",l)}return a}async function gk(t){let{result:e,type:n,status:r}=t;if(Pb(e)){let o;try{let a=e.headers.get("Content-Type");a&&/\bapplication\/json\b/.test(a)?e.body==null?o=null:o=await e.json():o=await e.text()}catch(a){return{type:Be.error,error:a}}return n===Be.error?{type:Be.error,error:new kg(e.status,e.statusText,o),statusCode:e.status,headers:e.headers}:{type:Be.data,data:o,statusCode:e.status,headers:e.headers}}if(n===Be.error)return{type:Be.error,error:e,statusCode:Pg(e)?e.status:r};if(Ek(e)){var i,s;return{type:Be.deferred,deferredData:e,statusCode:(i=e.init)==null?void 0:i.status,headers:((s=e.init)==null?void 0:s.headers)&&new Headers(e.init.headers)}}return{type:Be.data,data:e,statusCode:r}}function yk(t,e,n,r,i,s){let o=t.headers.get("Location");if(me(o,"Redirects returned/thrown from loaders/actions must have a Location header"),!Rg.test(o)){let a=r.slice(0,r.findIndex(l=>l.route.id===n)+1);o=Qp(new URL(e.url),a,i,!0,o,s),t.headers.set("Location",o)}return t}function Z_(t,e,n){if(Rg.test(t)){let r=t,i=r.startsWith("//")?new URL(e.protocol+r):new URL(r),s=ya(i.pathname,n)!=null;if(i.origin===e.origin&&s)return i.pathname+i.search+i.hash}return t}function ho(t,e,n,r){let i=t.createURL(kb(e)).toString(),s={signal:n};if(r&&Bn(r.formMethod)){let{formMethod:o,formEncType:a}=r;s.method=o.toUpperCase(),a==="application/json"?(s.headers=new Headers({"Content-Type":a}),s.body=JSON.stringify(r.json)):a==="text/plain"?s.body=r.text:a==="application/x-www-form-urlencoded"&&r.formData?s.body=Xp(r.formData):s.body=r.formData}return new Request(i,s)}function Xp(t){let e=new URLSearchParams;for(let[n,r]of t.entries())e.append(n,typeof r=="string"?r:r.name);return e}function e0(t){let e=new FormData;for(let[n,r]of t.entries())e.append(n,r);return e}function vk(t,e,n,r,i,s){let o={},a=null,l,c=!1,h={},f=r&&xn(r[1])?r[1].error:void 0;return n.forEach((p,_)=>{let E=e[_].route.id;if(me(!ws(p),"Cannot handle redirect results in processLoaderData"),xn(p)){let I=p.error;f!==void 0&&(I=f,f=void 0),a=a||{};{let R=kl(t,E);a[R.route.id]==null&&(a[R.route.id]=I)}o[E]=void 0,c||(c=!0,l=Pg(p.error)?p.error.status:500),p.headers&&(h[E]=p.headers)}else _s(p)?(i.set(E,p.deferredData),o[E]=p.deferredData.data,p.statusCode!=null&&p.statusCode!==200&&!c&&(l=p.statusCode),p.headers&&(h[E]=p.headers)):(o[E]=p.data,p.statusCode&&p.statusCode!==200&&!c&&(l=p.statusCode),p.headers&&(h[E]=p.headers))}),f!==void 0&&r&&(a={[r[0]]:f},o[r[0]]=void 0),{loaderData:o,errors:a,statusCode:l||200,loaderHeaders:h}}function t0(t,e,n,r,i,s,o,a){let{loaderData:l,errors:c}=vk(e,n,r,i,a);for(let h=0;h<s.length;h++){let{key:f,match:p,controller:_}=s[h];me(o!==void 0&&o[h]!==void 0,"Did not find corresponding fetcher result");let E=o[h];if(!(_&&_.signal.aborted))if(xn(E)){let I=kl(t.matches,p==null?void 0:p.route.id);c&&c[I.route.id]||(c=qe({},c,{[I.route.id]:E.error})),t.fetchers.delete(f)}else if(ws(E))me(!1,"Unhandled fetcher revalidation redirect");else if(_s(E))me(!1,"Unhandled fetcher deferred data");else{let I=ci(E.data);t.fetchers.set(f,I)}}return{loaderData:l,errors:c}}function n0(t,e,n,r){let i=qe({},e);for(let s of n){let o=s.route.id;if(e.hasOwnProperty(o)?e[o]!==void 0&&(i[o]=e[o]):t[o]!==void 0&&s.route.loader&&(i[o]=t[o]),r&&r.hasOwnProperty(o))break}return i}function r0(t){return t?xn(t[1])?{actionData:{}}:{actionData:{[t[0]]:t[1].data}}:{}}function kl(t,e){return(e?t.slice(0,t.findIndex(r=>r.route.id===e)+1):[...t]).reverse().find(r=>r.route.hasErrorBoundary===!0)||t[0]}function i0(t){let e=t.length===1?t[0]:t.find(n=>n.index||!n.path||n.path==="/")||{id:"__shim-error-route__"};return{matches:[{params:{},pathname:"",pathnameBase:"",route:e}],route:e}}function In(t,e){let{pathname:n,routeId:r,method:i,type:s}=e===void 0?{}:e,o="Unknown Server Error",a="Unknown @remix-run/router error";return t===400?(o="Bad Request",i&&n&&r?a="You made a "+i+' request to "'+n+'" but '+('did not provide a `loader` for route "'+r+'", ')+"so there is no way to handle the request.":s==="defer-action"?a="defer() is not supported in actions":s==="invalid-body"&&(a="Unable to encode submission body")):t===403?(o="Forbidden",a='Route "'+r+'" does not match URL "'+n+'"'):t===404?(o="Not Found",a='No route matches URL "'+n+'"'):t===405&&(o="Method Not Allowed",i&&n&&r?a="You made a "+i.toUpperCase()+' request to "'+n+'" but '+('did not provide an `action` for route "'+r+'", ')+"so there is no way to handle the request.":i&&(a='Invalid request method "'+i.toUpperCase()+'"')),new kg(t||500,o,new Error(a),!0)}function s0(t){for(let e=t.length-1;e>=0;e--){let n=t[e];if(ws(n))return{result:n,idx:e}}}function kb(t){let e=typeof t=="string"?Xi(t):t;return Ds(qe({},e,{hash:""}))}function _k(t,e){return t.pathname!==e.pathname||t.search!==e.search?!1:t.hash===""?e.hash!=="":t.hash===e.hash?!0:e.hash!==""}function wk(t){return Pb(t.result)&&sk.has(t.result.status)}function _s(t){return t.type===Be.deferred}function xn(t){return t.type===Be.error}function ws(t){return(t&&t.type)===Be.redirect}function Ek(t){let e=t;return e&&typeof e=="object"&&typeof e.data=="object"&&typeof e.subscribe=="function"&&typeof e.cancel=="function"&&typeof e.resolveData=="function"}function Pb(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.headers=="object"&&typeof t.body<"u"}function bk(t){return ik.has(t.toLowerCase())}function Bn(t){return nk.has(t.toLowerCase())}async function o0(t,e,n,r,i,s){for(let o=0;o<n.length;o++){let a=n[o],l=e[o];if(!l)continue;let c=t.find(f=>f.route.id===l.route.id),h=c!=null&&!xb(c,l)&&(s&&s[l.route.id])!==void 0;if(_s(a)&&(i||h)){let f=r[o];me(f,"Expected an AbortSignal for revalidating fetcher deferred result"),await Rb(a,f,i).then(p=>{p&&(n[o]=p||n[o])})}}}async function Rb(t,e,n){if(n===void 0&&(n=!1),!await t.deferredData.resolveData(e)){if(n)try{return{type:Be.data,data:t.deferredData.unwrappedData}}catch(i){return{type:Be.error,error:i}}return{type:Be.data,data:t.deferredData.data}}}function Ng(t){return new URLSearchParams(t).getAll("index").some(e=>e==="")}function Yp(t,e){let n=typeof e=="string"?Xi(e).search:e.search;if(t[t.length-1].route.index&&Ng(n||""))return t[t.length-1];let r=Ib(t);return r[r.length-1]}function a0(t){let{formMethod:e,formAction:n,formEncType:r,text:i,formData:s,json:o}=t;if(!(!e||!n||!r)){if(i!=null)return{formMethod:e,formAction:n,formEncType:r,formData:void 0,json:void 0,text:i};if(s!=null)return{formMethod:e,formAction:n,formEncType:r,formData:s,json:void 0,text:void 0};if(o!==void 0)return{formMethod:e,formAction:n,formEncType:r,formData:void 0,json:o,text:void 0}}}function Mf(t,e){return e?{state:"loading",location:t,formMethod:e.formMethod,formAction:e.formAction,formEncType:e.formEncType,formData:e.formData,json:e.json,text:e.text}:{state:"loading",location:t,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0}}function Tk(t,e){return{state:"submitting",location:t,formMethod:e.formMethod,formAction:e.formAction,formEncType:e.formEncType,formData:e.formData,json:e.json,text:e.text}}function Za(t,e){return t?{state:"loading",formMethod:t.formMethod,formAction:t.formAction,formEncType:t.formEncType,formData:t.formData,json:t.json,text:t.text,data:e}:{state:"loading",formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0,data:e}}function Ck(t,e){return{state:"submitting",formMethod:t.formMethod,formAction:t.formAction,formEncType:t.formEncType,formData:t.formData,json:t.json,text:t.text,data:e?e.data:void 0}}function ci(t){return{state:"idle",formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0,data:t}}function Ik(t,e){try{let n=t.sessionStorage.getItem(Ab);if(n){let r=JSON.parse(n);for(let[i,s]of Object.entries(r||{}))s&&Array.isArray(s)&&e.set(i,new Set(s||[]))}}catch{}}function Sk(t,e){if(e.size>0){let n={};for(let[r,i]of e)n[r]=[...i];try{t.sessionStorage.setItem(Ab,JSON.stringify(n))}catch(r){ea(!1,"Failed to save applied view transitions in sessionStorage ("+r+").")}}}/**
 * React Router v6.23.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function _h(){return _h=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},_h.apply(this,arguments)}const od=L.createContext(null),Nb=L.createContext(null),Yi=L.createContext(null),Og=L.createContext(null),Qr=L.createContext({outlet:null,matches:[],isDataRoute:!1}),Ob=L.createContext(null);function Ak(t,e){let{relative:n}=e===void 0?{}:e;va()||me(!1);let{basename:r,navigator:i}=L.useContext(Yi),{hash:s,pathname:o,search:a}=Db(t,{relative:n}),l=o;return r!=="/"&&(l=o==="/"?r:Vr([r,o])),i.createHref({pathname:l,search:a,hash:s})}function va(){return L.useContext(Og)!=null}function Gs(){return va()||me(!1),L.useContext(Og).location}function Lb(t){L.useContext(Yi).static||L.useLayoutEffect(t)}function yu(){let{isDataRoute:t}=L.useContext(Qr);return t?jk():xk()}function xk(){va()||me(!1);let t=L.useContext(od),{basename:e,future:n,navigator:r}=L.useContext(Yi),{matches:i}=L.useContext(Qr),{pathname:s}=Gs(),o=JSON.stringify(id(i,n.v7_relativeSplatPath)),a=L.useRef(!1);return Lb(()=>{a.current=!0}),L.useCallback(function(c,h){if(h===void 0&&(h={}),!a.current)return;if(typeof c=="number"){r.go(c);return}let f=sd(c,JSON.parse(o),s,h.relative==="path");t==null&&e!=="/"&&(f.pathname=f.pathname==="/"?e:Vr([e,f.pathname])),(h.replace?r.replace:r.push)(f,h.state,h)},[e,r,o,s,t])}const kk=L.createContext(null);function Pk(t){let e=L.useContext(Qr).outlet;return e&&L.createElement(kk.Provider,{value:t},e)}function Db(t,e){let{relative:n}=e===void 0?{}:e,{future:r}=L.useContext(Yi),{matches:i}=L.useContext(Qr),{pathname:s}=Gs(),o=JSON.stringify(id(i,r.v7_relativeSplatPath));return L.useMemo(()=>sd(t,JSON.parse(o),s,n==="path"),[t,o,s,n])}function Rk(t,e,n,r){va()||me(!1);let{navigator:i}=L.useContext(Yi),{matches:s}=L.useContext(Qr),o=s[s.length-1],a=o?o.params:{};o&&o.pathname;let l=o?o.pathnameBase:"/";o&&o.route;let c=Gs(),h;h=c;let f=h.pathname||"/",p=f;if(l!=="/"){let I=l.replace(/^\//,"").split("/");p="/"+f.replace(/^\//,"").split("/").slice(I.length).join("/")}let _=Oo(t,{pathname:p});return Mk(_&&_.map(I=>Object.assign({},I,{params:Object.assign({},a,I.params),pathname:Vr([l,i.encodeLocation?i.encodeLocation(I.pathname).pathname:I.pathname]),pathnameBase:I.pathnameBase==="/"?l:Vr([l,i.encodeLocation?i.encodeLocation(I.pathnameBase).pathname:I.pathnameBase])})),s,n,r)}function Nk(){let t=Fk(),e=Pg(t)?t.status+" "+t.statusText:t instanceof Error?t.message:JSON.stringify(t),n=t instanceof Error?t.stack:null,i={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return L.createElement(L.Fragment,null,L.createElement("h2",null,"Unexpected Application Error!"),L.createElement("h3",{style:{fontStyle:"italic"}},e),n?L.createElement("pre",{style:i},n):null,null)}const Ok=L.createElement(Nk,null);class Lk extends L.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,n){return n.location!==e.location||n.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:n.error,location:n.location,revalidation:e.revalidation||n.revalidation}}componentDidCatch(e,n){console.error("React Router caught the following error during render",e,n)}render(){return this.state.error!==void 0?L.createElement(Qr.Provider,{value:this.props.routeContext},L.createElement(Ob.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function Dk(t){let{routeContext:e,match:n,children:r}=t,i=L.useContext(od);return i&&i.static&&i.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(i.staticContext._deepestRenderedBoundaryId=n.route.id),L.createElement(Qr.Provider,{value:e},r)}function Mk(t,e,n,r){var i;if(e===void 0&&(e=[]),n===void 0&&(n=null),r===void 0&&(r=null),t==null){var s;if((s=n)!=null&&s.errors)t=n.matches;else return null}let o=t,a=(i=n)==null?void 0:i.errors;if(a!=null){let h=o.findIndex(f=>f.route.id&&(a==null?void 0:a[f.route.id])!==void 0);h>=0||me(!1),o=o.slice(0,Math.min(o.length,h+1))}let l=!1,c=-1;if(n&&r&&r.v7_partialHydration)for(let h=0;h<o.length;h++){let f=o[h];if((f.route.HydrateFallback||f.route.hydrateFallbackElement)&&(c=h),f.route.id){let{loaderData:p,errors:_}=n,E=f.route.loader&&p[f.route.id]===void 0&&(!_||_[f.route.id]===void 0);if(f.route.lazy||E){l=!0,c>=0?o=o.slice(0,c+1):o=[o[0]];break}}}return o.reduceRight((h,f,p)=>{let _,E=!1,I=null,R=null;n&&(_=a&&f.route.id?a[f.route.id]:void 0,I=f.route.errorElement||Ok,l&&(c<0&&p===0?(E=!0,R=null):c===p&&(E=!0,R=f.route.hydrateFallbackElement||null)));let T=e.concat(o.slice(0,p+1)),w=()=>{let C;return _?C=I:E?C=R:f.route.Component?C=L.createElement(f.route.Component,null):f.route.element?C=f.route.element:C=h,L.createElement(Dk,{match:f,routeContext:{outlet:h,matches:T,isDataRoute:n!=null},children:C})};return n&&(f.route.ErrorBoundary||f.route.errorElement||p===0)?L.createElement(Lk,{location:n.location,revalidation:n.revalidation,component:I,error:_,children:w(),routeContext:{outlet:null,matches:T,isDataRoute:!0}}):w()},null)}var Mb=function(t){return t.UseBlocker="useBlocker",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t}(Mb||{}),wh=function(t){return t.UseBlocker="useBlocker",t.UseLoaderData="useLoaderData",t.UseActionData="useActionData",t.UseRouteError="useRouteError",t.UseNavigation="useNavigation",t.UseRouteLoaderData="useRouteLoaderData",t.UseMatches="useMatches",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t.UseRouteId="useRouteId",t}(wh||{});function Vk(t){let e=L.useContext(od);return e||me(!1),e}function Uk(t){let e=L.useContext(Nb);return e||me(!1),e}function $k(t){let e=L.useContext(Qr);return e||me(!1),e}function Vb(t){let e=$k(),n=e.matches[e.matches.length-1];return n.route.id||me(!1),n.route.id}function Fk(){var t;let e=L.useContext(Ob),n=Uk(wh.UseRouteError),r=Vb(wh.UseRouteError);return e!==void 0?e:(t=n.errors)==null?void 0:t[r]}function jk(){let{router:t}=Vk(Mb.UseNavigateStable),e=Vb(wh.UseNavigateStable),n=L.useRef(!1);return Lb(()=>{n.current=!0}),L.useCallback(function(i,s){s===void 0&&(s={}),n.current&&(typeof i=="number"?t.navigate(i):t.navigate(i,_h({fromRouteId:e},s)))},[t,e])}function zk(t){let{to:e,replace:n,state:r,relative:i}=t;va()||me(!1);let{future:s,static:o}=L.useContext(Yi),{matches:a}=L.useContext(Qr),{pathname:l}=Gs(),c=yu(),h=sd(e,id(a,s.v7_relativeSplatPath),l,i==="path"),f=JSON.stringify(h);return L.useEffect(()=>c(JSON.parse(f),{replace:n,state:r,relative:i}),[c,f,i,n,r]),null}function Bk(t){return Pk(t.context)}function Hk(t){let{basename:e="/",children:n=null,location:r,navigationType:i=at.Pop,navigator:s,static:o=!1,future:a}=t;va()&&me(!1);let l=e.replace(/^\/*/,"/"),c=L.useMemo(()=>({basename:l,navigator:s,static:o,future:_h({v7_relativeSplatPath:!1},a)}),[l,a,s,o]);typeof r=="string"&&(r=Xi(r));let{pathname:h="/",search:f="",hash:p="",state:_=null,key:E="default"}=r,I=L.useMemo(()=>{let R=ya(h,l);return R==null?null:{location:{pathname:R,search:f,hash:p,state:_,key:E},navigationType:i}},[l,h,f,p,_,E,i]);return I==null?null:L.createElement(Yi.Provider,{value:c},L.createElement(Og.Provider,{children:n,value:I}))}new Promise(()=>{});function Wk(t){let e={hasErrorBoundary:t.ErrorBoundary!=null||t.errorElement!=null};return t.Component&&Object.assign(e,{element:L.createElement(t.Component),Component:void 0}),t.HydrateFallback&&Object.assign(e,{hydrateFallbackElement:L.createElement(t.HydrateFallback),HydrateFallback:void 0}),t.ErrorBoundary&&Object.assign(e,{errorElement:L.createElement(t.ErrorBoundary),ErrorBoundary:void 0}),e}/**
 * React Router DOM v6.23.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Zl(){return Zl=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Zl.apply(this,arguments)}function qk(t,e){if(t==null)return{};var n={},r=Object.keys(t),i,s;for(s=0;s<r.length;s++)i=r[s],!(e.indexOf(i)>=0)&&(n[i]=t[i]);return n}function Gk(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function Kk(t,e){return t.button===0&&(!e||e==="_self")&&!Gk(t)}const Qk=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","unstable_viewTransition"],Xk="6";try{window.__reactRouterVersion=Xk}catch{}function Yk(t,e){return uk({basename:void 0,future:Zl({},void 0,{v7_prependBasename:!0}),history:Nx({window:void 0}),hydrationData:Jk(),routes:t,mapRouteProperties:Wk,unstable_dataStrategy:void 0,window:void 0}).initialize()}function Jk(){var t;let e=(t=window)==null?void 0:t.__staticRouterHydrationData;return e&&e.errors&&(e=Zl({},e,{errors:Zk(e.errors)})),e}function Zk(t){if(!t)return null;let e=Object.entries(t),n={};for(let[r,i]of e)if(i&&i.__type==="RouteErrorResponse")n[r]=new kg(i.status,i.statusText,i.data,i.internal===!0);else if(i&&i.__type==="Error"){if(i.__subType){let s=window[i.__subType];if(typeof s=="function")try{let o=new s(i.message);o.stack="",n[r]=o}catch{}}if(n[r]==null){let s=new Error(i.message);s.stack="",n[r]=s}}else n[r]=i;return n}const eP=L.createContext({isTransitioning:!1}),tP=L.createContext(new Map),nP="startTransition",l0=_S[nP],rP="flushSync",u0=Rx[rP];function iP(t){l0?l0(t):t()}function el(t){u0?u0(t):t()}let sP=class{constructor(){this.status="pending",this.promise=new Promise((e,n)=>{this.resolve=r=>{this.status==="pending"&&(this.status="resolved",e(r))},this.reject=r=>{this.status==="pending"&&(this.status="rejected",n(r))}})}};function oP(t){let{fallbackElement:e,router:n,future:r}=t,[i,s]=L.useState(n.state),[o,a]=L.useState(),[l,c]=L.useState({isTransitioning:!1}),[h,f]=L.useState(),[p,_]=L.useState(),[E,I]=L.useState(),R=L.useRef(new Map),{v7_startTransition:T}=r||{},w=L.useCallback(g=>{T?iP(g):g()},[T]),C=L.useCallback((g,y)=>{let{deletedFetchers:b,unstable_flushSync:S,unstable_viewTransitionOpts:k}=y;b.forEach(x=>R.current.delete(x)),g.fetchers.forEach((x,Ie)=>{x.data!==void 0&&R.current.set(Ie,x.data)});let P=n.window==null||n.window.document==null||typeof n.window.document.startViewTransition!="function";if(!k||P){S?el(()=>s(g)):w(()=>s(g));return}if(S){el(()=>{p&&(h&&h.resolve(),p.skipTransition()),c({isTransitioning:!0,flushSync:!0,currentLocation:k.currentLocation,nextLocation:k.nextLocation})});let x=n.window.document.startViewTransition(()=>{el(()=>s(g))});x.finished.finally(()=>{el(()=>{f(void 0),_(void 0),a(void 0),c({isTransitioning:!1})})}),el(()=>_(x));return}p?(h&&h.resolve(),p.skipTransition(),I({state:g,currentLocation:k.currentLocation,nextLocation:k.nextLocation})):(a(g),c({isTransitioning:!0,flushSync:!1,currentLocation:k.currentLocation,nextLocation:k.nextLocation}))},[n.window,p,h,R,w]);L.useLayoutEffect(()=>n.subscribe(C),[n,C]),L.useEffect(()=>{l.isTransitioning&&!l.flushSync&&f(new sP)},[l]),L.useEffect(()=>{if(h&&o&&n.window){let g=o,y=h.promise,b=n.window.document.startViewTransition(async()=>{w(()=>s(g)),await y});b.finished.finally(()=>{f(void 0),_(void 0),a(void 0),c({isTransitioning:!1})}),_(b)}},[w,o,h,n.window]),L.useEffect(()=>{h&&o&&i.location.key===o.location.key&&h.resolve()},[h,p,i.location,o]),L.useEffect(()=>{!l.isTransitioning&&E&&(a(E.state),c({isTransitioning:!0,flushSync:!1,currentLocation:E.currentLocation,nextLocation:E.nextLocation}),I(void 0))},[l.isTransitioning,E]),L.useEffect(()=>{},[]);let D=L.useMemo(()=>({createHref:n.createHref,encodeLocation:n.encodeLocation,go:g=>n.navigate(g),push:(g,y,b)=>n.navigate(g,{state:y,preventScrollReset:b==null?void 0:b.preventScrollReset}),replace:(g,y,b)=>n.navigate(g,{replace:!0,state:y,preventScrollReset:b==null?void 0:b.preventScrollReset})}),[n]),F=n.basename||"/",z=L.useMemo(()=>({router:n,navigator:D,static:!1,basename:F}),[n,D,F]);return L.createElement(L.Fragment,null,L.createElement(od.Provider,{value:z},L.createElement(Nb.Provider,{value:i},L.createElement(tP.Provider,{value:R.current},L.createElement(eP.Provider,{value:l},L.createElement(Hk,{basename:F,location:i.location,navigationType:i.historyAction,navigator:D,future:{v7_relativeSplatPath:n.future.v7_relativeSplatPath}},i.initialized||n.future.v7_partialHydration?L.createElement(aP,{routes:n.routes,future:n.future,state:i}):e))))),null)}function aP(t){let{routes:e,future:n,state:r}=t;return Rk(e,void 0,r,n)}const lP=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",uP=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Eh=L.forwardRef(function(e,n){let{onClick:r,relative:i,reloadDocument:s,replace:o,state:a,target:l,to:c,preventScrollReset:h,unstable_viewTransition:f}=e,p=qk(e,Qk),{basename:_}=L.useContext(Yi),E,I=!1;if(typeof c=="string"&&uP.test(c)&&(E=c,lP))try{let C=new URL(window.location.href),D=c.startsWith("//")?new URL(C.protocol+c):new URL(c),F=ya(D.pathname,_);D.origin===C.origin&&F!=null?c=F+D.search+D.hash:I=!0}catch{}let R=Ak(c,{relative:i}),T=cP(c,{replace:o,state:a,target:l,preventScrollReset:h,relative:i,unstable_viewTransition:f});function w(C){r&&r(C),C.defaultPrevented||T(C)}return L.createElement("a",Zl({},p,{href:E||R,onClick:I||s?r:w,ref:n,target:l}))});var c0;(function(t){t.UseScrollRestoration="useScrollRestoration",t.UseSubmit="useSubmit",t.UseSubmitFetcher="useSubmitFetcher",t.UseFetcher="useFetcher",t.useViewTransitionState="useViewTransitionState"})(c0||(c0={}));var h0;(function(t){t.UseFetcher="useFetcher",t.UseFetchers="useFetchers",t.UseScrollRestoration="useScrollRestoration"})(h0||(h0={}));function cP(t,e){let{target:n,replace:r,state:i,preventScrollReset:s,relative:o,unstable_viewTransition:a}=e===void 0?{}:e,l=yu(),c=Gs(),h=Db(t,{relative:o});return L.useCallback(f=>{if(Kk(f,n)){f.preventDefault();let p=r!==void 0?r:Ds(c)===Ds(h);l(t,{replace:p,state:i,preventScrollReset:s,relative:o,unstable_viewTransition:a})}},[c,l,h,r,i,n,t,s,o,a])}function Ub(t){var e,n,r="";if(typeof t=="string"||typeof t=="number")r+=t;else if(typeof t=="object")if(Array.isArray(t)){var i=t.length;for(e=0;e<i;e++)t[e]&&(n=Ub(t[e]))&&(r&&(r+=" "),r+=n)}else for(n in t)t[n]&&(r&&(r+=" "),r+=n);return r}function hP(){for(var t,e,n=0,r="",i=arguments.length;n<i;n++)(t=arguments[n])&&(e=Ub(t))&&(r&&(r+=" "),r+=e);return r}const Lg="-";function dP(t){const e=pP(t),{conflictingClassGroups:n,conflictingClassGroupModifiers:r}=t;function i(o){const a=o.split(Lg);return a[0]===""&&a.length!==1&&a.shift(),$b(a,e)||fP(o)}function s(o,a){const l=n[o]||[];return a&&r[o]?[...l,...r[o]]:l}return{getClassGroupId:i,getConflictingClassGroupIds:s}}function $b(t,e){var o;if(t.length===0)return e.classGroupId;const n=t[0],r=e.nextPart.get(n),i=r?$b(t.slice(1),r):void 0;if(i)return i;if(e.validators.length===0)return;const s=t.join(Lg);return(o=e.validators.find(({validator:a})=>a(s)))==null?void 0:o.classGroupId}const d0=/^\[(.+)\]$/;function fP(t){if(d0.test(t)){const e=d0.exec(t)[1],n=e==null?void 0:e.substring(0,e.indexOf(":"));if(n)return"arbitrary.."+n}}function pP(t){const{theme:e,prefix:n}=t,r={nextPart:new Map,validators:[]};return gP(Object.entries(t.classGroups),n).forEach(([s,o])=>{Jp(o,r,s,e)}),r}function Jp(t,e,n,r){t.forEach(i=>{if(typeof i=="string"){const s=i===""?e:f0(e,i);s.classGroupId=n;return}if(typeof i=="function"){if(mP(i)){Jp(i(r),e,n,r);return}e.validators.push({validator:i,classGroupId:n});return}Object.entries(i).forEach(([s,o])=>{Jp(o,f0(e,s),n,r)})})}function f0(t,e){let n=t;return e.split(Lg).forEach(r=>{n.nextPart.has(r)||n.nextPart.set(r,{nextPart:new Map,validators:[]}),n=n.nextPart.get(r)}),n}function mP(t){return t.isThemeGetter}function gP(t,e){return e?t.map(([n,r])=>{const i=r.map(s=>typeof s=="string"?e+s:typeof s=="object"?Object.fromEntries(Object.entries(s).map(([o,a])=>[e+o,a])):s);return[n,i]}):t}function yP(t){if(t<1)return{get:()=>{},set:()=>{}};let e=0,n=new Map,r=new Map;function i(s,o){n.set(s,o),e++,e>t&&(e=0,r=n,n=new Map)}return{get(s){let o=n.get(s);if(o!==void 0)return o;if((o=r.get(s))!==void 0)return i(s,o),o},set(s,o){n.has(s)?n.set(s,o):i(s,o)}}}const Fb="!";function vP(t){const e=t.separator,n=e.length===1,r=e[0],i=e.length;return function(o){const a=[];let l=0,c=0,h;for(let I=0;I<o.length;I++){let R=o[I];if(l===0){if(R===r&&(n||o.slice(I,I+i)===e)){a.push(o.slice(c,I)),c=I+i;continue}if(R==="/"){h=I;continue}}R==="["?l++:R==="]"&&l--}const f=a.length===0?o:o.substring(c),p=f.startsWith(Fb),_=p?f.substring(1):f,E=h&&h>c?h-c:void 0;return{modifiers:a,hasImportantModifier:p,baseClassName:_,maybePostfixModifierPosition:E}}}function _P(t){if(t.length<=1)return t;const e=[];let n=[];return t.forEach(r=>{r[0]==="["?(e.push(...n.sort(),r),n=[]):n.push(r)}),e.push(...n.sort()),e}function wP(t){return{cache:yP(t.cacheSize),splitModifiers:vP(t),...dP(t)}}const EP=/\s+/;function bP(t,e){const{splitModifiers:n,getClassGroupId:r,getConflictingClassGroupIds:i}=e,s=new Set;return t.trim().split(EP).map(o=>{const{modifiers:a,hasImportantModifier:l,baseClassName:c,maybePostfixModifierPosition:h}=n(o);let f=r(h?c.substring(0,h):c),p=!!h;if(!f){if(!h)return{isTailwindClass:!1,originalClassName:o};if(f=r(c),!f)return{isTailwindClass:!1,originalClassName:o};p=!1}const _=_P(a).join(":");return{isTailwindClass:!0,modifierId:l?_+Fb:_,classGroupId:f,originalClassName:o,hasPostfixModifier:p}}).reverse().filter(o=>{if(!o.isTailwindClass)return!0;const{modifierId:a,classGroupId:l,hasPostfixModifier:c}=o,h=a+l;return s.has(h)?!1:(s.add(h),i(l,c).forEach(f=>s.add(a+f)),!0)}).reverse().map(o=>o.originalClassName).join(" ")}function TP(){let t=0,e,n,r="";for(;t<arguments.length;)(e=arguments[t++])&&(n=jb(e))&&(r&&(r+=" "),r+=n);return r}function jb(t){if(typeof t=="string")return t;let e,n="";for(let r=0;r<t.length;r++)t[r]&&(e=jb(t[r]))&&(n&&(n+=" "),n+=e);return n}function CP(t,...e){let n,r,i,s=o;function o(l){const c=e.reduce((h,f)=>f(h),t());return n=wP(c),r=n.cache.get,i=n.cache.set,s=a,a(l)}function a(l){const c=r(l);if(c)return c;const h=bP(l,n);return i(l,h),h}return function(){return s(TP.apply(null,arguments))}}function Ue(t){const e=n=>n[t]||[];return e.isThemeGetter=!0,e}const zb=/^\[(?:([a-z-]+):)?(.+)\]$/i,IP=/^\d+\/\d+$/,SP=new Set(["px","full","screen"]),AP=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,xP=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,kP=/^(rgba?|hsla?|hwb|(ok)?(lab|lch))\(.+\)$/,PP=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,RP=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/;function Tr(t){return Es(t)||SP.has(t)||IP.test(t)}function ai(t){return _a(t,"length",$P)}function Es(t){return!!t&&!Number.isNaN(Number(t))}function pc(t){return _a(t,"number",Es)}function tl(t){return!!t&&Number.isInteger(Number(t))}function NP(t){return t.endsWith("%")&&Es(t.slice(0,-1))}function de(t){return zb.test(t)}function li(t){return AP.test(t)}const OP=new Set(["length","size","percentage"]);function LP(t){return _a(t,OP,Bb)}function DP(t){return _a(t,"position",Bb)}const MP=new Set(["image","url"]);function VP(t){return _a(t,MP,jP)}function UP(t){return _a(t,"",FP)}function nl(){return!0}function _a(t,e,n){const r=zb.exec(t);return r?r[1]?typeof e=="string"?r[1]===e:e.has(r[1]):n(r[2]):!1}function $P(t){return xP.test(t)&&!kP.test(t)}function Bb(){return!1}function FP(t){return PP.test(t)}function jP(t){return RP.test(t)}function zP(){const t=Ue("colors"),e=Ue("spacing"),n=Ue("blur"),r=Ue("brightness"),i=Ue("borderColor"),s=Ue("borderRadius"),o=Ue("borderSpacing"),a=Ue("borderWidth"),l=Ue("contrast"),c=Ue("grayscale"),h=Ue("hueRotate"),f=Ue("invert"),p=Ue("gap"),_=Ue("gradientColorStops"),E=Ue("gradientColorStopPositions"),I=Ue("inset"),R=Ue("margin"),T=Ue("opacity"),w=Ue("padding"),C=Ue("saturate"),D=Ue("scale"),F=Ue("sepia"),z=Ue("skew"),g=Ue("space"),y=Ue("translate"),b=()=>["auto","contain","none"],S=()=>["auto","hidden","clip","visible","scroll"],k=()=>["auto",de,e],P=()=>[de,e],x=()=>["",Tr,ai],Ie=()=>["auto",Es,de],it=()=>["bottom","center","left","left-bottom","left-top","right","right-bottom","right-top","top"],Wt=()=>["solid","dashed","dotted","double","none"],wt=()=>["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],H=()=>["start","end","center","between","around","evenly","stretch"],ee=()=>["","0",de],re=()=>["auto","avoid","all","avoid-page","page","left","right","column"],_e=()=>[Es,pc],he=()=>[Es,de];return{cacheSize:500,separator:":",theme:{colors:[nl],spacing:[Tr,ai],blur:["none","",li,de],brightness:_e(),borderColor:[t],borderRadius:["none","","full",li,de],borderSpacing:P(),borderWidth:x(),contrast:_e(),grayscale:ee(),hueRotate:he(),invert:ee(),gap:P(),gradientColorStops:[t],gradientColorStopPositions:[NP,ai],inset:k(),margin:k(),opacity:_e(),padding:P(),saturate:_e(),scale:_e(),sepia:ee(),skew:he(),space:P(),translate:P()},classGroups:{aspect:[{aspect:["auto","square","video",de]}],container:["container"],columns:[{columns:[li]}],"break-after":[{"break-after":re()}],"break-before":[{"break-before":re()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:[...it(),de]}],overflow:[{overflow:S()}],"overflow-x":[{"overflow-x":S()}],"overflow-y":[{"overflow-y":S()}],overscroll:[{overscroll:b()}],"overscroll-x":[{"overscroll-x":b()}],"overscroll-y":[{"overscroll-y":b()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:[I]}],"inset-x":[{"inset-x":[I]}],"inset-y":[{"inset-y":[I]}],start:[{start:[I]}],end:[{end:[I]}],top:[{top:[I]}],right:[{right:[I]}],bottom:[{bottom:[I]}],left:[{left:[I]}],visibility:["visible","invisible","collapse"],z:[{z:["auto",tl,de]}],basis:[{basis:k()}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["wrap","wrap-reverse","nowrap"]}],flex:[{flex:["1","auto","initial","none",de]}],grow:[{grow:ee()}],shrink:[{shrink:ee()}],order:[{order:["first","last","none",tl,de]}],"grid-cols":[{"grid-cols":[nl]}],"col-start-end":[{col:["auto",{span:["full",tl,de]},de]}],"col-start":[{"col-start":Ie()}],"col-end":[{"col-end":Ie()}],"grid-rows":[{"grid-rows":[nl]}],"row-start-end":[{row:["auto",{span:[tl,de]},de]}],"row-start":[{"row-start":Ie()}],"row-end":[{"row-end":Ie()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":["auto","min","max","fr",de]}],"auto-rows":[{"auto-rows":["auto","min","max","fr",de]}],gap:[{gap:[p]}],"gap-x":[{"gap-x":[p]}],"gap-y":[{"gap-y":[p]}],"justify-content":[{justify:["normal",...H()]}],"justify-items":[{"justify-items":["start","end","center","stretch"]}],"justify-self":[{"justify-self":["auto","start","end","center","stretch"]}],"align-content":[{content:["normal",...H(),"baseline"]}],"align-items":[{items:["start","end","center","baseline","stretch"]}],"align-self":[{self:["auto","start","end","center","stretch","baseline"]}],"place-content":[{"place-content":[...H(),"baseline"]}],"place-items":[{"place-items":["start","end","center","baseline","stretch"]}],"place-self":[{"place-self":["auto","start","end","center","stretch"]}],p:[{p:[w]}],px:[{px:[w]}],py:[{py:[w]}],ps:[{ps:[w]}],pe:[{pe:[w]}],pt:[{pt:[w]}],pr:[{pr:[w]}],pb:[{pb:[w]}],pl:[{pl:[w]}],m:[{m:[R]}],mx:[{mx:[R]}],my:[{my:[R]}],ms:[{ms:[R]}],me:[{me:[R]}],mt:[{mt:[R]}],mr:[{mr:[R]}],mb:[{mb:[R]}],ml:[{ml:[R]}],"space-x":[{"space-x":[g]}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":[g]}],"space-y-reverse":["space-y-reverse"],w:[{w:["auto","min","max","fit","svw","lvw","dvw",de,e]}],"min-w":[{"min-w":[de,e,"min","max","fit"]}],"max-w":[{"max-w":[de,e,"none","full","min","max","fit","prose",{screen:[li]},li]}],h:[{h:[de,e,"auto","min","max","fit","svh","lvh","dvh"]}],"min-h":[{"min-h":[de,e,"min","max","fit","svh","lvh","dvh"]}],"max-h":[{"max-h":[de,e,"min","max","fit","svh","lvh","dvh"]}],size:[{size:[de,e,"auto","min","max","fit"]}],"font-size":[{text:["base",li,ai]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:["thin","extralight","light","normal","medium","semibold","bold","extrabold","black",pc]}],"font-family":[{font:[nl]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractons"],tracking:[{tracking:["tighter","tight","normal","wide","wider","widest",de]}],"line-clamp":[{"line-clamp":["none",Es,pc]}],leading:[{leading:["none","tight","snug","normal","relaxed","loose",Tr,de]}],"list-image":[{"list-image":["none",de]}],"list-style-type":[{list:["none","disc","decimal",de]}],"list-style-position":[{list:["inside","outside"]}],"placeholder-color":[{placeholder:[t]}],"placeholder-opacity":[{"placeholder-opacity":[T]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"text-color":[{text:[t]}],"text-opacity":[{"text-opacity":[T]}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[...Wt(),"wavy"]}],"text-decoration-thickness":[{decoration:["auto","from-font",Tr,ai]}],"underline-offset":[{"underline-offset":["auto",Tr,de]}],"text-decoration-color":[{decoration:[t]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:P()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",de]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",de]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-opacity":[{"bg-opacity":[T]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:[...it(),DP]}],"bg-repeat":[{bg:["no-repeat",{repeat:["","x","y","round","space"]}]}],"bg-size":[{bg:["auto","cover","contain",LP]}],"bg-image":[{bg:["none",{"gradient-to":["t","tr","r","br","b","bl","l","tl"]},VP]}],"bg-color":[{bg:[t]}],"gradient-from-pos":[{from:[E]}],"gradient-via-pos":[{via:[E]}],"gradient-to-pos":[{to:[E]}],"gradient-from":[{from:[_]}],"gradient-via":[{via:[_]}],"gradient-to":[{to:[_]}],rounded:[{rounded:[s]}],"rounded-s":[{"rounded-s":[s]}],"rounded-e":[{"rounded-e":[s]}],"rounded-t":[{"rounded-t":[s]}],"rounded-r":[{"rounded-r":[s]}],"rounded-b":[{"rounded-b":[s]}],"rounded-l":[{"rounded-l":[s]}],"rounded-ss":[{"rounded-ss":[s]}],"rounded-se":[{"rounded-se":[s]}],"rounded-ee":[{"rounded-ee":[s]}],"rounded-es":[{"rounded-es":[s]}],"rounded-tl":[{"rounded-tl":[s]}],"rounded-tr":[{"rounded-tr":[s]}],"rounded-br":[{"rounded-br":[s]}],"rounded-bl":[{"rounded-bl":[s]}],"border-w":[{border:[a]}],"border-w-x":[{"border-x":[a]}],"border-w-y":[{"border-y":[a]}],"border-w-s":[{"border-s":[a]}],"border-w-e":[{"border-e":[a]}],"border-w-t":[{"border-t":[a]}],"border-w-r":[{"border-r":[a]}],"border-w-b":[{"border-b":[a]}],"border-w-l":[{"border-l":[a]}],"border-opacity":[{"border-opacity":[T]}],"border-style":[{border:[...Wt(),"hidden"]}],"divide-x":[{"divide-x":[a]}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":[a]}],"divide-y-reverse":["divide-y-reverse"],"divide-opacity":[{"divide-opacity":[T]}],"divide-style":[{divide:Wt()}],"border-color":[{border:[i]}],"border-color-x":[{"border-x":[i]}],"border-color-y":[{"border-y":[i]}],"border-color-t":[{"border-t":[i]}],"border-color-r":[{"border-r":[i]}],"border-color-b":[{"border-b":[i]}],"border-color-l":[{"border-l":[i]}],"divide-color":[{divide:[i]}],"outline-style":[{outline:["",...Wt()]}],"outline-offset":[{"outline-offset":[Tr,de]}],"outline-w":[{outline:[Tr,ai]}],"outline-color":[{outline:[t]}],"ring-w":[{ring:x()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:[t]}],"ring-opacity":[{"ring-opacity":[T]}],"ring-offset-w":[{"ring-offset":[Tr,ai]}],"ring-offset-color":[{"ring-offset":[t]}],shadow:[{shadow:["","inner","none",li,UP]}],"shadow-color":[{shadow:[nl]}],opacity:[{opacity:[T]}],"mix-blend":[{"mix-blend":[...wt(),"plus-lighter","plus-darker"]}],"bg-blend":[{"bg-blend":wt()}],filter:[{filter:["","none"]}],blur:[{blur:[n]}],brightness:[{brightness:[r]}],contrast:[{contrast:[l]}],"drop-shadow":[{"drop-shadow":["","none",li,de]}],grayscale:[{grayscale:[c]}],"hue-rotate":[{"hue-rotate":[h]}],invert:[{invert:[f]}],saturate:[{saturate:[C]}],sepia:[{sepia:[F]}],"backdrop-filter":[{"backdrop-filter":["","none"]}],"backdrop-blur":[{"backdrop-blur":[n]}],"backdrop-brightness":[{"backdrop-brightness":[r]}],"backdrop-contrast":[{"backdrop-contrast":[l]}],"backdrop-grayscale":[{"backdrop-grayscale":[c]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[h]}],"backdrop-invert":[{"backdrop-invert":[f]}],"backdrop-opacity":[{"backdrop-opacity":[T]}],"backdrop-saturate":[{"backdrop-saturate":[C]}],"backdrop-sepia":[{"backdrop-sepia":[F]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":[o]}],"border-spacing-x":[{"border-spacing-x":[o]}],"border-spacing-y":[{"border-spacing-y":[o]}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["none","all","","colors","opacity","shadow","transform",de]}],duration:[{duration:he()}],ease:[{ease:["linear","in","out","in-out",de]}],delay:[{delay:he()}],animate:[{animate:["none","spin","ping","pulse","bounce",de]}],transform:[{transform:["","gpu","none"]}],scale:[{scale:[D]}],"scale-x":[{"scale-x":[D]}],"scale-y":[{"scale-y":[D]}],rotate:[{rotate:[tl,de]}],"translate-x":[{"translate-x":[y]}],"translate-y":[{"translate-y":[y]}],"skew-x":[{"skew-x":[z]}],"skew-y":[{"skew-y":[z]}],"transform-origin":[{origin:["center","top","top-right","right","bottom-right","bottom","bottom-left","left","top-left",de]}],accent:[{accent:["auto",t]}],appearance:[{appearance:["none","auto"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",de]}],"caret-color":[{caret:[t]}],"pointer-events":[{"pointer-events":["none","auto"]}],resize:[{resize:["none","y","x",""]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":P()}],"scroll-mx":[{"scroll-mx":P()}],"scroll-my":[{"scroll-my":P()}],"scroll-ms":[{"scroll-ms":P()}],"scroll-me":[{"scroll-me":P()}],"scroll-mt":[{"scroll-mt":P()}],"scroll-mr":[{"scroll-mr":P()}],"scroll-mb":[{"scroll-mb":P()}],"scroll-ml":[{"scroll-ml":P()}],"scroll-p":[{"scroll-p":P()}],"scroll-px":[{"scroll-px":P()}],"scroll-py":[{"scroll-py":P()}],"scroll-ps":[{"scroll-ps":P()}],"scroll-pe":[{"scroll-pe":P()}],"scroll-pt":[{"scroll-pt":P()}],"scroll-pr":[{"scroll-pr":P()}],"scroll-pb":[{"scroll-pb":P()}],"scroll-pl":[{"scroll-pl":P()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",de]}],fill:[{fill:[t,"none"]}],"stroke-w":[{stroke:[Tr,ai,pc]}],stroke:[{stroke:[t,"none"]}],sr:["sr-only","not-sr-only"],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]}}}const BP=CP(zP);function _n(...t){return BP(hP(t))}function ta(){return ta=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},ta.apply(null,arguments)}function HP(t,e){typeof t=="function"?t(e):t!=null&&(t.current=e)}function WP(...t){return e=>t.forEach(n=>HP(n,e))}const Dg=L.forwardRef((t,e)=>{const{children:n,...r}=t,i=L.Children.toArray(n),s=i.find(GP);if(s){const o=s.props.children,a=i.map(l=>l===s?L.Children.count(o)>1?L.Children.only(null):L.isValidElement(o)?o.props.children:null:l);return L.createElement(Zp,ta({},r,{ref:e}),L.isValidElement(o)?L.cloneElement(o,void 0,a):null)}return L.createElement(Zp,ta({},r,{ref:e}),n)});Dg.displayName="Slot";const Zp=L.forwardRef((t,e)=>{const{children:n,...r}=t;return L.isValidElement(n)?L.cloneElement(n,{...KP(r,n.props),ref:e?WP(e,n.ref):n.ref}):L.Children.count(n)>1?L.Children.only(null):null});Zp.displayName="SlotClone";const qP=({children:t})=>L.createElement(L.Fragment,null,t);function GP(t){return L.isValidElement(t)&&t.type===qP}function KP(t,e){const n={...e};for(const r in e){const i=t[r],s=e[r];/^on[A-Z]/.test(r)?i&&s?n[r]=(...a)=>{s(...a),i(...a)}:i&&(n[r]=i):r==="style"?n[r]={...i,...s}:r==="className"&&(n[r]=[i,s].filter(Boolean).join(" "))}return{...t,...n}}function Hb(t){var e,n,r="";if(typeof t=="string"||typeof t=="number")r+=t;else if(typeof t=="object")if(Array.isArray(t))for(e=0;e<t.length;e++)t[e]&&(n=Hb(t[e]))&&(r&&(r+=" "),r+=n);else for(e in t)t[e]&&(r&&(r+=" "),r+=e);return r}function QP(){for(var t,e,n=0,r="";n<arguments.length;)(t=arguments[n++])&&(e=Hb(t))&&(r&&(r+=" "),r+=e);return r}const p0=t=>typeof t=="boolean"?"".concat(t):t===0?"0":t,m0=QP,Wb=(t,e)=>n=>{var r;if((e==null?void 0:e.variants)==null)return m0(t,n==null?void 0:n.class,n==null?void 0:n.className);const{variants:i,defaultVariants:s}=e,o=Object.keys(i).map(c=>{const h=n==null?void 0:n[c],f=s==null?void 0:s[c];if(h===null)return null;const p=p0(h)||p0(f);return i[c][p]}),a=n&&Object.entries(n).reduce((c,h)=>{let[f,p]=h;return p===void 0||(c[f]=p),c},{}),l=e==null||(r=e.compoundVariants)===null||r===void 0?void 0:r.reduce((c,h)=>{let{class:f,className:p,..._}=h;return Object.entries(_).every(E=>{let[I,R]=E;return Array.isArray(R)?R.includes({...s,...a}[I]):{...s,...a}[I]===R})?[...c,f,p]:c},[]);return m0(t,o,l,n==null?void 0:n.class,n==null?void 0:n.className)},em=Wb("inline-flex items-center justify-center whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),Ms=L.forwardRef(({className:t,variant:e,size:n,asChild:r=!1,...i},s)=>{const o=r?Dg:"button";return A.jsx(o,{className:_n(em({variant:e,size:n,className:t})),ref:s,...i})});Ms.displayName="Button";const XP="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20fill='none'%20viewBox='0%200%2024%2024'%20stroke-width='1.5'%20stroke='currentColor'%20class='size-6'%3e%3cpath%20stroke-linecap='round'%20stroke-linejoin='round'%20d='m2.25%2012%208.954-8.955c.44-.439%201.152-.439%201.591%200L21.75%2012M4.5%209.75v10.125c0%20.621.504%201.125%201.125%201.125H9.75v-4.875c0-.621.504-1.125%201.125-1.125h2.25c.621%200%201.125.504%201.125%201.125V21h4.125c.621%200%201.125-.504%201.125-1.125V9.75M8.25%2021h8.25'%20/%3e%3c/svg%3e",YP="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20fill='none'%20viewBox='0%200%2024%2024'%20stroke-width='1.5'%20stroke='currentColor'%20class='size-6'%3e%3cpath%20stroke-linecap='round'%20stroke-linejoin='round'%20d='M12%204.5v15m7.5-7.5h-15'%20/%3e%3c/svg%3e",JP="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20fill='none'%20viewBox='0%200%2024%2024'%20stroke-width='1.5'%20stroke='currentColor'%20class='size-6'%3e%3cpath%20stroke-linecap='round'%20stroke-linejoin='round'%20d='M6.827%206.175A2.31%202.31%200%200%201%205.186%207.23c-.38.054-.757.112-1.134.175C2.999%207.58%202.25%208.507%202.25%209.574V18a2.25%202.25%200%200%200%202.25%202.25h15A2.25%202.25%200%200%200%2021.75%2018V9.574c0-1.067-.75-1.994-1.802-2.169a47.865%2047.865%200%200%200-1.134-.175%202.31%202.31%200%200%201-1.64-1.055l-.822-1.316a2.192%202.192%200%200%200-1.736-1.039%2048.774%2048.774%200%200%200-5.232%200%202.192%202.192%200%200%200-1.736%201.039l-.821%201.316Z'%20/%3e%3cpath%20stroke-linecap='round'%20stroke-linejoin='round'%20d='M16.5%2012.75a4.5%204.5%200%201%201-9%200%204.5%204.5%200%200%201%209%200ZM18.75%2010.5h.008v.008h-.008V10.5Z'%20/%3e%3c/svg%3e",ZP="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20fill='none'%20viewBox='0%200%2024%2024'%20stroke-width='1.5'%20stroke='currentColor'%20class='size-6'%3e%3cpath%20stroke-linecap='round'%20stroke-linejoin='round'%20d='M17.982%2018.725A7.488%207.488%200%200%200%2012%2015.75a7.488%207.488%200%200%200-5.982%202.975m11.963%200a9%209%200%201%200-11.963%200m11.963%200A8.966%208.966%200%200%201%2012%2021a8.966%208.966%200%200%201-5.982-2.275M15%209.75a3%203%200%201%201-6%200%203%203%200%200%201%206%200Z'%20/%3e%3c/svg%3e",eR="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20fill='none'%20viewBox='0%200%2024%2024'%20stroke-width='1.5'%20stroke='currentColor'%20class='size-6'%3e%3cpath%20stroke-linecap='round'%20stroke-linejoin='round'%20d='M14.857%2017.082a23.848%2023.848%200%200%200%205.454-1.31A8.967%208.967%200%200%201%2018%209.75V9A6%206%200%200%200%206%209v.75a8.967%208.967%200%200%201-2.312%206.022c1.733.64%203.56%201.085%205.455%201.31m5.714%200a24.255%2024.255%200%200%201-5.714%200m5.714%200a3%203%200%201%201-5.714%200'%20/%3e%3c/svg%3e",tR="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20fill='none'%20viewBox='0%200%2024%2024'%20stroke-width='1.5'%20stroke='currentColor'%20class='size-6'%3e%3cpath%20stroke-linecap='round'%20stroke-linejoin='round'%20d='M6%2012%203.269%203.125A59.769%2059.769%200%200%201%2021.485%2012%2059.768%2059.768%200%200%201%203.27%2020.875L5.999%2012Zm0%200h7.5'%20/%3e%3c/svg%3e",nR="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20fill='none'%20viewBox='0%200%2024%2024'%20stroke-width='1.5'%20stroke='currentColor'%20class='size-6'%3e%3cpath%20stroke-linecap='round'%20stroke-linejoin='round'%20d='M10.343%203.94c.09-.542.56-.94%201.11-.94h1.093c.55%200%201.02.398%201.11.94l.149.894c.07.424.384.764.78.93.398.164.855.142%201.205-.108l.737-.527a1.125%201.125%200%200%201%201.45.12l.773.774c.39.389.44%201.002.12%201.45l-.527.737c-.25.35-.272.806-.107%201.204.165.397.505.71.93.78l.893.15c.543.09.94.559.94%201.109v1.094c0%20.55-.397%201.02-.94%201.11l-.894.149c-.424.07-.764.383-.929.78-.165.398-.143.854.107%201.204l.527.738c.32.447.269%201.06-.12%201.45l-.774.773a1.125%201.125%200%200%201-1.449.12l-.738-.527c-.35-.25-.806-.272-1.203-.107-.398.165-.71.505-.781.929l-.149.894c-.09.542-.56.94-1.11.94h-1.094c-.55%200-1.019-.398-1.11-.94l-.148-.894c-.071-.424-.384-.764-.781-.93-.398-.164-.854-.142-1.204.108l-.738.527c-.447.32-1.06.269-1.45-.12l-.773-.774a1.125%201.125%200%200%201-.12-1.45l.527-.737c.25-.35.272-.806.108-1.204-.165-.397-.506-.71-.93-.78l-.894-.15c-.542-.09-.94-.56-.94-1.109v-1.094c0-.55.398-1.02.94-1.11l.894-.149c.424-.07.765-.383.93-.78.165-.398.143-.854-.108-1.204l-.526-.738a1.125%201.125%200%200%201%20.12-1.45l.773-.773a1.125%201.125%200%200%201%201.45-.12l.737.527c.35.25.807.272%201.204.107.397-.165.71-.505.78-.929l.15-.894Z'%20/%3e%3cpath%20stroke-linecap='round'%20stroke-linejoin='round'%20d='M15%2012a3%203%200%201%201-6%200%203%203%200%200%201%206%200Z'%20/%3e%3c/svg%3e",rR=[{name:"Home",link:"/edelgram/",icon:XP},{name:"Add photos",link:"/edelgram/createpost",icon:YP},{name:"My photos",link:"/edelgram/myphotos",icon:JP},{name:"Profile",link:"/edelgram/profile",icon:ZP},{name:"Notifications",link:"#",icon:eR},{name:"Direct",link:"#",icon:tR},{name:"Settings",link:"#",icon:nR}];var g0={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qb=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let i=t.charCodeAt(r);i<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=i&63|128):(i&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=i&63|128):(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=i&63|128)}return e},iR=function(t){const e=[];let n=0,r=0;for(;n<t.length;){const i=t[n++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){const s=t[n++];e[r++]=String.fromCharCode((i&31)<<6|s&63)}else if(i>239&&i<365){const s=t[n++],o=t[n++],a=t[n++],l=((i&7)<<18|(s&63)<<12|(o&63)<<6|a&63)-65536;e[r++]=String.fromCharCode(55296+(l>>10)),e[r++]=String.fromCharCode(56320+(l&1023))}else{const s=t[n++],o=t[n++];e[r++]=String.fromCharCode((i&15)<<12|(s&63)<<6|o&63)}}return e.join("")},Gb={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<t.length;i+=3){const s=t[i],o=i+1<t.length,a=o?t[i+1]:0,l=i+2<t.length,c=l?t[i+2]:0,h=s>>2,f=(s&3)<<4|a>>4;let p=(a&15)<<2|c>>6,_=c&63;l||(_=64,o||(p=64)),r.push(n[h],n[f],n[p],n[_])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(qb(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):iR(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<t.length;){const s=n[t.charAt(i++)],a=i<t.length?n[t.charAt(i)]:0;++i;const c=i<t.length?n[t.charAt(i)]:64;++i;const f=i<t.length?n[t.charAt(i)]:64;if(++i,s==null||a==null||c==null||f==null)throw new sR;const p=s<<2|a>>4;if(r.push(p),c!==64){const _=a<<4&240|c>>2;if(r.push(_),f!==64){const E=c<<6&192|f;r.push(E)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class sR extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const oR=function(t){const e=qb(t);return Gb.encodeByteArray(e,!0)},bh=function(t){return oR(t).replace(/\./g,"")},Kb=function(t){try{return Gb.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function aR(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lR=()=>aR().__FIREBASE_DEFAULTS__,uR=()=>{if(typeof process>"u"||typeof g0>"u")return;const t=g0.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},cR=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&Kb(t[1]);return e&&JSON.parse(e)},ad=()=>{try{return lR()||uR()||cR()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},Qb=t=>{var e,n;return(n=(e=ad())===null||e===void 0?void 0:e.emulatorHosts)===null||n===void 0?void 0:n[t]},hR=t=>{const e=Qb(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),r]:[e.substring(0,n),r]},Xb=()=>{var t;return(t=ad())===null||t===void 0?void 0:t.config},Yb=t=>{var e;return(e=ad())===null||e===void 0?void 0:e[`_${t}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dR{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fR(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},r=e||"demo-project",i=t.iat||0,s=t.sub||t.user_id;if(!s)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:i,exp:i+3600,auth_time:i,sub:s,user_id:s,firebase:{sign_in_provider:"custom",identities:{}}},t);return[bh(JSON.stringify(n)),bh(JSON.stringify(o)),""].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Lt(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function pR(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Lt())}function mR(){var t;const e=(t=ad())===null||t===void 0?void 0:t.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function gR(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function yR(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function vR(){const t=Lt();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function _R(){return!mR()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function wR(){try{return typeof indexedDB=="object"}catch{return!1}}function ER(){return new Promise((t,e)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},i.onupgradeneeded=()=>{n=!1},i.onerror=()=>{var s;e(((s=i.error)===null||s===void 0?void 0:s.message)||"")}}catch(n){e(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bR="FirebaseError";class Xr extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=bR,Object.setPrototypeOf(this,Xr.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,vu.prototype.create)}}class vu{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){const r=n[0]||{},i=`${this.service}/${e}`,s=this.errors[e],o=s?TR(s,r):"Error",a=`${this.serviceName}: ${o} (${i}).`;return new Xr(i,a,r)}}function TR(t,e){return t.replace(CR,(n,r)=>{const i=e[r];return i!=null?String(i):`<${r}?>`})}const CR=/\{\$([^}]+)}/g;function IR(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function Th(t,e){if(t===e)return!0;const n=Object.keys(t),r=Object.keys(e);for(const i of n){if(!r.includes(i))return!1;const s=t[i],o=e[i];if(y0(s)&&y0(o)){if(!Th(s,o))return!1}else if(s!==o)return!1}for(const i of r)if(!n.includes(i))return!1;return!0}function y0(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _u(t){const e=[];for(const[n,r]of Object.entries(t))Array.isArray(r)?r.forEach(i=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(i))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function dl(t){const e={};return t.replace(/^\?/,"").split("&").forEach(r=>{if(r){const[i,s]=r.split("=");e[decodeURIComponent(i)]=decodeURIComponent(s)}}),e}function fl(t){const e=t.indexOf("?");if(!e)return"";const n=t.indexOf("#",e);return t.substring(e,n>0?n:void 0)}function SR(t,e){const n=new AR(t,e);return n.subscribe.bind(n)}class AR{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,r){let i;if(e===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");xR(e,["next","error","complete"])?i=e:i={next:e,error:n,complete:r},i.next===void 0&&(i.next=Vf),i.error===void 0&&(i.error=Vf),i.complete===void 0&&(i.complete=Vf);const s=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),s}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function xR(t,e){if(typeof t!="object"||t===null)return!1;for(const n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function Vf(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _t(t){return t&&t._delegate?t._delegate:t}class Vs{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ms="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kR{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const r=new dR;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const i=this.getOrInitializeService({instanceIdentifier:n});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){var n;const r=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),i=(n=e==null?void 0:e.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(s){if(i)return null;throw s}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(RR(e))try{this.getOrInitializeService({instanceIdentifier:ms})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const i=this.normalizeInstanceIdentifier(n);try{const s=this.getOrInitializeService({instanceIdentifier:i});r.resolve(s)}catch{}}}}clearInstance(e=ms){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=ms){return this.instances.has(e)}getOptions(e=ms){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const i=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[s,o]of this.instancesDeferred.entries()){const a=this.normalizeInstanceIdentifier(s);r===a&&o.resolve(i)}return i}onInit(e,n){var r;const i=this.normalizeInstanceIdentifier(n),s=(r=this.onInitCallbacks.get(i))!==null&&r!==void 0?r:new Set;s.add(e),this.onInitCallbacks.set(i,s);const o=this.instances.get(i);return o&&e(o,i),()=>{s.delete(e)}}invokeOnInitCallbacks(e,n){const r=this.onInitCallbacks.get(n);if(r)for(const i of r)try{i(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:PR(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=ms){return this.component?this.component.multipleInstances?e:ms:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function PR(t){return t===ms?void 0:t}function RR(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NR{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new kR(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Ee;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(Ee||(Ee={}));const OR={debug:Ee.DEBUG,verbose:Ee.VERBOSE,info:Ee.INFO,warn:Ee.WARN,error:Ee.ERROR,silent:Ee.SILENT},LR=Ee.INFO,DR={[Ee.DEBUG]:"log",[Ee.VERBOSE]:"log",[Ee.INFO]:"info",[Ee.WARN]:"warn",[Ee.ERROR]:"error"},MR=(t,e,...n)=>{if(e<t.logLevel)return;const r=new Date().toISOString(),i=DR[e];if(i)console[i](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class Mg{constructor(e){this.name=e,this._logLevel=LR,this._logHandler=MR,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Ee))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?OR[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Ee.DEBUG,...e),this._logHandler(this,Ee.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Ee.VERBOSE,...e),this._logHandler(this,Ee.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Ee.INFO,...e),this._logHandler(this,Ee.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Ee.WARN,...e),this._logHandler(this,Ee.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Ee.ERROR,...e),this._logHandler(this,Ee.ERROR,...e)}}const VR=(t,e)=>e.some(n=>t instanceof n);let v0,_0;function UR(){return v0||(v0=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function $R(){return _0||(_0=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const Jb=new WeakMap,tm=new WeakMap,Zb=new WeakMap,Uf=new WeakMap,Vg=new WeakMap;function FR(t){const e=new Promise((n,r)=>{const i=()=>{t.removeEventListener("success",s),t.removeEventListener("error",o)},s=()=>{n(Ri(t.result)),i()},o=()=>{r(t.error),i()};t.addEventListener("success",s),t.addEventListener("error",o)});return e.then(n=>{n instanceof IDBCursor&&Jb.set(n,t)}).catch(()=>{}),Vg.set(e,t),e}function jR(t){if(tm.has(t))return;const e=new Promise((n,r)=>{const i=()=>{t.removeEventListener("complete",s),t.removeEventListener("error",o),t.removeEventListener("abort",o)},s=()=>{n(),i()},o=()=>{r(t.error||new DOMException("AbortError","AbortError")),i()};t.addEventListener("complete",s),t.addEventListener("error",o),t.addEventListener("abort",o)});tm.set(t,e)}let nm={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return tm.get(t);if(e==="objectStoreNames")return t.objectStoreNames||Zb.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Ri(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function zR(t){nm=t(nm)}function BR(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const r=t.call($f(this),e,...n);return Zb.set(r,e.sort?e.sort():[e]),Ri(r)}:$R().includes(t)?function(...e){return t.apply($f(this),e),Ri(Jb.get(this))}:function(...e){return Ri(t.apply($f(this),e))}}function HR(t){return typeof t=="function"?BR(t):(t instanceof IDBTransaction&&jR(t),VR(t,UR())?new Proxy(t,nm):t)}function Ri(t){if(t instanceof IDBRequest)return FR(t);if(Uf.has(t))return Uf.get(t);const e=HR(t);return e!==t&&(Uf.set(t,e),Vg.set(e,t)),e}const $f=t=>Vg.get(t);function WR(t,e,{blocked:n,upgrade:r,blocking:i,terminated:s}={}){const o=indexedDB.open(t,e),a=Ri(o);return r&&o.addEventListener("upgradeneeded",l=>{r(Ri(o.result),l.oldVersion,l.newVersion,Ri(o.transaction),l)}),n&&o.addEventListener("blocked",l=>n(l.oldVersion,l.newVersion,l)),a.then(l=>{s&&l.addEventListener("close",()=>s()),i&&l.addEventListener("versionchange",c=>i(c.oldVersion,c.newVersion,c))}).catch(()=>{}),a}const qR=["get","getKey","getAll","getAllKeys","count"],GR=["put","add","delete","clear"],Ff=new Map;function w0(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(Ff.get(e))return Ff.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,i=GR.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(i||qR.includes(n)))return;const s=async function(o,...a){const l=this.transaction(o,i?"readwrite":"readonly");let c=l.store;return r&&(c=c.index(a.shift())),(await Promise.all([c[n](...a),i&&l.done]))[0]};return Ff.set(e,s),s}zR(t=>({...t,get:(e,n,r)=>w0(e,n)||t.get(e,n,r),has:(e,n)=>!!w0(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KR{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(QR(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function QR(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const rm="@firebase/app",E0="0.10.5";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Us=new Mg("@firebase/app"),XR="@firebase/app-compat",YR="@firebase/analytics-compat",JR="@firebase/analytics",ZR="@firebase/app-check-compat",eN="@firebase/app-check",tN="@firebase/auth",nN="@firebase/auth-compat",rN="@firebase/database",iN="@firebase/database-compat",sN="@firebase/functions",oN="@firebase/functions-compat",aN="@firebase/installations",lN="@firebase/installations-compat",uN="@firebase/messaging",cN="@firebase/messaging-compat",hN="@firebase/performance",dN="@firebase/performance-compat",fN="@firebase/remote-config",pN="@firebase/remote-config-compat",mN="@firebase/storage",gN="@firebase/storage-compat",yN="@firebase/firestore",vN="@firebase/vertexai-preview",_N="@firebase/firestore-compat",wN="firebase",EN="10.12.2";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const im="[DEFAULT]",bN={[rm]:"fire-core",[XR]:"fire-core-compat",[JR]:"fire-analytics",[YR]:"fire-analytics-compat",[eN]:"fire-app-check",[ZR]:"fire-app-check-compat",[tN]:"fire-auth",[nN]:"fire-auth-compat",[rN]:"fire-rtdb",[iN]:"fire-rtdb-compat",[sN]:"fire-fn",[oN]:"fire-fn-compat",[aN]:"fire-iid",[lN]:"fire-iid-compat",[uN]:"fire-fcm",[cN]:"fire-fcm-compat",[hN]:"fire-perf",[dN]:"fire-perf-compat",[fN]:"fire-rc",[pN]:"fire-rc-compat",[mN]:"fire-gcs",[gN]:"fire-gcs-compat",[yN]:"fire-fst",[_N]:"fire-fst-compat",[vN]:"fire-vertex","fire-js":"fire-js",[wN]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ch=new Map,TN=new Map,sm=new Map;function b0(t,e){try{t.container.addComponent(e)}catch(n){Us.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function na(t){const e=t.name;if(sm.has(e))return Us.debug(`There were multiple attempts to register component ${e}.`),!1;sm.set(e,t);for(const n of Ch.values())b0(n,t);for(const n of TN.values())b0(n,t);return!0}function Ug(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function Wn(t){return t.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const CN={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Ni=new vu("app","Firebase",CN);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IN{constructor(e,n,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new Vs("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Ni.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wa=EN;function eT(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const r=Object.assign({name:im,automaticDataCollectionEnabled:!1},e),i=r.name;if(typeof i!="string"||!i)throw Ni.create("bad-app-name",{appName:String(i)});if(n||(n=Xb()),!n)throw Ni.create("no-options");const s=Ch.get(i);if(s){if(Th(n,s.options)&&Th(r,s.config))return s;throw Ni.create("duplicate-app",{appName:i})}const o=new NR(i);for(const l of sm.values())o.addComponent(l);const a=new IN(n,r,o);return Ch.set(i,a),a}function tT(t=im){const e=Ch.get(t);if(!e&&t===im&&Xb())return eT();if(!e)throw Ni.create("no-app",{appName:t});return e}function Oi(t,e,n){var r;let i=(r=bN[t])!==null&&r!==void 0?r:t;n&&(i+=`-${n}`);const s=i.match(/\s|\//),o=e.match(/\s|\//);if(s||o){const a=[`Unable to register library "${i}" with version "${e}":`];s&&a.push(`library name "${i}" contains illegal characters (whitespace or "/")`),s&&o&&a.push("and"),o&&a.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Us.warn(a.join(" "));return}na(new Vs(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const SN="firebase-heartbeat-database",AN=1,eu="firebase-heartbeat-store";let jf=null;function nT(){return jf||(jf=WR(SN,AN,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(eu)}catch(n){console.warn(n)}}}}).catch(t=>{throw Ni.create("idb-open",{originalErrorMessage:t.message})})),jf}async function xN(t){try{const n=(await nT()).transaction(eu),r=await n.objectStore(eu).get(rT(t));return await n.done,r}catch(e){if(e instanceof Xr)Us.warn(e.message);else{const n=Ni.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});Us.warn(n.message)}}}async function T0(t,e){try{const r=(await nT()).transaction(eu,"readwrite");await r.objectStore(eu).put(e,rT(t)),await r.done}catch(n){if(n instanceof Xr)Us.warn(n.message);else{const r=Ni.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});Us.warn(r.message)}}}function rT(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kN=1024,PN=30*24*60*60*1e3;class RN{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new ON(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,n;const i=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),s=C0();if(!(((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null))&&!(this._heartbeatsCache.lastSentHeartbeatDate===s||this._heartbeatsCache.heartbeats.some(o=>o.date===s)))return this._heartbeatsCache.heartbeats.push({date:s,agent:i}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(o=>{const a=new Date(o.date).valueOf();return Date.now()-a<=PN}),this._storage.overwrite(this._heartbeatsCache)}async getHeartbeatsHeader(){var e;if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=C0(),{heartbeatsToSend:r,unsentEntries:i}=NN(this._heartbeatsCache.heartbeats),s=bh(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=n,i.length>0?(this._heartbeatsCache.heartbeats=i,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),s}}function C0(){return new Date().toISOString().substring(0,10)}function NN(t,e=kN){const n=[];let r=t.slice();for(const i of t){const s=n.find(o=>o.agent===i.agent);if(s){if(s.dates.push(i.date),I0(n)>e){s.dates.pop();break}}else if(n.push({agent:i.agent,dates:[i.date]}),I0(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class ON{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return wR()?ER().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await xN(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var n;if(await this._canUseIndexedDBPromise){const i=await this.read();return T0(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var n;if(await this._canUseIndexedDBPromise){const i=await this.read();return T0(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...e.heartbeats]})}else return}}function I0(t){return bh(JSON.stringify({version:2,heartbeats:t})).length}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function LN(t){na(new Vs("platform-logger",e=>new KR(e),"PRIVATE")),na(new Vs("heartbeat",e=>new RN(e),"PRIVATE")),Oi(rm,E0,t),Oi(rm,E0,"esm2017"),Oi("fire-js","")}LN("");var DN="firebase",MN="10.12.2";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Oi(DN,MN,"app");function $g(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n}function iT(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const VN=iT,sT=new vu("auth","Firebase",iT());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ih=new Mg("@firebase/auth");function UN(t,...e){Ih.logLevel<=Ee.WARN&&Ih.warn(`Auth (${wa}): ${t}`,...e)}function Uc(t,...e){Ih.logLevel<=Ee.ERROR&&Ih.error(`Auth (${wa}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Dn(t,...e){throw jg(t,...e)}function Kn(t,...e){return jg(t,...e)}function Fg(t,e,n){const r=Object.assign(Object.assign({},VN()),{[e]:n});return new vu("auth","Firebase",r).create(e,{appName:t.name})}function Ur(t){return Fg(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function $N(t,e,n){const r=n;if(!(e instanceof r))throw r.name!==e.constructor.name&&Dn(t,"argument-error"),Fg(t,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function jg(t,...e){if(typeof t!="string"){const n=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=t.name),t._errorFactory.create(n,...r)}return sT.create(t,...e)}function se(t,e,...n){if(!t)throw jg(e,...n)}function Or(t){const e="INTERNAL ASSERTION FAILED: "+t;throw Uc(e),new Error(e)}function Br(t,e){t||Or(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function om(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.href)||""}function FN(){return S0()==="http:"||S0()==="https:"}function S0(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jN(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(FN()||gR()||"connection"in navigator)?navigator.onLine:!0}function zN(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wu{constructor(e,n){this.shortDelay=e,this.longDelay=n,Br(n>e,"Short delay should be less than long delay!"),this.isMobile=pR()||yR()}get(){return jN()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zg(t,e){Br(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oT{static initialize(e,n,r){this.fetchImpl=e,n&&(this.headersImpl=n),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Or("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Or("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Or("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const BN={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const HN=new wu(3e4,6e4);function Ji(t,e){return t.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:t.tenantId}):e}async function Zi(t,e,n,r,i={}){return aT(t,i,async()=>{let s={},o={};r&&(e==="GET"?o=r:s={body:JSON.stringify(r)});const a=_u(Object.assign({key:t.config.apiKey},o)).slice(1),l=await t._getAdditionalHeaders();return l["Content-Type"]="application/json",t.languageCode&&(l["X-Firebase-Locale"]=t.languageCode),oT.fetch()(lT(t,t.config.apiHost,n,a),Object.assign({method:e,headers:l,referrerPolicy:"no-referrer"},s))})}async function aT(t,e,n){t._canInitEmulator=!1;const r=Object.assign(Object.assign({},BN),e);try{const i=new qN(t),s=await Promise.race([n(),i.promise]);i.clearNetworkTimeout();const o=await s.json();if("needConfirmation"in o)throw mc(t,"account-exists-with-different-credential",o);if(s.ok&&!("errorMessage"in o))return o;{const a=s.ok?o.errorMessage:o.error.message,[l,c]=a.split(" : ");if(l==="FEDERATED_USER_ID_ALREADY_LINKED")throw mc(t,"credential-already-in-use",o);if(l==="EMAIL_EXISTS")throw mc(t,"email-already-in-use",o);if(l==="USER_DISABLED")throw mc(t,"user-disabled",o);const h=r[l]||l.toLowerCase().replace(/[_\s]+/g,"-");if(c)throw Fg(t,h,c);Dn(t,h)}}catch(i){if(i instanceof Xr)throw i;Dn(t,"network-request-failed",{message:String(i)})}}async function Eu(t,e,n,r,i={}){const s=await Zi(t,e,n,r,i);return"mfaPendingCredential"in s&&Dn(t,"multi-factor-auth-required",{_serverResponse:s}),s}function lT(t,e,n,r){const i=`${e}${n}?${r}`;return t.config.emulator?zg(t.config,i):`${t.config.apiScheme}://${i}`}function WN(t){switch(t){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class qN{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,r)=>{this.timer=setTimeout(()=>r(Kn(this.auth,"network-request-failed")),HN.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function mc(t,e,n){const r={appName:t.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const i=Kn(t,e,r);return i.customData._tokenResponse=n,i}function A0(t){return t!==void 0&&t.enterprise!==void 0}class GN{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const n of this.recaptchaEnforcementState)if(n.provider&&n.provider===e)return WN(n.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}}async function KN(t,e){return Zi(t,"GET","/v2/recaptchaConfig",Ji(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function QN(t,e){return Zi(t,"POST","/v1/accounts:delete",e)}async function uT(t,e){return Zi(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Pl(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function XN(t,e=!1){const n=_t(t),r=await n.getIdToken(e),i=Bg(r);se(i&&i.exp&&i.auth_time&&i.iat,n.auth,"internal-error");const s=typeof i.firebase=="object"?i.firebase:void 0,o=s==null?void 0:s.sign_in_provider;return{claims:i,token:r,authTime:Pl(zf(i.auth_time)),issuedAtTime:Pl(zf(i.iat)),expirationTime:Pl(zf(i.exp)),signInProvider:o||null,signInSecondFactor:(s==null?void 0:s.sign_in_second_factor)||null}}function zf(t){return Number(t)*1e3}function Bg(t){const[e,n,r]=t.split(".");if(e===void 0||n===void 0||r===void 0)return Uc("JWT malformed, contained fewer than 3 sections"),null;try{const i=Kb(n);return i?JSON.parse(i):(Uc("Failed to decode base64 JWT payload"),null)}catch(i){return Uc("Caught error parsing JWT payload as JSON",i==null?void 0:i.toString()),null}}function x0(t){const e=Bg(t);return se(e,"internal-error"),se(typeof e.exp<"u","internal-error"),se(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function tu(t,e,n=!1){if(n)return e;try{return await e}catch(r){throw r instanceof Xr&&YN(r)&&t.auth.currentUser===t&&await t.auth.signOut(),r}}function YN({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JN{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var n;if(e){const r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;const i=((n=this.user.stsTokenManager.expirationTime)!==null&&n!==void 0?n:0)-Date.now()-3e5;return Math.max(0,i)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class am{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=Pl(this.lastLoginAt),this.creationTime=Pl(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Sh(t){var e;const n=t.auth,r=await t.getIdToken(),i=await tu(t,uT(n,{idToken:r}));se(i==null?void 0:i.users.length,n,"internal-error");const s=i.users[0];t._notifyReloadListener(s);const o=!((e=s.providerUserInfo)===null||e===void 0)&&e.length?cT(s.providerUserInfo):[],a=eO(t.providerData,o),l=t.isAnonymous,c=!(t.email&&s.passwordHash)&&!(a!=null&&a.length),h=l?c:!1,f={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:a,metadata:new am(s.createdAt,s.lastLoginAt),isAnonymous:h};Object.assign(t,f)}async function ZN(t){const e=_t(t);await Sh(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function eO(t,e){return[...t.filter(r=>!e.some(i=>i.providerId===r.providerId)),...e]}function cT(t){return t.map(e=>{var{providerId:n}=e,r=$g(e,["providerId"]);return{providerId:n,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function tO(t,e){const n=await aT(t,{},async()=>{const r=_u({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:i,apiKey:s}=t.config,o=lT(t,i,"/v1/token",`key=${s}`),a=await t._getAdditionalHeaders();return a["Content-Type"]="application/x-www-form-urlencoded",oT.fetch()(o,{method:"POST",headers:a,body:r})});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function nO(t,e){return Zi(t,"POST","/v2/accounts:revokeToken",Ji(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bo{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){se(e.idToken,"internal-error"),se(typeof e.idToken<"u","internal-error"),se(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):x0(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){se(e.length!==0,"internal-error");const n=x0(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(se(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:r,refreshToken:i,expiresIn:s}=await tO(e,n);this.updateTokensAndExpiration(r,i,Number(s))}updateTokensAndExpiration(e,n,r){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,n){const{refreshToken:r,accessToken:i,expirationTime:s}=n,o=new Bo;return r&&(se(typeof r=="string","internal-error",{appName:e}),o.refreshToken=r),i&&(se(typeof i=="string","internal-error",{appName:e}),o.accessToken=i),s&&(se(typeof s=="number","internal-error",{appName:e}),o.expirationTime=s),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Bo,this.toJSON())}_performRefresh(){return Or("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ui(t,e){se(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class Lr{constructor(e){var{uid:n,auth:r,stsTokenManager:i}=e,s=$g(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new JN(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=r,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=s.displayName||null,this.email=s.email||null,this.emailVerified=s.emailVerified||!1,this.phoneNumber=s.phoneNumber||null,this.photoURL=s.photoURL||null,this.isAnonymous=s.isAnonymous||!1,this.tenantId=s.tenantId||null,this.providerData=s.providerData?[...s.providerData]:[],this.metadata=new am(s.createdAt||void 0,s.lastLoginAt||void 0)}async getIdToken(e){const n=await tu(this,this.stsTokenManager.getToken(this.auth,e));return se(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return XN(this,e)}reload(){return ZN(this)}_assign(e){this!==e&&(se(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>Object.assign({},n)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new Lr(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return n.metadata._copy(this.metadata),n}_onReload(e){se(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),n&&await Sh(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(Wn(this.auth.app))return Promise.reject(Ur(this.auth));const e=await this.getIdToken();return await tu(this,QN(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){var r,i,s,o,a,l,c,h;const f=(r=n.displayName)!==null&&r!==void 0?r:void 0,p=(i=n.email)!==null&&i!==void 0?i:void 0,_=(s=n.phoneNumber)!==null&&s!==void 0?s:void 0,E=(o=n.photoURL)!==null&&o!==void 0?o:void 0,I=(a=n.tenantId)!==null&&a!==void 0?a:void 0,R=(l=n._redirectEventId)!==null&&l!==void 0?l:void 0,T=(c=n.createdAt)!==null&&c!==void 0?c:void 0,w=(h=n.lastLoginAt)!==null&&h!==void 0?h:void 0,{uid:C,emailVerified:D,isAnonymous:F,providerData:z,stsTokenManager:g}=n;se(C&&g,e,"internal-error");const y=Bo.fromJSON(this.name,g);se(typeof C=="string",e,"internal-error"),ui(f,e.name),ui(p,e.name),se(typeof D=="boolean",e,"internal-error"),se(typeof F=="boolean",e,"internal-error"),ui(_,e.name),ui(E,e.name),ui(I,e.name),ui(R,e.name),ui(T,e.name),ui(w,e.name);const b=new Lr({uid:C,auth:e,email:p,emailVerified:D,displayName:f,isAnonymous:F,photoURL:E,phoneNumber:_,tenantId:I,stsTokenManager:y,createdAt:T,lastLoginAt:w});return z&&Array.isArray(z)&&(b.providerData=z.map(S=>Object.assign({},S))),R&&(b._redirectEventId=R),b}static async _fromIdTokenResponse(e,n,r=!1){const i=new Bo;i.updateFromServerResponse(n);const s=new Lr({uid:n.localId,auth:e,stsTokenManager:i,isAnonymous:r});return await Sh(s),s}static async _fromGetAccountInfoResponse(e,n,r){const i=n.users[0];se(i.localId!==void 0,"internal-error");const s=i.providerUserInfo!==void 0?cT(i.providerUserInfo):[],o=!(i.email&&i.passwordHash)&&!(s!=null&&s.length),a=new Bo;a.updateFromIdToken(r);const l=new Lr({uid:i.localId,auth:e,stsTokenManager:a,isAnonymous:o}),c={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:s,metadata:new am(i.createdAt,i.lastLoginAt),isAnonymous:!(i.email&&i.passwordHash)&&!(s!=null&&s.length)};return Object.assign(l,c),l}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const k0=new Map;function Dr(t){Br(t instanceof Function,"Expected a class definition");let e=k0.get(t);return e?(Br(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,k0.set(t,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hT{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}hT.type="NONE";const P0=hT;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $c(t,e,n){return`firebase:${t}:${e}:${n}`}class Ho{constructor(e,n,r){this.persistence=e,this.auth=n,this.userKey=r;const{config:i,name:s}=this.auth;this.fullUserKey=$c(this.userKey,i.apiKey,s),this.fullPersistenceKey=$c("persistence",i.apiKey,s),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);return e?Lr._fromJSON(this.auth,e):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,r="authUser"){if(!n.length)return new Ho(Dr(P0),e,r);const i=(await Promise.all(n.map(async c=>{if(await c._isAvailable())return c}))).filter(c=>c);let s=i[0]||Dr(P0);const o=$c(r,e.config.apiKey,e.name);let a=null;for(const c of n)try{const h=await c._get(o);if(h){const f=Lr._fromJSON(e,h);c!==s&&(a=f),s=c;break}}catch{}const l=i.filter(c=>c._shouldAllowMigration);return!s._shouldAllowMigration||!l.length?new Ho(s,e,r):(s=l[0],a&&await s._set(o,a.toJSON()),await Promise.all(n.map(async c=>{if(c!==s)try{await c._remove(o)}catch{}})),new Ho(s,e,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function R0(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(pT(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(dT(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(gT(e))return"Blackberry";if(yT(e))return"Webos";if(Hg(e))return"Safari";if((e.includes("chrome/")||fT(e))&&!e.includes("edge/"))return"Chrome";if(mT(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=t.match(n);if((r==null?void 0:r.length)===2)return r[1]}return"Other"}function dT(t=Lt()){return/firefox\//i.test(t)}function Hg(t=Lt()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function fT(t=Lt()){return/crios\//i.test(t)}function pT(t=Lt()){return/iemobile/i.test(t)}function mT(t=Lt()){return/android/i.test(t)}function gT(t=Lt()){return/blackberry/i.test(t)}function yT(t=Lt()){return/webos/i.test(t)}function ld(t=Lt()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function rO(t=Lt()){var e;return ld(t)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function iO(){return vR()&&document.documentMode===10}function vT(t=Lt()){return ld(t)||mT(t)||yT(t)||gT(t)||/windows phone/i.test(t)||pT(t)}function sO(){try{return!!(window&&window!==window.top)}catch{return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _T(t,e=[]){let n;switch(t){case"Browser":n=R0(Lt());break;case"Worker":n=`${R0(Lt())}-${t}`;break;default:n=t}const r=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${wa}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oO{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const r=s=>new Promise((o,a)=>{try{const l=e(s);o(l)}catch(l){a(l)}});r.onAbort=n,this.queue.push(r);const i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const r of this.queue)await r(e),r.onAbort&&n.push(r.onAbort)}catch(r){n.reverse();for(const i of n)try{i()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r==null?void 0:r.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function aO(t,e={}){return Zi(t,"GET","/v2/passwordPolicy",Ji(t,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lO=6;class uO{constructor(e){var n,r,i,s;const o=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(n=o.minPasswordLength)!==null&&n!==void 0?n:lO,o.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=o.maxPasswordLength),o.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=o.containsLowercaseCharacter),o.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=o.containsUppercaseCharacter),o.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=o.containsNumericCharacter),o.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=o.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(i=(r=e.allowedNonAlphanumericCharacters)===null||r===void 0?void 0:r.join(""))!==null&&i!==void 0?i:"",this.forceUpgradeOnSignin=(s=e.forceUpgradeOnSignin)!==null&&s!==void 0?s:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var n,r,i,s,o,a;const l={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,l),this.validatePasswordCharacterOptions(e,l),l.isValid&&(l.isValid=(n=l.meetsMinPasswordLength)!==null&&n!==void 0?n:!0),l.isValid&&(l.isValid=(r=l.meetsMaxPasswordLength)!==null&&r!==void 0?r:!0),l.isValid&&(l.isValid=(i=l.containsLowercaseLetter)!==null&&i!==void 0?i:!0),l.isValid&&(l.isValid=(s=l.containsUppercaseLetter)!==null&&s!==void 0?s:!0),l.isValid&&(l.isValid=(o=l.containsNumericCharacter)!==null&&o!==void 0?o:!0),l.isValid&&(l.isValid=(a=l.containsNonAlphanumericCharacter)!==null&&a!==void 0?a:!0),l}validatePasswordLengthOptions(e,n){const r=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;r&&(n.meetsMinPasswordLength=e.length>=r),i&&(n.meetsMaxPasswordLength=e.length<=i)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let r;for(let i=0;i<e.length;i++)r=e.charAt(i),this.updatePasswordCharacterOptionsStatuses(n,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,n,r,i,s){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cO{constructor(e,n,r,i){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=r,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new N0(this),this.idTokenSubscription=new N0(this),this.beforeStateQueue=new oO(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=sT,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=i.sdkClientVersion}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=Dr(n)),this._initializationPromise=this.queue(async()=>{var r,i;if(!this._deleted&&(this.persistenceManager=await Ho.create(this,e),!this._deleted)){if(!((r=this._popupRedirectResolver)===null||r===void 0)&&r._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((i=this.currentUser)===null||i===void 0?void 0:i.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await uT(this,{idToken:e}),r=await Lr._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(r)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var n;if(Wn(this.app)){const o=this.app.settings.authIdToken;return o?new Promise(a=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(o).then(a,a))}):this.directlySetCurrentUser(null)}const r=await this.assertedPersistence.getCurrentUser();let i=r,s=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const o=(n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId,a=i==null?void 0:i._redirectEventId,l=await this.tryRedirectSignIn(e);(!o||o===a)&&(l!=null&&l.user)&&(i=l.user,s=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(s)try{await this.beforeStateQueue.runMiddleware(i)}catch(o){i=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return se(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await Sh(e)}catch(n){if((n==null?void 0:n.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=zN()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(Wn(this.app))return Promise.reject(Ur(this));const n=e?_t(e):null;return n&&se(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&se(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return Wn(this.app)?Promise.reject(Ur(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return Wn(this.app)?Promise.reject(Ur(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Dr(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await aO(this),n=new uO(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new vu("auth","Firebase",e())}onAuthStateChanged(e,n,r){return this.registerStateListener(this.authStateSubscription,e,n,r)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,r){return this.registerStateListener(this.idTokenSubscription,e,n,r)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(r.tenantId=this.tenantId),await nO(this,r)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,n){const r=await this.getOrInitRedirectPersistenceManager(n);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&Dr(e)||this._popupRedirectResolver;se(n,this,"argument-error"),this.redirectPersistenceManager=await Ho.create(this,[Dr(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var n,r;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)===null||n===void 0?void 0:n._redirectEventId)===e?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const r=(n=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&n!==void 0?n:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,r,i){if(this._deleted)return()=>{};const s=typeof n=="function"?n:n.next.bind(n);let o=!1;const a=this._isInitialized?Promise.resolve():this._initializationPromise;if(se(a,this,"internal-error"),a.then(()=>{o||s(this.currentUser)}),typeof n=="function"){const l=e.addObserver(n,r,i);return()=>{o=!0,l()}}else{const l=e.addObserver(n);return()=>{o=!0,l()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return se(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=_T(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const n={"X-Client-Version":this.clientVersion};this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId);const r=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());r&&(n["X-Firebase-Client"]=r);const i=await this._getAppCheckToken();return i&&(n["X-Firebase-AppCheck"]=i),n}async _getAppCheckToken(){var e;const n=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return n!=null&&n.error&&UN(`Error while retrieving App Check token: ${n.error}`),n==null?void 0:n.token}}function es(t){return _t(t)}class N0{constructor(e){this.auth=e,this.observer=null,this.addObserver=SR(n=>this.observer=n)}get next(){return se(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let ud={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function hO(t){ud=t}function wT(t){return ud.loadJS(t)}function dO(){return ud.recaptchaEnterpriseScript}function fO(){return ud.gapiScript}function pO(t){return`__${t}${Math.floor(Math.random()*1e6)}`}const mO="recaptcha-enterprise",gO="NO_RECAPTCHA";class yO{constructor(e){this.type=mO,this.auth=es(e)}async verify(e="verify",n=!1){async function r(s){if(!n){if(s.tenantId==null&&s._agentRecaptchaConfig!=null)return s._agentRecaptchaConfig.siteKey;if(s.tenantId!=null&&s._tenantRecaptchaConfigs[s.tenantId]!==void 0)return s._tenantRecaptchaConfigs[s.tenantId].siteKey}return new Promise(async(o,a)=>{KN(s,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(l=>{if(l.recaptchaKey===void 0)a(new Error("recaptcha Enterprise site key undefined"));else{const c=new GN(l);return s.tenantId==null?s._agentRecaptchaConfig=c:s._tenantRecaptchaConfigs[s.tenantId]=c,o(c.siteKey)}}).catch(l=>{a(l)})})}function i(s,o,a){const l=window.grecaptcha;A0(l)?l.enterprise.ready(()=>{l.enterprise.execute(s,{action:e}).then(c=>{o(c)}).catch(()=>{o(gO)})}):a(Error("No reCAPTCHA enterprise script loaded."))}return new Promise((s,o)=>{r(this.auth).then(a=>{if(!n&&A0(window.grecaptcha))i(a,s,o);else{if(typeof window>"u"){o(new Error("RecaptchaVerifier is only supported in browser"));return}let l=dO();l.length!==0&&(l+=a),wT(l).then(()=>{i(a,s,o)}).catch(c=>{o(c)})}}).catch(a=>{o(a)})})}}async function O0(t,e,n,r=!1){const i=new yO(t);let s;try{s=await i.verify(n)}catch{s=await i.verify(n,!0)}const o=Object.assign({},e);return r?Object.assign(o,{captchaResp:s}):Object.assign(o,{captchaResponse:s}),Object.assign(o,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(o,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),o}async function lm(t,e,n,r){var i;if(!((i=t._getRecaptchaConfig())===null||i===void 0)&&i.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const s=await O0(t,e,n,n==="getOobCode");return r(t,s)}else return r(t,e).catch(async s=>{if(s.code==="auth/missing-recaptcha-token"){console.log(`${n} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const o=await O0(t,e,n,n==="getOobCode");return r(t,o)}else return Promise.reject(s)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vO(t,e){const n=Ug(t,"auth");if(n.isInitialized()){const i=n.getImmediate(),s=n.getOptions();if(Th(s,e??{}))return i;Dn(i,"already-initialized")}return n.initialize({options:e})}function _O(t,e){const n=(e==null?void 0:e.persistence)||[],r=(Array.isArray(n)?n:[n]).map(Dr);e!=null&&e.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(r,e==null?void 0:e.popupRedirectResolver)}function wO(t,e,n){const r=es(t);se(r._canInitEmulator,r,"emulator-config-failed"),se(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const i=!1,s=ET(e),{host:o,port:a}=EO(e),l=a===null?"":`:${a}`;r.config.emulator={url:`${s}//${o}${l}/`},r.settings.appVerificationDisabledForTesting=!0,r.emulatorConfig=Object.freeze({host:o,port:a,protocol:s.replace(":",""),options:Object.freeze({disableWarnings:i})}),bO()}function ET(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function EO(t){const e=ET(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){const s=i[1];return{host:s,port:L0(r.substr(s.length+1))}}else{const[s,o]=r.split(":");return{host:s,port:L0(o)}}}function L0(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function bO(){function t(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wg{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return Or("not implemented")}_getIdTokenResponse(e){return Or("not implemented")}_linkToIdToken(e,n){return Or("not implemented")}_getReauthenticationResolver(e){return Or("not implemented")}}async function TO(t,e){return Zi(t,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function CO(t,e){return Eu(t,"POST","/v1/accounts:signInWithPassword",Ji(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function IO(t,e){return Eu(t,"POST","/v1/accounts:signInWithEmailLink",Ji(t,e))}async function SO(t,e){return Eu(t,"POST","/v1/accounts:signInWithEmailLink",Ji(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nu extends Wg{constructor(e,n,r,i=null){super("password",r),this._email=e,this._password=n,this._tenantId=i}static _fromEmailAndPassword(e,n){return new nu(e,n,"password")}static _fromEmailAndCode(e,n,r=null){return new nu(e,n,"emailLink",r)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e;if(n!=null&&n.email&&(n!=null&&n.password)){if(n.signInMethod==="password")return this._fromEmailAndPassword(n.email,n.password);if(n.signInMethod==="emailLink")return this._fromEmailAndCode(n.email,n.password,n.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const n={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return lm(e,n,"signInWithPassword",CO);case"emailLink":return IO(e,{email:this._email,oobCode:this._password});default:Dn(e,"internal-error")}}async _linkToIdToken(e,n){switch(this.signInMethod){case"password":const r={idToken:n,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return lm(e,r,"signUpPassword",TO);case"emailLink":return SO(e,{idToken:n,email:this._email,oobCode:this._password});default:Dn(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Wo(t,e){return Eu(t,"POST","/v1/accounts:signInWithIdp",Ji(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const AO="http://localhost";class $s extends Wg{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new $s(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):Dn("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:i}=n,s=$g(n,["providerId","signInMethod"]);if(!r||!i)return null;const o=new $s(r,i);return o.idToken=s.idToken||void 0,o.accessToken=s.accessToken||void 0,o.secret=s.secret,o.nonce=s.nonce,o.pendingToken=s.pendingToken||null,o}_getIdTokenResponse(e){const n=this.buildRequest();return Wo(e,n)}_linkToIdToken(e,n){const r=this.buildRequest();return r.idToken=n,Wo(e,r)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,Wo(e,n)}buildRequest(){const e={requestUri:AO,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=_u(n)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xO(t){switch(t){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function kO(t){const e=dl(fl(t)).link,n=e?dl(fl(e)).deep_link_id:null,r=dl(fl(t)).deep_link_id;return(r?dl(fl(r)).link:null)||r||n||e||t}class qg{constructor(e){var n,r,i,s,o,a;const l=dl(fl(e)),c=(n=l.apiKey)!==null&&n!==void 0?n:null,h=(r=l.oobCode)!==null&&r!==void 0?r:null,f=xO((i=l.mode)!==null&&i!==void 0?i:null);se(c&&h&&f,"argument-error"),this.apiKey=c,this.operation=f,this.code=h,this.continueUrl=(s=l.continueUrl)!==null&&s!==void 0?s:null,this.languageCode=(o=l.languageCode)!==null&&o!==void 0?o:null,this.tenantId=(a=l.tenantId)!==null&&a!==void 0?a:null}static parseLink(e){const n=kO(e);try{return new qg(n)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ea{constructor(){this.providerId=Ea.PROVIDER_ID}static credential(e,n){return nu._fromEmailAndPassword(e,n)}static credentialWithLink(e,n){const r=qg.parseLink(n);return se(r,"argument-error"),nu._fromEmailAndCode(e,r.code,r.tenantId)}}Ea.PROVIDER_ID="password";Ea.EMAIL_PASSWORD_SIGN_IN_METHOD="password";Ea.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gg{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bu extends Gg{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gi extends bu{constructor(){super("facebook.com")}static credential(e){return $s._fromParams({providerId:gi.PROVIDER_ID,signInMethod:gi.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return gi.credentialFromTaggedObject(e)}static credentialFromError(e){return gi.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return gi.credential(e.oauthAccessToken)}catch{return null}}}gi.FACEBOOK_SIGN_IN_METHOD="facebook.com";gi.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kr extends bu{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return $s._fromParams({providerId:kr.PROVIDER_ID,signInMethod:kr.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return kr.credentialFromTaggedObject(e)}static credentialFromError(e){return kr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:r}=e;if(!n&&!r)return null;try{return kr.credential(n,r)}catch{return null}}}kr.GOOGLE_SIGN_IN_METHOD="google.com";kr.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yi extends bu{constructor(){super("github.com")}static credential(e){return $s._fromParams({providerId:yi.PROVIDER_ID,signInMethod:yi.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return yi.credentialFromTaggedObject(e)}static credentialFromError(e){return yi.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return yi.credential(e.oauthAccessToken)}catch{return null}}}yi.GITHUB_SIGN_IN_METHOD="github.com";yi.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vi extends bu{constructor(){super("twitter.com")}static credential(e,n){return $s._fromParams({providerId:vi.PROVIDER_ID,signInMethod:vi.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return vi.credentialFromTaggedObject(e)}static credentialFromError(e){return vi.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:r}=e;if(!n||!r)return null;try{return vi.credential(n,r)}catch{return null}}}vi.TWITTER_SIGN_IN_METHOD="twitter.com";vi.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function PO(t,e){return Eu(t,"POST","/v1/accounts:signUp",Ji(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fs{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,r,i=!1){const s=await Lr._fromIdTokenResponse(e,r,i),o=D0(r);return new Fs({user:s,providerId:o,_tokenResponse:r,operationType:n})}static async _forOperation(e,n,r){await e._updateTokensIfNecessary(r,!0);const i=D0(r);return new Fs({user:e,providerId:i,_tokenResponse:r,operationType:n})}}function D0(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ah extends Xr{constructor(e,n,r,i){var s;super(n.code,n.message),this.operationType=r,this.user=i,Object.setPrototypeOf(this,Ah.prototype),this.customData={appName:e.name,tenantId:(s=e.tenantId)!==null&&s!==void 0?s:void 0,_serverResponse:n.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,n,r,i){return new Ah(e,n,r,i)}}function bT(t,e,n,r){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(s=>{throw s.code==="auth/multi-factor-auth-required"?Ah._fromErrorAndOperation(t,s,e,r):s})}async function RO(t,e,n=!1){const r=await tu(t,e._linkToIdToken(t.auth,await t.getIdToken()),n);return Fs._forOperation(t,"link",r)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function NO(t,e,n=!1){const{auth:r}=t;if(Wn(r.app))return Promise.reject(Ur(r));const i="reauthenticate";try{const s=await tu(t,bT(r,i,e,t),n);se(s.idToken,r,"internal-error");const o=Bg(s.idToken);se(o,r,"internal-error");const{sub:a}=o;return se(t.uid===a,r,"user-mismatch"),Fs._forOperation(t,i,s)}catch(s){throw(s==null?void 0:s.code)==="auth/user-not-found"&&Dn(r,"user-mismatch"),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function TT(t,e,n=!1){if(Wn(t.app))return Promise.reject(Ur(t));const r="signIn",i=await bT(t,r,e),s=await Fs._fromIdTokenResponse(t,r,i);return n||await t._updateCurrentUser(s.user),s}async function OO(t,e){return TT(es(t),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function CT(t){const e=es(t);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function LO(t,e,n){if(Wn(t.app))return Promise.reject(Ur(t));const r=es(t),o=await lm(r,{returnSecureToken:!0,email:e,password:n,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",PO).catch(l=>{throw l.code==="auth/password-does-not-meet-requirements"&&CT(t),l}),a=await Fs._fromIdTokenResponse(r,"signIn",o);return await r._updateCurrentUser(a.user),a}function DO(t,e,n){return Wn(t.app)?Promise.reject(Ur(t)):OO(_t(t),Ea.credential(e,n)).catch(async r=>{throw r.code==="auth/password-does-not-meet-requirements"&&CT(t),r})}function MO(t,e,n,r){return _t(t).onIdTokenChanged(e,n,r)}function VO(t,e,n){return _t(t).beforeAuthStateChanged(e,n)}function IT(t,e,n,r){return _t(t).onAuthStateChanged(e,n,r)}function UO(t){return _t(t).signOut()}const xh="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ST{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(xh,"1"),this.storage.removeItem(xh),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $O(){const t=Lt();return Hg(t)||ld(t)}const FO=1e3,jO=10;class AT extends ST{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=$O()&&sO(),this.fallbackToPolling=vT(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const r=this.storage.getItem(n),i=this.localCache[n];r!==i&&e(n,i,r)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((o,a,l)=>{this.notifyListeners(o,l)});return}const r=e.key;if(n?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const o=this.storage.getItem(r);if(e.newValue!==o)e.newValue!==null?this.storage.setItem(r,e.newValue):this.storage.removeItem(r);else if(this.localCache[r]===e.newValue&&!n)return}const i=()=>{const o=this.storage.getItem(r);!n&&this.localCache[r]===o||this.notifyListeners(r,o)},s=this.storage.getItem(r);iO()&&s!==e.newValue&&e.newValue!==e.oldValue?setTimeout(i,jO):i()}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const i of Array.from(r))i(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:r}),!0)})},FO)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}AT.type="LOCAL";const zO=AT;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xT extends ST{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}xT.type="SESSION";const kT=xT;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function BO(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cd{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(i=>i.isListeningto(e));if(n)return n;const r=new cd(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:r,eventType:i,data:s}=n.data,o=this.handlersMap[i];if(!(o!=null&&o.size))return;n.ports[0].postMessage({status:"ack",eventId:r,eventType:i});const a=Array.from(o).map(async c=>c(n.origin,s)),l=await BO(a);n.ports[0].postMessage({status:"done",eventId:r,eventType:i,response:l})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}cd.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Kg(t="",e=10){let n="";for(let r=0;r<e;r++)n+=Math.floor(Math.random()*10);return t+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HO{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,r=50){const i=typeof MessageChannel<"u"?new MessageChannel:null;if(!i)throw new Error("connection_unavailable");let s,o;return new Promise((a,l)=>{const c=Kg("",20);i.port1.start();const h=setTimeout(()=>{l(new Error("unsupported_event"))},r);o={messageChannel:i,onMessage(f){const p=f;if(p.data.eventId===c)switch(p.data.status){case"ack":clearTimeout(h),s=setTimeout(()=>{l(new Error("timeout"))},3e3);break;case"done":clearTimeout(s),a(p.data.response);break;default:clearTimeout(h),clearTimeout(s),l(new Error("invalid_response"));break}}},this.handlers.add(o),i.port1.addEventListener("message",o.onMessage),this.target.postMessage({eventType:e,eventId:c,data:n},[i.port2])}).finally(()=>{o&&this.removeMessageHandler(o)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ur(){return window}function WO(t){ur().location.href=t}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function PT(){return typeof ur().WorkerGlobalScope<"u"&&typeof ur().importScripts=="function"}async function qO(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function GO(){var t;return((t=navigator==null?void 0:navigator.serviceWorker)===null||t===void 0?void 0:t.controller)||null}function KO(){return PT()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const RT="firebaseLocalStorageDb",QO=1,kh="firebaseLocalStorage",NT="fbase_key";class Tu{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function hd(t,e){return t.transaction([kh],e?"readwrite":"readonly").objectStore(kh)}function XO(){const t=indexedDB.deleteDatabase(RT);return new Tu(t).toPromise()}function um(){const t=indexedDB.open(RT,QO);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{const r=t.result;try{r.createObjectStore(kh,{keyPath:NT})}catch(i){n(i)}}),t.addEventListener("success",async()=>{const r=t.result;r.objectStoreNames.contains(kh)?e(r):(r.close(),await XO(),e(await um()))})})}async function M0(t,e,n){const r=hd(t,!0).put({[NT]:e,value:n});return new Tu(r).toPromise()}async function YO(t,e){const n=hd(t,!1).get(e),r=await new Tu(n).toPromise();return r===void 0?null:r.value}function V0(t,e){const n=hd(t,!0).delete(e);return new Tu(n).toPromise()}const JO=800,ZO=3;class OT{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await um(),this.db)}async _withRetries(e){let n=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(n++>ZO)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return PT()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=cd._getInstance(KO()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){var e,n;if(this.activeServiceWorker=await qO(),!this.activeServiceWorker)return;this.sender=new HO(this.activeServiceWorker);const r=await this.sender._send("ping",{},800);r&&!((e=r[0])===null||e===void 0)&&e.fulfilled&&!((n=r[0])===null||n===void 0)&&n.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||GO()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await um();return await M0(e,xh,"1"),await V0(e,xh),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(r=>M0(r,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(r=>YO(r,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>V0(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(i=>{const s=hd(i,!1).getAll();return new Tu(s).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],r=new Set;if(e.length!==0)for(const{fbase_key:i,value:s}of e)r.add(i),JSON.stringify(this.localCache[i])!==JSON.stringify(s)&&(this.notifyListeners(i,s),n.push(i));for(const i of Object.keys(this.localCache))this.localCache[i]&&!r.has(i)&&(this.notifyListeners(i,null),n.push(i));return n}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const i of Array.from(r))i(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),JO)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}OT.type="LOCAL";const eL=OT;new wu(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function LT(t,e){return e?Dr(e):(se(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qg extends Wg{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Wo(e,this._buildIdpRequest())}_linkToIdToken(e,n){return Wo(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return Wo(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function tL(t){return TT(t.auth,new Qg(t),t.bypassAuthState)}function nL(t){const{auth:e,user:n}=t;return se(n,e,"internal-error"),NO(n,new Qg(t),t.bypassAuthState)}async function rL(t){const{auth:e,user:n}=t;return se(n,e,"internal-error"),RO(n,new Qg(t),t.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DT{constructor(e,n,r,i,s=!1){this.auth=e,this.resolver=r,this.user=i,this.bypassAuthState=s,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:r,postBody:i,tenantId:s,error:o,type:a}=e;if(o){this.reject(o);return}const l={auth:this.auth,requestUri:n,sessionId:r,tenantId:s||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(a)(l))}catch(c){this.reject(c)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return tL;case"linkViaPopup":case"linkViaRedirect":return rL;case"reauthViaPopup":case"reauthViaRedirect":return nL;default:Dn(this.auth,"internal-error")}}resolve(e){Br(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Br(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iL=new wu(2e3,1e4);async function sL(t,e,n){if(Wn(t.app))return Promise.reject(Kn(t,"operation-not-supported-in-this-environment"));const r=es(t);$N(t,e,Gg);const i=LT(r,n);return new bs(r,"signInViaPopup",e,i).executeNotNull()}class bs extends DT{constructor(e,n,r,i,s){super(e,n,i,s),this.provider=r,this.authWindow=null,this.pollId=null,bs.currentPopupAction&&bs.currentPopupAction.cancel(),bs.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return se(e,this.auth,"internal-error"),e}async onExecution(){Br(this.filter.length===1,"Popup operations only handle one event");const e=Kg();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(Kn(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(Kn(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,bs.currentPopupAction=null}pollUserCancellation(){const e=()=>{var n,r;if(!((r=(n=this.authWindow)===null||n===void 0?void 0:n.window)===null||r===void 0)&&r.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Kn(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,iL.get())};e()}}bs.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oL="pendingRedirect",Fc=new Map;class aL extends DT{constructor(e,n,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,r),this.eventId=null}async execute(){let e=Fc.get(this.auth._key());if(!e){try{const r=await lL(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(n){e=()=>Promise.reject(n)}Fc.set(this.auth._key(),e)}return this.bypassAuthState||Fc.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function lL(t,e){const n=hL(e),r=cL(t);if(!await r._isAvailable())return!1;const i=await r._get(n)==="true";return await r._remove(n),i}function uL(t,e){Fc.set(t._key(),e)}function cL(t){return Dr(t._redirectPersistence)}function hL(t){return $c(oL,t.config.apiKey,t.name)}async function dL(t,e,n=!1){if(Wn(t.app))return Promise.reject(Ur(t));const r=es(t),i=LT(r,e),o=await new aL(r,i,n).execute();return o&&!n&&(delete o.user._redirectEventId,await r._persistUserIfCurrent(o.user),await r._setRedirectUser(null,e)),o}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fL=10*60*1e3;class pL{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(n=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!mL(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var r;if(e.error&&!MT(e)){const i=((r=e.error.code)===null||r===void 0?void 0:r.split("auth/")[1])||"internal-error";n.onError(Kn(this.auth,i))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const r=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=fL&&this.cachedEventUids.clear(),this.cachedEventUids.has(U0(e))}saveEventToCache(e){this.cachedEventUids.add(U0(e)),this.lastProcessedEventTime=Date.now()}}function U0(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function MT({type:t,error:e}){return t==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function mL(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return MT(t);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function gL(t,e={}){return Zi(t,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yL=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,vL=/^https?/;async function _L(t){if(t.config.emulator)return;const{authorizedDomains:e}=await gL(t);for(const n of e)try{if(wL(n))return}catch{}Dn(t,"unauthorized-domain")}function wL(t){const e=om(),{protocol:n,hostname:r}=new URL(e);if(t.startsWith("chrome-extension://")){const o=new URL(t);return o.hostname===""&&r===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&o.hostname===r}if(!vL.test(n))return!1;if(yL.test(t))return r===t;const i=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const EL=new wu(3e4,6e4);function $0(){const t=ur().___jsl;if(t!=null&&t.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function bL(t){return new Promise((e,n)=>{var r,i,s;function o(){$0(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{$0(),n(Kn(t,"network-request-failed"))},timeout:EL.get()})}if(!((i=(r=ur().gapi)===null||r===void 0?void 0:r.iframes)===null||i===void 0)&&i.Iframe)e(gapi.iframes.getContext());else if(!((s=ur().gapi)===null||s===void 0)&&s.load)o();else{const a=pO("iframefcb");return ur()[a]=()=>{gapi.load?o():n(Kn(t,"network-request-failed"))},wT(`${fO()}?onload=${a}`).catch(l=>n(l))}}).catch(e=>{throw jc=null,e})}let jc=null;function TL(t){return jc=jc||bL(t),jc}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const CL=new wu(5e3,15e3),IL="__/auth/iframe",SL="emulator/auth/iframe",AL={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},xL=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function kL(t){const e=t.config;se(e.authDomain,t,"auth-domain-config-required");const n=e.emulator?zg(e,SL):`https://${t.config.authDomain}/${IL}`,r={apiKey:e.apiKey,appName:t.name,v:wa},i=xL.get(t.config.apiHost);i&&(r.eid=i);const s=t._getFrameworks();return s.length&&(r.fw=s.join(",")),`${n}?${_u(r).slice(1)}`}async function PL(t){const e=await TL(t),n=ur().gapi;return se(n,t,"internal-error"),e.open({where:document.body,url:kL(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:AL,dontclear:!0},r=>new Promise(async(i,s)=>{await r.restyle({setHideOnLeave:!1});const o=Kn(t,"network-request-failed"),a=ur().setTimeout(()=>{s(o)},CL.get());function l(){ur().clearTimeout(a),i(r)}r.ping(l).then(l,()=>{s(o)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const RL={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},NL=500,OL=600,LL="_blank",DL="http://localhost";class F0{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function ML(t,e,n,r=NL,i=OL){const s=Math.max((window.screen.availHeight-i)/2,0).toString(),o=Math.max((window.screen.availWidth-r)/2,0).toString();let a="";const l=Object.assign(Object.assign({},RL),{width:r.toString(),height:i.toString(),top:s,left:o}),c=Lt().toLowerCase();n&&(a=fT(c)?LL:n),dT(c)&&(e=e||DL,l.scrollbars="yes");const h=Object.entries(l).reduce((p,[_,E])=>`${p}${_}=${E},`,"");if(rO(c)&&a!=="_self")return VL(e||"",a),new F0(null);const f=window.open(e||"",a,h);se(f,t,"popup-blocked");try{f.focus()}catch{}return new F0(f)}function VL(t,e){const n=document.createElement("a");n.href=t,n.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const UL="__/auth/handler",$L="emulator/auth/handler",FL=encodeURIComponent("fac");async function j0(t,e,n,r,i,s){se(t.config.authDomain,t,"auth-domain-config-required"),se(t.config.apiKey,t,"invalid-api-key");const o={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:r,v:wa,eventId:i};if(e instanceof Gg){e.setDefaultLanguage(t.languageCode),o.providerId=e.providerId||"",IR(e.getCustomParameters())||(o.customParameters=JSON.stringify(e.getCustomParameters()));for(const[h,f]of Object.entries({}))o[h]=f}if(e instanceof bu){const h=e.getScopes().filter(f=>f!=="");h.length>0&&(o.scopes=h.join(","))}t.tenantId&&(o.tid=t.tenantId);const a=o;for(const h of Object.keys(a))a[h]===void 0&&delete a[h];const l=await t._getAppCheckToken(),c=l?`#${FL}=${encodeURIComponent(l)}`:"";return`${jL(t)}?${_u(a).slice(1)}${c}`}function jL({config:t}){return t.emulator?zg(t,$L):`https://${t.authDomain}/${UL}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Bf="webStorageSupport";class zL{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=kT,this._completeRedirectFn=dL,this._overrideRedirectResult=uL}async _openPopup(e,n,r,i){var s;Br((s=this.eventManagers[e._key()])===null||s===void 0?void 0:s.manager,"_initialize() not called before _openPopup()");const o=await j0(e,n,r,om(),i);return ML(e,o,Kg())}async _openRedirect(e,n,r,i){await this._originValidation(e);const s=await j0(e,n,r,om(),i);return WO(s),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:i,promise:s}=this.eventManagers[n];return i?Promise.resolve(i):(Br(s,"If manager is not set, promise should be"),s)}const r=this.initAndGetManager(e);return this.eventManagers[n]={promise:r},r.catch(()=>{delete this.eventManagers[n]}),r}async initAndGetManager(e){const n=await PL(e),r=new pL(e);return n.register("authEvent",i=>(se(i==null?void 0:i.authEvent,e,"invalid-auth-event"),{status:r.onEvent(i.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=n,r}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(Bf,{type:Bf},i=>{var s;const o=(s=i==null?void 0:i[0])===null||s===void 0?void 0:s[Bf];o!==void 0&&n(!!o),Dn(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=_L(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return vT()||Hg()||ld()}}const BL=zL;var z0="@firebase/auth",B0="1.7.4";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HL{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(r=>{e((r==null?void 0:r.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){se(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function WL(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function qL(t){na(new Vs("auth",(e,{options:n})=>{const r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),s=e.getProvider("app-check-internal"),{apiKey:o,authDomain:a}=r.options;se(o&&!o.includes(":"),"invalid-api-key",{appName:r.name});const l={apiKey:o,authDomain:a,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:_T(t)},c=new cO(r,i,s,l);return _O(c,n),c},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,r)=>{e.getProvider("auth-internal").initialize()})),na(new Vs("auth-internal",e=>{const n=es(e.getProvider("auth").getImmediate());return(r=>new HL(r))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),Oi(z0,B0,WL(t)),Oi(z0,B0,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const GL=5*60,KL=Yb("authIdTokenMaxAge")||GL;let H0=null;const QL=t=>async e=>{const n=e&&await e.getIdTokenResult(),r=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(r&&r>KL)return;const i=n==null?void 0:n.token;H0!==i&&(H0=i,await fetch(t,{method:i?"POST":"DELETE",headers:i?{Authorization:`Bearer ${i}`}:{}}))};function VT(t=tT()){const e=Ug(t,"auth");if(e.isInitialized())return e.getImmediate();const n=vO(t,{popupRedirectResolver:BL,persistence:[eL,zO,kT]}),r=Yb("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){const s=new URL(r,location.origin);if(location.origin===s.origin){const o=QL(s.toString());VO(n,o,()=>o(n.currentUser)),MO(n,a=>o(a))}}const i=Qb("auth");return i&&wO(n,`http://${i}`),n}function XL(){var t,e;return(e=(t=document.getElementsByTagName("head"))===null||t===void 0?void 0:t[0])!==null&&e!==void 0?e:document}hO({loadJS(t){return new Promise((e,n)=>{const r=document.createElement("script");r.setAttribute("src",t),r.onload=e,r.onerror=i=>{const s=Kn("internal-error");s.customData=i,n(s)},r.type="text/javascript",r.charset="UTF-8",XL().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});qL("Browser");var W0=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Ss,UT;(function(){var t;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(g,y){function b(){}b.prototype=y.prototype,g.D=y.prototype,g.prototype=new b,g.prototype.constructor=g,g.C=function(S,k,P){for(var x=Array(arguments.length-2),Ie=2;Ie<arguments.length;Ie++)x[Ie-2]=arguments[Ie];return y.prototype[k].apply(S,x)}}function n(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(r,n),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(g,y,b){b||(b=0);var S=Array(16);if(typeof y=="string")for(var k=0;16>k;++k)S[k]=y.charCodeAt(b++)|y.charCodeAt(b++)<<8|y.charCodeAt(b++)<<16|y.charCodeAt(b++)<<24;else for(k=0;16>k;++k)S[k]=y[b++]|y[b++]<<8|y[b++]<<16|y[b++]<<24;y=g.g[0],b=g.g[1],k=g.g[2];var P=g.g[3],x=y+(P^b&(k^P))+S[0]+3614090360&4294967295;y=b+(x<<7&4294967295|x>>>25),x=P+(k^y&(b^k))+S[1]+3905402710&4294967295,P=y+(x<<12&4294967295|x>>>20),x=k+(b^P&(y^b))+S[2]+606105819&4294967295,k=P+(x<<17&4294967295|x>>>15),x=b+(y^k&(P^y))+S[3]+3250441966&4294967295,b=k+(x<<22&4294967295|x>>>10),x=y+(P^b&(k^P))+S[4]+4118548399&4294967295,y=b+(x<<7&4294967295|x>>>25),x=P+(k^y&(b^k))+S[5]+1200080426&4294967295,P=y+(x<<12&4294967295|x>>>20),x=k+(b^P&(y^b))+S[6]+2821735955&4294967295,k=P+(x<<17&4294967295|x>>>15),x=b+(y^k&(P^y))+S[7]+4249261313&4294967295,b=k+(x<<22&4294967295|x>>>10),x=y+(P^b&(k^P))+S[8]+1770035416&4294967295,y=b+(x<<7&4294967295|x>>>25),x=P+(k^y&(b^k))+S[9]+2336552879&4294967295,P=y+(x<<12&4294967295|x>>>20),x=k+(b^P&(y^b))+S[10]+4294925233&4294967295,k=P+(x<<17&4294967295|x>>>15),x=b+(y^k&(P^y))+S[11]+2304563134&4294967295,b=k+(x<<22&4294967295|x>>>10),x=y+(P^b&(k^P))+S[12]+1804603682&4294967295,y=b+(x<<7&4294967295|x>>>25),x=P+(k^y&(b^k))+S[13]+4254626195&4294967295,P=y+(x<<12&4294967295|x>>>20),x=k+(b^P&(y^b))+S[14]+2792965006&4294967295,k=P+(x<<17&4294967295|x>>>15),x=b+(y^k&(P^y))+S[15]+1236535329&4294967295,b=k+(x<<22&4294967295|x>>>10),x=y+(k^P&(b^k))+S[1]+4129170786&4294967295,y=b+(x<<5&4294967295|x>>>27),x=P+(b^k&(y^b))+S[6]+3225465664&4294967295,P=y+(x<<9&4294967295|x>>>23),x=k+(y^b&(P^y))+S[11]+643717713&4294967295,k=P+(x<<14&4294967295|x>>>18),x=b+(P^y&(k^P))+S[0]+3921069994&4294967295,b=k+(x<<20&4294967295|x>>>12),x=y+(k^P&(b^k))+S[5]+3593408605&4294967295,y=b+(x<<5&4294967295|x>>>27),x=P+(b^k&(y^b))+S[10]+38016083&4294967295,P=y+(x<<9&4294967295|x>>>23),x=k+(y^b&(P^y))+S[15]+3634488961&4294967295,k=P+(x<<14&4294967295|x>>>18),x=b+(P^y&(k^P))+S[4]+3889429448&4294967295,b=k+(x<<20&4294967295|x>>>12),x=y+(k^P&(b^k))+S[9]+568446438&4294967295,y=b+(x<<5&4294967295|x>>>27),x=P+(b^k&(y^b))+S[14]+3275163606&4294967295,P=y+(x<<9&4294967295|x>>>23),x=k+(y^b&(P^y))+S[3]+4107603335&4294967295,k=P+(x<<14&4294967295|x>>>18),x=b+(P^y&(k^P))+S[8]+1163531501&4294967295,b=k+(x<<20&4294967295|x>>>12),x=y+(k^P&(b^k))+S[13]+2850285829&4294967295,y=b+(x<<5&4294967295|x>>>27),x=P+(b^k&(y^b))+S[2]+4243563512&4294967295,P=y+(x<<9&4294967295|x>>>23),x=k+(y^b&(P^y))+S[7]+1735328473&4294967295,k=P+(x<<14&4294967295|x>>>18),x=b+(P^y&(k^P))+S[12]+2368359562&4294967295,b=k+(x<<20&4294967295|x>>>12),x=y+(b^k^P)+S[5]+4294588738&4294967295,y=b+(x<<4&4294967295|x>>>28),x=P+(y^b^k)+S[8]+2272392833&4294967295,P=y+(x<<11&4294967295|x>>>21),x=k+(P^y^b)+S[11]+1839030562&4294967295,k=P+(x<<16&4294967295|x>>>16),x=b+(k^P^y)+S[14]+4259657740&4294967295,b=k+(x<<23&4294967295|x>>>9),x=y+(b^k^P)+S[1]+2763975236&4294967295,y=b+(x<<4&4294967295|x>>>28),x=P+(y^b^k)+S[4]+1272893353&4294967295,P=y+(x<<11&4294967295|x>>>21),x=k+(P^y^b)+S[7]+4139469664&4294967295,k=P+(x<<16&4294967295|x>>>16),x=b+(k^P^y)+S[10]+3200236656&4294967295,b=k+(x<<23&4294967295|x>>>9),x=y+(b^k^P)+S[13]+681279174&4294967295,y=b+(x<<4&4294967295|x>>>28),x=P+(y^b^k)+S[0]+3936430074&4294967295,P=y+(x<<11&4294967295|x>>>21),x=k+(P^y^b)+S[3]+3572445317&4294967295,k=P+(x<<16&4294967295|x>>>16),x=b+(k^P^y)+S[6]+76029189&4294967295,b=k+(x<<23&4294967295|x>>>9),x=y+(b^k^P)+S[9]+3654602809&4294967295,y=b+(x<<4&4294967295|x>>>28),x=P+(y^b^k)+S[12]+3873151461&4294967295,P=y+(x<<11&4294967295|x>>>21),x=k+(P^y^b)+S[15]+530742520&4294967295,k=P+(x<<16&4294967295|x>>>16),x=b+(k^P^y)+S[2]+3299628645&4294967295,b=k+(x<<23&4294967295|x>>>9),x=y+(k^(b|~P))+S[0]+4096336452&4294967295,y=b+(x<<6&4294967295|x>>>26),x=P+(b^(y|~k))+S[7]+1126891415&4294967295,P=y+(x<<10&4294967295|x>>>22),x=k+(y^(P|~b))+S[14]+2878612391&4294967295,k=P+(x<<15&4294967295|x>>>17),x=b+(P^(k|~y))+S[5]+4237533241&4294967295,b=k+(x<<21&4294967295|x>>>11),x=y+(k^(b|~P))+S[12]+1700485571&4294967295,y=b+(x<<6&4294967295|x>>>26),x=P+(b^(y|~k))+S[3]+2399980690&4294967295,P=y+(x<<10&4294967295|x>>>22),x=k+(y^(P|~b))+S[10]+4293915773&4294967295,k=P+(x<<15&4294967295|x>>>17),x=b+(P^(k|~y))+S[1]+2240044497&4294967295,b=k+(x<<21&4294967295|x>>>11),x=y+(k^(b|~P))+S[8]+1873313359&4294967295,y=b+(x<<6&4294967295|x>>>26),x=P+(b^(y|~k))+S[15]+4264355552&4294967295,P=y+(x<<10&4294967295|x>>>22),x=k+(y^(P|~b))+S[6]+2734768916&4294967295,k=P+(x<<15&4294967295|x>>>17),x=b+(P^(k|~y))+S[13]+1309151649&4294967295,b=k+(x<<21&4294967295|x>>>11),x=y+(k^(b|~P))+S[4]+4149444226&4294967295,y=b+(x<<6&4294967295|x>>>26),x=P+(b^(y|~k))+S[11]+3174756917&4294967295,P=y+(x<<10&4294967295|x>>>22),x=k+(y^(P|~b))+S[2]+718787259&4294967295,k=P+(x<<15&4294967295|x>>>17),x=b+(P^(k|~y))+S[9]+3951481745&4294967295,g.g[0]=g.g[0]+y&4294967295,g.g[1]=g.g[1]+(k+(x<<21&4294967295|x>>>11))&4294967295,g.g[2]=g.g[2]+k&4294967295,g.g[3]=g.g[3]+P&4294967295}r.prototype.u=function(g,y){y===void 0&&(y=g.length);for(var b=y-this.blockSize,S=this.B,k=this.h,P=0;P<y;){if(k==0)for(;P<=b;)i(this,g,P),P+=this.blockSize;if(typeof g=="string"){for(;P<y;)if(S[k++]=g.charCodeAt(P++),k==this.blockSize){i(this,S),k=0;break}}else for(;P<y;)if(S[k++]=g[P++],k==this.blockSize){i(this,S),k=0;break}}this.h=k,this.o+=y},r.prototype.v=function(){var g=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);g[0]=128;for(var y=1;y<g.length-8;++y)g[y]=0;var b=8*this.o;for(y=g.length-8;y<g.length;++y)g[y]=b&255,b/=256;for(this.u(g),g=Array(16),y=b=0;4>y;++y)for(var S=0;32>S;S+=8)g[b++]=this.g[y]>>>S&255;return g};function s(g,y){var b=a;return Object.prototype.hasOwnProperty.call(b,g)?b[g]:b[g]=y(g)}function o(g,y){this.h=y;for(var b=[],S=!0,k=g.length-1;0<=k;k--){var P=g[k]|0;S&&P==y||(b[k]=P,S=!1)}this.g=b}var a={};function l(g){return-128<=g&&128>g?s(g,function(y){return new o([y|0],0>y?-1:0)}):new o([g|0],0>g?-1:0)}function c(g){if(isNaN(g)||!isFinite(g))return f;if(0>g)return R(c(-g));for(var y=[],b=1,S=0;g>=b;S++)y[S]=g/b|0,b*=4294967296;return new o(y,0)}function h(g,y){if(g.length==0)throw Error("number format error: empty string");if(y=y||10,2>y||36<y)throw Error("radix out of range: "+y);if(g.charAt(0)=="-")return R(h(g.substring(1),y));if(0<=g.indexOf("-"))throw Error('number format error: interior "-" character');for(var b=c(Math.pow(y,8)),S=f,k=0;k<g.length;k+=8){var P=Math.min(8,g.length-k),x=parseInt(g.substring(k,k+P),y);8>P?(P=c(Math.pow(y,P)),S=S.j(P).add(c(x))):(S=S.j(b),S=S.add(c(x)))}return S}var f=l(0),p=l(1),_=l(16777216);t=o.prototype,t.m=function(){if(I(this))return-R(this).m();for(var g=0,y=1,b=0;b<this.g.length;b++){var S=this.i(b);g+=(0<=S?S:4294967296+S)*y,y*=4294967296}return g},t.toString=function(g){if(g=g||10,2>g||36<g)throw Error("radix out of range: "+g);if(E(this))return"0";if(I(this))return"-"+R(this).toString(g);for(var y=c(Math.pow(g,6)),b=this,S="";;){var k=D(b,y).g;b=T(b,k.j(y));var P=((0<b.g.length?b.g[0]:b.h)>>>0).toString(g);if(b=k,E(b))return P+S;for(;6>P.length;)P="0"+P;S=P+S}},t.i=function(g){return 0>g?0:g<this.g.length?this.g[g]:this.h};function E(g){if(g.h!=0)return!1;for(var y=0;y<g.g.length;y++)if(g.g[y]!=0)return!1;return!0}function I(g){return g.h==-1}t.l=function(g){return g=T(this,g),I(g)?-1:E(g)?0:1};function R(g){for(var y=g.g.length,b=[],S=0;S<y;S++)b[S]=~g.g[S];return new o(b,~g.h).add(p)}t.abs=function(){return I(this)?R(this):this},t.add=function(g){for(var y=Math.max(this.g.length,g.g.length),b=[],S=0,k=0;k<=y;k++){var P=S+(this.i(k)&65535)+(g.i(k)&65535),x=(P>>>16)+(this.i(k)>>>16)+(g.i(k)>>>16);S=x>>>16,P&=65535,x&=65535,b[k]=x<<16|P}return new o(b,b[b.length-1]&-2147483648?-1:0)};function T(g,y){return g.add(R(y))}t.j=function(g){if(E(this)||E(g))return f;if(I(this))return I(g)?R(this).j(R(g)):R(R(this).j(g));if(I(g))return R(this.j(R(g)));if(0>this.l(_)&&0>g.l(_))return c(this.m()*g.m());for(var y=this.g.length+g.g.length,b=[],S=0;S<2*y;S++)b[S]=0;for(S=0;S<this.g.length;S++)for(var k=0;k<g.g.length;k++){var P=this.i(S)>>>16,x=this.i(S)&65535,Ie=g.i(k)>>>16,it=g.i(k)&65535;b[2*S+2*k]+=x*it,w(b,2*S+2*k),b[2*S+2*k+1]+=P*it,w(b,2*S+2*k+1),b[2*S+2*k+1]+=x*Ie,w(b,2*S+2*k+1),b[2*S+2*k+2]+=P*Ie,w(b,2*S+2*k+2)}for(S=0;S<y;S++)b[S]=b[2*S+1]<<16|b[2*S];for(S=y;S<2*y;S++)b[S]=0;return new o(b,0)};function w(g,y){for(;(g[y]&65535)!=g[y];)g[y+1]+=g[y]>>>16,g[y]&=65535,y++}function C(g,y){this.g=g,this.h=y}function D(g,y){if(E(y))throw Error("division by zero");if(E(g))return new C(f,f);if(I(g))return y=D(R(g),y),new C(R(y.g),R(y.h));if(I(y))return y=D(g,R(y)),new C(R(y.g),y.h);if(30<g.g.length){if(I(g)||I(y))throw Error("slowDivide_ only works with positive integers.");for(var b=p,S=y;0>=S.l(g);)b=F(b),S=F(S);var k=z(b,1),P=z(S,1);for(S=z(S,2),b=z(b,2);!E(S);){var x=P.add(S);0>=x.l(g)&&(k=k.add(b),P=x),S=z(S,1),b=z(b,1)}return y=T(g,k.j(y)),new C(k,y)}for(k=f;0<=g.l(y);){for(b=Math.max(1,Math.floor(g.m()/y.m())),S=Math.ceil(Math.log(b)/Math.LN2),S=48>=S?1:Math.pow(2,S-48),P=c(b),x=P.j(y);I(x)||0<x.l(g);)b-=S,P=c(b),x=P.j(y);E(P)&&(P=p),k=k.add(P),g=T(g,x)}return new C(k,g)}t.A=function(g){return D(this,g).h},t.and=function(g){for(var y=Math.max(this.g.length,g.g.length),b=[],S=0;S<y;S++)b[S]=this.i(S)&g.i(S);return new o(b,this.h&g.h)},t.or=function(g){for(var y=Math.max(this.g.length,g.g.length),b=[],S=0;S<y;S++)b[S]=this.i(S)|g.i(S);return new o(b,this.h|g.h)},t.xor=function(g){for(var y=Math.max(this.g.length,g.g.length),b=[],S=0;S<y;S++)b[S]=this.i(S)^g.i(S);return new o(b,this.h^g.h)};function F(g){for(var y=g.g.length+1,b=[],S=0;S<y;S++)b[S]=g.i(S)<<1|g.i(S-1)>>>31;return new o(b,g.h)}function z(g,y){var b=y>>5;y%=32;for(var S=g.g.length-b,k=[],P=0;P<S;P++)k[P]=0<y?g.i(P+b)>>>y|g.i(P+b+1)<<32-y:g.i(P+b);return new o(k,g.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,UT=r,o.prototype.add=o.prototype.add,o.prototype.multiply=o.prototype.j,o.prototype.modulo=o.prototype.A,o.prototype.compare=o.prototype.l,o.prototype.toNumber=o.prototype.m,o.prototype.toString=o.prototype.toString,o.prototype.getBits=o.prototype.i,o.fromNumber=c,o.fromString=h,Ss=o}).apply(typeof W0<"u"?W0:typeof self<"u"?self:typeof window<"u"?window:{});var gc=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var $T,FT,pl,jT,zc,cm,zT,BT,HT;(function(){var t,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(u,d,m){return u==Array.prototype||u==Object.prototype||(u[d]=m.value),u};function n(u){u=[typeof globalThis=="object"&&globalThis,u,typeof window=="object"&&window,typeof self=="object"&&self,typeof gc=="object"&&gc];for(var d=0;d<u.length;++d){var m=u[d];if(m&&m.Math==Math)return m}throw Error("Cannot find global object")}var r=n(this);function i(u,d){if(d)e:{var m=r;u=u.split(".");for(var v=0;v<u.length-1;v++){var O=u[v];if(!(O in m))break e;m=m[O]}u=u[u.length-1],v=m[u],d=d(v),d!=v&&d!=null&&e(m,u,{configurable:!0,writable:!0,value:d})}}function s(u,d){u instanceof String&&(u+="");var m=0,v=!1,O={next:function(){if(!v&&m<u.length){var U=m++;return{value:d(U,u[U]),done:!1}}return v=!0,{done:!0,value:void 0}}};return O[Symbol.iterator]=function(){return O},O}i("Array.prototype.values",function(u){return u||function(){return s(this,function(d,m){return m})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var o=o||{},a=this||self;function l(u){var d=typeof u;return d=d!="object"?d:u?Array.isArray(u)?"array":d:"null",d=="array"||d=="object"&&typeof u.length=="number"}function c(u){var d=typeof u;return d=="object"&&u!=null||d=="function"}function h(u,d,m){return u.call.apply(u.bind,arguments)}function f(u,d,m){if(!u)throw Error();if(2<arguments.length){var v=Array.prototype.slice.call(arguments,2);return function(){var O=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(O,v),u.apply(d,O)}}return function(){return u.apply(d,arguments)}}function p(u,d,m){return p=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?h:f,p.apply(null,arguments)}function _(u,d){var m=Array.prototype.slice.call(arguments,1);return function(){var v=m.slice();return v.push.apply(v,arguments),u.apply(this,v)}}function E(u,d){function m(){}m.prototype=d.prototype,u.aa=d.prototype,u.prototype=new m,u.prototype.constructor=u,u.Qb=function(v,O,U){for(var G=Array(arguments.length-2),Re=2;Re<arguments.length;Re++)G[Re-2]=arguments[Re];return d.prototype[O].apply(v,G)}}function I(u){const d=u.length;if(0<d){const m=Array(d);for(let v=0;v<d;v++)m[v]=u[v];return m}return[]}function R(u,d){for(let m=1;m<arguments.length;m++){const v=arguments[m];if(l(v)){const O=u.length||0,U=v.length||0;u.length=O+U;for(let G=0;G<U;G++)u[O+G]=v[G]}else u.push(v)}}class T{constructor(d,m){this.i=d,this.j=m,this.h=0,this.g=null}get(){let d;return 0<this.h?(this.h--,d=this.g,this.g=d.next,d.next=null):d=this.i(),d}}function w(u){return/^[\s\xa0]*$/.test(u)}function C(){var u=a.navigator;return u&&(u=u.userAgent)?u:""}function D(u){return D[" "](u),u}D[" "]=function(){};var F=C().indexOf("Gecko")!=-1&&!(C().toLowerCase().indexOf("webkit")!=-1&&C().indexOf("Edge")==-1)&&!(C().indexOf("Trident")!=-1||C().indexOf("MSIE")!=-1)&&C().indexOf("Edge")==-1;function z(u,d,m){for(const v in u)d.call(m,u[v],v,u)}function g(u,d){for(const m in u)d.call(void 0,u[m],m,u)}function y(u){const d={};for(const m in u)d[m]=u[m];return d}const b="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function S(u,d){let m,v;for(let O=1;O<arguments.length;O++){v=arguments[O];for(m in v)u[m]=v[m];for(let U=0;U<b.length;U++)m=b[U],Object.prototype.hasOwnProperty.call(v,m)&&(u[m]=v[m])}}function k(u){var d=1;u=u.split(":");const m=[];for(;0<d&&u.length;)m.push(u.shift()),d--;return u.length&&m.push(u.join(":")),m}function P(u){a.setTimeout(()=>{throw u},0)}function x(){var u=ee;let d=null;return u.g&&(d=u.g,u.g=u.g.next,u.g||(u.h=null),d.next=null),d}class Ie{constructor(){this.h=this.g=null}add(d,m){const v=it.get();v.set(d,m),this.h?this.h.next=v:this.g=v,this.h=v}}var it=new T(()=>new Wt,u=>u.reset());class Wt{constructor(){this.next=this.g=this.h=null}set(d,m){this.h=d,this.g=m,this.next=null}reset(){this.next=this.g=this.h=null}}let wt,H=!1,ee=new Ie,re=()=>{const u=a.Promise.resolve(void 0);wt=()=>{u.then(_e)}};var _e=()=>{for(var u;u=x();){try{u.h.call(u.g)}catch(m){P(m)}var d=it;d.j(u),100>d.h&&(d.h++,u.next=d.g,d.g=u)}H=!1};function he(){this.s=this.s,this.C=this.C}he.prototype.s=!1,he.prototype.ma=function(){this.s||(this.s=!0,this.N())},he.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function Pe(u,d){this.type=u,this.g=this.target=d,this.defaultPrevented=!1}Pe.prototype.h=function(){this.defaultPrevented=!0};var qt=function(){if(!a.addEventListener||!Object.defineProperty)return!1;var u=!1,d=Object.defineProperty({},"passive",{get:function(){u=!0}});try{const m=()=>{};a.addEventListener("test",m,d),a.removeEventListener("test",m,d)}catch{}return u}();function ht(u,d){if(Pe.call(this,u?u.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,u){var m=this.type=u.type,v=u.changedTouches&&u.changedTouches.length?u.changedTouches[0]:null;if(this.target=u.target||u.srcElement,this.g=d,d=u.relatedTarget){if(F){e:{try{D(d.nodeName);var O=!0;break e}catch{}O=!1}O||(d=null)}}else m=="mouseover"?d=u.fromElement:m=="mouseout"&&(d=u.toElement);this.relatedTarget=d,v?(this.clientX=v.clientX!==void 0?v.clientX:v.pageX,this.clientY=v.clientY!==void 0?v.clientY:v.pageY,this.screenX=v.screenX||0,this.screenY=v.screenY||0):(this.clientX=u.clientX!==void 0?u.clientX:u.pageX,this.clientY=u.clientY!==void 0?u.clientY:u.pageY,this.screenX=u.screenX||0,this.screenY=u.screenY||0),this.button=u.button,this.key=u.key||"",this.ctrlKey=u.ctrlKey,this.altKey=u.altKey,this.shiftKey=u.shiftKey,this.metaKey=u.metaKey,this.pointerId=u.pointerId||0,this.pointerType=typeof u.pointerType=="string"?u.pointerType:Et[u.pointerType]||"",this.state=u.state,this.i=u,u.defaultPrevented&&ht.aa.h.call(this)}}E(ht,Pe);var Et={2:"touch",3:"pen",4:"mouse"};ht.prototype.h=function(){ht.aa.h.call(this);var u=this.i;u.preventDefault?u.preventDefault():u.returnValue=!1};var bt="closure_listenable_"+(1e6*Math.random()|0),ka=0;function Xd(u,d,m,v,O){this.listener=u,this.proxy=null,this.src=d,this.type=m,this.capture=!!v,this.ha=O,this.key=++ka,this.da=this.fa=!1}function Js(u){u.da=!0,u.listener=null,u.proxy=null,u.src=null,u.ha=null}function Zs(u){this.src=u,this.g={},this.h=0}Zs.prototype.add=function(u,d,m,v,O){var U=u.toString();u=this.g[U],u||(u=this.g[U]=[],this.h++);var G=mr(u,d,v,O);return-1<G?(d=u[G],m||(d.fa=!1)):(d=new Xd(d,this.src,U,!!v,O),d.fa=m,u.push(d)),d};function Tt(u,d){var m=d.type;if(m in u.g){var v=u.g[m],O=Array.prototype.indexOf.call(v,d,void 0),U;(U=0<=O)&&Array.prototype.splice.call(v,O,1),U&&(Js(d),u.g[m].length==0&&(delete u.g[m],u.h--))}}function mr(u,d,m,v){for(var O=0;O<u.length;++O){var U=u[O];if(!U.da&&U.listener==d&&U.capture==!!m&&U.ha==v)return O}return-1}var eo="closure_lm_"+(1e6*Math.random()|0),Pa={};function Jn(u,d,m,v,O){if(Array.isArray(d)){for(var U=0;U<d.length;U++)Jn(u,d[U],m,v,O);return null}return m=no(m),u&&u[bt]?u.K(d,m,c(v)?!!v.capture:!!v,O):Yd(u,d,m,!1,v,O)}function Yd(u,d,m,v,O,U){if(!d)throw Error("Invalid event type");var G=c(O)?!!O.capture:!!O,Re=gr(u);if(Re||(u[eo]=Re=new Zs(u)),m=Re.add(d,m,v,G,U),m.proxy)return m;if(v=Jd(),m.proxy=v,v.src=u,v.listener=m,u.addEventListener)qt||(O=G),O===void 0&&(O=!1),u.addEventListener(d.toString(),v,O);else if(u.attachEvent)u.attachEvent(Vu(d.toString()),v);else if(u.addListener&&u.removeListener)u.addListener(v);else throw Error("addEventListener and attachEvent are unavailable.");return m}function Jd(){function u(m){return d.call(u.src,u.listener,m)}const d=ss;return u}function Mu(u,d,m,v,O){if(Array.isArray(d))for(var U=0;U<d.length;U++)Mu(u,d[U],m,v,O);else v=c(v)?!!v.capture:!!v,m=no(m),u&&u[bt]?(u=u.i,d=String(d).toString(),d in u.g&&(U=u.g[d],m=mr(U,m,v,O),-1<m&&(Js(U[m]),Array.prototype.splice.call(U,m,1),U.length==0&&(delete u.g[d],u.h--)))):u&&(u=gr(u))&&(d=u.g[d.toString()],u=-1,d&&(u=mr(d,m,v,O)),(m=-1<u?d[u]:null)&&Ra(m))}function Ra(u){if(typeof u!="number"&&u&&!u.da){var d=u.src;if(d&&d[bt])Tt(d.i,u);else{var m=u.type,v=u.proxy;d.removeEventListener?d.removeEventListener(m,v,u.capture):d.detachEvent?d.detachEvent(Vu(m),v):d.addListener&&d.removeListener&&d.removeListener(v),(m=gr(d))?(Tt(m,u),m.h==0&&(m.src=null,d[eo]=null)):Js(u)}}}function Vu(u){return u in Pa?Pa[u]:Pa[u]="on"+u}function ss(u,d){if(u.da)u=!0;else{d=new ht(d,this);var m=u.listener,v=u.ha||u.src;u.fa&&Ra(u),u=m.call(v,d)}return u}function gr(u){return u=u[eo],u instanceof Zs?u:null}var to="__closure_events_fn_"+(1e9*Math.random()>>>0);function no(u){return typeof u=="function"?u:(u[to]||(u[to]=function(d){return u.handleEvent(d)}),u[to])}function Me(){he.call(this),this.i=new Zs(this),this.M=this,this.F=null}E(Me,he),Me.prototype[bt]=!0,Me.prototype.removeEventListener=function(u,d,m,v){Mu(this,u,d,m,v)};function et(u,d){var m,v=u.F;if(v)for(m=[];v;v=v.F)m.push(v);if(u=u.M,v=d.type||d,typeof d=="string")d=new Pe(d,u);else if(d instanceof Pe)d.target=d.target||u;else{var O=d;d=new Pe(v,u),S(d,O)}if(O=!0,m)for(var U=m.length-1;0<=U;U--){var G=d.g=m[U];O=os(G,v,!0,d)&&O}if(G=d.g=u,O=os(G,v,!0,d)&&O,O=os(G,v,!1,d)&&O,m)for(U=0;U<m.length;U++)G=d.g=m[U],O=os(G,v,!1,d)&&O}Me.prototype.N=function(){if(Me.aa.N.call(this),this.i){var u=this.i,d;for(d in u.g){for(var m=u.g[d],v=0;v<m.length;v++)Js(m[v]);delete u.g[d],u.h--}}this.F=null},Me.prototype.K=function(u,d,m,v){return this.i.add(String(u),d,!1,m,v)},Me.prototype.L=function(u,d,m,v){return this.i.add(String(u),d,!0,m,v)};function os(u,d,m,v){if(d=u.i.g[String(d)],!d)return!0;d=d.concat();for(var O=!0,U=0;U<d.length;++U){var G=d[U];if(G&&!G.da&&G.capture==m){var Re=G.listener,St=G.ha||G.src;G.fa&&Tt(u.i,G),O=Re.call(St,v)!==!1&&O}}return O&&!v.defaultPrevented}function as(u,d,m){if(typeof u=="function")m&&(u=p(u,m));else if(u&&typeof u.handleEvent=="function")u=p(u.handleEvent,u);else throw Error("Invalid listener argument");return 2147483647<Number(d)?-1:a.setTimeout(u,d||0)}function Uu(u){u.g=as(()=>{u.g=null,u.i&&(u.i=!1,Uu(u))},u.l);const d=u.h;u.h=null,u.m.apply(null,d)}class Zn extends he{constructor(d,m){super(),this.m=d,this.l=m,this.h=null,this.i=!1,this.g=null}j(d){this.h=arguments,this.g?this.i=!0:Uu(this)}N(){super.N(),this.g&&(a.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Jr(u){he.call(this),this.h=u,this.g={}}E(Jr,he);var Na=[];function Oa(u){z(u.g,function(d,m){this.g.hasOwnProperty(m)&&Ra(d)},u),u.g={}}Jr.prototype.N=function(){Jr.aa.N.call(this),Oa(this)},Jr.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var La=a.JSON.stringify,$u=a.JSON.parse,ro=class{stringify(u){return a.JSON.stringify(u,void 0)}parse(u){return a.JSON.parse(u,void 0)}};function io(){}io.prototype.h=null;function so(u){return u.h||(u.h=u.i())}function Fu(){}var Zr={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function Da(){Pe.call(this,"d")}E(Da,Pe);function oo(){Pe.call(this,"c")}E(oo,Pe);var yr={},N=null;function M(){return N=N||new Me}yr.La="serverreachability";function $(u){Pe.call(this,yr.La,u)}E($,Pe);function q(u){const d=M();et(d,new $(d))}yr.STAT_EVENT="statevent";function Q(u,d){Pe.call(this,yr.STAT_EVENT,u),this.stat=d}E(Q,Pe);function Z(u){const d=M();et(d,new Q(d,u))}yr.Ma="timingevent";function te(u,d){Pe.call(this,yr.Ma,u),this.size=d}E(te,Pe);function K(u,d){if(typeof u!="function")throw Error("Fn must not be null and must be a function");return a.setTimeout(function(){u()},d)}function oe(){this.g=!0}oe.prototype.xa=function(){this.g=!1};function ae(u,d,m,v,O,U){u.info(function(){if(u.g)if(U)for(var G="",Re=U.split("&"),St=0;St<Re.length;St++){var Se=Re[St].split("=");if(1<Se.length){var Dt=Se[0];Se=Se[1];var Mt=Dt.split("_");G=2<=Mt.length&&Mt[1]=="type"?G+(Dt+"="+Se+"&"):G+(Dt+"=redacted&")}}else G=null;else G=U;return"XMLHTTP REQ ("+v+") [attempt "+O+"]: "+d+`
`+m+`
`+G})}function dt(u,d,m,v,O,U,G){u.info(function(){return"XMLHTTP RESP ("+v+") [ attempt "+O+"]: "+d+`
`+m+`
`+U+" "+G})}function ze(u,d,m,v){u.info(function(){return"XMLHTTP TEXT ("+d+"): "+Oe(u,m)+(v?" "+v:"")})}function ie(u,d){u.info(function(){return"TIMEOUT: "+d})}oe.prototype.info=function(){};function Oe(u,d){if(!u.g)return d;if(!d)return null;try{var m=JSON.parse(d);if(m){for(u=0;u<m.length;u++)if(Array.isArray(m[u])){var v=m[u];if(!(2>v.length)){var O=v[1];if(Array.isArray(O)&&!(1>O.length)){var U=O[0];if(U!="noop"&&U!="stop"&&U!="close")for(var G=1;G<O.length;G++)O[G]=""}}}}return La(m)}catch{return d}}var We={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},ei={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},bn;function Vn(){}E(Vn,io),Vn.prototype.g=function(){return new XMLHttpRequest},Vn.prototype.i=function(){return{}},bn=new Vn;function Gt(u,d,m,v){this.j=u,this.i=d,this.l=m,this.R=v||1,this.U=new Jr(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new vr}function vr(){this.i=null,this.g="",this.h=!1}var hn={},ti={};function ni(u,d,m){u.L=1,u.v=Bu(Er(d)),u.m=m,u.P=!0,ls(u,null)}function ls(u,d){u.F=Date.now(),It(u),u.A=Er(u.v);var m=u.A,v=u.R;Array.isArray(v)||(v=[String(v)]),mv(m.i,"t",v),u.C=0,m=u.j.J,u.h=new vr,u.g=Ov(u.j,m?d:null,!u.m),0<u.O&&(u.M=new Zn(p(u.Y,u,u.g),u.O)),d=u.U,m=u.g,v=u.ca;var O="readystatechange";Array.isArray(O)||(O&&(Na[0]=O.toString()),O=Na);for(var U=0;U<O.length;U++){var G=Jn(m,O[U],v||d.handleEvent,!1,d.h||d);if(!G)break;d.g[G.key]=G}d=u.H?y(u.H):{},u.m?(u.u||(u.u="POST"),d["Content-Type"]="application/x-www-form-urlencoded",u.g.ea(u.A,u.u,u.m,d)):(u.u="GET",u.g.ea(u.A,u.u,null,d)),q(),ae(u.i,u.u,u.A,u.l,u.R,u.m)}Gt.prototype.ca=function(u){u=u.target;const d=this.M;d&&br(u)==3?d.j():this.Y(u)},Gt.prototype.Y=function(u){try{if(u==this.g)e:{const Mt=br(this.g);var d=this.g.Ba();const uo=this.g.Z();if(!(3>Mt)&&(Mt!=3||this.g&&(this.h.h||this.g.oa()||bv(this.g)))){this.J||Mt!=4||d==7||(d==8||0>=uo?q(3):q(2)),_r(this);var m=this.g.Z();this.X=m;t:if(ye(this)){var v=bv(this.g);u="";var O=v.length,U=br(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){wr(this),ri(this);var G="";break t}this.h.i=new a.TextDecoder}for(d=0;d<O;d++)this.h.h=!0,u+=this.h.i.decode(v[d],{stream:!(U&&d==O-1)});v.length=0,this.h.g+=u,this.C=0,G=this.h.g}else G=this.g.oa();if(this.o=m==200,dt(this.i,this.u,this.A,this.l,this.R,Mt,m),this.o){if(this.T&&!this.K){t:{if(this.g){var Re,St=this.g;if((Re=St.g?St.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!w(Re)){var Se=Re;break t}}Se=null}if(m=Se)ze(this.i,this.l,m,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Zd(this,m);else{this.o=!1,this.s=3,Z(12),wr(this),ri(this);break e}}if(this.P){m=!0;let Un;for(;!this.J&&this.C<G.length;)if(Un=Ct(this,G),Un==ti){Mt==4&&(this.s=4,Z(14),m=!1),ze(this.i,this.l,null,"[Incomplete Response]");break}else if(Un==hn){this.s=4,Z(15),ze(this.i,this.l,G,"[Invalid Chunk]"),m=!1;break}else ze(this.i,this.l,Un,null),Zd(this,Un);if(ye(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Mt!=4||G.length!=0||this.h.h||(this.s=1,Z(16),m=!1),this.o=this.o&&m,!m)ze(this.i,this.l,G,"[Invalid Chunked Response]"),wr(this),ri(this);else if(0<G.length&&!this.W){this.W=!0;var Dt=this.j;Dt.g==this&&Dt.ba&&!Dt.M&&(Dt.j.info("Great, no buffering proxy detected. Bytes received: "+G.length),of(Dt),Dt.M=!0,Z(11))}}else ze(this.i,this.l,G,null),Zd(this,G);Mt==4&&wr(this),this.o&&!this.J&&(Mt==4?kv(this.j,this):(this.o=!1,It(this)))}else eS(this.g),m==400&&0<G.indexOf("Unknown SID")?(this.s=3,Z(12)):(this.s=0,Z(13)),wr(this),ri(this)}}}catch{}finally{}};function ye(u){return u.g?u.u=="GET"&&u.L!=2&&u.j.Ca:!1}function Ct(u,d){var m=u.C,v=d.indexOf(`
`,m);return v==-1?ti:(m=Number(d.substring(m,v)),isNaN(m)?hn:(v+=1,v+m>d.length?ti:(d=d.slice(v,v+m),u.C=v+m,d)))}Gt.prototype.cancel=function(){this.J=!0,wr(this)};function It(u){u.S=Date.now()+u.I,st(u,u.I)}function st(u,d){if(u.B!=null)throw Error("WatchDog timer not null");u.B=K(p(u.ba,u),d)}function _r(u){u.B&&(a.clearTimeout(u.B),u.B=null)}Gt.prototype.ba=function(){this.B=null;const u=Date.now();0<=u-this.S?(ie(this.i,this.A),this.L!=2&&(q(),Z(17)),wr(this),this.s=2,ri(this)):st(this,this.S-u)};function ri(u){u.j.G==0||u.J||kv(u.j,u)}function wr(u){_r(u);var d=u.M;d&&typeof d.ma=="function"&&d.ma(),u.M=null,Oa(u.U),u.g&&(d=u.g,u.g=null,d.abort(),d.ma())}function Zd(u,d){try{var m=u.j;if(m.G!=0&&(m.g==u||ef(m.h,u))){if(!u.K&&ef(m.h,u)&&m.G==3){try{var v=m.Da.g.parse(d)}catch{v=null}if(Array.isArray(v)&&v.length==3){var O=v;if(O[0]==0){e:if(!m.u){if(m.g)if(m.g.F+3e3<u.F)Ku(m),qu(m);else break e;sf(m),Z(18)}}else m.za=O[1],0<m.za-m.T&&37500>O[2]&&m.F&&m.v==0&&!m.C&&(m.C=K(p(m.Za,m),6e3));if(1>=ov(m.h)&&m.ca){try{m.ca()}catch{}m.ca=void 0}}else cs(m,11)}else if((u.K||m.g==u)&&Ku(m),!w(d))for(O=m.Da.g.parse(d),d=0;d<O.length;d++){let Se=O[d];if(m.T=Se[0],Se=Se[1],m.G==2)if(Se[0]=="c"){m.K=Se[1],m.ia=Se[2];const Dt=Se[3];Dt!=null&&(m.la=Dt,m.j.info("VER="+m.la));const Mt=Se[4];Mt!=null&&(m.Aa=Mt,m.j.info("SVER="+m.Aa));const uo=Se[5];uo!=null&&typeof uo=="number"&&0<uo&&(v=1.5*uo,m.L=v,m.j.info("backChannelRequestTimeoutMs_="+v)),v=m;const Un=u.g;if(Un){const Xu=Un.g?Un.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Xu){var U=v.h;U.g||Xu.indexOf("spdy")==-1&&Xu.indexOf("quic")==-1&&Xu.indexOf("h2")==-1||(U.j=U.l,U.g=new Set,U.h&&(tf(U,U.h),U.h=null))}if(v.D){const af=Un.g?Un.g.getResponseHeader("X-HTTP-Session-Id"):null;af&&(v.ya=af,Ve(v.I,v.D,af))}}m.G=3,m.l&&m.l.ua(),m.ba&&(m.R=Date.now()-u.F,m.j.info("Handshake RTT: "+m.R+"ms")),v=m;var G=u;if(v.qa=Nv(v,v.J?v.ia:null,v.W),G.K){av(v.h,G);var Re=G,St=v.L;St&&(Re.I=St),Re.B&&(_r(Re),It(Re)),v.g=G}else Av(v);0<m.i.length&&Gu(m)}else Se[0]!="stop"&&Se[0]!="close"||cs(m,7);else m.G==3&&(Se[0]=="stop"||Se[0]=="close"?Se[0]=="stop"?cs(m,7):rf(m):Se[0]!="noop"&&m.l&&m.l.ta(Se),m.v=0)}}q(4)}catch{}}var U2=class{constructor(u,d){this.g=u,this.map=d}};function iv(u){this.l=u||10,a.PerformanceNavigationTiming?(u=a.performance.getEntriesByType("navigation"),u=0<u.length&&(u[0].nextHopProtocol=="hq"||u[0].nextHopProtocol=="h2")):u=!!(a.chrome&&a.chrome.loadTimes&&a.chrome.loadTimes()&&a.chrome.loadTimes().wasFetchedViaSpdy),this.j=u?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function sv(u){return u.h?!0:u.g?u.g.size>=u.j:!1}function ov(u){return u.h?1:u.g?u.g.size:0}function ef(u,d){return u.h?u.h==d:u.g?u.g.has(d):!1}function tf(u,d){u.g?u.g.add(d):u.h=d}function av(u,d){u.h&&u.h==d?u.h=null:u.g&&u.g.has(d)&&u.g.delete(d)}iv.prototype.cancel=function(){if(this.i=lv(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const u of this.g.values())u.cancel();this.g.clear()}};function lv(u){if(u.h!=null)return u.i.concat(u.h.D);if(u.g!=null&&u.g.size!==0){let d=u.i;for(const m of u.g.values())d=d.concat(m.D);return d}return I(u.i)}function $2(u){if(u.V&&typeof u.V=="function")return u.V();if(typeof Map<"u"&&u instanceof Map||typeof Set<"u"&&u instanceof Set)return Array.from(u.values());if(typeof u=="string")return u.split("");if(l(u)){for(var d=[],m=u.length,v=0;v<m;v++)d.push(u[v]);return d}d=[],m=0;for(v in u)d[m++]=u[v];return d}function F2(u){if(u.na&&typeof u.na=="function")return u.na();if(!u.V||typeof u.V!="function"){if(typeof Map<"u"&&u instanceof Map)return Array.from(u.keys());if(!(typeof Set<"u"&&u instanceof Set)){if(l(u)||typeof u=="string"){var d=[];u=u.length;for(var m=0;m<u;m++)d.push(m);return d}d=[],m=0;for(const v in u)d[m++]=v;return d}}}function uv(u,d){if(u.forEach&&typeof u.forEach=="function")u.forEach(d,void 0);else if(l(u)||typeof u=="string")Array.prototype.forEach.call(u,d,void 0);else for(var m=F2(u),v=$2(u),O=v.length,U=0;U<O;U++)d.call(void 0,v[U],m&&m[U],u)}var cv=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function j2(u,d){if(u){u=u.split("&");for(var m=0;m<u.length;m++){var v=u[m].indexOf("="),O=null;if(0<=v){var U=u[m].substring(0,v);O=u[m].substring(v+1)}else U=u[m];d(U,O?decodeURIComponent(O.replace(/\+/g," ")):"")}}}function us(u){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,u instanceof us){this.h=u.h,ju(this,u.j),this.o=u.o,this.g=u.g,zu(this,u.s),this.l=u.l;var d=u.i,m=new Ua;m.i=d.i,d.g&&(m.g=new Map(d.g),m.h=d.h),hv(this,m),this.m=u.m}else u&&(d=String(u).match(cv))?(this.h=!1,ju(this,d[1]||"",!0),this.o=Ma(d[2]||""),this.g=Ma(d[3]||"",!0),zu(this,d[4]),this.l=Ma(d[5]||"",!0),hv(this,d[6]||"",!0),this.m=Ma(d[7]||"")):(this.h=!1,this.i=new Ua(null,this.h))}us.prototype.toString=function(){var u=[],d=this.j;d&&u.push(Va(d,dv,!0),":");var m=this.g;return(m||d=="file")&&(u.push("//"),(d=this.o)&&u.push(Va(d,dv,!0),"@"),u.push(encodeURIComponent(String(m)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),m=this.s,m!=null&&u.push(":",String(m))),(m=this.l)&&(this.g&&m.charAt(0)!="/"&&u.push("/"),u.push(Va(m,m.charAt(0)=="/"?H2:B2,!0))),(m=this.i.toString())&&u.push("?",m),(m=this.m)&&u.push("#",Va(m,q2)),u.join("")};function Er(u){return new us(u)}function ju(u,d,m){u.j=m?Ma(d,!0):d,u.j&&(u.j=u.j.replace(/:$/,""))}function zu(u,d){if(d){if(d=Number(d),isNaN(d)||0>d)throw Error("Bad port number "+d);u.s=d}else u.s=null}function hv(u,d,m){d instanceof Ua?(u.i=d,G2(u.i,u.h)):(m||(d=Va(d,W2)),u.i=new Ua(d,u.h))}function Ve(u,d,m){u.i.set(d,m)}function Bu(u){return Ve(u,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),u}function Ma(u,d){return u?d?decodeURI(u.replace(/%25/g,"%2525")):decodeURIComponent(u):""}function Va(u,d,m){return typeof u=="string"?(u=encodeURI(u).replace(d,z2),m&&(u=u.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),u):null}function z2(u){return u=u.charCodeAt(0),"%"+(u>>4&15).toString(16)+(u&15).toString(16)}var dv=/[#\/\?@]/g,B2=/[#\?:]/g,H2=/[#\?]/g,W2=/[#\?@]/g,q2=/#/g;function Ua(u,d){this.h=this.g=null,this.i=u||null,this.j=!!d}function ii(u){u.g||(u.g=new Map,u.h=0,u.i&&j2(u.i,function(d,m){u.add(decodeURIComponent(d.replace(/\+/g," ")),m)}))}t=Ua.prototype,t.add=function(u,d){ii(this),this.i=null,u=ao(this,u);var m=this.g.get(u);return m||this.g.set(u,m=[]),m.push(d),this.h+=1,this};function fv(u,d){ii(u),d=ao(u,d),u.g.has(d)&&(u.i=null,u.h-=u.g.get(d).length,u.g.delete(d))}function pv(u,d){return ii(u),d=ao(u,d),u.g.has(d)}t.forEach=function(u,d){ii(this),this.g.forEach(function(m,v){m.forEach(function(O){u.call(d,O,v,this)},this)},this)},t.na=function(){ii(this);const u=Array.from(this.g.values()),d=Array.from(this.g.keys()),m=[];for(let v=0;v<d.length;v++){const O=u[v];for(let U=0;U<O.length;U++)m.push(d[v])}return m},t.V=function(u){ii(this);let d=[];if(typeof u=="string")pv(this,u)&&(d=d.concat(this.g.get(ao(this,u))));else{u=Array.from(this.g.values());for(let m=0;m<u.length;m++)d=d.concat(u[m])}return d},t.set=function(u,d){return ii(this),this.i=null,u=ao(this,u),pv(this,u)&&(this.h-=this.g.get(u).length),this.g.set(u,[d]),this.h+=1,this},t.get=function(u,d){return u?(u=this.V(u),0<u.length?String(u[0]):d):d};function mv(u,d,m){fv(u,d),0<m.length&&(u.i=null,u.g.set(ao(u,d),I(m)),u.h+=m.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const u=[],d=Array.from(this.g.keys());for(var m=0;m<d.length;m++){var v=d[m];const U=encodeURIComponent(String(v)),G=this.V(v);for(v=0;v<G.length;v++){var O=U;G[v]!==""&&(O+="="+encodeURIComponent(String(G[v]))),u.push(O)}}return this.i=u.join("&")};function ao(u,d){return d=String(d),u.j&&(d=d.toLowerCase()),d}function G2(u,d){d&&!u.j&&(ii(u),u.i=null,u.g.forEach(function(m,v){var O=v.toLowerCase();v!=O&&(fv(this,v),mv(this,O,m))},u)),u.j=d}function K2(u,d){const m=new oe;if(a.Image){const v=new Image;v.onload=_(si,m,"TestLoadImage: loaded",!0,d,v),v.onerror=_(si,m,"TestLoadImage: error",!1,d,v),v.onabort=_(si,m,"TestLoadImage: abort",!1,d,v),v.ontimeout=_(si,m,"TestLoadImage: timeout",!1,d,v),a.setTimeout(function(){v.ontimeout&&v.ontimeout()},1e4),v.src=u}else d(!1)}function Q2(u,d){const m=new oe,v=new AbortController,O=setTimeout(()=>{v.abort(),si(m,"TestPingServer: timeout",!1,d)},1e4);fetch(u,{signal:v.signal}).then(U=>{clearTimeout(O),U.ok?si(m,"TestPingServer: ok",!0,d):si(m,"TestPingServer: server error",!1,d)}).catch(()=>{clearTimeout(O),si(m,"TestPingServer: error",!1,d)})}function si(u,d,m,v,O){try{O&&(O.onload=null,O.onerror=null,O.onabort=null,O.ontimeout=null),v(m)}catch{}}function X2(){this.g=new ro}function Y2(u,d,m){const v=m||"";try{uv(u,function(O,U){let G=O;c(O)&&(G=La(O)),d.push(v+U+"="+encodeURIComponent(G))})}catch(O){throw d.push(v+"type="+encodeURIComponent("_badmap")),O}}function $a(u){this.l=u.Ub||null,this.j=u.eb||!1}E($a,io),$a.prototype.g=function(){return new Hu(this.l,this.j)},$a.prototype.i=function(u){return function(){return u}}({});function Hu(u,d){Me.call(this),this.D=u,this.o=d,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}E(Hu,Me),t=Hu.prototype,t.open=function(u,d){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=u,this.A=d,this.readyState=1,ja(this)},t.send=function(u){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const d={headers:this.u,method:this.B,credentials:this.m,cache:void 0};u&&(d.body=u),(this.D||a).fetch(new Request(this.A,d)).then(this.Sa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,Fa(this)),this.readyState=0},t.Sa=function(u){if(this.g&&(this.l=u,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=u.headers,this.readyState=2,ja(this)),this.g&&(this.readyState=3,ja(this),this.g)))if(this.responseType==="arraybuffer")u.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof a.ReadableStream<"u"&&"body"in u){if(this.j=u.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;gv(this)}else u.text().then(this.Ra.bind(this),this.ga.bind(this))};function gv(u){u.j.read().then(u.Pa.bind(u)).catch(u.ga.bind(u))}t.Pa=function(u){if(this.g){if(this.o&&u.value)this.response.push(u.value);else if(!this.o){var d=u.value?u.value:new Uint8Array(0);(d=this.v.decode(d,{stream:!u.done}))&&(this.response=this.responseText+=d)}u.done?Fa(this):ja(this),this.readyState==3&&gv(this)}},t.Ra=function(u){this.g&&(this.response=this.responseText=u,Fa(this))},t.Qa=function(u){this.g&&(this.response=u,Fa(this))},t.ga=function(){this.g&&Fa(this)};function Fa(u){u.readyState=4,u.l=null,u.j=null,u.v=null,ja(u)}t.setRequestHeader=function(u,d){this.u.append(u,d)},t.getResponseHeader=function(u){return this.h&&this.h.get(u.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const u=[],d=this.h.entries();for(var m=d.next();!m.done;)m=m.value,u.push(m[0]+": "+m[1]),m=d.next();return u.join(`\r
`)};function ja(u){u.onreadystatechange&&u.onreadystatechange.call(u)}Object.defineProperty(Hu.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(u){this.m=u?"include":"same-origin"}});function yv(u){let d="";return z(u,function(m,v){d+=v,d+=":",d+=m,d+=`\r
`}),d}function nf(u,d,m){e:{for(v in m){var v=!1;break e}v=!0}v||(m=yv(m),typeof u=="string"?m!=null&&encodeURIComponent(String(m)):Ve(u,d,m))}function Je(u){Me.call(this),this.headers=new Map,this.o=u||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}E(Je,Me);var J2=/^https?$/i,Z2=["POST","PUT"];t=Je.prototype,t.Ha=function(u){this.J=u},t.ea=function(u,d,m,v){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+u);d=d?d.toUpperCase():"GET",this.D=u,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():bn.g(),this.v=this.o?so(this.o):so(bn),this.g.onreadystatechange=p(this.Ea,this);try{this.B=!0,this.g.open(d,String(u),!0),this.B=!1}catch(U){vv(this,U);return}if(u=m||"",m=new Map(this.headers),v)if(Object.getPrototypeOf(v)===Object.prototype)for(var O in v)m.set(O,v[O]);else if(typeof v.keys=="function"&&typeof v.get=="function")for(const U of v.keys())m.set(U,v.get(U));else throw Error("Unknown input type for opt_headers: "+String(v));v=Array.from(m.keys()).find(U=>U.toLowerCase()=="content-type"),O=a.FormData&&u instanceof a.FormData,!(0<=Array.prototype.indexOf.call(Z2,d,void 0))||v||O||m.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[U,G]of m)this.g.setRequestHeader(U,G);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{Ev(this),this.u=!0,this.g.send(u),this.u=!1}catch(U){vv(this,U)}};function vv(u,d){u.h=!1,u.g&&(u.j=!0,u.g.abort(),u.j=!1),u.l=d,u.m=5,_v(u),Wu(u)}function _v(u){u.A||(u.A=!0,et(u,"complete"),et(u,"error"))}t.abort=function(u){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=u||7,et(this,"complete"),et(this,"abort"),Wu(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Wu(this,!0)),Je.aa.N.call(this)},t.Ea=function(){this.s||(this.B||this.u||this.j?wv(this):this.bb())},t.bb=function(){wv(this)};function wv(u){if(u.h&&typeof o<"u"&&(!u.v[1]||br(u)!=4||u.Z()!=2)){if(u.u&&br(u)==4)as(u.Ea,0,u);else if(et(u,"readystatechange"),br(u)==4){u.h=!1;try{const G=u.Z();e:switch(G){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var d=!0;break e;default:d=!1}var m;if(!(m=d)){var v;if(v=G===0){var O=String(u.D).match(cv)[1]||null;!O&&a.self&&a.self.location&&(O=a.self.location.protocol.slice(0,-1)),v=!J2.test(O?O.toLowerCase():"")}m=v}if(m)et(u,"complete"),et(u,"success");else{u.m=6;try{var U=2<br(u)?u.g.statusText:""}catch{U=""}u.l=U+" ["+u.Z()+"]",_v(u)}}finally{Wu(u)}}}}function Wu(u,d){if(u.g){Ev(u);const m=u.g,v=u.v[0]?()=>{}:null;u.g=null,u.v=null,d||et(u,"ready");try{m.onreadystatechange=v}catch{}}}function Ev(u){u.I&&(a.clearTimeout(u.I),u.I=null)}t.isActive=function(){return!!this.g};function br(u){return u.g?u.g.readyState:0}t.Z=function(){try{return 2<br(this)?this.g.status:-1}catch{return-1}},t.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.Oa=function(u){if(this.g){var d=this.g.responseText;return u&&d.indexOf(u)==0&&(d=d.substring(u.length)),$u(d)}};function bv(u){try{if(!u.g)return null;if("response"in u.g)return u.g.response;switch(u.H){case"":case"text":return u.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in u.g)return u.g.mozResponseArrayBuffer}return null}catch{return null}}function eS(u){const d={};u=(u.g&&2<=br(u)&&u.g.getAllResponseHeaders()||"").split(`\r
`);for(let v=0;v<u.length;v++){if(w(u[v]))continue;var m=k(u[v]);const O=m[0];if(m=m[1],typeof m!="string")continue;m=m.trim();const U=d[O]||[];d[O]=U,U.push(m)}g(d,function(v){return v.join(", ")})}t.Ba=function(){return this.m},t.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function za(u,d,m){return m&&m.internalChannelParams&&m.internalChannelParams[u]||d}function Tv(u){this.Aa=0,this.i=[],this.j=new oe,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=za("failFast",!1,u),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=za("baseRetryDelayMs",5e3,u),this.cb=za("retryDelaySeedMs",1e4,u),this.Wa=za("forwardChannelMaxRetries",2,u),this.wa=za("forwardChannelRequestTimeoutMs",2e4,u),this.pa=u&&u.xmlHttpFactory||void 0,this.Xa=u&&u.Tb||void 0,this.Ca=u&&u.useFetchStreams||!1,this.L=void 0,this.J=u&&u.supportsCrossDomainXhr||!1,this.K="",this.h=new iv(u&&u.concurrentRequestLimit),this.Da=new X2,this.P=u&&u.fastHandshake||!1,this.O=u&&u.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=u&&u.Rb||!1,u&&u.xa&&this.j.xa(),u&&u.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&u&&u.detectBufferingProxy||!1,this.ja=void 0,u&&u.longPollingTimeout&&0<u.longPollingTimeout&&(this.ja=u.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}t=Tv.prototype,t.la=8,t.G=1,t.connect=function(u,d,m,v){Z(0),this.W=u,this.H=d||{},m&&v!==void 0&&(this.H.OSID=m,this.H.OAID=v),this.F=this.X,this.I=Nv(this,null,this.W),Gu(this)};function rf(u){if(Cv(u),u.G==3){var d=u.U++,m=Er(u.I);if(Ve(m,"SID",u.K),Ve(m,"RID",d),Ve(m,"TYPE","terminate"),Ba(u,m),d=new Gt(u,u.j,d),d.L=2,d.v=Bu(Er(m)),m=!1,a.navigator&&a.navigator.sendBeacon)try{m=a.navigator.sendBeacon(d.v.toString(),"")}catch{}!m&&a.Image&&(new Image().src=d.v,m=!0),m||(d.g=Ov(d.j,null),d.g.ea(d.v)),d.F=Date.now(),It(d)}Rv(u)}function qu(u){u.g&&(of(u),u.g.cancel(),u.g=null)}function Cv(u){qu(u),u.u&&(a.clearTimeout(u.u),u.u=null),Ku(u),u.h.cancel(),u.s&&(typeof u.s=="number"&&a.clearTimeout(u.s),u.s=null)}function Gu(u){if(!sv(u.h)&&!u.s){u.s=!0;var d=u.Ga;wt||re(),H||(wt(),H=!0),ee.add(d,u),u.B=0}}function tS(u,d){return ov(u.h)>=u.h.j-(u.s?1:0)?!1:u.s?(u.i=d.D.concat(u.i),!0):u.G==1||u.G==2||u.B>=(u.Va?0:u.Wa)?!1:(u.s=K(p(u.Ga,u,d),Pv(u,u.B)),u.B++,!0)}t.Ga=function(u){if(this.s)if(this.s=null,this.G==1){if(!u){this.U=Math.floor(1e5*Math.random()),u=this.U++;const O=new Gt(this,this.j,u);let U=this.o;if(this.S&&(U?(U=y(U),S(U,this.S)):U=this.S),this.m!==null||this.O||(O.H=U,U=null),this.P)e:{for(var d=0,m=0;m<this.i.length;m++){t:{var v=this.i[m];if("__data__"in v.map&&(v=v.map.__data__,typeof v=="string")){v=v.length;break t}v=void 0}if(v===void 0)break;if(d+=v,4096<d){d=m;break e}if(d===4096||m===this.i.length-1){d=m+1;break e}}d=1e3}else d=1e3;d=Sv(this,O,d),m=Er(this.I),Ve(m,"RID",u),Ve(m,"CVER",22),this.D&&Ve(m,"X-HTTP-Session-Id",this.D),Ba(this,m),U&&(this.O?d="headers="+encodeURIComponent(String(yv(U)))+"&"+d:this.m&&nf(m,this.m,U)),tf(this.h,O),this.Ua&&Ve(m,"TYPE","init"),this.P?(Ve(m,"$req",d),Ve(m,"SID","null"),O.T=!0,ni(O,m,null)):ni(O,m,d),this.G=2}}else this.G==3&&(u?Iv(this,u):this.i.length==0||sv(this.h)||Iv(this))};function Iv(u,d){var m;d?m=d.l:m=u.U++;const v=Er(u.I);Ve(v,"SID",u.K),Ve(v,"RID",m),Ve(v,"AID",u.T),Ba(u,v),u.m&&u.o&&nf(v,u.m,u.o),m=new Gt(u,u.j,m,u.B+1),u.m===null&&(m.H=u.o),d&&(u.i=d.D.concat(u.i)),d=Sv(u,m,1e3),m.I=Math.round(.5*u.wa)+Math.round(.5*u.wa*Math.random()),tf(u.h,m),ni(m,v,d)}function Ba(u,d){u.H&&z(u.H,function(m,v){Ve(d,v,m)}),u.l&&uv({},function(m,v){Ve(d,v,m)})}function Sv(u,d,m){m=Math.min(u.i.length,m);var v=u.l?p(u.l.Na,u.l,u):null;e:{var O=u.i;let U=-1;for(;;){const G=["count="+m];U==-1?0<m?(U=O[0].g,G.push("ofs="+U)):U=0:G.push("ofs="+U);let Re=!0;for(let St=0;St<m;St++){let Se=O[St].g;const Dt=O[St].map;if(Se-=U,0>Se)U=Math.max(0,O[St].g-100),Re=!1;else try{Y2(Dt,G,"req"+Se+"_")}catch{v&&v(Dt)}}if(Re){v=G.join("&");break e}}}return u=u.i.splice(0,m),d.D=u,v}function Av(u){if(!u.g&&!u.u){u.Y=1;var d=u.Fa;wt||re(),H||(wt(),H=!0),ee.add(d,u),u.v=0}}function sf(u){return u.g||u.u||3<=u.v?!1:(u.Y++,u.u=K(p(u.Fa,u),Pv(u,u.v)),u.v++,!0)}t.Fa=function(){if(this.u=null,xv(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var u=2*this.R;this.j.info("BP detection timer enabled: "+u),this.A=K(p(this.ab,this),u)}},t.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,Z(10),qu(this),xv(this))};function of(u){u.A!=null&&(a.clearTimeout(u.A),u.A=null)}function xv(u){u.g=new Gt(u,u.j,"rpc",u.Y),u.m===null&&(u.g.H=u.o),u.g.O=0;var d=Er(u.qa);Ve(d,"RID","rpc"),Ve(d,"SID",u.K),Ve(d,"AID",u.T),Ve(d,"CI",u.F?"0":"1"),!u.F&&u.ja&&Ve(d,"TO",u.ja),Ve(d,"TYPE","xmlhttp"),Ba(u,d),u.m&&u.o&&nf(d,u.m,u.o),u.L&&(u.g.I=u.L);var m=u.g;u=u.ia,m.L=1,m.v=Bu(Er(d)),m.m=null,m.P=!0,ls(m,u)}t.Za=function(){this.C!=null&&(this.C=null,qu(this),sf(this),Z(19))};function Ku(u){u.C!=null&&(a.clearTimeout(u.C),u.C=null)}function kv(u,d){var m=null;if(u.g==d){Ku(u),of(u),u.g=null;var v=2}else if(ef(u.h,d))m=d.D,av(u.h,d),v=1;else return;if(u.G!=0){if(d.o)if(v==1){m=d.m?d.m.length:0,d=Date.now()-d.F;var O=u.B;v=M(),et(v,new te(v,m)),Gu(u)}else Av(u);else if(O=d.s,O==3||O==0&&0<d.X||!(v==1&&tS(u,d)||v==2&&sf(u)))switch(m&&0<m.length&&(d=u.h,d.i=d.i.concat(m)),O){case 1:cs(u,5);break;case 4:cs(u,10);break;case 3:cs(u,6);break;default:cs(u,2)}}}function Pv(u,d){let m=u.Ta+Math.floor(Math.random()*u.cb);return u.isActive()||(m*=2),m*d}function cs(u,d){if(u.j.info("Error code "+d),d==2){var m=p(u.fb,u),v=u.Xa;const O=!v;v=new us(v||"//www.google.com/images/cleardot.gif"),a.location&&a.location.protocol=="http"||ju(v,"https"),Bu(v),O?K2(v.toString(),m):Q2(v.toString(),m)}else Z(2);u.G=0,u.l&&u.l.sa(d),Rv(u),Cv(u)}t.fb=function(u){u?(this.j.info("Successfully pinged google.com"),Z(2)):(this.j.info("Failed to ping google.com"),Z(1))};function Rv(u){if(u.G=0,u.ka=[],u.l){const d=lv(u.h);(d.length!=0||u.i.length!=0)&&(R(u.ka,d),R(u.ka,u.i),u.h.i.length=0,I(u.i),u.i.length=0),u.l.ra()}}function Nv(u,d,m){var v=m instanceof us?Er(m):new us(m);if(v.g!="")d&&(v.g=d+"."+v.g),zu(v,v.s);else{var O=a.location;v=O.protocol,d=d?d+"."+O.hostname:O.hostname,O=+O.port;var U=new us(null);v&&ju(U,v),d&&(U.g=d),O&&zu(U,O),m&&(U.l=m),v=U}return m=u.D,d=u.ya,m&&d&&Ve(v,m,d),Ve(v,"VER",u.la),Ba(u,v),v}function Ov(u,d,m){if(d&&!u.J)throw Error("Can't create secondary domain capable XhrIo object.");return d=u.Ca&&!u.pa?new Je(new $a({eb:m})):new Je(u.pa),d.Ha(u.J),d}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function Lv(){}t=Lv.prototype,t.ua=function(){},t.ta=function(){},t.sa=function(){},t.ra=function(){},t.isActive=function(){return!0},t.Na=function(){};function Qu(){}Qu.prototype.g=function(u,d){return new dn(u,d)};function dn(u,d){Me.call(this),this.g=new Tv(d),this.l=u,this.h=d&&d.messageUrlParams||null,u=d&&d.messageHeaders||null,d&&d.clientProtocolHeaderRequired&&(u?u["X-Client-Protocol"]="webchannel":u={"X-Client-Protocol":"webchannel"}),this.g.o=u,u=d&&d.initMessageHeaders||null,d&&d.messageContentType&&(u?u["X-WebChannel-Content-Type"]=d.messageContentType:u={"X-WebChannel-Content-Type":d.messageContentType}),d&&d.va&&(u?u["X-WebChannel-Client-Profile"]=d.va:u={"X-WebChannel-Client-Profile":d.va}),this.g.S=u,(u=d&&d.Sb)&&!w(u)&&(this.g.m=u),this.v=d&&d.supportsCrossDomainXhr||!1,this.u=d&&d.sendRawJson||!1,(d=d&&d.httpSessionIdParam)&&!w(d)&&(this.g.D=d,u=this.h,u!==null&&d in u&&(u=this.h,d in u&&delete u[d])),this.j=new lo(this)}E(dn,Me),dn.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},dn.prototype.close=function(){rf(this.g)},dn.prototype.o=function(u){var d=this.g;if(typeof u=="string"){var m={};m.__data__=u,u=m}else this.u&&(m={},m.__data__=La(u),u=m);d.i.push(new U2(d.Ya++,u)),d.G==3&&Gu(d)},dn.prototype.N=function(){this.g.l=null,delete this.j,rf(this.g),delete this.g,dn.aa.N.call(this)};function Dv(u){Da.call(this),u.__headers__&&(this.headers=u.__headers__,this.statusCode=u.__status__,delete u.__headers__,delete u.__status__);var d=u.__sm__;if(d){e:{for(const m in d){u=m;break e}u=void 0}(this.i=u)&&(u=this.i,d=d!==null&&u in d?d[u]:void 0),this.data=d}else this.data=u}E(Dv,Da);function Mv(){oo.call(this),this.status=1}E(Mv,oo);function lo(u){this.g=u}E(lo,Lv),lo.prototype.ua=function(){et(this.g,"a")},lo.prototype.ta=function(u){et(this.g,new Dv(u))},lo.prototype.sa=function(u){et(this.g,new Mv)},lo.prototype.ra=function(){et(this.g,"b")},Qu.prototype.createWebChannel=Qu.prototype.g,dn.prototype.send=dn.prototype.o,dn.prototype.open=dn.prototype.m,dn.prototype.close=dn.prototype.close,HT=function(){return new Qu},BT=function(){return M()},zT=yr,cm={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},We.NO_ERROR=0,We.TIMEOUT=8,We.HTTP_ERROR=6,zc=We,ei.COMPLETE="complete",jT=ei,Fu.EventType=Zr,Zr.OPEN="a",Zr.CLOSE="b",Zr.ERROR="c",Zr.MESSAGE="d",Me.prototype.listen=Me.prototype.K,pl=Fu,FT=$a,Je.prototype.listenOnce=Je.prototype.L,Je.prototype.getLastError=Je.prototype.Ka,Je.prototype.getLastErrorCode=Je.prototype.Ba,Je.prototype.getStatus=Je.prototype.Z,Je.prototype.getResponseJson=Je.prototype.Oa,Je.prototype.getResponseText=Je.prototype.oa,Je.prototype.send=Je.prototype.ea,Je.prototype.setWithCredentials=Je.prototype.Ha,$T=Je}).apply(typeof gc<"u"?gc:typeof self<"u"?self:typeof window<"u"?window:{});const q0="@firebase/firestore";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ft{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Ft.UNAUTHENTICATED=new Ft(null),Ft.GOOGLE_CREDENTIALS=new Ft("google-credentials-uid"),Ft.FIRST_PARTY=new Ft("first-party-uid"),Ft.MOCK_USER=new Ft("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let ba="10.12.1";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const js=new Mg("@firebase/firestore");function rl(){return js.logLevel}function J(t,...e){if(js.logLevel<=Ee.DEBUG){const n=e.map(Xg);js.debug(`Firestore (${ba}): ${t}`,...n)}}function Hr(t,...e){if(js.logLevel<=Ee.ERROR){const n=e.map(Xg);js.error(`Firestore (${ba}): ${t}`,...n)}}function ra(t,...e){if(js.logLevel<=Ee.WARN){const n=e.map(Xg);js.warn(`Firestore (${ba}): ${t}`,...n)}}function Xg(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(n){return JSON.stringify(n)}(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function le(t="Unexpected state"){const e=`FIRESTORE (${ba}) INTERNAL ASSERTION FAILED: `+t;throw Hr(e),new Error(e)}function De(t,e){t||le()}function ce(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const j={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Y extends Xr{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Li{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WT{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class YL{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(Ft.UNAUTHENTICATED))}shutdown(){}}class JL{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class ZL{constructor(e){this.t=e,this.currentUser=Ft.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){let r=this.i;const i=l=>this.i!==r?(r=this.i,n(l)):Promise.resolve();let s=new Li;this.o=()=>{this.i++,this.currentUser=this.u(),s.resolve(),s=new Li,e.enqueueRetryable(()=>i(this.currentUser))};const o=()=>{const l=s;e.enqueueRetryable(async()=>{await l.promise,await i(this.currentUser)})},a=l=>{J("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=l,this.auth.addAuthTokenListener(this.o),o()};this.t.onInit(l=>a(l)),setTimeout(()=>{if(!this.auth){const l=this.t.getImmediate({optional:!0});l?a(l):(J("FirebaseAuthCredentialsProvider","Auth not yet detected"),s.resolve(),s=new Li)}},0),o()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==e?(J("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(De(typeof r.accessToken=="string"),new WT(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const e=this.auth&&this.auth.getUid();return De(e===null||typeof e=="string"),new Ft(e)}}class e4{constructor(e,n,r){this.l=e,this.h=n,this.P=r,this.type="FirstParty",this.user=Ft.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);const e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}}class t4{constructor(e,n,r){this.l=e,this.h=n,this.P=r}getToken(){return Promise.resolve(new e4(this.l,this.h,this.P))}start(e,n){e.enqueueRetryable(()=>n(Ft.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class n4{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class r4{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,n){const r=s=>{s.error!=null&&J("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${s.error.message}`);const o=s.token!==this.R;return this.R=s.token,J("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?n(s.token):Promise.resolve()};this.o=s=>{e.enqueueRetryable(()=>r(s))};const i=s=>{J("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=s,this.appCheck.addTokenListener(this.o)};this.A.onInit(s=>i(s)),setTimeout(()=>{if(!this.appCheck){const s=this.A.getImmediate({optional:!0});s?i(s):J("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(De(typeof n.token=="string"),this.R=n.token,new n4(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function i4(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qT{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=Math.floor(256/e.length)*e.length;let r="";for(;r.length<20;){const i=i4(40);for(let s=0;s<i.length;++s)r.length<20&&i[s]<n&&(r+=e.charAt(i[s]%e.length))}return r}}function Ae(t,e){return t<e?-1:t>e?1:0}function ia(t,e,n){return t.length===e.length&&t.every((r,i)=>n(r,e[i]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mt{constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new Y(j.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new Y(j.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<-62135596800)throw new Y(j.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new Y(j.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return mt.fromMillis(Date.now())}static fromDate(e){return mt.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*n));return new mt(n,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?Ae(this.nanoseconds,e.nanoseconds):Ae(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ue{constructor(e){this.timestamp=e}static fromTimestamp(e){return new ue(e)}static min(){return new ue(new mt(0,0))}static max(){return new ue(new mt(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ru{constructor(e,n,r){n===void 0?n=0:n>e.length&&le(),r===void 0?r=e.length-n:r>e.length-n&&le(),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return ru.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof ru?e.forEach(r=>{n.push(r)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const r=Math.min(e.length,n.length);for(let i=0;i<r;i++){const s=e.get(i),o=n.get(i);if(s<o)return-1;if(s>o)return 1}return e.length<n.length?-1:e.length>n.length?1:0}}class Fe extends ru{construct(e,n,r){return new Fe(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const r of e){if(r.indexOf("//")>=0)throw new Y(j.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(i=>i.length>0))}return new Fe(n)}static emptyPath(){return new Fe([])}}const s4=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Pt extends ru{construct(e,n,r){return new Pt(e,n,r)}static isValidIdentifier(e){return s4.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Pt.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new Pt(["__name__"])}static fromServerFormat(e){const n=[];let r="",i=0;const s=()=>{if(r.length===0)throw new Y(j.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let o=!1;for(;i<e.length;){const a=e[i];if(a==="\\"){if(i+1===e.length)throw new Y(j.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const l=e[i+1];if(l!=="\\"&&l!=="."&&l!=="`")throw new Y(j.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=l,i+=2}else a==="`"?(o=!o,i++):a!=="."||o?(r+=a,i++):(s(),i++)}if(s(),o)throw new Y(j.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Pt(n)}static emptyPath(){return new Pt([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ne{constructor(e){this.path=e}static fromPath(e){return new ne(Fe.fromString(e))}static fromName(e){return new ne(Fe.fromString(e).popFirst(5))}static empty(){return new ne(Fe.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Fe.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return Fe.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new ne(new Fe(e.slice()))}}function o4(t,e){const n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,i=ue.fromTimestamp(r===1e9?new mt(n+1,0):new mt(n,r));return new zi(i,ne.empty(),e)}function a4(t){return new zi(t.readTime,t.key,-1)}class zi{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new zi(ue.min(),ne.empty(),-1)}static max(){return new zi(ue.max(),ne.empty(),-1)}}function l4(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=ne.comparator(t.documentKey,e.documentKey),n!==0?n:Ae(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const u4="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class c4{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Cu(t){if(t.code!==j.FAILED_PRECONDITION||t.message!==u4)throw t;J("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class B{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&le(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new B((r,i)=>{this.nextCallback=s=>{this.wrapSuccess(e,s).next(r,i)},this.catchCallback=s=>{this.wrapFailure(n,s).next(r,i)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof B?n:B.resolve(n)}catch(n){return B.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):B.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):B.reject(n)}static resolve(e){return new B((n,r)=>{n(e)})}static reject(e){return new B((n,r)=>{r(e)})}static waitFor(e){return new B((n,r)=>{let i=0,s=0,o=!1;e.forEach(a=>{++i,a.next(()=>{++s,o&&s===i&&n()},l=>r(l))}),o=!0,s===i&&n()})}static or(e){let n=B.resolve(!1);for(const r of e)n=n.next(i=>i?B.resolve(i):r());return n}static forEach(e,n){const r=[];return e.forEach((i,s)=>{r.push(n.call(this,i,s))}),this.waitFor(r)}static mapArray(e,n){return new B((r,i)=>{const s=e.length,o=new Array(s);let a=0;for(let l=0;l<s;l++){const c=l;n(e[c]).next(h=>{o[c]=h,++a,a===s&&r(o)},h=>i(h))}})}static doWhile(e,n){return new B((r,i)=>{const s=()=>{e()===!0?n().next(()=>{s()},i):r()};s()})}}function h4(t){const e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function Iu(t){return t.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yg{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=r=>this.ie(r),this.se=r=>n.writeSequenceNumber(r))}ie(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.se&&this.se(e),e}}Yg.oe=-1;function dd(t){return t==null}function Ph(t){return t===0&&1/t==-1/0}function d4(t){return typeof t=="number"&&Number.isInteger(t)&&!Ph(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function G0(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function Ks(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function GT(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ye{constructor(e,n){this.comparator=e,this.root=n||kt.EMPTY}insert(e,n){return new Ye(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,kt.BLACK,null,null))}remove(e){return new Ye(this.comparator,this.root.remove(e,this.comparator).copy(null,null,kt.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){const i=this.comparator(e,r.key);if(i===0)return n+r.left.size;i<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,r)=>(e(n,r),!1))}toString(){const e=[];return this.inorderTraversal((n,r)=>(e.push(`${n}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new yc(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new yc(this.root,e,this.comparator,!1)}getReverseIterator(){return new yc(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new yc(this.root,e,this.comparator,!0)}}class yc{constructor(e,n,r,i){this.isReverse=i,this.nodeStack=[];let s=1;for(;!e.isEmpty();)if(s=n?r(e.key,n):1,n&&i&&(s*=-1),s<0)e=this.isReverse?e.left:e.right;else{if(s===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class kt{constructor(e,n,r,i,s){this.key=e,this.value=n,this.color=r??kt.RED,this.left=i??kt.EMPTY,this.right=s??kt.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,i,s){return new kt(e??this.key,n??this.value,r??this.color,i??this.left,s??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let i=this;const s=r(e,i.key);return i=s<0?i.copy(null,null,null,i.left.insert(e,n,r),null):s===0?i.copy(null,n,null,null,null):i.copy(null,null,null,null,i.right.insert(e,n,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return kt.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,i=this;if(n(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),n(e,i.key)===0){if(i.right.isEmpty())return kt.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,n))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,kt.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,kt.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw le();const e=this.left.check();if(e!==this.right.check())throw le();return e+(this.isRed()?0:1)}}kt.EMPTY=null,kt.RED=!0,kt.BLACK=!1;kt.EMPTY=new class{constructor(){this.size=0}get key(){throw le()}get value(){throw le()}get color(){throw le()}get left(){throw le()}get right(){throw le()}copy(e,n,r,i,s){return this}insert(e,n,r){return new kt(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nt{constructor(e){this.comparator=e,this.data=new Ye(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,r)=>(e(n),!1))}forEachInRange(e,n){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;n(i.key)}}forEachWhile(e,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new K0(this.data.getIterator())}getIteratorFrom(e){return new K0(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(r=>{n=n.add(r)}),n}isEqual(e){if(!(e instanceof Nt)||this.size!==e.size)return!1;const n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){const i=n.getNext().key,s=r.getNext().key;if(this.comparator(i,s)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new Nt(this.comparator);return n.data=e,n}}class K0{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mn{constructor(e){this.fields=e,e.sort(Pt.comparator)}static empty(){return new mn([])}unionWith(e){let n=new Nt(Pt.comparator);for(const r of this.fields)n=n.add(r);for(const r of e)n=n.add(r);return new mn(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return ia(this.fields,e.fields,(n,r)=>n.isEqual(r))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KT extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ht{constructor(e){this.binaryString=e}static fromBase64String(e){const n=function(i){try{return atob(i)}catch(s){throw typeof DOMException<"u"&&s instanceof DOMException?new KT("Invalid base64 string: "+s):s}}(e);return new Ht(n)}static fromUint8Array(e){const n=function(i){let s="";for(let o=0;o<i.length;++o)s+=String.fromCharCode(i[o]);return s}(e);return new Ht(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const r=new Uint8Array(n.length);for(let i=0;i<n.length;i++)r[i]=n.charCodeAt(i);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Ae(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Ht.EMPTY_BYTE_STRING=new Ht("");const f4=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Bi(t){if(De(!!t),typeof t=="string"){let e=0;const n=f4.exec(t);if(De(!!n),n[1]){let i=n[1];i=(i+"000000000").substr(0,9),e=Number(i)}const r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:lt(t.seconds),nanos:lt(t.nanos)}}function lt(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function zs(t){return typeof t=="string"?Ht.fromBase64String(t):Ht.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Jg(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="server_timestamp"}function Zg(t){const e=t.mapValue.fields.__previous_value__;return Jg(e)?Zg(e):e}function iu(t){const e=Bi(t.mapValue.fields.__local_write_time__.timestampValue);return new mt(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class p4{constructor(e,n,r,i,s,o,a,l,c){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=i,this.ssl=s,this.forceLongPolling=o,this.autoDetectLongPolling=a,this.longPollingOptions=l,this.useFetchStreams=c}}class su{constructor(e,n){this.projectId=e,this.database=n||"(default)"}static empty(){return new su("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof su&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vc={mapValue:{fields:{__type__:{stringValue:"__max__"}}}};function Bs(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?Jg(t)?4:m4(t)?9007199254740991:10:le()}function pr(t,e){if(t===e)return!0;const n=Bs(t);if(n!==Bs(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return iu(t).isEqual(iu(e));case 3:return function(i,s){if(typeof i.timestampValue=="string"&&typeof s.timestampValue=="string"&&i.timestampValue.length===s.timestampValue.length)return i.timestampValue===s.timestampValue;const o=Bi(i.timestampValue),a=Bi(s.timestampValue);return o.seconds===a.seconds&&o.nanos===a.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(i,s){return zs(i.bytesValue).isEqual(zs(s.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(i,s){return lt(i.geoPointValue.latitude)===lt(s.geoPointValue.latitude)&&lt(i.geoPointValue.longitude)===lt(s.geoPointValue.longitude)}(t,e);case 2:return function(i,s){if("integerValue"in i&&"integerValue"in s)return lt(i.integerValue)===lt(s.integerValue);if("doubleValue"in i&&"doubleValue"in s){const o=lt(i.doubleValue),a=lt(s.doubleValue);return o===a?Ph(o)===Ph(a):isNaN(o)&&isNaN(a)}return!1}(t,e);case 9:return ia(t.arrayValue.values||[],e.arrayValue.values||[],pr);case 10:return function(i,s){const o=i.mapValue.fields||{},a=s.mapValue.fields||{};if(G0(o)!==G0(a))return!1;for(const l in o)if(o.hasOwnProperty(l)&&(a[l]===void 0||!pr(o[l],a[l])))return!1;return!0}(t,e);default:return le()}}function ou(t,e){return(t.values||[]).find(n=>pr(n,e))!==void 0}function sa(t,e){if(t===e)return 0;const n=Bs(t),r=Bs(e);if(n!==r)return Ae(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return Ae(t.booleanValue,e.booleanValue);case 2:return function(s,o){const a=lt(s.integerValue||s.doubleValue),l=lt(o.integerValue||o.doubleValue);return a<l?-1:a>l?1:a===l?0:isNaN(a)?isNaN(l)?0:-1:1}(t,e);case 3:return Q0(t.timestampValue,e.timestampValue);case 4:return Q0(iu(t),iu(e));case 5:return Ae(t.stringValue,e.stringValue);case 6:return function(s,o){const a=zs(s),l=zs(o);return a.compareTo(l)}(t.bytesValue,e.bytesValue);case 7:return function(s,o){const a=s.split("/"),l=o.split("/");for(let c=0;c<a.length&&c<l.length;c++){const h=Ae(a[c],l[c]);if(h!==0)return h}return Ae(a.length,l.length)}(t.referenceValue,e.referenceValue);case 8:return function(s,o){const a=Ae(lt(s.latitude),lt(o.latitude));return a!==0?a:Ae(lt(s.longitude),lt(o.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return function(s,o){const a=s.values||[],l=o.values||[];for(let c=0;c<a.length&&c<l.length;++c){const h=sa(a[c],l[c]);if(h)return h}return Ae(a.length,l.length)}(t.arrayValue,e.arrayValue);case 10:return function(s,o){if(s===vc.mapValue&&o===vc.mapValue)return 0;if(s===vc.mapValue)return 1;if(o===vc.mapValue)return-1;const a=s.fields||{},l=Object.keys(a),c=o.fields||{},h=Object.keys(c);l.sort(),h.sort();for(let f=0;f<l.length&&f<h.length;++f){const p=Ae(l[f],h[f]);if(p!==0)return p;const _=sa(a[l[f]],c[h[f]]);if(_!==0)return _}return Ae(l.length,h.length)}(t.mapValue,e.mapValue);default:throw le()}}function Q0(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return Ae(t,e);const n=Bi(t),r=Bi(e),i=Ae(n.seconds,r.seconds);return i!==0?i:Ae(n.nanos,r.nanos)}function oa(t){return hm(t)}function hm(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(n){const r=Bi(n);return`time(${r.seconds},${r.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(n){return zs(n).toBase64()}(t.bytesValue):"referenceValue"in t?function(n){return ne.fromName(n).toString()}(t.referenceValue):"geoPointValue"in t?function(n){return`geo(${n.latitude},${n.longitude})`}(t.geoPointValue):"arrayValue"in t?function(n){let r="[",i=!0;for(const s of n.values||[])i?i=!1:r+=",",r+=hm(s);return r+"]"}(t.arrayValue):"mapValue"in t?function(n){const r=Object.keys(n.fields||{}).sort();let i="{",s=!0;for(const o of r)s?s=!1:i+=",",i+=`${o}:${hm(n.fields[o])}`;return i+"}"}(t.mapValue):le()}function X0(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function dm(t){return!!t&&"integerValue"in t}function ey(t){return!!t&&"arrayValue"in t}function Y0(t){return!!t&&"nullValue"in t}function J0(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function Bc(t){return!!t&&"mapValue"in t}function Rl(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){const e={mapValue:{fields:{}}};return Ks(t.mapValue.fields,(n,r)=>e.mapValue.fields[n]=Rl(r)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=Rl(t.arrayValue.values[n]);return e}return Object.assign({},t)}function m4(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rn{constructor(e){this.value=e}static empty(){return new rn({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!Bc(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=Rl(n)}setAll(e){let n=Pt.emptyPath(),r={},i=[];e.forEach((o,a)=>{if(!n.isImmediateParentOf(a)){const l=this.getFieldsMap(n);this.applyChanges(l,r,i),r={},i=[],n=a.popLast()}o?r[a.lastSegment()]=Rl(o):i.push(a.lastSegment())});const s=this.getFieldsMap(n);this.applyChanges(s,r,i)}delete(e){const n=this.field(e.popLast());Bc(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return pr(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=n.mapValue.fields[e.get(r)];Bc(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=i),n=i}return n.mapValue.fields}applyChanges(e,n,r){Ks(n,(i,s)=>e[i]=s);for(const i of r)delete e[i]}clone(){return new rn(Rl(this.value))}}function QT(t){const e=[];return Ks(t.fields,(n,r)=>{const i=new Pt([n]);if(Bc(r)){const s=QT(r.mapValue).fields;if(s.length===0)e.push(i);else for(const o of s)e.push(i.child(o))}else e.push(i)}),new mn(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zt{constructor(e,n,r,i,s,o,a){this.key=e,this.documentType=n,this.version=r,this.readTime=i,this.createTime=s,this.data=o,this.documentState=a}static newInvalidDocument(e){return new zt(e,0,ue.min(),ue.min(),ue.min(),rn.empty(),0)}static newFoundDocument(e,n,r,i){return new zt(e,1,n,ue.min(),r,i,0)}static newNoDocument(e,n){return new zt(e,2,n,ue.min(),ue.min(),rn.empty(),0)}static newUnknownDocument(e,n){return new zt(e,3,n,ue.min(),ue.min(),rn.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(ue.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=rn.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=rn.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=ue.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof zt&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new zt(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rh{constructor(e,n){this.position=e,this.inclusive=n}}function Z0(t,e,n){let r=0;for(let i=0;i<t.position.length;i++){const s=e[i],o=t.position[i];if(s.field.isKeyField()?r=ne.comparator(ne.fromName(o.referenceValue),n.key):r=sa(o,n.data.field(s.field)),s.dir==="desc"&&(r*=-1),r!==0)break}return r}function ew(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!pr(t.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class au{constructor(e,n="asc"){this.field=e,this.dir=n}}function g4(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XT{}class ct extends XT{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,r):new v4(e,n,r):n==="array-contains"?new E4(e,r):n==="in"?new b4(e,r):n==="not-in"?new T4(e,r):n==="array-contains-any"?new C4(e,r):new ct(e,n,r)}static createKeyFieldInFilter(e,n,r){return n==="in"?new _4(e,r):new w4(e,r)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&this.matchesComparison(sa(n,this.value)):n!==null&&Bs(this.value)===Bs(n)&&this.matchesComparison(sa(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return le()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Yn extends XT{constructor(e,n){super(),this.filters=e,this.op=n,this.ae=null}static create(e,n){return new Yn(e,n)}matches(e){return YT(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.ae!==null||(this.ae=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.ae}getFilters(){return Object.assign([],this.filters)}}function YT(t){return t.op==="and"}function JT(t){return y4(t)&&YT(t)}function y4(t){for(const e of t.filters)if(e instanceof Yn)return!1;return!0}function fm(t){if(t instanceof ct)return t.field.canonicalString()+t.op.toString()+oa(t.value);if(JT(t))return t.filters.map(e=>fm(e)).join(",");{const e=t.filters.map(n=>fm(n)).join(",");return`${t.op}(${e})`}}function ZT(t,e){return t instanceof ct?function(r,i){return i instanceof ct&&r.op===i.op&&r.field.isEqual(i.field)&&pr(r.value,i.value)}(t,e):t instanceof Yn?function(r,i){return i instanceof Yn&&r.op===i.op&&r.filters.length===i.filters.length?r.filters.reduce((s,o,a)=>s&&ZT(o,i.filters[a]),!0):!1}(t,e):void le()}function eC(t){return t instanceof ct?function(n){return`${n.field.canonicalString()} ${n.op} ${oa(n.value)}`}(t):t instanceof Yn?function(n){return n.op.toString()+" {"+n.getFilters().map(eC).join(" ,")+"}"}(t):"Filter"}class v4 extends ct{constructor(e,n,r){super(e,n,r),this.key=ne.fromName(r.referenceValue)}matches(e){const n=ne.comparator(e.key,this.key);return this.matchesComparison(n)}}class _4 extends ct{constructor(e,n){super(e,"in",n),this.keys=tC("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class w4 extends ct{constructor(e,n){super(e,"not-in",n),this.keys=tC("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function tC(t,e){var n;return(((n=e.arrayValue)===null||n===void 0?void 0:n.values)||[]).map(r=>ne.fromName(r.referenceValue))}class E4 extends ct{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return ey(n)&&ou(n.arrayValue,this.value)}}class b4 extends ct{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&ou(this.value.arrayValue,n)}}class T4 extends ct{constructor(e,n){super(e,"not-in",n)}matches(e){if(ou(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&!ou(this.value.arrayValue,n)}}class C4 extends ct{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!ey(n)||!n.arrayValue.values)&&n.arrayValue.values.some(r=>ou(this.value.arrayValue,r))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class I4{constructor(e,n=null,r=[],i=[],s=null,o=null,a=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=i,this.limit=s,this.startAt=o,this.endAt=a,this.ue=null}}function tw(t,e=null,n=[],r=[],i=null,s=null,o=null){return new I4(t,e,n,r,i,s,o)}function ty(t){const e=ce(t);if(e.ue===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(r=>fm(r)).join(","),n+="|ob:",n+=e.orderBy.map(r=>function(s){return s.field.canonicalString()+s.dir}(r)).join(","),dd(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(r=>oa(r)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(r=>oa(r)).join(",")),e.ue=n}return e.ue}function ny(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!g4(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!ZT(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!ew(t.startAt,e.startAt)&&ew(t.endAt,e.endAt)}function pm(t){return ne.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ta{constructor(e,n=null,r=[],i=[],s=null,o="F",a=null,l=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=i,this.limit=s,this.limitType=o,this.startAt=a,this.endAt=l,this.ce=null,this.le=null,this.he=null,this.startAt,this.endAt}}function S4(t,e,n,r,i,s,o,a){return new Ta(t,e,n,r,i,s,o,a)}function nC(t){return new Ta(t)}function nw(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function rC(t){return t.collectionGroup!==null}function Nl(t){const e=ce(t);if(e.ce===null){e.ce=[];const n=new Set;for(const s of e.explicitOrderBy)e.ce.push(s),n.add(s.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(o){let a=new Nt(Pt.comparator);return o.filters.forEach(l=>{l.getFlattenedFilters().forEach(c=>{c.isInequality()&&(a=a.add(c.field))})}),a})(e).forEach(s=>{n.has(s.canonicalString())||s.isKeyField()||e.ce.push(new au(s,r))}),n.has(Pt.keyField().canonicalString())||e.ce.push(new au(Pt.keyField(),r))}return e.ce}function cr(t){const e=ce(t);return e.le||(e.le=A4(e,Nl(t))),e.le}function A4(t,e){if(t.limitType==="F")return tw(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(i=>{const s=i.dir==="desc"?"asc":"desc";return new au(i.field,s)});const n=t.endAt?new Rh(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new Rh(t.startAt.position,t.startAt.inclusive):null;return tw(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}}function mm(t,e){const n=t.filters.concat([e]);return new Ta(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}function gm(t,e,n){return new Ta(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function fd(t,e){return ny(cr(t),cr(e))&&t.limitType===e.limitType}function iC(t){return`${ty(cr(t))}|lt:${t.limitType}`}function yo(t){return`Query(target=${function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map(i=>eC(i)).join(", ")}]`),dd(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map(i=>function(o){return`${o.field.canonicalString()} (${o.dir})`}(i)).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map(i=>oa(i)).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map(i=>oa(i)).join(",")),`Target(${r})`}(cr(t))}; limitType=${t.limitType})`}function pd(t,e){return e.isFoundDocument()&&function(r,i){const s=i.key.path;return r.collectionGroup!==null?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(s):ne.isDocumentKey(r.path)?r.path.isEqual(s):r.path.isImmediateParentOf(s)}(t,e)&&function(r,i){for(const s of Nl(r))if(!s.field.isKeyField()&&i.data.field(s.field)===null)return!1;return!0}(t,e)&&function(r,i){for(const s of r.filters)if(!s.matches(i))return!1;return!0}(t,e)&&function(r,i){return!(r.startAt&&!function(o,a,l){const c=Z0(o,a,l);return o.inclusive?c<=0:c<0}(r.startAt,Nl(r),i)||r.endAt&&!function(o,a,l){const c=Z0(o,a,l);return o.inclusive?c>=0:c>0}(r.endAt,Nl(r),i))}(t,e)}function x4(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function sC(t){return(e,n)=>{let r=!1;for(const i of Nl(t)){const s=k4(i,e,n);if(s!==0)return s;r=r||i.field.isKeyField()}return 0}}function k4(t,e,n){const r=t.field.isKeyField()?ne.comparator(e.key,n.key):function(s,o,a){const l=o.data.field(s),c=a.data.field(s);return l!==null&&c!==null?sa(l,c):le()}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return le()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ca{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r!==void 0){for(const[i,s]of r)if(this.equalsFn(i,e))return s}}has(e){return this.get(e)!==void 0}set(e,n){const r=this.mapKeyFn(e),i=this.inner[r];if(i===void 0)return this.inner[r]=[[e,n]],void this.innerSize++;for(let s=0;s<i.length;s++)if(this.equalsFn(i[s][0],e))return void(i[s]=[e,n]);i.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return r.length===1?delete this.inner[n]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){Ks(this.inner,(n,r)=>{for(const[i,s]of r)e(i,s)})}isEmpty(){return GT(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const P4=new Ye(ne.comparator);function Wr(){return P4}const oC=new Ye(ne.comparator);function ml(...t){let e=oC;for(const n of t)e=e.insert(n.key,n);return e}function aC(t){let e=oC;return t.forEach((n,r)=>e=e.insert(n,r.overlayedDocument)),e}function Ts(){return Ol()}function lC(){return Ol()}function Ol(){return new Ca(t=>t.toString(),(t,e)=>t.isEqual(e))}const R4=new Ye(ne.comparator),N4=new Nt(ne.comparator);function we(...t){let e=N4;for(const n of t)e=e.add(n);return e}const O4=new Nt(Ae);function L4(){return O4}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uC(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Ph(e)?"-0":e}}function cC(t){return{integerValue:""+t}}function D4(t,e){return d4(e)?cC(e):uC(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class md{constructor(){this._=void 0}}function M4(t,e,n){return t instanceof Nh?function(i,s){const o={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return s&&Jg(s)&&(s=Zg(s)),s&&(o.fields.__previous_value__=s),{mapValue:o}}(n,e):t instanceof lu?dC(t,e):t instanceof uu?fC(t,e):function(i,s){const o=hC(i,s),a=rw(o)+rw(i.Pe);return dm(o)&&dm(i.Pe)?cC(a):uC(i.serializer,a)}(t,e)}function V4(t,e,n){return t instanceof lu?dC(t,e):t instanceof uu?fC(t,e):n}function hC(t,e){return t instanceof Oh?function(r){return dm(r)||function(s){return!!s&&"doubleValue"in s}(r)}(e)?e:{integerValue:0}:null}class Nh extends md{}class lu extends md{constructor(e){super(),this.elements=e}}function dC(t,e){const n=pC(e);for(const r of t.elements)n.some(i=>pr(i,r))||n.push(r);return{arrayValue:{values:n}}}class uu extends md{constructor(e){super(),this.elements=e}}function fC(t,e){let n=pC(e);for(const r of t.elements)n=n.filter(i=>!pr(i,r));return{arrayValue:{values:n}}}class Oh extends md{constructor(e,n){super(),this.serializer=e,this.Pe=n}}function rw(t){return lt(t.integerValue||t.doubleValue)}function pC(t){return ey(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}function U4(t,e){return t.field.isEqual(e.field)&&function(r,i){return r instanceof lu&&i instanceof lu||r instanceof uu&&i instanceof uu?ia(r.elements,i.elements,pr):r instanceof Oh&&i instanceof Oh?pr(r.Pe,i.Pe):r instanceof Nh&&i instanceof Nh}(t.transform,e.transform)}class $4{constructor(e,n){this.version=e,this.transformResults=n}}class hr{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new hr}static exists(e){return new hr(void 0,e)}static updateTime(e){return new hr(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Hc(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class gd{}function mC(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new yC(t.key,hr.none()):new Su(t.key,t.data,hr.none());{const n=t.data,r=rn.empty();let i=new Nt(Pt.comparator);for(let s of e.fields)if(!i.has(s)){let o=n.field(s);o===null&&s.length>1&&(s=s.popLast(),o=n.field(s)),o===null?r.delete(s):r.set(s,o),i=i.add(s)}return new ts(t.key,r,new mn(i.toArray()),hr.none())}}function F4(t,e,n){t instanceof Su?function(i,s,o){const a=i.value.clone(),l=sw(i.fieldTransforms,s,o.transformResults);a.setAll(l),s.convertToFoundDocument(o.version,a).setHasCommittedMutations()}(t,e,n):t instanceof ts?function(i,s,o){if(!Hc(i.precondition,s))return void s.convertToUnknownDocument(o.version);const a=sw(i.fieldTransforms,s,o.transformResults),l=s.data;l.setAll(gC(i)),l.setAll(a),s.convertToFoundDocument(o.version,l).setHasCommittedMutations()}(t,e,n):function(i,s,o){s.convertToNoDocument(o.version).setHasCommittedMutations()}(0,e,n)}function Ll(t,e,n,r){return t instanceof Su?function(s,o,a,l){if(!Hc(s.precondition,o))return a;const c=s.value.clone(),h=ow(s.fieldTransforms,l,o);return c.setAll(h),o.convertToFoundDocument(o.version,c).setHasLocalMutations(),null}(t,e,n,r):t instanceof ts?function(s,o,a,l){if(!Hc(s.precondition,o))return a;const c=ow(s.fieldTransforms,l,o),h=o.data;return h.setAll(gC(s)),h.setAll(c),o.convertToFoundDocument(o.version,h).setHasLocalMutations(),a===null?null:a.unionWith(s.fieldMask.fields).unionWith(s.fieldTransforms.map(f=>f.field))}(t,e,n,r):function(s,o,a){return Hc(s.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):a}(t,e,n)}function j4(t,e){let n=null;for(const r of t.fieldTransforms){const i=e.data.field(r.field),s=hC(r.transform,i||null);s!=null&&(n===null&&(n=rn.empty()),n.set(r.field,s))}return n||null}function iw(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(r,i){return r===void 0&&i===void 0||!(!r||!i)&&ia(r,i,(s,o)=>U4(s,o))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class Su extends gd{constructor(e,n,r,i=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}}class ts extends gd{constructor(e,n,r,i,s=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=i,this.fieldTransforms=s,this.type=1}getFieldMask(){return this.fieldMask}}function gC(t){const e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const r=t.data.field(n);e.set(n,r)}}),e}function sw(t,e,n){const r=new Map;De(t.length===n.length);for(let i=0;i<n.length;i++){const s=t[i],o=s.transform,a=e.data.field(s.field);r.set(s.field,V4(o,a,n[i]))}return r}function ow(t,e,n){const r=new Map;for(const i of t){const s=i.transform,o=n.data.field(i.field);r.set(i.field,M4(s,o,e))}return r}class yC extends gd{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class z4 extends gd{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class B4{constructor(e,n,r,i){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,n){const r=n.mutationResults;for(let i=0;i<this.mutations.length;i++){const s=this.mutations[i];s.key.isEqual(e.key)&&F4(s,e,r[i])}}applyToLocalView(e,n){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(n=Ll(r,e,n,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(n=Ll(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const r=lC();return this.mutations.forEach(i=>{const s=e.get(i.key),o=s.overlayedDocument;let a=this.applyToLocalView(o,s.mutatedFields);a=n.has(i.key)?null:a;const l=mC(o,a);l!==null&&r.set(i.key,l),o.isValidDocument()||o.convertToNoDocument(ue.min())}),r}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),we())}isEqual(e){return this.batchId===e.batchId&&ia(this.mutations,e.mutations,(n,r)=>iw(n,r))&&ia(this.baseMutations,e.baseMutations,(n,r)=>iw(n,r))}}class ry{constructor(e,n,r,i){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=i}static from(e,n,r){De(e.mutations.length===r.length);let i=function(){return R4}();const s=e.mutations;for(let o=0;o<s.length;o++)i=i.insert(s[o].key,r[o].version);return new ry(e,n,r,i)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class H4{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class W4{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var ot,be;function q4(t){switch(t){default:return le();case j.CANCELLED:case j.UNKNOWN:case j.DEADLINE_EXCEEDED:case j.RESOURCE_EXHAUSTED:case j.INTERNAL:case j.UNAVAILABLE:case j.UNAUTHENTICATED:return!1;case j.INVALID_ARGUMENT:case j.NOT_FOUND:case j.ALREADY_EXISTS:case j.PERMISSION_DENIED:case j.FAILED_PRECONDITION:case j.ABORTED:case j.OUT_OF_RANGE:case j.UNIMPLEMENTED:case j.DATA_LOSS:return!0}}function vC(t){if(t===void 0)return Hr("GRPC error has no .code"),j.UNKNOWN;switch(t){case ot.OK:return j.OK;case ot.CANCELLED:return j.CANCELLED;case ot.UNKNOWN:return j.UNKNOWN;case ot.DEADLINE_EXCEEDED:return j.DEADLINE_EXCEEDED;case ot.RESOURCE_EXHAUSTED:return j.RESOURCE_EXHAUSTED;case ot.INTERNAL:return j.INTERNAL;case ot.UNAVAILABLE:return j.UNAVAILABLE;case ot.UNAUTHENTICATED:return j.UNAUTHENTICATED;case ot.INVALID_ARGUMENT:return j.INVALID_ARGUMENT;case ot.NOT_FOUND:return j.NOT_FOUND;case ot.ALREADY_EXISTS:return j.ALREADY_EXISTS;case ot.PERMISSION_DENIED:return j.PERMISSION_DENIED;case ot.FAILED_PRECONDITION:return j.FAILED_PRECONDITION;case ot.ABORTED:return j.ABORTED;case ot.OUT_OF_RANGE:return j.OUT_OF_RANGE;case ot.UNIMPLEMENTED:return j.UNIMPLEMENTED;case ot.DATA_LOSS:return j.DATA_LOSS;default:return le()}}(be=ot||(ot={}))[be.OK=0]="OK",be[be.CANCELLED=1]="CANCELLED",be[be.UNKNOWN=2]="UNKNOWN",be[be.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",be[be.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",be[be.NOT_FOUND=5]="NOT_FOUND",be[be.ALREADY_EXISTS=6]="ALREADY_EXISTS",be[be.PERMISSION_DENIED=7]="PERMISSION_DENIED",be[be.UNAUTHENTICATED=16]="UNAUTHENTICATED",be[be.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",be[be.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",be[be.ABORTED=10]="ABORTED",be[be.OUT_OF_RANGE=11]="OUT_OF_RANGE",be[be.UNIMPLEMENTED=12]="UNIMPLEMENTED",be[be.INTERNAL=13]="INTERNAL",be[be.UNAVAILABLE=14]="UNAVAILABLE",be[be.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function G4(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const K4=new Ss([4294967295,4294967295],0);function aw(t){const e=G4().encode(t),n=new UT;return n.update(e),new Uint8Array(n.digest())}function lw(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),s=e.getUint32(12,!0);return[new Ss([n,r],0),new Ss([i,s],0)]}class iy{constructor(e,n,r){if(this.bitmap=e,this.padding=n,this.hashCount=r,n<0||n>=8)throw new gl(`Invalid padding: ${n}`);if(r<0)throw new gl(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new gl(`Invalid hash count: ${r}`);if(e.length===0&&n!==0)throw new gl(`Invalid padding when bitmap length is 0: ${n}`);this.Ie=8*e.length-n,this.Te=Ss.fromNumber(this.Ie)}Ee(e,n,r){let i=e.add(n.multiply(Ss.fromNumber(r)));return i.compare(K4)===1&&(i=new Ss([i.getBits(0),i.getBits(1)],0)),i.modulo(this.Te).toNumber()}de(e){return(this.bitmap[Math.floor(e/8)]&1<<e%8)!=0}mightContain(e){if(this.Ie===0)return!1;const n=aw(e),[r,i]=lw(n);for(let s=0;s<this.hashCount;s++){const o=this.Ee(r,i,s);if(!this.de(o))return!1}return!0}static create(e,n,r){const i=e%8==0?0:8-e%8,s=new Uint8Array(Math.ceil(e/8)),o=new iy(s,i,n);return r.forEach(a=>o.insert(a)),o}insert(e){if(this.Ie===0)return;const n=aw(e),[r,i]=lw(n);for(let s=0;s<this.hashCount;s++){const o=this.Ee(r,i,s);this.Ae(o)}}Ae(e){const n=Math.floor(e/8),r=e%8;this.bitmap[n]|=1<<r}}class gl extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yd{constructor(e,n,r,i,s){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=s}static createSynthesizedRemoteEventForCurrentChange(e,n,r){const i=new Map;return i.set(e,Au.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new yd(ue.min(),i,new Ye(Ae),Wr(),we())}}class Au{constructor(e,n,r,i,s){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=s}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new Au(r,n,we(),we(),we())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wc{constructor(e,n,r,i){this.Re=e,this.removedTargetIds=n,this.key=r,this.Ve=i}}class _C{constructor(e,n){this.targetId=e,this.me=n}}class wC{constructor(e,n,r=Ht.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=i}}class uw{constructor(){this.fe=0,this.ge=hw(),this.pe=Ht.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return this.fe!==0}get be(){return this.we}De(e){e.approximateByteSize()>0&&(this.we=!0,this.pe=e)}Ce(){let e=we(),n=we(),r=we();return this.ge.forEach((i,s)=>{switch(s){case 0:e=e.add(i);break;case 2:n=n.add(i);break;case 1:r=r.add(i);break;default:le()}}),new Au(this.pe,this.ye,e,n,r)}ve(){this.we=!1,this.ge=hw()}Fe(e,n){this.we=!0,this.ge=this.ge.insert(e,n)}Me(e){this.we=!0,this.ge=this.ge.remove(e)}xe(){this.fe+=1}Oe(){this.fe-=1,De(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}}class Q4{constructor(e){this.Le=e,this.Be=new Map,this.ke=Wr(),this.qe=cw(),this.Qe=new Ye(Ae)}Ke(e){for(const n of e.Re)e.Ve&&e.Ve.isFoundDocument()?this.$e(n,e.Ve):this.Ue(n,e.key,e.Ve);for(const n of e.removedTargetIds)this.Ue(n,e.key,e.Ve)}We(e){this.forEachTarget(e,n=>{const r=this.Ge(n);switch(e.state){case 0:this.ze(n)&&r.De(e.resumeToken);break;case 1:r.Oe(),r.Se||r.ve(),r.De(e.resumeToken);break;case 2:r.Oe(),r.Se||this.removeTarget(n);break;case 3:this.ze(n)&&(r.Ne(),r.De(e.resumeToken));break;case 4:this.ze(n)&&(this.je(n),r.De(e.resumeToken));break;default:le()}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.Be.forEach((r,i)=>{this.ze(i)&&n(i)})}He(e){const n=e.targetId,r=e.me.count,i=this.Je(n);if(i){const s=i.target;if(pm(s))if(r===0){const o=new ne(s.path);this.Ue(n,o,zt.newNoDocument(o,ue.min()))}else De(r===1);else{const o=this.Ye(n);if(o!==r){const a=this.Ze(e),l=a?this.Xe(a,e,o):1;if(l!==0){this.je(n);const c=l===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Qe=this.Qe.insert(n,c)}}}}}Ze(e){const n=e.me.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:r="",padding:i=0},hashCount:s=0}=n;let o,a;try{o=zs(r).toUint8Array()}catch(l){if(l instanceof KT)return ra("Decoding the base64 bloom filter in existence filter failed ("+l.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw l}try{a=new iy(o,i,s)}catch(l){return ra(l instanceof gl?"BloomFilter error: ":"Applying bloom filter failed: ",l),null}return a.Ie===0?null:a}Xe(e,n,r){return n.me.count===r-this.nt(e,n.targetId)?0:2}nt(e,n){const r=this.Le.getRemoteKeysForTarget(n);let i=0;return r.forEach(s=>{const o=this.Le.tt(),a=`projects/${o.projectId}/databases/${o.database}/documents/${s.path.canonicalString()}`;e.mightContain(a)||(this.Ue(n,s,null),i++)}),i}rt(e){const n=new Map;this.Be.forEach((s,o)=>{const a=this.Je(o);if(a){if(s.current&&pm(a.target)){const l=new ne(a.target.path);this.ke.get(l)!==null||this.it(o,l)||this.Ue(o,l,zt.newNoDocument(l,e))}s.be&&(n.set(o,s.Ce()),s.ve())}});let r=we();this.qe.forEach((s,o)=>{let a=!0;o.forEachWhile(l=>{const c=this.Je(l);return!c||c.purpose==="TargetPurposeLimboResolution"||(a=!1,!1)}),a&&(r=r.add(s))}),this.ke.forEach((s,o)=>o.setReadTime(e));const i=new yd(e,n,this.Qe,this.ke,r);return this.ke=Wr(),this.qe=cw(),this.Qe=new Ye(Ae),i}$e(e,n){if(!this.ze(e))return;const r=this.it(e,n.key)?2:0;this.Ge(e).Fe(n.key,r),this.ke=this.ke.insert(n.key,n),this.qe=this.qe.insert(n.key,this.st(n.key).add(e))}Ue(e,n,r){if(!this.ze(e))return;const i=this.Ge(e);this.it(e,n)?i.Fe(n,1):i.Me(n),this.qe=this.qe.insert(n,this.st(n).delete(e)),r&&(this.ke=this.ke.insert(n,r))}removeTarget(e){this.Be.delete(e)}Ye(e){const n=this.Ge(e).Ce();return this.Le.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}xe(e){this.Ge(e).xe()}Ge(e){let n=this.Be.get(e);return n||(n=new uw,this.Be.set(e,n)),n}st(e){let n=this.qe.get(e);return n||(n=new Nt(Ae),this.qe=this.qe.insert(e,n)),n}ze(e){const n=this.Je(e)!==null;return n||J("WatchChangeAggregator","Detected inactive target",e),n}Je(e){const n=this.Be.get(e);return n&&n.Se?null:this.Le.ot(e)}je(e){this.Be.set(e,new uw),this.Le.getRemoteKeysForTarget(e).forEach(n=>{this.Ue(e,n,null)})}it(e,n){return this.Le.getRemoteKeysForTarget(e).has(n)}}function cw(){return new Ye(ne.comparator)}function hw(){return new Ye(ne.comparator)}const X4={asc:"ASCENDING",desc:"DESCENDING"},Y4={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},J4={and:"AND",or:"OR"};class Z4{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function ym(t,e){return t.useProto3Json||dd(e)?e:{value:e}}function Lh(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function EC(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function eD(t,e){return Lh(t,e.toTimestamp())}function dr(t){return De(!!t),ue.fromTimestamp(function(n){const r=Bi(n);return new mt(r.seconds,r.nanos)}(t))}function sy(t,e){return vm(t,e).canonicalString()}function vm(t,e){const n=function(i){return new Fe(["projects",i.projectId,"databases",i.database])}(t).child("documents");return e===void 0?n:n.child(e)}function bC(t){const e=Fe.fromString(t);return De(AC(e)),e}function _m(t,e){return sy(t.databaseId,e.path)}function Hf(t,e){const n=bC(e);if(n.get(1)!==t.databaseId.projectId)throw new Y(j.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new Y(j.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new ne(CC(n))}function TC(t,e){return sy(t.databaseId,e)}function tD(t){const e=bC(t);return e.length===4?Fe.emptyPath():CC(e)}function wm(t){return new Fe(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function CC(t){return De(t.length>4&&t.get(4)==="documents"),t.popFirst(5)}function dw(t,e,n){return{name:_m(t,e),fields:n.value.mapValue.fields}}function nD(t,e){let n;if("targetChange"in e){e.targetChange;const r=function(c){return c==="NO_CHANGE"?0:c==="ADD"?1:c==="REMOVE"?2:c==="CURRENT"?3:c==="RESET"?4:le()}(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],s=function(c,h){return c.useProto3Json?(De(h===void 0||typeof h=="string"),Ht.fromBase64String(h||"")):(De(h===void 0||h instanceof Buffer||h instanceof Uint8Array),Ht.fromUint8Array(h||new Uint8Array))}(t,e.targetChange.resumeToken),o=e.targetChange.cause,a=o&&function(c){const h=c.code===void 0?j.UNKNOWN:vC(c.code);return new Y(h,c.message||"")}(o);n=new wC(r,i,s,a||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const i=Hf(t,r.document.name),s=dr(r.document.updateTime),o=r.document.createTime?dr(r.document.createTime):ue.min(),a=new rn({mapValue:{fields:r.document.fields}}),l=zt.newFoundDocument(i,s,o,a),c=r.targetIds||[],h=r.removedTargetIds||[];n=new Wc(c,h,l.key,l)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const i=Hf(t,r.document),s=r.readTime?dr(r.readTime):ue.min(),o=zt.newNoDocument(i,s),a=r.removedTargetIds||[];n=new Wc([],a,o.key,o)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const i=Hf(t,r.document),s=r.removedTargetIds||[];n=new Wc([],s,i,null)}else{if(!("filter"in e))return le();{e.filter;const r=e.filter;r.targetId;const{count:i=0,unchangedNames:s}=r,o=new W4(i,s),a=r.targetId;n=new _C(a,o)}}return n}function rD(t,e){let n;if(e instanceof Su)n={update:dw(t,e.key,e.value)};else if(e instanceof yC)n={delete:_m(t,e.key)};else if(e instanceof ts)n={update:dw(t,e.key,e.data),updateMask:dD(e.fieldMask)};else{if(!(e instanceof z4))return le();n={verify:_m(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(r=>function(s,o){const a=o.transform;if(a instanceof Nh)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(a instanceof lu)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:a.elements}};if(a instanceof uu)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:a.elements}};if(a instanceof Oh)return{fieldPath:o.field.canonicalString(),increment:a.Pe};throw le()}(0,r))),e.precondition.isNone||(n.currentDocument=function(i,s){return s.updateTime!==void 0?{updateTime:eD(i,s.updateTime)}:s.exists!==void 0?{exists:s.exists}:le()}(t,e.precondition)),n}function iD(t,e){return t&&t.length>0?(De(e!==void 0),t.map(n=>function(i,s){let o=i.updateTime?dr(i.updateTime):dr(s);return o.isEqual(ue.min())&&(o=dr(s)),new $4(o,i.transformResults||[])}(n,e))):[]}function sD(t,e){return{documents:[TC(t,e.path)]}}function oD(t,e){const n={structuredQuery:{}},r=e.path;let i;e.collectionGroup!==null?(i=r,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=TC(t,i);const s=function(c){if(c.length!==0)return SC(Yn.create(c,"and"))}(e.filters);s&&(n.structuredQuery.where=s);const o=function(c){if(c.length!==0)return c.map(h=>function(p){return{field:vo(p.field),direction:uD(p.dir)}}(h))}(e.orderBy);o&&(n.structuredQuery.orderBy=o);const a=ym(t,e.limit);return a!==null&&(n.structuredQuery.limit=a),e.startAt&&(n.structuredQuery.startAt=function(c){return{before:c.inclusive,values:c.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(c){return{before:!c.inclusive,values:c.position}}(e.endAt)),{_t:n,parent:i}}function aD(t){let e=tD(t.parent);const n=t.structuredQuery,r=n.from?n.from.length:0;let i=null;if(r>0){De(r===1);const h=n.from[0];h.allDescendants?i=h.collectionId:e=e.child(h.collectionId)}let s=[];n.where&&(s=function(f){const p=IC(f);return p instanceof Yn&&JT(p)?p.getFilters():[p]}(n.where));let o=[];n.orderBy&&(o=function(f){return f.map(p=>function(E){return new au(_o(E.field),function(R){switch(R){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(E.direction))}(p))}(n.orderBy));let a=null;n.limit&&(a=function(f){let p;return p=typeof f=="object"?f.value:f,dd(p)?null:p}(n.limit));let l=null;n.startAt&&(l=function(f){const p=!!f.before,_=f.values||[];return new Rh(_,p)}(n.startAt));let c=null;return n.endAt&&(c=function(f){const p=!f.before,_=f.values||[];return new Rh(_,p)}(n.endAt)),S4(e,i,o,s,a,"F",l,c)}function lD(t,e){const n=function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return le()}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function IC(t){return t.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const r=_o(n.unaryFilter.field);return ct.create(r,"==",{doubleValue:NaN});case"IS_NULL":const i=_o(n.unaryFilter.field);return ct.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const s=_o(n.unaryFilter.field);return ct.create(s,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const o=_o(n.unaryFilter.field);return ct.create(o,"!=",{nullValue:"NULL_VALUE"});default:return le()}}(t):t.fieldFilter!==void 0?function(n){return ct.create(_o(n.fieldFilter.field),function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return le()}}(n.fieldFilter.op),n.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(n){return Yn.create(n.compositeFilter.filters.map(r=>IC(r)),function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return le()}}(n.compositeFilter.op))}(t):le()}function uD(t){return X4[t]}function cD(t){return Y4[t]}function hD(t){return J4[t]}function vo(t){return{fieldPath:t.canonicalString()}}function _o(t){return Pt.fromServerFormat(t.fieldPath)}function SC(t){return t instanceof ct?function(n){if(n.op==="=="){if(J0(n.value))return{unaryFilter:{field:vo(n.field),op:"IS_NAN"}};if(Y0(n.value))return{unaryFilter:{field:vo(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(J0(n.value))return{unaryFilter:{field:vo(n.field),op:"IS_NOT_NAN"}};if(Y0(n.value))return{unaryFilter:{field:vo(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:vo(n.field),op:cD(n.op),value:n.value}}}(t):t instanceof Yn?function(n){const r=n.getFilters().map(i=>SC(i));return r.length===1?r[0]:{compositeFilter:{op:hD(n.op),filters:r}}}(t):le()}function dD(t){const e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function AC(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ei{constructor(e,n,r,i,s=ue.min(),o=ue.min(),a=Ht.EMPTY_BYTE_STRING,l=null){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=s,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=a,this.expectedCount=l}withSequenceNumber(e){return new Ei(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new Ei(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Ei(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Ei(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fD{constructor(e){this.ct=e}}function pD(t){const e=aD({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?gm(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mD{constructor(){this._n=new gD}addToCollectionParentIndex(e,n){return this._n.add(n),B.resolve()}getCollectionParents(e,n){return B.resolve(this._n.getEntries(n))}addFieldIndex(e,n){return B.resolve()}deleteFieldIndex(e,n){return B.resolve()}deleteAllFieldIndexes(e){return B.resolve()}createTargetIndexes(e,n){return B.resolve()}getDocumentsMatchingTarget(e,n){return B.resolve(null)}getIndexType(e,n){return B.resolve(0)}getFieldIndexes(e,n){return B.resolve([])}getNextCollectionGroupToUpdate(e){return B.resolve(null)}getMinOffset(e,n){return B.resolve(zi.min())}getMinOffsetFromCollectionGroup(e,n){return B.resolve(zi.min())}updateCollectionGroup(e,n,r){return B.resolve()}updateIndexEntries(e,n){return B.resolve()}}class gD{constructor(){this.index={}}add(e){const n=e.lastSegment(),r=e.popLast(),i=this.index[n]||new Nt(Fe.comparator),s=!i.has(r);return this.index[n]=i.add(r),s}has(e){const n=e.lastSegment(),r=e.popLast(),i=this.index[n];return i&&i.has(r)}getEntries(e){return(this.index[e]||new Nt(Fe.comparator)).toArray()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aa{constructor(e){this.On=e}next(){return this.On+=2,this.On}static Nn(){return new aa(0)}static Ln(){return new aa(-1)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yD{constructor(){this.changes=new Ca(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,zt.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const r=this.changes.get(n);return r!==void 0?B.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vD{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _D{constructor(e,n,r,i){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next(i=>(r=i,this.remoteDocumentCache.getEntry(e,n))).next(i=>(r!==null&&Ll(r.mutation,i,mn.empty(),mt.now()),i))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.getLocalViewOfDocuments(e,r,we()).next(()=>r))}getLocalViewOfDocuments(e,n,r=we()){const i=Ts();return this.populateOverlays(e,i,n).next(()=>this.computeViews(e,n,i,r).next(s=>{let o=ml();return s.forEach((a,l)=>{o=o.insert(a,l.overlayedDocument)}),o}))}getOverlayedDocuments(e,n){const r=Ts();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,we()))}populateOverlays(e,n,r){const i=[];return r.forEach(s=>{n.has(s)||i.push(s)}),this.documentOverlayCache.getOverlays(e,i).next(s=>{s.forEach((o,a)=>{n.set(o,a)})})}computeViews(e,n,r,i){let s=Wr();const o=Ol(),a=function(){return Ol()}();return n.forEach((l,c)=>{const h=r.get(c.key);i.has(c.key)&&(h===void 0||h.mutation instanceof ts)?s=s.insert(c.key,c):h!==void 0?(o.set(c.key,h.mutation.getFieldMask()),Ll(h.mutation,c,h.mutation.getFieldMask(),mt.now())):o.set(c.key,mn.empty())}),this.recalculateAndSaveOverlays(e,s).next(l=>(l.forEach((c,h)=>o.set(c,h)),n.forEach((c,h)=>{var f;return a.set(c,new vD(h,(f=o.get(c))!==null&&f!==void 0?f:null))}),a))}recalculateAndSaveOverlays(e,n){const r=Ol();let i=new Ye((o,a)=>o-a),s=we();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(o=>{for(const a of o)a.keys().forEach(l=>{const c=n.get(l);if(c===null)return;let h=r.get(l)||mn.empty();h=a.applyToLocalView(c,h),r.set(l,h);const f=(i.get(a.batchId)||we()).add(l);i=i.insert(a.batchId,f)})}).next(()=>{const o=[],a=i.getReverseIterator();for(;a.hasNext();){const l=a.getNext(),c=l.key,h=l.value,f=lC();h.forEach(p=>{if(!s.has(p)){const _=mC(n.get(p),r.get(p));_!==null&&f.set(p,_),s=s.add(p)}}),o.push(this.documentOverlayCache.saveOverlays(e,c,f))}return B.waitFor(o)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,n,r,i){return function(o){return ne.isDocumentKey(o.path)&&o.collectionGroup===null&&o.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):rC(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r,i):this.getDocumentsMatchingCollectionQuery(e,n,r,i)}getNextDocuments(e,n,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,i).next(s=>{const o=i-s.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,i-s.size):B.resolve(Ts());let a=-1,l=s;return o.next(c=>B.forEach(c,(h,f)=>(a<f.largestBatchId&&(a=f.largestBatchId),s.get(h)?B.resolve():this.remoteDocumentCache.getEntry(e,h).next(p=>{l=l.insert(h,p)}))).next(()=>this.populateOverlays(e,c,s)).next(()=>this.computeViews(e,l,c,we())).next(h=>({batchId:a,changes:aC(h)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new ne(n)).next(r=>{let i=ml();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,n,r,i){const s=n.collectionGroup;let o=ml();return this.indexManager.getCollectionParents(e,s).next(a=>B.forEach(a,l=>{const c=function(f,p){return new Ta(p,null,f.explicitOrderBy.slice(),f.filters.slice(),f.limit,f.limitType,f.startAt,f.endAt)}(n,l.child(s));return this.getDocumentsMatchingCollectionQuery(e,c,r,i).next(h=>{h.forEach((f,p)=>{o=o.insert(f,p)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(e,n,r,i){let s;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next(o=>(s=o,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,s,i))).next(o=>{s.forEach((l,c)=>{const h=c.getKey();o.get(h)===null&&(o=o.insert(h,zt.newInvalidDocument(h)))});let a=ml();return o.forEach((l,c)=>{const h=s.get(l);h!==void 0&&Ll(h.mutation,c,mn.empty(),mt.now()),pd(n,c)&&(a=a.insert(l,c))}),a})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wD{constructor(e){this.serializer=e,this.cr=new Map,this.lr=new Map}getBundleMetadata(e,n){return B.resolve(this.cr.get(n))}saveBundleMetadata(e,n){return this.cr.set(n.id,function(i){return{id:i.id,version:i.version,createTime:dr(i.createTime)}}(n)),B.resolve()}getNamedQuery(e,n){return B.resolve(this.lr.get(n))}saveNamedQuery(e,n){return this.lr.set(n.name,function(i){return{name:i.name,query:pD(i.bundledQuery),readTime:dr(i.readTime)}}(n)),B.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ED{constructor(){this.overlays=new Ye(ne.comparator),this.hr=new Map}getOverlay(e,n){return B.resolve(this.overlays.get(n))}getOverlays(e,n){const r=Ts();return B.forEach(n,i=>this.getOverlay(e,i).next(s=>{s!==null&&r.set(i,s)})).next(()=>r)}saveOverlays(e,n,r){return r.forEach((i,s)=>{this.ht(e,n,s)}),B.resolve()}removeOverlaysForBatchId(e,n,r){const i=this.hr.get(r);return i!==void 0&&(i.forEach(s=>this.overlays=this.overlays.remove(s)),this.hr.delete(r)),B.resolve()}getOverlaysForCollection(e,n,r){const i=Ts(),s=n.length+1,o=new ne(n.child("")),a=this.overlays.getIteratorFrom(o);for(;a.hasNext();){const l=a.getNext().value,c=l.getKey();if(!n.isPrefixOf(c.path))break;c.path.length===s&&l.largestBatchId>r&&i.set(l.getKey(),l)}return B.resolve(i)}getOverlaysForCollectionGroup(e,n,r,i){let s=new Ye((c,h)=>c-h);const o=this.overlays.getIterator();for(;o.hasNext();){const c=o.getNext().value;if(c.getKey().getCollectionGroup()===n&&c.largestBatchId>r){let h=s.get(c.largestBatchId);h===null&&(h=Ts(),s=s.insert(c.largestBatchId,h)),h.set(c.getKey(),c)}}const a=Ts(),l=s.getIterator();for(;l.hasNext()&&(l.getNext().value.forEach((c,h)=>a.set(c,h)),!(a.size()>=i)););return B.resolve(a)}ht(e,n,r){const i=this.overlays.get(r.key);if(i!==null){const o=this.hr.get(i.largestBatchId).delete(r.key);this.hr.set(i.largestBatchId,o)}this.overlays=this.overlays.insert(r.key,new H4(n,r));let s=this.hr.get(n);s===void 0&&(s=we(),this.hr.set(n,s)),this.hr.set(n,s.add(r.key))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oy{constructor(){this.Pr=new Nt(gt.Ir),this.Tr=new Nt(gt.Er)}isEmpty(){return this.Pr.isEmpty()}addReference(e,n){const r=new gt(e,n);this.Pr=this.Pr.add(r),this.Tr=this.Tr.add(r)}dr(e,n){e.forEach(r=>this.addReference(r,n))}removeReference(e,n){this.Ar(new gt(e,n))}Rr(e,n){e.forEach(r=>this.removeReference(r,n))}Vr(e){const n=new ne(new Fe([])),r=new gt(n,e),i=new gt(n,e+1),s=[];return this.Tr.forEachInRange([r,i],o=>{this.Ar(o),s.push(o.key)}),s}mr(){this.Pr.forEach(e=>this.Ar(e))}Ar(e){this.Pr=this.Pr.delete(e),this.Tr=this.Tr.delete(e)}gr(e){const n=new ne(new Fe([])),r=new gt(n,e),i=new gt(n,e+1);let s=we();return this.Tr.forEachInRange([r,i],o=>{s=s.add(o.key)}),s}containsKey(e){const n=new gt(e,0),r=this.Pr.firstAfterOrEqual(n);return r!==null&&e.isEqual(r.key)}}class gt{constructor(e,n){this.key=e,this.pr=n}static Ir(e,n){return ne.comparator(e.key,n.key)||Ae(e.pr,n.pr)}static Er(e,n){return Ae(e.pr,n.pr)||ne.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bD{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.yr=1,this.wr=new Nt(gt.Ir)}checkEmpty(e){return B.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,r,i){const s=this.yr;this.yr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const o=new B4(s,n,r,i);this.mutationQueue.push(o);for(const a of i)this.wr=this.wr.add(new gt(a.key,s)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return B.resolve(o)}lookupMutationBatch(e,n){return B.resolve(this.Sr(n))}getNextMutationBatchAfterBatchId(e,n){const r=n+1,i=this.br(r),s=i<0?0:i;return B.resolve(this.mutationQueue.length>s?this.mutationQueue[s]:null)}getHighestUnacknowledgedBatchId(){return B.resolve(this.mutationQueue.length===0?-1:this.yr-1)}getAllMutationBatches(e){return B.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const r=new gt(n,0),i=new gt(n,Number.POSITIVE_INFINITY),s=[];return this.wr.forEachInRange([r,i],o=>{const a=this.Sr(o.pr);s.push(a)}),B.resolve(s)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new Nt(Ae);return n.forEach(i=>{const s=new gt(i,0),o=new gt(i,Number.POSITIVE_INFINITY);this.wr.forEachInRange([s,o],a=>{r=r.add(a.pr)})}),B.resolve(this.Dr(r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,i=r.length+1;let s=r;ne.isDocumentKey(s)||(s=s.child(""));const o=new gt(new ne(s),0);let a=new Nt(Ae);return this.wr.forEachWhile(l=>{const c=l.key.path;return!!r.isPrefixOf(c)&&(c.length===i&&(a=a.add(l.pr)),!0)},o),B.resolve(this.Dr(a))}Dr(e){const n=[];return e.forEach(r=>{const i=this.Sr(r);i!==null&&n.push(i)}),n}removeMutationBatch(e,n){De(this.Cr(n.batchId,"removed")===0),this.mutationQueue.shift();let r=this.wr;return B.forEach(n.mutations,i=>{const s=new gt(i.key,n.batchId);return r=r.delete(s),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.wr=r})}Mn(e){}containsKey(e,n){const r=new gt(n,0),i=this.wr.firstAfterOrEqual(r);return B.resolve(n.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,B.resolve()}Cr(e,n){return this.br(e)}br(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Sr(e){const n=this.br(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TD{constructor(e){this.vr=e,this.docs=function(){return new Ye(ne.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const r=n.key,i=this.docs.get(r),s=i?i.size:0,o=this.vr(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:o}),this.size+=o-s,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const r=this.docs.get(n);return B.resolve(r?r.document.mutableCopy():zt.newInvalidDocument(n))}getEntries(e,n){let r=Wr();return n.forEach(i=>{const s=this.docs.get(i);r=r.insert(i,s?s.document.mutableCopy():zt.newInvalidDocument(i))}),B.resolve(r)}getDocumentsMatchingQuery(e,n,r,i){let s=Wr();const o=n.path,a=new ne(o.child("")),l=this.docs.getIteratorFrom(a);for(;l.hasNext();){const{key:c,value:{document:h}}=l.getNext();if(!o.isPrefixOf(c.path))break;c.path.length>o.length+1||l4(a4(h),r)<=0||(i.has(h.key)||pd(n,h))&&(s=s.insert(h.key,h.mutableCopy()))}return B.resolve(s)}getAllFromCollectionGroup(e,n,r,i){le()}Fr(e,n){return B.forEach(this.docs,r=>n(r))}newChangeBuffer(e){return new CD(this)}getSize(e){return B.resolve(this.size)}}class CD extends yD{constructor(e){super(),this.ar=e}applyChanges(e){const n=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?n.push(this.ar.addEntry(e,i)):this.ar.removeEntry(r)}),B.waitFor(n)}getFromCache(e,n){return this.ar.getEntry(e,n)}getAllFromCache(e,n){return this.ar.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ID{constructor(e){this.persistence=e,this.Mr=new Ca(n=>ty(n),ny),this.lastRemoteSnapshotVersion=ue.min(),this.highestTargetId=0,this.Or=0,this.Nr=new oy,this.targetCount=0,this.Lr=aa.Nn()}forEachTarget(e,n){return this.Mr.forEach((r,i)=>n(i)),B.resolve()}getLastRemoteSnapshotVersion(e){return B.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return B.resolve(this.Or)}allocateTargetId(e){return this.highestTargetId=this.Lr.next(),B.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.Or&&(this.Or=n),B.resolve()}qn(e){this.Mr.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.Lr=new aa(n),this.highestTargetId=n),e.sequenceNumber>this.Or&&(this.Or=e.sequenceNumber)}addTargetData(e,n){return this.qn(n),this.targetCount+=1,B.resolve()}updateTargetData(e,n){return this.qn(n),B.resolve()}removeTargetData(e,n){return this.Mr.delete(n.target),this.Nr.Vr(n.targetId),this.targetCount-=1,B.resolve()}removeTargets(e,n,r){let i=0;const s=[];return this.Mr.forEach((o,a)=>{a.sequenceNumber<=n&&r.get(a.targetId)===null&&(this.Mr.delete(o),s.push(this.removeMatchingKeysForTargetId(e,a.targetId)),i++)}),B.waitFor(s).next(()=>i)}getTargetCount(e){return B.resolve(this.targetCount)}getTargetData(e,n){const r=this.Mr.get(n)||null;return B.resolve(r)}addMatchingKeys(e,n,r){return this.Nr.dr(n,r),B.resolve()}removeMatchingKeys(e,n,r){this.Nr.Rr(n,r);const i=this.persistence.referenceDelegate,s=[];return i&&n.forEach(o=>{s.push(i.markPotentiallyOrphaned(e,o))}),B.waitFor(s)}removeMatchingKeysForTargetId(e,n){return this.Nr.Vr(n),B.resolve()}getMatchingKeysForTargetId(e,n){const r=this.Nr.gr(n);return B.resolve(r)}containsKey(e,n){return B.resolve(this.Nr.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SD{constructor(e,n){this.Br={},this.overlays={},this.kr=new Yg(0),this.qr=!1,this.qr=!0,this.referenceDelegate=e(this),this.Qr=new ID(this),this.indexManager=new mD,this.remoteDocumentCache=function(i){return new TD(i)}(r=>this.referenceDelegate.Kr(r)),this.serializer=new fD(n),this.$r=new wD(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.qr=!1,Promise.resolve()}get started(){return this.qr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new ED,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this.Br[e.toKey()];return r||(r=new bD(n,this.referenceDelegate),this.Br[e.toKey()]=r),r}getTargetCache(){return this.Qr}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.$r}runTransaction(e,n,r){J("MemoryPersistence","Starting transaction:",e);const i=new AD(this.kr.next());return this.referenceDelegate.Ur(),r(i).next(s=>this.referenceDelegate.Wr(i).next(()=>s)).toPromise().then(s=>(i.raiseOnCommittedEvent(),s))}Gr(e,n){return B.or(Object.values(this.Br).map(r=>()=>r.containsKey(e,n)))}}class AD extends c4{constructor(e){super(),this.currentSequenceNumber=e}}class ay{constructor(e){this.persistence=e,this.zr=new oy,this.jr=null}static Hr(e){return new ay(e)}get Jr(){if(this.jr)return this.jr;throw le()}addReference(e,n,r){return this.zr.addReference(r,n),this.Jr.delete(r.toString()),B.resolve()}removeReference(e,n,r){return this.zr.removeReference(r,n),this.Jr.add(r.toString()),B.resolve()}markPotentiallyOrphaned(e,n){return this.Jr.add(n.toString()),B.resolve()}removeTarget(e,n){this.zr.Vr(n.targetId).forEach(i=>this.Jr.add(i.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next(i=>{i.forEach(s=>this.Jr.add(s.toString()))}).next(()=>r.removeTargetData(e,n))}Ur(){this.jr=new Set}Wr(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return B.forEach(this.Jr,r=>{const i=ne.fromPath(r);return this.Yr(e,i).next(s=>{s||n.removeEntry(i,ue.min())})}).next(()=>(this.jr=null,n.apply(e)))}updateLimboDocument(e,n){return this.Yr(e,n).next(r=>{r?this.Jr.delete(n.toString()):this.Jr.add(n.toString())})}Kr(e){return 0}Yr(e,n){return B.or([()=>B.resolve(this.zr.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Gr(e,n)])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ly{constructor(e,n,r,i){this.targetId=e,this.fromCache=n,this.qi=r,this.Qi=i}static Ki(e,n){let r=we(),i=we();for(const s of n.docChanges)switch(s.type){case 0:r=r.add(s.doc.key);break;case 1:i=i.add(s.doc.key)}return new ly(e,n.fromCache,r,i)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xD{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kD{constructor(){this.$i=!1,this.Ui=!1,this.Wi=100,this.Gi=function(){return _R()?8:h4(Lt())>0?6:4}()}initialize(e,n){this.zi=e,this.indexManager=n,this.$i=!0}getDocumentsMatchingQuery(e,n,r,i){const s={result:null};return this.ji(e,n).next(o=>{s.result=o}).next(()=>{if(!s.result)return this.Hi(e,n,i,r).next(o=>{s.result=o})}).next(()=>{if(s.result)return;const o=new xD;return this.Ji(e,n,o).next(a=>{if(s.result=a,this.Ui)return this.Yi(e,n,o,a.size)})}).next(()=>s.result)}Yi(e,n,r,i){return r.documentReadCount<this.Wi?(rl()<=Ee.DEBUG&&J("QueryEngine","SDK will not create cache indexes for query:",yo(n),"since it only creates cache indexes for collection contains","more than or equal to",this.Wi,"documents"),B.resolve()):(rl()<=Ee.DEBUG&&J("QueryEngine","Query:",yo(n),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.Gi*i?(rl()<=Ee.DEBUG&&J("QueryEngine","The SDK decides to create cache indexes for query:",yo(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,cr(n))):B.resolve())}ji(e,n){if(nw(n))return B.resolve(null);let r=cr(n);return this.indexManager.getIndexType(e,r).next(i=>i===0?null:(n.limit!==null&&i===1&&(n=gm(n,null,"F"),r=cr(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next(s=>{const o=we(...s);return this.zi.getDocuments(e,o).next(a=>this.indexManager.getMinOffset(e,r).next(l=>{const c=this.Zi(n,a);return this.Xi(n,c,o,l.readTime)?this.ji(e,gm(n,null,"F")):this.es(e,c,n,l)}))})))}Hi(e,n,r,i){return nw(n)||i.isEqual(ue.min())?B.resolve(null):this.zi.getDocuments(e,r).next(s=>{const o=this.Zi(n,s);return this.Xi(n,o,r,i)?B.resolve(null):(rl()<=Ee.DEBUG&&J("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),yo(n)),this.es(e,o,n,o4(i,-1)).next(a=>a))})}Zi(e,n){let r=new Nt(sC(e));return n.forEach((i,s)=>{pd(e,s)&&(r=r.add(s))}),r}Xi(e,n,r,i){if(e.limit===null)return!1;if(r.size!==n.size)return!0;const s=e.limitType==="F"?n.last():n.first();return!!s&&(s.hasPendingWrites||s.version.compareTo(i)>0)}Ji(e,n,r){return rl()<=Ee.DEBUG&&J("QueryEngine","Using full collection scan to execute query:",yo(n)),this.zi.getDocumentsMatchingQuery(e,n,zi.min(),r)}es(e,n,r,i){return this.zi.getDocumentsMatchingQuery(e,r,i).next(s=>(n.forEach(o=>{s=s.insert(o.key,o)}),s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PD{constructor(e,n,r,i){this.persistence=e,this.ts=n,this.serializer=i,this.ns=new Ye(Ae),this.rs=new Ca(s=>ty(s),ny),this.ss=new Map,this.os=e.getRemoteDocumentCache(),this.Qr=e.getTargetCache(),this.$r=e.getBundleCache(),this._s(r)}_s(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new _D(this.os,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.os.setIndexManager(this.indexManager),this.ts.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.ns))}}function RD(t,e,n,r){return new PD(t,e,n,r)}async function xC(t,e){const n=ce(t);return await n.persistence.runTransaction("Handle user change","readonly",r=>{let i;return n.mutationQueue.getAllMutationBatches(r).next(s=>(i=s,n._s(e),n.mutationQueue.getAllMutationBatches(r))).next(s=>{const o=[],a=[];let l=we();for(const c of i){o.push(c.batchId);for(const h of c.mutations)l=l.add(h.key)}for(const c of s){a.push(c.batchId);for(const h of c.mutations)l=l.add(h.key)}return n.localDocuments.getDocuments(r,l).next(c=>({us:c,removedBatchIds:o,addedBatchIds:a}))})})}function ND(t,e){const n=ce(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const i=e.batch.keys(),s=n.os.newChangeBuffer({trackRemovals:!0});return function(a,l,c,h){const f=c.batch,p=f.keys();let _=B.resolve();return p.forEach(E=>{_=_.next(()=>h.getEntry(l,E)).next(I=>{const R=c.docVersions.get(E);De(R!==null),I.version.compareTo(R)<0&&(f.applyToRemoteDocument(I,c),I.isValidDocument()&&(I.setReadTime(c.commitVersion),h.addEntry(I)))})}),_.next(()=>a.mutationQueue.removeMutationBatch(l,f))}(n,r,e,s).next(()=>s.apply(r)).next(()=>n.mutationQueue.performConsistencyCheck(r)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(a){let l=we();for(let c=0;c<a.mutationResults.length;++c)a.mutationResults[c].transformResults.length>0&&(l=l.add(a.batch.mutations[c].key));return l}(e))).next(()=>n.localDocuments.getDocuments(r,i))})}function kC(t){const e=ce(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.Qr.getLastRemoteSnapshotVersion(n))}function OD(t,e){const n=ce(t),r=e.snapshotVersion;let i=n.ns;return n.persistence.runTransaction("Apply remote event","readwrite-primary",s=>{const o=n.os.newChangeBuffer({trackRemovals:!0});i=n.ns;const a=[];e.targetChanges.forEach((h,f)=>{const p=i.get(f);if(!p)return;a.push(n.Qr.removeMatchingKeys(s,h.removedDocuments,f).next(()=>n.Qr.addMatchingKeys(s,h.addedDocuments,f)));let _=p.withSequenceNumber(s.currentSequenceNumber);e.targetMismatches.get(f)!==null?_=_.withResumeToken(Ht.EMPTY_BYTE_STRING,ue.min()).withLastLimboFreeSnapshotVersion(ue.min()):h.resumeToken.approximateByteSize()>0&&(_=_.withResumeToken(h.resumeToken,r)),i=i.insert(f,_),function(I,R,T){return I.resumeToken.approximateByteSize()===0||R.snapshotVersion.toMicroseconds()-I.snapshotVersion.toMicroseconds()>=3e8?!0:T.addedDocuments.size+T.modifiedDocuments.size+T.removedDocuments.size>0}(p,_,h)&&a.push(n.Qr.updateTargetData(s,_))});let l=Wr(),c=we();if(e.documentUpdates.forEach(h=>{e.resolvedLimboDocuments.has(h)&&a.push(n.persistence.referenceDelegate.updateLimboDocument(s,h))}),a.push(LD(s,o,e.documentUpdates).next(h=>{l=h.cs,c=h.ls})),!r.isEqual(ue.min())){const h=n.Qr.getLastRemoteSnapshotVersion(s).next(f=>n.Qr.setTargetsMetadata(s,s.currentSequenceNumber,r));a.push(h)}return B.waitFor(a).next(()=>o.apply(s)).next(()=>n.localDocuments.getLocalViewOfDocuments(s,l,c)).next(()=>l)}).then(s=>(n.ns=i,s))}function LD(t,e,n){let r=we(),i=we();return n.forEach(s=>r=r.add(s)),e.getEntries(t,r).next(s=>{let o=Wr();return n.forEach((a,l)=>{const c=s.get(a);l.isFoundDocument()!==c.isFoundDocument()&&(i=i.add(a)),l.isNoDocument()&&l.version.isEqual(ue.min())?(e.removeEntry(a,l.readTime),o=o.insert(a,l)):!c.isValidDocument()||l.version.compareTo(c.version)>0||l.version.compareTo(c.version)===0&&c.hasPendingWrites?(e.addEntry(l),o=o.insert(a,l)):J("LocalStore","Ignoring outdated watch update for ",a,". Current version:",c.version," Watch version:",l.version)}),{cs:o,ls:i}})}function DD(t,e){const n=ce(t);return n.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function MD(t,e){const n=ce(t);return n.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return n.Qr.getTargetData(r,e).next(s=>s?(i=s,B.resolve(i)):n.Qr.allocateTargetId(r).next(o=>(i=new Ei(e,o,"TargetPurposeListen",r.currentSequenceNumber),n.Qr.addTargetData(r,i).next(()=>i))))}).then(r=>{const i=n.ns.get(r.targetId);return(i===null||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(n.ns=n.ns.insert(r.targetId,r),n.rs.set(e,r.targetId)),r})}async function Em(t,e,n){const r=ce(t),i=r.ns.get(e),s=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",s,o=>r.persistence.referenceDelegate.removeTarget(o,i))}catch(o){if(!Iu(o))throw o;J("LocalStore",`Failed to update sequence numbers for target ${e}: ${o}`)}r.ns=r.ns.remove(e),r.rs.delete(i.target)}function fw(t,e,n){const r=ce(t);let i=ue.min(),s=we();return r.persistence.runTransaction("Execute query","readwrite",o=>function(l,c,h){const f=ce(l),p=f.rs.get(h);return p!==void 0?B.resolve(f.ns.get(p)):f.Qr.getTargetData(c,h)}(r,o,cr(e)).next(a=>{if(a)return i=a.lastLimboFreeSnapshotVersion,r.Qr.getMatchingKeysForTargetId(o,a.targetId).next(l=>{s=l})}).next(()=>r.ts.getDocumentsMatchingQuery(o,e,n?i:ue.min(),n?s:we())).next(a=>(VD(r,x4(e),a),{documents:a,hs:s})))}function VD(t,e,n){let r=t.ss.get(e)||ue.min();n.forEach((i,s)=>{s.readTime.compareTo(r)>0&&(r=s.readTime)}),t.ss.set(e,r)}class pw{constructor(){this.activeTargetIds=L4()}As(e){this.activeTargetIds=this.activeTargetIds.add(e)}Rs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}ds(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class UD{constructor(){this.no=new pw,this.ro={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e){return this.no.As(e),this.ro[e]||"not-current"}updateQueryState(e,n,r){this.ro[e]=n}removeLocalQueryTarget(e){this.no.Rs(e)}isLocalQueryTarget(e){return this.no.activeTargetIds.has(e)}clearQueryState(e){delete this.ro[e]}getAllActiveQueryTargets(){return this.no.activeTargetIds}isActiveQueryTarget(e){return this.no.activeTargetIds.has(e)}start(){return this.no=new pw,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $D{io(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mw{constructor(){this.so=()=>this.oo(),this._o=()=>this.ao(),this.uo=[],this.co()}io(e){this.uo.push(e)}shutdown(){window.removeEventListener("online",this.so),window.removeEventListener("offline",this._o)}co(){window.addEventListener("online",this.so),window.addEventListener("offline",this._o)}oo(){J("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.uo)e(0)}ao(){J("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.uo)e(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let _c=null;function Wf(){return _c===null?_c=function(){return 268435456+Math.round(2147483648*Math.random())}():_c++,"0x"+_c.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const FD={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jD{constructor(e){this.lo=e.lo,this.ho=e.ho}Po(e){this.Io=e}To(e){this.Eo=e}Ao(e){this.Ro=e}onMessage(e){this.Vo=e}close(){this.ho()}send(e){this.lo(e)}mo(){this.Io()}fo(){this.Eo()}po(e){this.Ro(e)}yo(e){this.Vo(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $t="WebChannelConnection";class zD extends class{constructor(n){this.databaseInfo=n,this.databaseId=n.databaseId;const r=n.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),s=encodeURIComponent(this.databaseId.database);this.wo=r+"://"+n.host,this.So=`projects/${i}/databases/${s}`,this.bo=this.databaseId.database==="(default)"?`project_id=${i}`:`project_id=${i}&database_id=${s}`}get Do(){return!1}Co(n,r,i,s,o){const a=Wf(),l=this.vo(n,r.toUriEncodedString());J("RestConnection",`Sending RPC '${n}' ${a}:`,l,i);const c={"google-cloud-resource-prefix":this.So,"x-goog-request-params":this.bo};return this.Fo(c,s,o),this.Mo(n,l,c,i).then(h=>(J("RestConnection",`Received RPC '${n}' ${a}: `,h),h),h=>{throw ra("RestConnection",`RPC '${n}' ${a} failed with error: `,h,"url: ",l,"request:",i),h})}xo(n,r,i,s,o,a){return this.Co(n,r,i,s,o)}Fo(n,r,i){n["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+ba}(),n["Content-Type"]="text/plain",this.databaseInfo.appId&&(n["X-Firebase-GMPID"]=this.databaseInfo.appId),r&&r.headers.forEach((s,o)=>n[o]=s),i&&i.headers.forEach((s,o)=>n[o]=s)}vo(n,r){const i=FD[n];return`${this.wo}/v1/${r}:${i}`}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Mo(e,n,r,i){const s=Wf();return new Promise((o,a)=>{const l=new $T;l.setWithCredentials(!0),l.listenOnce(jT.COMPLETE,()=>{try{switch(l.getLastErrorCode()){case zc.NO_ERROR:const h=l.getResponseJson();J($t,`XHR for RPC '${e}' ${s} received:`,JSON.stringify(h)),o(h);break;case zc.TIMEOUT:J($t,`RPC '${e}' ${s} timed out`),a(new Y(j.DEADLINE_EXCEEDED,"Request time out"));break;case zc.HTTP_ERROR:const f=l.getStatus();if(J($t,`RPC '${e}' ${s} failed with status:`,f,"response text:",l.getResponseText()),f>0){let p=l.getResponseJson();Array.isArray(p)&&(p=p[0]);const _=p==null?void 0:p.error;if(_&&_.status&&_.message){const E=function(R){const T=R.toLowerCase().replace(/_/g,"-");return Object.values(j).indexOf(T)>=0?T:j.UNKNOWN}(_.status);a(new Y(E,_.message))}else a(new Y(j.UNKNOWN,"Server responded with status "+l.getStatus()))}else a(new Y(j.UNAVAILABLE,"Connection failed."));break;default:le()}}finally{J($t,`RPC '${e}' ${s} completed.`)}});const c=JSON.stringify(i);J($t,`RPC '${e}' ${s} sending request:`,i),l.send(n,"POST",c,r,15)})}Oo(e,n,r){const i=Wf(),s=[this.wo,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=HT(),a=BT(),l={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},c=this.longPollingOptions.timeoutSeconds;c!==void 0&&(l.longPollingTimeout=Math.round(1e3*c)),this.useFetchStreams&&(l.xmlHttpFactory=new FT({})),this.Fo(l.initMessageHeaders,n,r),l.encodeInitMessageHeaders=!0;const h=s.join("");J($t,`Creating RPC '${e}' stream ${i}: ${h}`,l);const f=o.createWebChannel(h,l);let p=!1,_=!1;const E=new jD({lo:R=>{_?J($t,`Not sending because RPC '${e}' stream ${i} is closed:`,R):(p||(J($t,`Opening RPC '${e}' stream ${i} transport.`),f.open(),p=!0),J($t,`RPC '${e}' stream ${i} sending:`,R),f.send(R))},ho:()=>f.close()}),I=(R,T,w)=>{R.listen(T,C=>{try{w(C)}catch(D){setTimeout(()=>{throw D},0)}})};return I(f,pl.EventType.OPEN,()=>{_||(J($t,`RPC '${e}' stream ${i} transport opened.`),E.mo())}),I(f,pl.EventType.CLOSE,()=>{_||(_=!0,J($t,`RPC '${e}' stream ${i} transport closed`),E.po())}),I(f,pl.EventType.ERROR,R=>{_||(_=!0,ra($t,`RPC '${e}' stream ${i} transport errored:`,R),E.po(new Y(j.UNAVAILABLE,"The operation could not be completed")))}),I(f,pl.EventType.MESSAGE,R=>{var T;if(!_){const w=R.data[0];De(!!w);const C=w,D=C.error||((T=C[0])===null||T===void 0?void 0:T.error);if(D){J($t,`RPC '${e}' stream ${i} received error:`,D);const F=D.status;let z=function(b){const S=ot[b];if(S!==void 0)return vC(S)}(F),g=D.message;z===void 0&&(z=j.INTERNAL,g="Unknown error status: "+F+" with message "+D.message),_=!0,E.po(new Y(z,g)),f.close()}else J($t,`RPC '${e}' stream ${i} received:`,w),E.yo(w)}}),I(a,zT.STAT_EVENT,R=>{R.stat===cm.PROXY?J($t,`RPC '${e}' stream ${i} detected buffering proxy`):R.stat===cm.NOPROXY&&J($t,`RPC '${e}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{E.fo()},0),E}}function qf(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vd(t){return new Z4(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PC{constructor(e,n,r=1e3,i=1.5,s=6e4){this.oi=e,this.timerId=n,this.No=r,this.Lo=i,this.Bo=s,this.ko=0,this.qo=null,this.Qo=Date.now(),this.reset()}reset(){this.ko=0}Ko(){this.ko=this.Bo}$o(e){this.cancel();const n=Math.floor(this.ko+this.Uo()),r=Math.max(0,Date.now()-this.Qo),i=Math.max(0,n-r);i>0&&J("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.ko} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.qo=this.oi.enqueueAfterDelay(this.timerId,i,()=>(this.Qo=Date.now(),e())),this.ko*=this.Lo,this.ko<this.No&&(this.ko=this.No),this.ko>this.Bo&&(this.ko=this.Bo)}Wo(){this.qo!==null&&(this.qo.skipDelay(),this.qo=null)}cancel(){this.qo!==null&&(this.qo.cancel(),this.qo=null)}Uo(){return(Math.random()-.5)*this.ko}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RC{constructor(e,n,r,i,s,o,a,l){this.oi=e,this.Go=r,this.zo=i,this.connection=s,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=a,this.listener=l,this.state=0,this.jo=0,this.Ho=null,this.Jo=null,this.stream=null,this.Yo=new PC(e,n)}Zo(){return this.state===1||this.state===5||this.Xo()}Xo(){return this.state===2||this.state===3}start(){this.state!==4?this.auth():this.e_()}async stop(){this.Zo()&&await this.close(0)}t_(){this.state=0,this.Yo.reset()}n_(){this.Xo()&&this.Ho===null&&(this.Ho=this.oi.enqueueAfterDelay(this.Go,6e4,()=>this.r_()))}i_(e){this.s_(),this.stream.send(e)}async r_(){if(this.Xo())return this.close(0)}s_(){this.Ho&&(this.Ho.cancel(),this.Ho=null)}o_(){this.Jo&&(this.Jo.cancel(),this.Jo=null)}async close(e,n){this.s_(),this.o_(),this.Yo.cancel(),this.jo++,e!==4?this.Yo.reset():n&&n.code===j.RESOURCE_EXHAUSTED?(Hr(n.toString()),Hr("Using maximum backoff delay to prevent overloading the backend."),this.Yo.Ko()):n&&n.code===j.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.__(),this.stream.close(),this.stream=null),this.state=e,await this.listener.Ao(n)}__(){}auth(){this.state=1;const e=this.a_(this.jo),n=this.jo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.jo===n&&this.u_(r,i)},r=>{e(()=>{const i=new Y(j.UNKNOWN,"Fetching auth token failed: "+r.message);return this.c_(i)})})}u_(e,n){const r=this.a_(this.jo);this.stream=this.l_(e,n),this.stream.Po(()=>{r(()=>this.listener.Po())}),this.stream.To(()=>{r(()=>(this.state=2,this.Jo=this.oi.enqueueAfterDelay(this.zo,1e4,()=>(this.Xo()&&(this.state=3),Promise.resolve())),this.listener.To()))}),this.stream.Ao(i=>{r(()=>this.c_(i))}),this.stream.onMessage(i=>{r(()=>this.onMessage(i))})}e_(){this.state=5,this.Yo.$o(async()=>{this.state=0,this.start()})}c_(e){return J("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}a_(e){return n=>{this.oi.enqueueAndForget(()=>this.jo===e?n():(J("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class BD extends RC{constructor(e,n,r,i,s,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,i,o),this.serializer=s}l_(e,n){return this.connection.Oo("Listen",e,n)}onMessage(e){this.Yo.reset();const n=nD(this.serializer,e),r=function(s){if(!("targetChange"in s))return ue.min();const o=s.targetChange;return o.targetIds&&o.targetIds.length?ue.min():o.readTime?dr(o.readTime):ue.min()}(e);return this.listener.h_(n,r)}P_(e){const n={};n.database=wm(this.serializer),n.addTarget=function(s,o){let a;const l=o.target;if(a=pm(l)?{documents:sD(s,l)}:{query:oD(s,l)._t},a.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){a.resumeToken=EC(s,o.resumeToken);const c=ym(s,o.expectedCount);c!==null&&(a.expectedCount=c)}else if(o.snapshotVersion.compareTo(ue.min())>0){a.readTime=Lh(s,o.snapshotVersion.toTimestamp());const c=ym(s,o.expectedCount);c!==null&&(a.expectedCount=c)}return a}(this.serializer,e);const r=lD(this.serializer,e);r&&(n.labels=r),this.i_(n)}I_(e){const n={};n.database=wm(this.serializer),n.removeTarget=e,this.i_(n)}}class HD extends RC{constructor(e,n,r,i,s,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,i,o),this.serializer=s,this.T_=!1}get E_(){return this.T_}start(){this.T_=!1,this.lastStreamToken=void 0,super.start()}__(){this.T_&&this.d_([])}l_(e,n){return this.connection.Oo("Write",e,n)}onMessage(e){if(De(!!e.streamToken),this.lastStreamToken=e.streamToken,this.T_){this.Yo.reset();const n=iD(e.writeResults,e.commitTime),r=dr(e.commitTime);return this.listener.A_(r,n)}return De(!e.writeResults||e.writeResults.length===0),this.T_=!0,this.listener.R_()}V_(){const e={};e.database=wm(this.serializer),this.i_(e)}d_(e){const n={streamToken:this.lastStreamToken,writes:e.map(r=>rD(this.serializer,r))};this.i_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WD extends class{}{constructor(e,n,r,i){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=i,this.m_=!1}f_(){if(this.m_)throw new Y(j.FAILED_PRECONDITION,"The client has already been terminated.")}Co(e,n,r,i){return this.f_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,o])=>this.connection.Co(e,vm(n,r),i,s,o)).catch(s=>{throw s.name==="FirebaseError"?(s.code===j.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new Y(j.UNKNOWN,s.toString())})}xo(e,n,r,i,s){return this.f_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,a])=>this.connection.xo(e,vm(n,r),i,o,a,s)).catch(o=>{throw o.name==="FirebaseError"?(o.code===j.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new Y(j.UNKNOWN,o.toString())})}terminate(){this.m_=!0,this.connection.terminate()}}class qD{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.g_=0,this.p_=null,this.y_=!0}w_(){this.g_===0&&(this.S_("Unknown"),this.p_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.p_=null,this.b_("Backend didn't respond within 10 seconds."),this.S_("Offline"),Promise.resolve())))}D_(e){this.state==="Online"?this.S_("Unknown"):(this.g_++,this.g_>=1&&(this.C_(),this.b_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.S_("Offline")))}set(e){this.C_(),this.g_=0,e==="Online"&&(this.y_=!1),this.S_(e)}S_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}b_(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.y_?(Hr(n),this.y_=!1):J("OnlineStateTracker",n)}C_(){this.p_!==null&&(this.p_.cancel(),this.p_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GD{constructor(e,n,r,i,s){this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.v_=[],this.F_=new Map,this.M_=new Set,this.x_=[],this.O_=s,this.O_.io(o=>{r.enqueueAndForget(async()=>{Qs(this)&&(J("RemoteStore","Restarting streams for network reachability change."),await async function(l){const c=ce(l);c.M_.add(4),await xu(c),c.N_.set("Unknown"),c.M_.delete(4),await _d(c)}(this))})}),this.N_=new qD(r,i)}}async function _d(t){if(Qs(t))for(const e of t.x_)await e(!0)}async function xu(t){for(const e of t.x_)await e(!1)}function NC(t,e){const n=ce(t);n.F_.has(e.targetId)||(n.F_.set(e.targetId,e),dy(n)?hy(n):Ia(n).Xo()&&cy(n,e))}function uy(t,e){const n=ce(t),r=Ia(n);n.F_.delete(e),r.Xo()&&OC(n,e),n.F_.size===0&&(r.Xo()?r.n_():Qs(n)&&n.N_.set("Unknown"))}function cy(t,e){if(t.L_.xe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(ue.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}Ia(t).P_(e)}function OC(t,e){t.L_.xe(e),Ia(t).I_(e)}function hy(t){t.L_=new Q4({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),ot:e=>t.F_.get(e)||null,tt:()=>t.datastore.serializer.databaseId}),Ia(t).start(),t.N_.w_()}function dy(t){return Qs(t)&&!Ia(t).Zo()&&t.F_.size>0}function Qs(t){return ce(t).M_.size===0}function LC(t){t.L_=void 0}async function KD(t){t.N_.set("Online")}async function QD(t){t.F_.forEach((e,n)=>{cy(t,e)})}async function XD(t,e){LC(t),dy(t)?(t.N_.D_(e),hy(t)):t.N_.set("Unknown")}async function YD(t,e,n){if(t.N_.set("Online"),e instanceof wC&&e.state===2&&e.cause)try{await async function(i,s){const o=s.cause;for(const a of s.targetIds)i.F_.has(a)&&(await i.remoteSyncer.rejectListen(a,o),i.F_.delete(a),i.L_.removeTarget(a))}(t,e)}catch(r){J("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),await Dh(t,r)}else if(e instanceof Wc?t.L_.Ke(e):e instanceof _C?t.L_.He(e):t.L_.We(e),!n.isEqual(ue.min()))try{const r=await kC(t.localStore);n.compareTo(r)>=0&&await function(s,o){const a=s.L_.rt(o);return a.targetChanges.forEach((l,c)=>{if(l.resumeToken.approximateByteSize()>0){const h=s.F_.get(c);h&&s.F_.set(c,h.withResumeToken(l.resumeToken,o))}}),a.targetMismatches.forEach((l,c)=>{const h=s.F_.get(l);if(!h)return;s.F_.set(l,h.withResumeToken(Ht.EMPTY_BYTE_STRING,h.snapshotVersion)),OC(s,l);const f=new Ei(h.target,l,c,h.sequenceNumber);cy(s,f)}),s.remoteSyncer.applyRemoteEvent(a)}(t,n)}catch(r){J("RemoteStore","Failed to raise snapshot:",r),await Dh(t,r)}}async function Dh(t,e,n){if(!Iu(e))throw e;t.M_.add(1),await xu(t),t.N_.set("Offline"),n||(n=()=>kC(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{J("RemoteStore","Retrying IndexedDB access"),await n(),t.M_.delete(1),await _d(t)})}function DC(t,e){return e().catch(n=>Dh(t,n,e))}async function wd(t){const e=ce(t),n=Hi(e);let r=e.v_.length>0?e.v_[e.v_.length-1].batchId:-1;for(;JD(e);)try{const i=await DD(e.localStore,r);if(i===null){e.v_.length===0&&n.n_();break}r=i.batchId,ZD(e,i)}catch(i){await Dh(e,i)}MC(e)&&VC(e)}function JD(t){return Qs(t)&&t.v_.length<10}function ZD(t,e){t.v_.push(e);const n=Hi(t);n.Xo()&&n.E_&&n.d_(e.mutations)}function MC(t){return Qs(t)&&!Hi(t).Zo()&&t.v_.length>0}function VC(t){Hi(t).start()}async function eM(t){Hi(t).V_()}async function tM(t){const e=Hi(t);for(const n of t.v_)e.d_(n.mutations)}async function nM(t,e,n){const r=t.v_.shift(),i=ry.from(r,e,n);await DC(t,()=>t.remoteSyncer.applySuccessfulWrite(i)),await wd(t)}async function rM(t,e){e&&Hi(t).E_&&await async function(r,i){if(function(o){return q4(o)&&o!==j.ABORTED}(i.code)){const s=r.v_.shift();Hi(r).t_(),await DC(r,()=>r.remoteSyncer.rejectFailedWrite(s.batchId,i)),await wd(r)}}(t,e),MC(t)&&VC(t)}async function gw(t,e){const n=ce(t);n.asyncQueue.verifyOperationInProgress(),J("RemoteStore","RemoteStore received new credentials");const r=Qs(n);n.M_.add(3),await xu(n),r&&n.N_.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.M_.delete(3),await _d(n)}async function iM(t,e){const n=ce(t);e?(n.M_.delete(2),await _d(n)):e||(n.M_.add(2),await xu(n),n.N_.set("Unknown"))}function Ia(t){return t.B_||(t.B_=function(n,r,i){const s=ce(n);return s.f_(),new BD(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(t.datastore,t.asyncQueue,{Po:KD.bind(null,t),To:QD.bind(null,t),Ao:XD.bind(null,t),h_:YD.bind(null,t)}),t.x_.push(async e=>{e?(t.B_.t_(),dy(t)?hy(t):t.N_.set("Unknown")):(await t.B_.stop(),LC(t))})),t.B_}function Hi(t){return t.k_||(t.k_=function(n,r,i){const s=ce(n);return s.f_(),new HD(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(t.datastore,t.asyncQueue,{Po:()=>Promise.resolve(),To:eM.bind(null,t),Ao:rM.bind(null,t),R_:tM.bind(null,t),A_:nM.bind(null,t)}),t.x_.push(async e=>{e?(t.k_.t_(),await wd(t)):(await t.k_.stop(),t.v_.length>0&&(J("RemoteStore",`Stopping write stream with ${t.v_.length} pending writes`),t.v_=[]))})),t.k_}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fy{constructor(e,n,r,i,s){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=i,this.removalCallback=s,this.deferred=new Li,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,r,i,s){const o=Date.now()+r,a=new fy(e,n,o,i,s);return a.start(r),a}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new Y(j.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function py(t,e){if(Hr("AsyncQueue",`${e}: ${t}`),Iu(t))return new Y(j.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qo{constructor(e){this.comparator=e?(n,r)=>e(n,r)||ne.comparator(n.key,r.key):(n,r)=>ne.comparator(n.key,r.key),this.keyedMap=ml(),this.sortedSet=new Ye(this.comparator)}static emptySet(e){return new qo(e.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,r)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof qo)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){const i=n.getNext().key,s=r.getNext().key;if(!i.isEqual(s))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const r=new qo;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yw{constructor(){this.q_=new Ye(ne.comparator)}track(e){const n=e.doc.key,r=this.q_.get(n);r?e.type!==0&&r.type===3?this.q_=this.q_.insert(n,e):e.type===3&&r.type!==1?this.q_=this.q_.insert(n,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.q_=this.q_.insert(n,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.q_=this.q_.insert(n,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.q_=this.q_.remove(n):e.type===1&&r.type===2?this.q_=this.q_.insert(n,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.q_=this.q_.insert(n,{type:2,doc:e.doc}):le():this.q_=this.q_.insert(n,e)}Q_(){const e=[];return this.q_.inorderTraversal((n,r)=>{e.push(r)}),e}}class la{constructor(e,n,r,i,s,o,a,l,c){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=s,this.fromCache=o,this.syncStateChanged=a,this.excludesMetadataChanges=l,this.hasCachedResults=c}static fromInitialDocuments(e,n,r,i,s){const o=[];return n.forEach(a=>{o.push({type:0,doc:a})}),new la(e,n,qo.emptySet(n),o,r,i,!0,!1,s)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&fd(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let i=0;i<n.length;i++)if(n[i].type!==r[i].type||!n[i].doc.isEqual(r[i].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sM{constructor(){this.K_=void 0,this.U_=[]}W_(){return this.U_.some(e=>e.G_())}}class oM{constructor(){this.queries=new Ca(e=>iC(e),fd),this.onlineState="Unknown",this.z_=new Set}}async function aM(t,e){const n=ce(t);let r=3;const i=e.query;let s=n.queries.get(i);s?!s.W_()&&e.G_()&&(r=2):(s=new sM,r=e.G_()?0:1);try{switch(r){case 0:s.K_=await n.onListen(i,!0);break;case 1:s.K_=await n.onListen(i,!1);break;case 2:await n.onFirstRemoteStoreListen(i)}}catch(o){const a=py(o,`Initialization of query '${yo(e.query)}' failed`);return void e.onError(a)}n.queries.set(i,s),s.U_.push(e),e.j_(n.onlineState),s.K_&&e.H_(s.K_)&&my(n)}async function lM(t,e){const n=ce(t),r=e.query;let i=3;const s=n.queries.get(r);if(s){const o=s.U_.indexOf(e);o>=0&&(s.U_.splice(o,1),s.U_.length===0?i=e.G_()?0:1:!s.W_()&&e.G_()&&(i=2))}switch(i){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function uM(t,e){const n=ce(t);let r=!1;for(const i of e){const s=i.query,o=n.queries.get(s);if(o){for(const a of o.U_)a.H_(i)&&(r=!0);o.K_=i}}r&&my(n)}function cM(t,e,n){const r=ce(t),i=r.queries.get(e);if(i)for(const s of i.U_)s.onError(n);r.queries.delete(e)}function my(t){t.z_.forEach(e=>{e.next()})}var bm,vw;(vw=bm||(bm={})).J_="default",vw.Cache="cache";class hM{constructor(e,n,r){this.query=e,this.Y_=n,this.Z_=!1,this.X_=null,this.onlineState="Unknown",this.options=r||{}}H_(e){if(!this.options.includeMetadataChanges){const r=[];for(const i of e.docChanges)i.type!==3&&r.push(i);e=new la(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.Z_?this.ea(e)&&(this.Y_.next(e),n=!0):this.ta(e,this.onlineState)&&(this.na(e),n=!0),this.X_=e,n}onError(e){this.Y_.error(e)}j_(e){this.onlineState=e;let n=!1;return this.X_&&!this.Z_&&this.ta(this.X_,e)&&(this.na(this.X_),n=!0),n}ta(e,n){if(!e.fromCache||!this.G_())return!0;const r=n!=="Offline";return(!this.options.ra||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}ea(e){if(e.docChanges.length>0)return!0;const n=this.X_&&this.X_.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}na(e){e=la.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Z_=!0,this.Y_.next(e)}G_(){return this.options.source!==bm.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UC{constructor(e){this.key=e}}class $C{constructor(e){this.key=e}}class dM{constructor(e,n){this.query=e,this.la=n,this.ha=null,this.hasCachedResults=!1,this.current=!1,this.Pa=we(),this.mutatedKeys=we(),this.Ia=sC(e),this.Ta=new qo(this.Ia)}get Ea(){return this.la}da(e,n){const r=n?n.Aa:new yw,i=n?n.Ta:this.Ta;let s=n?n.mutatedKeys:this.mutatedKeys,o=i,a=!1;const l=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,c=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((h,f)=>{const p=i.get(h),_=pd(this.query,f)?f:null,E=!!p&&this.mutatedKeys.has(p.key),I=!!_&&(_.hasLocalMutations||this.mutatedKeys.has(_.key)&&_.hasCommittedMutations);let R=!1;p&&_?p.data.isEqual(_.data)?E!==I&&(r.track({type:3,doc:_}),R=!0):this.Ra(p,_)||(r.track({type:2,doc:_}),R=!0,(l&&this.Ia(_,l)>0||c&&this.Ia(_,c)<0)&&(a=!0)):!p&&_?(r.track({type:0,doc:_}),R=!0):p&&!_&&(r.track({type:1,doc:p}),R=!0,(l||c)&&(a=!0)),R&&(_?(o=o.add(_),s=I?s.add(h):s.delete(h)):(o=o.delete(h),s=s.delete(h)))}),this.query.limit!==null)for(;o.size>this.query.limit;){const h=this.query.limitType==="F"?o.last():o.first();o=o.delete(h.key),s=s.delete(h.key),r.track({type:1,doc:h})}return{Ta:o,Aa:r,Xi:a,mutatedKeys:s}}Ra(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r,i){const s=this.Ta;this.Ta=e.Ta,this.mutatedKeys=e.mutatedKeys;const o=e.Aa.Q_();o.sort((h,f)=>function(_,E){const I=R=>{switch(R){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return le()}};return I(_)-I(E)}(h.type,f.type)||this.Ia(h.doc,f.doc)),this.Va(r),i=i!=null&&i;const a=n&&!i?this.ma():[],l=this.Pa.size===0&&this.current&&!i?1:0,c=l!==this.ha;return this.ha=l,o.length!==0||c?{snapshot:new la(this.query,e.Ta,s,o,e.mutatedKeys,l===0,c,!1,!!r&&r.resumeToken.approximateByteSize()>0),fa:a}:{fa:a}}j_(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({Ta:this.Ta,Aa:new yw,mutatedKeys:this.mutatedKeys,Xi:!1},!1)):{fa:[]}}ga(e){return!this.la.has(e)&&!!this.Ta.has(e)&&!this.Ta.get(e).hasLocalMutations}Va(e){e&&(e.addedDocuments.forEach(n=>this.la=this.la.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.la=this.la.delete(n)),this.current=e.current)}ma(){if(!this.current)return[];const e=this.Pa;this.Pa=we(),this.Ta.forEach(r=>{this.ga(r.key)&&(this.Pa=this.Pa.add(r.key))});const n=[];return e.forEach(r=>{this.Pa.has(r)||n.push(new $C(r))}),this.Pa.forEach(r=>{e.has(r)||n.push(new UC(r))}),n}pa(e){this.la=e.hs,this.Pa=we();const n=this.da(e.documents);return this.applyChanges(n,!0)}ya(){return la.fromInitialDocuments(this.query,this.Ta,this.mutatedKeys,this.ha===0,this.hasCachedResults)}}class fM{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}}class pM{constructor(e){this.key=e,this.wa=!1}}class mM{constructor(e,n,r,i,s,o){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=i,this.currentUser=s,this.maxConcurrentLimboResolutions=o,this.Sa={},this.ba=new Ca(a=>iC(a),fd),this.Da=new Map,this.Ca=new Set,this.va=new Ye(ne.comparator),this.Fa=new Map,this.Ma=new oy,this.xa={},this.Oa=new Map,this.Na=aa.Ln(),this.onlineState="Unknown",this.La=void 0}get isPrimaryClient(){return this.La===!0}}async function gM(t,e,n=!0){const r=WC(t);let i;const s=r.ba.get(e);return s?(r.sharedClientState.addLocalQueryTarget(s.targetId),i=s.view.ya()):i=await FC(r,e,n,!0),i}async function yM(t,e){const n=WC(t);await FC(n,e,!0,!1)}async function FC(t,e,n,r){const i=await MD(t.localStore,cr(e)),s=i.targetId,o=n?t.sharedClientState.addLocalQueryTarget(s):"not-current";let a;return r&&(a=await vM(t,e,s,o==="current",i.resumeToken)),t.isPrimaryClient&&n&&NC(t.remoteStore,i),a}async function vM(t,e,n,r,i){t.Ba=(f,p,_)=>async function(I,R,T,w){let C=R.view.da(T);C.Xi&&(C=await fw(I.localStore,R.query,!1).then(({documents:g})=>R.view.da(g,C)));const D=w&&w.targetChanges.get(R.targetId),F=w&&w.targetMismatches.get(R.targetId)!=null,z=R.view.applyChanges(C,I.isPrimaryClient,D,F);return ww(I,R.targetId,z.fa),z.snapshot}(t,f,p,_);const s=await fw(t.localStore,e,!0),o=new dM(e,s.hs),a=o.da(s.documents),l=Au.createSynthesizedTargetChangeForCurrentChange(n,r&&t.onlineState!=="Offline",i),c=o.applyChanges(a,t.isPrimaryClient,l);ww(t,n,c.fa);const h=new fM(e,n,o);return t.ba.set(e,h),t.Da.has(n)?t.Da.get(n).push(e):t.Da.set(n,[e]),c.snapshot}async function _M(t,e,n){const r=ce(t),i=r.ba.get(e),s=r.Da.get(i.targetId);if(s.length>1)return r.Da.set(i.targetId,s.filter(o=>!fd(o,e))),void r.ba.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||await Em(r.localStore,i.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(i.targetId),n&&uy(r.remoteStore,i.targetId),Tm(r,i.targetId)}).catch(Cu)):(Tm(r,i.targetId),await Em(r.localStore,i.targetId,!0))}async function wM(t,e){const n=ce(t),r=n.ba.get(e),i=n.Da.get(r.targetId);n.isPrimaryClient&&i.length===1&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),uy(n.remoteStore,r.targetId))}async function EM(t,e,n){const r=xM(t);try{const i=await function(o,a){const l=ce(o),c=mt.now(),h=a.reduce((_,E)=>_.add(E.key),we());let f,p;return l.persistence.runTransaction("Locally write mutations","readwrite",_=>{let E=Wr(),I=we();return l.os.getEntries(_,h).next(R=>{E=R,E.forEach((T,w)=>{w.isValidDocument()||(I=I.add(T))})}).next(()=>l.localDocuments.getOverlayedDocuments(_,E)).next(R=>{f=R;const T=[];for(const w of a){const C=j4(w,f.get(w.key).overlayedDocument);C!=null&&T.push(new ts(w.key,C,QT(C.value.mapValue),hr.exists(!0)))}return l.mutationQueue.addMutationBatch(_,c,T,a)}).next(R=>{p=R;const T=R.applyToLocalDocumentSet(f,I);return l.documentOverlayCache.saveOverlays(_,R.batchId,T)})}).then(()=>({batchId:p.batchId,changes:aC(f)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),function(o,a,l){let c=o.xa[o.currentUser.toKey()];c||(c=new Ye(Ae)),c=c.insert(a,l),o.xa[o.currentUser.toKey()]=c}(r,i.batchId,n),await ku(r,i.changes),await wd(r.remoteStore)}catch(i){const s=py(i,"Failed to persist write");n.reject(s)}}async function jC(t,e){const n=ce(t);try{const r=await OD(n.localStore,e);e.targetChanges.forEach((i,s)=>{const o=n.Fa.get(s);o&&(De(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1),i.addedDocuments.size>0?o.wa=!0:i.modifiedDocuments.size>0?De(o.wa):i.removedDocuments.size>0&&(De(o.wa),o.wa=!1))}),await ku(n,r,e)}catch(r){await Cu(r)}}function _w(t,e,n){const r=ce(t);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){const i=[];r.ba.forEach((s,o)=>{const a=o.view.j_(e);a.snapshot&&i.push(a.snapshot)}),function(o,a){const l=ce(o);l.onlineState=a;let c=!1;l.queries.forEach((h,f)=>{for(const p of f.U_)p.j_(a)&&(c=!0)}),c&&my(l)}(r.eventManager,e),i.length&&r.Sa.h_(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function bM(t,e,n){const r=ce(t);r.sharedClientState.updateQueryState(e,"rejected",n);const i=r.Fa.get(e),s=i&&i.key;if(s){let o=new Ye(ne.comparator);o=o.insert(s,zt.newNoDocument(s,ue.min()));const a=we().add(s),l=new yd(ue.min(),new Map,new Ye(Ae),o,a);await jC(r,l),r.va=r.va.remove(s),r.Fa.delete(e),gy(r)}else await Em(r.localStore,e,!1).then(()=>Tm(r,e,n)).catch(Cu)}async function TM(t,e){const n=ce(t),r=e.batch.batchId;try{const i=await ND(n.localStore,e);BC(n,r,null),zC(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await ku(n,i)}catch(i){await Cu(i)}}async function CM(t,e,n){const r=ce(t);try{const i=await function(o,a){const l=ce(o);return l.persistence.runTransaction("Reject batch","readwrite-primary",c=>{let h;return l.mutationQueue.lookupMutationBatch(c,a).next(f=>(De(f!==null),h=f.keys(),l.mutationQueue.removeMutationBatch(c,f))).next(()=>l.mutationQueue.performConsistencyCheck(c)).next(()=>l.documentOverlayCache.removeOverlaysForBatchId(c,h,a)).next(()=>l.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(c,h)).next(()=>l.localDocuments.getDocuments(c,h))})}(r.localStore,e);BC(r,e,n),zC(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),await ku(r,i)}catch(i){await Cu(i)}}function zC(t,e){(t.Oa.get(e)||[]).forEach(n=>{n.resolve()}),t.Oa.delete(e)}function BC(t,e,n){const r=ce(t);let i=r.xa[r.currentUser.toKey()];if(i){const s=i.get(e);s&&(n?s.reject(n):s.resolve(),i=i.remove(e)),r.xa[r.currentUser.toKey()]=i}}function Tm(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const r of t.Da.get(e))t.ba.delete(r),n&&t.Sa.ka(r,n);t.Da.delete(e),t.isPrimaryClient&&t.Ma.Vr(e).forEach(r=>{t.Ma.containsKey(r)||HC(t,r)})}function HC(t,e){t.Ca.delete(e.path.canonicalString());const n=t.va.get(e);n!==null&&(uy(t.remoteStore,n),t.va=t.va.remove(e),t.Fa.delete(n),gy(t))}function ww(t,e,n){for(const r of n)r instanceof UC?(t.Ma.addReference(r.key,e),IM(t,r)):r instanceof $C?(J("SyncEngine","Document no longer in limbo: "+r.key),t.Ma.removeReference(r.key,e),t.Ma.containsKey(r.key)||HC(t,r.key)):le()}function IM(t,e){const n=e.key,r=n.path.canonicalString();t.va.get(n)||t.Ca.has(r)||(J("SyncEngine","New document in limbo: "+n),t.Ca.add(r),gy(t))}function gy(t){for(;t.Ca.size>0&&t.va.size<t.maxConcurrentLimboResolutions;){const e=t.Ca.values().next().value;t.Ca.delete(e);const n=new ne(Fe.fromString(e)),r=t.Na.next();t.Fa.set(r,new pM(n)),t.va=t.va.insert(n,r),NC(t.remoteStore,new Ei(cr(nC(n.path)),r,"TargetPurposeLimboResolution",Yg.oe))}}async function ku(t,e,n){const r=ce(t),i=[],s=[],o=[];r.ba.isEmpty()||(r.ba.forEach((a,l)=>{o.push(r.Ba(l,e,n).then(c=>{if((c||n)&&r.isPrimaryClient){const h=c&&!c.fromCache;r.sharedClientState.updateQueryState(l.targetId,h?"current":"not-current")}if(c){i.push(c);const h=ly.Ki(l.targetId,c);s.push(h)}}))}),await Promise.all(o),r.Sa.h_(i),await async function(l,c){const h=ce(l);try{await h.persistence.runTransaction("notifyLocalViewChanges","readwrite",f=>B.forEach(c,p=>B.forEach(p.qi,_=>h.persistence.referenceDelegate.addReference(f,p.targetId,_)).next(()=>B.forEach(p.Qi,_=>h.persistence.referenceDelegate.removeReference(f,p.targetId,_)))))}catch(f){if(!Iu(f))throw f;J("LocalStore","Failed to update sequence numbers: "+f)}for(const f of c){const p=f.targetId;if(!f.fromCache){const _=h.ns.get(p),E=_.snapshotVersion,I=_.withLastLimboFreeSnapshotVersion(E);h.ns=h.ns.insert(p,I)}}}(r.localStore,s))}async function SM(t,e){const n=ce(t);if(!n.currentUser.isEqual(e)){J("SyncEngine","User change. New user:",e.toKey());const r=await xC(n.localStore,e);n.currentUser=e,function(s,o){s.Oa.forEach(a=>{a.forEach(l=>{l.reject(new Y(j.CANCELLED,o))})}),s.Oa.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await ku(n,r.us)}}function AM(t,e){const n=ce(t),r=n.Fa.get(e);if(r&&r.wa)return we().add(r.key);{let i=we();const s=n.Da.get(e);if(!s)return i;for(const o of s){const a=n.ba.get(o);i=i.unionWith(a.view.Ea)}return i}}function WC(t){const e=ce(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=jC.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=AM.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=bM.bind(null,e),e.Sa.h_=uM.bind(null,e.eventManager),e.Sa.ka=cM.bind(null,e.eventManager),e}function xM(t){const e=ce(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=TM.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=CM.bind(null,e),e}class Ew{constructor(){this.synchronizeTabs=!1}async initialize(e){this.serializer=vd(e.databaseInfo.databaseId),this.sharedClientState=this.createSharedClientState(e),this.persistence=this.createPersistence(e),await this.persistence.start(),this.localStore=this.createLocalStore(e),this.gcScheduler=this.createGarbageCollectionScheduler(e,this.localStore),this.indexBackfillerScheduler=this.createIndexBackfillerScheduler(e,this.localStore)}createGarbageCollectionScheduler(e,n){return null}createIndexBackfillerScheduler(e,n){return null}createLocalStore(e){return RD(this.persistence,new kD,e.initialUser,this.serializer)}createPersistence(e){return new SD(ay.Hr,this.serializer)}createSharedClientState(e){return new UD}async terminate(){var e,n;(e=this.gcScheduler)===null||e===void 0||e.stop(),(n=this.indexBackfillerScheduler)===null||n===void 0||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}class kM{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>_w(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=SM.bind(null,this.syncEngine),await iM(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new oM}()}createDatastore(e){const n=vd(e.databaseInfo.databaseId),r=function(s){return new zD(s)}(e.databaseInfo);return function(s,o,a,l){return new WD(s,o,a,l)}(e.authCredentials,e.appCheckCredentials,r,n)}createRemoteStore(e){return function(r,i,s,o,a){return new GD(r,i,s,o,a)}(this.localStore,this.datastore,e.asyncQueue,n=>_w(this.syncEngine,n,0),function(){return mw.D()?new mw:new $D}())}createSyncEngine(e,n){return function(i,s,o,a,l,c,h){const f=new mM(i,s,o,a,l,c);return h&&(f.La=!0),f}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){var e;await async function(r){const i=ce(r);J("RemoteStore","RemoteStore shutting down."),i.M_.add(5),await xu(i),i.O_.shutdown(),i.N_.set("Unknown")}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PM{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.Ka(this.observer.next,e)}error(e){this.observer.error?this.Ka(this.observer.error,e):Hr("Uncaught Error in snapshot listener:",e.toString())}$a(){this.muted=!0}Ka(e,n){this.muted||setTimeout(()=>{this.muted||e(n)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RM{constructor(e,n,r,i){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=i,this.user=Ft.UNAUTHENTICATED,this.clientId=qT.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(r,async s=>{J("FirestoreClient","Received user=",s.uid),await this.authCredentialListener(s),this.user=s}),this.appCheckCredentials.start(r,s=>(J("FirestoreClient","Received new app check token=",s),this.appCheckCredentialListener(s,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new Y(j.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Li;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const r=py(n,"Failed to shutdown persistence");e.reject(r)}}),e.promise}}async function Gf(t,e){t.asyncQueue.verifyOperationInProgress(),J("FirestoreClient","Initializing OfflineComponentProvider");const n=t.configuration;await e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener(async i=>{r.isEqual(i)||(await xC(e.localStore,i),r=i)}),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e}async function bw(t,e){t.asyncQueue.verifyOperationInProgress();const n=await OM(t);J("FirestoreClient","Initializing OnlineComponentProvider"),await e.initialize(n,t.configuration),t.setCredentialChangeListener(r=>gw(e.remoteStore,r)),t.setAppCheckTokenChangeListener((r,i)=>gw(e.remoteStore,i)),t._onlineComponents=e}function NM(t){return t.name==="FirebaseError"?t.code===j.FAILED_PRECONDITION||t.code===j.UNIMPLEMENTED:!(typeof DOMException<"u"&&t instanceof DOMException)||t.code===22||t.code===20||t.code===11}async function OM(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){J("FirestoreClient","Using user provided OfflineComponentProvider");try{await Gf(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!NM(n))throw n;ra("Error using user provided cache. Falling back to memory cache: "+n),await Gf(t,new Ew)}}else J("FirestoreClient","Using default OfflineComponentProvider"),await Gf(t,new Ew);return t._offlineComponents}async function qC(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(J("FirestoreClient","Using user provided OnlineComponentProvider"),await bw(t,t._uninitializedComponentsProvider._online)):(J("FirestoreClient","Using default OnlineComponentProvider"),await bw(t,new kM))),t._onlineComponents}function LM(t){return qC(t).then(e=>e.syncEngine)}async function DM(t){const e=await qC(t),n=e.eventManager;return n.onListen=gM.bind(null,e.syncEngine),n.onUnlisten=_M.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=yM.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=wM.bind(null,e.syncEngine),n}function MM(t,e,n={}){const r=new Li;return t.asyncQueue.enqueueAndForget(async()=>function(s,o,a,l,c){const h=new PM({next:p=>{o.enqueueAndForget(()=>lM(s,f)),p.fromCache&&l.source==="server"?c.reject(new Y(j.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):c.resolve(p)},error:p=>c.reject(p)}),f=new hM(a,h,{includeMetadataChanges:!0,ra:!0});return aM(s,f)}(await DM(t),t.asyncQueue,e,n,r)),r.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function GC(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Tw=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function KC(t,e,n){if(!n)throw new Y(j.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function VM(t,e,n,r){if(e===!0&&r===!0)throw new Y(j.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function Cw(t){if(!ne.isDocumentKey(t))throw new Y(j.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function Iw(t){if(ne.isDocumentKey(t))throw new Y(j.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function Ed(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(r){return r.constructor?r.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":le()}function ua(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new Y(j.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=Ed(t);throw new Y(j.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sw{constructor(e){var n,r;if(e.host===void 0){if(e.ssl!==void 0)throw new Y(j.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(n=e.ssl)===null||n===void 0||n;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new Y(j.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}VM("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=GC((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(s){if(s.timeoutSeconds!==void 0){if(isNaN(s.timeoutSeconds))throw new Y(j.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (must not be NaN)`);if(s.timeoutSeconds<5)throw new Y(j.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (minimum allowed value is 5)`);if(s.timeoutSeconds>30)throw new Y(j.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,i){return r.timeoutSeconds===i.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class bd{constructor(e,n,r,i){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Sw({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new Y(j.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!==void 0}_setSettings(e){if(this._settingsFrozen)throw new Y(j.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Sw(e),e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new YL;switch(r.type){case"firstParty":return new t4(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new Y(j.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const r=Tw.get(n);r&&(J("ComponentProvider","Removing Datastore"),Tw.delete(n),r.terminate())}(this),Promise.resolve()}}function UM(t,e,n,r={}){var i;const s=(t=ua(t,bd))._getSettings(),o=`${e}:${n}`;if(s.host!=="firestore.googleapis.com"&&s.host!==o&&ra("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),t._setSettings(Object.assign(Object.assign({},s),{host:o,ssl:!1})),r.mockUserToken){let a,l;if(typeof r.mockUserToken=="string")a=r.mockUserToken,l=Ft.MOCK_USER;else{a=fR(r.mockUserToken,(i=t._app)===null||i===void 0?void 0:i.options.projectId);const c=r.mockUserToken.sub||r.mockUserToken.user_id;if(!c)throw new Y(j.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");l=new Ft(c)}t._authCredentials=new JL(new WT(a,l))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xs{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new Xs(this.firestore,e,this._query)}}class yn{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Di(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new yn(this.firestore,e,this._key)}}class Di extends Xs{constructor(e,n,r){super(e,n,nC(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new yn(this.firestore,null,new ne(e))}withConverter(e){return new Di(this.firestore,e,this._path)}}function yy(t,e,...n){if(t=_t(t),KC("collection","path",e),t instanceof bd){const r=Fe.fromString(e,...n);return Iw(r),new Di(t,null,r)}{if(!(t instanceof yn||t instanceof Di))throw new Y(j.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(Fe.fromString(e,...n));return Iw(r),new Di(t.firestore,null,r)}}function QC(t,e,...n){if(t=_t(t),arguments.length===1&&(e=qT.newId()),KC("doc","path",e),t instanceof bd){const r=Fe.fromString(e,...n);return Cw(r),new yn(t,null,new ne(r))}{if(!(t instanceof yn||t instanceof Di))throw new Y(j.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(Fe.fromString(e,...n));return Cw(r),new yn(t.firestore,t instanceof Di?t.converter:null,new ne(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $M{constructor(){this.iu=Promise.resolve(),this.su=[],this.ou=!1,this._u=[],this.au=null,this.uu=!1,this.cu=!1,this.lu=[],this.Yo=new PC(this,"async_queue_retry"),this.hu=()=>{const n=qf();n&&J("AsyncQueue","Visibility state changed to "+n.visibilityState),this.Yo.Wo()};const e=qf();e&&typeof e.addEventListener=="function"&&e.addEventListener("visibilitychange",this.hu)}get isShuttingDown(){return this.ou}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.Pu(),this.Iu(e)}enterRestrictedMode(e){if(!this.ou){this.ou=!0,this.cu=e||!1;const n=qf();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.hu)}}enqueue(e){if(this.Pu(),this.ou)return new Promise(()=>{});const n=new Li;return this.Iu(()=>this.ou&&this.cu?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.su.push(e),this.Tu()))}async Tu(){if(this.su.length!==0){try{await this.su[0](),this.su.shift(),this.Yo.reset()}catch(e){if(!Iu(e))throw e;J("AsyncQueue","Operation failed with retryable error: "+e)}this.su.length>0&&this.Yo.$o(()=>this.Tu())}}Iu(e){const n=this.iu.then(()=>(this.uu=!0,e().catch(r=>{this.au=r,this.uu=!1;const i=function(o){let a=o.message||"";return o.stack&&(a=o.stack.includes(o.message)?o.stack:o.message+`
`+o.stack),a}(r);throw Hr("INTERNAL UNHANDLED ERROR: ",i),r}).then(r=>(this.uu=!1,r))));return this.iu=n,n}enqueueAfterDelay(e,n,r){this.Pu(),this.lu.indexOf(e)>-1&&(n=0);const i=fy.createAndSchedule(this,e,n,r,s=>this.Eu(s));return this._u.push(i),i}Pu(){this.au&&le()}verifyOperationInProgress(){}async du(){let e;do e=this.iu,await e;while(e!==this.iu)}Au(e){for(const n of this._u)if(n.timerId===e)return!0;return!1}Ru(e){return this.du().then(()=>{this._u.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(const n of this._u)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.du()})}Vu(e){this.lu.push(e)}Eu(e){const n=this._u.indexOf(e);this._u.splice(n,1)}}class Td extends bd{constructor(e,n,r,i){super(e,n,r,i),this.type="firestore",this._queue=function(){return new $M}(),this._persistenceKey=(i==null?void 0:i.name)||"[DEFAULT]"}_terminate(){return this._firestoreClient||YC(this),this._firestoreClient.terminate()}}function FM(t,e){const n=typeof t=="object"?t:tT(),r=typeof t=="string"?t:"(default)",i=Ug(n,"firestore").getImmediate({identifier:r});if(!i._initialized){const s=hR("firestore");s&&UM(i,...s)}return i}function XC(t){return t._firestoreClient||YC(t),t._firestoreClient.verifyNotTerminated(),t._firestoreClient}function YC(t){var e,n,r;const i=t._freezeSettings(),s=function(a,l,c,h){return new p4(a,l,c,h.host,h.ssl,h.experimentalForceLongPolling,h.experimentalAutoDetectLongPolling,GC(h.experimentalLongPollingOptions),h.useFetchStreams)}(t._databaseId,((e=t._app)===null||e===void 0?void 0:e.options.appId)||"",t._persistenceKey,i);t._firestoreClient=new RM(t._authCredentials,t._appCheckCredentials,t._queue,s),!((n=i.localCache)===null||n===void 0)&&n._offlineComponentProvider&&(!((r=i.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(t._firestoreClient._uninitializedComponentsProvider={_offlineKind:i.localCache.kind,_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ca{constructor(e){this._byteString=e}static fromBase64String(e){try{return new ca(Ht.fromBase64String(e))}catch(n){throw new Y(j.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new ca(Ht.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cd{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new Y(j.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Pt(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vy{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _y{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new Y(j.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new Y(j.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return Ae(this._lat,e._lat)||Ae(this._long,e._long)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jM=/^__.*__$/;class zM{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return this.fieldMask!==null?new ts(e,this.data,this.fieldMask,n,this.fieldTransforms):new Su(e,this.data,n,this.fieldTransforms)}}class JC{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return new ts(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function ZC(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw le()}}class wy{constructor(e,n,r,i,s,o){this.settings=e,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=i,s===void 0&&this.mu(),this.fieldTransforms=s||[],this.fieldMask=o||[]}get path(){return this.settings.path}get fu(){return this.settings.fu}gu(e){return new wy(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}pu(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),i=this.gu({path:r,yu:!1});return i.wu(e),i}Su(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),i=this.gu({path:r,yu:!1});return i.mu(),i}bu(e){return this.gu({path:void 0,yu:!0})}Du(e){return Mh(e,this.settings.methodName,this.settings.Cu||!1,this.path,this.settings.vu)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}mu(){if(this.path)for(let e=0;e<this.path.length;e++)this.wu(this.path.get(e))}wu(e){if(e.length===0)throw this.Du("Document fields must not be empty");if(ZC(this.fu)&&jM.test(e))throw this.Du('Document fields cannot begin and end with "__"')}}class BM{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=r||vd(e)}Fu(e,n,r,i=!1){return new wy({fu:e,methodName:n,vu:r,path:Pt.emptyPath(),yu:!1,Cu:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Ey(t){const e=t._freezeSettings(),n=vd(t._databaseId);return new BM(t._databaseId,!!e.ignoreUndefinedProperties,n)}function HM(t,e,n,r,i,s={}){const o=t.Fu(s.merge||s.mergeFields?2:0,e,n,i);by("Data must be an object, but it was:",o,r);const a=eI(r,o);let l,c;if(s.merge)l=new mn(o.fieldMask),c=o.fieldTransforms;else if(s.mergeFields){const h=[];for(const f of s.mergeFields){const p=Cm(e,f,n);if(!o.contains(p))throw new Y(j.INVALID_ARGUMENT,`Field '${p}' is specified in your field mask but missing from your input data.`);nI(h,p)||h.push(p)}l=new mn(h),c=o.fieldTransforms.filter(f=>l.covers(f.field))}else l=null,c=o.fieldTransforms;return new zM(new rn(a),l,c)}class Id extends vy{_toFieldTransform(e){if(e.fu!==2)throw e.fu===1?e.Du(`${this._methodName}() can only appear at the top level of your update data`):e.Du(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof Id}}function WM(t,e,n,r){const i=t.Fu(1,e,n);by("Data must be an object, but it was:",i,r);const s=[],o=rn.empty();Ks(r,(l,c)=>{const h=Ty(e,l,n);c=_t(c);const f=i.Su(h);if(c instanceof Id)s.push(h);else{const p=Pu(c,f);p!=null&&(s.push(h),o.set(h,p))}});const a=new mn(s);return new JC(o,a,i.fieldTransforms)}function qM(t,e,n,r,i,s){const o=t.Fu(1,e,n),a=[Cm(e,r,n)],l=[i];if(s.length%2!=0)throw new Y(j.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let p=0;p<s.length;p+=2)a.push(Cm(e,s[p])),l.push(s[p+1]);const c=[],h=rn.empty();for(let p=a.length-1;p>=0;--p)if(!nI(c,a[p])){const _=a[p];let E=l[p];E=_t(E);const I=o.Su(_);if(E instanceof Id)c.push(_);else{const R=Pu(E,I);R!=null&&(c.push(_),h.set(_,R))}}const f=new mn(c);return new JC(h,f,o.fieldTransforms)}function GM(t,e,n,r=!1){return Pu(n,t.Fu(r?4:3,e))}function Pu(t,e){if(tI(t=_t(t)))return by("Unsupported field value:",e,t),eI(t,e);if(t instanceof vy)return function(r,i){if(!ZC(i.fu))throw i.Du(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.Du(`${r._methodName}() is not currently supported inside arrays`);const s=r._toFieldTransform(i);s&&i.fieldTransforms.push(s)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.yu&&e.fu!==4)throw e.Du("Nested arrays are not supported");return function(r,i){const s=[];let o=0;for(const a of r){let l=Pu(a,i.bu(o));l==null&&(l={nullValue:"NULL_VALUE"}),s.push(l),o++}return{arrayValue:{values:s}}}(t,e)}return function(r,i){if((r=_t(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return D4(i.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const s=mt.fromDate(r);return{timestampValue:Lh(i.serializer,s)}}if(r instanceof mt){const s=new mt(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:Lh(i.serializer,s)}}if(r instanceof _y)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof ca)return{bytesValue:EC(i.serializer,r._byteString)};if(r instanceof yn){const s=i.databaseId,o=r.firestore._databaseId;if(!o.isEqual(s))throw i.Du(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${s.projectId}/${s.database}`);return{referenceValue:sy(r.firestore._databaseId||i.databaseId,r._key.path)}}throw i.Du(`Unsupported field value: ${Ed(r)}`)}(t,e)}function eI(t,e){const n={};return GT(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Ks(t,(r,i)=>{const s=Pu(i,e.pu(r));s!=null&&(n[r]=s)}),{mapValue:{fields:n}}}function tI(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof mt||t instanceof _y||t instanceof ca||t instanceof yn||t instanceof vy)}function by(t,e,n){if(!tI(n)||!function(i){return typeof i=="object"&&i!==null&&(Object.getPrototypeOf(i)===Object.prototype||Object.getPrototypeOf(i)===null)}(n)){const r=Ed(n);throw r==="an object"?e.Du(t+" a custom object"):e.Du(t+" "+r)}}function Cm(t,e,n){if((e=_t(e))instanceof Cd)return e._internalPath;if(typeof e=="string")return Ty(t,e);throw Mh("Field path arguments must be of type string or ",t,!1,void 0,n)}const KM=new RegExp("[~\\*/\\[\\]]");function Ty(t,e,n){if(e.search(KM)>=0)throw Mh(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new Cd(...e.split("."))._internalPath}catch{throw Mh(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function Mh(t,e,n,r,i){const s=r&&!r.isEmpty(),o=i!==void 0;let a=`Function ${e}() called with invalid data`;n&&(a+=" (via `toFirestore()`)"),a+=". ";let l="";return(s||o)&&(l+=" (found",s&&(l+=` in field ${r}`),o&&(l+=` in document ${i}`),l+=")"),new Y(j.INVALID_ARGUMENT,a+t+l)}function nI(t,e){return t.some(n=>n.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rI{constructor(e,n,r,i,s){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=i,this._converter=s}get id(){return this._key.path.lastSegment()}get ref(){return new yn(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new QM(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(Sd("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class QM extends rI{data(){return super.data()}}function Sd(t,e){return typeof e=="string"?Ty(t,e):e instanceof Cd?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function XM(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new Y(j.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class Cy{}class iI extends Cy{}function sI(t,e,...n){let r=[];e instanceof Cy&&r.push(e),r=r.concat(n),function(s){const o=s.filter(l=>l instanceof Iy).length,a=s.filter(l=>l instanceof Ad).length;if(o>1||o>0&&a>0)throw new Y(j.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(const i of r)t=i._apply(t);return t}class Ad extends iI{constructor(e,n,r){super(),this._field=e,this._op=n,this._value=r,this.type="where"}static _create(e,n,r){return new Ad(e,n,r)}_apply(e){const n=this._parse(e);return oI(e._query,n),new Xs(e.firestore,e.converter,mm(e._query,n))}_parse(e){const n=Ey(e.firestore);return function(s,o,a,l,c,h,f){let p;if(c.isKeyField()){if(h==="array-contains"||h==="array-contains-any")throw new Y(j.INVALID_ARGUMENT,`Invalid Query. You can't perform '${h}' queries on documentId().`);if(h==="in"||h==="not-in"){xw(f,h);const _=[];for(const E of f)_.push(Aw(l,s,E));p={arrayValue:{values:_}}}else p=Aw(l,s,f)}else h!=="in"&&h!=="not-in"&&h!=="array-contains-any"||xw(f,h),p=GM(a,o,f,h==="in"||h==="not-in");return ct.create(c,h,p)}(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}}function YM(t,e,n){const r=e,i=Sd("where",t);return Ad._create(i,r,n)}class Iy extends Cy{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new Iy(e,n)}_parse(e){const n=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return n.length===1?n[0]:Yn.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return n.getFilters().length===0?e:(function(i,s){let o=i;const a=s.getFlattenedFilters();for(const l of a)oI(o,l),o=mm(o,l)}(e._query,n),new Xs(e.firestore,e.converter,mm(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class Sy extends iI{constructor(e,n){super(),this._field=e,this._direction=n,this.type="orderBy"}static _create(e,n){return new Sy(e,n)}_apply(e){const n=function(i,s,o){if(i.startAt!==null)throw new Y(j.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(i.endAt!==null)throw new Y(j.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new au(s,o)}(e._query,this._field,this._direction);return new Xs(e.firestore,e.converter,function(i,s){const o=i.explicitOrderBy.concat([s]);return new Ta(i.path,i.collectionGroup,o,i.filters.slice(),i.limit,i.limitType,i.startAt,i.endAt)}(e._query,n))}}function JM(t,e="asc"){const n=e,r=Sd("orderBy",t);return Sy._create(r,n)}function Aw(t,e,n){if(typeof(n=_t(n))=="string"){if(n==="")throw new Y(j.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!rC(e)&&n.indexOf("/")!==-1)throw new Y(j.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const r=e.path.child(Fe.fromString(n));if(!ne.isDocumentKey(r))throw new Y(j.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return X0(t,new ne(r))}if(n instanceof yn)return X0(t,n._key);throw new Y(j.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Ed(n)}.`)}function xw(t,e){if(!Array.isArray(t)||t.length===0)throw new Y(j.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function oI(t,e){const n=function(i,s){for(const o of i)for(const a of o.getFlattenedFilters())if(s.indexOf(a.op)>=0)return a.op;return null}(t.filters,function(i){switch(i){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(n!==null)throw n===e.op?new Y(j.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new Y(j.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}class ZM{convertValue(e,n="none"){switch(Bs(e)){case 0:return null;case 1:return e.booleanValue;case 2:return lt(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(zs(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 10:return this.convertObject(e.mapValue,n);default:throw le()}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const r={};return Ks(e,(i,s)=>{r[i]=this.convertValue(s,n)}),r}convertGeoPoint(e){return new _y(lt(e.latitude),lt(e.longitude))}convertArray(e,n){return(e.values||[]).map(r=>this.convertValue(r,n))}convertServerTimestamp(e,n){switch(n){case"previous":const r=Zg(e);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(iu(e));default:return null}}convertTimestamp(e){const n=Bi(e);return new mt(n.seconds,n.nanos)}convertDocumentKey(e,n){const r=Fe.fromString(e);De(AC(r));const i=new su(r.get(1),r.get(3)),s=new ne(r.popFirst(5));return i.isEqual(n)||Hr(`Document ${s} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function e3(t,e,n){let r;return r=t?t.toFirestore(e):e,r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wc{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class t3 extends rI{constructor(e,n,r,i,s,o){super(e,n,r,i,o),this._firestore=e,this._firestoreImpl=e,this.metadata=s}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new qc(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const r=this._document.data.field(Sd("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}}class qc extends t3{data(e={}){return super.data(e)}}class n3{constructor(e,n,r,i){this._firestore=e,this._userDataWriter=n,this._snapshot=i,this.metadata=new wc(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){const e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(r=>{e.call(n,new qc(this._firestore,this._userDataWriter,r.key,r,new wc(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new Y(j.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(i,s){if(i._snapshot.oldDocs.isEmpty()){let o=0;return i._snapshot.docChanges.map(a=>{const l=new qc(i._firestore,i._userDataWriter,a.doc.key,a.doc,new wc(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter);return a.doc,{type:"added",doc:l,oldIndex:-1,newIndex:o++}})}{let o=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(a=>s||a.type!==3).map(a=>{const l=new qc(i._firestore,i._userDataWriter,a.doc.key,a.doc,new wc(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter);let c=-1,h=-1;return a.type!==0&&(c=o.indexOf(a.doc.key),o=o.delete(a.doc.key)),a.type!==1&&(o=o.add(a.doc),h=o.indexOf(a.doc.key)),{type:r3(a.type),doc:l,oldIndex:c,newIndex:h}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}}function r3(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return le()}}class i3 extends ZM{constructor(e){super(),this.firestore=e}convertBytes(e){return new ca(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new yn(this.firestore,null,n)}}function aI(t){t=ua(t,Xs);const e=ua(t.firestore,Td),n=XC(e),r=new i3(e);return XM(t._query),MM(n,t._query).then(i=>new n3(e,r,t,i))}function s3(t,e,n,...r){t=ua(t,yn);const i=ua(t.firestore,Td),s=Ey(i);let o;return o=typeof(e=_t(e))=="string"||e instanceof Cd?qM(s,"updateDoc",t._key,e,n,r):WM(s,"updateDoc",t._key,e),lI(i,[o.toMutation(t._key,hr.exists(!0))])}function o3(t,e){const n=ua(t.firestore,Td),r=QC(t),i=e3(t.converter,e);return lI(n,[HM(Ey(t.firestore),"addDoc",r._key,i,t.converter!==null,{}).toMutation(r._key,hr.exists(!1))]).then(()=>r)}function lI(t,e){return function(r,i){const s=new Li;return r.asyncQueue.enqueueAndForget(async()=>EM(await LM(r),i,s)),s.promise}(XC(t),e)}(function(e,n=!0){(function(i){ba=i})(wa),na(new Vs("firestore",(r,{instanceIdentifier:i,options:s})=>{const o=r.getProvider("app").getImmediate(),a=new Td(new ZL(r.getProvider("auth-internal")),new r4(r.getProvider("app-check-internal")),function(c,h){if(!Object.prototype.hasOwnProperty.apply(c.options,["projectId"]))throw new Y(j.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new su(c.options.projectId,h)}(o,i),o);return s=Object.assign({useFetchStreams:n},s),a._setSettings(s),a},"PUBLIC").setMultipleInstances(!0)),Oi(q0,"4.6.3",e),Oi(q0,"4.6.3","esm2017")})();const a3={apiKey:"AIzaSyDKuvPzNmeXlqxNRyciKVdLetWxjNVjDnQ",authDomain:"edelgram-e14a7.firebaseapp.com",projectId:"edelgram-e14a7",storageBucket:"edelgram-e14a7.appspot.com",messagingSenderId:"524024204359",appId:"1:524024204359:web:23b7b1b859d1cc81e13562"},uI=eT(a3),Ru=VT(uI),xd=FM(uI),cI=(t,e)=>DO(Ru,t,e),hI=(t,e)=>LO(Ru,t,e),dI=()=>{UO(Ru)},fI=()=>{const t=new kr;return sL(Ru,t)},pI=L.createContext({user:null,logIn:cI,signUp:hI,logOut:dI,googleSignIn:fI}),l3=({children:t})=>{const[e,n]=L.useState(null);L.useEffect(()=>{const i=IT(Ru,s=>(s&&(console.log("The logged in user state is:",s),n(s)),()=>{i()}))},[]);const r={user:e,logIn:cI,signUp:hI,logOut:dI,googleSignIn:fI};return A.jsx(pI.Provider,{value:r,children:t})},ns=()=>L.useContext(pI),u3="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20fill='none'%20viewBox='0%200%2024%2024'%20stroke-width='1.5'%20stroke='currentColor'%20class='size-6'%3e%3cpath%20stroke-linecap='round'%20stroke-linejoin='round'%20d='M8.25%209V5.25A2.25%202.25%200%200%201%2010.5%203h6a2.25%202.25%200%200%201%202.25%202.25v13.5A2.25%202.25%200%200%201%2016.5%2021h-6a2.25%202.25%200%200%201-2.25-2.25V15m-3%200-3-3m0%200%203-3m-3%203H15'%20/%3e%3c/svg%3e",c3=()=>{const{pathname:t}=Gs(),{logOut:e}=ns();return A.jsxs("nav",{className:"flex flex-col relative h-screen max-w-sm w-full",children:[A.jsx("div",{className:"flex justify-center m-5",children:A.jsx("div",{className:"text-white text-lg",children:"Edelgram"})}),rR.map(n=>A.jsx("div",{className:_n(em({variant:"default"}),t===n.link?"bg-white text-white-800 hover:bg-white rounded-none":"hover:bg-slate-950 hover:text-white bg-transparent rounded-none","justify-start"),children:A.jsxs(Eh,{to:n.link,className:"flex",children:[A.jsx("span",{children:A.jsx("img",{src:n.icon,alt:n.name,className:"w-5 h-5 mr-2",style:{filter:`${t===n.link?"invert(0)":"invert(1)"}`}})}),A.jsx("span",{children:n.name})]})},n.name)),A.jsx("div",{className:_n(em({variant:"default"}),t==="/edelgram/login"?"bg-white text-white-800 hover:bg-white rounded-none":"hover:bg-slate-950 hover:text-white bg-transparent rounded-none","justify-start"),children:A.jsxs(Eh,{to:"/edelgram/login",className:"flex",onClick:e,children:[A.jsx("span",{children:A.jsx("img",{src:u3,className:"w-5 h-5 mr-2",alt:"Logout",style:{filter:`${t==="/edelgram/login"?"invert(0)":"invert(1)"}`}})}),A.jsx("span",{children:"Logout"})]})})]})},h3=()=>A.jsx("div",{children:"UserList"}),kd=({children:t})=>A.jsxs("div",{className:"flex bg-white",children:[A.jsx("aside",{className:"flex gap-x-4 bg-gray-800 fixed top-0 left-0 z-40 lg:w-60 h-screen",children:A.jsx(c3,{})}),A.jsx("div",{className:"lg:ml-60 lg:mr-60 p-8 flex-1 ml-36",children:t}),A.jsx("aside",{className:"hidden lg:block bg-gray-800 fixed top-0 right-0 z-40 lg:w-60 h-screen",children:A.jsx(h3,{})})]}),Pd=L.forwardRef(({className:t,...e},n)=>A.jsx("div",{ref:n,className:_n("rounded-lg border bg-card text-card-foreground shadow-sm",t),...e}));Pd.displayName="Card";const Rd=L.forwardRef(({className:t,...e},n)=>A.jsx("div",{ref:n,className:_n("flex flex-col space-y-1.5 p-6",t),...e}));Rd.displayName="CardHeader";const Nd=L.forwardRef(({className:t,...e},n)=>A.jsx("h3",{ref:n,className:_n("text-2xl font-semibold leading-none tracking-tight",t),...e}));Nd.displayName="CardTitle";const Ay=L.forwardRef(({className:t,...e},n)=>A.jsx("p",{ref:n,className:_n("text-sm text-muted-foreground",t),...e}));Ay.displayName="CardDescription";const Od=L.forwardRef(({className:t,...e},n)=>A.jsx("div",{ref:n,className:_n("p-6 pt-0",t),...e}));Od.displayName="CardContent";const Ld=L.forwardRef(({className:t,...e},n)=>A.jsx("div",{ref:n,className:_n("flex items-center p-6 pt-0",t),...e}));Ld.displayName="CardFooter";const Dd="/edelgram/assets/image2-n_CPjltO.jpg";/**
 * @license lucide-react v0.390.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const d3=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),mI=(...t)=>t.filter((e,n,r)=>!!e&&r.indexOf(e)===n).join(" ");/**
 * @license lucide-react v0.390.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var f3={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.390.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const p3=L.forwardRef(({color:t="currentColor",size:e=24,strokeWidth:n=2,absoluteStrokeWidth:r,className:i="",children:s,iconNode:o,...a},l)=>L.createElement("svg",{ref:l,...f3,width:e,height:e,stroke:t,strokeWidth:r?Number(n)*24/Number(e):n,className:mI("lucide",i),...a},[...o.map(([c,h])=>L.createElement(c,h)),...Array.isArray(s)?s:[s]]));/**
 * @license lucide-react v0.390.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Md=(t,e)=>{const n=L.forwardRef(({className:r,...i},s)=>L.createElement(p3,{ref:s,iconNode:e,className:mI(`lucide-${d3(t)}`,r),...i}));return n.displayName=`${t}`,n};/**
 * @license lucide-react v0.390.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gI=Md("Heart",[["path",{d:"M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.3 1.5 4.05 3 5.5l7 7Z",key:"c3ymky"}]]);/**
 * @license lucide-react v0.390.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const m3=Md("MessageCircle",[["path",{d:"M7.9 20A9 9 0 1 0 4 16.1L2 22Z",key:"vv11sd"}]]);/**
 * @license lucide-react v0.390.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const g3=Md("Pen",[["path",{d:"M17 3a2.85 2.83 0 1 1 4 4L7.5 20.5 2 22l1.5-5.5Z",key:"5qss01"}]]);/**
 * @license lucide-react v0.390.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const y3=Md("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]),Vd="posts",v3=t=>o3(yy(xd,Vd),t),_3=async()=>{try{const t=sI(yy(xd,Vd),JM("date","desc")),e=await aI(t),n=[];return e.forEach(r=>{const i=r.data(),s={id:r.id,...i};n.push(s)}),n}catch(t){console.error(t)}},w3=t=>{const e=sI(yy(xd,Vd),YM("userId","==",t));return aI(e)},E3=(t,e,n)=>{const r=QC(xd,Vd,t);return s3(r,{userLikes:e,likes:n})},b3=({item:t})=>{const{user:e}=ns(),[n,r]=L.useState({likes:t.likes,isLike:e!=null&&e.uid?t.userLikes.includes(e==null?void 0:e.uid):!1}),i=async s=>{if(r({likes:s?n.likes+1:n.likes-1,isLike:!n.isLike}),s&&(e!=null&&e.uid))t.userLikes.push(e==null?void 0:e.uid);else{const o=t.userLikes.indexOf(e.uid);o!==-1&&t.userLikes.splice(o)}t.id&&await E3(t.id,t.userLikes,s?n.likes+1:n.likes-1)};return A.jsx(A.Fragment,{children:A.jsxs(Pd,{className:"mb-6",children:[A.jsx(Rd,{className:"flex flex-col p-3",children:A.jsxs(Nd,{className:"text-sm text-center flex justify-start items-center",children:[A.jsx("span",{className:"mr-2",children:A.jsx("img",{src:Dd,className:"w-10 h-10 rounded-full border-2 border-slate-800 object-cover",alt:"image"})}),A.jsx("span",{children:"user"})]})}),A.jsx(Od,{className:"p-0",children:A.jsx("img",{src:t.photos?t.photos[0].cdnUrl??void 0:"",alt:""})}),A.jsxs(Ld,{className:"flex flex-col p-3",children:[A.jsxs("div",{className:"flex justify-start w-full mb-3",children:[A.jsx(gI,{className:_n("mr-3","cursor-pointer",n.isLike?"fill-red-400":"fill-none"),onClick:()=>i(!n.isLike)}),A.jsx(m3,{className:"mr-3 cursor-pointer"})]}),A.jsxs("div",{className:"w-full text-sm",children:[n.likes," likes"]}),A.jsxs("div",{className:"w-full text-sm",children:[A.jsx("span",{children:"user"}),": ",t.caption]})]})]})})},xy="/edelgram/assets/image1-CoqYZn9M.jpg",ky="/edelgram/assets/image3-DgA0XuPA.jpg",Lo="/edelgram/assets/image4-C82QDRdx.jpg",kw="/edelgram/assets/image5-DZOQ_6Ay.jpg",Pw="/edelgram/assets/image6-D7ViGmDS.jpg",Im="/edelgram/assets/image7-Bo2YHah9.jpg",T3=()=>A.jsxs("div",{className:"flex gap-x-6",children:[A.jsx("img",{className:"w-20 h-20 rounded-full border-4 border-slate-800 object-cover",src:xy,alt:"image"}),A.jsx("img",{className:"w-20 h-20 rounded-full border-4 border-slate-800 object-cover",src:Dd,alt:"image"}),A.jsx("img",{className:"w-20 h-20 rounded-full border-4 border-slate-800 object-cover",src:ky,alt:"image"}),A.jsx("img",{className:"w-20 h-20 rounded-full border-4 border-slate-800 object-cover",src:Lo,alt:"image"}),A.jsx("img",{className:"w-20 h-20 rounded-full border-4 border-slate-800 object-cover",src:kw,alt:"image"}),A.jsx("img",{className:"w-20 h-20 rounded-full border-4 border-slate-800 object-cover",src:Pw,alt:"image"}),A.jsx("img",{className:"w-20 h-20 rounded-full border-4 border-slate-800 object-cover",src:Im,alt:"image"}),A.jsx("img",{className:"w-20 h-20 rounded-full border-4 border-slate-800 object-cover",src:Lo,alt:"image"}),A.jsx("img",{className:"w-20 h-20 rounded-full border-4 border-slate-800 object-cover",src:kw,alt:"image"}),A.jsx("img",{className:"w-20 h-20 rounded-full border-4 border-slate-800 object-cover",src:Pw,alt:"image"}),A.jsx("img",{className:"w-20 h-20 rounded-full border-4 border-slate-800 object-cover",src:Im,alt:"image"}),A.jsx("img",{className:"w-20 h-20 rounded-full border-4 border-slate-800 object-cover",src:Lo,alt:"image"}),A.jsx("img",{className:"w-20 h-20 rounded-full border-4 border-slate-800 object-cover",src:Lo,alt:"image"})]}),As=L.forwardRef(({className:t,type:e,...n},r)=>A.jsx("input",{type:e,className:_n("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",t),ref:r,...n}));As.displayName="Input";const C3=()=>{const{user:t}=ns(),[e,n]=L.useState([]),r=async()=>{const i=await _3()||[];n(i)};return L.useEffect(()=>{t!==null&&r()},[t]),A.jsx(kd,{children:A.jsxs("div",{className:"flex flex-col",children:[A.jsxs("div",{className:"relative mb-6 w-full text-gray-600",children:[A.jsx(As,{className:"border-2 border-gray-300 bg-white h-10 px-5 pr-16 rounded-sm text-base focus:outline-none",placeholder:"Search...",type:"search",name:"search"}),A.jsx("button",{className:"absolute right-2.5 top-2.5",type:"submit",children:A.jsx(y3,{className:"w-5 h-5 text-gray-400"})})]}),A.jsxs("div",{className:"mb-6",children:[A.jsx("h2",{className:"mb-5",children:"Stories"}),A.jsx(T3,{})]}),A.jsxs("div",{className:"mb-5",children:[A.jsx("h2",{className:"mb-5",children:"Feed"}),A.jsx("div",{className:"w-full flex justify-center",children:A.jsx("div",{className:"flex flex-col max-w-sm rounded-sm overflow-hidden",children:e?e.map(i=>A.jsx(b3,{item:i},i.id)):A.jsx("p",{children:"Loading..."})})})]})]})})},fo=()=>A.jsx("div",{children:"Error"}),I3=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","span","svg","ul"],S3=I3.reduce((t,e)=>{const n=L.forwardRef((r,i)=>{const{asChild:s,...o}=r,a=s?Dg:e;return L.useEffect(()=>{window[Symbol.for("radix-ui")]=!0},[]),L.createElement(a,ta({},o,{ref:i}))});return n.displayName=`Primitive.${e}`,{...t,[e]:n}},{}),A3=L.forwardRef((t,e)=>L.createElement(S3.label,ta({},t,{ref:e,onMouseDown:n=>{var r;(r=t.onMouseDown)===null||r===void 0||r.call(t,n),!n.defaultPrevented&&n.detail>1&&n.preventDefault()}}))),yI=A3,x3=Wb("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),Mi=L.forwardRef(({className:t,...e},n)=>A.jsx(yI,{ref:n,className:_n(x3(),t),...e}));Mi.displayName=yI.displayName;const vI={logo:t=>A.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 256 256",...t,children:[A.jsx("rect",{width:"256",height:"256",fill:"none"}),A.jsx("line",{x1:"208",y1:"128",x2:"128",y2:"208",fill:"none",stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"16"}),A.jsx("line",{x1:"192",y1:"40",x2:"40",y2:"192",fill:"none",stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"16"})]}),twitter:t=>A.jsx("svg",{...t,height:"23",viewBox:"0 0 1200 1227",width:"23",xmlns:"http://www.w3.org/2000/svg",children:A.jsx("path",{d:"M714.163 519.284L1160.89 0H1055.03L667.137 450.887L357.328 0H0L468.492 681.821L0 1226.37H105.866L515.491 750.218L842.672 1226.37H1200L714.137 519.284H714.163ZM569.165 687.828L521.697 619.934L144.011 79.6944H306.615L611.412 515.685L658.88 583.579L1055.08 1150.3H892.476L569.165 687.854V687.828Z"})}),gitHub:t=>A.jsx("svg",{viewBox:"0 0 438.549 438.549",...t,children:A.jsx("path",{fill:"currentColor",d:"M409.132 114.573c-19.608-33.596-46.205-60.194-79.798-79.8-33.598-19.607-70.277-29.408-110.063-29.408-39.781 0-76.472 9.804-110.063 29.408-33.596 19.605-60.192 46.204-79.8 79.8C9.803 148.168 0 184.854 0 224.63c0 47.78 13.94 90.745 41.827 128.906 27.884 38.164 63.906 64.572 108.063 79.227 5.14.954 8.945.283 11.419-1.996 2.475-2.282 3.711-5.14 3.711-8.562 0-.571-.049-5.708-.144-15.417a2549.81 2549.81 0 01-.144-25.406l-6.567 1.136c-4.187.767-9.469 1.092-15.846 1-6.374-.089-12.991-.757-19.842-1.999-6.854-1.231-13.229-4.086-19.13-8.559-5.898-4.473-10.085-10.328-12.56-17.556l-2.855-6.57c-1.903-4.374-4.899-9.233-8.992-14.559-4.093-5.331-8.232-8.945-12.419-10.848l-1.999-1.431c-1.332-.951-2.568-2.098-3.711-3.429-1.142-1.331-1.997-2.663-2.568-3.997-.572-1.335-.098-2.43 1.427-3.289 1.525-.859 4.281-1.276 8.28-1.276l5.708.853c3.807.763 8.516 3.042 14.133 6.851 5.614 3.806 10.229 8.754 13.846 14.842 4.38 7.806 9.657 13.754 15.846 17.847 6.184 4.093 12.419 6.136 18.699 6.136 6.28 0 11.704-.476 16.274-1.423 4.565-.952 8.848-2.383 12.847-4.285 1.713-12.758 6.377-22.559 13.988-29.41-10.848-1.14-20.601-2.857-29.264-5.14-8.658-2.286-17.605-5.996-26.835-11.14-9.235-5.137-16.896-11.516-22.985-19.126-6.09-7.614-11.088-17.61-14.987-29.979-3.901-12.374-5.852-26.648-5.852-42.826 0-23.035 7.52-42.637 22.557-58.817-7.044-17.318-6.379-36.732 1.997-58.24 5.52-1.715 13.706-.428 24.554 3.853 10.85 4.283 18.794 7.952 23.84 10.994 5.046 3.041 9.089 5.618 12.135 7.708 17.705-4.947 35.976-7.421 54.818-7.421s37.117 2.474 54.823 7.421l10.849-6.849c7.419-4.57 16.18-8.758 26.262-12.565 10.088-3.805 17.802-4.853 23.134-3.138 8.562 21.509 9.325 40.922 2.279 58.24 15.036 16.18 22.559 35.787 22.559 58.817 0 16.178-1.958 30.497-5.853 42.966-3.9 12.471-8.941 22.457-15.125 29.979-6.191 7.521-13.901 13.85-23.131 18.986-9.232 5.14-18.182 8.85-26.84 11.136-8.662 2.286-18.415 4.004-29.263 5.146 9.894 8.562 14.842 22.077 14.842 40.539v60.237c0 3.422 1.19 6.279 3.572 8.562 2.379 2.279 6.136 2.95 11.276 1.995 44.163-14.653 80.185-41.062 108.068-79.226 27.88-38.161 41.825-81.126 41.825-128.906-.01-39.771-9.818-76.454-29.414-110.049z"})}),radix:t=>A.jsxs("svg",{viewBox:"0 0 25 25",fill:"none",...t,children:[A.jsx("path",{d:"M12 25C7.58173 25 4 21.4183 4 17C4 12.5817 7.58173 9 12 9V25Z",fill:"currentcolor"}),A.jsx("path",{d:"M12 0H4V8H12V0Z",fill:"currentcolor"}),A.jsx("path",{d:"M17 8C19.2091 8 21 6.20914 21 4C21 1.79086 19.2091 0 17 0C14.7909 0 13 1.79086 13 4C13 6.20914 14.7909 8 17 8Z",fill:"currentcolor"})]}),aria:t=>A.jsx("svg",{role:"img",viewBox:"0 0 24 24",fill:"currentColor",...t,children:A.jsx("path",{d:"M13.966 22.624l-1.69-4.281H8.122l3.892-9.144 5.662 13.425zM8.884 1.376H0v21.248zm15.116 0h-8.884L24 22.624Z"})}),npm:t=>A.jsx("svg",{viewBox:"0 0 24 24",...t,children:A.jsx("path",{d:"M1.763 0C.786 0 0 .786 0 1.763v20.474C0 23.214.786 24 1.763 24h20.474c.977 0 1.763-.786 1.763-1.763V1.763C24 .786 23.214 0 22.237 0zM5.13 5.323l13.837.019-.009 13.836h-3.464l.01-10.382h-3.456L12.04 19.17H5.113z",fill:"currentColor"})}),yarn:t=>A.jsx("svg",{viewBox:"0 0 24 24",...t,children:A.jsx("path",{d:"M12 0C5.375 0 0 5.375 0 12s5.375 12 12 12 12-5.375 12-12S18.625 0 12 0zm.768 4.105c.183 0 .363.053.525.157.125.083.287.185.755 1.154.31-.088.468-.042.551-.019.204.056.366.19.463.375.477.917.542 2.553.334 3.605-.241 1.232-.755 2.029-1.131 2.576.324.329.778.899 1.117 1.825.278.774.31 1.478.273 2.015a5.51 5.51 0 0 0 .602-.329c.593-.366 1.487-.917 2.553-.931.714-.009 1.269.445 1.353 1.103a1.23 1.23 0 0 1-.945 1.362c-.649.158-.95.278-1.821.843-1.232.797-2.539 1.242-3.012 1.39a1.686 1.686 0 0 1-.704.343c-.737.181-3.266.315-3.466.315h-.046c-.783 0-1.214-.241-1.45-.491-.658.329-1.51.19-2.122-.134a1.078 1.078 0 0 1-.58-1.153 1.243 1.243 0 0 1-.153-.195c-.162-.25-.528-.936-.454-1.946.056-.723.556-1.367.88-1.71a5.522 5.522 0 0 1 .408-2.256c.306-.727.885-1.348 1.32-1.737-.32-.537-.644-1.367-.329-2.21.227-.602.412-.936.82-1.08h-.005c.199-.074.389-.153.486-.259a3.418 3.418 0 0 1 2.298-1.103c.037-.093.079-.185.125-.283.31-.658.639-1.029 1.024-1.168a.94.94 0 0 1 .328-.06zm.006.7c-.507.016-1.001 1.519-1.001 1.519s-1.27-.204-2.266.871c-.199.218-.468.334-.746.44-.079.028-.176.023-.417.672-.371.991.625 2.094.625 2.094s-1.186.839-1.626 1.881c-.486 1.144-.338 2.261-.338 2.261s-.843.732-.899 1.487c-.051.663.139 1.2.343 1.515.227.343.51.176.51.176s-.561.653-.037.931c.477.25 1.283.394 1.71-.037.31-.31.371-1.001.486-1.283.028-.065.12.111.209.199.097.093.264.195.264.195s-.755.324-.445 1.066c.102.246.468.403 1.066.398.222-.005 2.664-.139 3.313-.296.375-.088.505-.283.505-.283s1.566-.431 2.998-1.357c.917-.598 1.293-.76 2.034-.936.612-.148.57-1.098-.241-1.084-.839.009-1.575.44-2.196.825-1.163.718-1.742.672-1.742.672l-.018-.032c-.079-.13.371-1.293-.134-2.678-.547-1.515-1.413-1.881-1.344-1.997.297-.5 1.038-1.297 1.334-2.78.176-.899.13-2.377-.269-3.151-.074-.144-.732.241-.732.241s-.616-1.371-.788-1.483a.271.271 0 0 0-.157-.046z",fill:"currentColor"})}),pnpm:t=>A.jsx("svg",{viewBox:"0 0 24 24",...t,children:A.jsx("path",{d:"M0 0v7.5h7.5V0zm8.25 0v7.5h7.498V0zm8.25 0v7.5H24V0zM8.25 8.25v7.5h7.498v-7.5zm8.25 0v7.5H24v-7.5zM0 16.5V24h7.5v-7.5zm8.25 0V24h7.498v-7.5zm8.25 0V24H24v-7.5z",fill:"currentColor"})}),react:t=>A.jsx("svg",{viewBox:"0 0 24 24",...t,children:A.jsx("path",{d:"M14.23 12.004a2.236 2.236 0 0 1-2.235 2.236 2.236 2.236 0 0 1-2.236-2.236 2.236 2.236 0 0 1 2.235-2.236 2.236 2.236 0 0 1 2.236 2.236zm2.648-10.69c-1.346 0-3.107.96-4.888 2.622-1.78-1.653-3.542-2.602-4.887-2.602-.41 0-.783.093-1.106.278-1.375.793-1.683 3.264-.973 6.365C1.98 8.917 0 10.42 0 12.004c0 1.59 1.99 3.097 5.043 4.03-.704 3.113-.39 5.588.988 6.38.32.187.69.275 1.102.275 1.345 0 3.107-.96 4.888-2.624 1.78 1.654 3.542 2.603 4.887 2.603.41 0 .783-.09 1.106-.275 1.374-.792 1.683-3.263.973-6.365C22.02 15.096 24 13.59 24 12.004c0-1.59-1.99-3.097-5.043-4.032.704-3.11.39-5.587-.988-6.38-.318-.184-.688-.277-1.092-.278zm-.005 1.09v.006c.225 0 .406.044.558.127.666.382.955 1.835.73 3.704-.054.46-.142.945-.25 1.44-.96-.236-2.006-.417-3.107-.534-.66-.905-1.345-1.727-2.035-2.447 1.592-1.48 3.087-2.292 4.105-2.295zm-9.77.02c1.012 0 2.514.808 4.11 2.28-.686.72-1.37 1.537-2.02 2.442-1.107.117-2.154.298-3.113.538-.112-.49-.195-.964-.254-1.42-.23-1.868.054-3.32.714-3.707.19-.09.4-.127.563-.132zm4.882 3.05c.455.468.91.992 1.36 1.564-.44-.02-.89-.034-1.345-.034-.46 0-.915.01-1.36.034.44-.572.895-1.096 1.345-1.565zM12 8.1c.74 0 1.477.034 2.202.093.406.582.802 1.203 1.183 1.86.372.64.71 1.29 1.018 1.946-.308.655-.646 1.31-1.013 1.95-.38.66-.773 1.288-1.18 1.87-.728.063-1.466.098-2.21.098-.74 0-1.477-.035-2.202-.093-.406-.582-.802-1.204-1.183-1.86-.372-.64-.71-1.29-1.018-1.946.303-.657.646-1.313 1.013-1.954.38-.66.773-1.286 1.18-1.868.728-.064 1.466-.098 2.21-.098zm-3.635.254c-.24.377-.48.763-.704 1.16-.225.39-.435.782-.635 1.174-.265-.656-.49-1.31-.676-1.947.64-.15 1.315-.283 2.015-.386zm7.26 0c.695.103 1.365.23 2.006.387-.18.632-.405 1.282-.66 1.933-.2-.39-.41-.783-.64-1.174-.225-.392-.465-.774-.705-1.146zm3.063.675c.484.15.944.317 1.375.498 1.732.74 2.852 1.708 2.852 2.476-.005.768-1.125 1.74-2.857 2.475-.42.18-.88.342-1.355.493-.28-.958-.646-1.956-1.1-2.98.45-1.017.81-2.01 1.085-2.964zm-13.395.004c.278.96.645 1.957 1.1 2.98-.45 1.017-.812 2.01-1.086 2.964-.484-.15-.944-.318-1.37-.5-1.732-.737-2.852-1.706-2.852-2.474 0-.768 1.12-1.742 2.852-2.476.42-.18.88-.342 1.356-.494zm11.678 4.28c.265.657.49 1.312.676 1.948-.64.157-1.316.29-2.016.39.24-.375.48-.762.705-1.158.225-.39.435-.788.636-1.18zm-9.945.02c.2.392.41.783.64 1.175.23.39.465.772.705 1.143-.695-.102-1.365-.23-2.006-.386.18-.63.406-1.282.66-1.933zM17.92 16.32c.112.493.2.968.254 1.423.23 1.868-.054 3.32-.714 3.708-.147.09-.338.128-.563.128-1.012 0-2.514-.807-4.11-2.28.686-.72 1.37-1.536 2.02-2.44 1.107-.118 2.154-.3 3.113-.54zm-11.83.01c.96.234 2.006.415 3.107.532.66.905 1.345 1.727 2.035 2.446-1.595 1.483-3.092 2.295-4.11 2.295-.22-.005-.406-.05-.553-.132-.666-.38-.955-1.834-.73-3.703.054-.46.142-.944.25-1.438zm4.56.64c.44.02.89.034 1.345.034.46 0 .915-.01 1.36-.034-.44.572-.895 1.095-1.345 1.565-.455-.47-.91-.993-1.36-1.565z",fill:"currentColor"})}),tailwind:t=>A.jsx("svg",{viewBox:"0 0 24 24",...t,children:A.jsx("path",{d:"M12.001,4.8c-3.2,0-5.2,1.6-6,4.8c1.2-1.6,2.6-2.2,4.2-1.8c0.913,0.228,1.565,0.89,2.288,1.624 C13.666,10.618,15.027,12,18.001,12c3.2,0,5.2-1.6,6-4.8c-1.2,1.6-2.6,2.2-4.2,1.8c-0.913-0.228-1.565-0.89-2.288-1.624 C16.337,6.182,14.976,4.8,12.001,4.8z M6.001,12c-3.2,0-5.2,1.6-6,4.8c1.2-1.6,2.6-2.2,4.2-1.8c0.913,0.228,1.565,0.89,2.288,1.624 c1.177,1.194,2.538,2.576,5.512,2.576c3.2,0,5.2-1.6,6-4.8c-1.2,1.6-2.6,2.2-4.2,1.8c-0.913-0.228-1.565-0.89-2.288-1.624 C10.337,13.382,8.976,12,6.001,12z",fill:"currentColor"})}),google:t=>A.jsx("svg",{role:"img",viewBox:"0 0 24 24",...t,children:A.jsx("path",{fill:"currentColor",d:"M12.48 10.92v3.28h7.84c-.24 1.84-.853 3.187-1.787 4.133-1.147 1.147-2.933 2.4-6.053 2.4-4.827 0-8.6-3.893-8.6-8.72s3.773-8.72 8.6-8.72c2.6 0 4.507 1.027 5.907 2.347l2.307-2.307C18.747 1.44 16.133 0 12.48 0 5.867 0 .307 5.387.307 12s5.56 12 12.173 12c3.573 0 6.267-1.173 8.373-3.36 2.16-2.16 2.84-5.213 2.84-7.667 0-.76-.053-1.467-.173-2.053H12.48z"})}),apple:t=>A.jsx("svg",{role:"img",viewBox:"0 0 24 24",...t,children:A.jsx("path",{d:"M12.152 6.896c-.948 0-2.415-1.078-3.96-1.04-2.04.027-3.91 1.183-4.961 3.014-2.117 3.675-.546 9.103 1.519 12.09 1.013 1.454 2.208 3.09 3.792 3.039 1.52-.065 2.09-.987 3.935-.987 1.831 0 2.35.987 3.96.948 1.637-.026 2.676-1.48 3.676-2.948 1.156-1.688 1.636-3.325 1.662-3.415-.039-.013-3.182-1.221-3.22-4.857-.026-3.04 2.48-4.494 2.597-4.559-1.429-2.09-3.623-2.324-4.39-2.376-2-.156-3.675 1.09-4.61 1.09zM15.53 3.83c.843-1.012 1.4-2.427 1.245-3.83-1.207.052-2.662.805-3.532 1.818-.78.896-1.454 2.338-1.273 3.714 1.338.104 2.715-.688 3.559-1.701",fill:"currentColor"})}),paypal:t=>A.jsx("svg",{role:"img",viewBox:"0 0 24 24",...t,children:A.jsx("path",{d:"M7.076 21.337H2.47a.641.641 0 0 1-.633-.74L4.944.901C5.026.382 5.474 0 5.998 0h7.46c2.57 0 4.578.543 5.69 1.81 1.01 1.15 1.304 2.42 1.012 4.287-.023.143-.047.288-.077.437-.983 5.05-4.349 6.797-8.647 6.797h-2.19c-.524 0-.968.382-1.05.9l-1.12 7.106zm14.146-14.42a3.35 3.35 0 0 0-.607-.541c-.013.076-.026.175-.041.254-.93 4.778-4.005 7.201-9.138 7.201h-2.19a.563.563 0 0 0-.556.479l-1.187 7.527h-.506l-.24 1.516a.56.56 0 0 0 .554.647h3.882c.46 0 .85-.334.922-.788.06-.26.76-4.852.816-5.09a.932.932 0 0 1 .923-.788h.58c3.76 0 6.705-1.528 7.565-5.946.36-1.847.174-3.388-.777-4.471z",fill:"currentColor"})}),spinner:t=>A.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",...t,children:A.jsx("path",{d:"M21 12a9 9 0 1 1-6.219-8.56"})})},k3={email:"",password:""},P3=()=>{const{logIn:t,googleSignIn:e}=ns(),[n,r]=L.useState(k3),i=yu(),s=async a=>{a.preventDefault();try{console.log("The user info is : ",n),await t(n.email,n.password),i("/edelgram/")}catch(l){console.log("Error: ",l)}},o=async a=>{a.preventDefault();try{await e(),i("/edelgram/")}catch(l){console.log("Error: ",l)}};return A.jsx("div",{className:"bg-slate-800 w-full h-screen",children:A.jsx("div",{className:"container mx-auto p-6 flex h-full",children:A.jsxs("div",{className:"flex justify-center items-center w-full",children:[A.jsx("div",{className:"p-6 w-2/3 hidden lg:block",children:A.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[A.jsx("img",{className:"w-2/3 h-auto aspect-video rounded-3xl place-self-end",src:Dd}),A.jsx("img",{className:"w-2/4 h-auto aspect-auto rounded-3xl",src:xy}),A.jsx("img",{className:"w-2/4 h-auto aspect-auto rounded-3xl place-self-end",src:Lo}),A.jsx("img",{className:"w-2/3 h-auto aspect-video rounded-3xl",src:ky})]})}),A.jsx("div",{className:"max-w-sm rounded-xl border bg-card text-card-foreground shadow-sm",children:A.jsx(Pd,{children:A.jsxs("form",{onSubmit:s,children:[A.jsxs(Rd,{className:"space-y-1",children:[A.jsx(Nd,{className:"text-2xl",children:"Edelgram"}),A.jsx(Ay,{children:"Enter your email below to create your account"})]}),A.jsxs(Od,{className:"grid gap-4",children:[A.jsx("div",{className:"grid",children:A.jsxs(Ms,{variant:"outline",onClick:o,children:[A.jsx(vI.google,{className:"mr-2 h-4 w-4"}),"Google"]})}),A.jsxs("div",{className:"relative",children:[A.jsx("div",{className:"absolute inset-0 flex items-center",children:A.jsx("span",{className:"w-full border-t"})}),A.jsx("div",{className:"relative flex justify-center text-xs uppercase",children:A.jsx("span",{className:"bg-background px-2 text-muted-foreground",children:"Or continue with"})})]}),A.jsxs("div",{className:"grid gap-2",children:[A.jsx(Mi,{htmlFor:"email",children:"Email"}),A.jsx(As,{id:"email",type:"email",placeholder:"edelweisss21@example.com",value:n.email,onChange:a=>r({...n,email:a.target.value})})]}),A.jsxs("div",{className:"grid gap-2",children:[A.jsx(Mi,{htmlFor:"password",children:"Password"}),A.jsx(As,{id:"password",type:"password",value:n.password,onChange:a=>r({...n,password:a.target.value})})]})]}),A.jsxs(Ld,{className:"flex flex-col",children:[A.jsx(Ms,{className:"w-full",type:"submit",children:"Login"}),A.jsxs("p",{className:"mt-3 text-sm text-center",children:["Don't have an account?",A.jsx(Eh,{to:"/edelgram/signup",children:" Sign up"})]})]})]})})})]})})})},R3=({data:t})=>A.jsx(A.Fragment,{children:t.map(e=>A.jsxs("div",{className:"relative",children:[A.jsx("div",{className:"absolute group transition-all duration-200 bg-transparent hover:bg-slate-950 hover:bg-opacity-75 top-0 bottom-0 left-0 right-0 w-full h-full",children:A.jsxs("div",{className:"flex flex-col justify-center items-center w-full h-full",children:[A.jsx(gI,{className:"hidden group-hover:block fill-white"}),A.jsxs("div",{className:"hidden group-hover:block text-white",children:[e.likes," likes"]})]})}),A.jsx("img",{src:`${e.photos[0].cdnUrl}/-/progressive/yes/-/scale_crop/300x300/center/`})]},e.photos[0].uuid))}),N3=()=>{const{user:t}=ns(),[e,n]=L.useState([]),r=async i=>{try{const s=await w3(i),o=[];s.forEach(a=>{const l=a.data(),c={id:a.id,...l};o.push(c)}),n(o)}catch(s){console.error(s)}};return L.useEffect(()=>{t!==null&&r(t.uid)},[t]),A.jsx(kd,{children:A.jsx("div",{className:"flex justify-center",children:A.jsxs("div",{className:"border max-w-3xl w-full",children:[A.jsx("h3",{className:"bg-slate-800 text-white text-center text-lg p-2",children:"My Photos"}),A.jsx("div",{className:"p-8",children:A.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-4",children:e?A.jsx(R3,{data:e}):A.jsx("div",{children:"...Loading"})})})]})})})},O3=()=>{const{user:t}=ns(),e={id:"",userId:t==null?void 0:t.uid,userBio:"Please enter information about yourself.",photoURL:t!=null&&t.photoURL?t.photoURL:"",displayName:t!=null&&t.displayName?t.displayName:"Guest"},[n,r]=L.useState(e);return console.log("setUserInfo",r),A.jsx(kd,{children:A.jsx("div",{className:"flex justify-center",children:A.jsxs("div",{className:"border max-w-3xl w-full",children:[A.jsx("h3",{className:"bg-slate-800 text-white text-center text-lg p-2",children:"Profile"}),A.jsxs("div",{className:"p-8 pb-4 border-b",children:[A.jsxs("div",{className:"flex flex-row items-center pb-2",children:[A.jsx("div",{className:"mr-2",children:A.jsx("img",{src:n.photoURL?n.photoURL:Im,alt:"avatar",className:"w-28 h-28 rounded-full border-2 border-slate-800 object-cover"})}),A.jsx("div",{className:"text-xl ml-3",children:n.displayName}),A.jsx("div",{className:"text-xl ml-3",children:t!=null&&t.email?t.email:""})]}),A.jsx("div",{className:"mb-4",children:n.userBio}),A.jsx("div",{children:A.jsxs(Ms,{children:[A.jsx(g3,{className:"mr-2 h-4 w-4"}),"Edit Profile"]})})]})]})})})},L3={email:"",password:"",confirmPassword:""},D3=()=>{const{signUp:t,googleSignIn:e}=ns(),[n,r]=L.useState(L3),i=yu(),s=async a=>{a.preventDefault();try{console.log("The user info is : ",n),await t(n.email,n.password),i("/edelgram/")}catch(l){console.log("Error: ",l)}},o=async a=>{a.preventDefault();try{await e(),i("/edelgram/")}catch(l){console.log("Error: ",l)}};return A.jsx("div",{className:"bg-slate-800 w-full h-screen",children:A.jsx("div",{className:"container mx-auto p-6 flex h-full",children:A.jsxs("div",{className:"flex justify-center items-center w-full",children:[A.jsx("div",{className:"p-6 w-2/3 hidden lg:block",children:A.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[A.jsx("img",{className:"w-2/3 h-auto aspect-video rounded-3xl place-self-end",src:Dd}),A.jsx("img",{className:"w-2/4 h-auto aspect-auto rounded-3xl",src:xy}),A.jsx("img",{className:"w-2/4 h-auto aspect-auto rounded-3xl place-self-end",src:Lo}),A.jsx("img",{className:"w-2/3 h-auto aspect-video rounded-3xl",src:ky})]})}),A.jsx("div",{className:"max-w-sm rounded-xl border bg-card text-card-foreground shadow-sm",children:A.jsx(Pd,{children:A.jsxs("form",{onSubmit:s,children:[A.jsxs(Rd,{className:"space-y-1",children:[A.jsx(Nd,{className:"text-2xl",children:"Edelgram"}),A.jsx(Ay,{children:"Enter your email below to create your account"})]}),A.jsxs(Od,{className:"grid gap-4",children:[A.jsx("div",{className:"grid",children:A.jsxs(Ms,{variant:"outline",onClick:o,children:[A.jsx(vI.google,{className:"mr-2 h-4 w-4"}),"Google"]})}),A.jsxs("div",{className:"relative",children:[A.jsx("div",{className:"absolute inset-0 flex items-center",children:A.jsx("span",{className:"w-full border-t"})}),A.jsx("div",{className:"relative flex justify-center text-xs uppercase",children:A.jsx("span",{className:"bg-background px-2 text-muted-foreground",children:"Or continue with"})})]}),A.jsxs("div",{className:"grid gap-2",children:[A.jsx(Mi,{htmlFor:"email",children:"Email"}),A.jsx(As,{id:"email",type:"email",placeholder:"edelweisss21@example.com",value:n.email,onChange:a=>r({...n,email:a.target.value})})]}),A.jsxs("div",{className:"grid gap-2",children:[A.jsx(Mi,{htmlFor:"password",children:"Password"}),A.jsx(As,{id:"password",type:"password",value:n.password,onChange:a=>r({...n,password:a.target.value})})]}),A.jsxs("div",{className:"grid gap-2",children:[A.jsx(Mi,{htmlFor:"confirmpassword",children:"Confirm password"}),A.jsx(As,{id:"confirmpassword",type:"password",value:n.confirmPassword,onChange:a=>r({...n,confirmPassword:a.target.value})})]})]}),A.jsxs(Ld,{className:"flex flex-col",children:[A.jsx(Ms,{className:"w-full",type:"submit",children:"Sign Up"}),A.jsxs("p",{className:"mt-3 text-sm text-center",children:["Already have an account?",A.jsx(Eh,{to:"/edelgram/login",children:" Login"})]})]})]})})})]})})})};var M3=Object.defineProperty,V3=(t,e,n)=>e in t?M3(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,Py=(t,e,n)=>(V3(t,typeof e!="symbol"?e+"":e,n),n);function U3(t){let e=n=>{var r;for(let i in n)((r=n[i])==null?void 0:r.constructor)===Object&&(n[i]=e(n[i]));return{...n}};return e(t)}var xe=class{constructor(t){t.constructor===Object?this.store=U3(t):(this._storeIsProxy=!0,this.store=t),this.callbackMap=Object.create(null)}static warn(t,e){console.warn(`Symbiote Data: cannot ${t}. Prop name: `+e)}read(t){return!this._storeIsProxy&&!this.store.hasOwnProperty(t)?(xe.warn("read",t),null):this.store[t]}has(t){return this._storeIsProxy?this.store[t]!==void 0:this.store.hasOwnProperty(t)}add(t,e,n=!1){!n&&Object.keys(this.store).includes(t)||(this.store[t]=e,this.notify(t))}pub(t,e){if(!this._storeIsProxy&&!this.store.hasOwnProperty(t)){xe.warn("publish",t);return}this.store[t]=e,this.notify(t)}multiPub(t){for(let e in t)this.pub(e,t[e])}notify(t){this.callbackMap[t]&&this.callbackMap[t].forEach(e=>{e(this.store[t])})}sub(t,e,n=!0){return!this._storeIsProxy&&!this.store.hasOwnProperty(t)?(xe.warn("subscribe",t),null):(this.callbackMap[t]||(this.callbackMap[t]=new Set),this.callbackMap[t].add(e),n&&e(this.store[t]),{remove:()=>{this.callbackMap[t].delete(e),this.callbackMap[t].size||delete this.callbackMap[t]},callback:e})}static registerCtx(t,e=Symbol()){let n=xe.globalStore.get(e);return n?console.warn('State: context UID "'+e+'" already in use'):(n=new xe(t),xe.globalStore.set(e,n)),n}static deleteCtx(t){xe.globalStore.delete(t)}static getCtx(t,e=!0){return xe.globalStore.get(t)||(e&&console.warn('State: wrong context UID - "'+t+'"'),null)}};xe.globalStore=new Map;var pe=Object.freeze({BIND_ATTR:"set",ATTR_BIND_PRFX:"@",EXT_DATA_CTX_PRFX:"*",NAMED_DATA_CTX_SPLTR:"/",CTX_NAME_ATTR:"ctx-name",CTX_OWNER_ATTR:"ctx-owner",CSS_CTX_PROP:"--ctx-name",EL_REF_ATTR:"ref",AUTO_TAG_PRFX:"sym",REPEAT_ATTR:"repeat",REPEAT_ITEM_TAG_ATTR:"repeat-item-tag",SET_LATER_KEY:"__toSetLater__",USE_TPL:"use-template",ROOT_STYLE_ATTR_NAME:"sym-component"}),_I="1234567890QWERTYUIOPASDFGHJKLZXCVBNMqwertyuiopasdfghjklzxcvbnm",$3=_I.length-1,Nu=class{static generate(t="XXXXXXXXX-XXX"){let e="";for(let n=0;n<t.length;n++)e+=t[n]==="-"?t[n]:_I.charAt(Math.random()*$3);return e}};function wI(t,e,n){let r=!0,i,s=e.split(".");return s.forEach((o,a)=>{a<s.length-1?t=t[o]:i=o}),t?t[i]=n:r=!1,r}function F3(t){return t.split("-").map((e,n)=>e&&n?e[0].toUpperCase()+e.slice(1):e).join("").split("_").map((e,n)=>e&&n?e.toUpperCase():e).join("")}function j3(t,e){[...t.querySelectorAll(`[${pe.REPEAT_ATTR}]`)].forEach(n=>{let r=n.getAttribute(pe.REPEAT_ITEM_TAG_ATTR),i;if(r&&(i=window.customElements.get(r)),!i){i=class extends e.BaseComponent{constructor(){super(),r||(this.style.display="contents")}};let o=n.innerHTML;i.template=o,i.reg(r)}for(;n.firstChild;)n.firstChild.remove();let s=n.getAttribute(pe.REPEAT_ATTR);e.sub(s,o=>{if(!o){for(;n.firstChild;)n.firstChild.remove();return}let a=[...n.children],l,c=h=>{h.forEach((p,_)=>{if(a[_])if(a[_].set$)setTimeout(()=>{a[_].set$(p)});else for(let E in p)a[_][E]=p[E];else{l||(l=new DocumentFragment);let E=new i;Object.assign(E.init$,p),l.appendChild(E)}}),l&&n.appendChild(l);let f=a.slice(h.length,a.length);for(let p of f)p.remove()};if(o.constructor===Array)c(o);else if(o.constructor===Object){let h=[];for(let f in o){let p=o[f];Object.defineProperty(p,"_KEY_",{value:f,enumerable:!0}),h.push(p)}c(h)}else console.warn("Symbiote repeat data type error:"),console.log(o)}),n.removeAttribute(pe.REPEAT_ATTR),n.removeAttribute(pe.REPEAT_ITEM_TAG_ATTR)})}var Rw="__default__";function z3(t,e){if(e.shadowRoot)return;let n=[...t.querySelectorAll("slot")];if(!n.length)return;let r={};n.forEach(i=>{let s=i.getAttribute("name")||Rw;r[s]={slot:i,fr:document.createDocumentFragment()}}),e.initChildren.forEach(i=>{var s;let o=Rw;i instanceof Element&&i.hasAttribute("slot")&&(o=i.getAttribute("slot"),i.removeAttribute("slot")),(s=r[o])==null||s.fr.appendChild(i)}),Object.values(r).forEach(i=>{if(i.fr.childNodes.length)i.slot.parentNode.replaceChild(i.fr,i.slot);else if(i.slot.childNodes.length){let s=document.createDocumentFragment();s.append(...i.slot.childNodes),i.slot.parentNode.replaceChild(s,i.slot)}else i.slot.remove()})}function B3(t,e){[...t.querySelectorAll(`[${pe.EL_REF_ATTR}]`)].forEach(n=>{let r=n.getAttribute(pe.EL_REF_ATTR);e.ref[r]=n,n.removeAttribute(pe.EL_REF_ATTR)})}function H3(t,e){[...t.querySelectorAll(`[${pe.BIND_ATTR}]`)].forEach(n=>{let i=n.getAttribute(pe.BIND_ATTR).split(";");[...n.attributes].forEach(s=>{if(s.name.startsWith("-")&&s.value){let o=F3(s.name.replace("-",""));i.push(o+":"+s.value),n.removeAttribute(s.name)}}),i.forEach(s=>{if(!s)return;let o=s.split(":").map(h=>h.trim()),a=o[0],l;a.indexOf(pe.ATTR_BIND_PRFX)===0&&(l=!0,a=a.replace(pe.ATTR_BIND_PRFX,""));let c=o[1].split(",").map(h=>h.trim());for(let h of c){let f;h.startsWith("!!")?(f="double",h=h.replace("!!","")):h.startsWith("!")&&(f="single",h=h.replace("!","")),e.sub(h,p=>{f==="double"?p=!!p:f==="single"&&(p=!p),l?(p==null?void 0:p.constructor)===Boolean?p?n.setAttribute(a,""):n.removeAttribute(a):n.setAttribute(a,p):wI(n,a,p)||(n[pe.SET_LATER_KEY]||(n[pe.SET_LATER_KEY]=Object.create(null)),n[pe.SET_LATER_KEY][a]=p)})}}),n.removeAttribute(pe.BIND_ATTR)})}var Gc="{{",yl="}}",W3="skip-text";function q3(t){let e,n=[],r=document.createTreeWalker(t,NodeFilter.SHOW_TEXT,{acceptNode:i=>{var s;return!((s=i.parentElement)!=null&&s.hasAttribute(W3))&&i.textContent.includes(Gc)&&i.textContent.includes(yl)&&1}});for(;e=r.nextNode();)n.push(e);return n}var G3=function(t,e){q3(t).forEach(r=>{let i=[],s;for(;r.textContent.includes(yl);)r.textContent.startsWith(Gc)?(s=r.textContent.indexOf(yl)+yl.length,r.splitText(s),i.push(r)):(s=r.textContent.indexOf(Gc),r.splitText(s)),r=r.nextSibling;i.forEach(o=>{let a=o.textContent.replace(Gc,"").replace(yl,"");o.textContent="",e.sub(a,l=>{o.textContent=l})})})},K3=[j3,z3,B3,H3,G3],Vh="'",ha='"',Q3=/\\([0-9a-fA-F]{1,6} ?)/g;function X3(t){return(t[0]===ha||t[0]===Vh)&&(t[t.length-1]===ha||t[t.length-1]===Vh)}function Y3(t){return(t[0]===ha||t[0]===Vh)&&(t=t.slice(1)),(t[t.length-1]===ha||t[t.length-1]===Vh)&&(t=t.slice(0,-1)),t}function J3(t){let e="",n="";for(var r=0;r<t.length;r++){const i=t[r+1];t[r]==="\\"&&i==='"'?(e+='\\"',r++):t[r]==='"'&&n!=="\\"?e+='\\"':e+=t[r],n=t[r]}return e}function Z3(t){let e=t;X3(t)&&(e=Y3(e),e=e.replace(Q3,(n,r)=>String.fromCodePoint(parseInt(r.trim(),16))),e=e.replaceAll(`\\
`,"\\n"),e=J3(e),e=ha+e+ha);try{return JSON.parse(e)}catch{throw new Error(`Failed to parse CSS property value: ${e}. Original input: ${t}`)}}var Nw=0,po=null,Cr=null,hi=class extends HTMLElement{constructor(){super(),Py(this,"updateCssData",()=>{var t;this.dropCssDataCache(),(t=this.__boundCssProps)==null||t.forEach(e=>{let n=this.getCssData(this.__extractCssName(e),!0);n!==null&&this.$[e]!==n&&(this.$[e]=n)})}),this.init$=Object.create(null),this.cssInit$=Object.create(null),this.tplProcessors=new Set,this.ref=Object.create(null),this.allSubs=new Set,this.pauseRender=!1,this.renderShadow=!1,this.readyToDestroy=!0,this.processInnerHtml=!1,this.allowCustomTemplate=!1,this.ctxOwner=!1}get BaseComponent(){return hi}initCallback(){}__initCallback(){var t;this.__initialized||(this.__initialized=!0,(t=this.initCallback)==null||t.call(this))}render(t,e=this.renderShadow){let n;if((e||this.constructor.__shadowStylesUrl)&&!this.shadowRoot&&this.attachShadow({mode:"open"}),this.allowCustomTemplate){let i=this.getAttribute(pe.USE_TPL);if(i){let s=this.getRootNode(),o=(s==null?void 0:s.querySelector(i))||document.querySelector(i);o?t=o.content.cloneNode(!0):console.warn(`Symbiote template "${i}" is not found...`)}}if(this.processInnerHtml)for(let i of this.tplProcessors)i(this,this);if(t||this.constructor.template){if(this.constructor.template&&!this.constructor.__tpl&&(this.constructor.__tpl=document.createElement("template"),this.constructor.__tpl.innerHTML=this.constructor.template),(t==null?void 0:t.constructor)===DocumentFragment)n=t;else if((t==null?void 0:t.constructor)===String){let i=document.createElement("template");i.innerHTML=t,n=i.content.cloneNode(!0)}else this.constructor.__tpl&&(n=this.constructor.__tpl.content.cloneNode(!0));for(let i of this.tplProcessors)i(n,this)}let r=()=>{n&&(e&&this.shadowRoot.appendChild(n)||this.appendChild(n)),this.__initCallback()};if(this.constructor.__shadowStylesUrl){e=!0;let i=document.createElement("link");i.rel="stylesheet",i.href=this.constructor.__shadowStylesUrl,i.onload=r,this.shadowRoot.prepend(i)}else r()}addTemplateProcessor(t){this.tplProcessors.add(t)}get autoCtxName(){return this.__autoCtxName||(this.__autoCtxName=Nu.generate(),this.style.setProperty(pe.CSS_CTX_PROP,`'${this.__autoCtxName}'`)),this.__autoCtxName}get cssCtxName(){return this.getCssData(pe.CSS_CTX_PROP,!0)}get ctxName(){var t;let e=((t=this.getAttribute(pe.CTX_NAME_ATTR))==null?void 0:t.trim())||this.cssCtxName||this.__cachedCtxName||this.autoCtxName;return this.__cachedCtxName=e,e}get localCtx(){return this.__localCtx||(this.__localCtx=xe.registerCtx({},this)),this.__localCtx}get nodeCtx(){return xe.getCtx(this.ctxName,!1)||xe.registerCtx({},this.ctxName)}static __parseProp(t,e){let n,r;if(t.startsWith(pe.EXT_DATA_CTX_PRFX))n=e.nodeCtx,r=t.replace(pe.EXT_DATA_CTX_PRFX,"");else if(t.includes(pe.NAMED_DATA_CTX_SPLTR)){let i=t.split(pe.NAMED_DATA_CTX_SPLTR);n=xe.getCtx(i[0]),r=i[1]}else n=e.localCtx,r=t;return{ctx:n,name:r}}sub(t,e,n=!0){let r=s=>{this.isConnected&&e(s)},i=hi.__parseProp(t,this);i.ctx.has(i.name)?this.allSubs.add(i.ctx.sub(i.name,r,n)):window.setTimeout(()=>{this.allSubs.add(i.ctx.sub(i.name,r,n))})}notify(t){let e=hi.__parseProp(t,this);e.ctx.notify(e.name)}has(t){let e=hi.__parseProp(t,this);return e.ctx.has(e.name)}add(t,e,n=!1){let r=hi.__parseProp(t,this);r.ctx.add(r.name,e,n)}add$(t,e=!1){for(let n in t)this.add(n,t[n],e)}get $(){if(!this.__stateProxy){let t=Object.create(null);this.__stateProxy=new Proxy(t,{set:(e,n,r)=>{let i=hi.__parseProp(n,this);return i.ctx.pub(i.name,r),!0},get:(e,n)=>{let r=hi.__parseProp(n,this);return r.ctx.read(r.name)}})}return this.__stateProxy}set$(t,e=!1){for(let n in t){let r=t[n];e||![String,Number,Boolean].includes(r==null?void 0:r.constructor)?this.$[n]=r:this.$[n]!==r&&(this.$[n]=r)}}get __ctxOwner(){return this.ctxOwner||this.hasAttribute(pe.CTX_OWNER_ATTR)&&this.getAttribute(pe.CTX_OWNER_ATTR)!=="false"}__initDataCtx(){let t=this.constructor.__attrDesc;if(t)for(let e of Object.values(t))Object.keys(this.init$).includes(e)||(this.init$[e]="");for(let e in this.init$)if(e.startsWith(pe.EXT_DATA_CTX_PRFX))this.nodeCtx.add(e.replace(pe.EXT_DATA_CTX_PRFX,""),this.init$[e],this.__ctxOwner);else if(e.includes(pe.NAMED_DATA_CTX_SPLTR)){let n=e.split(pe.NAMED_DATA_CTX_SPLTR),r=n[0].trim(),i=n[1].trim();if(r&&i){let s=xe.getCtx(r,!1);s||(s=xe.registerCtx({},r)),s.add(i,this.init$[e])}}else this.localCtx.add(e,this.init$[e]);for(let e in this.cssInit$)this.bindCssData(e,this.cssInit$[e]);this.__dataCtxInitialized=!0}connectedCallback(){var t;if(this.isConnected){if(this.__disconnectTimeout&&window.clearTimeout(this.__disconnectTimeout),!this.connectedOnce){let e=(t=this.getAttribute(pe.CTX_NAME_ATTR))==null?void 0:t.trim();if(e&&this.style.setProperty(pe.CSS_CTX_PROP,`'${e}'`),this.__initDataCtx(),this[pe.SET_LATER_KEY]){for(let n in this[pe.SET_LATER_KEY])wI(this,n,this[pe.SET_LATER_KEY][n]);delete this[pe.SET_LATER_KEY]}this.initChildren=[...this.childNodes];for(let n of K3)this.addTemplateProcessor(n);if(this.pauseRender)this.__initCallback();else if(this.constructor.__rootStylesLink){let n=this.getRootNode();if(!n)return;if(n==null?void 0:n.querySelector(`link[${pe.ROOT_STYLE_ATTR_NAME}="${this.constructor.is}"]`)){this.render();return}let i=this.constructor.__rootStylesLink.cloneNode(!0);i.setAttribute(pe.ROOT_STYLE_ATTR_NAME,this.constructor.is),i.onload=()=>{this.render()},n.nodeType===Node.DOCUMENT_NODE?n.head.appendChild(i):n.prepend(i)}else this.render()}this.connectedOnce=!0}}destroyCallback(){}disconnectedCallback(){this.connectedOnce&&(this.dropCssDataCache(),this.readyToDestroy&&(this.__disconnectTimeout&&window.clearTimeout(this.__disconnectTimeout),this.__disconnectTimeout=window.setTimeout(()=>{this.destroyCallback();for(let t of this.allSubs)t.remove(),this.allSubs.delete(t);for(let t of this.tplProcessors)this.tplProcessors.delete(t);Cr==null||Cr.delete(this.updateCssData),Cr!=null&&Cr.size||(po==null||po.disconnect(),po=null,Cr=null)},100)))}static reg(t,e=!1){t||(Nw++,t=`${pe.AUTO_TAG_PRFX}-${Nw}`),this.__tag=t;let n=window.customElements.get(t);if(n){!e&&n!==this&&console.warn([`Element with tag name "${t}" already registered.`,`You're trying to override it with another class "${this.name}".`,"This is most likely a mistake.","New element will not be registered."].join(`
`));return}window.customElements.define(t,e?class extends this{}:this)}static get is(){return this.__tag||this.reg(),this.__tag}static bindAttributes(t){this.observedAttributes=Object.keys(t),this.__attrDesc=t}attributeChangedCallback(t,e,n){var r;if(e===n)return;let i=(r=this.constructor.__attrDesc)==null?void 0:r[t];i?this.__dataCtxInitialized?this.$[i]=n:this.init$[i]=n:this[t]=n}getCssData(t,e=!1){if(this.__cssDataCache||(this.__cssDataCache=Object.create(null)),!Object.keys(this.__cssDataCache).includes(t)){this.__computedStyle||(this.__computedStyle=window.getComputedStyle(this));let n=this.__computedStyle.getPropertyValue(t).trim();try{this.__cssDataCache[t]=Z3(n)}catch{!e&&console.warn(`CSS Data error: ${t}`),this.__cssDataCache[t]=null}}return this.__cssDataCache[t]}__extractCssName(t){return t.split("--").map((e,n)=>n===0?"":e).join("--")}__initStyleAttrObserver(){Cr||(Cr=new Set),Cr.add(this.updateCssData),po||(po=new MutationObserver(t=>{t[0].type==="attributes"&&Cr.forEach(e=>{e()})}),po.observe(document,{childList:!0,subtree:!0,attributes:!0,attributeFilter:["style"]}))}bindCssData(t,e=""){this.__boundCssProps||(this.__boundCssProps=new Set),this.__boundCssProps.add(t);let n=this.getCssData(this.__extractCssName(t),!0);n===null&&(n=e),this.add(t,n),this.__initStyleAttrObserver()}dropCssDataCache(){this.__cssDataCache=null,this.__computedStyle=null}defineAccessor(t,e,n){let r="__"+t;this[r]=this[t],Object.defineProperty(this,t,{set:i=>{this[r]=i,n?window.setTimeout(()=>{e==null||e(i)}):e==null||e(i)},get:()=>this[r]}),this[t]=this[r]}static set shadowStyles(t){let e=new Blob([t],{type:"text/css"});this.__shadowStylesUrl=URL.createObjectURL(e)}static set rootStyles(t){if(!this.__rootStylesLink){let e=new Blob([t],{type:"text/css"}),n=URL.createObjectURL(e),r=document.createElement("link");r.href=n,r.rel="stylesheet",this.__rootStylesLink=r}}},Ud=hi;Py(Ud,"template");function EI(t,e){for(let n in e)n.includes("-")?t.style.setProperty(n,e[n]):t.style[n]=e[n]}function e5(t,e){for(let n in e)e[n].constructor===Boolean?e[n]?t.setAttribute(n,""):t.removeAttribute(n):t.setAttribute(n,e[n])}function Ry(t={tag:"div"}){let e=document.createElement(t.tag);if(t.attributes&&e5(e,t.attributes),t.styles&&EI(e,t.styles),t.properties)for(let n in t.properties)e[n]=t.properties[n];return t.processors&&t.processors.forEach(n=>{n(e)}),t.children&&t.children.forEach(n=>{let r=Ry(n);e.appendChild(r)}),e}var bI="idb-store-ready",t5="symbiote-db",n5="symbiote-idb-update_",r5=class{_notifyWhenReady(t=null){window.dispatchEvent(new CustomEvent(bI,{detail:{dbName:this.name,storeName:this.storeName,event:t}}))}get _updEventName(){return n5+this.name}_getUpdateEvent(t){return new CustomEvent(this._updEventName,{detail:{key:this.name,newValue:t}})}_notifySubscribers(t){window.localStorage.removeItem(this.name),window.localStorage.setItem(this.name,t),window.dispatchEvent(this._getUpdateEvent(t))}constructor(t,e){this.name=t,this.storeName=e,this.version=1,this.request=window.indexedDB.open(this.name,this.version),this.request.onupgradeneeded=n=>{this.db=n.target.result,this.objStore=this.db.createObjectStore(e,{keyPath:"_key"}),this.objStore.transaction.oncomplete=r=>{this._notifyWhenReady(r)}},this.request.onsuccess=n=>{this.db=n.target.result,this._notifyWhenReady(n)},this.request.onerror=n=>{console.error(n)},this._subscriptionsMap={},this._updateHandler=n=>{n.key===this.name&&this._subscriptionsMap[n.newValue]&&this._subscriptionsMap[n.newValue].forEach(async i=>{i(await this.read(n.newValue))})},this._localUpdateHandler=n=>{this._updateHandler(n.detail)},window.addEventListener("storage",this._updateHandler),window.addEventListener(this._updEventName,this._localUpdateHandler)}read(t){let n=this.db.transaction(this.storeName,"readwrite").objectStore(this.storeName).get(t);return new Promise((r,i)=>{n.onsuccess=s=>{var o;(o=s.target.result)!=null&&o._value?r(s.target.result._value):(r(null),console.warn(`IDB: cannot read "${t}"`))},n.onerror=s=>{i(s)}})}write(t,e,n=!1){let r={_key:t,_value:e},s=this.db.transaction(this.storeName,"readwrite").objectStore(this.storeName).put(r);return new Promise((o,a)=>{s.onsuccess=l=>{n||this._notifySubscribers(t),o(l.target.result)},s.onerror=l=>{a(l)}})}delete(t,e=!1){let r=this.db.transaction(this.storeName,"readwrite").objectStore(this.storeName).delete(t);return new Promise((i,s)=>{r.onsuccess=o=>{e||this._notifySubscribers(t),i(o)},r.onerror=o=>{s(o)}})}getAll(){let e=this.db.transaction(this.storeName,"readwrite").objectStore(this.storeName).getAll();return new Promise((n,r)=>{e.onsuccess=i=>{let s=i.target.result;n(s.map(o=>o._value))},e.onerror=i=>{r(i)}})}subscribe(t,e){this._subscriptionsMap[t]||(this._subscriptionsMap[t]=new Set);let n=this._subscriptionsMap[t];return n.add(e),{remove:()=>{n.delete(e),n.size||delete this._subscriptionsMap[t]}}}stop(){window.removeEventListener("storage",this._updateHandler),this._subscriptionsMap=null,TI.clear(this.name)}},TI=class{static get readyEventName(){return bI}static open(t=t5,e="store"){let n=t+"/"+e;return this._reg[n]||(this._reg[n]=new r5(t,e)),this._reg[n]}static clear(t){window.indexedDB.deleteDatabase(t);for(let e in this._reg)e.split("/")[0]===t&&delete this._reg[e]}};Py(TI,"_reg",Object.create(null));const i5=20,tt=Object.freeze({FILE_ADDED:"file-added",FILE_REMOVED:"file-removed",FILE_UPLOAD_START:"file-upload-start",FILE_UPLOAD_PROGRESS:"file-upload-progress",FILE_UPLOAD_SUCCESS:"file-upload-success",FILE_UPLOAD_FAILED:"file-upload-failed",FILE_URL_CHANGED:"file-url-changed",MODAL_OPEN:"modal-open",MODAL_CLOSE:"modal-close",DONE_CLICK:"done-click",UPLOAD_CLICK:"upload-click",ACTIVITY_CHANGE:"activity-change",COMMON_UPLOAD_START:"common-upload-start",COMMON_UPLOAD_PROGRESS:"common-upload-progress",COMMON_UPLOAD_SUCCESS:"common-upload-success",COMMON_UPLOAD_FAILED:"common-upload-failed",CHANGE:"change",GROUP_CREATED:"group-created"});class s5{constructor(e){V(this,"_timeoutStore",new Map);V(this,"_targets",new Set);V(this,"_debugPrint",null);this._debugPrint=e}bindTarget(e){this._targets.add(e)}unbindTarget(e){this._targets.delete(e)}_dispatch(e,n){var r;for(const i of this._targets)i.dispatchEvent(new CustomEvent(e,{detail:n}));(r=this._debugPrint)==null||r.call(this,()=>{const i=n&&typeof n=="object"?{...n}:n;return[`event "${e}"`,i]})}emit(e,n,{debounce:r}={}){if(typeof r!="number"&&!r){this._dispatch(e,typeof n=="function"?n():n);return}this._timeoutStore.has(e)&&window.clearTimeout(this._timeoutStore.get(e));const i=typeof r=="number"?r:i5,s=window.setTimeout(()=>{this._dispatch(e,typeof n=="function"?n():n),this._timeoutStore.delete(e)},i);this._timeoutStore.set(e,s)}}function Mn(t,e){let n;const r=(...i)=>{clearTimeout(n),n=setTimeout(()=>t(...i),e)};return r.cancel=()=>{clearTimeout(n)},r}const Ow="--uploadcare-blocks-window-height";class Uh{static registerClient(e){this.clientsRegistry.size===0&&this.attachTracker(),this.clientsRegistry.add(e)}static unregisterClient(e){this.clientsRegistry.delete(e),this.clientsRegistry.size===0&&this.detachTracker()}static attachTracker(){window.addEventListener("resize",this.flush,{passive:!0,capture:!0}),this.flush()}static detachTracker(){window.removeEventListener("resize",this.flush,{capture:!0}),document.documentElement.style.removeProperty(Ow)}}V(Uh,"clientsRegistry",new Set),V(Uh,"flush",Mn(()=>{document.documentElement.style.setProperty(Ow,`${window.innerHeight}px`)},100));const o5=t=>{var r;const e=new Intl.Locale(t);let n="ltr";return typeof e.getTextInfo=="function"&&e.getTextInfo().direction?n=e.getTextInfo().direction:"textInfo"in e&&((r=e.textInfo)!=null&&r.direction)&&(n=e.textInfo.direction),n},CI=(t,e)=>new Intl.PluralRules(t).select(e),a5=t=>t,Sm="{{",II="}}",Lw="plural:";function Am(t,e,n={}){var o;let{openToken:r=Sm,closeToken:i=II,transform:s=a5}=n;for(let a in e){let l=(o=e[a])==null?void 0:o.toString();t=t.replaceAll(r+a+i,typeof l=="string"?s(l):l)}return t}function l5(t){const e=[];let n=t.indexOf(Sm);for(;n!==-1;){const r=t.indexOf(II,n),i=t.substring(n+2,r);if(i.startsWith(Lw)){const s=t.substring(n+2,r).replace(Lw,""),o=s.substring(0,s.indexOf("(")),a=s.substring(s.indexOf("(")+1,s.indexOf(")"));e.push({variable:i,pluralKey:o,countVariable:a})}n=t.indexOf(Sm,r)}return e}const u5=({element:t,attribute:e,onSuccess:n,onTimeout:r,timeout:i=300})=>{const s=t.getAttribute(e);if(s!==null){n(s);return}const o=new MutationObserver(c=>{const h=c[c.length-1];l(h)});o.observe(t,{attributes:!0,attributeFilter:[e]});const a=setTimeout(()=>{o.disconnect(),r()},i),l=c=>{const h=t.getAttribute(e);c.type==="attributes"&&c.attributeName===e&&h!==null&&(clearTimeout(a),o.disconnect(),n(h))}};function Dw(t){return Object.prototype.toString.call(t)==="[object Object]"}const c5=/\W|_/g;function h5(t){return t.split(c5).map((e,n)=>e.charAt(0)[n>0?"toUpperCase":"toLowerCase"]()+e.slice(1)).join("")}function Mw(t,{ignoreKeys:e}={ignoreKeys:[]}){return Array.isArray(t)?t.map(n=>Yr(n,{ignoreKeys:e})):t}function Yr(t,{ignoreKeys:e}={ignoreKeys:[]}){if(Array.isArray(t))return Mw(t,{ignoreKeys:e});if(!Dw(t))return t;const n={};for(const r of Object.keys(t)){let i=t[r];if(e.includes(r)){n[r]=i;continue}Dw(i)?i=Yr(i,{ignoreKeys:e}):Array.isArray(i)&&(i=Mw(i,{ignoreKeys:e})),n[h5(r)]=i}return n}const d5=t=>new Promise(e=>setTimeout(e,t));function SI({libraryName:t,libraryVersion:e,userAgent:n,publicKey:r="",integration:i=""}){const s="JavaScript";if(typeof n=="string")return n;if(typeof n=="function")return n({publicKey:r,libraryName:t,libraryVersion:e,languageName:s,integration:i});const o=[t,e,r].filter(Boolean).join("/"),a=[s,i].filter(Boolean).join("; ");return`${o} (${a})`}const f5={factor:2,time:100};function p5(t,e=f5){let n=0;function r(i){const s=Math.round(e.time*e.factor**n);return i({attempt:n,retry:a=>d5(a??s).then(()=>(n+=1,r(i)))})}return r(t)}class Ny extends Error{}class Ou extends Ny{constructor(n){super();V(this,"originalProgressEvent");this.name="NetworkError",this.message="Network error",Object.setPrototypeOf(this,Ou.prototype),this.originalProgressEvent=n}}const $d=(t,e)=>{t&&(t.aborted?Promise.resolve().then(e):t.addEventListener("abort",()=>e(),{once:!0}))};class Hs extends Ny{constructor(n="Request canceled"){super(n);V(this,"isCancel",!0);this.name="CancelError",Object.setPrototypeOf(this,Hs.prototype)}}const m5=500,AI=({check:t,interval:e=m5,timeout:n,signal:r})=>new Promise((i,s)=>{let o,a;$d(r,()=>{o&&clearTimeout(o),s(new Hs("Poll cancelled"))}),n&&(a=setTimeout(()=>{o&&clearTimeout(o),s(new Hs("Timed out"))},n));const l=()=>{try{Promise.resolve(t(r)).then(c=>{c?(a&&clearTimeout(a),i(c)):o=setTimeout(l,e)}).catch(c=>{a&&clearTimeout(a),s(c)})}catch(c){a&&clearTimeout(a),s(c)}};o=setTimeout(l,0)}),Te={baseCDN:"https://ucarecdn.com",baseURL:"https://upload.uploadcare.com",maxContentLength:50*1024*1024,retryThrottledRequestMaxTimes:1,retryNetworkErrorMaxTimes:3,multipartMinFileSize:25*1024*1024,multipartChunkSize:5*1024*1024,multipartMinLastPartSize:1024*1024,maxConcurrentRequests:4,pollingTimeoutMilliseconds:1e4,pusherKey:"79ae88bd931ea68464d9"},Fd="application/octet-stream",xI="original",rs=({method:t,url:e,data:n,headers:r={},signal:i,onProgress:s})=>new Promise((o,a)=>{const l=new XMLHttpRequest,c=(t==null?void 0:t.toUpperCase())||"GET";let h=!1;l.open(c,e,!0),r&&Object.entries(r).forEach(f=>{const[p,_]=f;typeof _<"u"&&!Array.isArray(_)&&l.setRequestHeader(p,_)}),l.responseType="text",$d(i,()=>{h=!0,l.abort(),a(new Hs)}),l.onload=()=>{if(l.status!=200)a(new Error(`Error ${l.status}: ${l.statusText}`));else{const f={method:c,url:e,data:n,headers:r||void 0,signal:i,onProgress:s},p=l.getAllResponseHeaders().trim().split(/[\r\n]+/),_={};p.forEach(function(R){const T=R.split(": "),w=T.shift(),C=T.join(": ");w&&typeof w<"u"&&(_[w]=C)});const E=l.response,I=l.status;o({request:f,data:E,headers:_,status:I})}},l.onerror=f=>{h||a(new Ou(f))},s&&typeof s=="function"&&(l.upload.onprogress=f=>{f.lengthComputable?s({isComputable:!0,value:f.loaded/f.total}):s({isComputable:!1})}),n?l.send(n):l.send()});function g5(t,...e){return t}const y5=({name:t})=>t?[t]:[],v5=g5;var _5=()=>new FormData;const kI=t=>!1,jd=t=>typeof Blob<"u"&&t instanceof Blob,zd=t=>typeof File<"u"&&t instanceof File,Bd=t=>!!t&&typeof t=="object"&&!Array.isArray(t)&&"uri"in t&&typeof t.uri=="string",Sa=t=>jd(t)||zd(t)||kI()||Bd(t),w5=t=>typeof t=="string"||typeof t=="number"||typeof t>"u",E5=t=>!!t&&typeof t=="object"&&!Array.isArray(t),b5=t=>!!t&&typeof t=="object"&&"data"in t&&Sa(t.data);function PI(t,e,n){if(Array.isArray(n))for(const r of n)PI(t,`${e}[]`,r);else if(b5(n)){const{name:r,contentType:i}=n,s=v5(n.data,r,i??Fd),o=y5({name:r,contentType:i});t.push([e,s,...o])}else if(E5(n))for(const[r,i]of Object.entries(n))typeof i<"u"&&t.push([`${e}[${r}]`,String(i)]);else w5(n)&&n&&t.push([e,n.toString()])}function T5(t){const e=[];for(const[n,r]of Object.entries(t))PI(e,n,r);return e}function Hd(t){const e=_5(),n=T5(t);for(const r of n){const[i,s,...o]=r;e.append(i,s,...o)}return e}class cn extends Ny{constructor(n,r,i,s,o){super();V(this,"code");V(this,"request");V(this,"response");V(this,"headers");this.name="UploadError",this.message=n,this.code=r,this.request=i,this.response=s,this.headers=o,Object.setPrototypeOf(this,cn.prototype)}}const C5=t=>{const e=new URLSearchParams;for(const[n,r]of Object.entries(t))r&&typeof r=="object"&&!Array.isArray(r)?Object.entries(r).filter(i=>i[1]??!1).forEach(i=>e.set(`${n}[${i[0]}]`,String(i[1]))):Array.isArray(r)?r.forEach(i=>{e.append(`${n}[]`,i)}):typeof r=="string"&&r?e.set(n,r):typeof r=="number"&&e.set(n,r.toString());return e.toString()},qr=(t,e,n)=>{const r=new URL(t);return r.pathname=(r.pathname+e).replace("//","/"),n&&(r.search=C5(n)),r.toString()};var I5="6.14.1";const S5="UploadcareUploadClient",A5=I5;function Ys(t){return SI({libraryName:S5,libraryVersion:A5,...t})}const x5="RequestThrottledError",Vw=15e3,k5=1e3;function P5(t){const{headers:e}=t||{};if(!e||typeof e["retry-after"]!="string")return Vw;const n=parseInt(e["retry-after"],10);return Number.isFinite(n)?n*1e3:Vw}function is(t,e){const{retryThrottledRequestMaxTimes:n,retryNetworkErrorMaxTimes:r}=e;return p5(({attempt:i,retry:s})=>t().catch(o=>{if("response"in o&&(o==null?void 0:o.code)===x5&&i<n)return s(P5(o));if(o instanceof Ou&&i<r)return s((i+1)*k5);throw o}))}const RI=t=>{let e="";return(jd(t)||zd(t)||Bd(t))&&(e=t.type),e||Fd},NI=t=>{let e="";return zd(t)&&t.name?e=t.name:jd(t)||kI()?e="":Bd(t)&&t.name&&(e=t.name),e||xI};function Oy(t){return typeof t>"u"||t==="auto"?"auto":t?"1":"0"}function R5(t,{publicKey:e,fileName:n,contentType:r,baseURL:i=Te.baseURL,secureSignature:s,secureExpire:o,store:a,signal:l,onProgress:c,source:h="local",integration:f,userAgent:p,retryThrottledRequestMaxTimes:_=Te.retryThrottledRequestMaxTimes,retryNetworkErrorMaxTimes:E=Te.retryNetworkErrorMaxTimes,metadata:I}){return is(()=>rs({method:"POST",url:qr(i,"/base/",{jsonerrors:1}),headers:{"X-UC-User-Agent":Ys({publicKey:e,integration:f,userAgent:p})},data:Hd({file:{data:t,name:n||NI(t),contentType:r||RI(t)},UPLOADCARE_PUB_KEY:e,UPLOADCARE_STORE:Oy(a),signature:s,expire:o,source:h,metadata:I}),signal:l,onProgress:c}).then(({data:R,headers:T,request:w})=>{const C=Yr(JSON.parse(R));if("error"in C)throw new cn(C.error.content,C.error.errorCode,w,C,T);return C}),{retryNetworkErrorMaxTimes:E,retryThrottledRequestMaxTimes:_})}var xm;(function(t){t.Token="token",t.FileInfo="file_info"})(xm||(xm={}));function N5(t,{publicKey:e,baseURL:n=Te.baseURL,store:r,fileName:i,checkForUrlDuplicates:s,saveUrlForRecurrentUploads:o,secureSignature:a,secureExpire:l,source:c="url",signal:h,integration:f,userAgent:p,retryThrottledRequestMaxTimes:_=Te.retryThrottledRequestMaxTimes,retryNetworkErrorMaxTimes:E=Te.retryNetworkErrorMaxTimes,metadata:I}){return is(()=>rs({method:"POST",headers:{"X-UC-User-Agent":Ys({publicKey:e,integration:f,userAgent:p})},url:qr(n,"/from_url/",{jsonerrors:1,pub_key:e,source_url:t,store:Oy(r),filename:i,check_URL_duplicates:s?1:void 0,save_URL_duplicates:o?1:void 0,signature:a,expire:l,source:c,metadata:I}),signal:h}).then(({data:R,headers:T,request:w})=>{const C=Yr(JSON.parse(R));if("error"in C)throw new cn(C.error.content,C.error.errorCode,w,C,T);return C}),{retryNetworkErrorMaxTimes:E,retryThrottledRequestMaxTimes:_})}var sn;(function(t){t.Unknown="unknown",t.Waiting="waiting",t.Progress="progress",t.Error="error",t.Success="success"})(sn||(sn={}));const O5=t=>"status"in t&&t.status===sn.Error;function L5(t,{publicKey:e,baseURL:n=Te.baseURL,signal:r,integration:i,userAgent:s,retryThrottledRequestMaxTimes:o=Te.retryThrottledRequestMaxTimes,retryNetworkErrorMaxTimes:a=Te.retryNetworkErrorMaxTimes}={}){return is(()=>rs({method:"GET",headers:e?{"X-UC-User-Agent":Ys({publicKey:e,integration:i,userAgent:s})}:void 0,url:qr(n,"/from_url/status/",{jsonerrors:1,token:t}),signal:r}).then(({data:l,headers:c,request:h})=>{const f=Yr(JSON.parse(l));if("error"in f&&!O5(f))throw new cn(f.error.content,f.error.errorCode,h,f,c);return f}),{retryNetworkErrorMaxTimes:a,retryThrottledRequestMaxTimes:o})}function D5(t,{publicKey:e,baseURL:n=Te.baseURL,jsonpCallback:r,secureSignature:i,secureExpire:s,signal:o,source:a,integration:l,userAgent:c,retryThrottledRequestMaxTimes:h=Te.retryThrottledRequestMaxTimes,retryNetworkErrorMaxTimes:f=Te.retryNetworkErrorMaxTimes}){return is(()=>rs({method:"POST",headers:{"X-UC-User-Agent":Ys({publicKey:e,integration:l,userAgent:c})},url:qr(n,"/group/",{jsonerrors:1}),data:Hd({files:t,callback:r,pub_key:e,signature:i,expire:s,source:a}),signal:o}).then(({data:p,headers:_,request:E})=>{const I=Yr(JSON.parse(p));if("error"in I)throw new cn(I.error.content,I.error.errorCode,E,I,_);return I}),{retryNetworkErrorMaxTimes:f,retryThrottledRequestMaxTimes:h})}function OI(t,{publicKey:e,baseURL:n=Te.baseURL,signal:r,source:i,integration:s,userAgent:o,retryThrottledRequestMaxTimes:a=Te.retryThrottledRequestMaxTimes,retryNetworkErrorMaxTimes:l=Te.retryNetworkErrorMaxTimes}){return is(()=>rs({method:"GET",headers:{"X-UC-User-Agent":Ys({publicKey:e,integration:s,userAgent:o})},url:qr(n,"/info/",{jsonerrors:1,pub_key:e,file_id:t,source:i}),signal:r}).then(({data:c,headers:h,request:f})=>{const p=Yr(JSON.parse(c));if("error"in p)throw new cn(p.error.content,p.error.errorCode,f,p,h);return p}),{retryThrottledRequestMaxTimes:a,retryNetworkErrorMaxTimes:l})}function M5(t,{publicKey:e,contentType:n,fileName:r,multipartChunkSize:i=Te.multipartChunkSize,baseURL:s="",secureSignature:o,secureExpire:a,store:l,signal:c,source:h="local",integration:f,userAgent:p,retryThrottledRequestMaxTimes:_=Te.retryThrottledRequestMaxTimes,retryNetworkErrorMaxTimes:E=Te.retryNetworkErrorMaxTimes,metadata:I}){return is(()=>rs({method:"POST",url:qr(s,"/multipart/start/",{jsonerrors:1}),headers:{"X-UC-User-Agent":Ys({publicKey:e,integration:f,userAgent:p})},data:Hd({filename:r||xI,size:t,content_type:n||Fd,part_size:i,UPLOADCARE_STORE:Oy(l),UPLOADCARE_PUB_KEY:e,signature:o,expire:a,source:h,metadata:I}),signal:c}).then(({data:R,headers:T,request:w})=>{const C=Yr(JSON.parse(R));if("error"in C)throw new cn(C.error.content,C.error.errorCode,w,C,T);return C.parts=Object.keys(C.parts).map(D=>C.parts[Number(D)]),C}),{retryThrottledRequestMaxTimes:_,retryNetworkErrorMaxTimes:E})}function V5(t,e,{contentType:n,signal:r,onProgress:i,retryThrottledRequestMaxTimes:s=Te.retryThrottledRequestMaxTimes,retryNetworkErrorMaxTimes:o=Te.retryNetworkErrorMaxTimes}){return is(()=>rs({method:"PUT",url:e,data:t,onProgress:i,signal:r,headers:{"Content-Type":n||Fd}}).then(a=>(i&&i({isComputable:!0,value:1}),a)).then(({status:a})=>({code:a})),{retryThrottledRequestMaxTimes:s,retryNetworkErrorMaxTimes:o})}function U5(t,{publicKey:e,baseURL:n=Te.baseURL,source:r="local",signal:i,integration:s,userAgent:o,retryThrottledRequestMaxTimes:a=Te.retryThrottledRequestMaxTimes,retryNetworkErrorMaxTimes:l=Te.retryNetworkErrorMaxTimes}){return is(()=>rs({method:"POST",url:qr(n,"/multipart/complete/",{jsonerrors:1}),headers:{"X-UC-User-Agent":Ys({publicKey:e,integration:s,userAgent:o})},data:Hd({uuid:t,UPLOADCARE_PUB_KEY:e,source:r}),signal:i}).then(({data:c,headers:h,request:f})=>{const p=Yr(JSON.parse(c));if("error"in p)throw new cn(p.error.content,p.error.errorCode,f,p,h);return p}),{retryThrottledRequestMaxTimes:a,retryNetworkErrorMaxTimes:l})}function Ly(t,{publicKey:e,baseURL:n,source:r,integration:i,userAgent:s,retryThrottledRequestMaxTimes:o,retryNetworkErrorMaxTimes:a,signal:l,onProgress:c}){return AI({check:h=>OI(t,{publicKey:e,baseURL:n,signal:h,source:r,integration:i,userAgent:s,retryThrottledRequestMaxTimes:o,retryNetworkErrorMaxTimes:a}).then(f=>f.isReady?f:(c&&c({isComputable:!0,value:1}),!1)),signal:l})}function $5(t){return"defaultEffects"in t}class Aa{constructor(e,{baseCDN:n=Te.baseCDN,fileName:r}={}){V(this,"uuid");V(this,"name",null);V(this,"size",null);V(this,"isStored",null);V(this,"isImage",null);V(this,"mimeType",null);V(this,"cdnUrl",null);V(this,"s3Url",null);V(this,"originalFilename",null);V(this,"imageInfo",null);V(this,"videoInfo",null);V(this,"contentInfo",null);V(this,"metadata",null);V(this,"s3Bucket",null);V(this,"defaultEffects",null);const{uuid:i,s3Bucket:s}=e,o=qr(n,`${i}/`),a=s?qr(`https://${s}.s3.amazonaws.com/`,`${i}/${e.filename}`):null;this.uuid=i,this.name=r||e.filename,this.size=e.size,this.isStored=e.isStored,this.isImage=e.isImage,this.mimeType=e.mimeType,this.cdnUrl=o,this.originalFilename=e.originalFilename,this.imageInfo=e.imageInfo,this.videoInfo=e.videoInfo,this.contentInfo=e.contentInfo,this.metadata=e.metadata||null,this.s3Bucket=s||null,this.s3Url=a,$5(e)&&(this.defaultEffects=e.defaultEffects)}}const F5=(t,{publicKey:e,fileName:n,baseURL:r,secureSignature:i,secureExpire:s,store:o,contentType:a,signal:l,onProgress:c,source:h,integration:f,userAgent:p,retryThrottledRequestMaxTimes:_,retryNetworkErrorMaxTimes:E,baseCDN:I,metadata:R})=>R5(t,{publicKey:e,fileName:n,contentType:a,baseURL:r,secureSignature:i,secureExpire:s,store:o,signal:l,onProgress:c,source:h,integration:f,userAgent:p,retryThrottledRequestMaxTimes:_,retryNetworkErrorMaxTimes:E,metadata:R}).then(({file:T})=>Ly(T,{publicKey:e,baseURL:r,source:h,integration:f,userAgent:p,retryThrottledRequestMaxTimes:_,retryNetworkErrorMaxTimes:E,onProgress:c,signal:l})).then(T=>new Aa(T,{baseCDN:I})),j5=(t,{publicKey:e,fileName:n,baseURL:r,signal:i,onProgress:s,source:o,integration:a,userAgent:l,retryThrottledRequestMaxTimes:c,retryNetworkErrorMaxTimes:h,baseCDN:f})=>OI(t,{publicKey:e,baseURL:r,signal:i,source:o,integration:a,userAgent:l,retryThrottledRequestMaxTimes:c,retryNetworkErrorMaxTimes:h}).then(p=>new Aa(p,{baseCDN:f,fileName:n})).then(p=>(s&&s({isComputable:!0,value:1}),p)),z5=(t,{signal:e}={})=>{let n=null,r=null;const i=t.map(()=>new AbortController),s=o=>()=>{r=o,i.forEach((a,l)=>l!==o&&a.abort())};return $d(e,()=>{i.forEach(o=>o.abort())}),Promise.all(t.map((o,a)=>{const l=s(a);return Promise.resolve().then(()=>o({stopRace:l,signal:i[a].signal})).then(c=>(l(),c)).catch(c=>(n=c,null))})).then(o=>{if(r===null)throw n;return o[r]})};var B5=window.WebSocket;class H5{constructor(){V(this,"events",Object.create({}))}emit(e,n){var r;(r=this.events[e])==null||r.forEach(i=>i(n))}on(e,n){this.events[e]=this.events[e]||[],this.events[e].push(n)}off(e,n){n?this.events[e]=this.events[e].filter(r=>r!==n):this.events[e]=[]}}const W5=(t,e)=>t==="success"?{status:sn.Success,...e}:t==="progress"?{status:sn.Progress,...e}:{status:sn.Error,...e};class q5{constructor(e,n=3e4){V(this,"key");V(this,"disconnectTime");V(this,"ws");V(this,"queue",[]);V(this,"isConnected",!1);V(this,"subscribers",0);V(this,"emmitter",new H5);V(this,"disconnectTimeoutId",null);this.key=e,this.disconnectTime=n}connect(){if(this.disconnectTimeoutId&&clearTimeout(this.disconnectTimeoutId),!this.isConnected&&!this.ws){const e=`wss://ws.pusherapp.com/app/${this.key}?protocol=5&client=js&version=1.12.2`;this.ws=new B5(e),this.ws.addEventListener("error",n=>{this.emmitter.emit("error",new Error(n.message))}),this.emmitter.on("connected",()=>{this.isConnected=!0,this.queue.forEach(n=>this.send(n.event,n.data)),this.queue=[]}),this.ws.addEventListener("message",n=>{const r=JSON.parse(n.data.toString());switch(r.event){case"pusher:connection_established":{this.emmitter.emit("connected",void 0);break}case"pusher:ping":{this.send("pusher:pong",{});break}case"progress":case"success":case"fail":this.emmitter.emit(r.channel,W5(r.event,JSON.parse(r.data)))}})}}disconnect(){const e=()=>{var n;(n=this.ws)==null||n.close(),this.ws=void 0,this.isConnected=!1};this.disconnectTime?this.disconnectTimeoutId=setTimeout(()=>{e()},this.disconnectTime):e()}send(e,n){var i;const r=JSON.stringify({event:e,data:n});(i=this.ws)==null||i.send(r)}subscribe(e,n){this.subscribers+=1,this.connect();const r=`task-status-${e}`,i={event:"pusher:subscribe",data:{channel:r}};this.emmitter.on(r,n),this.isConnected?this.send(i.event,i.data):this.queue.push(i)}unsubscribe(e){this.subscribers-=1;const n=`task-status-${e}`,r={event:"pusher:unsubscribe",data:{channel:n}};this.emmitter.off(n),this.isConnected?this.send(r.event,r.data):this.queue=this.queue.filter(i=>i.data.channel!==n),this.subscribers===0&&this.disconnect()}onError(e){return this.emmitter.on("error",e),()=>this.emmitter.off("error",e)}}let Kf=null;const Dy=t=>{if(!Kf){const e=typeof window>"u"?0:3e4;Kf=new q5(t,e)}return Kf},G5=t=>{Dy(t).connect()};function K5({token:t,publicKey:e,baseURL:n,integration:r,userAgent:i,retryThrottledRequestMaxTimes:s,retryNetworkErrorMaxTimes:o,onProgress:a,signal:l}){return AI({check:c=>L5(t,{publicKey:e,baseURL:n,integration:r,userAgent:i,retryThrottledRequestMaxTimes:s,retryNetworkErrorMaxTimes:o,signal:c}).then(h=>{switch(h.status){case sn.Error:return new cn(h.error,h.errorCode);case sn.Waiting:return!1;case sn.Unknown:return new cn(`Token "${t}" was not found.`);case sn.Progress:return a&&(h.total==="unknown"?a({isComputable:!1}):a({isComputable:!0,value:h.done/h.total})),!1;case sn.Success:return a&&a({isComputable:!0,value:h.done/h.total}),h;default:throw new Error("Unknown status")}}),signal:l})}const Q5=({token:t,pusherKey:e,signal:n,onProgress:r})=>new Promise((i,s)=>{const o=Dy(e),a=o.onError(s),l=()=>{a(),o.unsubscribe(t)};$d(n,()=>{l(),s(new Hs("pusher cancelled"))}),o.subscribe(t,c=>{switch(c.status){case sn.Progress:{r&&(c.total==="unknown"?r({isComputable:!1}):r({isComputable:!0,value:c.done/c.total}));break}case sn.Success:{l(),r&&r({isComputable:!0,value:c.done/c.total}),i(c);break}case sn.Error:l(),s(new cn(c.msg,c.error_code))}})}),X5=(t,{publicKey:e,fileName:n,baseURL:r,baseCDN:i,checkForUrlDuplicates:s,saveUrlForRecurrentUploads:o,secureSignature:a,secureExpire:l,store:c,signal:h,onProgress:f,source:p,integration:_,userAgent:E,retryThrottledRequestMaxTimes:I,pusherKey:R=Te.pusherKey,metadata:T})=>Promise.resolve(G5(R)).then(()=>N5(t,{publicKey:e,fileName:n,baseURL:r,checkForUrlDuplicates:s,saveUrlForRecurrentUploads:o,secureSignature:a,secureExpire:l,store:c,signal:h,source:p,integration:_,userAgent:E,retryThrottledRequestMaxTimes:I,metadata:T})).catch(w=>{const C=Dy(R);return C==null||C.disconnect(),Promise.reject(w)}).then(w=>w.type===xm.FileInfo?w:z5([({signal:C})=>K5({token:w.token,publicKey:e,baseURL:r,integration:_,userAgent:E,retryThrottledRequestMaxTimes:I,onProgress:f,signal:C}),({signal:C})=>Q5({token:w.token,pusherKey:R,signal:C,onProgress:f})],{signal:h})).then(w=>{if(w instanceof cn)throw w;return w}).then(w=>Ly(w.uuid,{publicKey:e,baseURL:r,integration:_,userAgent:E,retryThrottledRequestMaxTimes:I,onProgress:f,signal:h})).then(w=>new Aa(w,{baseCDN:i})),Qf=new WeakMap,Y5=async t=>{if(Qf.has(t))return Qf.get(t);const e=await fetch(t.uri).then(n=>n.blob());return Qf.set(t,e),e},LI=async t=>{if(zd(t)||jd(t))return t.size;if(Bd(t))return(await Y5(t)).size;throw new Error("Unknown file type. Cannot determine file size.")},J5=(t,e=Te.multipartMinFileSize)=>t>=e,DI=t=>{const e="[a-f0-9]{8}-[a-f0-9]{4}-[a-f0-9]{4}-[a-f0-9]{4}-[a-f0-9]{12}",n=new RegExp(e);return!Sa(t)&&n.test(t)},My=t=>{const e="^(?:\\w+:)?\\/\\/([^\\s\\.]+\\.\\S{2}|localhost[\\:?\\d]*)\\S*$",n=new RegExp(e);return!Sa(t)&&n.test(t)},Z5=(t,e)=>new Promise((n,r)=>{const i=[];let s=!1,o=e.length;const a=[...e],l=()=>{const c=e.length-a.length,h=a.shift();h&&h().then(f=>{s||(i[c]=f,o-=1,o?l():n(i))}).catch(f=>{s=!0,r(f)})};for(let c=0;c<t;c++)l()}),eV=(t,e,n,r)=>{const i=r*e,s=Math.min(i+r,n);return t.slice(i,s)},tV=async(t,e,n)=>r=>eV(t,r,e,n),nV=(t,e,{publicKey:n,contentType:r,onProgress:i,signal:s,integration:o,retryThrottledRequestMaxTimes:a,retryNetworkErrorMaxTimes:l})=>V5(t,e,{publicKey:n,contentType:r,onProgress:i,signal:s,integration:o,retryThrottledRequestMaxTimes:a,retryNetworkErrorMaxTimes:l}),rV=async(t,{publicKey:e,fileName:n,fileSize:r,baseURL:i,secureSignature:s,secureExpire:o,store:a,signal:l,onProgress:c,source:h,integration:f,userAgent:p,retryThrottledRequestMaxTimes:_,retryNetworkErrorMaxTimes:E,contentType:I,multipartChunkSize:R=Te.multipartChunkSize,maxConcurrentRequests:T=Te.maxConcurrentRequests,baseCDN:w,metadata:C})=>{const D=r??await LI(t);let F;const z=(g,y)=>{if(!c)return;F||(F=Array(g).fill(0));const b=S=>S.reduce((k,P)=>k+P,0);return S=>{S.isComputable&&(F[y]=S.value,c({isComputable:!0,value:b(F)/g}))}};return I||(I=RI(t)),M5(D,{publicKey:e,contentType:I,fileName:n||NI(t),baseURL:i,secureSignature:s,secureExpire:o,store:a,signal:l,source:h,integration:f,userAgent:p,retryThrottledRequestMaxTimes:_,retryNetworkErrorMaxTimes:E,metadata:C}).then(async({uuid:g,parts:y})=>{const b=await tV(t,D,R);return Promise.all([g,Z5(T,y.map((S,k)=>()=>nV(b(k),S,{publicKey:e,contentType:I,onProgress:z(y.length,k),signal:l,integration:f,retryThrottledRequestMaxTimes:_,retryNetworkErrorMaxTimes:E})))])}).then(([g])=>U5(g,{publicKey:e,baseURL:i,source:h,integration:f,userAgent:p,retryThrottledRequestMaxTimes:_,retryNetworkErrorMaxTimes:E})).then(g=>g.isReady?g:Ly(g.uuid,{publicKey:e,baseURL:i,source:h,integration:f,userAgent:p,retryThrottledRequestMaxTimes:_,retryNetworkErrorMaxTimes:E,onProgress:c,signal:l})).then(g=>new Aa(g,{baseCDN:w}))};async function MI(t,{publicKey:e,fileName:n,baseURL:r=Te.baseURL,secureSignature:i,secureExpire:s,store:o,signal:a,onProgress:l,source:c,integration:h,userAgent:f,retryThrottledRequestMaxTimes:p,retryNetworkErrorMaxTimes:_,contentType:E,multipartMinFileSize:I,multipartChunkSize:R,maxConcurrentRequests:T,baseCDN:w=Te.baseCDN,checkForUrlDuplicates:C,saveUrlForRecurrentUploads:D,pusherKey:F,metadata:z}){if(Sa(t)){const g=await LI(t);return J5(g,I)?rV(t,{publicKey:e,contentType:E,multipartChunkSize:R,fileSize:g,fileName:n,baseURL:r,secureSignature:i,secureExpire:s,store:o,signal:a,onProgress:l,source:c,integration:h,userAgent:f,maxConcurrentRequests:T,retryThrottledRequestMaxTimes:p,retryNetworkErrorMaxTimes:_,baseCDN:w,metadata:z}):F5(t,{publicKey:e,fileName:n,contentType:E,baseURL:r,secureSignature:i,secureExpire:s,store:o,signal:a,onProgress:l,source:c,integration:h,userAgent:f,retryThrottledRequestMaxTimes:p,retryNetworkErrorMaxTimes:_,baseCDN:w,metadata:z})}if(My(t))return X5(t,{publicKey:e,fileName:n,baseURL:r,baseCDN:w,checkForUrlDuplicates:C,saveUrlForRecurrentUploads:D,secureSignature:i,secureExpire:s,store:o,signal:a,onProgress:l,source:c,integration:h,userAgent:f,retryThrottledRequestMaxTimes:p,retryNetworkErrorMaxTimes:_,pusherKey:F,metadata:z});if(DI(t))return j5(t,{publicKey:e,fileName:n,baseURL:r,signal:a,onProgress:l,source:c,integration:h,userAgent:f,retryThrottledRequestMaxTimes:p,retryNetworkErrorMaxTimes:_,baseCDN:w});throw new TypeError(`File uploading from "${t}" is not supported`)}class iV{constructor(e,{baseCDN:n=Te.baseCDN}={}){V(this,"uuid");V(this,"filesCount");V(this,"totalSize");V(this,"isStored");V(this,"isImage");V(this,"cdnUrl");V(this,"files");V(this,"createdAt");V(this,"storedAt",null);this.uuid=e.id,this.filesCount=e.filesCount;const r=e.files.filter(Boolean);this.totalSize=Object.values(r).reduce((i,s)=>i+s.size,0),this.isStored=!!e.datetimeStored,this.isImage=!!Object.values(r).filter(i=>i.isImage).length,this.cdnUrl=e.cdnUrl,this.files=r.map(i=>new Aa(i,{baseCDN:n})),this.createdAt=e.datetimeCreated,this.storedAt=e.datetimeStored}}const sV=t=>{for(const e of t)if(!Sa(e))return!1;return!0},oV=t=>{for(const e of t)if(!DI(e))return!1;return!0},aV=t=>{for(const e of t)if(!My(e))return!1;return!0};function lV(t,{publicKey:e,fileName:n,baseURL:r=Te.baseURL,secureSignature:i,secureExpire:s,store:o,signal:a,onProgress:l,source:c,integration:h,userAgent:f,retryThrottledRequestMaxTimes:p,retryNetworkErrorMaxTimes:_,contentType:E,multipartChunkSize:I=Te.multipartChunkSize,baseCDN:R=Te.baseCDN,checkForUrlDuplicates:T,saveUrlForRecurrentUploads:w,jsonpCallback:C}){if(!sV(t)&&!aV(t)&&!oV(t))throw new TypeError(`Group uploading from "${t}" is not supported`);let D,F=!0;const z=t.length,g=(y,b)=>{if(!l)return;D||(D=Array(y).fill(0));const S=k=>k.reduce((P,x)=>P+x)/y;return k=>{if(!k.isComputable||!F){F=!1,l({isComputable:!1});return}D[b]=k.value,l({isComputable:!0,value:S(D)})}};return Promise.all(t.map((y,b)=>Sa(y)||My(y)?MI(y,{publicKey:e,fileName:n,baseURL:r,secureSignature:i,secureExpire:s,store:o,signal:a,onProgress:g(z,b),source:c,integration:h,userAgent:f,retryThrottledRequestMaxTimes:p,retryNetworkErrorMaxTimes:_,contentType:E,multipartChunkSize:I,baseCDN:R,checkForUrlDuplicates:T,saveUrlForRecurrentUploads:w}).then(S=>S.uuid):y)).then(y=>D5(y,{publicKey:e,baseURL:r,jsonpCallback:C,secureSignature:i,secureExpire:s,signal:a,source:c,integration:h,userAgent:f,retryThrottledRequestMaxTimes:p,retryNetworkErrorMaxTimes:_}).then(b=>new iV(b,{baseCDN:R})).then(b=>(l&&l({isComputable:!0,value:1}),b)))}class uV{constructor(e){V(this,"_concurrency",1);V(this,"_pending",[]);V(this,"_running",0);V(this,"_resolvers",new Map);V(this,"_rejectors",new Map);this._concurrency=e}_run(){const e=this._concurrency-this._running;for(let n=0;n<e;n++){const r=this._pending.shift();if(!r)return;const i=this._resolvers.get(r),s=this._rejectors.get(r);if(!i||!s)throw new Error("Unexpected behavior: resolver or rejector is undefined");this._running+=1,r().finally(()=>{this._resolvers.delete(r),this._rejectors.delete(r),this._running-=1,this._run()}).then(o=>i(o)).catch(o=>s(o))}}add(e){return new Promise((n,r)=>{this._resolvers.set(e,n),this._rejectors.set(e,r),this._pending.push(e),this._run()})}get pending(){return this._pending.length}get running(){return this._running}set concurrency(e){this._concurrency=e,this._run()}get concurrency(){return this._concurrency}}const VI=()=>({}),UI=t=>({...VI(),"*currentActivity":"","*currentActivityParams":{},"*history":[],"*historyBack":null,"*closeModal":()=>{t.set$({"*modalActive":!1,"*currentActivity":""})}}),$I=t=>({...UI(t),"*commonProgress":0,"*uploadList":[],"*focusedEntry":null,"*uploadMetadata":null,"*uploadQueue":new uV(1),"*uploadCollection":null,"*collectionErrors":[],"*collectionState":null,"*groupInfo":null,"*uploadTrigger":new Set}),Vy={"locale-id":"en","social-source-lang":"en","upload-file":"Upload file","upload-files":"Upload files","choose-file":"Choose file","choose-files":"Choose files","drop-files-here":"Drop files here","select-file-source":"Select file source",selected:"Selected",upload:"Upload","add-more":"Add more",cancel:"Cancel","start-from-cancel":"Cancel",clear:"Clear","camera-shot":"Shot","upload-url":"Import","upload-url-placeholder":"Paste link here","edit-image":"Edit image","edit-detail":"Details",back:"Back",done:"Done",ok:"Ok","remove-from-list":"Remove",no:"No",yes:"Yes","confirm-your-action":"Confirm your action","are-you-sure":"Are you sure?","selected-count":"Selected:","upload-error":"Upload error","validation-error":"Validation error","no-files":"No files selected",browse:"Browse","not-uploaded-yet":"Not uploaded yet...",file__one:"file",file__other:"files",error__one:"error",error__other:"errors","header-uploading":"Uploading {{count}} {{plural:file(count)}}","header-failed":"{{count}} {{plural:error(count)}}","header-succeed":"{{count}} {{plural:file(count)}} uploaded","header-total":"{{count}} {{plural:file(count)}} selected","src-type-local":"From device","src-type-from-url":"From link","src-type-camera":"Camera","src-type-draw":"Draw","src-type-facebook":"Facebook","src-type-dropbox":"Dropbox","src-type-gdrive":"Google Drive","src-type-gphotos":"Google Photos","src-type-instagram":"Instagram","src-type-flickr":"Flickr","src-type-vk":"VK","src-type-evernote":"Evernote","src-type-box":"Box","src-type-onedrive":"Onedrive","src-type-huddle":"Huddle","src-type-other":"Other","caption-from-url":"Import from link","caption-camera":"Camera","caption-draw":"Draw","caption-edit-file":"Edit file","file-no-name":"No name...","toggle-fullscreen":"Toggle fullscreen","toggle-guides":"Toggle guides",rotate:"Rotate","flip-vertical":"Flip vertical","flip-horizontal":"Flip horizontal",apply:"Apply",brightness:"Brightness",contrast:"Contrast",saturation:"Saturation",exposure:"Exposure",gamma:"Gamma",vibrance:"Vibrance",warmth:"Warmth",enhance:"Enhance",original:"Original",resize:"Resize image",crop:"Crop","select-color":"Select color",text:"Text",draw:"Draw","cancel-edit":"Cancel edit","tab-view":"Preview","tab-details":"Details","file-name":"Name","file-size":"Size","cdn-url":"CDN URL","file-size-unknown":"Unknown","camera-permissions-denied":"Camera access denied","camera-permissions-prompt":"Please allow access to the camera","camera-permissions-request":"Request access","files-count-limit-error-title":"Files count limit overflow","files-count-limit-error-too-few":"Youve chosen {{total}} {{plural:file(total)}}. At least {{min}} {{plural:file(min)}} required.","files-count-limit-error-too-many":"Youve chosen too many files. {{max}} {{plural:file(max)}} is maximum.","files-max-size-limit-error":"File is too big. Max file size is {{maxFileSize}}.","has-validation-errors":"File validation error ocurred. Please, check your files before upload.","images-only-accepted":"Only image files are accepted.","file-type-not-allowed":"Uploading of these file types is not allowed.","some-files-were-not-uploaded":"Some files were not uploaded."},$h=new Map,km=new Map,FI=(t,e)=>{$h.has(t)&&console.log(`Locale ${t} is already defined. Overwriting...`),$h.set(t,{...Vy,...e})},cV=(t,e)=>{km.set(t,e)},jI=(t,e)=>{typeof e=="function"?cV(t,e):FI(t,e)},hV=async t=>{if(!$h.has(t)){if(!km.has(t))throw new Error(`Locale ${t} is not defined`);const n=await km.get(t)();FI(t,n)}return $h.get(t)};jI("en",Vy);const xs=t=>`*l10n/${t}`,dV="en";class fV{constructor(e){V(this,"_blockInstance",null);V(this,"_localeName","");V(this,"_callbacks",new Set);V(this,"_boundBlocks",new Map);this._blockInstance=e;for(let[n,r]of Object.entries(Vy))this._blockInstance.add(xs(n),r,!1);setTimeout(()=>{e.subConfigValue("localeName",async n=>{var s;if(!this._blockInstance||!n)return;this._localeName=n;const r=await hV(n);if(n!==dV&&this._localeName!==n)return;const i=(s=this._blockInstance.cfg.localeDefinitionOverride)==null?void 0:s[n];for(const[o,a]of Object.entries(r)){const l=i==null?void 0:i[o];this._blockInstance.add(xs(o),l??a,!0);for(const c of this._callbacks)c()}}),e.subConfigValue("localeDefinitionOverride",n=>{var i;if(!n)return;const r=n[this._localeName];if(r)for(const[s,o]of Object.entries(r)){(i=this._blockInstance)==null||i.add(xs(s),o,!0);for(const a of this._callbacks)a()}})})}onLocaleChange(e){const n=Mn(e,0);return this._callbacks.add(n),()=>{this._callbacks.delete(n)}}bindL10n(e,n,r){var s,o,a;e.$[n]=r(),this._boundBlocks.has(e)||this._boundBlocks.set(e,new Map),(o=(s=this._boundBlocks.get(e))==null?void 0:s.get(n))==null||o();const i=this.onLocaleChange(()=>{e.$[n]=r()});(a=this._boundBlocks.get(e))==null||a.set(n,i)}destroyL10nBindings(e){const n=this._boundBlocks.get(e);if(n){for(const r of n.values())r();this._boundBlocks.delete(e)}}destroy(){this._callbacks.clear()}}function pV(t,e){[...t.querySelectorAll("[l10n]")].forEach(n=>{let r=n.getAttribute("l10n");if(!r)return;let i="textContent",s=!1;if(r.includes(":")){const l=r.split(":");i=l[0],r=l[1],i.startsWith("@")&&(i=i.slice(1),s=!0)}const o=r;e.has(o)&&e.sub(o,l=>{if(!l)return;e.l10nProcessorSubs.has(o)||e.l10nProcessorSubs.set(o,new Set);const c=e.l10nProcessorSubs.get(o);c==null||c.forEach(p=>{p.remove(),c.delete(p),e.allSubs.delete(p)});const h=xs(l).replace("*","");e.nodeCtx.has(h)||e.nodeCtx.add(h,l);const f=e.nodeCtx.sub(h,()=>{n[i]=e.l10n(l)});c==null||c.add(f),e.allSubs.add(f),n.removeAttribute("l10n")});const a=xs(r);e.has(a)||e.add(a,""),e.sub(a,()=>{r=r,s?n.setAttribute(i,e.l10n(r)):n[i]=e.l10n(r)}),n.removeAttribute("l10n")})}const kn=t=>`*cfg/${t}`,Uy="blocks",$y="0.39.1",zI=t=>{if(typeof t!="string"||!t)return"";let e=t.trim();return e.startsWith("-/")?e=e.slice(2):e.startsWith("/")&&(e=e.slice(1)),e.endsWith("/")&&(e=e.slice(0,e.length-1)),e},Fy=(...t)=>t.filter(e=>typeof e=="string"&&e).map(e=>zI(e)).join("/-/"),Wi=(...t)=>{let e=Fy(...t);return e?`-/${e}/`:""};function BI(t){let e=new URL(t),n=e.pathname+e.search+e.hash,r=n.lastIndexOf("http"),i=n.lastIndexOf("/"),s="";return r>=0?s=n.slice(r):i>=0&&(s=n.slice(i+1)),s}function mV(t){let e=new URL(t),{pathname:n}=e;const r=n.indexOf("/"),i=n.indexOf("/",r+1);return n.substring(r+1,i)}function gV(t){let e=HI(t),n=new URL(e),r=n.pathname.indexOf("/-/");return r===-1?[]:n.pathname.substring(r).split("/-/").filter(Boolean).map(s=>zI(s))}function HI(t){let e=new URL(t),n=BI(t),r=WI(n)?qI(n).pathname:n;return e.pathname=e.pathname.replace(r,""),e.search="",e.hash="",e.toString()}function WI(t){return t.startsWith("http")}function qI(t){let e=new URL(t);return{pathname:e.origin+e.pathname||"",search:e.search||"",hash:e.hash||""}}const Pn=(t,e,n)=>{let r=new URL(HI(t));if(n=n||BI(t),r.pathname.startsWith("//")&&(r.pathname=r.pathname.replace("//","/")),WI(n)){let i=qI(n);r.pathname=r.pathname+(e||"")+(i.pathname||""),r.search=i.search,r.hash=i.hash}else r.pathname=r.pathname+(e||"")+(n||"");return r.toString()},cu=(t,e)=>{let n=new URL(t);return n.pathname=e+"/",n.toString()},Gr=(t,e=",")=>t.trim().split(e).map(n=>n.trim()).filter(n=>n.length>0),Cn=Object.freeze({brightness:0,exposure:0,gamma:100,contrast:0,saturation:0,vibrance:0,warmth:0,enhance:0,filter:0,rotate:0,mirror:!1,flip:!1,crop:void 0}),GI=["enhance","brightness","exposure","gamma","contrast","saturation","vibrance","warmth","filter","mirror","flip","rotate","crop"];function yV(t,e){if(typeof e=="number"){const n=e;return Cn[t]!==n?`${t}/${n}`:""}if(typeof e=="boolean"){const n=e;return Cn[t]!==n?`${t}`:""}if(t==="filter"&&e){const{name:n,amount:r}=e;return Cn.filter===r?"":`${t}/${n}/${r}`}if(t==="crop"&&e){let{dimensions:n,coords:r}=e;return`${t}/${n.join("x")}/${r.join(",")}`}return""}function Wd(t){return Fy(...GI.filter(e=>typeof t[e]<"u"&&t[e]!==null).map(e=>{let n=t[e];return yV(e,n)}).filter(e=>!!e))}const KI=Fy("format/auto","progressive/yes"),Ir=([t])=>typeof t<"u"?Number(t):void 0,Uw=()=>!0,vV=([t,e])=>({name:t,amount:typeof e<"u"?Number(e):100}),_V=([t,e])=>{if(!/\d+x\d+/.test(t)||!/\d+,\d+/.test(e))throw new Error("Crop by aspect ratio, percentage or alignment shortcuts is not supported.");return{dimensions:Gr(t,"x").map(Number),coords:Gr(e).map(Number)}},wV=Object.freeze({enhance:Ir,brightness:Ir,exposure:Ir,gamma:Ir,contrast:Ir,saturation:Ir,vibrance:Ir,warmth:Ir,filter:vV,mirror:Uw,flip:Uw,rotate:Ir,crop:_V});function EV(t){const e={};for(const n of t){const[r,...i]=n.split("/");if(!GI.includes(r))continue;const s=r,o=wV[s];try{const a=o(i);e[s]=a}catch(a){console.warn([`Failed to parse URL operation "${n}". It will be ignored.`,a instanceof Error?`Error message: "${a.message}"`:a,"If you need this functionality, please feel free to open an issue at https://github.com/uploadcare/blocks/issues/new"].join(`
`))}}return e}const Qt=Object.freeze({CROP:"crop",TUNING:"tuning",FILTERS:"filters"}),fr=[Qt.CROP,Qt.TUNING,Qt.FILTERS],bV=["brightness","exposure","gamma","contrast","saturation","vibrance","warmth","enhance"],TV=["adaris","briaril","calarel","carris","cynarel","cyren","elmet","elonni","enzana","erydark","fenralan","ferand","galen","gavin","gethriel","iorill","iothari","iselva","jadis","lavra","misiara","namala","nerion","nethari","pamaya","sarnar","sedis","sewen","sorahel","sorlen","tarian","thellassan","varriel","varven","vevera","virkas","yedis","yllara","zatvel","zevcen"],CV=["rotate","mirror","flip"],da=Object.freeze({brightness:{zero:Cn.brightness,range:[-100,100],keypointsNumber:2},exposure:{zero:Cn.exposure,range:[-500,500],keypointsNumber:2},gamma:{zero:Cn.gamma,range:[0,1e3],keypointsNumber:2},contrast:{zero:Cn.contrast,range:[-100,500],keypointsNumber:2},saturation:{zero:Cn.saturation,range:[-100,500],keypointsNumber:1},vibrance:{zero:Cn.vibrance,range:[-100,500],keypointsNumber:1},warmth:{zero:Cn.warmth,range:[-100,100],keypointsNumber:1},enhance:{zero:Cn.enhance,range:[0,100],keypointsNumber:1},filter:{zero:Cn.filter,range:[0,100],keypointsNumber:1}}),IV=t=>t?t.split(",").map(e=>e.trim()):[],jy=t=>t?t.join(","):"",SV="https://ucarecdn.com",AV="https://upload.uploadcare.com",xV="https://social.uploadcare.com",Vi={pubkey:"",multiple:!0,multipleMin:0,multipleMax:Number.MAX_SAFE_INTEGER,confirmUpload:!1,imgOnly:!1,accept:"",externalSourcesPreferredTypes:"",store:"auto",cameraMirror:!1,cameraCapture:"",sourceList:"local, url, camera, dropbox, gdrive",cloudImageEditorTabs:jy(fr),maxLocalFileSizeBytes:0,thumbSize:76,showEmptyList:!1,useLocalImageEditor:!1,useCloudImageEditor:!0,removeCopyright:!1,cropPreset:"",imageShrink:"",modalScrollLock:!0,modalBackdropStrokes:!1,sourceListWrap:!0,remoteTabSessionKey:"",cdnCname:SV,baseUrl:AV,socialBaseUrl:xV,secureSignature:"",secureExpire:"",secureDeliveryProxy:"",retryThrottledRequestMaxTimes:1,multipartMinFileSize:26214400,multipartChunkSize:5242880,maxConcurrentRequests:10,multipartMaxConcurrentRequests:4,multipartMaxAttempts:3,checkForUrlDuplicates:!1,saveUrlForRecurrentUploads:!1,groupOutput:!1,userAgentIntegration:"",debug:!1,metadata:null,localeName:"en",localeDefinitionOverride:null},Xf="lr-";class Ne extends Ud{constructor(){super();V(this,"requireCtxName",!1);V(this,"allowCustomTemplate",!0);V(this,"activityType",null);V(this,"init$",VI());this.l10nProcessorSubs=new Map,this.addTemplateProcessor(pV)}l10n(n,r={}){if(!n)return"";let i=this.$[xs(n)]||n,s=l5(i);for(let a of s)r[a.variable]=this.pluralize(a.pluralKey,Number(r[a.countVariable]));return Am(i,r)}pluralize(n,r){const i=this.l10n("locale-id")||"en",s=CI(i,r);return this.l10n(`${n}__${s}`)}bindL10n(n,r){var i;(i=this.localeManager)==null||i.bindL10n(this,n,r)}emit(n,r,i){const s=this.has("*eventEmitter")&&this.$["*eventEmitter"];s&&s.emit(n,r,i)}hasBlockInCtx(n){let r=this.$["*blocksRegistry"];for(let i of r)if(n(i))return!0;return!1}setOrAddState(n,r){this.add$({[n]:r},!0)}setActivity(n){if(this.hasBlockInCtx(r=>r.activityType===n)){this.$["*currentActivity"]=n;return}console.warn(`Activity type "${n}" not found in the context`)}connectedCallback(){const n=this.constructor.className;n&&this.classList.toggle(`${Xf}${n}`,!0),this.hasAttribute("retpl")&&(this.constructor.template=null,this.processInnerHtml=!0),this.requireCtxName?u5({element:this,attribute:"ctx-name",onSuccess:()=>{super.connectedCallback()},onTimeout:()=>{console.error("Attribute `ctx-name` is required and it is not set.")}}):super.connectedCallback(),Uh.registerClient(this)}disconnectedCallback(){super.disconnectedCallback(),Uh.unregisterClient(this)}initCallback(){this.has("*blocksRegistry")||this.add("*blocksRegistry",new Set),this.$["*blocksRegistry"].add(this),this.has("*eventEmitter")||this.add("*eventEmitter",new s5(this.debugPrint.bind(this))),this.has("*localeManager")||this.add("*localeManager",new fV(this)),this.sub(xs("locale-id"),r=>{this.style.direction=o5(r)})}get localeManager(){return this.has("*localeManager")?this.$["*localeManager"]:null}destroyCallback(){var r;let n=this.$["*blocksRegistry"];n.delete(this),(r=this.localeManager)==null||r.destroyL10nBindings(this),this.l10nProcessorSubs=new Map,xe.deleteCtx(this),n.size===0&&setTimeout(()=>{this.destroyCtxCallback()},0)}destroyCtxCallback(){var n;xe.deleteCtx(this.ctxName),(n=this.localeManager)==null||n.destroy()}fileSizeFmt(n,r=2){let i=["B","KB","MB","GB","TB"];if(n===0)return`0 ${i[0]}`;let s=1024,o=r<0?0:r,a=Math.floor(Math.log(n)/Math.log(s));return parseFloat((n/s**a).toFixed(o))+" "+i[a]}proxyUrl(n){let r=this.cfg.secureDeliveryProxy;return r?Am(r,{previewUrl:n},{transform:i=>window.encodeURIComponent(i)}):n}get cfg(){if(!this.__cfgProxy){let n=Object.create(null);this.__cfgProxy=new Proxy(n,{set:(r,i,s)=>{if(typeof i!="string")return!1;const o=kn(i);return this.has(o)||this.add(o,Vi[i]),this.$[o]=s,!0},get:(r,i)=>{const s=kn(i);return this.has(s)||this.add(s,Vi[i]),this.$[kn(i)]}})}return this.__cfgProxy}subConfigValue(n,r){const i=kn(n);this.has(i)||this.add(i,Vi[n]),this.sub(i,r)}debugPrint(...n){if(!this.cfg.debug)return;let r=n;if(typeof(n==null?void 0:n[0])=="function"){const i=n[0];r=i()}console.log(`[${this.ctxName}]`,...r)}static reg(n){if(!n){super.reg();return}super.reg(n.startsWith(Xf)?n:Xf+n)}}V(Ne,"StateConsumerScope",null),V(Ne,"className","");const $w="active",il="___ACTIVITY_IS_ACTIVE___",Ar=class Ar extends Ne{constructor(){super(...arguments);V(this,"historyTracked",!1);V(this,"init$",UI(this));V(this,"_debouncedHistoryFlush",Mn(this._historyFlush.bind(this),10))}_deactivate(){var r;let n=Ar._activityCallbacks.get(this);this[il]=!1,this.removeAttribute($w),(r=n==null?void 0:n.deactivateCallback)==null||r.call(n)}_activate(){var r;let n=Ar._activityCallbacks.get(this);this.$["*historyBack"]=this.historyBack.bind(this),this[il]=!0,this.setAttribute($w,""),(r=n==null?void 0:n.activateCallback)==null||r.call(n),this._debouncedHistoryFlush(),this.emit(tt.ACTIVITY_CHANGE,{activity:this.activityType})}initCallback(){super.initCallback(),this.hasAttribute("current-activity")&&this.sub("*currentActivity",n=>{this.setAttribute("current-activity",n)}),this.activityType&&(this.hasAttribute("activity")||this.setAttribute("activity",this.activityType),this.sub("*currentActivity",n=>{this.activityType!==n&&this[il]?this._deactivate():this.activityType===n&&!this[il]&&this._activate(),n||(this.$["*history"]=[])}),this.has("*modalActive")&&this.sub("*modalActive",n=>{!n&&this.activityType===this.$["*currentActivity"]&&(this.$["*currentActivity"]=null)}))}_historyFlush(){let n=this.$["*history"];n&&(n.length>10&&(n=n.slice(n.length-11,n.length-1)),this.historyTracked&&n[n.length-1]!==this.activityType&&n.push(this.activityType),this.$["*history"]=n)}_isActivityRegistered(){return this.activityType&&Ar._activityCallbacks.has(this)}get isActivityActive(){return this[il]}get couldOpenActivity(){return!0}registerActivity(n,r={}){const{onActivate:i,onDeactivate:s}=r;Ar._activityCallbacks.set(this,{activateCallback:i,deactivateCallback:s})}unregisterActivity(){this.isActivityActive&&this._deactivate(),Ar._activityCallbacks.delete(this)}destroyCallback(){super.destroyCallback(),this._isActivityRegistered()&&this.unregisterActivity();const n=this.$["*currentActivity"];!![...this.$["*blocksRegistry"]].find(s=>s instanceof Ar&&s.activityType===n)||(this.$["*currentActivity"]=null)}get activityKey(){return this.ctxName+this.activityType}get activityParams(){return this.$["*currentActivityParams"]}get initActivity(){return this.getCssData("--cfg-init-activity")}get doneActivity(){return this.getCssData("--cfg-done-activity")}historyBack(){let n=this.$["*history"];if(n){let r=n.pop();for(;r===this.activityType;)r=n.pop();let i=!!r;if(r){const o=[...this.$["*blocksRegistry"]].find(a=>a.activityType===r);i=(o==null?void 0:o.couldOpenActivity)??!1}r=i?r:void 0,this.$["*currentActivity"]=r,this.$["*history"]=n,r||this.setOrAddState("*modalActive",!1)}}};V(Ar,"_activityCallbacks",new Map);let fe=Ar;fe.activities=Object.freeze({START_FROM:"start-from",CAMERA:"camera",DRAW:"draw",UPLOAD_LIST:"upload-list",URL:"url",CONFIRMATION:"confirmation",CLOUD_IMG_EDIT:"cloud-image-edit",EXTERNAL:"external",DETAILS:"details"});const kV=20,Pm=24,vl=34,QI=3,ir=QI/2,hs=1,Ec=100/3,ge=1,Fw=24,PV=6;function wo(t,e){for(let n in e)t.setAttributeNS(null,n,e[n].toString())}function Fn(t,e={}){let n=document.createElementNS("http://www.w3.org/2000/svg",t);return wo(n,e),n}function RV(t,e,n){let{x:r,y:i,width:s,height:o}=t,a=e.includes("w")?0:1,l=e.includes("n")?0:1,c=[-1,1][a],h=[-1,1][l],f=[r+a*s+ir*c,i+l*o+ir*h-Pm*n*h],p=[r+a*s+ir*c,i+l*o+ir*h],_=[r+a*s-Pm*n*c+ir*c,i+l*o+ir*h];return{d:`M ${f[0]} ${f[1]} L ${p[0]} ${p[1]} L ${_[0]} ${_[1]}`,center:p}}function NV(t,e,n){let{x:r,y:i,width:s,height:o}=t,a=["n","s"].includes(e)?.5:{w:0,e:1}[e],l=["w","e"].includes(e)?.5:{n:0,s:1}[e],c=[-1,1][a],h=[-1,1][l],f,p;["n","s"].includes(e)?(f=[r+a*s-vl*n/2,i+l*o+ir*h],p=[r+a*s+vl*n/2,i+l*o+ir*h]):(f=[r+a*s+ir*c,i+l*o-vl*n/2],p=[r+a*s+ir*c,i+l*o+vl*n/2]);let _=`M ${f[0]} ${f[1]} L ${p[0]} ${p[1]}`,E=[p[0]-(p[0]-f[0])/2,p[1]-(p[1]-f[1])/2];return{d:_,center:E}}function OV(t){return t===""?"move":["e","w"].includes(t)?"ew-resize":["n","s"].includes(t)?"ns-resize":["nw","se"].includes(t)?"nwse-resize":"nesw-resize"}function LV({rect:t,delta:[e,n],imageBox:r}){return Fh({...t,x:t.x+e,y:t.y+n},r)}function Fh(t,e){let{x:n}=t,{y:r}=t;return t.x<e.x?n=e.x:t.x+t.width>e.x+e.width&&(n=e.x+e.width-t.width),t.y<e.y?r=e.y:t.y+t.height>e.y+e.height&&(r=e.y+e.height-t.height),{...t,x:n,y:r}}function DV({rect:t,delta:e,aspectRatio:n,imageBox:r}){const[,i]=e;let{y:s,width:o,height:a}=t;s+=i,a-=i,n&&(o=a*n);let l=t.x+t.width/2-o/2;return s<=r.y&&(s=r.y,a=t.y+t.height-s,n&&(o=a*n,l=t.x+t.width/2-o/2)),l<=r.x&&(l=r.x,s=t.y+t.height-a),l+o>=r.x+r.width&&(l=Math.max(r.x,r.x+r.width-o),o=r.x+r.width-l,n&&(a=o/n),s=t.y+t.height-a),a<ge&&(a=ge,n&&(o=a*n,l=t.x+t.width/2-o/2),s=t.y+t.height-a),o<ge&&(o=ge,n&&(a=o/n,l=t.x+t.width/2-o/2),s=t.y+t.height-a),{x:l,y:s,width:o,height:a}}function MV({rect:t,delta:e,aspectRatio:n,imageBox:r}){const[i]=e;let{x:s,width:o,height:a}=t;s+=i,o-=i,n&&(a=o/n);let l=t.y+t.height/2-a/2;return s<=r.x&&(s=r.x,o=t.x+t.width-s,n&&(a=o/n,l=t.y+t.height/2-a/2)),l<=r.y&&(l=r.y,s=t.x+t.width-o),l+a>=r.y+r.height&&(l=Math.max(r.y,r.y+r.height-a),a=r.y+r.height-l,n&&(o=a*n),s=t.x+t.width-o),a<ge&&(a=ge,n&&(o=a*n),l=t.y+t.height/2-a/2,s=t.x+t.width-o),o<ge&&(o=ge,n&&(a=o/n),l=t.y+t.height/2-a/2,s=t.x+t.width-o),{x:s,y:l,width:o,height:a}}function VV({rect:t,delta:e,aspectRatio:n,imageBox:r}){const[,i]=e;let{y:s,width:o,height:a}=t;a+=i,n&&(o=a*n);let l=t.x+t.width/2-o/2;return s+a>=r.y+r.height&&(a=r.y+r.height-s,n&&(o=a*n),l=t.x+t.width/2-o/2),l<=r.x&&(l=r.x,s=t.y),l+o>=r.x+r.width&&(l=Math.max(r.x,r.x+r.width-o),o=r.x+r.width-l,n&&(a=o/n),s=t.y),a<ge&&(a=ge,n&&(o=a*n),l=t.x+t.width/2-o/2),o<ge&&(o=ge,n&&(a=o/n),l=t.x+t.width/2-o/2),{x:l,y:s,width:o,height:a}}function UV({rect:t,delta:e,aspectRatio:n,imageBox:r}){const[i]=e;let{x:s,width:o,height:a}=t;o+=i,n&&(a=o/n);let l=t.y+t.height/2-a/2;return s+o>=r.x+r.width&&(o=r.x+r.width-s,n&&(a=o/n),l=t.y+t.height/2-a/2),l<=r.y&&(l=r.y,s=t.x),l+a>=r.y+r.height&&(l=Math.max(r.y,r.y+r.height-a),a=r.y+r.height-l,n&&(o=a*n),s=t.x),a<ge&&(a=ge,n&&(o=a*n),l=t.y+t.height/2-a/2),o<ge&&(o=ge,n&&(a=o/n),l=t.y+t.height/2-a/2),{x:s,y:l,width:o,height:a}}function $V({rect:t,delta:e,aspectRatio:n,imageBox:r}){let[i,s]=e,{x:o,y:a,width:l,height:c}=t;return o+i<r.x&&(i=r.x-o),a+s<r.y&&(s=r.y-a),o+=i,l-=i,a+=s,c-=s,n&&Math.abs(l/c)>n?(s=l/n-c,c+=s,a-=s,a<=r.y&&(c=c-(r.y-a),l=c*n,o=t.x+t.width-l,a=r.y)):n&&(i=c*n-l,l=l+i,o-=i,o<=r.x&&(l=l-(r.x-o),c=l/n,o=r.x,a=t.y+t.height-c)),c<ge&&(c=ge,n&&(l=c*n),o=t.x+t.width-l,a=t.y+t.height-c),l<ge&&(l=ge,n&&(c=l/n),o=t.x+t.width-l,a=t.y+t.height-c),{x:o,y:a,width:l,height:c}}function FV({rect:t,delta:e,aspectRatio:n,imageBox:r}){let[i,s]=e,{x:o,y:a,width:l,height:c}=t;return o+l+i>r.x+r.width&&(i=r.x+r.width-o-l),a+s<r.y&&(s=r.y-a),l+=i,a+=s,c-=s,n&&Math.abs(l/c)>n?(s=l/n-c,c+=s,a-=s,a<=r.y&&(c=c-(r.y-a),l=c*n,o=t.x,a=r.y)):n&&(i=c*n-l,l+=i,o+l>=r.x+r.width&&(l=r.x+r.width-o,c=l/n,o=r.x+r.width-l,a=t.y+t.height-c)),c<ge&&(c=ge,n&&(l=c*n),a=t.y+t.height-c),l<ge&&(l=ge,n&&(c=l/n),a=t.y+t.height-c),{x:o,y:a,width:l,height:c}}function jV({rect:t,delta:e,aspectRatio:n,imageBox:r}){let[i,s]=e,{x:o,y:a,width:l,height:c}=t;return o+i<r.x&&(i=r.x-o),a+c+s>r.y+r.height&&(s=r.y+r.height-a-c),o+=i,l-=i,c+=s,n&&Math.abs(l/c)>n?(s=l/n-c,c+=s,a+c>=r.y+r.height&&(c=r.y+r.height-a,l=c*n,o=t.x+t.width-l,a=r.y+r.height-c)):n&&(i=c*n-l,l+=i,o-=i,o<=r.x&&(l=l-(r.x-o),c=l/n,o=r.x,a=t.y)),c<ge&&(c=ge,n&&(l=c*n),o=t.x+t.width-l),l<ge&&(l=ge,n&&(c=l/n),o=t.x+t.width-l),{x:o,y:a,width:l,height:c}}function zV({rect:t,delta:e,aspectRatio:n,imageBox:r}){let[i,s]=e,{x:o,y:a,width:l,height:c}=t;return o+l+i>r.x+r.width&&(i=r.x+r.width-o-l),a+c+s>r.y+r.height&&(s=r.y+r.height-a-c),l+=i,c+=s,n&&Math.abs(l/c)>n?(s=l/n-c,c+=s,a+c>=r.y+r.height&&(c=r.y+r.height-a,l=c*n,o=t.x,a=r.y+r.height-c)):n&&(i=c*n-l,l+=i,o+l>=r.x+r.width&&(l=r.x+r.width-o,c=l/n,o=r.x+r.width-l,a=t.y)),c<ge&&(c=ge,n&&(l=c*n)),l<ge&&(l=ge,n&&(c=l/n)),{x:o,y:a,width:l,height:c}}function BV({direction:t,...e}){switch(t){case"n":return DV(e);case"w":return MV(e);case"s":return VV(e);case"e":return UV(e);case"nw":return $V(e);case"ne":return FV(e);case"sw":return jV(e);case"se":return zV(e);default:return e.rect}}function HV(t,[e,n]){return t.x<=e&&e<=t.x+t.width&&t.y<=n&&n<=t.y+t.height}function WV(t,e){return t.x>=e.x&&t.y>=e.y&&t.x+t.width<=e.x+e.width&&t.y+t.height<=e.y+e.height}function qV(t,e){return Math.abs(t.width/t.height-e)<.1}function sl({width:t,height:e},n){let r=n/90%2!==0;return{width:r?e:t,height:r?t:e}}function GV(t,e,n){const r=t/e;let i,s;r>n?(i=Math.round(e*n),s=e):(i=t,s=Math.round(t/n));const o=Math.round((t-i)/2),a=Math.round((e-s)/2);return o+i>t&&(i=t-o),a+s>e&&(s=e-a),{x:o,y:a,width:i,height:s}}function Kc(t){return{x:Math.round(t.x),y:Math.round(t.y),width:Math.round(t.width),height:Math.round(t.height)}}function Do(t,e,n){return Math.min(Math.max(t,e),n)}const XI=t=>{if(!t)return[];const[e,n]=t.split(":").map(Number);if(!Number.isFinite(e)||!Number.isFinite(n)){console.error(`Invalid crop preset: ${t}`);return}return[{type:"aspect-ratio",width:e,height:n}]},sr=Object.freeze({LOCAL:"local",DROP_AREA:"drop-area",URL_TAB:"url-tab",CAMERA:"camera",EXTERNAL:"external",API:"js-api"});function KV(t){return SI({...t,libraryName:Uy,libraryVersion:$y})}const YI=({type:t,message:e,...n})=>({type:t,message:e,...n}),mo=YI,Yf=YI,Rm=["image/*","image/heif","image/heif-sequence","image/heic","image/heic-sequence","image/avif","image/avif-sequence",".heif",".heifs",".heic",".heics",".avif",".avifs"],jw=t=>t?t.filter(e=>typeof e=="string").map(e=>Gr(e)).flat():[],JI=(t,e)=>e.some(n=>n.endsWith("*")?(n=n.replace("*",""),t.startsWith(n)):t===n),QV=(t,e)=>e.some(n=>n.startsWith(".")?t.toLowerCase().endsWith(n.toLowerCase()):!1),zw=t=>{let e=t==null?void 0:t.type;return e?JI(e,Rm):!1},tr=1e3,ds=Object.freeze({AUTO:"auto",BYTE:"byte",KB:"kb",MB:"mb",GB:"gb",TB:"tb",PB:"pb"}),ol=t=>Math.ceil(t*100)/100,XV=(t,e=ds.AUTO)=>{const n=e===ds.AUTO;if(e===ds.BYTE||n&&t<tr**1){const r=CI("en-US",t),i={one:"byte",other:"bytes"}[r];return`${t} ${i}`}return e===ds.KB||n&&t<tr**2?`${ol(t/tr**1)} KB`:e===ds.MB||n&&t<tr**3?`${ol(t/tr**2)} MB`:e===ds.GB||n&&t<tr**4?`${ol(t/tr**3)} GB`:e===ds.TB||n&&t<tr**5?`${ol(t/tr**4)} TB`:`${ol(t/tr**5)} PB`},Bw=new Set;function ZI(t){Bw.has(t)||(Bw.add(t),console.warn(t))}const Hw="[Typed State] Wrong property name: ",YV="[Typed State] Wrong property type: ";class JV{constructor(e,n){this.__typedSchema=e,this.__ctxId=n||Nu.generate(),this.__schema=Object.keys(e).reduce((r,i)=>(r[i]=e[i].value,r),{}),this.__data=xe.registerCtx(this.__schema,this.__ctxId)}get uid(){return this.__ctxId}setValue(e,n){if(!this.__typedSchema.hasOwnProperty(e)){console.warn(Hw+e);return}let r=this.__typedSchema[e];if((n==null?void 0:n.constructor)===r.type||n instanceof r.type||r.nullable&&n===null){this.__data.pub(e,n);return}console.warn(YV+e)}setMultipleValues(e){for(let n in e)this.setValue(n,e[n])}getValue(e){if(!this.__typedSchema.hasOwnProperty(e)){console.warn(Hw+e);return}return this.__data.read(e)}subscribe(e,n){return this.__data.sub(e,n)}remove(){xe.deleteCtx(this.__ctxId)}}class ZV{constructor(e){this.__typedSchema=e.typedSchema,this.__ctxId=e.ctxName||Nu.generate(),this.__data=xe.registerCtx({},this.__ctxId),this.__watchList=e.watchList||[],this.__subsMap=Object.create(null),this.__propertyObservers=new Set,this.__collectionObservers=new Set,this.__items=new Set,this.__removed=new Set,this.__added=new Set;let n=Object.create(null);this.__notifyObservers=(r,i)=>{this.__observeTimeout&&window.clearTimeout(this.__observeTimeout),n[r]||(n[r]=new Set),n[r].add(i),this.__observeTimeout=window.setTimeout(()=>{Object.keys(n).length!==0&&(this.__propertyObservers.forEach(s=>{s({...n})}),n=Object.create(null))})}}notify(){this.__notifyTimeout&&window.clearTimeout(this.__notifyTimeout),this.__notifyTimeout=window.setTimeout(()=>{let e=new Set(this.__added),n=new Set(this.__removed);this.__added.clear(),this.__removed.clear();for(const r of this.__collectionObservers)r==null||r([...this.__items],e,n)})}observeCollection(e){return this.__collectionObservers.add(e),this.__items.size>0&&this.notify(),()=>{this.unobserveCollection(e)}}unobserveCollection(e){var n;(n=this.__collectionObservers)==null||n.delete(e)}add(e){let n=new JV(this.__typedSchema);for(let r in e)n.setValue(r,e[r]);return this.__items.add(n.uid),this.notify(),this.__data.add(n.uid,n),this.__added.add(n),this.__watchList.forEach(r=>{this.__subsMap[n.uid]||(this.__subsMap[n.uid]=[]),this.__subsMap[n.uid].push(n.subscribe(r,()=>{this.__notifyObservers(r,n.uid)}))}),n.uid}read(e){return this.__data.read(e)}readProp(e,n){return this.read(e).getValue(n)}publishProp(e,n,r){this.read(e).setValue(n,r)}remove(e){this.__removed.add(this.__data.read(e)),this.__items.delete(e),this.notify(),this.__data.pub(e,null),delete this.__subsMap[e]}clearAll(){this.__items.forEach(e=>{this.remove(e)})}observeProperties(e){return this.__propertyObservers.add(e),()=>{this.unobserveProperties(e)}}unobserveProperties(e){var n;(n=this.__propertyObservers)==null||n.delete(e)}findItems(e){let n=[];return this.__items.forEach(r=>{let i=this.read(r);e(i)&&n.push(r)}),n}items(){return[...this.__items]}get size(){return this.__items.size}destroy(){xe.deleteCtx(this.__ctxId),this.__propertyObservers=null,this.__collectionObservers=null;for(let e in this.__subsMap)this.__subsMap[e].forEach(n=>{n.remove()}),delete this.__subsMap[e]}}const eU=t=>{const e=new Map;return(...n)=>{const r=JSON.stringify(n);if(e.has(r))return e.get(r);const i=t(...n);return e.set(r,i),i}};function tU(t){let e=!1;return setTimeout(()=>{e=!0},0),r=>(...i)=>(e&&ZI(t),r(...i))}function nU(t){const e={progress:()=>t.$["*commonProgress"],errors:()=>t.$["*collectionErrors"],group:()=>t.$["*groupInfo"],totalCount:()=>t.uploadCollection.size,failedCount:()=>n.failedEntries.length,successCount:()=>n.successEntries.length,uploadingCount:()=>n.uploadingEntries.length,status:()=>n.isFailed?"failed":n.isUploading?"uploading":n.isSuccess?"success":"idle",isSuccess:()=>n.errors.length===0&&n.successEntries.length===n.allEntries.length,isUploading:()=>n.allEntries.some(i=>i.status==="uploading"),isFailed:()=>n.errors.length>0||n.failedEntries.length>0,allEntries:()=>t.getOutputData(),successEntries:()=>n.allEntries.filter(i=>i.status==="success"),failedEntries:()=>n.allEntries.filter(i=>i.status==="failed"),uploadingEntries:()=>n.allEntries.filter(i=>i.status==="uploading"),idleEntries:()=>n.allEntries.filter(i=>i.status==="idle")},n={},r=tU("You're trying to access the OutputCollectionState asynchronously. In this case, the data you retrieve will be newer than it was when the OutputCollectionState was created or when the event was dispatched. If you want to retain the state at a specific moment in time, you should use the spread operator like this: `{...outputCollectionState}` or `{...e.detail}`");for(const[i,s]of Object.entries(e)){const o=i,l=eU(r(s));Object.defineProperty(n,o,{get:l,enumerable:!0})}return n}const rU=Object.freeze({file:{type:File,value:null},externalUrl:{type:String,value:null},fileName:{type:String,value:null,nullable:!0},fileSize:{type:Number,value:null,nullable:!0},lastModified:{type:Number,value:Date.now()},uploadProgress:{type:Number,value:0},uuid:{type:String,value:null},isImage:{type:Boolean,value:!1},mimeType:{type:String,value:null,nullable:!0},ctxName:{type:String,value:null},cdnUrl:{type:String,value:null},cdnUrlModifiers:{type:String,value:null},fileInfo:{type:Aa,value:null},isUploading:{type:Boolean,value:!1},abortController:{type:AbortController,value:null,nullable:!0},thumbUrl:{type:String,value:null,nullable:!0},silent:{type:Boolean,value:!1},source:{type:String,value:!1,nullable:!0},fullPath:{type:String,value:null,nullable:!0},metadata:{type:Object,value:null,nullable:!0},errors:{type:Array,value:[]},uploadError:{type:Error,value:null,nullable:!0},isRemoved:{type:Boolean,value:!1}}),iU=/[a-f0-9]{8}-[a-f0-9]{4}-[a-f0-9]{4}-[a-f0-9]{4}-[a-f0-9]{12}/i,sU=new RegExp(`^/?(${iU.source})(?:/(-/(?:[^/]+/)+)?([^/]*))?$`,"i"),oU=({url:t,cdnBase:e})=>{const n=new URL(e),r=new URL(t);if(n.host!==r.host)return null;const[,i,s,o]=sU.exec(r.pathname);return{uuid:i,cdnUrlModifiers:s||"",filename:o||null}};class Ke extends fe{constructor(){super(...arguments);V(this,"couldBeCtxOwner",!1);V(this,"isCtxOwner",!1);V(this,"init$",$I(this));V(this,"__initialUploadMetadata",null);V(this,"_fileValidators",[this._validateIsImage.bind(this),this._validateFileType.bind(this),this._validateMaxSizeLimit.bind(this),this._validateUploadError.bind(this)]);V(this,"_collectionValidators",[n=>{const r=n.size,i=this.cfg.multiple?this.cfg.multipleMin:0,s=this.cfg.multiple?this.cfg.multipleMax:1;if(i&&r<i){const o=this.l10n("files-count-limit-error-too-few",{min:i,max:s,total:r});return Yf({type:"TOO_FEW_FILES",message:o,total:r,min:i,max:s})}if(s&&r>s){const o=this.l10n("files-count-limit-error-too-many",{min:i,max:s,total:r});return Yf({type:"TOO_MANY_FILES",message:o,total:r,min:i,max:s})}},n=>{if(n.items().some(r=>n.readProp(r,"errors").length>0))return Yf({type:"SOME_FILES_HAS_ERRORS",message:this.l10n("some-files-were-not-uploaded")})}]);V(this,"uploadAll",()=>{const n=this.uploadCollection.items().filter(r=>{const i=this.uploadCollection.read(r);return!i.getValue("isRemoved")&&!i.getValue("isUploading")&&!i.getValue("fileInfo")});n.length!==0&&(this.$["*uploadTrigger"]=new Set(n),this.emit(tt.COMMON_UPLOAD_START,this.getOutputCollectionState()))});V(this,"_flushOutputItems",Mn(async()=>{if(this.getOutputData().length!==this.uploadCollection.size)return;const r=this.getOutputCollectionState();this.$["*collectionState"]=r,this.emit(tt.CHANGE,()=>this.getOutputCollectionState(),{debounce:!0}),this.cfg.groupOutput&&r.totalCount>0&&r.status==="success"&&this._createGroup(r)},300));V(this,"_handleCollectionUpdate",(n,r,i)=>{var s;(r.size||i.size)&&(this.$["*groupInfo"]=null),this._runFileValidators(),this._runCollectionValidators();for(const o of r)o.getValue("silent")||this.emit(tt.FILE_ADDED,this.getOutputItem(o.uid));for(const o of i)this.$["*uploadTrigger"].delete(o.uid),(s=o.getValue("abortController"))==null||s.abort(),o.setMultipleValues({isRemoved:!0,abortController:null,isUploading:!1,uploadProgress:0}),URL.revokeObjectURL(o==null?void 0:o.getValue("thumbUrl")),this.emit(tt.FILE_REMOVED,this.getOutputItem(o.uid));this.$["*uploadList"]=n.map(o=>({uid:o})),this._flushCommonUploadProgress(),this._flushOutputItems()});V(this,"_handleCollectionPropertiesUpdate",n=>{this._flushOutputItems();const r=this.uploadCollection,i=[...new Set(Object.entries(n).filter(([s])=>["uploadError","fileInfo"].includes(s)).map(([,s])=>[...s]).flat())];if(i.length>0&&setTimeout(()=>{this._runFileValidators(i)}),n.uploadProgress){for(const s of n.uploadProgress){const{isUploading:o,silent:a}=xe.getCtx(s).store;o&&!a&&this.emit(tt.FILE_UPLOAD_PROGRESS,this.getOutputItem(s))}this._flushCommonUploadProgress()}if(n.isUploading)for(const s of n.isUploading){const{isUploading:o,silent:a}=xe.getCtx(s).store;o&&!a&&this.emit(tt.FILE_UPLOAD_START,this.getOutputItem(s))}if(n.fileInfo){for(const a of n.fileInfo){const{fileInfo:l,silent:c}=xe.getCtx(a).store;l&&!c&&this.emit(tt.FILE_UPLOAD_SUCCESS,this.getOutputItem(a))}this.cfg.cropPreset&&this.setInitialCrop();let s=r.findItems(a=>!!a.getValue("fileInfo"));r.findItems(a=>a.getValue("errors").length>0).length===0&&r.size===s.length&&this.emit(tt.COMMON_UPLOAD_SUCCESS,this.getOutputCollectionState())}if(n.errors)for(const s of n.errors){const{errors:o}=xe.getCtx(s).store;o.length>0&&(this.emit(tt.FILE_UPLOAD_FAILED,this.getOutputItem(s)),this.emit(tt.COMMON_UPLOAD_FAILED,()=>this.getOutputCollectionState(),{debounce:!0}))}n.cdnUrl&&([...n.cdnUrl].filter(o=>{var a;return!!((a=this.uploadCollection.read(o))!=null&&a.getValue("cdnUrl"))}).forEach(o=>{this.emit(tt.FILE_URL_CHANGED,this.getOutputItem(o))}),this.$["*groupInfo"]=null)});V(this,"_flushCommonUploadProgress",()=>{let n=0;const i=[...this.$["*uploadTrigger"]].filter(o=>!!this.uploadCollection.read(o));i.forEach(o=>{const a=this.uploadCollection.readProp(o,"uploadProgress");n+=a});const s=i.length?Math.round(n/i.length):0;this.$["*commonProgress"]!==s&&(this.$["*commonProgress"]=s,this.emit(tt.COMMON_UPLOAD_PROGRESS,this.getOutputCollectionState()))})}setUploadMetadata(n){ZI("setUploadMetadata is deprecated. Use `metadata` instance property on `lr-config` block instead. See migration guide: https://uploadcare.com/docs/file-uploader/migration-to-0.25.0/"),this.connectedOnce?this.$["*uploadMetadata"]=n:this.__initialUploadMetadata=n}get hasCtxOwner(){return this.hasBlockInCtx(n=>n instanceof Ke?n.isCtxOwner&&n.isConnected&&n!==this:!1)}initCallback(){if(super.initCallback(),!this.$["*uploadCollection"]){let n=new ZV({typedSchema:rU,watchList:["uploadProgress","uploadError","fileInfo","errors","cdnUrl","isUploading"]});this.$["*uploadCollection"]=n}!this.hasCtxOwner&&this.couldBeCtxOwner&&this.initCtxOwner()}destroyCtxCallback(){var n,r;(n=this._unobserveCollectionProperties)==null||n.call(this),(r=this._unobserveCollection)==null||r.call(this),this.uploadCollection.destroy(),this.$["*uploadCollection"]=null,super.destroyCtxCallback()}initCtxOwner(){this.isCtxOwner=!0,this._unobserveCollection=this.uploadCollection.observeCollection(this._handleCollectionUpdate),this._unobserveCollectionProperties=this.uploadCollection.observeProperties(this._handleCollectionPropertiesUpdate);const n=()=>{this._runFileValidators(),this._runCollectionValidators()};this.subConfigValue("maxLocalFileSizeBytes",n),this.subConfigValue("multipleMin",n),this.subConfigValue("multipleMax",n),this.subConfigValue("multiple",n),this.subConfigValue("imgOnly",n),this.subConfigValue("accept",n),this.subConfigValue("maxConcurrentRequests",r=>{this.$["*uploadQueue"].concurrency=Number(r)||1}),this.__initialUploadMetadata&&(this.$["*uploadMetadata"]=this.__initialUploadMetadata)}addFileFromUrl(n,{silent:r,fileName:i,source:s}={}){const o=this.uploadCollection.add({externalUrl:n,fileName:i??null,silent:r??!1,source:s??sr.API});return this.getOutputItem(o)}addFileFromUuid(n,{silent:r,fileName:i,source:s}={}){const o=this.uploadCollection.add({uuid:n,fileName:i??null,silent:r??!1,source:s??sr.API});return this.getOutputItem(o)}addFileFromCdnUrl(n,{silent:r,fileName:i,source:s}={}){const o=oU({url:n,cdnBase:this.cfg.cdnCname});if(!o)throw new Error("Invalid CDN URL");const a=this.uploadCollection.add({uuid:o.uuid,cdnUrl:n,cdnUrlModifiers:o.cdnUrlModifiers,fileName:i??o.filename??null,silent:r??!1,source:s??sr.API});return this.getOutputItem(a)}addFileFromObject(n,{silent:r,fileName:i,source:s,fullPath:o}={}){const a=this.uploadCollection.add({file:n,isImage:zw(n),mimeType:n.type,fileName:i??n.name,fileSize:n.size,silent:r??!1,source:s??sr.API,fullPath:o??null});return this.getOutputItem(a)}addFiles(n){return console.warn("`addFiles` method is deprecated. Please use `addFileFromObject`, `addFileFromUrl` or `addFileFromUuid` instead."),n.map(r=>{const i=this.uploadCollection.add({file:r,isImage:zw(r),mimeType:r.type,fileName:r.name,fileSize:r.size});return this.getOutputItem(i)})}removeFileByInternalId(n){if(!this.uploadCollection.read(n))throw new Error(`File with internalId ${n} not found`);this.uploadCollection.remove(n)}removeAllFiles(){this.uploadCollection.clearAll()}openSystemDialog(n={}){let r=jy(jw([this.cfg.accept??"",...this.cfg.imgOnly?Rm:[]]));this.cfg.accept&&this.cfg.imgOnly&&console.warn("There could be a mistake.\nBoth `accept` and `imgOnly` parameters are set.\nThe value of `accept` will be concatenated with the internal image mime types list."),this.fileInput=document.createElement("input"),this.fileInput.type="file",this.fileInput.multiple=this.cfg.multiple,n.captureCamera?(this.fileInput.capture=this.cfg.cameraCapture,this.fileInput.accept="image/*"):this.fileInput.accept=r,this.fileInput.dispatchEvent(new MouseEvent("click")),this.fileInput.onchange=()=>{[...this.fileInput.files].forEach(i=>this.addFileFromObject(i,{source:n.captureCamera?sr.CAMERA:sr.LOCAL})),this.$["*currentActivity"]=fe.activities.UPLOAD_LIST,this.setOrAddState("*modalActive",!0),this.fileInput.value="",this.fileInput=null}}get sourceList(){let n=[];return this.cfg.sourceList&&(n=Gr(this.cfg.sourceList)),n}initFlow(n=!1){var r;if(this.uploadCollection.size>0&&!n)this.set$({"*currentActivity":fe.activities.UPLOAD_LIST}),this.setOrAddState("*modalActive",!0);else if(((r=this.sourceList)==null?void 0:r.length)===1){const i=this.sourceList[0];if(i==="local"){this.$["*currentActivity"]=fe.activities.UPLOAD_LIST,this==null||this.openSystemDialog();return}const s=this.$["*blocksRegistry"],o=l=>"type"in l&&l.type===i,a=[...s].find(o);a==null||a.activate(),this.$["*currentActivity"]&&this.setOrAddState("*modalActive",!0)}else this.set$({"*currentActivity":fe.activities.START_FROM}),this.setOrAddState("*modalActive",!0)}doneFlow(){this.set$({"*currentActivity":this.doneActivity,"*history":this.doneActivity?[this.doneActivity]:[]}),this.$["*currentActivity"]||this.setOrAddState("*modalActive",!1)}get uploadCollection(){return this.$["*uploadCollection"]}_validateFileType(n){const r=this.cfg.imgOnly,i=this.cfg.accept,s=jw([...r?Rm:[],i]);if(!s.length)return;const o=n.mimeType,a=n.name;if(!o||!a)return;const l=JI(o,s),c=QV(a,s);if(!l&&!c)return mo({type:"FORBIDDEN_FILE_TYPE",message:this.l10n("file-type-not-allowed"),entry:n})}_validateMaxSizeLimit(n){const r=this.cfg.maxLocalFileSizeBytes,i=n.size;if(r&&i&&i>r)return mo({type:"FILE_SIZE_EXCEEDED",message:this.l10n("files-max-size-limit-error",{maxFileSize:XV(r)}),entry:n})}_validateUploadError(n,r){const i=r==null?void 0:r.getValue("uploadError");if(i){if(i instanceof cn)return mo({type:"UPLOAD_ERROR",message:i.message,entry:n,error:i});if(i instanceof Ou)return mo({type:"NETWORK_ERROR",message:i.message,entry:n,error:i});{const s=i instanceof Error?i:new Error("Unknown error",{cause:i});return mo({type:"UNKNOWN_ERROR",message:s.message,entry:n,error:s})}}}_validateIsImage(n){const r=this.cfg.imgOnly,i=n.isImage;if(!(!r||i)&&!(!n.fileInfo&&n.externalUrl)&&!(!n.fileInfo&&!n.mimeType))return mo({type:"NOT_AN_IMAGE",message:this.l10n("images-only-accepted"),entry:n})}_runFileValidatorsForEntry(n){const r=this.getOutputItem(n.uid),i=[];for(const s of this._fileValidators){const o=s(r,n);o&&i.push(o)}n.setValue("errors",i)}_runFileValidators(n){const r=n??this.uploadCollection.items();for(const i of r){const s=this.uploadCollection.read(i);s&&this._runFileValidatorsForEntry(s)}}_runCollectionValidators(){const n=this.uploadCollection,r=[];for(const i of this._collectionValidators){const s=i(n);s&&(Array.isArray(s)?r.push(...s):r.push(s))}this.$["*collectionErrors"]=r,r.length>0&&this.emit(tt.COMMON_UPLOAD_FAILED,()=>this.getOutputCollectionState(),{debounce:!0})}async _createGroup(n){const r=this.getUploadClientOptions(),i=n.allEntries.map(l=>l.uuid+(l.cdnUrlModifiers?`/${l.cdnUrlModifiers}`:"")),s=new AbortController,o=await lV(i,{...r,signal:s.signal});if(this.$["*collectionState"]!==n){s.abort();return}this.$["*groupInfo"]=o;const a=this.getOutputCollectionState();this.emit(tt.GROUP_CREATED,a),this.emit(tt.CHANGE,()=>this.getOutputCollectionState(),{debounce:!0}),this.$["*collectionState"]=a}setInitialCrop(){const n=XI(this.cfg.cropPreset);if(n){const[r]=n,i=this.uploadCollection.findItems(s=>{var o;return s.getValue("fileInfo")&&s.getValue("isImage")&&!((o=s.getValue("cdnUrlModifiers"))!=null&&o.includes("/crop/"))}).map(s=>this.uploadCollection.read(s));for(const s of i){const o=s.getValue("fileInfo"),{width:a,height:l}=o.imageInfo,c=r.width/r.height,h=GV(a,l,c),f=Wi(`crop/${h.width}x${h.height}/${h.x},${h.y}`,"preview");s.setMultipleValues({cdnUrlModifiers:f,cdnUrl:Pn(s.getValue("cdnUrl"),f)}),this.uploadCollection.size===1&&this.cfg.useCloudImageEditor&&this.hasBlockInCtx(p=>p.activityType===fe.activities.CLOUD_IMG_EDIT)&&(this.$["*focusedEntry"]=s,this.$["*currentActivity"]=fe.activities.CLOUD_IMG_EDIT)}}}async getMetadataFor(n){const r=this.cfg.metadata??this.$["*uploadMetadata"];if(typeof r=="function"){const i=this.getOutputItem(n);return await r(i)}return r}getUploadClientOptions(){return{store:this.cfg.store,publicKey:this.cfg.pubkey,baseCDN:this.cfg.cdnCname,baseURL:this.cfg.baseUrl,userAgent:KV,integration:this.cfg.userAgentIntegration,secureSignature:this.cfg.secureSignature,secureExpire:this.cfg.secureExpire,retryThrottledRequestMaxTimes:this.cfg.retryThrottledRequestMaxTimes,multipartMinFileSize:this.cfg.multipartMinFileSize,multipartChunkSize:this.cfg.multipartChunkSize,maxConcurrentRequests:this.cfg.multipartMaxConcurrentRequests,multipartMaxAttempts:this.cfg.multipartMaxAttempts,checkForUrlDuplicates:!!this.cfg.checkForUrlDuplicates,saveUrlForRecurrentUploads:!!this.cfg.saveUrlForRecurrentUploads}}getOutputItem(n){const r=xe.getCtx(n).store,i=r.fileInfo;let s=r.isRemoved?"removed":r.errors.length>0?"failed":r.fileInfo?"success":r.isUploading?"uploading":"idle";return{uuid:(i==null?void 0:i.uuid)??r.uuid??null,internalId:n,name:(i==null?void 0:i.originalFilename)??r.fileName,size:(i==null?void 0:i.size)??r.fileSize,isImage:(i==null?void 0:i.isImage)??r.isImage,mimeType:(i==null?void 0:i.mimeType)??r.mimeType,file:r.file,externalUrl:r.externalUrl,cdnUrlModifiers:r.cdnUrlModifiers,cdnUrl:r.cdnUrl??(i==null?void 0:i.cdnUrl)??null,fullPath:r.fullPath,uploadProgress:r.uploadProgress,fileInfo:i??null,metadata:r.metadata??(i==null?void 0:i.metadata)??null,isSuccess:s==="success",isUploading:s==="uploading",isFailed:s==="failed",isRemoved:s==="removed",errors:r.errors,status:s}}getOutputData(n){return(n?this.uploadCollection.findItems(n):this.uploadCollection.items()).map(s=>this.getOutputItem(s))}getOutputCollectionState(){return nU(this)}}Ke.extSrcList=Object.freeze({FACEBOOK:"facebook",DROPBOX:"dropbox",GDRIVE:"gdrive",GPHOTOS:"gphotos",INSTAGRAM:"instagram",FLICKR:"flickr",VK:"vk",EVERNOTE:"evernote",BOX:"box",ONEDRIVE:"onedrive",HUDDLE:"huddle"});Ke.sourceTypes=Object.freeze({LOCAL:"local",URL:"url",CAMERA:"camera",DRAW:"draw",...Ke.extSrcList});const qd=t=>{var e;return(e=t.match(/[A-Z]{2,}(?=[A-Z][a-z]+[0-9]*|\b)|[A-Z]?[a-z]+[0-9]*|[A-Z]|[0-9]+/g))==null?void 0:e.map(n=>n.toLowerCase()).join("-")},At=t=>String(t),nr=t=>{const e=Number(t);if(Number.isNaN(e))throw new Error(`Invalid number: "${t}"`);return e},nt=t=>{if(typeof t>"u"||t===null)return!1;if(typeof t=="boolean")return t;if(t==="true"||t==="")return!0;if(t==="false")return!1;throw new Error(`Invalid boolean: "${t}"`)},aU=t=>t==="auto"?t:nt(t),lU=t=>{const e=At(t);if(e!=="user"&&e!=="environment"&&e!=="")throw new Error(`Invalid "cameraCapture" value: "${e}"`);return e},uU=t=>{if(typeof t=="object"&&!Array.isArray(t)||typeof t=="function")return t;throw new Error("Invalid metadata value. Must be an object or function.")},cU=t=>{if(typeof t=="object")return t;throw new Error("Invalid localeDefinitionOverride value. Must be an object.")},hU={pubkey:At,multiple:nt,multipleMin:nr,multipleMax:nr,confirmUpload:nt,imgOnly:nt,accept:At,externalSourcesPreferredTypes:At,store:aU,cameraMirror:nt,cameraCapture:lU,sourceList:At,maxLocalFileSizeBytes:nr,thumbSize:nr,showEmptyList:nt,useLocalImageEditor:nt,useCloudImageEditor:nt,cloudImageEditorTabs:At,removeCopyright:nt,cropPreset:At,imageShrink:At,modalScrollLock:nt,modalBackdropStrokes:nt,sourceListWrap:nt,remoteTabSessionKey:At,cdnCname:At,baseUrl:At,socialBaseUrl:At,secureSignature:At,secureExpire:At,secureDeliveryProxy:At,retryThrottledRequestMaxTimes:nr,multipartMinFileSize:nr,multipartChunkSize:nr,maxConcurrentRequests:nr,multipartMaxConcurrentRequests:nr,multipartMaxAttempts:nr,checkForUrlDuplicates:nt,saveUrlForRecurrentUploads:nt,groupOutput:nt,userAgentIntegration:At,debug:nt,localeName:At,metadata:uU,localeDefinitionOverride:cU},dU=(t,e)=>{if(!(typeof e>"u"||e===null))try{return hU[t](e)}catch(n){return console.error(`Invalid value for config key "${t}".`,n),Vi[t]}},zy=[...new Set(["debug",...Object.keys(Vi)])],fU=["metadata","localeDefinitionOverride"],pU=t=>fU.includes(t),fa=zy.filter(t=>!pU(t)),mU={...Object.fromEntries(fa.map(t=>[qd(t),t])),...Object.fromEntries(fa.map(t=>[t.toLowerCase(),t]))},gU={...Object.fromEntries(fa.map(t=>[qd(t),kn(t)])),...Object.fromEntries(fa.map(t=>[t.toLowerCase(),kn(t)]))},Ww=t=>"__"+t;class By extends Ne{constructor(){super();V(this,"requireCtxName",!0);this.init$={...this.init$,...Object.fromEntries(Object.entries(Vi).map(([n,r])=>[kn(n),r]))}}_flushValueToAttribute(n,r){if(fa.includes(n)){const i=[...new Set([qd(n),n.toLowerCase()])];for(const s of i)typeof r>"u"||r===null?this.removeAttribute(s):this.getAttribute(s)!==r.toString()&&this.setAttribute(s,r.toString())}}_flushValueToState(n,r){this.$[kn(n)]!==r&&(typeof r>"u"||r===null?this.$[kn(n)]=Vi[n]:this.$[kn(n)]=r)}_setValue(n,r){const i=this,s=dU(n,r),o=Ww(n);i[o]!==s&&(this._assertSameValueDifferentReference(n,i[o],s),i[o]=s,this._flushValueToAttribute(n,s),this._flushValueToState(n,s),this.debugPrint(`[lr-config] "${n}"`,s))}_getValue(n){const r=this,i=Ww(n);return r[i]}_assertSameValueDifferentReference(n,r,i){this.cfg.debug&&JSON.stringify(i)===JSON.stringify(r)&&(console.warn(`[lr-config] Option "${n}" value is the same as the previous one but the reference is different`),console.warn("[lr-config] You should avoid changing the reference of the object to prevent unnecessary calculations"),console.warn(`[lr-config] "${n}" previous value:`,r),console.warn(`[lr-config] "${n}" new value:`,i))}initCallback(){super.initCallback();const n=this;for(const r of fa)this.sub(kn(r),i=>{this._setValue(r,i)},!1);for(const r of zy){const i=n[r]??this.$[kn(r)];i!==Vi[r]&&this._setValue(r,i),Object.defineProperty(this,r,{set:s=>{this._setValue(r,s)},get:()=>this._getValue(r)})}}attributeChangedCallback(n,r,i){if(r===i)return;const s=this,o=mU[n];s[o]=i}}By.bindAttributes(gU);for(const t of zy)By.prototype[t]=void 0;const e2=By;class Hy extends Ne{constructor(){super(...arguments);V(this,"init$",{...this.init$,name:"",path:"",size:"24",viewBox:""})}initCallback(){super.initCallback(),this.sub("name",n=>{if(!n)return;let r=this.getCssData(`--icon-${n}`);r&&(this.$.path=r)}),this.sub("path",n=>{if(!n)return;n.trimStart().startsWith("<")?(this.setAttribute("raw",""),this.ref.svg.innerHTML=n):(this.removeAttribute("raw"),this.ref.svg.innerHTML=`<path fill-rule="evenodd" d="${n}"></path>`)}),this.sub("size",n=>{this.$.viewBox=`0 0 ${n} ${n}`})}}Hy.template=`
  <svg ref="svg" xmlns="http://www.w3.org/2000/svg" set="@viewBox: viewBox; @height: size; @width: size"></svg>
`;Hy.bindAttributes({name:"name",size:"size"});const yU=t=>[...new Set(t)],vU=t=>Object.entries(t).filter(([e,n])=>n!==void 0&&n!=="").map(([e,n])=>e==="cdn-operations"||e==="analytics"?n:`${e}/${n}`),_U="https://ucarecdn.com",jh=Object.freeze({"dev-mode":{},pubkey:{},uuid:{},src:{},lazy:{default:1},intersection:{},breakpoints:{},"cdn-cname":{default:_U},"proxy-cname":{},"secure-delivery-proxy":{},"hi-res-support":{default:1},"ultra-res-support":{},format:{},"cdn-operations":{},progressive:{},quality:{},"is-background-for":{},"is-preview-blur":{default:1}}),_l="--lr-img-",qw="unresolved",bc=2,Tc=3,Gw=!window.location.host.trim()||window.location.host.includes(":")||window.location.hostname.includes("localhost"),Kw=3e3,Qw=5e3,Xw=Object.freeze({PREVIEW:"PREVIEW",MAIN:"MAIN"}),t2=Object.create(null);var l1;for(let t in jh)t2[_l+t]=((l1=jh[t])==null?void 0:l1.default)||"";class wU extends Ud{constructor(){super(...arguments);V(this,"cssInit$",t2)}$$(n){return this.$[_l+n]}set$$(n){for(let r in n)this.$[_l+r]=n[r]}sub$$(n,r){this.sub(_l+n,i=>{i===null||i===""||r(i)})}analyticsParams(){return`-/@clib/${Uy}/${$y}/lr-img/`}initAttributes(n){[...this.attributes].forEach(r=>{jh[r.name]||n.setAttribute(r.name,r.value)})}initIntersection(n,r){let i={root:null,rootMargin:"0px"};this._isnObserver=new IntersectionObserver(s=>{s.forEach(o=>{o.isIntersecting&&(r(),this._isnObserver.unobserve(n))})},i),this._isnObserver.observe(n),this._observed||(this._observed=new Set),this._observed.add(n)}destroyCallback(){super.destroyCallback(),this._isnObserver&&(this._observed.forEach(n=>{this._isnObserver.unobserve(n)}),this._isnObserver=null),xe.deleteCtx(this)}static get observedAttributes(){return Object.keys(jh)}attributeChangedCallback(n,r,i){window.setTimeout(()=>{this.$[_l+n]=i})}}class EU extends wU{constructor(){super(...arguments);V(this,"_img",new Image);V(this,"_imgPreview",new Image)}_fmtAbs(n){return!n.includes("//")&&!Gw&&(n=new URL(n,document.baseURI).href),n}_validateSize(n){if((n==null?void 0:n.trim())!==""){let r=n.match(/\d+/)[0],i=n.match(/[a-zA-Z]+/)[0];const s=parseInt(r,10);if(Number(s)>Qw&&this.hasFormatJPG)return Qw+i;if(Number(s)>Kw&&!this.hasFormatJPG)return Kw+i}return n}_getCdnModifiers(n,r){const i={format:this.$$("format"),quality:this.$$("quality"),resize:this._validateSize(n),blur:r,"cdn-operations":this.$$("cdn-operations"),analytics:this.analyticsParams()};return Wi(...vU(i))}_getUrlBase(n="",r=""){if(this.$$("src").startsWith("data:")||this.$$("src").startsWith("blob:"))return this.$$("src");if(Gw&&this.$$("src")&&!this.$$("src").includes("//"))return this._proxyUrl(this.$$("src"));let i=this._getCdnModifiers(n,r);if(this.$$("src").startsWith(this.$$("cdn-cname")))return Pn(this.$$("src"),i);if(this.$$("cdn-cname")&&this.$$("uuid"))return this._proxyUrl(Pn(cu(this.$$("cdn-cname"),this.$$("uuid")),i));if(this.$$("uuid"))return this._proxyUrl(Pn(cu(this.$$("cdn-cname"),this.$$("uuid")),i));if(this.$$("proxy-cname"))return this._proxyUrl(Pn(this.$$("proxy-cname"),i,this._fmtAbs(this.$$("src"))));if(this.$$("pubkey"))return this._proxyUrl(Pn(`https://${this.$$("pubkey")}.ucr.io/`,i,this._fmtAbs(this.$$("src"))))}_proxyUrl(n){return this.$$("secure-delivery-proxy")?Am(this.$$("secure-delivery-proxy"),{previewUrl:n},{transform:i=>window.encodeURIComponent(i)}):n}_getElSize(n,r=1,i=!0){let s=n.getBoundingClientRect(),o=r*Math.round(s.width),a=i?"":r*Math.round(s.height);return o||a?`${o||""}x${a||""}`:null}_setupEventProxy(n){let r=s=>{s.stopPropagation();let o=new Event(s.type,s);this.dispatchEvent(o)},i=["load","error"];for(let s of i)n.addEventListener(s,r)}get img(){return this.hasPreviewImage||(this._setupConfigForImage({elNode:this._img}),this.appendChild(this._img)),this._img}get currentImg(){return this.hasPreviewImage?{type:Xw.PREVIEW,img:this._imgPreview}:{type:Xw.MAIN,img:this.img}}get hasPreviewImage(){return this.$$("is-preview-blur")}get bgSelector(){return this.$$("is-background-for")}get breakpoints(){if(this.$$("breakpoints")){const n=Gr(this.$$("breakpoints"));return yU(n.map(r=>parseInt(r,10)))}else return null}get hasFormatJPG(){return this.$$("format").toLowerCase()==="jpeg"}renderBg(n){let r=new Set;r.add(`url("${this._getUrlBase(this._getElSize(n))}") 1x`),this.$$("hi-res-support")&&r.add(`url("${this._getUrlBase(this._getElSize(n,bc))}") ${bc}x`),this.$$("ultra-res-support")&&r.add(`url("${this._getUrlBase(this._getElSize(n,Tc))}") ${Tc}x`);let i=`image-set(${[...r].join(", ")})`;n.style.setProperty("background-image",i),n.style.setProperty("background-image","-webkit-"+i)}getSrcset(){let n=new Set;return this.breakpoints?this.breakpoints.forEach(r=>{n.add(this._getUrlBase(r+"x")+` ${this._validateSize(r+"w")}`),this.$$("hi-res-support")&&n.add(this._getUrlBase(r*bc+"x")+` ${this._validateSize(r*bc+"w")}`),this.$$("ultra-res-support")&&n.add(this._getUrlBase(r*Tc+"x")+` ${this._validateSize(r*Tc+"w")}`)}):(n.add(this._getUrlBase(this._getElSize(this.currentImg.img))+" 1x"),this.$$("hi-res-support")&&n.add(this._getUrlBase(this._getElSize(this.currentImg.img,2))+" 2x"),this.$$("ultra-res-support")&&n.add(this._getUrlBase(this._getElSize(this.currentImg.img,3))+" 3x")),[...n].join()}getSrc(){return this._getUrlBase()}get srcUrlPreview(){return this._getUrlBase("100x","100")}renderBackground(){[...document.querySelectorAll(this.bgSelector)].forEach(n=>{this.$$("intersection")?this.initIntersection(n,()=>{this.renderBg(n)}):this.renderBg(n)})}_appendURL({elNode:n,src:r,srcset:i}){r&&(n.src=r),i&&(n.srcset=i)}_setupConfigForImage({elNode:n}){this._setupEventProxy(n),this.initAttributes(n)}loaderImage({src:n,srcset:r,elNode:i}){return new Promise((s,o)=>{this._setupConfigForImage({elNode:i}),i.setAttribute(qw,""),i.addEventListener("load",()=>{i.removeAttribute(qw),s(i)}),i.addEventListener("error",()=>{o(!1)}),this._appendURL({elNode:i,src:n,srcset:r})})}async renderImage(){var n,r;if(this.$$("intersection")){this.hasPreviewImage&&(this._setupConfigForImage({elNode:this._imgPreview}),this.appendChild(this._imgPreview)),this.initIntersection(this.currentImg.img,async()=>{var i;this.hasPreviewImage&&(this._imgPreview.src=this.srcUrlPreview);try{await this.loaderImage({src:this.getSrc(),srcset:this.getSrcset(),elNode:this._img}),this.hasPreviewImage&&await this._imgPreview.remove(),this.appendChild(this._img)}catch{this.hasPreviewImage&&await((i=this._imgPreview)==null?void 0:i.remove()),this.appendChild(this._img)}});return}try{this.hasPreviewImage&&(await this.loaderImage({src:this.srcUrlPreview,elNode:this._imgPreview}),this.appendChild(this._imgPreview)),await this.loaderImage({src:this.getSrc(),srcset:this.getSrcset(),elNode:this._img}),this.hasPreviewImage&&await((n=this._imgPreview)==null?void 0:n.remove()),this.appendChild(this._img)}catch{this.hasPreviewImage&&await((r=this._imgPreview)==null?void 0:r.remove()),this.appendChild(this._img)}}init(){this.bgSelector?this.renderBackground():this.renderImage()}}class bU extends EU{initCallback(){super.initCallback(),this.sub$$("src",()=>{this.init()}),this.sub$$("uuid",()=>{this.init()}),this.sub$$("lazy",e=>{!this.$$("is-background-for")&&!this.$$("is-preview-blur")&&(this.img.loading=e?"lazy":"eager")})}}class Wy extends Ke{constructor(){super();V(this,"couldBeCtxOwner",!0);this.init$={...this.init$,withDropZone:!0,onClick:()=>{this.initFlow()},"button-text":""}}initCallback(){super.initCallback(),this.defineAccessor("dropzone",n=>{typeof n>"u"||(this.$.withDropZone=nt(n))}),this.subConfigValue("multiple",n=>{this.$["button-text"]=n?"upload-files":"upload-file"})}}Wy.template=`
  <lr-drop-area set="@disabled: !withDropZone">
    <button type="button" set="onclick: onClick">
      <lr-icon name="upload"></lr-icon>
      <span l10n="button-text"></span>
      <slot></slot>
      <div class="visual-drop-area" l10n="drop-files-here"></div>
    </button>
  </lr-drop-area>
`;Wy.bindAttributes({dropzone:null});class n2 extends fe{constructor(){super(...arguments);V(this,"historyTracked",!0);V(this,"activityType","start-from")}initCallback(){super.initCallback(),this.registerActivity(this.activityType)}}n2.template=' <div class="content"><slot></slot></div> ';function TU(t){return new Promise(e=>{typeof window.FileReader!="function"&&e(!1);try{let n=new FileReader;n.onerror=()=>{e(!0)};let r=i=>{i.type!=="loadend"&&n.abort(),e(!1)};n.onloadend=r,n.onprogress=r,n.readAsDataURL(t)}catch{e(!1)}})}function CU(t,e){return new Promise(n=>{let r=0;const i=[],s=a=>{a||(console.warn("Unexpectedly received empty content entry",{scope:"drag-and-drop"}),n(null)),a.isFile?(r++,a.file(l=>{r--;const c=new File([l],l.name,{type:l.type||e});i.push({type:"file",file:c,fullPath:a.fullPath}),r===0&&n(i)})):a.isDirectory&&o(a.createReader())};let o=a=>{r++,a.readEntries(l=>{r--;for(let c of l)s(c);r===0&&n(i)})};s(t)})}function IU(t){const e=[],n=[];for(let r=0;r<t.items.length;r++){let i=t.items[r];if(i)if(i.kind==="file"){const s=i.type;if(typeof i.webkitGetAsEntry=="function"||typeof i.getAsEntry=="function"){let a=typeof i.webkitGetAsEntry=="function"?i.webkitGetAsEntry():i.getAsEntry();n.push(CU(a,s).then(l=>{l&&e.push(...l)}));continue}const o=i.getAsFile();o&&n.push(TU(o).then(a=>{a||e.push({type:"file",file:o})}))}else i.kind==="string"&&i.type.match("^text/uri-list")&&n.push(new Promise(s=>{i.getAsString(o=>{e.push({type:"url",url:o}),s(void 0)})}))}return Promise.all(n).then(()=>e)}const tn={ACTIVE:0,INACTIVE:1,NEAR:2,OVER:3};let Yw=["focus"],SU=100,Jf=new Map;function AU(t,e){let n=Math.max(Math.min(t[0],e.x+e.width),e.x),r=Math.max(Math.min(t[1],e.y+e.height),e.y);return Math.sqrt((t[0]-n)*(t[0]-n)+(t[1]-r)*(t[1]-r))}function Jw(t){let e=0,n=document.body,r=new Set,i=E=>r.add(E),s=tn.INACTIVE,o=E=>{t.shouldIgnore()&&E!==tn.INACTIVE||(s!==E&&r.forEach(I=>I(E)),s=E)},a=()=>e>0;i(E=>t.onChange(E));let l=()=>{e=0,o(tn.INACTIVE)},c=()=>{e+=1,s===tn.INACTIVE&&o(tn.ACTIVE)},h=()=>{e-=1,a()||o(tn.INACTIVE)},f=E=>{E.preventDefault(),e=0,o(tn.INACTIVE)},p=E=>{if(t.shouldIgnore())return;a()||(e+=1);let I=[E.x,E.y],R=t.element.getBoundingClientRect(),T=Math.floor(AU(I,R)),w=T<SU,C=E.composedPath().includes(t.element);Jf.set(t.element,T);let D=Math.min(...Jf.values())===T;C&&D?(E.preventDefault(),o(tn.OVER)):o(w&&D?tn.NEAR:tn.ACTIVE)},_=async E=>{if(t.shouldIgnore())return;E.preventDefault();let I=await IU(E.dataTransfer);t.onItems(I),o(tn.INACTIVE)};return n.addEventListener("drop",f),n.addEventListener("dragleave",h),n.addEventListener("dragenter",c),n.addEventListener("dragover",p),t.element.addEventListener("drop",_),Yw.forEach(E=>{window.addEventListener(E,l)}),()=>{Jf.delete(t.element),n.removeEventListener("drop",f),n.removeEventListener("dragleave",h),n.removeEventListener("dragenter",c),n.removeEventListener("dragover",p),t.element.removeEventListener("drop",_),Yw.forEach(E=>{window.removeEventListener(E,l)})}}const r2="lr-drop-area",go=`${r2}/registry`;class qy extends Ke{constructor(){super(),this.init$={...this.init$,state:tn.INACTIVE,withIcon:!1,isClickable:!1,isFullscreen:!1,isEnabled:!0,isVisible:!0,text:"",[go]:null}}isActive(){if(!this.$.isEnabled)return!1;const e=this.getBoundingClientRect(),n=e.width>0&&e.height>0,r=e.top>=0&&e.left>=0&&e.bottom<=(window.innerHeight||document.documentElement.clientHeight)&&e.right<=(window.innerWidth||document.documentElement.clientWidth),i=window.getComputedStyle(this),s=i.visibility!=="hidden"&&i.display!=="none";return n&&s&&r}initCallback(){super.initCallback(),this.bindL10n("text",()=>this.l10n("drop-files-here")),this.$[go]||(this.$[go]=new Set),this.$[go].add(this),this.defineAccessor("disabled",n=>{this.set$({isEnabled:!nt(n)})}),this.defineAccessor("clickable",n=>{this.set$({isClickable:nt(n)})}),this.defineAccessor("with-icon",n=>{this.set$({withIcon:nt(n)})}),this.defineAccessor("fullscreen",n=>{this.set$({isFullscreen:nt(n)})}),this.defineAccessor("text",n=>{typeof n=="string"?this.bindL10n("text",()=>this.l10n(n)||n):this.bindL10n("text",()=>this.l10n("drop-files-here"))}),this._destroyDropzone=Jw({element:this,shouldIgnore:()=>this._shouldIgnore(),onChange:n=>{this.$.state=n},onItems:n=>{n.length&&(n.forEach(r=>{r.type==="url"?this.addFileFromUrl(r.url,{source:sr.DROP_AREA}):r.type==="file"&&this.addFileFromObject(r.file,{source:sr.DROP_AREA,fullPath:r.fullPath})}),this.uploadCollection.size&&(this.set$({"*currentActivity":fe.activities.UPLOAD_LIST}),this.setOrAddState("*modalActive",!0)))}});let e=this.ref["content-wrapper"];e&&(this._destroyContentWrapperDropzone=Jw({element:e,onChange:n=>{var i;const r=(i=Object.entries(tn).find(([,s])=>s===n))==null?void 0:i[0].toLowerCase();r&&e.setAttribute("drag-state",r)},onItems:()=>{},shouldIgnore:()=>this._shouldIgnore()})),this.sub("state",n=>{var i;const r=(i=Object.entries(tn).find(([,s])=>s===n))==null?void 0:i[0].toLowerCase();r&&this.setAttribute("drag-state",r)}),this.subConfigValue("sourceList",n=>{const r=Gr(n);this.$.isEnabled=r.includes(Ke.sourceTypes.LOCAL),this.$.isVisible=this.$.isEnabled||!this.querySelector("[data-default-slot]")}),this.sub("isVisible",n=>{this.toggleAttribute("hidden",!n)}),this.sub("isClickable",n=>{this.toggleAttribute("clickable",n)}),this.$.isClickable&&(this._onAreaClicked=()=>{this.openSystemDialog()},this.addEventListener("click",this._onAreaClicked))}_shouldIgnore(){return!this.$.isEnabled||!this._couldHandleFiles()?!0:this.$.isFullscreen?[...this.$[go]].filter(r=>r!==this).filter(r=>r.isActive()).length>0:!1}_couldHandleFiles(){let e=this.cfg.multiple,n=this.cfg.multipleMax,r=this.uploadCollection.size;return!(e&&n&&r>=n||!e&&r>0)}destroyCallback(){var n,r;super.destroyCallback();const e=this.$[go];e&&(e.delete(this),e.size===0&&xe.deleteCtx(r2)),(n=this._destroyDropzone)==null||n.call(this),(r=this._destroyContentWrapperDropzone)==null||r.call(this),this._onAreaClicked&&this.removeEventListener("click",this._onAreaClicked)}}qy.template=`
  <slot>
    <div data-default-slot hidden></div>
    <div ref="content-wrapper" class="content-wrapper" set="@hidden: !isVisible">
      <div class="icon-container" set="@hidden: !withIcon">
        <lr-icon name="default"></lr-icon>
        <lr-icon name="arrow-down"></lr-icon>
      </div>
      <span class="text">{{text}}</span>
    </div>
  </slot>
`;qy.bindAttributes({"with-icon":null,clickable:null,text:null,fullscreen:null,disabled:null});const xU="src-type-";class Gy extends Ke{constructor(){super();V(this,"couldBeCtxOwner",!0);V(this,"type");V(this,"_registeredTypes",{});this.init$={...this.init$,iconName:"default","src-type":""}}initTypes(){this.registerType({type:Ke.sourceTypes.LOCAL,activate:()=>(this.openSystemDialog(),!1)}),this.registerType({type:Ke.sourceTypes.URL,activity:fe.activities.URL,textKey:"from-url"}),this.registerType({type:Ke.sourceTypes.CAMERA,activity:fe.activities.CAMERA,activate:()=>{const n="capture"in document.createElement("input");return n&&this.openSystemDialog({captureCamera:!0}),!n}}),this.registerType({type:"draw",activity:fe.activities.DRAW,icon:"edit-draw"});for(let n of Object.values(Ke.extSrcList))this.registerType({type:n,activity:fe.activities.EXTERNAL,activityParams:{externalSourceType:n}})}initCallback(){super.initCallback(),this.initTypes(),this.setAttribute("role","button"),this.defineAccessor("type",n=>{n&&this.applyType(n)})}registerType(n){this._registeredTypes[n.type]=n}getType(n){return this._registeredTypes[n]}activate(){if(!this.type)return;const n=this._registeredTypes[this.type],{activity:r,activate:i,activityParams:s={}}=n;(i?i():!!r)&&this.set$({"*currentActivityParams":s,"*currentActivity":r})}applyType(n){const r=this._registeredTypes[n];if(!r){console.warn("Unsupported source type: "+n);return}const{textKey:i=n,icon:s=n}=r;this.$["src-type"]=`${xU}${i}`,this.$.iconName=s,this.onclick=()=>{this.activate()}}}Gy.template=`
  <lr-icon set="@name: iconName"></lr-icon>
  <div class="txt" l10n="src-type"></div>
`;Gy.bindAttributes({type:null});class kU extends Ne{initCallback(){super.initCallback(),this.subConfigValue("sourceList",e=>{let n=Gr(e),r="";n.forEach(i=>{r+=`<lr-source-btn type="${i}"></lr-source-btn>`}),this.cfg.sourceListWrap?this.innerHTML=r:this.outerHTML=r})}}const Gd=()=>{const t=[];return{stack:t,promiseReadJpegChunks:n=>new Promise((r,i)=>{let s=2;const o=(c,h)=>{const f=new FileReader;f.addEventListener("load",()=>{h(new DataView(f.result))}),f.addEventListener("error",p=>{i(`Reader error: ${p}`)}),f.readAsArrayBuffer(c)},a=()=>o(n.slice(s,s+128),c=>{let h,f,p;for(h=f=0,p=c.byteLength;p>=0?f<p:f>p;h=p>=0?++f:--f)if(c.getUint8(h)===255){s+=h;break}l()}),l=()=>{const c=s;return o(n.slice(s,s+=4),h=>{if(h.byteLength!==4||h.getUint8(0)!==255){i("Corrupted");return}const f=h.getUint8(1);if(f===218){r(!0);return}const p=h.getUint16(2)-2;return o(n.slice(s,s+=p),_=>{if(_.byteLength!==p){i("Corrupted");return}t.push({startPos:c,length:p,marker:f,view:_}),a()})})};FileReader&&DataView||i("Not Support"),o(n.slice(0,2),c=>{c.getUint16(0)!==65496&&i("Not jpeg"),a()})})}},PU=async t=>{const e=[],{promiseReadJpegChunks:n,stack:r}=Gd();return await n(t),r.forEach(({marker:i,view:s})=>{i===226&&s.getUint32(0)===1229144927&&s.getUint32(4)===1347571526&&s.getUint32(8)===1229735168&&e.push(s)}),e},i2=async(t,e,n)=>{{const r=[],i=[],{promiseReadJpegChunks:s,stack:o}=Gd();await s(t),o.forEach(c=>{if(c.marker===e)return r.push(c.startPos),i.push(c.length)});const a=[t.slice(0,2)];for(const c of n){const h=new DataView(new ArrayBuffer(4));h.setUint16(0,65280+e),h.setUint16(2,c.byteLength+2),a.push(h.buffer),a.push(c)}let l=2;for(let c=0;c<r.length;c++)r[c]>l&&a.push(t.slice(l,r[c])),l=r[c]+i[c]+4;return a.push(t.slice(l,t.size)),new Blob(a,{type:t.type})}},RU=226,s2=(t,e)=>i2(t,RU,e.map(n=>n.buffer)),NU=async t=>{try{return await s2(t,[])}catch(e){throw new Error(`Failed to strip ICC profile: ${e}`)}},OU=(t,e,n)=>new Promise((r,i)=>{const s=o=>{if(!o){i("Failed to convert canvas to blob");return}r(o)};t.toBlob(s,e,n),t.width=t.height=1}),hu=()=>{const t=document.createElement("canvas"),e=t.getContext("2d");return{canvas:t,ctx:e}},LU=t=>{const{ctx:n,canvas:r}=hu();r.width=r.height=50,n.drawImage(t,0,0,50,50);const i=n.getImageData(0,0,50,50).data;r.width=r.height=1;for(let s=3;s<i.length;s+=4)if(i[s]<254)return!0;return!1},DU=async t=>{let e=null;const{promiseReadJpegChunks:n,stack:r}=Gd();return await n(t),r.forEach(({marker:i,view:s})=>{if(!e&&i===225&&s.byteLength>=14&&s.getUint32(0)===1165519206&&s.getUint16(4)===0){e=s;return}}),e},MU="data:image/jpg;base64,/9j/4AAQSkZJRgABAQEASABIAAD/4QA6RXhpZgAATU0AKgAAAAgAAwESAAMAAAABAAYAAAEoAAMAAAABAAIAAAITAAMAAAABAAEAAAAAAAD/2wBDAP//////////////////////////////////////////////////////////////////////////////////////wAALCAABAAIBASIA/8QAJgABAAAAAAAAAAAAAAAAAAAAAxABAAAAAAAAAAAAAAAAAAAAAP/aAAgBAQAAPwBH/9k=";let Cc;const VU=()=>new Promise(t=>{if(Cc!==void 0)t(Cc);else{const e=new Image;e.addEventListener("load",()=>{Cc=e.naturalWidth<e.naturalHeight,e.src="//:0",t(Cc)}),e.src=MU}}),UU=(t,e)=>{let n,r,i,s;if(!t||t.byteLength<14||t.getUint32(0)!==1165519206||t.getUint16(4)!==0)return;if(t.getUint16(6)===18761)r=!0;else if(t.getUint16(6)===19789)r=!1;else return;if(t.getUint16(8,r)!==42)return;i=8+t.getUint32(10,r);const o=t.getUint16(i-2,r);for(n=0,s=o;s>=0?n<s:n>s;s>=0?++n:--n){if(t.byteLength<i+10)return;t.getUint16(i,r)===274&&e(i+8,r),i+=12}},$U=(t,e)=>{UU(t,(n,r)=>t.setUint16(n,e,r))},FU=async(t,e,n)=>(n&&$U(e,1),i2(t,225,[e.buffer])),jU=(t,e)=>new Promise((n,r)=>{e&&(t.src=e),t.complete?n(t):(t.addEventListener("load",()=>{n(t)}),t.addEventListener("error",()=>{r(new Error("Failed to load image. Probably not an image."))}))}),zU=t=>jU(new Image,t),BU=[1,3],HU=[192,193,194,195,197,198,199,201,202,203,205,206,207],Zw={squareSide:[Math.floor(Math.sqrt(5*1e3*1e3)),4096,8192,11180,10836,11402,14188,16384],dimension:[4096,8192,16384,32767,65535]},WU=async t=>{let e=!1;const{promiseReadJpegChunks:n,stack:r}=Gd();return await n(t).then(()=>(r.forEach(({marker:i,view:s})=>{if(!e&&HU.indexOf(i)>=0){const o=s.getUint8(5);BU.indexOf(o)<0&&(e=!0)}}),e)).catch(()=>e)},o2=(t,e)=>{const n={};return(...r)=>{const i=e(r,n);return i in n?n[i]:n[i]=t(...r)}},a2=(t,e)=>{const[n]=t,r=Object.keys(e).map(i=>parseInt(i,10)).sort((i,s)=>i-s);for(let i=0;i<r.length;i++){const s=r[i],o=!!e[s];if(s>n&&o||s<n&&!o)return s}return n},bi={R:55,G:110,B:165,A:255},qU=`rgba(${bi.R}, ${bi.G}, ${bi.B}, ${bi.A/255})`,l2=(t,e)=>{try{const n=[t-1,e-1,1,1],{canvas:r,ctx:i}=hu();r.width=1,r.height=1;const{canvas:s,ctx:o}=hu();s.width=t,s.height=e,o&&(o.fillStyle=qU,o.fillRect(...n),i.drawImage(s,t-1,e-1,1,1,0,0,1,1));const a=i&&i.getImageData(0,0,1,1).data;let l=!1;return a&&(l=a[0]===bi.R&&a[1]===bi.G&&a[2]===bi.B&&a[3]===bi.A),s.width=s.height=1,l}catch{return console.error(`Failed to test for max canvas size of ${t}x${e}.`),!1}};function u2(t){return(...e)=>new Promise(n=>{setTimeout(()=>{const r=t(...e);n(r)},0)})}const GU=u2(o2(l2,a2)),KU=u2(o2(l2,a2)),c2=async(t,e)=>{const n=Zw.squareSide.find(o=>o*o>=t*e),r=Zw.dimension.find(o=>o>=t&&o>=e);if(!n||!r)throw new Error("Not supported");const[i,s]=await Promise.all([GU(n,n),KU(r,1)]);if(i&&s)return!0;throw new Error("Not supported")},h2=async(t,e,n)=>{try{const{ctx:r,canvas:i}=hu();return i.width=e,i.height=n,r.imageSmoothingQuality="high",r.drawImage(t,0,0,e,n),t instanceof HTMLImageElement&&(t.src="//:0"),t instanceof HTMLCanvasElement&&(t.width=t.height=1),i}catch(r){throw new Error("Canvas resize error",{cause:r})}},QU=({img:t,targetW:e,targetH:n})=>h2(t,e,n),XU=function({sourceW:t,targetW:e,targetH:n,step:r}){const i=[];let s=e,o=n;do i.push([s,o]),s=Math.round(s/r),o=Math.round(o/r);while(s<t*r);return i.reverse()},YU=({img:t,sourceW:e,targetW:n,targetH:r,step:i})=>XU({sourceW:e,targetW:n,targetH:r,step:i}).reduce((o,[a,l])=>o.then(c=>c2(a,l).then(()=>h2(c,a,l)).catch(()=>c)),Promise.resolve(t)),JU=()=>/iPad|iPhone|iPod/.test(navigator.platform)?!0:navigator.maxTouchPoints&&navigator.maxTouchPoints>2&&/MacIntel/.test(navigator.platform),ZU=navigator.maxTouchPoints&&navigator.maxTouchPoints>2&&/MacIntel/.test(navigator.platform),Zf=.71,e$=(t,e)=>{if(t.width*Zf*t.height*Zf<e.size)throw new Error("Not required");const n=t.width,r=t.height,i=n/r,s=Math.floor(Math.sqrt(e.size*i)),o=Math.floor(e.size/Math.sqrt(e.size*i));return c2(s,o).then(()=>{const{ctx:a}=hu();return"imageSmoothingQuality"in a&&!JU()&&!ZU?QU({img:t,targetW:s,targetH:o}):YU({img:t,sourceW:n,targetW:s,targetH:o,step:Zf})}).catch(()=>Promise.reject("Not supported"))},t$=async(t,e)=>{try{if(await WU(t))throw new Error("Should skipped");const r=await Promise.allSettled([DU(t),VU(),PU(t)]),s=!r.some(I=>I.status==="rejected"),[o,a,l]=r,c=await NU(t).catch(()=>t),h=await zU(URL.createObjectURL(c));URL.revokeObjectURL(h.src);const f=await e$(h,e);let p="image/jpeg",_=(e==null?void 0:e.quality)||.8;!s&&LU(f)&&(p="image/png",_=void 0);let E=await OU(f,p,_);if(s&&o.status==="fulfilled"&&o.value){const I=o.value,R=a.status==="fulfilled"?a.value:!1;E=await FU(E,I,R)}return s&&l.status==="fulfilled"&&l.value.length>0&&(E=await s2(E,l.value)),E}catch(n){let r;throw n instanceof Error&&(r=n.message),typeof n=="string"&&(r=n),new Error(`Failed to shrink image. ${r?`Message: "${r}".`:""}`,{cause:n})}};function d2(t){let e=new Blob([t],{type:"image/svg+xml"});return URL.createObjectURL(e)}function n$(t="#fff",e="rgba(0, 0, 0, .1)"){return d2(`<svg height="20" width="20" viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg">
    <rect x="0" y="0" width="20" height="20" fill="${t}" />
    <rect x="0" y="0" width="10" height="10" fill="${e}" />
    <rect x="10" y="10" width="10" height="10" fill="${e}" />
  </svg>`)}function e1(t="hsl(209, 21%, 65%)",e=32,n=32){return d2(`
  <svg width="${e}" height="${n}" viewBox="0 0 30 30" fill="none" xmlns="http://www.w3.org/2000/svg">
    <path fill-rule="evenodd" fill="${t}" d="M9.68848 8.70068C9.68848 8.42454 9.91233 8.20068 10.1885 8.20068H15.0885C15.2211 8.20068 15.3483 8.25336 15.442 8.34713L20.342 13.2471C20.4358 13.3409 20.4885 13.4681 20.4885 13.6007V21.3007C20.4885 21.5768 20.2646 21.8007 19.9885 21.8007H10.1885C9.91233 21.8007 9.68848 21.5768 9.68848 21.3007V8.70068ZM10.6885 9.20068V20.8007H19.4885V14.1007L15.0885 14.1007C14.8123 14.1007 14.5885 13.8768 14.5885 13.6007L14.5885 9.20068H10.6885ZM15.5885 9.90779L18.7814 13.1007L15.5885 13.1007L15.5885 9.90779Z"/>
  </svg>
  `)}function r$(t,e=40){if(t.type==="image/svg+xml")return URL.createObjectURL(t);let n=document.createElement("canvas"),r=n.getContext("2d"),i=new Image,s=new Promise((o,a)=>{i.onload=()=>{let l=i.height/i.width;l>1?(n.width=e,n.height=e*l):(n.height=e,n.width=e/l),r.fillStyle="rgb(240, 240, 240)",r.fillRect(0,0,n.width,n.height),r.drawImage(i,0,0,n.width,n.height),n.toBlob(c=>{if(!c){a();return}let h=URL.createObjectURL(c);o(h)})},i.onerror=l=>{a(l)}});return i.src=URL.createObjectURL(t),s}const t1=16384,i$=/^([0-9]+)x([0-9]+)(?:\s+(\d{1,2}|100)%)?$/i,s$=t=>{const e=i$.exec(t==null?void 0:t.toLocaleLowerCase())||[];if(!e.length)return!1;const n=e[1]*e[2],r=t1*t1;return n>r?(console.warn(`Shrinked size can not be larger than ${Math.floor(r/1e3/1e3)}MP. You have set ${e[1]}x${e[2]} (${Math.ceil(n/1e3/100)/10}MP).`),!1):{quality:e[3]?e[3]/100:void 0,size:n}},Tn=Object.freeze({FINISHED:Symbol(0),FAILED:Symbol(1),UPLOADING:Symbol(2),IDLE:Symbol(3)});class ks extends Ke{constructor(){super();V(this,"couldBeCtxOwner",!0);V(this,"pauseRender",!0);V(this,"_entrySubs",new Set);V(this,"_entry",null);V(this,"_isIntersecting",!1);V(this,"_debouncedGenerateThumb",Mn(this._generateThumbnail.bind(this),100));V(this,"_debouncedCalculateState",Mn(this._calculateState.bind(this),100));V(this,"_renderedOnce",!1);this.init$={...this.init$,uid:"",itemName:"",errorText:"",thumbUrl:"",progressValue:0,progressVisible:!1,badgeIcon:"",isFinished:!1,isFailed:!1,isUploading:!1,isFocused:!1,isEditable:!1,state:Tn.IDLE,onEdit:()=>{this.set$({"*focusedEntry":this._entry}),this.hasBlockInCtx(n=>n.activityType===fe.activities.DETAILS)?this.$["*currentActivity"]=fe.activities.DETAILS:this.$["*currentActivity"]=fe.activities.CLOUD_IMG_EDIT},onRemove:()=>{this.uploadCollection.remove(this.$.uid)},onUpload:()=>{this.upload()}}}_reset(){for(let n of this._entrySubs)n.remove();this._debouncedGenerateThumb.cancel(),this._debouncedCalculateState.cancel(),this._entrySubs=new Set,this._entry=null}_observerCallback(n){let[r]=n;this._isIntersecting=r.isIntersecting,r.isIntersecting&&!this._renderedOnce&&(this.render(),this._renderedOnce=!0),r.intersectionRatio===0?this._debouncedGenerateThumb.cancel():this._debouncedGenerateThumb()}_calculateState(){if(!this._entry)return;let n=this._entry,r=Tn.IDLE;n.getValue("errors").length>0?r=Tn.FAILED:n.getValue("isUploading")?r=Tn.UPLOADING:n.getValue("fileInfo")&&(r=Tn.FINISHED),this.$.state=r}async _generateThumbnail(){var r;if(!this._entry)return;let n=this._entry;if(n.getValue("fileInfo")&&n.getValue("isImage")){let i=this.cfg.thumbSize,s=this.proxyUrl(Pn(cu(this.cfg.cdnCname,this._entry.getValue("uuid")),Wi(n.getValue("cdnUrlModifiers"),`scale_crop/${i}x${i}/center`))),o=n.getValue("thumbUrl");o!==s&&(n.setValue("thumbUrl",s),o!=null&&o.startsWith("blob:")&&URL.revokeObjectURL(o));return}if(!n.getValue("thumbUrl"))if((r=n.getValue("file"))!=null&&r.type.includes("image"))try{let i=await r$(n.getValue("file"),this.cfg.thumbSize);n.setValue("thumbUrl",i)}catch{let s=window.getComputedStyle(this).getPropertyValue("--clr-generic-file-icon");n.setValue("thumbUrl",e1(s))}else{let i=window.getComputedStyle(this).getPropertyValue("--clr-generic-file-icon");n.setValue("thumbUrl",e1(i))}}_subEntry(n,r){let i=this._entry.subscribe(n,s=>{this.isConnected&&r(s)});this._entrySubs.add(i)}_handleEntryId(n){var i;this._reset();let r=(i=this.uploadCollection)==null?void 0:i.read(n);this._entry=r,r&&(this._subEntry("uploadProgress",s=>{this.$.progressValue=s}),this._subEntry("fileName",s=>{this.$.itemName=s||r.getValue("externalUrl")||this.l10n("file-no-name"),this._debouncedCalculateState()}),this._subEntry("externalUrl",s=>{this.$.itemName=r.getValue("fileName")||s||this.l10n("file-no-name")}),this._subEntry("fileInfo",s=>{this._debouncedCalculateState(),s&&this._isIntersecting&&this._debouncedGenerateThumb()}),this._subEntry("cdnUrlModifiers",()=>{this._isIntersecting&&this._debouncedGenerateThumb()}),this._subEntry("thumbUrl",s=>{this.$.thumbUrl=s?`url(${s})`:""}),this._subEntry("errors",()=>this._debouncedCalculateState()),this._subEntry("isUploading",()=>this._debouncedCalculateState()),this._subEntry("fileSize",()=>this._debouncedCalculateState()),this._subEntry("mimeType",()=>this._debouncedCalculateState()),this._subEntry("isImage",()=>this._debouncedCalculateState()),this._isIntersecting&&this._debouncedGenerateThumb())}initCallback(){super.initCallback(),this.sub("uid",n=>{this._handleEntryId(n)}),this.sub("state",n=>{this._handleState(n)}),this.subConfigValue("useCloudImageEditor",()=>this._debouncedCalculateState()),this.onclick=()=>{ks.activeInstances.forEach(n=>{n===this?n.setAttribute("focused",""):n.removeAttribute("focused")})},this.sub("*uploadTrigger",n=>{n.has(this._entry.uid)&&setTimeout(()=>this.isConnected&&this.upload())}),ks.activeInstances.add(this)}_handleState(n){var r,i,s,o;n===Tn.FAILED?this.$.badgeIcon="badge-error":n===Tn.FINISHED&&(this.$.badgeIcon="badge-success"),n===Tn.UPLOADING?this.$.isFocused=!1:this.$.progressValue=0,this.set$({isFailed:n===Tn.FAILED,isUploading:n===Tn.UPLOADING,isFinished:n===Tn.FINISHED,progressVisible:n===Tn.UPLOADING,isEditable:this.cfg.useCloudImageEditor&&((r=this._entry)==null?void 0:r.getValue("isImage"))&&((i=this._entry)==null?void 0:i.getValue("cdnUrl")),errorText:(o=(s=this._entry.getValue("errors"))==null?void 0:s[0])==null?void 0:o.message})}destroyCallback(){super.destroyCallback(),ks.activeInstances.delete(this),this._reset()}connectedCallback(){super.connectedCallback(),this._observer=new window.IntersectionObserver(this._observerCallback.bind(this),{root:this.parentElement,rootMargin:"50% 0px 50% 0px",threshold:[0,1]}),this._observer.observe(this)}disconnectedCallback(){var n;super.disconnectedCallback(),this._debouncedGenerateThumb.cancel(),(n=this._observer)==null||n.disconnect()}_settingsOfShrink(){return s$(this.cfg.imageShrink)}_processShrink(n){return t$(n,this._settingsOfShrink())}async upload(){var i,s;let n=this._entry;if(!this.uploadCollection.read(n.uid)||n.getValue("fileInfo")||n.getValue("isUploading")||n.getValue("errors").length>0)return;const r=this.cfg.multiple?this.cfg.multipleMax:1;if(!(r&&this.uploadCollection.size>r)){this._debouncedCalculateState(),n.setValue("isUploading",!0),n.setValue("errors",[]);try{let o=new AbortController;n.setValue("abortController",o);const a=async()=>{let c=n.getValue("file");c&&this.cfg.imageShrink&&(c=await this._processShrink(c).catch(()=>c));const h=c||n.getValue("externalUrl")||n.getValue("uuid"),p={...this.getUploadClientOptions(),fileName:n.getValue("fileName"),source:n.getValue("source"),onProgress:_=>{if(_.isComputable){let E=_.value*100;n.setValue("uploadProgress",E)}},signal:o.signal,metadata:await this.getMetadataFor(n.uid)};return this.debugPrint("upload options",h,p),MI(h,p)};let l=await this.$["*uploadQueue"].add(a);n.setMultipleValues({fileInfo:l,isUploading:!1,fileName:l.originalFilename,fileSize:l.size,isImage:l.isImage,mimeType:((s=(i=l.contentInfo)==null?void 0:i.mime)==null?void 0:s.mime)??l.mimeType,uuid:l.uuid,cdnUrl:n.getValue("cdnUrl")??l.cdnUrl,cdnUrlModifiers:n.getValue("cdnUrlModifiers")??"",uploadProgress:100}),n===this._entry&&this._debouncedCalculateState()}catch(o){o instanceof Hs&&o.isCancel?n.setMultipleValues({isUploading:!1,uploadProgress:0}):n.setMultipleValues({isUploading:!1,uploadProgress:0,uploadError:o}),n===this._entry&&this._debouncedCalculateState()}}}}ks.template=`
  <div class="inner" set="@finished: isFinished; @uploading: isUploading; @failed: isFailed; @focused: isFocused">
    <div class="thumb" set="style.backgroundImage: thumbUrl">
      <div class="badge">
        <lr-icon set="@name: badgeIcon"></lr-icon>
      </div>
    </div>
    <div class="file-name-wrapper">
      <span class="file-name" set="@title: itemName">{{itemName}}</span>
      <span class="file-error" set="@hidden: !errorText">{{errorText}}</span>
    </div>
    <div class="file-actions">
      <button type="button" class="edit-btn mini-btn" set="onclick: onEdit; @hidden: !isEditable">
        <lr-icon name="edit-file"></lr-icon>
      </button>
      <button type="button" class="remove-btn mini-btn" set="onclick: onRemove;">
        <lr-icon name="remove-file"></lr-icon>
      </button>
      <button type="button" class="upload-btn mini-btn" set="onclick: onUpload;">
        <lr-icon name="upload"></lr-icon>
      </button>
    </div>
    <lr-progress-bar class="progress-bar" set="value: progressValue; visible: progressVisible;"> </lr-progress-bar>
  </div>
`;ks.activeInstances=new Set;class Ky extends Ne{constructor(){super();V(this,"_handleBackdropClick",()=>{this._closeDialog()});V(this,"_closeDialog",()=>{this.setOrAddState("*modalActive",!1)});V(this,"_handleDialogClose",()=>{this._closeDialog()});V(this,"_handleDialogMouseDown",n=>{this._mouseDownTarget=n.target});V(this,"_handleDialogMouseUp",n=>{n.target===this.ref.dialog&&n.target===this._mouseDownTarget&&this._closeDialog()});this.init$={...this.init$,"*modalActive":!1,isOpen:!1,closeClicked:this._handleDialogClose}}show(){this.ref.dialog.showModal?this.ref.dialog.showModal():this.ref.dialog.setAttribute("open","")}hide(){this.ref.dialog.close?this.ref.dialog.close():this.ref.dialog.removeAttribute("open")}initCallback(){if(super.initCallback(),typeof HTMLDialogElement=="function")this.ref.dialog.addEventListener("close",this._handleDialogClose),this.ref.dialog.addEventListener("mousedown",this._handleDialogMouseDown),this.ref.dialog.addEventListener("mouseup",this._handleDialogMouseUp);else{this.setAttribute("dialog-fallback","");let n=document.createElement("div");n.className="backdrop",this.appendChild(n),n.addEventListener("click",this._handleBackdropClick)}this.sub("*modalActive",n=>{this.$.isOpen!==n&&(this.$.isOpen=n),n&&this.cfg.modalScrollLock?document.body.style.overflow="hidden":document.body.style.overflow=""}),this.subConfigValue("modalBackdropStrokes",n=>{n?this.setAttribute("strokes",""):this.removeAttribute("strokes")}),this.sub("isOpen",n=>{n?this.show():this.hide()})}destroyCallback(){super.destroyCallback(),document.body.style.overflow="",this._mouseDownTarget=void 0,this.ref.dialog.removeEventListener("close",this._handleDialogClose),this.ref.dialog.removeEventListener("mousedown",this._handleDialogMouseDown),this.ref.dialog.removeEventListener("mouseup",this._handleDialogMouseUp)}}V(Ky,"StateConsumerScope","modal");Ky.template=`
  <dialog ref="dialog">
    <slot></slot>
  </dialog>
`;const f2=(t,e)=>{let n,r,i;const s=(...o)=>{n?(clearTimeout(r),r=setTimeout(()=>{Date.now()-i>=e&&(t(...o),i=Date.now())},Math.max(e-(Date.now()-i),0))):(t(...o),i=Date.now(),n=!0)};return Object.defineProperty(s,"cancel",{configurable:!1,writable:!1,enumerable:!1,value:()=>{clearTimeout(r)}}),s};class p2 extends Ke{constructor(){super();V(this,"couldBeCtxOwner",!0);V(this,"historyTracked",!0);V(this,"activityType",fe.activities.UPLOAD_LIST);V(this,"_throttledHandleCollectionUpdate",f2(()=>{this.isConnected&&(this._updateUploadsState(),!this.couldOpenActivity&&this.$["*currentActivity"]===this.activityType&&this.historyBack())},300));this.init$={...this.init$,doneBtnVisible:!1,doneBtnEnabled:!1,uploadBtnVisible:!1,addMoreBtnVisible:!1,addMoreBtnEnabled:!1,headerText:"",commonErrorMessage:"",hasFiles:!1,onAdd:()=>{this.initFlow(!0)},onUpload:()=>{this.emit(tt.UPLOAD_CLICK),this.uploadAll(),this._throttledHandleCollectionUpdate()},onDone:()=>{this.emit(tt.DONE_CLICK,this.getOutputCollectionState()),this.doneFlow()},onCancel:()=>{this.uploadCollection.clearAll()}}}_updateUploadsState(){const n=this.getOutputCollectionState(),r={total:n.totalCount,succeed:n.successCount,uploading:n.uploadingCount,failed:n.failedCount},i=!n.errors.some(p=>p.type==="TOO_MANY_FILES"||p.type==="TOO_FEW_FILES"),s=n.errors.some(p=>p.type==="TOO_MANY_FILES"),o=n.totalCount===(this.cfg.multiple?this.cfg.multipleMax:1),a=r.failed===0;let l=!1,c=!1,h=!1;r.total-r.succeed-r.uploading-r.failed>0&&i?l=!0:(c=!0,h=r.total===r.succeed&&i&&a),this.set$({doneBtnVisible:c,doneBtnEnabled:h,uploadBtnVisible:l,addMoreBtnEnabled:r.total===0||!s&&!o,addMoreBtnVisible:!o||this.cfg.multiple}),this.bindL10n("headerText",()=>this._getHeaderText(r))}_getHeaderText(n){const r=i=>{const s=n[i];return this.l10n(`header-${i}`,{count:s})};return n.uploading>0?r("uploading"):n.failed>0?r("failed"):n.succeed>0?r("succeed"):r("total")}get couldOpenActivity(){return this.cfg.showEmptyList||this.uploadCollection.size>0}initCallback(){super.initCallback(),this.registerActivity(this.activityType),this.subConfigValue("multiple",this._throttledHandleCollectionUpdate),this.subConfigValue("multipleMin",this._throttledHandleCollectionUpdate),this.subConfigValue("multipleMax",this._throttledHandleCollectionUpdate),this.sub("*currentActivity",n=>{!this.couldOpenActivity&&n===this.activityType&&(this.$["*currentActivity"]=this.initActivity)}),this.uploadCollection.observeProperties(this._throttledHandleCollectionUpdate),this.sub("*uploadList",n=>{this._throttledHandleCollectionUpdate(),this.set$({hasFiles:n.length>0}),this.cfg.confirmUpload||this.uploadAll()},!1),this.sub("*collectionErrors",n=>{const r=n.filter(i=>i.type!=="SOME_FILES_HAS_ERRORS")[0];if(!r){this.set$({commonErrorMessage:null});return}this.set$({commonErrorMessage:r.message})})}destroyCallback(){super.destroyCallback(),this.uploadCollection.unobserveProperties(this._throttledHandleCollectionUpdate)}}p2.template=`
  <lr-activity-header>
    <span class="header-text">{{headerText}}</span>
    <button type="button" class="mini-btn close-btn" set="onclick: *closeModal">
      <lr-icon name="close"></lr-icon>
    </button>
  </lr-activity-header>

  <div class="no-files" set="@hidden: hasFiles">
    <slot name="empty"><span l10n="no-files"></span></slot>
  </div>

  <div class="files" repeat="*uploadList" repeat-item-tag="lr-file-item"></div>

  <div class="common-error" set="@hidden: !commonErrorMessage; textContent: commonErrorMessage;"></div>

  <div class="toolbar">
    <button type="button" class="cancel-btn secondary-btn" set="onclick: onCancel;" l10n="clear"></button>
    <div class="toolbar-spacer"></div>
    <button
      type="button"
      class="add-more-btn secondary-btn"
      set="onclick: onAdd; @disabled: !addMoreBtnEnabled; @hidden: !addMoreBtnVisible"
    >
      <lr-icon name="add"></lr-icon><span l10n="add-more"></span>
    </button>
    <button
      type="button"
      class="upload-btn primary-btn"
      set="@hidden: !uploadBtnVisible; onclick: onUpload;"
      l10n="upload"
    ></button>
    <button
      type="button"
      class="done-btn primary-btn"
      set="@hidden: !doneBtnVisible; onclick: onDone;  @disabled: !doneBtnEnabled"
      l10n="done"
    ></button>
  </div>

  <lr-drop-area ghost></lr-drop-area>
`;class m2 extends Ke{constructor(){super(...arguments);V(this,"couldBeCtxOwner",!0);V(this,"activityType",fe.activities.URL);V(this,"init$",{...this.init$,importDisabled:!0,onUpload:n=>{n.preventDefault();let r=this.ref.input.value;this.addFileFromUrl(r,{source:sr.URL_TAB}),this.$["*currentActivity"]=fe.activities.UPLOAD_LIST},onCancel:()=>{this.historyBack()},onInput:n=>{let r=n.target.value;this.set$({importDisabled:!r})}})}initCallback(){super.initCallback(),this.registerActivity(this.activityType,{onActivate:()=>{this.ref.input.value="",this.ref.input.focus()}})}}m2.template=`
  <lr-activity-header>
    <button type="button" class="mini-btn" set="onclick: *historyBack">
      <lr-icon name="back"></lr-icon>
    </button>
    <div>
      <lr-icon name="url"></lr-icon>
      <span l10n="caption-from-url"></span>
    </div>
    <button type="button" class="mini-btn close-btn" set="onclick: *closeModal">
      <lr-icon name="close"></lr-icon>
    </button>
  </lr-activity-header>
  <form class="content">
    <input placeholder="https://" class="url-input" type="text" ref="input" set="oninput: onInput" />
    <button
      type="submit"
      class="url-upload-btn primary-btn"
      set="onclick: onUpload; @disabled: importDisabled"
      l10n="upload-url"
    ></button>
  </form>
`;const n1=()=>typeof navigator.permissions<"u";class g2 extends Ke{constructor(){super(...arguments);V(this,"couldBeCtxOwner",!0);V(this,"activityType",fe.activities.CAMERA);V(this,"_unsubPermissions",null);V(this,"init$",{...this.init$,video:null,videoTransformCss:null,shotBtnDisabled:!0,videoHidden:!0,messageHidden:!0,requestBtnHidden:n1(),cameraSelectOptions:null,cameraSelectHidden:!0,l10nMessage:"",onCameraSelectChange:n=>{this._selectedCameraId=n.target.value,this._capture()},onCancel:()=>{this.historyBack()},onShot:()=>{this._shot()},onRequestPermissions:()=>{this._capture()}});V(this,"_onActivate",()=>{n1()&&this._subscribePermissions(),this._capture()});V(this,"_onDeactivate",()=>{this._unsubPermissions&&this._unsubPermissions(),this._stopCapture()});V(this,"_handlePermissionsChange",()=>{this._capture()});V(this,"_setPermissionsState",Mn(n=>{this.classList.toggle("initialized",n==="granted"),n==="granted"?this.set$({videoHidden:!1,shotBtnDisabled:!1,messageHidden:!0}):n==="prompt"?(this.$.l10nMessage="camera-permissions-prompt",this.set$({videoHidden:!0,shotBtnDisabled:!0,messageHidden:!1}),this._stopCapture()):(this.$.l10nMessage="camera-permissions-denied",this.set$({videoHidden:!0,shotBtnDisabled:!0,messageHidden:!1}),this._stopCapture())},300))}async _subscribePermissions(){try{(await navigator.permissions.query({name:"camera"})).addEventListener("change",this._handlePermissionsChange)}catch(n){console.log("Failed to use permissions API. Fallback to manual request mode.",n),this._capture()}}async _capture(){let n={video:{width:{ideal:1920},height:{ideal:1080},frameRate:{ideal:30}},audio:!1};this._selectedCameraId&&(n.video.deviceId={exact:this._selectedCameraId}),this._canvas=document.createElement("canvas"),this._ctx=this._canvas.getContext("2d");try{this._setPermissionsState("prompt");let r=await navigator.mediaDevices.getUserMedia(n);r.addEventListener("inactive",()=>{this._setPermissionsState("denied")}),this.$.video=r,this._capturing=!0,this._setPermissionsState("granted")}catch(r){this._setPermissionsState("denied"),console.error("Failed to capture camera",r)}}_stopCapture(){var n;this._capturing&&((n=this.$.video)==null||n.getTracks()[0].stop(),this.$.video=null,this._capturing=!1)}_shot(){this._canvas.height=this.ref.video.videoHeight,this._canvas.width=this.ref.video.videoWidth,this._ctx.drawImage(this.ref.video,0,0);const n=Date.now(),r=`camera-${n}.jpeg`,i="image/jpeg";this._canvas.toBlob(s=>{let o=new File([s],r,{lastModified:n,type:i});this.addFileFromObject(o,{source:sr.CAMERA}),this.set$({"*currentActivity":fe.activities.UPLOAD_LIST})},i)}async initCallback(){var n;super.initCallback(),this.registerActivity(this.activityType,{onActivate:this._onActivate,onDeactivate:this._onDeactivate}),this.subConfigValue("cameraMirror",r=>{this.$.videoTransformCss=r?"scaleX(-1)":null});try{let i=(await navigator.mediaDevices.enumerateDevices()).filter(s=>s.kind==="videoinput").map((s,o)=>({text:s.label.trim()||`${this.l10n("caption-camera")} ${o+1}`,value:s.deviceId}));i.length>1&&(this.$.cameraSelectOptions=i,this.$.cameraSelectHidden=!1),this._selectedCameraId=(n=i[0])==null?void 0:n.value}catch{}}}g2.template=`
  <lr-activity-header>
    <button type="button" class="mini-btn" set="onclick: *historyBack">
      <lr-icon name="back"></lr-icon>
    </button>
    <div set="@hidden: !cameraSelectHidden">
      <lr-icon name="camera"></lr-icon>
      <span l10n="caption-camera"></span>
    </div>
    <lr-select
      class="camera-select"
      set="$.options: cameraSelectOptions; @hidden: cameraSelectHidden; onchange: onCameraSelectChange"
    >
    </lr-select>
    <button type="button" class="mini-btn close-btn" set="onclick: *closeModal">
      <lr-icon name="close"></lr-icon>
    </button>
  </lr-activity-header>
  <div class="content">
    <video
      autoplay
      playsinline
      set="srcObject: video; style.transform: videoTransformCss; @hidden: videoHidden"
      ref="video"
    ></video>
    <div class="message-box" set="@hidden: messageHidden">
      <span l10n="l10nMessage"></span>
      <button
        type="button"
        set="onclick: onRequestPermissions; @hidden: requestBtnHidden"
        l10n="camera-permissions-request"
      ></button>
    </div>
    <button type="button" class="shot-btn" set="onclick: onShot; @disabled: shotBtnDisabled">
      <lr-icon name="camera"></lr-icon>
    </button>
  </div>
`;class y2 extends Ke{constructor(){super(...arguments);V(this,"requireCtxName",!0)}initCallback(){super.initCallback(),this.$["*eventEmitter"].bindTarget(this)}destroyCallback(){super.destroyCallback(),this.$["*eventEmitter"].unbindTarget(this)}}y2.EventType=tt;const Nm=y2;class o${constructor(){V(this,"captionL10nStr","confirm-your-action");V(this,"messageL10Str","are-you-sure");V(this,"confirmL10nStr","yes");V(this,"denyL10nStr","no")}confirmAction(){console.log("Confirmed")}denyAction(){this.historyBack()}}class v2 extends fe{constructor(){super(...arguments);V(this,"activityType",fe.activities.CONFIRMATION);V(this,"_defaults",new o$);V(this,"init$",{...this.init$,activityCaption:"",messageTxt:"",confirmBtnTxt:"",denyBtnTxt:"","*confirmation":null,onConfirm:this._defaults.confirmAction,onDeny:this._defaults.denyAction.bind(this)})}initCallback(){super.initCallback(),this.set$({messageTxt:this.l10n(this._defaults.messageL10Str),confirmBtnTxt:this.l10n(this._defaults.confirmL10nStr),denyBtnTxt:this.l10n(this._defaults.denyL10nStr)}),this.sub("*confirmation",n=>{n&&this.set$({"*currentActivity":fe.activities.CONFIRMATION,activityCaption:this.l10n(n.captionL10nStr),messageTxt:this.l10n(n.messageL10Str),confirmBtnTxt:this.l10n(n.confirmL10nStr),denyBtnTxt:this.l10n(n.denyL10nStr),onDeny:()=>{n.denyAction()},onConfirm:()=>{n.confirmAction()}})})}}v2.template=`
  <lr-activity-header>
    <button type="button" class="mini-btn" set="onclick: *historyBack">
      <lr-icon name="back"></lr-icon>
    </button>
    <span>{{activityCaption}}</span>
    <button type="button" class="mini-btn close-btn" set="onclick: *closeModal">
      <lr-icon name="close"></lr-icon>
    </button>
  </lr-activity-header>

  <div class="message">{{messageTxt}}</div>
  <div class="toolbar">
    <button type="button" class="deny-btn secondary-btn" set="onclick: onDeny">{{denyBtnTxt}}</button>
    <button type="button" class="confirm-btn primary-btn" set="onclick: onConfirm">{{confirmBtnTxt}}</button>
  </div>
`;class _2 extends Ke{constructor(){super(...arguments);V(this,"init$",{...this.init$,visible:!1,value:0,"*commonProgress":0})}initCallback(){super.initCallback(),this._unobserveCollection=this.uploadCollection.observeProperties(()=>{let n=this.uploadCollection.items().some(r=>this.uploadCollection.read(r).getValue("isUploading"));this.$.visible=n}),this.sub("visible",n=>{n?this.setAttribute("active",""):this.removeAttribute("active")}),this.sub("*commonProgress",n=>{this.$.value=n})}destroyCallback(){var n;super.destroyCallback(),(n=this._unobserveCollection)==null||n.call(this)}}_2.template=' <lr-progress-bar set="visible: visible; value: value"></lr-progress-bar> ';class w2 extends Ne{constructor(){super(...arguments);V(this,"_value",0);V(this,"init$",{...this.init$,width:0,opacity:0})}initCallback(){super.initCallback(),this.defineAccessor("value",n=>{if(n===void 0)return;const r=this._value;if(this._value=n,n===0&&r>0){this.ref.line.addEventListener("transitionend",()=>{this.style.setProperty("--l-width",this._value.toString())});return}this.style.setProperty("--l-width",this._value.toString())}),this.defineAccessor("visible",n=>{this.ref.line.classList.toggle("progress--hidden",!n)})}}w2.template=' <div ref="line" class="progress"></div> ';const qi="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAQAAAC1HAwCAAAAC0lEQVR42mNkYAAAAAYAAjCB0C8AAAAASUVORK5CYII=";class Qy extends Ne{constructor(){super();V(this,"init$",{...this.init$,checkerboard:!1,src:qi})}initCallback(){super.initCallback(),this.sub("checkerboard",()=>{this.style.backgroundImage=this.hasAttribute("checkerboard")?`url(${n$()})`:"unset"})}destroyCallback(){super.destroyCallback(),URL.revokeObjectURL(this._lastObjectUrl)}setImage(n){this.$.src=n.src}setImageFile(n){let r=URL.createObjectURL(n);this.$.src=r,this._lastObjectUrl=r}setImageUrl(n){this.$.src=n}clear(){URL.revokeObjectURL(this._lastObjectUrl),this.$.src=qi}}Qy.template=' <lr-img class="img-view" ref="img" set="@src: src; style.aa: src;" /> ';Qy.bindAttributes({checkerboard:"checkerboard"});function E2(...t){return t.reduce((e,n)=>{if(typeof n=="string")return e[n]=!0,e;for(let r of Object.keys(n))e[r]=n[r];return e},{})}function Qn(...t){let e=E2(...t);return Object.keys(e).reduce((n,r)=>(e[r]&&n.push(r),n),[]).join(" ")}function a$(t,...e){let n=E2(...e);for(let r of Object.keys(n))t.classList.toggle(r,n[r])}const l$=t=>{if(!t)return fr;const e=IV(t).filter(n=>fr.includes(n));return e.length===0?fr:e};function u$(t){return{"*originalUrl":null,"*faderEl":null,"*cropperEl":null,"*imgEl":null,"*imgContainerEl":null,"*networkProblems":!1,"*imageSize":null,"*editorTransformations":{},"*cropPresetList":[],"*tabList":fr,"*tabId":Qt.CROP,entry:null,extension:null,editorMode:!1,modalCaption:"",isImage:!1,msg:"",src:qi,fileType:"",showLoader:!1,uuid:null,cdnUrl:null,cropPreset:"",tabs:jy(fr),"presence.networkProblems":!1,"presence.modalCaption":!0,"presence.editorToolbar":!1,"presence.viewerToolbar":!0,"*on.retryNetwork":()=>{let e=t.querySelectorAll("img");for(let n of e){let r=n.src;n.src=qi,n.src=r}t.$["*networkProblems"]=!1},"*on.apply":e=>{if(!e)return;let n=t.$["*originalUrl"],r=Wi(Wd(e),"preview"),i=Pn(n,r),s={originalUrl:n,cdnUrlModifiers:r,cdnUrl:i,transformations:e};t.dispatchEvent(new CustomEvent("apply",{detail:s,bubbles:!0,composed:!0})),t.remove()},"*on.cancel":()=>{t.remove(),t.dispatchEvent(new CustomEvent("cancel",{bubbles:!0,composed:!0}))}}}const c$=`
  <div class="wrapper wrapper_desktop">
    <lr-presence-toggle class="network_problems_splash" set="visible: presence.networkProblems;">
      <div class="network_problems_content">
        <div class="network_problems_icon">
          <lr-icon size="20" name="sad"></lr-icon>
        </div>
        <div class="network_problems_text">Network error</div>
      </div>
      <div class="network_problems_footer">
        <lr-btn-ui theme="primary" text="Retry" set="onclick: *on.retryNetwork"></lr-btn-ui>
      </div>
    </lr-presence-toggle>
    <div class="viewport">
      <div class="file_type_outer">
        <div class="file_type">{{fileType}}</div>
      </div>
      <div class="image_container" ref="img-container-el">
        <img src="${qi}" class="image image_visible_from_editor" ref="img-el" />
        <lr-editor-image-cropper ref="cropper-el"></lr-editor-image-cropper>
        <lr-editor-image-fader ref="fader-el"></lr-editor-image-fader>
      </div>
      <div class="info_pan">{{msg}}</div>
    </div>
    <div class="toolbar">
      <lr-line-loader-ui set="active: showLoader"></lr-line-loader-ui>
      <div class="toolbar_content toolbar_content__editor">
        <lr-editor-toolbar></lr-editor-toolbar>
      </div>
    </div>
  </div>
`;class xa extends Ne{constructor(){super();V(this,"ctxOwner",!0);V(this,"_debouncedShowLoader",Mn(this._showLoader.bind(this),300));this.init$={...this.init$,...u$(this)}}_showLoader(n){this.$.showLoader=n}_waitForSize(){return new Promise((r,i)=>{const s=setTimeout(()=>{i(new Error("[cloud-image-editor] timeout waiting for non-zero container size"))},3e3),o=new ResizeObserver(([a])=>{a.contentRect.width>0&&a.contentRect.height>0&&(r(),clearTimeout(s),o.disconnect())});o.observe(this)})}initCallback(){super.initCallback(),this.$["*faderEl"]=this.ref["fader-el"],this.$["*cropperEl"]=this.ref["cropper-el"],this.$["*imgContainerEl"]=this.ref["img-container-el"],this.initEditor()}async updateImage(){if(this.isConnected){if(await this._waitForSize(),this.$.cdnUrl){const n=mV(this.$.cdnUrl),r=cu(this.$.cdnUrl,n);if(r===this.$["*originalUrl"])return;this.$["*originalUrl"]=r;const i=gV(this.$.cdnUrl),s=EV(i);this.$["*editorTransformations"]=s}else if(this.$.uuid){const n=cu(this.cfg.cdnCname,this.$.uuid);if(n===this.$["*originalUrl"])return;this.$["*originalUrl"]=n,this.$["*editorTransformations"]={}}else throw new Error("No UUID nor CDN URL provided");this.$["*tabId"]===Qt.CROP?this.$["*cropperEl"].deactivate({reset:!0}):this.$["*faderEl"].deactivate();try{const n=Pn(this.$["*originalUrl"],Wi("json")),r=await fetch(n).then(o=>o.json()),{width:i,height:s}=r;this.$["*imageSize"]={width:i,height:s},this.$["*tabId"]===Qt.CROP?this.$["*cropperEl"].activate(this.$["*imageSize"]):this.$["*faderEl"].activate({url:this.$["*originalUrl"]})}catch(n){n&&console.error("Failed to load image info",n)}}}async initEditor(){try{await this._waitForSize()}catch(n){this.isConnected&&console.error(n.message);return}this.ref["img-el"].addEventListener("load",()=>{this._imgLoading=!1,this._debouncedShowLoader(!1),this.$.src!==qi&&(this.$["*networkProblems"]=!1)}),this.ref["img-el"].addEventListener("error",()=>{this._imgLoading=!1,this._debouncedShowLoader(!1),this.$["*networkProblems"]=!0}),this.sub("src",n=>{let r=this.ref["img-el"];r.src!==n&&(this._imgLoading=!0,r.src=n||qi)}),this.sub("cropPreset",n=>{this.$["*cropPresetList"]=XI(n)}),this.sub("tabs",n=>{this.$["*tabList"]=l$(n)}),this.sub("*tabId",n=>{this.ref["img-el"].className=Qn("image",{image_hidden_to_cropper:n===Qt.CROP,image_hidden_effects:n!==Qt.CROP})}),this.classList.add("editor_ON"),this.sub("*networkProblems",n=>{this.$["presence.networkProblems"]=n,this.$["presence.modalCaption"]=!n}),this.sub("*editorTransformations",n=>{if(Object.keys(n).length===0)return;let r=this.$["*originalUrl"],i=Wi(Wd(n),"preview"),s=Pn(r,i),o={originalUrl:r,cdnUrlModifiers:i,cdnUrl:s,transformations:n};this.dispatchEvent(new CustomEvent("change",{detail:o,bubbles:!0,composed:!0}))},!1),this.sub("uuid",n=>n&&this.updateImage()),this.sub("cdnUrl",n=>n&&this.updateImage())}}V(xa,"className","cloud-image-editor");xa.template=c$;xa.bindAttributes({uuid:"uuid","cdn-url":"cdnUrl","crop-preset":"cropPreset",tabs:"tabs"});class b2 extends Ne{constructor(){super(),this.init$={...this.init$,dragging:!1},this._handlePointerUp=this._handlePointerUp_.bind(this),this._handlePointerMove=this._handlePointerMove_.bind(this),this._handleSvgPointerMove=this._handleSvgPointerMove_.bind(this)}_shouldThumbBeDisabled(e){let n=this.$["*imageBox"];if(!n)return;if(e===""&&n.height<=ge&&n.width<=ge)return!0;let r=n.height<=ge&&(e.includes("n")||e.includes("s")),i=n.width<=ge&&(e.includes("e")||e.includes("w"));return r||i}_createBackdrop(){let e=this.$["*cropBox"];if(!e)return;let{x:n,y:r,width:i,height:s}=e,o=this.ref["svg-el"],a=Fn("mask",{id:"backdrop-mask"}),l=Fn("rect",{x:0,y:0,width:"100%",height:"100%",fill:"white"}),c=Fn("rect",{x:n,y:r,width:i,height:s,fill:"black"});a.appendChild(l),a.appendChild(c);let h=Fn("rect",{x:0,y:0,width:"100%",height:"100%",fill:"var(--color-image-background)","fill-opacity":.85,mask:"url(#backdrop-mask)"});o.appendChild(h),o.appendChild(a),this._backdropMask=a,this._backdropMaskInner=c}_resizeBackdrop(){this._backdropMask&&(this._backdropMask.style.display="none",window.requestAnimationFrame(()=>{this._backdropMask&&(this._backdropMask.style.display="block")}))}_updateBackdrop(){let e=this.$["*cropBox"];if(!e)return;let{x:n,y:r,width:i,height:s}=e;this._backdropMaskInner&&wo(this._backdropMaskInner,{x:n,y:r,width:i,height:s})}_updateFrame(){let e=this.$["*cropBox"];if(!(!e||!this._frameGuides||!this._frameThumbs)){for(let n of Object.values(this._frameThumbs)){let{direction:r,pathNode:i,interactionNode:s,groupNode:o}=n,a=r==="",l=r.length===2,{x:c,y:h,width:f,height:p}=e;if(a){const E={x:c+f/3,y:h+p/3,width:f/3,height:p/3};wo(s,E)}else{const E=Do(Math.min(f,p)/(Pm*2+vl)/2,0,1);let{d:I,center:R}=l?RV(e,r,E):NV(e,r,E);const T=Math.max(Fw*Do(Math.min(f,p)/Fw/3,0,1),PV);wo(s,{x:R[0]-T,y:R[1]-T,width:T*2,height:T*2}),wo(i,{d:I})}let _=this._shouldThumbBeDisabled(r);o.setAttribute("class",Qn("thumb",{"thumb--hidden":_,"thumb--visible":!_}))}wo(this._frameGuides,{x:e.x-hs*.5,y:e.y-hs*.5,width:e.width+hs,height:e.height+hs})}}_createThumbs(){const e={};for(let n=0;n<3;n++)for(let r=0;r<3;r++){let i=`${["n","","s"][n]}${["w","","e"][r]}`,s=Fn("g");s.classList.add("thumb"),s.setAttribute("with-effects","");let o=Fn("rect",{fill:"transparent"}),a=Fn("path",{stroke:"currentColor",fill:"none","stroke-width":QI});s.appendChild(a),s.appendChild(o),e[i]={direction:i,pathNode:a,interactionNode:o,groupNode:s},o.addEventListener("pointerdown",this._handlePointerDown.bind(this,i))}return e}_createGuides(){let e=Fn("svg"),n=Fn("rect",{x:0,y:0,width:"100%",height:"100%",fill:"none",stroke:"#000000","stroke-width":hs,"stroke-opacity":.5});e.appendChild(n);for(let r=1;r<=2;r++){let i=Fn("line",{x1:`${Ec*r}%`,y1:"0%",x2:`${Ec*r}%`,y2:"100%",stroke:"#000000","stroke-width":hs,"stroke-opacity":.3});e.appendChild(i)}for(let r=1;r<=2;r++){let i=Fn("line",{x1:"0%",y1:`${Ec*r}%`,x2:"100%",y2:`${Ec*r}%`,stroke:"#000000","stroke-width":hs,"stroke-opacity":.3});e.appendChild(i)}return e.classList.add("guides","guides--semi-hidden"),e}_createFrame(){let e=this.ref["svg-el"],n=document.createDocumentFragment(),r=this._createGuides();n.appendChild(r);let i=this._createThumbs();for(let{groupNode:s}of Object.values(i))n.appendChild(s);e.appendChild(n),this._frameThumbs=i,this._frameGuides=r}_handlePointerDown(e,n){if(!this._frameThumbs)return;let r=this._frameThumbs[e];if(this._shouldThumbBeDisabled(e))return;let i=this.$["*cropBox"],{x:s,y:o}=this.ref["svg-el"].getBoundingClientRect(),a=n.x-s,l=n.y-o;this.$.dragging=!0,this._draggingThumb=r,this._dragStartPoint=[a,l],this._dragStartCrop={...i}}_handlePointerUp_(e){this._updateCursor(),this.$.dragging&&(e.stopPropagation(),e.preventDefault(),this.$.dragging=!1)}_handlePointerMove_(e){if(!this.$.dragging||!this._dragStartPoint||!this._draggingThumb)return;e.stopPropagation(),e.preventDefault();let n=this.ref["svg-el"],{x:r,y:i}=n.getBoundingClientRect(),s=e.x-r,o=e.y-i,a=s-this._dragStartPoint[0],l=o-this._dragStartPoint[1],{direction:c}=this._draggingThumb;const h=this._calcCropBox(c,[a,l]);h&&(this.$["*cropBox"]=h)}_calcCropBox(e,n){var c;const[r,i]=n;let s=this.$["*imageBox"],o=this._dragStartCrop??this.$["*cropBox"];const a=(c=this.$["*cropPresetList"])==null?void 0:c[0],l=a?a.width/a.height:void 0;if(e===""?o=LV({rect:o,delta:[r,i],imageBox:s}):o=BV({rect:o,delta:[r,i],direction:e,aspectRatio:l,imageBox:s}),!Object.values(o).every(h=>Number.isFinite(h)&&h>=0)){console.error("CropFrame is trying to create invalid rectangle",{payload:o});return}return Fh(Kc(o),this.$["*imageBox"])}_handleSvgPointerMove_(e){if(!this._frameThumbs)return;let n=Object.values(this._frameThumbs).find(r=>{if(this._shouldThumbBeDisabled(r.direction))return!1;let s=r.interactionNode.getBoundingClientRect(),o={x:s.x,y:s.y,width:s.width,height:s.height};return HV(o,[e.x,e.y])});this._hoverThumb=n,this._updateCursor()}_updateCursor(){let e=this._hoverThumb;this.ref["svg-el"].style.cursor=e?OV(e.direction):"initial"}_render(){this._updateBackdrop(),this._updateFrame()}toggleThumbs(e){this._frameThumbs&&Object.values(this._frameThumbs).map(({groupNode:n})=>n).forEach(n=>{n.setAttribute("class",Qn("thumb",{"thumb--hidden":!e,"thumb--visible":e}))})}initCallback(){super.initCallback(),this._createBackdrop(),this._createFrame(),this.sub("*imageBox",()=>{this._resizeBackdrop(),window.requestAnimationFrame(()=>{this._render()})}),this.sub("*cropBox",e=>{e&&(this._guidesHidden=e.height<=ge||e.width<=ge,window.requestAnimationFrame(()=>{this._render()}))}),this.sub("dragging",e=>{this._frameGuides&&this._frameGuides.setAttribute("class",Qn({"guides--hidden":this._guidesHidden,"guides--visible":!this._guidesHidden&&e,"guides--semi-hidden":!this._guidesHidden&&!e}))}),this.ref["svg-el"].addEventListener("pointermove",this._handleSvgPointerMove,!0),document.addEventListener("pointermove",this._handlePointerMove,!0),document.addEventListener("pointerup",this._handlePointerUp,!0)}destroyCallback(){super.destroyCallback(),document.removeEventListener("pointermove",this._handlePointerMove),document.removeEventListener("pointerup",this._handlePointerUp)}}b2.template=' <svg class="svg" ref="svg-el" xmlns="http://www.w3.org/2000/svg"></svg> ';class Kd extends Ne{constructor(){super(...arguments);V(this,"init$",{...this.init$,active:!1,title:"",icon:"","on.click":null})}initCallback(){super.initCallback(),this._titleEl=this.ref["title-el"],this._iconEl=this.ref["icon-el"],this.setAttribute("role","button"),this.tabIndex===-1&&(this.tabIndex=0),this.sub("title",n=>{this._titleEl&&(this._titleEl.style.display=n?"block":"none")}),this.sub("active",n=>{this.className=Qn({active:n,not_active:!n})}),this.sub("on.click",n=>{this.onclick=n})}}Kd.template=`
  <div class="before"></div>
  <lr-icon size="20" set="@name: icon;"></lr-icon>
  <div class="title" ref="title-el">{{title}}</div>
`;function h$(t){let e=t+90;return e=e>=360?0:e,e}function d$(t,e){return t==="rotate"?h$(e):["mirror","flip"].includes(t)?!e:null}class T2 extends Kd{initCallback(){super.initCallback(),this.defineAccessor("operation",e=>{e&&(this._operation=e,this.$.icon=e)}),this.$["on.click"]=e=>{let n=this.$["*cropperEl"].getValue(this._operation),r=d$(this._operation,n);this.$["*cropperEl"].setValue(this._operation,r)}}}const al={FILTER:"filter",COLOR_OPERATION:"color_operation"},Ui="original";class C2 extends Ne{constructor(){super(...arguments);V(this,"init$",{...this.init$,disabled:!1,min:0,max:100,value:0,defaultValue:0,zero:0,"on.input":n=>{this.$["*faderEl"].set(n),this.$.value=n}})}setOperation(n,r){this._controlType=n==="filter"?al.FILTER:al.COLOR_OPERATION,this._operation=n,this._iconName=n,this._title=n.toUpperCase(),this._filter=r,this._initializeValues(),this.$["*faderEl"].activate({url:this.$["*originalUrl"],operation:this._operation,value:this._filter===Ui?void 0:this.$.value,filter:this._filter===Ui?void 0:this._filter,fromViewer:!1})}_initializeValues(){let{range:n,zero:r}=da[this._operation],[i,s]=n;this.$.min=i,this.$.max=s,this.$.zero=r;let o=this.$["*editorTransformations"][this._operation];if(this._controlType===al.FILTER){let a=s;if(o){let{name:l,amount:c}=o;a=l===this._filter?c:s}this.$.value=a,this.$.defaultValue=a}if(this._controlType===al.COLOR_OPERATION){let a=typeof o<"u"?o:r;this.$.value=a,this.$.defaultValue=a}}apply(){let n;this._controlType===al.FILTER?this._filter===Ui?n=null:n={name:this._filter,amount:this.$.value}:n=this.$.value;let r={...this.$["*editorTransformations"],[this._operation]:n};this.$["*editorTransformations"]=r}cancel(){this.$["*faderEl"].deactivate({hide:!1})}initCallback(){super.initCallback(),this.sub("*originalUrl",n=>{this._originalUrl=n}),this.sub("value",n=>{let r=`${this._filter||this._operation} ${n}`;this.$["*operationTooltip"]=r})}}C2.template=`
  <lr-slider-ui
    ref="slider-el"
    set="disabled: disabled; min: min; max: max; defaultValue: defaultValue; zero: zero; onInput: on.input;"
  ></lr-slider-ui>
`;function Xy(t){let e=new Image;return{promise:new Promise((i,s)=>{e.src=t,e.onload=i,e.onerror=s}),image:e,cancel:()=>{e.naturalWidth===0&&(e.src=qi)}}}function Om(t){let e=[];for(let s of t){let o=Xy(s);e.push(o)}let n=e.map(s=>s.image);return{promise:Promise.allSettled(e.map(s=>s.promise)),images:n,cancel:()=>{e.forEach(s=>{s.cancel()})}}}class Yy extends Kd{constructor(){super(...arguments);V(this,"init$",{...this.init$,active:!1,title:"",icon:"",isOriginal:!1,iconSize:"20","on.click":null})}_previewSrc(){let n=parseInt(window.getComputedStyle(this).getPropertyValue("--l-base-min-width"),10),r=window.devicePixelRatio,i=Math.ceil(r*n),s=r>=2?"lightest":"normal",o=100,a={...this.$["*editorTransformations"]};return a[this._operation]=this._filter!==Ui?{name:this._filter,amount:o}:void 0,Pn(this._originalUrl,Wi(KI,Wd(a),`quality/${s}`,`scale_crop/${i}x${i}/center`))}_observerCallback(n,r){if(n[0].isIntersecting){let s=this.proxyUrl(this._previewSrc()),o=this.ref["preview-el"],{promise:a,cancel:l}=Xy(s);this._cancelPreload=l,a.catch(c=>{this.$["*networkProblems"]=!0,console.error("Failed to load image",{error:c})}).finally(()=>{o.style.backgroundImage=`url(${s})`,o.setAttribute("loaded",""),r.unobserve(this)})}else this._cancelPreload&&this._cancelPreload()}initCallback(){super.initCallback(),this.$["on.click"]=r=>{this.$.active?this.$.isOriginal||(this.$["*sliderEl"].setOperation(this._operation,this._filter),this.$["*showSlider"]=!0):(this.$["*sliderEl"].setOperation(this._operation,this._filter),this.$["*sliderEl"].apply()),this.$["*currentFilter"]=this._filter},this.defineAccessor("filter",r=>{this._operation="filter",this._filter=r,this.$.isOriginal=r===Ui,this.$.icon=this.$.isOriginal?"original":"slider"}),this._observer=new window.IntersectionObserver(this._observerCallback.bind(this),{threshold:[0,1]});let n=this.$["*originalUrl"];this._originalUrl=n,this.$.isOriginal?this.ref["icon-el"].classList.add("original-icon"):this._observer.observe(this),this.sub("*currentFilter",r=>{this.$.active=r&&r===this._filter}),this.sub("isOriginal",r=>{this.$.iconSize=r?40:20}),this.sub("active",r=>{if(this.$.isOriginal)return;let i=this.ref["icon-el"];i.style.opacity=r?"1":"0";let s=this.ref["preview-el"];r?s.style.opacity="0":s.style.backgroundImage&&(s.style.opacity="1")}),this.sub("*networkProblems",r=>{if(!r){let i=this.proxyUrl(this._previewSrc()),s=this.ref["preview-el"];s.style.backgroundImage&&(s.style.backgroundImage="none",s.style.backgroundImage=`url(${i})`)}})}destroyCallback(){var n;super.destroyCallback(),(n=this._observer)==null||n.disconnect(),this._cancelPreload&&this._cancelPreload()}}Yy.template=`
  <div class="before"></div>
  <div class="preview" ref="preview-el"></div>
  <lr-icon size="40" ref="icon-el" set="@name: icon; @size: iconSize;"></lr-icon>
`;class I2 extends Kd{constructor(){super(...arguments);V(this,"_operation","")}initCallback(){super.initCallback(),this.$["on.click"]=n=>{this.$["*sliderEl"].setOperation(this._operation),this.$["*showSlider"]=!0,this.$["*currentOperation"]=this._operation},this.defineAccessor("operation",n=>{n&&(this._operation=n,this.$.icon=n,this.bindL10n("title",()=>this.l10n(n)))}),this.sub("*editorTransformations",n=>{if(!this._operation)return;let{zero:r}=da[this._operation],i=n[this._operation],s=typeof i<"u"?i!==r:!1;this.$.active=s})}}function f$(t,e){let n={};for(let r of e){let i=t[r];(t.hasOwnProperty(r)||i!==void 0)&&(n[r]=i)}return n}function Jy(t,e,n){let i=window.devicePixelRatio,s=Math.min(Math.ceil(e*i),3e3),o=i>=2?"lightest":"normal";return Pn(t,Wi(KI,Wd(n),`quality/${o}`,`stretch/off/-/resize/${s}x`))}function p$(t){return t?[({dimensions:n,coords:r})=>[...n,...r].every(i=>Number.isInteger(i)&&Number.isFinite(i)),({dimensions:n,coords:r})=>n.every(i=>i>0)&&r.every(i=>i>=0)].every(n=>n(t)):!0}class S2 extends Ne{constructor(){super();V(this,"ctxOwner",!0);this.init$={...this.init$,image:null,"*padding":kV,"*operations":{rotate:0,mirror:!1,flip:!1},"*imageBox":{x:0,y:0,width:0,height:0},"*cropBox":{x:0,y:0,width:0,height:0}},this._commitDebounced=Mn(this._commit.bind(this),300),this._handleResizeThrottled=f2(this._handleResize.bind(this),100),this._imageSize={width:0,height:0}}_handleResize(){!this.isConnected||!this._isActive||(this._initCanvas(),this._syncTransformations(),this._alignImage(),this._alignCrop(),this._draw())}_syncTransformations(){let n=this.$["*editorTransformations"],r=f$(n,Object.keys(this.$["*operations"])),i={...this.$["*operations"],...r};this.$["*operations"]=i}_initCanvas(){let n=this.ref["canvas-el"],r=n.getContext("2d"),i=this.offsetWidth,s=this.offsetHeight,o=window.devicePixelRatio;n.style.width=`${i}px`,n.style.height=`${s}px`,n.width=i*o,n.height=s*o,r==null||r.scale(o,o),this._canvas=n,this._ctx=r}_alignImage(){if(!this._isActive||!this.$.image)return;let n=this.$.image,r=this.$["*padding"],i=this.$["*operations"],{rotate:s}=i,o={width:this.offsetWidth,height:this.offsetHeight},a=sl({width:n.naturalWidth,height:n.naturalHeight},s),l;if(a.width>o.width-r*2||a.height>o.height-r*2){let c=a.width/a.height,h=o.width/o.height;if(c>h){let f=o.width-r*2,p=f/c,_=0+r,E=r+(o.height-r*2)/2-p/2;l={x:_,y:E,width:f,height:p}}else{let f=o.height-r*2,p=f*c,_=r+(o.width-r*2)/2-p/2,E=0+r;l={x:_,y:E,width:p,height:f}}}else{let{width:c,height:h}=a,f=r+(o.width-r*2)/2-c/2,p=r+(o.height-r*2)/2-h/2;l={x:f,y:p,width:c,height:h}}this.$["*imageBox"]=Kc(l)}_alignCrop(){var p;let n=this.$["*cropBox"],r=this.$["*imageBox"],i=this.$["*operations"],{rotate:s}=i,o=this.$["*editorTransformations"].crop,{width:a,x:l,y:c}=this.$["*imageBox"];if(o){let{dimensions:[_,E],coords:[I,R]}=o,{width:T}=sl(this._imageSize,s),w=a/T;n=Fh(Kc({x:l+I*w,y:c+R*w,width:_*w,height:E*w}),this.$["*imageBox"])}const h=(p=this.$["*cropPresetList"])==null?void 0:p[0],f=h?h.width/h.height:void 0;if(!WV(n,r)||f&&!qV(n,f)){const _=r.width/r.height;let E=r.width,I=r.height;f&&(_>f?E=Math.min(r.height*f,r.width):I=Math.min(r.width/f,r.height)),n={x:r.x+r.width/2-E/2,y:r.y+r.height/2-I/2,width:E,height:I}}this.$["*cropBox"]=Fh(Kc(n),this.$["*imageBox"])}_drawImage(){let n=this._ctx;if(!n)return;let r=this.$.image,i=this.$["*imageBox"],s=this.$["*operations"],{mirror:o,flip:a,rotate:l}=s,c=sl({width:i.width,height:i.height},l);n.save(),n.translate(i.x+i.width/2,i.y+i.height/2),n.rotate(l*Math.PI*-1/180),n.scale(o?-1:1,a?-1:1),n.drawImage(r,-c.width/2,-c.height/2,c.width,c.height),n.restore()}_draw(){if(!this._isActive||!this.$.image||!this._canvas||!this._ctx)return;let n=this._canvas;this._ctx.clearRect(0,0,n.width,n.height),this._drawImage()}_animateIn({fromViewer:n}){this.$.image&&(this.ref["frame-el"].toggleThumbs(!0),this._transitionToImage(),setTimeout(()=>{this.className=Qn({active_from_viewer:n,active_from_editor:!n,inactive_to_editor:!1})}))}_getCropDimensions(){let n=this.$["*cropBox"],r=this.$["*imageBox"],i=this.$["*operations"],{rotate:s}=i,{width:o,height:a}=r,{width:l,height:c}=sl(this._imageSize,s),{width:h,height:f}=n,p=o/l,_=a/c;return[Do(Math.round(h/p),1,l),Do(Math.round(f/_),1,c)]}_getCropTransformation(){let n=this.$["*cropBox"],r=this.$["*imageBox"],i=this.$["*operations"],{rotate:s}=i,{width:o,height:a,x:l,y:c}=r,{width:h,height:f}=sl(this._imageSize,s),{x:p,y:_}=n,E=o/h,I=a/f,R=this._getCropDimensions(),T={dimensions:R,coords:[Do(Math.round((p-l)/E),0,h-R[0]),Do(Math.round((_-c)/I),0,f-R[1])]};if(!p$(T)){console.error("Cropper is trying to create invalid crop object",{payload:T});return}if(!(R[0]===h&&R[1]===f))return T}_commit(){if(!this.isConnected)return;let n=this.$["*operations"],{rotate:r,mirror:i,flip:s}=n,o=this._getCropTransformation(),l={...this.$["*editorTransformations"],crop:o,rotate:r,mirror:i,flip:s};this.$["*editorTransformations"]=l}setValue(n,r){this.$["*operations"]={...this.$["*operations"],[n]:r},this._isActive&&(this._alignImage(),this._alignCrop(),this._draw())}getValue(n){return this.$["*operations"][n]}async activate(n,{fromViewer:r}={}){if(!this._isActive){this._isActive=!0,this._imageSize=n,this.removeEventListener("transitionend",this._reset);try{this.$.image=await this._waitForImage(this.$["*originalUrl"],this.$["*editorTransformations"]),this._syncTransformations(),this._animateIn({fromViewer:r})}catch(i){console.error("Failed to activate cropper",{error:i})}this._observer=new ResizeObserver(([i])=>{i.contentRect.width>0&&i.contentRect.height>0&&this._isActive&&this.$.image&&this._handleResizeThrottled()}),this._observer.observe(this)}}deactivate({reset:n=!1}={}){var r;this._isActive&&(!n&&this._commit(),this._isActive=!1,this._transitionToCrop(),this.className=Qn({active_from_viewer:!1,active_from_editor:!1,inactive_to_editor:!0}),this.ref["frame-el"].toggleThumbs(!1),this.addEventListener("transitionend",this._reset,{once:!0}),(r=this._observer)==null||r.disconnect())}_transitionToCrop(){let n=this._getCropDimensions(),r=Math.min(this.offsetWidth,n[0])/this.$["*cropBox"].width,i=Math.min(this.offsetHeight,n[1])/this.$["*cropBox"].height,s=Math.min(r,i),o=this.$["*cropBox"].x+this.$["*cropBox"].width/2,a=this.$["*cropBox"].y+this.$["*cropBox"].height/2;this.style.transform=`scale(${s}) translate(${(this.offsetWidth/2-o)/s}px, ${(this.offsetHeight/2-a)/s}px)`,this.style.transformOrigin=`${o}px ${a}px`}_transitionToImage(){let n=this.$["*cropBox"].x+this.$["*cropBox"].width/2,r=this.$["*cropBox"].y+this.$["*cropBox"].height/2;this.style.transform="scale(1)",this.style.transformOrigin=`${n}px ${r}px`}_reset(){this._isActive||(this.$.image=null)}_waitForImage(n,r){let i=this.offsetWidth;r={...r,crop:void 0,rotate:void 0,flip:void 0,mirror:void 0};let s=this.proxyUrl(Jy(n,i,r)),{promise:o,cancel:a,image:l}=Xy(s),c=this._handleImageLoading(s);return l.addEventListener("load",c,{once:!0}),l.addEventListener("error",c,{once:!0}),this._cancelPreload&&this._cancelPreload(),this._cancelPreload=a,o.then(()=>l).catch(h=>(console.error("Failed to load image",{error:h}),this.$["*networkProblems"]=!0,Promise.resolve(l)))}_handleImageLoading(n){let r="crop",i=this.$["*loadingOperations"];return i.get(r)||i.set(r,new Map),i.get(r).get(n)||(i.set(r,i.get(r).set(n,!0)),this.$["*loadingOperations"]=i),()=>{var s;(s=i==null?void 0:i.get(r))!=null&&s.has(n)&&(i.get(r).delete(n),this.$["*loadingOperations"]=i)}}initCallback(){super.initCallback(),this.sub("*imageBox",()=>{this._draw()}),this.sub("*cropBox",()=>{this.$.image&&this._commitDebounced()}),this.sub("*cropPresetList",()=>{this._alignCrop()}),setTimeout(()=>{this.sub("*networkProblems",n=>{n||this._isActive&&this.activate(this._imageSize,{fromViewer:!1})})},0)}destroyCallback(){var n;super.destroyCallback(),(n=this._observer)==null||n.disconnect()}}S2.template=`
  <canvas class="canvas" ref="canvas-el"></canvas>
  <lr-crop-frame ref="frame-el"></lr-crop-frame>
`;function r1(t,e,n){let r=Array(n);n--;for(let i=n;i>=0;i--)r[i]=Math.ceil((i*e+(n-i)*t)/n);return r}function m$(t){return t.reduce((e,n,r)=>r<t.length-1?[...e,[n,t[r+1]]]:e,[])}function g$(t,e,n){let r=m$(t).find(([i,s])=>i<=e&&e<=s);return t.map(i=>{let s=Math.abs(r[0]-r[1]),o=Math.abs(e-r[0])/s;return r[0]===i?e>n?1:1-o:r[1]===i?e>=n?o:1:0})}function y$(t,e){return t.map((n,r)=>n<e?t.length-r:r)}function i1(t,e){let n=da[t].keypointsNumber,{range:r,zero:i}=da[t];return[...new Set([...r1(r[0],i,n+1),...r1(i,r[1],n+1),i,e])].sort((s,o)=>s-o)}class v$ extends Ne{constructor(){super(),this._isActive=!1,this._hidden=!0,this._addKeypointDebounced=Mn(this._addKeypoint.bind(this),600),this.classList.add("inactive_to_cropper")}_handleImageLoading(e){let n=this._operation,r=this.$["*loadingOperations"];return r.get(n)||r.set(n,new Map),r.get(n).get(e)||(r.set(n,r.get(n).set(e,!0)),this.$["*loadingOperations"]=r),()=>{var i;(i=r==null?void 0:r.get(n))!=null&&i.has(e)&&(r.get(n).delete(e),this.$["*loadingOperations"]=r)}}_flush(){window.cancelAnimationFrame(this._raf),this._raf=window.requestAnimationFrame(()=>{for(let e of this._keypoints){let{image:n}=e;n&&(n.style.opacity=e.opacity.toString(),n.style.zIndex=e.zIndex.toString())}})}_imageSrc({url:e=this._url,filter:n=this._filter,operation:r,value:i}={}){let s={...this._transformations};r&&(s[r]=n?{name:n,amount:i}:i);let o=this.offsetWidth;return this.proxyUrl(Jy(e,o,s))}_constructKeypoint(e,n){return{src:this._imageSrc({operation:e,value:n}),image:null,opacity:0,zIndex:0,value:n}}_isSame(e,n){return this._operation===e&&this._filter===n}_addKeypoint(e,n,r){let i=()=>!this._isSame(e,n)||this._value!==r||!!this._keypoints.find(l=>l.value===r);if(i())return;let s=this._constructKeypoint(e,r),o=new Image;o.src=s.src;let a=this._handleImageLoading(s.src);o.addEventListener("load",a,{once:!0}),o.addEventListener("error",a,{once:!0}),s.image=o,o.classList.add("fader-image"),o.addEventListener("load",()=>{if(i())return;let l=this._keypoints,c=l.findIndex(f=>f.value>r),h=c<l.length?l[c].image:null;!this._container||h&&!this._container.contains(h)||(l.splice(c,0,s),this._container.insertBefore(o,h),this._update(e,r))},{once:!0}),o.addEventListener("error",()=>{this.$["*networkProblems"]=!0},{once:!0})}set(e){e=typeof e=="string"?parseInt(e,10):e,this._update(this._operation,e),this._addKeypointDebounced(this._operation,this._filter,e)}_update(e,n){this._operation=e,this._value=n;let{zero:r}=da[e],i=this._keypoints.map(a=>a.value),s=g$(i,n,r),o=y$(i,r);for(let[a,l]of Object.entries(this._keypoints))l.opacity=s[a],l.zIndex=o[a];this._flush()}_createPreviewImage(){let e=new Image;return e.classList.add("fader-image","fader-image--preview"),e.style.opacity="0",e}async _initNodes(){let e=document.createDocumentFragment();this._previewImage=this._previewImage||this._createPreviewImage(),!this.contains(this._previewImage)&&e.appendChild(this._previewImage);let n=document.createElement("div");e.appendChild(n);let r=this._keypoints.map(c=>c.src),{images:i,promise:s,cancel:o}=Om(r);i.forEach(c=>{let h=this._handleImageLoading(c.src);c.addEventListener("load",h),c.addEventListener("error",h)}),this._cancelLastImages=()=>{o(),this._cancelLastImages=void 0};let a=this._operation,l=this._filter;await s,this._isActive&&this._isSame(a,l)&&(this._container&&this._container.remove(),this._container=n,this._keypoints.forEach((c,h)=>{let f=i[h];f.classList.add("fader-image"),c.image=f,this._container.appendChild(f)}),this.appendChild(e),this._flush())}setTransformations(e){if(this._transformations=e,this._previewImage){let n=this._imageSrc(),r=this._handleImageLoading(n);this._previewImage.src=n,this._previewImage.addEventListener("load",r,{once:!0}),this._previewImage.addEventListener("error",r,{once:!0}),this._previewImage.style.opacity="1",this._previewImage.addEventListener("error",()=>{this.$["*networkProblems"]=!0},{once:!0})}}preload({url:e,filter:n,operation:r,value:i}){this._cancelBatchPreload&&this._cancelBatchPreload();let o=i1(r,i).map(l=>this._imageSrc({url:e,filter:n,operation:r,value:l})),{cancel:a}=Om(o);this._cancelBatchPreload=a}_setOriginalSrc(e){let n=this._previewImage||this._createPreviewImage();if(!this.contains(n)&&this.appendChild(n),this._previewImage=n,n.src===e){n.style.opacity="1",n.style.transform="scale(1)",this.className=Qn({active_from_viewer:this._fromViewer,active_from_cropper:!this._fromViewer,inactive_to_cropper:!1});return}n.style.opacity="0";let r=this._handleImageLoading(e);n.addEventListener("error",r,{once:!0}),n.src=e,n.addEventListener("load",()=>{r(),n&&(n.style.opacity="1",n.style.transform="scale(1)",this.className=Qn({active_from_viewer:this._fromViewer,active_from_cropper:!this._fromViewer,inactive_to_cropper:!1}))},{once:!0}),n.addEventListener("error",()=>{this.$["*networkProblems"]=!0},{once:!0})}activate({url:e,operation:n,value:r,filter:i,fromViewer:s}){if(this._isActive=!0,this._hidden=!1,this._url=e,this._operation=n||"initial",this._value=r,this._filter=i,this._fromViewer=s,typeof r!="number"&&!i){let a=this._imageSrc({operation:n,value:r});this._setOriginalSrc(a),this._container&&this._container.remove();return}this._keypoints=i1(n,r).map(a=>this._constructKeypoint(n,a)),this._update(n,r),this._initNodes()}deactivate({hide:e=!0}={}){this._isActive=!1,this._cancelLastImages&&this._cancelLastImages(),this._cancelBatchPreload&&this._cancelBatchPreload(),e&&!this._hidden?(this._hidden=!0,this._previewImage&&(this._previewImage.style.transform="scale(1)"),this.className=Qn({active_from_viewer:!1,active_from_cropper:!1,inactive_to_cropper:!0}),this.addEventListener("transitionend",()=>{this._container&&this._container.remove()},{once:!0})):this._container&&this._container.remove()}}const _$=1;class A2 extends Ne{initCallback(){super.initCallback(),this.addEventListener("wheel",e=>{e.preventDefault();let{deltaY:n,deltaX:r}=e;Math.abs(r)>_$?this.scrollLeft+=r:this.scrollLeft+=n})}}A2.template=" <slot></slot> ";function w$(t){return`
    <lr-presence-toggle class="tab-toggle" set="visible: presence.tabToggle.${t}; styles: presence.tabToggleStyles;">
      <lr-btn-ui
        theme="boring"
        ref="tab-toggle-${t}"
        data-id="${t}"
        icon="${t}"
        tabindex="0"
        set="onclick: on.clickTab;"
      >
      </lr-btn-ui>
    </lr-presence-toggle>
  `}function E$(t){return`
    <lr-presence-toggle class="tab-content" set="visible: presence.tabContent.${t}; styles: presence.tabContentStyles">
      <lr-editor-scroller hidden-scrollbar>
        <div class="controls-list_align">
          <div class="controls-list_inner" ref="controls-list-${t}"></div>
        </div>
      </lr-editor-scroller>
    </lr-presence-toggle>
  `}class x2 extends Ne{constructor(){super();V(this,"_updateInfoTooltip",Mn(()=>{var o,a;const n=this.$["*editorTransformations"],r=this.$["*currentOperation"];let i="",s=!1;if(this.$["*tabId"]===Qt.FILTERS)if(s=!0,this.$["*currentFilter"]&&((o=n==null?void 0:n.filter)==null?void 0:o.name)===this.$["*currentFilter"]){let l=((a=n==null?void 0:n.filter)==null?void 0:a.amount)||100;i=this.$["*currentFilter"]+" "+l}else i=this.l10n(Ui);else if(this.$["*tabId"]===Qt.TUNING&&r){s=!0;let l=(n==null?void 0:n[r])||da[r].zero;i=this.l10n(r)+" "+l}s&&(this.$["*operationTooltip"]=i),this.ref["tooltip-el"].classList.toggle("info-tooltip_visible",s)},0));this.init$={...this.init$,"*sliderEl":null,"*loadingOperations":new Map,"*showSlider":!1,"*currentFilter":Ui,"*currentOperation":null,showLoader:!1,filters:TV,colorOperations:bV,cropOperations:CV,"*operationTooltip":null,"presence.mainToolbar":!0,"presence.subToolbar":!1,"presence.tabToggles":!0,"presence.tabContent.crop":!1,"presence.tabContent.tuning":!1,"presence.tabContent.filters":!1,"presence.tabToggle.crop":!0,"presence.tabToggle.tuning":!0,"presence.tabToggle.filters":!0,"presence.subTopToolbarStyles":{hidden:"sub-toolbar--top-hidden",visible:"sub-toolbar--visible"},"presence.subBottomToolbarStyles":{hidden:"sub-toolbar--bottom-hidden",visible:"sub-toolbar--visible"},"presence.tabContentStyles":{hidden:"tab-content--hidden",visible:"tab-content--visible"},"presence.tabToggleStyles":{hidden:"tab-toggle--hidden",visible:"tab-toggle--visible"},"presence.tabTogglesStyles":{hidden:"tab-toggles--hidden",visible:"tab-toggles--visible"},"on.cancel":()=>{this._cancelPreload&&this._cancelPreload(),this.$["*on.cancel"]()},"on.apply":()=>{this.$["*on.apply"](this.$["*editorTransformations"])},"on.applySlider":()=>{this.ref["slider-el"].apply(),this._onSliderClose()},"on.cancelSlider":()=>{this.ref["slider-el"].cancel(),this._onSliderClose()},"on.clickTab":n=>{const r=n.currentTarget.getAttribute("data-id");r&&this._activateTab(r,{fromViewer:!1})}},this._debouncedShowLoader=Mn(this._showLoader.bind(this),500)}_onSliderClose(){this.$["*showSlider"]=!1,this.$["*tabId"]===Qt.TUNING&&this.ref["tooltip-el"].classList.toggle("info-tooltip_visible",!1)}_createOperationControl(n){let r=new I2;return r.operation=n,r}_createFilterControl(n){let r=new Yy;return r.filter=n,r}_createToggleControl(n){let r=new T2;return r.operation=n,r}_renderControlsList(n){let r=this.ref[`controls-list-${n}`],i=document.createDocumentFragment();n===Qt.CROP?this.$.cropOperations.forEach(s=>{let o=this._createToggleControl(s);i.appendChild(o)}):n===Qt.FILTERS?[Ui,...this.$.filters].forEach(s=>{let o=this._createFilterControl(s);i.appendChild(o)}):n===Qt.TUNING&&this.$.colorOperations.forEach(s=>{let o=this._createOperationControl(s);i.appendChild(o)}),[...i.children].forEach((s,o)=>{o===i.childNodes.length-1&&s.classList.add("controls-list_last-item")}),r.innerHTML="",r.appendChild(i)}_activateTab(n,{fromViewer:r}){this.$["*tabId"]=n,n===Qt.CROP?(this.$["*faderEl"].deactivate(),this.$["*cropperEl"].activate(this.$["*imageSize"],{fromViewer:r})):(this.$["*faderEl"].activate({url:this.$["*originalUrl"],fromViewer:r}),this.$["*cropperEl"].deactivate());for(let i of fr){let s=i===n,o=this.ref[`tab-toggle-${i}`];o.active=s,s?(this._renderControlsList(n),this._syncTabIndicator()):this._unmountTabControls(i),this.$[`presence.tabContent.${i}`]=s}}_unmountTabControls(n){let r=this.ref[`controls-list-${n}`];r&&(r.innerHTML="")}_syncTabIndicator(){let n=this.ref[`tab-toggle-${this.$["*tabId"]}`],r=this.ref["tabs-indicator"];r.style.transform=`translateX(${n.offsetLeft}px)`}_preloadEditedImage(){if(this.$["*imgContainerEl"]&&this.$["*originalUrl"]){let n=this.$["*imgContainerEl"].offsetWidth,r=this.proxyUrl(Jy(this.$["*originalUrl"],n,this.$["*editorTransformations"]));this._cancelPreload&&this._cancelPreload();let{cancel:i}=Om([r]);this._cancelPreload=()=>{i(),this._cancelPreload=void 0}}}_showLoader(n){this.$.showLoader=n}initCallback(){super.initCallback(),this.$["*sliderEl"]=this.ref["slider-el"],this.sub("*imageSize",n=>{n&&setTimeout(()=>{this._activateTab(this.$["*tabId"],{fromViewer:!0})},0)}),this.sub("*editorTransformations",n=>{var i;let r=(i=n==null?void 0:n.filter)==null?void 0:i.name;this.$["*currentFilter"]!==r&&(this.$["*currentFilter"]=r)}),this.sub("*currentFilter",()=>{this._updateInfoTooltip()}),this.sub("*currentOperation",()=>{this._updateInfoTooltip()}),this.sub("*tabId",()=>{this._updateInfoTooltip()}),this.sub("*originalUrl",()=>{this.$["*faderEl"]&&this.$["*faderEl"].deactivate()}),this.sub("*editorTransformations",n=>{this._preloadEditedImage(),this.$["*faderEl"]&&this.$["*faderEl"].setTransformations(n)}),this.sub("*loadingOperations",n=>{let r=!1;for(let[,i]of n.entries()){if(r)break;for(let[,s]of i.entries())if(s){r=!0;break}}this._debouncedShowLoader(r)}),this.sub("*showSlider",n=>{this.$["presence.subToolbar"]=n,this.$["presence.mainToolbar"]=!n}),this.sub("*tabList",n=>{this.$["presence.tabToggles"]=n.length>1;for(const r of fr){this.$[`presence.tabToggle.${r}`]=n.includes(r);const i=this.ref[`tab-toggle-${r}`];i.style.gridColumn=n.indexOf(r)+1}n.includes(this.$["*tabId"])||this._activateTab(n[0],{fromViewer:!1})}),this._updateInfoTooltip()}}x2.template=`
  <lr-line-loader-ui set="active: showLoader"></lr-line-loader-ui>
  <div class="info-tooltip_container">
    <div class="info-tooltip_wrapper">
      <div ref="tooltip-el" class="info-tooltip info-tooltip_hidden">{{*operationTooltip}}</div>
    </div>
  </div>
  <div class="toolbar-container">
    <lr-presence-toggle class="sub-toolbar" set="visible: presence.mainToolbar; styles: presence.subTopToolbarStyles">
      <div class="tab-content-row">${fr.map(E$).join("")}</div>
      <div class="controls-row">
        <lr-btn-ui theme="boring" icon="closeMax" set="onclick: on.cancel"> </lr-btn-ui>
        <lr-presence-toggle class="tab-toggles" set="visible: presence.tabToggles; styles: presence.tabTogglesStyles">
          <div ref="tabs-indicator" class="tab-toggles_indicator"></div>
          ${fr.map(w$).join("")}
        </lr-presence-toggle>
        <lr-btn-ui theme="primary" icon="done" set="onclick: on.apply"> </lr-btn-ui>
      </div>
    </lr-presence-toggle>
    <lr-presence-toggle class="sub-toolbar" set="visible: presence.subToolbar; styles: presence.subBottomToolbarStyles">
      <div class="slider">
        <lr-editor-slider ref="slider-el"></lr-editor-slider>
      </div>
      <div class="controls-row">
        <lr-btn-ui theme="boring" set="onclick: on.cancelSlider;" l10n="@text:cancel"> </lr-btn-ui>
        <lr-btn-ui theme="primary" set="onclick: on.applySlider;" l10n="@text:apply"> </lr-btn-ui>
      </div>
    </lr-presence-toggle>
  </div>
`;class Zy extends Ne{constructor(){super(),this._iconReversed=!1,this._iconSingle=!1,this._iconHidden=!1,this.init$={...this.init$,text:"",icon:"",iconCss:this._iconCss(),theme:null},this.defineAccessor("active",e=>{e?this.setAttribute("active",""):this.removeAttribute("active")})}_iconCss(){return Qn("icon",{icon_left:!this._iconReversed,icon_right:this._iconReversed,icon_hidden:this._iconHidden,icon_single:this._iconSingle})}initCallback(){super.initCallback(),this.sub("icon",e=>{this._iconSingle=!this.$.text,this._iconHidden=!e,this.$.iconCss=this._iconCss()}),this.sub("theme",e=>{e!=="custom"&&(this.className=e)}),this.sub("text",e=>{this._iconSingle=!1}),this.setAttribute("role","button"),this.tabIndex===-1&&(this.tabIndex=0),this.hasAttribute("theme")||this.setAttribute("theme","default")}set reverse(e){this.hasAttribute("reverse")?(this.style.flexDirection="row-reverse",this._iconReversed=!0):(this._iconReversed=!1,this.style.flexDirection=null)}}Zy.bindAttributes({text:"text",icon:"icon",reverse:"reverse",theme:"theme"});Zy.template=`
  <lr-icon size="20" set="className: iconCss; @name: icon;"></lr-icon>
  <div class="text">{{text}}</div>
`;class k2 extends Ne{constructor(){super(),this._active=!1,this._handleTransitionEndRight=()=>{let e=this.ref["line-el"];e.style.transition="initial",e.style.opacity="0",e.style.transform="translateX(-101%)",this._active&&this._start()}}initCallback(){super.initCallback(),this.defineAccessor("active",e=>{typeof e=="boolean"&&(e?this._start():this._stop())})}_start(){this._active=!0;let{width:e}=this.getBoundingClientRect(),n=this.ref["line-el"];n.style.transition="transform 1s",n.style.opacity="1",n.style.transform=`translateX(${e}px)`,n.addEventListener("transitionend",this._handleTransitionEndRight,{once:!0})}_stop(){this._active=!1}}k2.template=`
  <div class="inner">
    <div class="line" ref="line-el"></div>
  </div>
`;const Ic={transition:"transition",visible:"visible",hidden:"hidden"};class P2 extends Ne{constructor(){super(),this._visible=!1,this._visibleStyle=Ic.visible,this._hiddenStyle=Ic.hidden,this._externalTransitions=!1,this.defineAccessor("styles",e=>{e&&(this._externalTransitions=!0,this._visibleStyle=e.visible,this._hiddenStyle=e.hidden)}),this.defineAccessor("visible",e=>{typeof e=="boolean"&&(this._visible=e,this._handleVisible())})}_handleVisible(){this.style.visibility=this._visible?"inherit":"hidden",a$(this,{[Ic.transition]:!this._externalTransitions,[this._visibleStyle]:this._visible,[this._hiddenStyle]:!this._visible}),this.setAttribute("aria-hidden",this._visible?"false":"true")}initCallback(){super.initCallback(),this.setAttribute("hidden",""),this._externalTransitions||this.classList.add(Ic.transition),this._handleVisible(),setTimeout(()=>this.removeAttribute("hidden"),0)}}P2.template=" <slot></slot> ";class R2 extends Ne{constructor(){super();V(this,"init$",{...this.init$,disabled:!1,min:0,max:100,onInput:null,onChange:null,defaultValue:null,"on.sliderInput":()=>{let n=parseInt(this.ref["input-el"].value,10);this._updateValue(n),this.$.onInput&&this.$.onInput(n)},"on.sliderChange":()=>{let n=parseInt(this.ref["input-el"].value,10);this.$.onChange&&this.$.onChange(n)}});this.setAttribute("with-effects","")}initCallback(){super.initCallback(),this.defineAccessor("disabled",r=>{this.$.disabled=r}),this.defineAccessor("min",r=>{this.$.min=r}),this.defineAccessor("max",r=>{this.$.max=r}),this.defineAccessor("defaultValue",r=>{this.$.defaultValue=r,this.ref["input-el"].value=r,this._updateValue(r)}),this.defineAccessor("zero",r=>{this._zero=r}),this.defineAccessor("onInput",r=>{r&&(this.$.onInput=r)}),this.defineAccessor("onChange",r=>{r&&(this.$.onChange=r)}),this._updateSteps(),this._observer=new ResizeObserver(()=>{this._updateSteps();let r=parseInt(this.ref["input-el"].value,10);this._updateValue(r)}),this._observer.observe(this),this._thumbSize=parseInt(window.getComputedStyle(this).getPropertyValue("--l-thumb-size"),10),setTimeout(()=>{let r=parseInt(this.ref["input-el"].value,10);this._updateValue(r)},0),this.sub("disabled",r=>{let i=this.ref["input-el"];r?i.setAttribute("disabled","disabled"):i.removeAttribute("disabled")});let n=this.ref["input-el"];n.addEventListener("focus",()=>{this.style.setProperty("--color-effect","var(--hover-color-rgb)")}),n.addEventListener("blur",()=>{this.style.setProperty("--color-effect","var(--idle-color-rgb)")})}_updateValue(n){this._updateZeroDot(n);let{width:r}=this.getBoundingClientRect(),o=100/(this.$.max-this.$.min)*(n-this.$.min)*(r-this._thumbSize)/100;window.requestAnimationFrame(()=>{this.ref["thumb-el"].style.transform=`translateX(${o}px)`})}_updateZeroDot(n){if(!this._zeroDotEl)return;n===this._zero?this._zeroDotEl.style.opacity="0":this._zeroDotEl.style.opacity="0.2";let{width:r}=this.getBoundingClientRect(),o=100/(this.$.max-this.$.min)*(this._zero-this.$.min)*(r-this._thumbSize)/100;window.requestAnimationFrame(()=>{this._zeroDotEl.style.transform=`translateX(${o}px)`})}_updateSteps(){let r=this.ref["steps-el"],{width:i}=r.getBoundingClientRect(),s=Math.ceil(i/2),o=Math.ceil(s/15)-2;if(this._stepsCount===o)return;let a=document.createDocumentFragment(),l=document.createElement("div"),c=document.createElement("div");l.className="minor-step",c.className="border-step",a.appendChild(c);for(let f=0;f<o;f++)a.appendChild(l.cloneNode());a.appendChild(c.cloneNode());for(let f=0;f<o;f++)a.appendChild(l.cloneNode());a.appendChild(c.cloneNode());let h=document.createElement("div");h.className="zero-dot",a.appendChild(h),this._zeroDotEl=h,r.innerHTML="",r.appendChild(a),this._stepsCount=o}destroyCallback(){var n;(n=this._observer)==null||n.disconnect()}}R2.template=`
  <div class="steps" ref="steps-el"></div>
  <div ref="thumb-el" class="thumb"></div>
  <input
    class="input"
    type="range"
    ref="input-el"
    tabindex="0"
    set="oninput: on.sliderInput; onchange: on.sliderChange; @min: min; @max: max; @value: defaultValue;"
  />
`;class b$ extends Ke{constructor(){super();V(this,"couldBeCtxOwner",!0);V(this,"activityType",fe.activities.CLOUD_IMG_EDIT);this.init$={...this.init$,cdnUrl:null}}initCallback(){super.initCallback(),this.registerActivity(this.activityType,{onActivate:()=>this.mountEditor(),onDeactivate:()=>this.unmountEditor()}),this.sub("*focusedEntry",n=>{n&&(this.entry=n,this.entry.subscribe("cdnUrl",r=>{r&&(this.$.cdnUrl=r)}))}),this.subConfigValue("cropPreset",n=>{this._instance&&this._instance.getAttribute("crop-preset")!==n&&this._instance.setAttribute("crop-preset",n)}),this.subConfigValue("cloudImageEditorTabs",n=>{this._instance&&this._instance.getAttribute("tabs")!==n&&this._instance.setAttribute("tabs",n)})}handleApply(n){if(!this.entry)return;let r=n.detail;this.entry.setMultipleValues({cdnUrl:r.cdnUrl,cdnUrlModifiers:r.cdnUrlModifiers}),this.historyBack()}handleCancel(){this.historyBack()}mountEditor(){const n=new xa,r=this.$.cdnUrl,i=this.cfg.cropPreset,s=this.cfg.cloudImageEditorTabs;n.setAttribute("ctx-name",this.ctxName),n.setAttribute("cdn-url",r),i&&n.setAttribute("crop-preset",i),s&&n.setAttribute("tabs",s),n.addEventListener("apply",o=>{const a=o;this.handleApply(a),this.debugPrint('editor event "apply"',a.detail)}),n.addEventListener("cancel",o=>{const a=o;this.handleCancel(),this.debugPrint('editor event "cancel"',a.detail)}),n.addEventListener("change",o=>{const a=o;this.debugPrint('editor event "change"',a.detail)}),this.innerHTML="",this.appendChild(n),this._mounted=!0,this._instance=n}unmountEditor(){this._instance=void 0,this.innerHTML=""}}const T$=function(t){return t.replace(/[\\-\\[]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&")},C$=function(t,e="i"){const n=t.split("*").map(T$);return new RegExp("^"+n.join(".+")+"$",e)};let I$=t=>Object.keys(t).reduce((n,r)=>{let i=t[r],s=Object.keys(i).reduce((o,a)=>{let l=i[a];return o+`${a}: ${l};`},"");return n+`${r}{${s}}`},"");function S$({textColor:t,backgroundColor:e,linkColor:n,linkColorHover:r,shadeColor:i}){let s=`solid 1px ${i}`;return I$({body:{color:t,"background-color":e},".side-bar":{background:"inherit","border-right":s},".main-content":{background:"inherit"},".main-content-header":{background:"inherit"},".main-content-footer":{background:"inherit"},".list-table-row":{color:"inherit"},".list-table-row:hover":{background:i},".list-table-row .list-table-cell-a, .list-table-row .list-table-cell-b":{"border-top":s},".list-table-body .list-items":{"border-bottom":s},".bread-crumbs a":{color:n},".bread-crumbs a:hover":{color:r},".main-content.loading":{background:`${e} url(/static/images/loading_spinner.gif) center no-repeat`,"background-size":"25px 25px"},".list-icons-item":{"background-color":i},".source-gdrive .side-bar-menu a, .source-gphotos .side-bar-menu a":{color:n},".source-gdrive .side-bar-menu a, .source-gphotos .side-bar-menu a:hover":{color:r},".side-bar-menu a":{color:n},".side-bar-menu a:hover":{color:r},".source-gdrive .side-bar-menu .current, .source-gdrive .side-bar-menu a:hover, .source-gphotos .side-bar-menu .current, .source-gphotos .side-bar-menu a:hover":{color:r},".source-vk .side-bar-menu a":{color:n},".source-vk .side-bar-menu a:hover":{color:r,background:"none"}})}let $i={};window.addEventListener("message",t=>{let e;try{e=JSON.parse(t.data)}catch{return}if((e==null?void 0:e.type)in $i){let n=$i[e.type];for(let[r,i]of n)t.source===r&&i(e)}});const A$=function(t,e,n){t in $i||($i[t]=[]),$i[t].push([e,n])},x$=function(t,e){t in $i&&($i[t]=$i[t].filter(n=>n[0]!==e))};function k$(t){let e=[];for(let[n,r]of Object.entries(t))r==null||typeof r=="string"&&r.length===0||e.push(`${n}=${encodeURIComponent(r)}`);return e.join("&")}class N2 extends Ke{constructor(){super();V(this,"couldBeCtxOwner",!0);V(this,"activityType",fe.activities.EXTERNAL);V(this,"_iframe",null);this.init$={...this.init$,activityIcon:"",activityCaption:"",selectedList:[],counter:0,multiple:!1,onDone:()=>{for(const n of this.$.selectedList){const r=this.extractUrlFromMessage(n),{filename:i}=n,{externalSourceType:s}=this.activityParams;this.addFileFromUrl(r,{fileName:i,source:s})}this.$["*currentActivity"]=fe.activities.UPLOAD_LIST},onCancel:()=>{this.historyBack()}}}initCallback(){super.initCallback(),this.registerActivity(this.activityType,{onActivate:()=>{let{externalSourceType:n}=this.activityParams;this.set$({activityCaption:`${n==null?void 0:n[0].toUpperCase()}${n==null?void 0:n.slice(1)}`,activityIcon:n}),this.mountIframe()}}),this.sub("*currentActivity",n=>{n!==this.activityType&&this.unmountIframe()}),this.sub("selectedList",n=>{this.$.counter=n.length}),this.subConfigValue("multiple",n=>{this.$.multiple=n})}extractUrlFromMessage(n){if(n.alternatives){const r=Gr(this.cfg.externalSourcesPreferredTypes);for(const i of r){const s=C$(i);for(const[o,a]of Object.entries(n.alternatives))if(s.test(o))return a}}return n.url}sendMessage(n){var r,i;(i=(r=this._iframe)==null?void 0:r.contentWindow)==null||i.postMessage(JSON.stringify(n),"*")}async handleFileSelected(n){!this.$.multiple&&this.$.selectedList.length||(this.$.selectedList=[...this.$.selectedList,n],this.$.multiple||this.$.onDone())}handleIframeLoad(){this.applyStyles()}getCssValue(n){return window.getComputedStyle(this).getPropertyValue(n).trim()}applyStyles(){let n={backgroundColor:this.getCssValue("--clr-background-light"),textColor:this.getCssValue("--clr-txt"),shadeColor:this.getCssValue("--clr-shade-lv1"),linkColor:"#157cfc",linkColorHover:"#3891ff"};this.sendMessage({type:"embed-css",style:S$(n)})}remoteUrl(){var c,h;const{pubkey:n,remoteTabSessionKey:r,socialBaseUrl:i}=this.cfg,{externalSourceType:s}=this.activityParams,a={lang:((h=(c=this.l10n("social-source-lang"))==null?void 0:c.split("-"))==null?void 0:h[0])||"en",public_key:n,images_only:"false",pass_window_open:!1,session_key:r},l=new URL(`/window3/${s}`,i);return l.search=k$(a),l.toString()}mountIframe(){let n=Ry({tag:"iframe",attributes:{src:this.remoteUrl(),marginheight:0,marginwidth:0,frameborder:0,allowTransparency:!0}});n.addEventListener("load",this.handleIframeLoad.bind(this)),this.ref.iframeWrapper.innerHTML="",this.ref.iframeWrapper.appendChild(n),A$("file-selected",n.contentWindow,this.handleFileSelected.bind(this)),this._iframe=n,this.$.selectedList=[]}unmountIframe(){this._iframe&&x$("file-selected",this._iframe.contentWindow),this.ref.iframeWrapper.innerHTML="",this._iframe=null,this.$.selectedList=[],this.$.counter=0}}N2.template=`
  <lr-activity-header>
    <button type="button" class="mini-btn" set="onclick: *historyBack">
      <lr-icon name="back"></lr-icon>
    </button>
    <div>
      <lr-icon set="@name: activityIcon"></lr-icon>
      <span>{{activityCaption}}</span>
    </div>
    <button type="button" class="mini-btn close-btn" set="onclick: *historyBack">
      <lr-icon name="close"></lr-icon>
    </button>
  </lr-activity-header>
  <div class="content">
    <div ref="iframeWrapper" class="iframe-wrapper"></div>
    <div class="toolbar">
      <button type="button" class="cancel-btn secondary-btn" set="onclick: onCancel" l10n="cancel"></button>
      <div></div>
      <div set="@hidden: !multiple" class="selected-counter"><span l10n="selected-count"></span>{{counter}}</div>
      <button type="button" class="done-btn primary-btn" set="onclick: onDone; @disabled: !counter">
        <lr-icon name="check"></lr-icon>
      </button>
    </div>
  </div>
`;class ev extends Ne{setCurrentTab(e){if(!e)return;[...this.ref.context.querySelectorAll("[tab-ctx]")].forEach(r=>{r.getAttribute("tab-ctx")===e?r.removeAttribute("hidden"):r.setAttribute("hidden","")});for(let r in this._tabMap)r===e?this._tabMap[r].setAttribute("current",""):this._tabMap[r].removeAttribute("current")}initCallback(){super.initCallback(),this._tabMap={},this.defineAccessor("tab-list",e=>{if(!e)return;Gr(e).forEach(r=>{let i=Ry({tag:"div",attributes:{class:"tab"},properties:{onclick:()=>{this.setCurrentTab(r)}}});i.textContent=this.l10n(r),this.ref.row.appendChild(i),this._tabMap[r]=i})}),this.defineAccessor("default",e=>{this.setCurrentTab(e)}),this.hasAttribute("default")||this.setCurrentTab(Object.keys(this._tabMap)[0])}}ev.bindAttributes({"tab-list":null,default:null});ev.template=`
  <div ref="row" class="tabs-row"></div>
  <div ref="context" class="tabs-context">
    <slot></slot>
  </div>
`;class P$ extends Ke{constructor(){super(...arguments);V(this,"requireCtxName",!0)}_createValidationInput(){const n=document.createElement("input");return n.type="text",n.name=this.ctxName,n.required=this.cfg.multipleMin>0,n.tabIndex=-1,EI(n,{opacity:0,height:0,width:0}),n}initCallback(){super.initCallback(),this._validationInputElement=this._createValidationInput(),this.appendChild(this._validationInputElement),this.sub("*collectionState",n=>{var r;{if(this._dynamicInputsContainer||(this._dynamicInputsContainer=document.createElement("div"),this.appendChild(this._dynamicInputsContainer)),!this._validationInputElement){const a=this._createValidationInput();this.appendChild(a),this._validationInputElement=a}if(this._dynamicInputsContainer.innerHTML="",n.status==="uploading"||n.status==="idle"){this._validationInputElement.value="",this._validationInputElement.setCustomValidity("");return}if(n.status==="failed"){const a=(r=n.errors[0])==null?void 0:r.message;this._validationInputElement.value="",this._validationInputElement.setCustomValidity(a);return}const i=n.group?n.group:null;if(i){this._validationInputElement.value=i.cdnUrl,this._validationInputElement.setCustomValidity("");return}const s=n.allEntries.map(a=>a.cdnUrl);if(!this.cfg.multiple&&s.length===1){this._validationInputElement.value=s[0],this._validationInputElement.setCustomValidity("");return}this._validationInputElement.remove(),this._validationInputElement=null;const o=new DocumentFragment;for(let a of s){const l=document.createElement("input");l.type="hidden",l.name=`${this.ctxName}[]`,l.value=a,o.appendChild(l)}this._dynamicInputsContainer.replaceChildren(o)}},!1)}}class R$ extends fe{}class O2 extends Ne{constructor(){super(...arguments);V(this,"init$",{...this.init$,currentText:"",options:[],selectHtml:"",onSelect:n=>{var r;n.preventDefault(),n.stopPropagation(),this.value=this.ref.select.value,this.$.currentText=((r=this.$.options.find(i=>i.value==this.value))==null?void 0:r.text)||"",this.dispatchEvent(new Event("change"))}})}initCallback(){super.initCallback(),this.sub("options",n=>{var i;this.$.currentText=((i=n==null?void 0:n[0])==null?void 0:i.text)||"";let r="";n==null||n.forEach(s=>{r+=`<option value="${s.value}">${s.text}</option>`}),this.$.selectHtml=r})}}O2.template=`
  <button>
    {{currentText}}
    <lr-icon name="select"></lr-icon>
    <select ref="select" set="innerHTML: selectHtml; onchange: onSelect"></select>
  </button>
`;const en={PLAY:"play",PAUSE:"pause",FS_ON:"fullscreen-on",FS_OFF:"fullscreen-off",VOL_ON:"unmute",VOL_OFF:"mute",CAP_ON:"captions",CAP_OFF:"captions-off"},s1={requestFullscreen:t=>{t.requestFullscreen?t.requestFullscreen():t.webkitRequestFullscreen&&t.webkitRequestFullscreen()},exitFullscreen:()=>{document.exitFullscreen?document.exitFullscreen():document.webkitExitFullscreen&&document.webkitExitFullscreen()}};class Pr extends Ne{constructor(){super(...arguments);V(this,"init$",{...this.init$,src:"",ppIcon:en.PLAY,fsIcon:en.FS_ON,volIcon:en.VOL_ON,capIcon:en.CAP_OFF,totalTime:"00:00",currentTime:"00:00",progressCssWidth:"0",hasSubtitles:!1,volumeDisabled:!1,volumeValue:0,onPP:()=>{this.togglePlay()},onFs:()=>{this.toggleFullscreen()},onCap:()=>{this.toggleCaptions()},onMute:()=>{this.toggleSound()},onVolChange:n=>{let r=parseFloat(n.currentTarget.$.value);this.setVolume(r)},progressClicked:n=>{let r=this.progress.getBoundingClientRect();this._video.currentTime=this._video.duration*(n.offsetX/r.width)}})}togglePlay(){this._video.paused||this._video.ended?this._video.play():this._video.pause()}toggleFullscreen(){(document.fullscreenElement||document.webkitFullscreenElement)===this?s1.exitFullscreen():s1.requestFullscreen(this)}toggleCaptions(){this.$.capIcon===en.CAP_OFF?(this.$.capIcon=en.CAP_ON,this._video.textTracks[0].mode="showing",window.localStorage.setItem(Pr.is+":captions","1")):(this.$.capIcon=en.CAP_OFF,this._video.textTracks[0].mode="hidden",window.localStorage.removeItem(Pr.is+":captions"))}toggleSound(){this.$.volIcon===en.VOL_ON?(this.$.volIcon=en.VOL_OFF,this.$.volumeDisabled=!0,this._video.muted=!0):(this.$.volIcon=en.VOL_ON,this.$.volumeDisabled=!1,this._video.muted=!1)}setVolume(n){window.localStorage.setItem(Pr.is+":volume",n);let r=n?n/100:0;this._video.volume=r}get progress(){return this.ref.progress}_getUrl(n){return n.includes("/")?n:`https://ucarecdn.com/${n}/`}_desc2attrs(n){let r=[];for(let i in n){let s=i==="src"?this._getUrl(n[i]):n[i];r.push(`${i}="${s}"`)}return r.join(" ")}_timeFmt(n){let r=new Date(Math.round(n)*1e3);return[r.getMinutes(),r.getSeconds()].map(i=>i<10?"0"+i:i).join(":")}_initTracks(){[...this._video.textTracks].forEach(n=>{n.mode="hidden"}),window.localStorage.getItem(Pr.is+":captions")&&this.toggleCaptions()}_castAttributes(){let n=["autoplay","loop","muted"];[...this.attributes].forEach(r=>{n.includes(r.name)&&this._video.setAttribute(r.name,r.value)})}initCallback(){super.initCallback(),this._video=this.ref.video,this._castAttributes(),this._video.addEventListener("play",()=>{this.$.ppIcon=en.PAUSE,this.setAttribute("playback","")}),this._video.addEventListener("pause",()=>{this.$.ppIcon=en.PLAY,this.removeAttribute("playback")}),this.addEventListener("fullscreenchange",r=>{console.log(r),document.fullscreenElement===this?this.$.fsIcon=en.FS_OFF:this.$.fsIcon=en.FS_ON}),this.sub("src",r=>{if(!r)return;let i=this._getUrl(r);this._video.src=i}),this.sub("video",async r=>{if(!r)return;let i=await(await window.fetch(this._getUrl(r))).json();i.poster&&(this._video.poster=this._getUrl(i.poster));let s="";i==null||i.sources.forEach(o=>{s+=`<source ${this._desc2attrs(o)} />`}),i.tracks&&(i.tracks.forEach(o=>{s+=`<track ${this._desc2attrs(o)} />`}),this.$.hasSubtitles=!0),this._video.innerHTML+=s,this._initTracks(),console.log(i)}),this._video.addEventListener("loadedmetadata",r=>{this.$.currentTime=this._timeFmt(this._video.currentTime),this.$.totalTime=this._timeFmt(this._video.duration)}),this._video.addEventListener("timeupdate",r=>{let i=Math.round(100*(this._video.currentTime/this._video.duration));this.$.progressCssWidth=i+"%",this.$.currentTime=this._timeFmt(this._video.currentTime)});let n=window.localStorage.getItem(Pr.is+":volume");if(n){let r=parseFloat(n);this.setVolume(r),this.$.volumeValue=r}}}Pr.template=`
  <div class="video-wrapper">
    <video ref="video" preload="metadata" crossorigin="anonymous"></video>
  </div>

  <div class="toolbar">
    <div class="progress" ref="progress" set -onclick="progressClicked">
      <div class="bar" set -style.width="progressCssWidth"></div>
    </div>

    <div class="tb-block">
      <button set -onclick="onPP">
        <lr-icon set -@name="ppIcon"></lr-icon>
      </button>
      <div class="timer">{{currentTime}} / {{totalTime}}</div>
    </div>

    <div class="tb-block">
      <button set -onclick="onCap" -@hidden="!hasSubtitles">
        <lr-icon set -@name="capIcon"></lr-icon>
      </button>

      <button set -onclick="onMute">
        <lr-icon set -@name="volIcon"></lr-icon>
      </button>

      <lr-range type="range" set -onchange="onVolChange" -@disabled="volumeDisabled" -value="volumeValue"> </lr-range>

      <button set -onclick="onFs">
        <lr-icon set -@name="fsIcon"></lr-icon>
      </button>
    </div>
  </div>
`;Pr.bindAttributes({video:"video",src:"src"});class L2 extends Ne{initCallback(){super.initCallback(),this.subConfigValue("removeCopyright",e=>{this.toggleAttribute("hidden",!!e)})}}V(L2,"template",`
    <a
      href="https://uploadcare.com/?utm_source=copyright&utm_medium=referral&utm_campaign=v4"
      target="_blank noopener"
      class="credits"
      >Powered by Uploadcare</a
    >
  `);class tv extends Ne{constructor(){super(...arguments);V(this,"requireCtxName",!0);V(this,"init$",$I(this));V(this,"_template",null)}static set template(n){this._template=n+"<slot></slot>"}static get template(){return this._template}}class nv extends tv{initCallback(){super.initCallback(),this.sub("*modalActive",e=>{this._lastModalActive!==e&&this.emit(e?tt.MODAL_OPEN:tt.MODAL_CLOSE,void 0,{debounce:!0}),this._lastModalActive=e},!1)}}nv.template=`
  <lr-simple-btn></lr-simple-btn>

  <lr-modal strokes block-body-scrolling>
    <lr-start-from>
      <lr-drop-area with-icon clickable></lr-drop-area>
      <lr-source-list wrap></lr-source-list>
      <button type="button" l10n="start-from-cancel" class="secondary-btn" set="onclick: *historyBack"></button>
      <lr-copyright></lr-copyright>
    </lr-start-from>
    <lr-upload-list></lr-upload-list>
    <lr-camera-source></lr-camera-source>
    <lr-url-source></lr-url-source>
    <lr-external-source></lr-external-source>
    <lr-cloud-image-editor-activity></lr-cloud-image-editor-activity>
  </lr-modal>

  <lr-progress-bar-common></lr-progress-bar-common>
`;class Qd extends tv{initCallback(){super.initCallback();const e=this.ref.uBlock;this.sub("*currentActivity",n=>{n||(this.$["*currentActivity"]=e.initActivity||fe.activities.START_FROM)}),this.sub("*uploadList",n=>{(n==null?void 0:n.length)>0?this.$["*currentActivity"]=fe.activities.UPLOAD_LIST:this.$["*currentActivity"]=e.initActivity||fe.activities.START_FROM}),this.subConfigValue("sourceList",n=>{n!=="local"&&(this.cfg.sourceList="local")}),this.subConfigValue("confirmUpload",n=>{n!==!1&&(this.cfg.confirmUpload=!1)})}}Qd.template=`
  <lr-start-from>
    <lr-drop-area clickable l10n="choose-file"></lr-drop-area>
    <lr-copyright></lr-copyright>
  </lr-start-from>
  <lr-upload-list ref="uBlock"></lr-upload-list>
`;class D2 extends tv{constructor(){super(),this.init$={...this.init$,couldCancel:!1,cancel:()=>{this.couldHistoryBack?this.$["*historyBack"]():this.couldShowList&&(this.$["*currentActivity"]=fe.activities.UPLOAD_LIST)}}}get couldHistoryBack(){const e=this.$["*history"];return e.length>1&&e[e.length-1]!==fe.activities.START_FROM}get couldShowList(){return this.cfg.showEmptyList||this.$["*uploadList"].length>0}initCallback(){super.initCallback();const e=this.ref.uBlock;this.sub("*currentActivity",n=>{n||(this.$["*currentActivity"]=e.initActivity||fe.activities.START_FROM)}),this.sub("*uploadList",n=>{(n==null?void 0:n.length)>0&&this.$["*currentActivity"]===(e.initActivity||fe.activities.START_FROM)&&(this.$["*currentActivity"]=fe.activities.UPLOAD_LIST)}),this.sub("*history",()=>{this.$.couldCancel=this.couldHistoryBack||this.couldShowList})}}D2.template=` <lr-start-from>
    <lr-drop-area with-icon clickable></lr-drop-area>
    <lr-source-list wrap></lr-source-list>
    <button
      type="button"
      l10n="start-from-cancel"
      class="cancel-btn secondary-btn"
      set="onclick: cancel; @hidden: !couldCancel"
    ></button>
    <lr-copyright></lr-copyright>
  </lr-start-from>
  <lr-upload-list ref="uBlock"></lr-upload-list>
  <lr-camera-source></lr-camera-source>
  <lr-url-source></lr-url-source>
  <lr-external-source></lr-external-source>
  <lr-progress-bar></lr-progress-bar>
  <lr-cloud-image-editor-activity></lr-cloud-image-editor-activity>`;class N$ extends xa{initCallback(){super.initCallback(),this.__shadowReady=!0,this.$["*faderEl"]=this.ref["fader-el"],this.$["*cropperEl"]=this.ref["cropper-el"],this.$["*imgContainerEl"]=this.ref["img-container-el"],this.initEditor()}async initEditor(){this.__shadowReady&&await super.initEditor()}}function Lu(t){for(let e in t){let n=[...e].reduce((r,i)=>(i.toUpperCase()===i&&(i="-"+i.toLowerCase()),r+=i),"");n.startsWith("-")&&(n=n.replace("-","")),n.startsWith("lr-")||(n="lr-"+n),t[e].reg&&t[e].reg(n)}}const ep="LR";async function O$(t,e=!1){return new Promise((n,r)=>{if(typeof document!="object"){n(null);return}if(typeof window=="object"&&window[ep]){n(window[ep]);return}let i=document.createElement("script");i.async=!0,i.src=t,i.onerror=()=>{r()},i.onload=()=>{let s=window[ep];e&&Lu(s),n(s)},document.head.appendChild(i)})}const rv=Object.freeze(Object.defineProperty({__proto__:null,ActivityBlock:fe,ActivityHeader:R$,BaseComponent:Ud,Block:Ne,CameraSource:g2,CloudImageEditor:N$,CloudImageEditorActivity:b$,CloudImageEditorBlock:xa,Config:e2,ConfirmationDialog:v2,Copyright:L2,CropFrame:b2,Data:xe,DropArea:qy,EditorCropButtonControl:T2,EditorFilterControl:Yy,EditorImageCropper:S2,EditorImageFader:v$,EditorOperationControl:I2,EditorScroller:A2,EditorSlider:C2,EditorToolbar:x2,ExternalSource:N2,FileItem:ks,FilePreview:Qy,FileUploaderInline:D2,FileUploaderMinimal:Qd,FileUploaderRegular:nv,FormInput:P$,Icon:Hy,Img:bU,LineLoaderUi:k2,LrBtnUi:Zy,Modal:Ky,PACKAGE_NAME:Uy,PACKAGE_VERSION:$y,PresenceToggle:P2,ProgressBar:w2,ProgressBarCommon:_2,Select:O2,SimpleBtn:Wy,SliderUi:R2,SourceBtn:Gy,SourceList:kU,StartFrom:n2,Tabs:ev,UID:Nu,UploadCtxProvider:Nm,UploadList:p2,UploaderBlock:Ke,UrlSource:m2,Video:Pr,connectBlocksFrom:O$,defineLocale:jI,registerBlocks:Lu,toKebabCase:qd},Symbol.toStringTag,{value:"Module"})),L$=new Set(["children","ref","style","className"]),D$=(t={})=>Object==null?void 0:Object.keys(t).reduce((e,n)=>{var r,i;const s=t==null?void 0:t[n],o=`on${(i=(r=s==null?void 0:s.split("-"))==null?void 0:r.map(a=>a.charAt(0).toUpperCase()+a.slice(1)))==null?void 0:i.join("")}`;return e[o]=s,e},{}),o1=new WeakMap,M$=t=>{let e=o1.get(t);return e===void 0&&(e=new Map,o1.set(t,e)),e},a1=({node:t,nameProp:e,valueProp:n,prevValueProp:r,event:i})=>{if(i!==void 0){if(n!==r){const s=M$(t),o=s.has(i);let a=s.get(i);n!==void 0?o?a.handleEvent=n:(a={handleEvent:n},s.set(i,a),t.addEventListener(i,l=>a.handleEvent(l.detail))):o&&(s.delete(i),t.removeEventListener(i,a))}return}t[e]=n,n==null&&e in HTMLElement.prototype&&t.removeAttribute(e)},V$=(t,e,n)=>{const r={},i={};return Object.entries(t).forEach(([s,o])=>{L$.has(s)?r[s==="className"?"class":s]=o:e.has(s)||s in n.prototype?i[s]=o:r[s]=o}),{reactProps:r,customElProps:i}},Du=({react:t,tag:e,elClass:n,schemaEvents:r})=>{const i=D$(r),s=new Set(Object.keys(i??{})),o=t.forwardRef((a,l)=>{const c=t.useRef(new Map),h=t.useRef(null),{reactProps:f,customElProps:p}=V$(a,s,n);return t.useLayoutEffect(()=>{if(h.current===null)return;const _=new Map;for(const E in p)a1({node:h.current,nameProp:E,valueProp:p[E],prevValueProp:c.current.get(E),event:i[E]}),c.current.delete(E),_.set(E,a[E]);for(const[E,I]of c.current)a1({node:h.current,nameProp:E,valueProp:void 0,prevValueProp:I,event:i[E]});c.current=_}),t.createElement(e??n.__tag,{...f,ref:t.useCallback(_=>{h.current=_,typeof l=="function"?l(_):l!==null&&(l.current=_)},[l])})});return o.displayName=n.name,o},U$=Du({react:Xt,tag:"lr-config",elClass:e2}),$$=Du({react:Xt,tag:"lr-upload-ctx-provider",elClass:Nm,schemaEvents:Nm.EventType}),F$=t=>{const e={},n={};return Object.entries(t).forEach(([r,i])=>{r.startsWith("on")?e[r]=i:n[r]=i}),{eventHandlers:e,config:n}},j$="0.5.2",z$="React-Uploader",B$=()=>`${z$}/${j$}`,H$=({condition:t,fallback:e,children:n,...r})=>t?Xt.createElement(L.Suspense,{fallback:e,...r},n):Xt.createElement(Xt.Fragment,null,e),W$=()=>{const[t,e]=L.useState(!1);return L.useEffect(()=>{typeof window<"u"&&e(!0)},[]),t};Lu(rv);const q$=Du({react:Xt,tag:"lr-file-uploader-regular",elClass:nv}),G$=({ctxName:t,className:e,classNameUploader:n,apiRef:r,fallback:i,...s})=>{const o=L.useMemo(()=>t??Nu.generate(),[t]),{eventHandlers:a,config:l}=L.useMemo(()=>F$(s),[s]),c=W$();return Xt.createElement(H$,{condition:c,fallback:i},Xt.createElement("div",{className:e},Xt.createElement(U$,{userAgentIntegration:B$(),"ctx-name":o,...l}),Xt.createElement($$,{ref:r,"ctx-name":o,...a}),Xt.createElement(q$,{class:n,"ctx-name":o})))};Lu(rv);Du({react:Xt,tag:"lr-file-uploader-minimal",elClass:Qd});Lu(rv);Du({react:Xt,tag:"lr-file-uploader-inline",elClass:Qd});const K$=({fileEntry:t,onChange:e})=>{const n=L.useRef(null),r=o=>{const a=o.successEntries.map(l=>({cdnUrl:l.cdnUrl||null,uuid:l.uuid||null}));e({files:a}),console.log("The uploaded file event is: ",a)},i=L.useCallback(o=>e({files:t.files.filter(a=>a.uuid!==o)}),[t.files,e]),s=()=>{var o;(o=n.current)==null||o.uploadCollection.clearAll(),e({files:[]})};return A.jsxs("div",{children:[A.jsx(G$,{maxLocalFileSizeBytes:1e7,multipleMax:50,imgOnly:!0,sourceList:"local, url, camera, dropbox, instagram",removeCopyright:!0,confirmUpload:!1,onChange:r,pubkey:"e70c89d72eb677ec70b2"}),A.jsx("div",{className:"grid grid-cols-2 gap-4 mt-8",children:t.files.map(o=>A.jsxs("div",{className:"relative",children:[A.jsx("img",{src:`${o.cdnUrl}/-/format/webp/-/quality/smart/-/stretch/fill/
              `,alt:o.uuid??""}),A.jsx("div",{className:"cursor-pointer flex justify-center absolute -right-2 -top-2 bg-white border-2 border-slate-800  rounded-full w-7 h-7",children:A.jsx("button",{className:"text-slate-800 text-center",type:"button",onClick:()=>i(o.uuid),children:""})}),A.jsx("button",{onClick:s,children:"test"})]},o.uuid))})]})},M2=L.forwardRef(({className:t,...e},n)=>A.jsx("textarea",{className:_n("flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",t),ref:n,...e}));M2.displayName="Textarea";const Q$=()=>{const{user:t}=ns(),e=yu(),[n,r]=L.useState({files:[]}),[i,s]=L.useState({caption:"",photos:[],likes:0,userLikes:[],userId:"",date:new Date}),o=async a=>{a.preventDefault(),console.log("Uploaded File Entry: ",n.files),console.log("The create post is: ",i);const l=n.files.map(c=>({cdnUrl:c.cdnUrl,uuid:c.uuid}));if(t!==null){const c={...i,photos:l,userId:(t==null?void 0:t.uid)||null};console.log("The final post:",c),await v3(c),e("/edelgram/")}else e("/edelgram/login")};return A.jsx(kd,{children:A.jsx("div",{className:"flex justify-center",children:A.jsxs("div",{className:"border max-w-3xl w-full",children:[A.jsx("h3",{className:"bg-slate-800 text-white text-center text-lg p-2",children:"Create post"}),A.jsx("div",{className:"p-8",children:A.jsx("form",{onSubmit:o,children:A.jsxs("div",{className:"flex flex-col",children:[A.jsx(Mi,{className:"mb-4",htmlFor:"caption",children:"Photo caption"}),A.jsx(M2,{className:"mb-8",id:"caption",placeholder:"Write something....",value:i.caption,onChange:a=>s({...i,caption:a.target.value})}),A.jsxs("div",{className:"flex flex-col",children:[A.jsx(Mi,{className:"mb-4",htmlFor:"photo",children:"Photos"}),A.jsx(K$,{fileEntry:n,onChange:r})]}),A.jsx(Ms,{className:"mt-8 w-32",type:"submit",children:"Post"})]})})})]})})})};/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */function X$(t,e,n,r){function i(s){return s instanceof n?s:new n(function(o){o(s)})}return new(n||(n=Promise))(function(s,o){function a(h){try{c(r.next(h))}catch(f){o(f)}}function l(h){try{c(r.throw(h))}catch(f){o(f)}}function c(h){h.done?s(h.value):i(h.value).then(a,l)}c((r=r.apply(t,[])).next())})}function Y$(t,e){var n={label:0,sent:function(){if(s[0]&1)throw s[1];return s[1]},trys:[],ops:[]},r,i,s,o;return o={next:a(0),throw:a(1),return:a(2)},typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function a(c){return function(h){return l([c,h])}}function l(c){if(r)throw new TypeError("Generator is already executing.");for(;n;)try{if(r=1,i&&(s=c[0]&2?i.return:c[0]?i.throw||((s=i.return)&&s.call(i),0):i.next)&&!(s=s.call(i,c[1])).done)return s;switch(i=0,s&&(c=[c[0]&2,s.value]),c[0]){case 0:case 1:s=c;break;case 4:return n.label++,{value:c[1],done:!1};case 5:n.label++,i=c[1],c=[0];continue;case 7:c=n.ops.pop(),n.trys.pop();continue;default:if(s=n.trys,!(s=s.length>0&&s[s.length-1])&&(c[0]===6||c[0]===2)){n=0;continue}if(c[0]===3&&(!s||c[1]>s[0]&&c[1]<s[3])){n.label=c[1];break}if(c[0]===6&&n.label<s[1]){n.label=s[1],s=c;break}if(s&&n.label<s[2]){n.label=s[2],n.ops.push(c);break}s[2]&&n.ops.pop(),n.trys.pop();continue}c=e.call(t,n)}catch(h){c=[6,h],i=0}finally{r=s=0}if(c[0]&5)throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}}/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var Mo=function(){return Mo=Object.assign||function(e){for(var n,r=1,i=arguments.length;r<i;r++){n=arguments[r];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},Mo.apply(this,arguments)},V2=function(t){return{loading:t==null,value:t}},J$=function(){return function(t,e){switch(e.type){case"error":return Mo(Mo({},t),{error:e.error,loading:!1,value:void 0});case"reset":return V2(e.defaultValue);case"value":return Mo(Mo({},t),{error:void 0,loading:!1,value:e.value});default:return t}}},Z$=function(t){var e=t?t():void 0,n=L.useReducer(J$(),V2(e)),r=n[0],i=n[1],s=L.useCallback(function(){var l=t?t():void 0;i({type:"reset",defaultValue:l})},[t]),o=L.useCallback(function(l){i({type:"error",error:l})},[]),a=L.useCallback(function(l){i({type:"value",value:l})},[]);return L.useMemo(function(){return{error:r.error,loading:r.loading,reset:s,setError:o,setValue:a,value:r.value}},[r.error,r.loading,s,o,a,r.value])},e6=function(t,e){var n=Z$(function(){return t.currentUser}),r=n.error,i=n.loading,s=n.setError,o=n.setValue,a=n.value;return L.useEffect(function(){var l=IT(t,function(c){return X$(void 0,void 0,void 0,function(){var h;return Y$(this,function(f){switch(f.label){case 0:return[3,4];case 1:return f.trys.push([1,3,,4]),[4,e.onUserChanged(c)];case 2:return f.sent(),[3,4];case 3:return h=f.sent(),s(h),[3,4];case 4:return o(c),[2]}})})},s);return function(){l()}},[t]),[a,i,r]};const t6=()=>{const t=VT(),[e,n]=e6(t),r=Gs();return n?A.jsx("div",{children:"Loading..."}):e?A.jsx(Bk,{}):A.jsx(zk,{to:"edelgram/login",state:{from:r}})},n6=Yk([{element:A.jsx(t6,{}),children:[{path:"/edelgram/",element:A.jsx(C3,{}),errorElement:A.jsx(fo,{})},{path:"/edelgram/myphotos",element:A.jsx(N3,{}),errorElement:A.jsx(fo,{})},{path:"/edelgram/createpost",element:A.jsx(Q$,{}),errorElement:A.jsx(fo,{})},{path:"/edelgram/profile",element:A.jsx(O3,{}),errorElement:A.jsx(fo,{})}]},{path:"/edelgram/login",element:A.jsx(P3,{}),errorElement:A.jsx(fo,{})},{path:"/edelgram/signup",element:A.jsx(D3,{}),errorElement:A.jsx(fo,{})}]),r6=()=>A.jsx(l3,{children:A.jsx(oP,{router:n6})});tp.createRoot(document.getElementById("root")).render(A.jsx(Xt.StrictMode,{children:A.jsx(r6,{})}));
